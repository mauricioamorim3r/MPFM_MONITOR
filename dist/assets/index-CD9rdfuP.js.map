{"version":3,"file":"index-CD9rdfuP.js","sources":["../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-down-right.js","../../node_modules/lucide-react/dist/esm/icons/arrow-up-right.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/beaker.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/calculator.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/clipboard-list.js","../../node_modules/lucide-react/dist/esm/icons/clipboard.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/database.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/droplets.js","../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/file-check.js","../../node_modules/lucide-react/dist/esm/icons/file-spreadsheet.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/file-up.js","../../node_modules/lucide-react/dist/esm/icons/filter.js","../../node_modules/lucide-react/dist/esm/icons/flame.js","../../node_modules/lucide-react/dist/esm/icons/flask-conical.js","../../node_modules/lucide-react/dist/esm/icons/gauge.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/layers.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/pen-line.js","../../node_modules/lucide-react/dist/esm/icons/pen-square.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../node_modules/lucide-react/dist/esm/icons/target.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/waves.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/tailwind-merge/dist/bundle-mjs.mjs","../../src/utils/index.ts","../../src/components/layout/Sidebar.tsx","../../src/components/ui/Badge.tsx","../../src/components/ui/Button.tsx","../../src/components/ui/Card.tsx","../../src/components/ui/Input.tsx","../../src/components/ui/Select.tsx","../../src/components/ui/Modal.tsx","../../src/components/ui/Tabs.tsx","../../src/components/ui/KPICard.tsx","../../src/components/ui/ProgressBar.tsx","../../src/components/ui/StepIndicator.tsx","../../src/components/ui/SectionHeader.tsx","../../src/components/ui/Toast.tsx","../../src/components/layout/Header.tsx","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../node_modules/zustand/esm/middleware.mjs","../../src/services/calculations.ts","../../src/store/useAppStore.ts","../../src/components/layout/Layout.tsx","../../src/components/charts/BalanceChart.tsx","../../src/components/calendar/DayCell.tsx","../../src/services/auditLog.ts","../../src/hooks/useAuditLog.ts","../../src/components/calendar/DayDetailModal.tsx","../../src/components/calendar/CalendarView.tsx","../../src/data/alerts.ts","../../src/data/realData.ts","../../src/components/monitoring/AlertsList.tsx","../../src/components/monitoring/DailyTable.tsx","../../src/components/monitoring/MetersList.tsx","../../src/components/monitoring/MonitoringDashboard.tsx","../../src/services/kFactorTracker.ts","../../src/services/alertEngine.ts","../../src/pages/Monitoring.tsx","../../src/components/calibration/CalibrationEventsList.tsx","../../src/components/calibration/steps/Step01Registro.tsx","../../src/components/calibration/steps/Step02PVT.tsx","../../src/components/calibration/steps/Step03Totalizadores.tsx","../../src/components/calibration/steps/Step04KFactors.tsx","../../src/components/calibration/steps/Step05Balanco.tsx","../../src/components/calibration/steps/Step06Monitoramento.tsx","../../src/components/calibration/steps/Step07Alarmes.tsx","../../src/components/calibration/CalibrationWorkflow.tsx","../../src/pages/Calibration.tsx","../../src/components/compliance/ComplianceDashboard.tsx","../../src/pages/Compliance.tsx","../../src/services/desenquadramento.ts","../../src/pages/Desenquadramento.tsx","../../node_modules/xlsx/xlsx.mjs","../../src/services/excelExport.ts","../../src/pages/RegistroDiario.tsx","../../src/components/modals/NewMeterModal.tsx","../../__vite-browser-external","../../node_modules/pdfjs-dist/build/pdf.js","../../src/services/pdfParser.ts","../../src/components/modals/ImportDataModal.tsx","../../src/services/dataExport.ts","../../src/components/modals/ExportDataModal.tsx","../../src/components/modals/NewCalibrationModal.tsx","../../src/hooks/useInitializeRealData.ts","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"Activity\", [\n  [\"path\", { d: \"M22 12h-4l-3 9L9 3l-3 9H2\", key: \"d5dnw9\" }]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDownRight = createLucideIcon(\"ArrowDownRight\", [\n  [\"path\", { d: \"m7 7 10 10\", key: \"1fmybs\" }],\n  [\"path\", { d: \"M17 7v10H7\", key: \"6fjiku\" }]\n]);\n\nexport { ArrowDownRight as default };\n//# sourceMappingURL=arrow-down-right.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowUpRight = createLucideIcon(\"ArrowUpRight\", [\n  [\"path\", { d: \"M7 7h10v10\", key: \"1tivn9\" }],\n  [\"path\", { d: \"M7 17 17 7\", key: \"1vkiza\" }]\n]);\n\nexport { ArrowUpRight as default };\n//# sourceMappingURL=arrow-up-right.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Beaker = createLucideIcon(\"Beaker\", [\n  [\"path\", { d: \"M4.5 3h15\", key: \"c7n0jr\" }],\n  [\"path\", { d: \"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3\", key: \"m1uhx7\" }],\n  [\"path\", { d: \"M6 14h12\", key: \"4cwo0f\" }]\n]);\n\nexport { Beaker as default };\n//# sourceMappingURL=beaker.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bell = createLucideIcon(\"Bell\", [\n  [\"path\", { d: \"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\", key: \"1qo2s2\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }]\n]);\n\nexport { Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calculator = createLucideIcon(\"Calculator\", [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", key: \"1nb95v\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"6\", y2: \"6\", key: \"x4nwl0\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"14\", y2: \"18\", key: \"wjye3r\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }],\n  [\"path\", { d: \"M12 18h.01\", key: \"mhygvu\" }],\n  [\"path\", { d: \"M8 18h.01\", key: \"lrp35t\" }]\n]);\n\nexport { Calculator as default };\n//# sourceMappingURL=calculator.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", ry: \"2\", key: \"eu3xkr\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeft\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ClipboardList = createLucideIcon(\"ClipboardList\", [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"M12 11h4\", key: \"1jrz19\" }],\n  [\"path\", { d: \"M12 16h4\", key: \"n85exb\" }],\n  [\"path\", { d: \"M8 11h.01\", key: \"1dfujw\" }],\n  [\"path\", { d: \"M8 16h.01\", key: \"18s6g9\" }]\n]);\n\nexport { ClipboardList as default };\n//# sourceMappingURL=clipboard-list.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clipboard = createLucideIcon(\"Clipboard\", [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ]\n]);\n\nexport { Clipboard as default };\n//# sourceMappingURL=clipboard.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Database = createLucideIcon(\"Database\", [\n  [\"ellipse\", { cx: \"12\", cy: \"5\", rx: \"9\", ry: \"3\", key: \"msslwz\" }],\n  [\"path\", { d: \"M3 5V19A9 3 0 0 0 21 19V5\", key: \"1wlel7\" }],\n  [\"path\", { d: \"M3 12A9 3 0 0 0 21 12\", key: \"mv7ke4\" }]\n]);\n\nexport { Database as default };\n//# sourceMappingURL=database.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplets = createLucideIcon(\"Droplets\", [\n  [\n    \"path\",\n    {\n      d: \"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z\",\n      key: \"1ptgy4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97\",\n      key: \"1sl1rz\"\n    }\n  ]\n]);\n\nexport { Droplets as default };\n//# sourceMappingURL=droplets.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"EyeOff\", [\n  [\"path\", { d: \"M9.88 9.88a3 3 0 1 0 4.24 4.24\", key: \"1jxqfv\" }],\n  [\n    \"path\",\n    {\n      d: \"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68\",\n      key: \"9wicm4\"\n    }\n  ],\n  [\n    \"path\",\n    { d: \"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61\", key: \"1jreej\" }\n  ],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\"path\", { d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\", key: \"rwhkz3\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileCheck = createLucideIcon(\"FileCheck\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"path\", { d: \"m9 15 2 2 4-4\", key: \"1grp1n\" }]\n]);\n\nexport { FileCheck as default };\n//# sourceMappingURL=file-check.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileSpreadsheet = createLucideIcon(\"FileSpreadsheet\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"path\", { d: \"M8 13h2\", key: \"yr2amv\" }],\n  [\"path\", { d: \"M8 17h2\", key: \"2yhykz\" }],\n  [\"path\", { d: \"M14 13h2\", key: \"un5t4a\" }],\n  [\"path\", { d: \"M14 17h2\", key: \"10kma7\" }]\n]);\n\nexport { FileSpreadsheet as default };\n//# sourceMappingURL=file-spreadsheet.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"13\", y2: \"13\", key: \"14keom\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"17\", y2: \"17\", key: \"17nazh\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"9\", y2: \"9\", key: \"1a5vjj\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileUp = createLucideIcon(\"FileUp\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"path\", { d: \"M12 12v6\", key: \"3ahymv\" }],\n  [\"path\", { d: \"m15 15-3-3-3 3\", key: \"15xj92\" }]\n]);\n\nexport { FileUp as default };\n//# sourceMappingURL=file-up.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Filter = createLucideIcon(\"Filter\", [\n  [\"polygon\", { points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\", key: \"1yg77f\" }]\n]);\n\nexport { Filter as default };\n//# sourceMappingURL=filter.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Flame = createLucideIcon(\"Flame\", [\n  [\n    \"path\",\n    {\n      d: \"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\",\n      key: \"96xj49\"\n    }\n  ]\n]);\n\nexport { Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FlaskConical = createLucideIcon(\"FlaskConical\", [\n  [\n    \"path\",\n    {\n      d: \"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2\",\n      key: \"pzvekw\"\n    }\n  ],\n  [\"path\", { d: \"M8.5 2h7\", key: \"csnxdl\" }],\n  [\"path\", { d: \"M7 16h10\", key: \"wp8him\" }]\n]);\n\nexport { FlaskConical as default };\n//# sourceMappingURL=flask-conical.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Gauge = createLucideIcon(\"Gauge\", [\n  [\"path\", { d: \"m12 14 4-4\", key: \"9kzdfg\" }],\n  [\"path\", { d: \"M3.34 19a10 10 0 1 1 17.32 0\", key: \"19p75a\" }]\n]);\n\nexport { Gauge as default };\n//# sourceMappingURL=gauge.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"Layers\", [\n  [\n    \"path\",\n    {\n      d: \"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z\",\n      key: \"8b97xw\"\n    }\n  ],\n  [\"path\", { d: \"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65\", key: \"dd6zsq\" }],\n  [\"path\", { d: \"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65\", key: \"ep9fru\" }]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PenLine = createLucideIcon(\"PenLine\", [\n  [\"path\", { d: \"M12 20h9\", key: \"t2du7b\" }],\n  [\"path\", { d: \"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z\", key: \"ymcmye\" }]\n]);\n\nexport { PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PenSquare = createLucideIcon(\"PenSquare\", [\n  [\"path\", { d: \"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1qinfi\" }],\n  [\"path\", { d: \"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z\", key: \"w2jsv5\" }]\n]);\n\nexport { PenSquare as default };\n//# sourceMappingURL=pen-square.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\"path\", { d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\", key: \"1owoqh\" }],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"Sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\",\n      key: \"17u4zn\"\n    }\n  ],\n  [\"path\", { d: \"M5 3v4\", key: \"bklmnn\" }],\n  [\"path\", { d: \"M19 17v4\", key: \"iiml17\" }],\n  [\"path\", { d: \"M3 5h4\", key: \"nem4j1\" }],\n  [\"path\", { d: \"M17 19h4\", key: \"lbex7p\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Target = createLucideIcon(\"Target\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n]);\n\nexport { Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TrendingUp = createLucideIcon(\"TrendingUp\", [\n  [\"polyline\", { points: \"22 7 13.5 15.5 8.5 10.5 2 17\", key: \"126l90\" }],\n  [\"polyline\", { points: \"16 7 22 7 22 13\", key: \"kwv8wd\" }]\n]);\n\nexport { TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Waves = createLucideIcon(\"Waves\", [\n  [\n    \"path\",\n    {\n      d: \"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"knzxuh\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"2jd2cc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"rd2r6e\"\n    }\n  ]\n]);\n\nexport { Waves as default };\n//# sourceMappingURL=waves.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * @license lucide-react v0.300.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","const CLASS_PART_SEPARATOR = '-';\nconst createClassGroupUtils = config => {\n  const classMap = createClassMap(config);\n  const {\n    conflictingClassGroups,\n    conflictingClassGroupModifiers\n  } = config;\n  const getClassGroupId = className => {\n    const classParts = className.split(CLASS_PART_SEPARATOR);\n    // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and remove it from classParts.\n    if (classParts[0] === '' && classParts.length !== 1) {\n      classParts.shift();\n    }\n    return getGroupRecursive(classParts, classMap) || getGroupIdForArbitraryProperty(className);\n  };\n  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {\n    const conflicts = conflictingClassGroups[classGroupId] || [];\n    if (hasPostfixModifier && conflictingClassGroupModifiers[classGroupId]) {\n      return [...conflicts, ...conflictingClassGroupModifiers[classGroupId]];\n    }\n    return conflicts;\n  };\n  return {\n    getClassGroupId,\n    getConflictingClassGroupIds\n  };\n};\nconst getGroupRecursive = (classParts, classPartObject) => {\n  if (classParts.length === 0) {\n    return classPartObject.classGroupId;\n  }\n  const currentClassPart = classParts[0];\n  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);\n  const classGroupFromNextClassPart = nextClassPartObject ? getGroupRecursive(classParts.slice(1), nextClassPartObject) : undefined;\n  if (classGroupFromNextClassPart) {\n    return classGroupFromNextClassPart;\n  }\n  if (classPartObject.validators.length === 0) {\n    return undefined;\n  }\n  const classRest = classParts.join(CLASS_PART_SEPARATOR);\n  return classPartObject.validators.find(({\n    validator\n  }) => validator(classRest))?.classGroupId;\n};\nconst arbitraryPropertyRegex = /^\\[(.+)\\]$/;\nconst getGroupIdForArbitraryProperty = className => {\n  if (arbitraryPropertyRegex.test(className)) {\n    const arbitraryPropertyClassName = arbitraryPropertyRegex.exec(className)[1];\n    const property = arbitraryPropertyClassName?.substring(0, arbitraryPropertyClassName.indexOf(':'));\n    if (property) {\n      // I use two dots here because one dot is used as prefix for class groups in plugins\n      return 'arbitrary..' + property;\n    }\n  }\n};\n/**\n * Exported for testing only\n */\nconst createClassMap = config => {\n  const {\n    theme,\n    prefix\n  } = config;\n  const classMap = {\n    nextPart: new Map(),\n    validators: []\n  };\n  const prefixedClassGroupEntries = getPrefixedClassGroupEntries(Object.entries(config.classGroups), prefix);\n  prefixedClassGroupEntries.forEach(([classGroupId, classGroup]) => {\n    processClassesRecursively(classGroup, classMap, classGroupId, theme);\n  });\n  return classMap;\n};\nconst processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {\n  classGroup.forEach(classDefinition => {\n    if (typeof classDefinition === 'string') {\n      const classPartObjectToEdit = classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition);\n      classPartObjectToEdit.classGroupId = classGroupId;\n      return;\n    }\n    if (typeof classDefinition === 'function') {\n      if (isThemeGetter(classDefinition)) {\n        processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);\n        return;\n      }\n      classPartObject.validators.push({\n        validator: classDefinition,\n        classGroupId\n      });\n      return;\n    }\n    Object.entries(classDefinition).forEach(([key, classGroup]) => {\n      processClassesRecursively(classGroup, getPart(classPartObject, key), classGroupId, theme);\n    });\n  });\n};\nconst getPart = (classPartObject, path) => {\n  let currentClassPartObject = classPartObject;\n  path.split(CLASS_PART_SEPARATOR).forEach(pathPart => {\n    if (!currentClassPartObject.nextPart.has(pathPart)) {\n      currentClassPartObject.nextPart.set(pathPart, {\n        nextPart: new Map(),\n        validators: []\n      });\n    }\n    currentClassPartObject = currentClassPartObject.nextPart.get(pathPart);\n  });\n  return currentClassPartObject;\n};\nconst isThemeGetter = func => func.isThemeGetter;\nconst getPrefixedClassGroupEntries = (classGroupEntries, prefix) => {\n  if (!prefix) {\n    return classGroupEntries;\n  }\n  return classGroupEntries.map(([classGroupId, classGroup]) => {\n    const prefixedClassGroup = classGroup.map(classDefinition => {\n      if (typeof classDefinition === 'string') {\n        return prefix + classDefinition;\n      }\n      if (typeof classDefinition === 'object') {\n        return Object.fromEntries(Object.entries(classDefinition).map(([key, value]) => [prefix + key, value]));\n      }\n      return classDefinition;\n    });\n    return [classGroupId, prefixedClassGroup];\n  });\n};\n\n// LRU cache inspired from hashlru (https://github.com/dominictarr/hashlru/blob/v1.0.4/index.js) but object replaced with Map to improve performance\nconst createLruCache = maxCacheSize => {\n  if (maxCacheSize < 1) {\n    return {\n      get: () => undefined,\n      set: () => {}\n    };\n  }\n  let cacheSize = 0;\n  let cache = new Map();\n  let previousCache = new Map();\n  const update = (key, value) => {\n    cache.set(key, value);\n    cacheSize++;\n    if (cacheSize > maxCacheSize) {\n      cacheSize = 0;\n      previousCache = cache;\n      cache = new Map();\n    }\n  };\n  return {\n    get(key) {\n      let value = cache.get(key);\n      if (value !== undefined) {\n        return value;\n      }\n      if ((value = previousCache.get(key)) !== undefined) {\n        update(key, value);\n        return value;\n      }\n    },\n    set(key, value) {\n      if (cache.has(key)) {\n        cache.set(key, value);\n      } else {\n        update(key, value);\n      }\n    }\n  };\n};\nconst IMPORTANT_MODIFIER = '!';\nconst createParseClassName = config => {\n  const {\n    separator,\n    experimentalParseClassName\n  } = config;\n  const isSeparatorSingleCharacter = separator.length === 1;\n  const firstSeparatorCharacter = separator[0];\n  const separatorLength = separator.length;\n  // parseClassName inspired by https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n  const parseClassName = className => {\n    const modifiers = [];\n    let bracketDepth = 0;\n    let modifierStart = 0;\n    let postfixModifierPosition;\n    for (let index = 0; index < className.length; index++) {\n      let currentCharacter = className[index];\n      if (bracketDepth === 0) {\n        if (currentCharacter === firstSeparatorCharacter && (isSeparatorSingleCharacter || className.slice(index, index + separatorLength) === separator)) {\n          modifiers.push(className.slice(modifierStart, index));\n          modifierStart = index + separatorLength;\n          continue;\n        }\n        if (currentCharacter === '/') {\n          postfixModifierPosition = index;\n          continue;\n        }\n      }\n      if (currentCharacter === '[') {\n        bracketDepth++;\n      } else if (currentCharacter === ']') {\n        bracketDepth--;\n      }\n    }\n    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.substring(modifierStart);\n    const hasImportantModifier = baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER);\n    const baseClassName = hasImportantModifier ? baseClassNameWithImportantModifier.substring(1) : baseClassNameWithImportantModifier;\n    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : undefined;\n    return {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    };\n  };\n  if (experimentalParseClassName) {\n    return className => experimentalParseClassName({\n      className,\n      parseClassName\n    });\n  }\n  return parseClassName;\n};\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nconst sortModifiers = modifiers => {\n  if (modifiers.length <= 1) {\n    return modifiers;\n  }\n  const sortedModifiers = [];\n  let unsortedModifiers = [];\n  modifiers.forEach(modifier => {\n    const isArbitraryVariant = modifier[0] === '[';\n    if (isArbitraryVariant) {\n      sortedModifiers.push(...unsortedModifiers.sort(), modifier);\n      unsortedModifiers = [];\n    } else {\n      unsortedModifiers.push(modifier);\n    }\n  });\n  sortedModifiers.push(...unsortedModifiers.sort());\n  return sortedModifiers;\n};\nconst createConfigUtils = config => ({\n  cache: createLruCache(config.cacheSize),\n  parseClassName: createParseClassName(config),\n  ...createClassGroupUtils(config)\n});\nconst SPLIT_CLASSES_REGEX = /\\s+/;\nconst mergeClassList = (classList, configUtils) => {\n  const {\n    parseClassName,\n    getClassGroupId,\n    getConflictingClassGroupIds\n  } = configUtils;\n  /**\n   * Set of classGroupIds in following format:\n   * `{importantModifier}{variantModifiers}{classGroupId}`\n   * @example 'float'\n   * @example 'hover:focus:bg-color'\n   * @example 'md:!pr'\n   */\n  const classGroupsInConflict = [];\n  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);\n  let result = '';\n  for (let index = classNames.length - 1; index >= 0; index -= 1) {\n    const originalClassName = classNames[index];\n    const {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    } = parseClassName(originalClassName);\n    let hasPostfixModifier = Boolean(maybePostfixModifierPosition);\n    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);\n    if (!classGroupId) {\n      if (!hasPostfixModifier) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      classGroupId = getClassGroupId(baseClassName);\n      if (!classGroupId) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      hasPostfixModifier = false;\n    }\n    const variantModifier = sortModifiers(modifiers).join(':');\n    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;\n    const classId = modifierId + classGroupId;\n    if (classGroupsInConflict.includes(classId)) {\n      // Tailwind class omitted due to conflict\n      continue;\n    }\n    classGroupsInConflict.push(classId);\n    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);\n    for (let i = 0; i < conflictGroups.length; ++i) {\n      const group = conflictGroups[i];\n      classGroupsInConflict.push(modifierId + group);\n    }\n    // Tailwind class not in conflict\n    result = originalClassName + (result.length > 0 ? ' ' + result : result);\n  }\n  return result;\n};\n\n/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\nfunction twJoin() {\n  let index = 0;\n  let argument;\n  let resolvedValue;\n  let string = '';\n  while (index < arguments.length) {\n    if (argument = arguments[index++]) {\n      if (resolvedValue = toValue(argument)) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n}\nconst toValue = mix => {\n  if (typeof mix === 'string') {\n    return mix;\n  }\n  let resolvedValue;\n  let string = '';\n  for (let k = 0; k < mix.length; k++) {\n    if (mix[k]) {\n      if (resolvedValue = toValue(mix[k])) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nfunction createTailwindMerge(createConfigFirst, ...createConfigRest) {\n  let configUtils;\n  let cacheGet;\n  let cacheSet;\n  let functionToCall = initTailwindMerge;\n  function initTailwindMerge(classList) {\n    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());\n    configUtils = createConfigUtils(config);\n    cacheGet = configUtils.cache.get;\n    cacheSet = configUtils.cache.set;\n    functionToCall = tailwindMerge;\n    return tailwindMerge(classList);\n  }\n  function tailwindMerge(classList) {\n    const cachedResult = cacheGet(classList);\n    if (cachedResult) {\n      return cachedResult;\n    }\n    const result = mergeClassList(classList, configUtils);\n    cacheSet(classList, result);\n    return result;\n  }\n  return function callTailwindMerge() {\n    return functionToCall(twJoin.apply(null, arguments));\n  };\n}\nconst fromTheme = key => {\n  const themeGetter = theme => theme[key] || [];\n  themeGetter.isThemeGetter = true;\n  return themeGetter;\n};\nconst arbitraryValueRegex = /^\\[(?:([a-z-]+):)?(.+)\\]$/i;\nconst fractionRegex = /^\\d+\\/\\d+$/;\nconst stringLengths = /*#__PURE__*/new Set(['px', 'full', 'screen']);\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/;\nconst lengthUnitRegex = /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/;\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch))\\(.+\\)$/;\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/;\nconst imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/;\nconst isLength = value => isNumber(value) || stringLengths.has(value) || fractionRegex.test(value);\nconst isArbitraryLength = value => getIsArbitraryValue(value, 'length', isLengthOnly);\nconst isNumber = value => Boolean(value) && !Number.isNaN(Number(value));\nconst isArbitraryNumber = value => getIsArbitraryValue(value, 'number', isNumber);\nconst isInteger = value => Boolean(value) && Number.isInteger(Number(value));\nconst isPercent = value => value.endsWith('%') && isNumber(value.slice(0, -1));\nconst isArbitraryValue = value => arbitraryValueRegex.test(value);\nconst isTshirtSize = value => tshirtUnitRegex.test(value);\nconst sizeLabels = /*#__PURE__*/new Set(['length', 'size', 'percentage']);\nconst isArbitrarySize = value => getIsArbitraryValue(value, sizeLabels, isNever);\nconst isArbitraryPosition = value => getIsArbitraryValue(value, 'position', isNever);\nconst imageLabels = /*#__PURE__*/new Set(['image', 'url']);\nconst isArbitraryImage = value => getIsArbitraryValue(value, imageLabels, isImage);\nconst isArbitraryShadow = value => getIsArbitraryValue(value, '', isShadow);\nconst isAny = () => true;\nconst getIsArbitraryValue = (value, label, testValue) => {\n  const result = arbitraryValueRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return typeof label === 'string' ? result[1] === label : label.has(result[1]);\n    }\n    return testValue(result[2]);\n  }\n  return false;\n};\nconst isLengthOnly = value =>\n// `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n// For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n// I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\nlengthUnitRegex.test(value) && !colorFunctionRegex.test(value);\nconst isNever = () => false;\nconst isShadow = value => shadowRegex.test(value);\nconst isImage = value => imageRegex.test(value);\nconst validators = /*#__PURE__*/Object.defineProperty({\n  __proto__: null,\n  isAny,\n  isArbitraryImage,\n  isArbitraryLength,\n  isArbitraryNumber,\n  isArbitraryPosition,\n  isArbitraryShadow,\n  isArbitrarySize,\n  isArbitraryValue,\n  isInteger,\n  isLength,\n  isNumber,\n  isPercent,\n  isTshirtSize\n}, Symbol.toStringTag, {\n  value: 'Module'\n});\nconst getDefaultConfig = () => {\n  const colors = fromTheme('colors');\n  const spacing = fromTheme('spacing');\n  const blur = fromTheme('blur');\n  const brightness = fromTheme('brightness');\n  const borderColor = fromTheme('borderColor');\n  const borderRadius = fromTheme('borderRadius');\n  const borderSpacing = fromTheme('borderSpacing');\n  const borderWidth = fromTheme('borderWidth');\n  const contrast = fromTheme('contrast');\n  const grayscale = fromTheme('grayscale');\n  const hueRotate = fromTheme('hueRotate');\n  const invert = fromTheme('invert');\n  const gap = fromTheme('gap');\n  const gradientColorStops = fromTheme('gradientColorStops');\n  const gradientColorStopPositions = fromTheme('gradientColorStopPositions');\n  const inset = fromTheme('inset');\n  const margin = fromTheme('margin');\n  const opacity = fromTheme('opacity');\n  const padding = fromTheme('padding');\n  const saturate = fromTheme('saturate');\n  const scale = fromTheme('scale');\n  const sepia = fromTheme('sepia');\n  const skew = fromTheme('skew');\n  const space = fromTheme('space');\n  const translate = fromTheme('translate');\n  const getOverscroll = () => ['auto', 'contain', 'none'];\n  const getOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'];\n  const getSpacingWithAutoAndArbitrary = () => ['auto', isArbitraryValue, spacing];\n  const getSpacingWithArbitrary = () => [isArbitraryValue, spacing];\n  const getLengthWithEmptyAndArbitrary = () => ['', isLength, isArbitraryLength];\n  const getNumberWithAutoAndArbitrary = () => ['auto', isNumber, isArbitraryValue];\n  const getPositions = () => ['bottom', 'center', 'left', 'left-bottom', 'left-top', 'right', 'right-bottom', 'right-top', 'top'];\n  const getLineStyles = () => ['solid', 'dashed', 'dotted', 'double', 'none'];\n  const getBlendModes = () => ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  const getAlign = () => ['start', 'end', 'center', 'between', 'around', 'evenly', 'stretch'];\n  const getZeroAndEmpty = () => ['', '0', isArbitraryValue];\n  const getBreaks = () => ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'];\n  const getNumberAndArbitrary = () => [isNumber, isArbitraryValue];\n  return {\n    cacheSize: 500,\n    separator: ':',\n    theme: {\n      colors: [isAny],\n      spacing: [isLength, isArbitraryLength],\n      blur: ['none', '', isTshirtSize, isArbitraryValue],\n      brightness: getNumberAndArbitrary(),\n      borderColor: [colors],\n      borderRadius: ['none', '', 'full', isTshirtSize, isArbitraryValue],\n      borderSpacing: getSpacingWithArbitrary(),\n      borderWidth: getLengthWithEmptyAndArbitrary(),\n      contrast: getNumberAndArbitrary(),\n      grayscale: getZeroAndEmpty(),\n      hueRotate: getNumberAndArbitrary(),\n      invert: getZeroAndEmpty(),\n      gap: getSpacingWithArbitrary(),\n      gradientColorStops: [colors],\n      gradientColorStopPositions: [isPercent, isArbitraryLength],\n      inset: getSpacingWithAutoAndArbitrary(),\n      margin: getSpacingWithAutoAndArbitrary(),\n      opacity: getNumberAndArbitrary(),\n      padding: getSpacingWithArbitrary(),\n      saturate: getNumberAndArbitrary(),\n      scale: getNumberAndArbitrary(),\n      sepia: getZeroAndEmpty(),\n      skew: getNumberAndArbitrary(),\n      space: getSpacingWithArbitrary(),\n      translate: getSpacingWithArbitrary()\n    },\n    classGroups: {\n      // Layout\n      /**\n       * Aspect Ratio\n       * @see https://tailwindcss.com/docs/aspect-ratio\n       */\n      aspect: [{\n        aspect: ['auto', 'square', 'video', isArbitraryValue]\n      }],\n      /**\n       * Container\n       * @see https://tailwindcss.com/docs/container\n       */\n      container: ['container'],\n      /**\n       * Columns\n       * @see https://tailwindcss.com/docs/columns\n       */\n      columns: [{\n        columns: [isTshirtSize]\n      }],\n      /**\n       * Break After\n       * @see https://tailwindcss.com/docs/break-after\n       */\n      'break-after': [{\n        'break-after': getBreaks()\n      }],\n      /**\n       * Break Before\n       * @see https://tailwindcss.com/docs/break-before\n       */\n      'break-before': [{\n        'break-before': getBreaks()\n      }],\n      /**\n       * Break Inside\n       * @see https://tailwindcss.com/docs/break-inside\n       */\n      'break-inside': [{\n        'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column']\n      }],\n      /**\n       * Box Decoration Break\n       * @see https://tailwindcss.com/docs/box-decoration-break\n       */\n      'box-decoration': [{\n        'box-decoration': ['slice', 'clone']\n      }],\n      /**\n       * Box Sizing\n       * @see https://tailwindcss.com/docs/box-sizing\n       */\n      box: [{\n        box: ['border', 'content']\n      }],\n      /**\n       * Display\n       * @see https://tailwindcss.com/docs/display\n       */\n      display: ['block', 'inline-block', 'inline', 'flex', 'inline-flex', 'table', 'inline-table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row-group', 'table-row', 'flow-root', 'grid', 'inline-grid', 'contents', 'list-item', 'hidden'],\n      /**\n       * Floats\n       * @see https://tailwindcss.com/docs/float\n       */\n      float: [{\n        float: ['right', 'left', 'none', 'start', 'end']\n      }],\n      /**\n       * Clear\n       * @see https://tailwindcss.com/docs/clear\n       */\n      clear: [{\n        clear: ['left', 'right', 'both', 'none', 'start', 'end']\n      }],\n      /**\n       * Isolation\n       * @see https://tailwindcss.com/docs/isolation\n       */\n      isolation: ['isolate', 'isolation-auto'],\n      /**\n       * Object Fit\n       * @see https://tailwindcss.com/docs/object-fit\n       */\n      'object-fit': [{\n        object: ['contain', 'cover', 'fill', 'none', 'scale-down']\n      }],\n      /**\n       * Object Position\n       * @see https://tailwindcss.com/docs/object-position\n       */\n      'object-position': [{\n        object: [...getPositions(), isArbitraryValue]\n      }],\n      /**\n       * Overflow\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      overflow: [{\n        overflow: getOverflow()\n      }],\n      /**\n       * Overflow X\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-x': [{\n        'overflow-x': getOverflow()\n      }],\n      /**\n       * Overflow Y\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-y': [{\n        'overflow-y': getOverflow()\n      }],\n      /**\n       * Overscroll Behavior\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      overscroll: [{\n        overscroll: getOverscroll()\n      }],\n      /**\n       * Overscroll Behavior X\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-x': [{\n        'overscroll-x': getOverscroll()\n      }],\n      /**\n       * Overscroll Behavior Y\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-y': [{\n        'overscroll-y': getOverscroll()\n      }],\n      /**\n       * Position\n       * @see https://tailwindcss.com/docs/position\n       */\n      position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n      /**\n       * Top / Right / Bottom / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      inset: [{\n        inset: [inset]\n      }],\n      /**\n       * Right / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-x': [{\n        'inset-x': [inset]\n      }],\n      /**\n       * Top / Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-y': [{\n        'inset-y': [inset]\n      }],\n      /**\n       * Start\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      start: [{\n        start: [inset]\n      }],\n      /**\n       * End\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      end: [{\n        end: [inset]\n      }],\n      /**\n       * Top\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      top: [{\n        top: [inset]\n      }],\n      /**\n       * Right\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      right: [{\n        right: [inset]\n      }],\n      /**\n       * Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      bottom: [{\n        bottom: [inset]\n      }],\n      /**\n       * Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      left: [{\n        left: [inset]\n      }],\n      /**\n       * Visibility\n       * @see https://tailwindcss.com/docs/visibility\n       */\n      visibility: ['visible', 'invisible', 'collapse'],\n      /**\n       * Z-Index\n       * @see https://tailwindcss.com/docs/z-index\n       */\n      z: [{\n        z: ['auto', isInteger, isArbitraryValue]\n      }],\n      // Flexbox and Grid\n      /**\n       * Flex Basis\n       * @see https://tailwindcss.com/docs/flex-basis\n       */\n      basis: [{\n        basis: getSpacingWithAutoAndArbitrary()\n      }],\n      /**\n       * Flex Direction\n       * @see https://tailwindcss.com/docs/flex-direction\n       */\n      'flex-direction': [{\n        flex: ['row', 'row-reverse', 'col', 'col-reverse']\n      }],\n      /**\n       * Flex Wrap\n       * @see https://tailwindcss.com/docs/flex-wrap\n       */\n      'flex-wrap': [{\n        flex: ['wrap', 'wrap-reverse', 'nowrap']\n      }],\n      /**\n       * Flex\n       * @see https://tailwindcss.com/docs/flex\n       */\n      flex: [{\n        flex: ['1', 'auto', 'initial', 'none', isArbitraryValue]\n      }],\n      /**\n       * Flex Grow\n       * @see https://tailwindcss.com/docs/flex-grow\n       */\n      grow: [{\n        grow: getZeroAndEmpty()\n      }],\n      /**\n       * Flex Shrink\n       * @see https://tailwindcss.com/docs/flex-shrink\n       */\n      shrink: [{\n        shrink: getZeroAndEmpty()\n      }],\n      /**\n       * Order\n       * @see https://tailwindcss.com/docs/order\n       */\n      order: [{\n        order: ['first', 'last', 'none', isInteger, isArbitraryValue]\n      }],\n      /**\n       * Grid Template Columns\n       * @see https://tailwindcss.com/docs/grid-template-columns\n       */\n      'grid-cols': [{\n        'grid-cols': [isAny]\n      }],\n      /**\n       * Grid Column Start / End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start-end': [{\n        col: ['auto', {\n          span: ['full', isInteger, isArbitraryValue]\n        }, isArbitraryValue]\n      }],\n      /**\n       * Grid Column Start\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start': [{\n        'col-start': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Column End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-end': [{\n        'col-end': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Template Rows\n       * @see https://tailwindcss.com/docs/grid-template-rows\n       */\n      'grid-rows': [{\n        'grid-rows': [isAny]\n      }],\n      /**\n       * Grid Row Start / End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start-end': [{\n        row: ['auto', {\n          span: [isInteger, isArbitraryValue]\n        }, isArbitraryValue]\n      }],\n      /**\n       * Grid Row Start\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start': [{\n        'row-start': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Row End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-end': [{\n        'row-end': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Auto Flow\n       * @see https://tailwindcss.com/docs/grid-auto-flow\n       */\n      'grid-flow': [{\n        'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense']\n      }],\n      /**\n       * Grid Auto Columns\n       * @see https://tailwindcss.com/docs/grid-auto-columns\n       */\n      'auto-cols': [{\n        'auto-cols': ['auto', 'min', 'max', 'fr', isArbitraryValue]\n      }],\n      /**\n       * Grid Auto Rows\n       * @see https://tailwindcss.com/docs/grid-auto-rows\n       */\n      'auto-rows': [{\n        'auto-rows': ['auto', 'min', 'max', 'fr', isArbitraryValue]\n      }],\n      /**\n       * Gap\n       * @see https://tailwindcss.com/docs/gap\n       */\n      gap: [{\n        gap: [gap]\n      }],\n      /**\n       * Gap X\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-x': [{\n        'gap-x': [gap]\n      }],\n      /**\n       * Gap Y\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-y': [{\n        'gap-y': [gap]\n      }],\n      /**\n       * Justify Content\n       * @see https://tailwindcss.com/docs/justify-content\n       */\n      'justify-content': [{\n        justify: ['normal', ...getAlign()]\n      }],\n      /**\n       * Justify Items\n       * @see https://tailwindcss.com/docs/justify-items\n       */\n      'justify-items': [{\n        'justify-items': ['start', 'end', 'center', 'stretch']\n      }],\n      /**\n       * Justify Self\n       * @see https://tailwindcss.com/docs/justify-self\n       */\n      'justify-self': [{\n        'justify-self': ['auto', 'start', 'end', 'center', 'stretch']\n      }],\n      /**\n       * Align Content\n       * @see https://tailwindcss.com/docs/align-content\n       */\n      'align-content': [{\n        content: ['normal', ...getAlign(), 'baseline']\n      }],\n      /**\n       * Align Items\n       * @see https://tailwindcss.com/docs/align-items\n       */\n      'align-items': [{\n        items: ['start', 'end', 'center', 'baseline', 'stretch']\n      }],\n      /**\n       * Align Self\n       * @see https://tailwindcss.com/docs/align-self\n       */\n      'align-self': [{\n        self: ['auto', 'start', 'end', 'center', 'stretch', 'baseline']\n      }],\n      /**\n       * Place Content\n       * @see https://tailwindcss.com/docs/place-content\n       */\n      'place-content': [{\n        'place-content': [...getAlign(), 'baseline']\n      }],\n      /**\n       * Place Items\n       * @see https://tailwindcss.com/docs/place-items\n       */\n      'place-items': [{\n        'place-items': ['start', 'end', 'center', 'baseline', 'stretch']\n      }],\n      /**\n       * Place Self\n       * @see https://tailwindcss.com/docs/place-self\n       */\n      'place-self': [{\n        'place-self': ['auto', 'start', 'end', 'center', 'stretch']\n      }],\n      // Spacing\n      /**\n       * Padding\n       * @see https://tailwindcss.com/docs/padding\n       */\n      p: [{\n        p: [padding]\n      }],\n      /**\n       * Padding X\n       * @see https://tailwindcss.com/docs/padding\n       */\n      px: [{\n        px: [padding]\n      }],\n      /**\n       * Padding Y\n       * @see https://tailwindcss.com/docs/padding\n       */\n      py: [{\n        py: [padding]\n      }],\n      /**\n       * Padding Start\n       * @see https://tailwindcss.com/docs/padding\n       */\n      ps: [{\n        ps: [padding]\n      }],\n      /**\n       * Padding End\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pe: [{\n        pe: [padding]\n      }],\n      /**\n       * Padding Top\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pt: [{\n        pt: [padding]\n      }],\n      /**\n       * Padding Right\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pr: [{\n        pr: [padding]\n      }],\n      /**\n       * Padding Bottom\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pb: [{\n        pb: [padding]\n      }],\n      /**\n       * Padding Left\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pl: [{\n        pl: [padding]\n      }],\n      /**\n       * Margin\n       * @see https://tailwindcss.com/docs/margin\n       */\n      m: [{\n        m: [margin]\n      }],\n      /**\n       * Margin X\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mx: [{\n        mx: [margin]\n      }],\n      /**\n       * Margin Y\n       * @see https://tailwindcss.com/docs/margin\n       */\n      my: [{\n        my: [margin]\n      }],\n      /**\n       * Margin Start\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ms: [{\n        ms: [margin]\n      }],\n      /**\n       * Margin End\n       * @see https://tailwindcss.com/docs/margin\n       */\n      me: [{\n        me: [margin]\n      }],\n      /**\n       * Margin Top\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mt: [{\n        mt: [margin]\n      }],\n      /**\n       * Margin Right\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mr: [{\n        mr: [margin]\n      }],\n      /**\n       * Margin Bottom\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mb: [{\n        mb: [margin]\n      }],\n      /**\n       * Margin Left\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ml: [{\n        ml: [margin]\n      }],\n      /**\n       * Space Between X\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-x': [{\n        'space-x': [space]\n      }],\n      /**\n       * Space Between X Reverse\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-x-reverse': ['space-x-reverse'],\n      /**\n       * Space Between Y\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-y': [{\n        'space-y': [space]\n      }],\n      /**\n       * Space Between Y Reverse\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-y-reverse': ['space-y-reverse'],\n      // Sizing\n      /**\n       * Width\n       * @see https://tailwindcss.com/docs/width\n       */\n      w: [{\n        w: ['auto', 'min', 'max', 'fit', 'svw', 'lvw', 'dvw', isArbitraryValue, spacing]\n      }],\n      /**\n       * Min-Width\n       * @see https://tailwindcss.com/docs/min-width\n       */\n      'min-w': [{\n        'min-w': [isArbitraryValue, spacing, 'min', 'max', 'fit']\n      }],\n      /**\n       * Max-Width\n       * @see https://tailwindcss.com/docs/max-width\n       */\n      'max-w': [{\n        'max-w': [isArbitraryValue, spacing, 'none', 'full', 'min', 'max', 'fit', 'prose', {\n          screen: [isTshirtSize]\n        }, isTshirtSize]\n      }],\n      /**\n       * Height\n       * @see https://tailwindcss.com/docs/height\n       */\n      h: [{\n        h: [isArbitraryValue, spacing, 'auto', 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Min-Height\n       * @see https://tailwindcss.com/docs/min-height\n       */\n      'min-h': [{\n        'min-h': [isArbitraryValue, spacing, 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Max-Height\n       * @see https://tailwindcss.com/docs/max-height\n       */\n      'max-h': [{\n        'max-h': [isArbitraryValue, spacing, 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Size\n       * @see https://tailwindcss.com/docs/size\n       */\n      size: [{\n        size: [isArbitraryValue, spacing, 'auto', 'min', 'max', 'fit']\n      }],\n      // Typography\n      /**\n       * Font Size\n       * @see https://tailwindcss.com/docs/font-size\n       */\n      'font-size': [{\n        text: ['base', isTshirtSize, isArbitraryLength]\n      }],\n      /**\n       * Font Smoothing\n       * @see https://tailwindcss.com/docs/font-smoothing\n       */\n      'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n      /**\n       * Font Style\n       * @see https://tailwindcss.com/docs/font-style\n       */\n      'font-style': ['italic', 'not-italic'],\n      /**\n       * Font Weight\n       * @see https://tailwindcss.com/docs/font-weight\n       */\n      'font-weight': [{\n        font: ['thin', 'extralight', 'light', 'normal', 'medium', 'semibold', 'bold', 'extrabold', 'black', isArbitraryNumber]\n      }],\n      /**\n       * Font Family\n       * @see https://tailwindcss.com/docs/font-family\n       */\n      'font-family': [{\n        font: [isAny]\n      }],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-normal': ['normal-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-ordinal': ['ordinal'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-slashed-zero': ['slashed-zero'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-fraction': ['diagonal-fractions', 'stacked-fractions'],\n      /**\n       * Letter Spacing\n       * @see https://tailwindcss.com/docs/letter-spacing\n       */\n      tracking: [{\n        tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest', isArbitraryValue]\n      }],\n      /**\n       * Line Clamp\n       * @see https://tailwindcss.com/docs/line-clamp\n       */\n      'line-clamp': [{\n        'line-clamp': ['none', isNumber, isArbitraryNumber]\n      }],\n      /**\n       * Line Height\n       * @see https://tailwindcss.com/docs/line-height\n       */\n      leading: [{\n        leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose', isLength, isArbitraryValue]\n      }],\n      /**\n       * List Style Image\n       * @see https://tailwindcss.com/docs/list-style-image\n       */\n      'list-image': [{\n        'list-image': ['none', isArbitraryValue]\n      }],\n      /**\n       * List Style Type\n       * @see https://tailwindcss.com/docs/list-style-type\n       */\n      'list-style-type': [{\n        list: ['none', 'disc', 'decimal', isArbitraryValue]\n      }],\n      /**\n       * List Style Position\n       * @see https://tailwindcss.com/docs/list-style-position\n       */\n      'list-style-position': [{\n        list: ['inside', 'outside']\n      }],\n      /**\n       * Placeholder Color\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/placeholder-color\n       */\n      'placeholder-color': [{\n        placeholder: [colors]\n      }],\n      /**\n       * Placeholder Opacity\n       * @see https://tailwindcss.com/docs/placeholder-opacity\n       */\n      'placeholder-opacity': [{\n        'placeholder-opacity': [opacity]\n      }],\n      /**\n       * Text Alignment\n       * @see https://tailwindcss.com/docs/text-align\n       */\n      'text-alignment': [{\n        text: ['left', 'center', 'right', 'justify', 'start', 'end']\n      }],\n      /**\n       * Text Color\n       * @see https://tailwindcss.com/docs/text-color\n       */\n      'text-color': [{\n        text: [colors]\n      }],\n      /**\n       * Text Opacity\n       * @see https://tailwindcss.com/docs/text-opacity\n       */\n      'text-opacity': [{\n        'text-opacity': [opacity]\n      }],\n      /**\n       * Text Decoration\n       * @see https://tailwindcss.com/docs/text-decoration\n       */\n      'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n      /**\n       * Text Decoration Style\n       * @see https://tailwindcss.com/docs/text-decoration-style\n       */\n      'text-decoration-style': [{\n        decoration: [...getLineStyles(), 'wavy']\n      }],\n      /**\n       * Text Decoration Thickness\n       * @see https://tailwindcss.com/docs/text-decoration-thickness\n       */\n      'text-decoration-thickness': [{\n        decoration: ['auto', 'from-font', isLength, isArbitraryLength]\n      }],\n      /**\n       * Text Underline Offset\n       * @see https://tailwindcss.com/docs/text-underline-offset\n       */\n      'underline-offset': [{\n        'underline-offset': ['auto', isLength, isArbitraryValue]\n      }],\n      /**\n       * Text Decoration Color\n       * @see https://tailwindcss.com/docs/text-decoration-color\n       */\n      'text-decoration-color': [{\n        decoration: [colors]\n      }],\n      /**\n       * Text Transform\n       * @see https://tailwindcss.com/docs/text-transform\n       */\n      'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n      /**\n       * Text Overflow\n       * @see https://tailwindcss.com/docs/text-overflow\n       */\n      'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n      /**\n       * Text Wrap\n       * @see https://tailwindcss.com/docs/text-wrap\n       */\n      'text-wrap': [{\n        text: ['wrap', 'nowrap', 'balance', 'pretty']\n      }],\n      /**\n       * Text Indent\n       * @see https://tailwindcss.com/docs/text-indent\n       */\n      indent: [{\n        indent: getSpacingWithArbitrary()\n      }],\n      /**\n       * Vertical Alignment\n       * @see https://tailwindcss.com/docs/vertical-align\n       */\n      'vertical-align': [{\n        align: ['baseline', 'top', 'middle', 'bottom', 'text-top', 'text-bottom', 'sub', 'super', isArbitraryValue]\n      }],\n      /**\n       * Whitespace\n       * @see https://tailwindcss.com/docs/whitespace\n       */\n      whitespace: [{\n        whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces']\n      }],\n      /**\n       * Word Break\n       * @see https://tailwindcss.com/docs/word-break\n       */\n      break: [{\n        break: ['normal', 'words', 'all', 'keep']\n      }],\n      /**\n       * Hyphens\n       * @see https://tailwindcss.com/docs/hyphens\n       */\n      hyphens: [{\n        hyphens: ['none', 'manual', 'auto']\n      }],\n      /**\n       * Content\n       * @see https://tailwindcss.com/docs/content\n       */\n      content: [{\n        content: ['none', isArbitraryValue]\n      }],\n      // Backgrounds\n      /**\n       * Background Attachment\n       * @see https://tailwindcss.com/docs/background-attachment\n       */\n      'bg-attachment': [{\n        bg: ['fixed', 'local', 'scroll']\n      }],\n      /**\n       * Background Clip\n       * @see https://tailwindcss.com/docs/background-clip\n       */\n      'bg-clip': [{\n        'bg-clip': ['border', 'padding', 'content', 'text']\n      }],\n      /**\n       * Background Opacity\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/background-opacity\n       */\n      'bg-opacity': [{\n        'bg-opacity': [opacity]\n      }],\n      /**\n       * Background Origin\n       * @see https://tailwindcss.com/docs/background-origin\n       */\n      'bg-origin': [{\n        'bg-origin': ['border', 'padding', 'content']\n      }],\n      /**\n       * Background Position\n       * @see https://tailwindcss.com/docs/background-position\n       */\n      'bg-position': [{\n        bg: [...getPositions(), isArbitraryPosition]\n      }],\n      /**\n       * Background Repeat\n       * @see https://tailwindcss.com/docs/background-repeat\n       */\n      'bg-repeat': [{\n        bg: ['no-repeat', {\n          repeat: ['', 'x', 'y', 'round', 'space']\n        }]\n      }],\n      /**\n       * Background Size\n       * @see https://tailwindcss.com/docs/background-size\n       */\n      'bg-size': [{\n        bg: ['auto', 'cover', 'contain', isArbitrarySize]\n      }],\n      /**\n       * Background Image\n       * @see https://tailwindcss.com/docs/background-image\n       */\n      'bg-image': [{\n        bg: ['none', {\n          'gradient-to': ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\n        }, isArbitraryImage]\n      }],\n      /**\n       * Background Color\n       * @see https://tailwindcss.com/docs/background-color\n       */\n      'bg-color': [{\n        bg: [colors]\n      }],\n      /**\n       * Gradient Color Stops From Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from-pos': [{\n        from: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops Via Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via-pos': [{\n        via: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops To Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to-pos': [{\n        to: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops From\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from': [{\n        from: [gradientColorStops]\n      }],\n      /**\n       * Gradient Color Stops Via\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via': [{\n        via: [gradientColorStops]\n      }],\n      /**\n       * Gradient Color Stops To\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to': [{\n        to: [gradientColorStops]\n      }],\n      // Borders\n      /**\n       * Border Radius\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      rounded: [{\n        rounded: [borderRadius]\n      }],\n      /**\n       * Border Radius Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-s': [{\n        'rounded-s': [borderRadius]\n      }],\n      /**\n       * Border Radius End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-e': [{\n        'rounded-e': [borderRadius]\n      }],\n      /**\n       * Border Radius Top\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-t': [{\n        'rounded-t': [borderRadius]\n      }],\n      /**\n       * Border Radius Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-r': [{\n        'rounded-r': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-b': [{\n        'rounded-b': [borderRadius]\n      }],\n      /**\n       * Border Radius Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-l': [{\n        'rounded-l': [borderRadius]\n      }],\n      /**\n       * Border Radius Start Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ss': [{\n        'rounded-ss': [borderRadius]\n      }],\n      /**\n       * Border Radius Start End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-se': [{\n        'rounded-se': [borderRadius]\n      }],\n      /**\n       * Border Radius End End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ee': [{\n        'rounded-ee': [borderRadius]\n      }],\n      /**\n       * Border Radius End Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-es': [{\n        'rounded-es': [borderRadius]\n      }],\n      /**\n       * Border Radius Top Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tl': [{\n        'rounded-tl': [borderRadius]\n      }],\n      /**\n       * Border Radius Top Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tr': [{\n        'rounded-tr': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-br': [{\n        'rounded-br': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-bl': [{\n        'rounded-bl': [borderRadius]\n      }],\n      /**\n       * Border Width\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w': [{\n        border: [borderWidth]\n      }],\n      /**\n       * Border Width X\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-x': [{\n        'border-x': [borderWidth]\n      }],\n      /**\n       * Border Width Y\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-y': [{\n        'border-y': [borderWidth]\n      }],\n      /**\n       * Border Width Start\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-s': [{\n        'border-s': [borderWidth]\n      }],\n      /**\n       * Border Width End\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-e': [{\n        'border-e': [borderWidth]\n      }],\n      /**\n       * Border Width Top\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-t': [{\n        'border-t': [borderWidth]\n      }],\n      /**\n       * Border Width Right\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-r': [{\n        'border-r': [borderWidth]\n      }],\n      /**\n       * Border Width Bottom\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-b': [{\n        'border-b': [borderWidth]\n      }],\n      /**\n       * Border Width Left\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-l': [{\n        'border-l': [borderWidth]\n      }],\n      /**\n       * Border Opacity\n       * @see https://tailwindcss.com/docs/border-opacity\n       */\n      'border-opacity': [{\n        'border-opacity': [opacity]\n      }],\n      /**\n       * Border Style\n       * @see https://tailwindcss.com/docs/border-style\n       */\n      'border-style': [{\n        border: [...getLineStyles(), 'hidden']\n      }],\n      /**\n       * Divide Width X\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-x': [{\n        'divide-x': [borderWidth]\n      }],\n      /**\n       * Divide Width X Reverse\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-x-reverse': ['divide-x-reverse'],\n      /**\n       * Divide Width Y\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-y': [{\n        'divide-y': [borderWidth]\n      }],\n      /**\n       * Divide Width Y Reverse\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-y-reverse': ['divide-y-reverse'],\n      /**\n       * Divide Opacity\n       * @see https://tailwindcss.com/docs/divide-opacity\n       */\n      'divide-opacity': [{\n        'divide-opacity': [opacity]\n      }],\n      /**\n       * Divide Style\n       * @see https://tailwindcss.com/docs/divide-style\n       */\n      'divide-style': [{\n        divide: getLineStyles()\n      }],\n      /**\n       * Border Color\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color': [{\n        border: [borderColor]\n      }],\n      /**\n       * Border Color X\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-x': [{\n        'border-x': [borderColor]\n      }],\n      /**\n       * Border Color Y\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-y': [{\n        'border-y': [borderColor]\n      }],\n      /**\n       * Border Color S\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-s': [{\n        'border-s': [borderColor]\n      }],\n      /**\n       * Border Color E\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-e': [{\n        'border-e': [borderColor]\n      }],\n      /**\n       * Border Color Top\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-t': [{\n        'border-t': [borderColor]\n      }],\n      /**\n       * Border Color Right\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-r': [{\n        'border-r': [borderColor]\n      }],\n      /**\n       * Border Color Bottom\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-b': [{\n        'border-b': [borderColor]\n      }],\n      /**\n       * Border Color Left\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-l': [{\n        'border-l': [borderColor]\n      }],\n      /**\n       * Divide Color\n       * @see https://tailwindcss.com/docs/divide-color\n       */\n      'divide-color': [{\n        divide: [borderColor]\n      }],\n      /**\n       * Outline Style\n       * @see https://tailwindcss.com/docs/outline-style\n       */\n      'outline-style': [{\n        outline: ['', ...getLineStyles()]\n      }],\n      /**\n       * Outline Offset\n       * @see https://tailwindcss.com/docs/outline-offset\n       */\n      'outline-offset': [{\n        'outline-offset': [isLength, isArbitraryValue]\n      }],\n      /**\n       * Outline Width\n       * @see https://tailwindcss.com/docs/outline-width\n       */\n      'outline-w': [{\n        outline: [isLength, isArbitraryLength]\n      }],\n      /**\n       * Outline Color\n       * @see https://tailwindcss.com/docs/outline-color\n       */\n      'outline-color': [{\n        outline: [colors]\n      }],\n      /**\n       * Ring Width\n       * @see https://tailwindcss.com/docs/ring-width\n       */\n      'ring-w': [{\n        ring: getLengthWithEmptyAndArbitrary()\n      }],\n      /**\n       * Ring Width Inset\n       * @see https://tailwindcss.com/docs/ring-width\n       */\n      'ring-w-inset': ['ring-inset'],\n      /**\n       * Ring Color\n       * @see https://tailwindcss.com/docs/ring-color\n       */\n      'ring-color': [{\n        ring: [colors]\n      }],\n      /**\n       * Ring Opacity\n       * @see https://tailwindcss.com/docs/ring-opacity\n       */\n      'ring-opacity': [{\n        'ring-opacity': [opacity]\n      }],\n      /**\n       * Ring Offset Width\n       * @see https://tailwindcss.com/docs/ring-offset-width\n       */\n      'ring-offset-w': [{\n        'ring-offset': [isLength, isArbitraryLength]\n      }],\n      /**\n       * Ring Offset Color\n       * @see https://tailwindcss.com/docs/ring-offset-color\n       */\n      'ring-offset-color': [{\n        'ring-offset': [colors]\n      }],\n      // Effects\n      /**\n       * Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow\n       */\n      shadow: [{\n        shadow: ['', 'inner', 'none', isTshirtSize, isArbitraryShadow]\n      }],\n      /**\n       * Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow-color\n       */\n      'shadow-color': [{\n        shadow: [isAny]\n      }],\n      /**\n       * Opacity\n       * @see https://tailwindcss.com/docs/opacity\n       */\n      opacity: [{\n        opacity: [opacity]\n      }],\n      /**\n       * Mix Blend Mode\n       * @see https://tailwindcss.com/docs/mix-blend-mode\n       */\n      'mix-blend': [{\n        'mix-blend': [...getBlendModes(), 'plus-lighter', 'plus-darker']\n      }],\n      /**\n       * Background Blend Mode\n       * @see https://tailwindcss.com/docs/background-blend-mode\n       */\n      'bg-blend': [{\n        'bg-blend': getBlendModes()\n      }],\n      // Filters\n      /**\n       * Filter\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/filter\n       */\n      filter: [{\n        filter: ['', 'none']\n      }],\n      /**\n       * Blur\n       * @see https://tailwindcss.com/docs/blur\n       */\n      blur: [{\n        blur: [blur]\n      }],\n      /**\n       * Brightness\n       * @see https://tailwindcss.com/docs/brightness\n       */\n      brightness: [{\n        brightness: [brightness]\n      }],\n      /**\n       * Contrast\n       * @see https://tailwindcss.com/docs/contrast\n       */\n      contrast: [{\n        contrast: [contrast]\n      }],\n      /**\n       * Drop Shadow\n       * @see https://tailwindcss.com/docs/drop-shadow\n       */\n      'drop-shadow': [{\n        'drop-shadow': ['', 'none', isTshirtSize, isArbitraryValue]\n      }],\n      /**\n       * Grayscale\n       * @see https://tailwindcss.com/docs/grayscale\n       */\n      grayscale: [{\n        grayscale: [grayscale]\n      }],\n      /**\n       * Hue Rotate\n       * @see https://tailwindcss.com/docs/hue-rotate\n       */\n      'hue-rotate': [{\n        'hue-rotate': [hueRotate]\n      }],\n      /**\n       * Invert\n       * @see https://tailwindcss.com/docs/invert\n       */\n      invert: [{\n        invert: [invert]\n      }],\n      /**\n       * Saturate\n       * @see https://tailwindcss.com/docs/saturate\n       */\n      saturate: [{\n        saturate: [saturate]\n      }],\n      /**\n       * Sepia\n       * @see https://tailwindcss.com/docs/sepia\n       */\n      sepia: [{\n        sepia: [sepia]\n      }],\n      /**\n       * Backdrop Filter\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/backdrop-filter\n       */\n      'backdrop-filter': [{\n        'backdrop-filter': ['', 'none']\n      }],\n      /**\n       * Backdrop Blur\n       * @see https://tailwindcss.com/docs/backdrop-blur\n       */\n      'backdrop-blur': [{\n        'backdrop-blur': [blur]\n      }],\n      /**\n       * Backdrop Brightness\n       * @see https://tailwindcss.com/docs/backdrop-brightness\n       */\n      'backdrop-brightness': [{\n        'backdrop-brightness': [brightness]\n      }],\n      /**\n       * Backdrop Contrast\n       * @see https://tailwindcss.com/docs/backdrop-contrast\n       */\n      'backdrop-contrast': [{\n        'backdrop-contrast': [contrast]\n      }],\n      /**\n       * Backdrop Grayscale\n       * @see https://tailwindcss.com/docs/backdrop-grayscale\n       */\n      'backdrop-grayscale': [{\n        'backdrop-grayscale': [grayscale]\n      }],\n      /**\n       * Backdrop Hue Rotate\n       * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n       */\n      'backdrop-hue-rotate': [{\n        'backdrop-hue-rotate': [hueRotate]\n      }],\n      /**\n       * Backdrop Invert\n       * @see https://tailwindcss.com/docs/backdrop-invert\n       */\n      'backdrop-invert': [{\n        'backdrop-invert': [invert]\n      }],\n      /**\n       * Backdrop Opacity\n       * @see https://tailwindcss.com/docs/backdrop-opacity\n       */\n      'backdrop-opacity': [{\n        'backdrop-opacity': [opacity]\n      }],\n      /**\n       * Backdrop Saturate\n       * @see https://tailwindcss.com/docs/backdrop-saturate\n       */\n      'backdrop-saturate': [{\n        'backdrop-saturate': [saturate]\n      }],\n      /**\n       * Backdrop Sepia\n       * @see https://tailwindcss.com/docs/backdrop-sepia\n       */\n      'backdrop-sepia': [{\n        'backdrop-sepia': [sepia]\n      }],\n      // Tables\n      /**\n       * Border Collapse\n       * @see https://tailwindcss.com/docs/border-collapse\n       */\n      'border-collapse': [{\n        border: ['collapse', 'separate']\n      }],\n      /**\n       * Border Spacing\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing': [{\n        'border-spacing': [borderSpacing]\n      }],\n      /**\n       * Border Spacing X\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-x': [{\n        'border-spacing-x': [borderSpacing]\n      }],\n      /**\n       * Border Spacing Y\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-y': [{\n        'border-spacing-y': [borderSpacing]\n      }],\n      /**\n       * Table Layout\n       * @see https://tailwindcss.com/docs/table-layout\n       */\n      'table-layout': [{\n        table: ['auto', 'fixed']\n      }],\n      /**\n       * Caption Side\n       * @see https://tailwindcss.com/docs/caption-side\n       */\n      caption: [{\n        caption: ['top', 'bottom']\n      }],\n      // Transitions and Animation\n      /**\n       * Tranisition Property\n       * @see https://tailwindcss.com/docs/transition-property\n       */\n      transition: [{\n        transition: ['none', 'all', '', 'colors', 'opacity', 'shadow', 'transform', isArbitraryValue]\n      }],\n      /**\n       * Transition Duration\n       * @see https://tailwindcss.com/docs/transition-duration\n       */\n      duration: [{\n        duration: getNumberAndArbitrary()\n      }],\n      /**\n       * Transition Timing Function\n       * @see https://tailwindcss.com/docs/transition-timing-function\n       */\n      ease: [{\n        ease: ['linear', 'in', 'out', 'in-out', isArbitraryValue]\n      }],\n      /**\n       * Transition Delay\n       * @see https://tailwindcss.com/docs/transition-delay\n       */\n      delay: [{\n        delay: getNumberAndArbitrary()\n      }],\n      /**\n       * Animation\n       * @see https://tailwindcss.com/docs/animation\n       */\n      animate: [{\n        animate: ['none', 'spin', 'ping', 'pulse', 'bounce', isArbitraryValue]\n      }],\n      // Transforms\n      /**\n       * Transform\n       * @see https://tailwindcss.com/docs/transform\n       */\n      transform: [{\n        transform: ['', 'gpu', 'none']\n      }],\n      /**\n       * Scale\n       * @see https://tailwindcss.com/docs/scale\n       */\n      scale: [{\n        scale: [scale]\n      }],\n      /**\n       * Scale X\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-x': [{\n        'scale-x': [scale]\n      }],\n      /**\n       * Scale Y\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-y': [{\n        'scale-y': [scale]\n      }],\n      /**\n       * Rotate\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      rotate: [{\n        rotate: [isInteger, isArbitraryValue]\n      }],\n      /**\n       * Translate X\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-x': [{\n        'translate-x': [translate]\n      }],\n      /**\n       * Translate Y\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-y': [{\n        'translate-y': [translate]\n      }],\n      /**\n       * Skew X\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-x': [{\n        'skew-x': [skew]\n      }],\n      /**\n       * Skew Y\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-y': [{\n        'skew-y': [skew]\n      }],\n      /**\n       * Transform Origin\n       * @see https://tailwindcss.com/docs/transform-origin\n       */\n      'transform-origin': [{\n        origin: ['center', 'top', 'top-right', 'right', 'bottom-right', 'bottom', 'bottom-left', 'left', 'top-left', isArbitraryValue]\n      }],\n      // Interactivity\n      /**\n       * Accent Color\n       * @see https://tailwindcss.com/docs/accent-color\n       */\n      accent: [{\n        accent: ['auto', colors]\n      }],\n      /**\n       * Appearance\n       * @see https://tailwindcss.com/docs/appearance\n       */\n      appearance: [{\n        appearance: ['none', 'auto']\n      }],\n      /**\n       * Cursor\n       * @see https://tailwindcss.com/docs/cursor\n       */\n      cursor: [{\n        cursor: ['auto', 'default', 'pointer', 'wait', 'text', 'move', 'help', 'not-allowed', 'none', 'context-menu', 'progress', 'cell', 'crosshair', 'vertical-text', 'alias', 'copy', 'no-drop', 'grab', 'grabbing', 'all-scroll', 'col-resize', 'row-resize', 'n-resize', 'e-resize', 's-resize', 'w-resize', 'ne-resize', 'nw-resize', 'se-resize', 'sw-resize', 'ew-resize', 'ns-resize', 'nesw-resize', 'nwse-resize', 'zoom-in', 'zoom-out', isArbitraryValue]\n      }],\n      /**\n       * Caret Color\n       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n       */\n      'caret-color': [{\n        caret: [colors]\n      }],\n      /**\n       * Pointer Events\n       * @see https://tailwindcss.com/docs/pointer-events\n       */\n      'pointer-events': [{\n        'pointer-events': ['none', 'auto']\n      }],\n      /**\n       * Resize\n       * @see https://tailwindcss.com/docs/resize\n       */\n      resize: [{\n        resize: ['none', 'y', 'x', '']\n      }],\n      /**\n       * Scroll Behavior\n       * @see https://tailwindcss.com/docs/scroll-behavior\n       */\n      'scroll-behavior': [{\n        scroll: ['auto', 'smooth']\n      }],\n      /**\n       * Scroll Margin\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-m': [{\n        'scroll-m': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin X\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mx': [{\n        'scroll-mx': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Y\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-my': [{\n        'scroll-my': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Start\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ms': [{\n        'scroll-ms': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin End\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-me': [{\n        'scroll-me': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Top\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mt': [{\n        'scroll-mt': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Right\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mr': [{\n        'scroll-mr': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Bottom\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mb': [{\n        'scroll-mb': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Left\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ml': [{\n        'scroll-ml': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-p': [{\n        'scroll-p': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding X\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-px': [{\n        'scroll-px': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Y\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-py': [{\n        'scroll-py': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Start\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-ps': [{\n        'scroll-ps': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding End\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pe': [{\n        'scroll-pe': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Top\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pt': [{\n        'scroll-pt': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Right\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pr': [{\n        'scroll-pr': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Bottom\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pb': [{\n        'scroll-pb': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Left\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pl': [{\n        'scroll-pl': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Snap Align\n       * @see https://tailwindcss.com/docs/scroll-snap-align\n       */\n      'snap-align': [{\n        snap: ['start', 'end', 'center', 'align-none']\n      }],\n      /**\n       * Scroll Snap Stop\n       * @see https://tailwindcss.com/docs/scroll-snap-stop\n       */\n      'snap-stop': [{\n        snap: ['normal', 'always']\n      }],\n      /**\n       * Scroll Snap Type\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-type': [{\n        snap: ['none', 'x', 'y', 'both']\n      }],\n      /**\n       * Scroll Snap Type Strictness\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-strictness': [{\n        snap: ['mandatory', 'proximity']\n      }],\n      /**\n       * Touch Action\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      touch: [{\n        touch: ['auto', 'none', 'manipulation']\n      }],\n      /**\n       * Touch Action X\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-x': [{\n        'touch-pan': ['x', 'left', 'right']\n      }],\n      /**\n       * Touch Action Y\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-y': [{\n        'touch-pan': ['y', 'up', 'down']\n      }],\n      /**\n       * Touch Action Pinch Zoom\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-pz': ['touch-pinch-zoom'],\n      /**\n       * User Select\n       * @see https://tailwindcss.com/docs/user-select\n       */\n      select: [{\n        select: ['none', 'text', 'all', 'auto']\n      }],\n      /**\n       * Will Change\n       * @see https://tailwindcss.com/docs/will-change\n       */\n      'will-change': [{\n        'will-change': ['auto', 'scroll', 'contents', 'transform', isArbitraryValue]\n      }],\n      // SVG\n      /**\n       * Fill\n       * @see https://tailwindcss.com/docs/fill\n       */\n      fill: [{\n        fill: [colors, 'none']\n      }],\n      /**\n       * Stroke Width\n       * @see https://tailwindcss.com/docs/stroke-width\n       */\n      'stroke-w': [{\n        stroke: [isLength, isArbitraryLength, isArbitraryNumber]\n      }],\n      /**\n       * Stroke\n       * @see https://tailwindcss.com/docs/stroke\n       */\n      stroke: [{\n        stroke: [colors, 'none']\n      }],\n      // Accessibility\n      /**\n       * Screen Readers\n       * @see https://tailwindcss.com/docs/screen-readers\n       */\n      sr: ['sr-only', 'not-sr-only'],\n      /**\n       * Forced Color Adjust\n       * @see https://tailwindcss.com/docs/forced-color-adjust\n       */\n      'forced-color-adjust': [{\n        'forced-color-adjust': ['auto', 'none']\n      }]\n    },\n    conflictingClassGroups: {\n      overflow: ['overflow-x', 'overflow-y'],\n      overscroll: ['overscroll-x', 'overscroll-y'],\n      inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n      'inset-x': ['right', 'left'],\n      'inset-y': ['top', 'bottom'],\n      flex: ['basis', 'grow', 'shrink'],\n      gap: ['gap-x', 'gap-y'],\n      p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n      px: ['pr', 'pl'],\n      py: ['pt', 'pb'],\n      m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n      mx: ['mr', 'ml'],\n      my: ['mt', 'mb'],\n      size: ['w', 'h'],\n      'font-size': ['leading'],\n      'fvn-normal': ['fvn-ordinal', 'fvn-slashed-zero', 'fvn-figure', 'fvn-spacing', 'fvn-fraction'],\n      'fvn-ordinal': ['fvn-normal'],\n      'fvn-slashed-zero': ['fvn-normal'],\n      'fvn-figure': ['fvn-normal'],\n      'fvn-spacing': ['fvn-normal'],\n      'fvn-fraction': ['fvn-normal'],\n      'line-clamp': ['display', 'overflow'],\n      rounded: ['rounded-s', 'rounded-e', 'rounded-t', 'rounded-r', 'rounded-b', 'rounded-l', 'rounded-ss', 'rounded-se', 'rounded-ee', 'rounded-es', 'rounded-tl', 'rounded-tr', 'rounded-br', 'rounded-bl'],\n      'rounded-s': ['rounded-ss', 'rounded-es'],\n      'rounded-e': ['rounded-se', 'rounded-ee'],\n      'rounded-t': ['rounded-tl', 'rounded-tr'],\n      'rounded-r': ['rounded-tr', 'rounded-br'],\n      'rounded-b': ['rounded-br', 'rounded-bl'],\n      'rounded-l': ['rounded-tl', 'rounded-bl'],\n      'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n      'border-w': ['border-w-s', 'border-w-e', 'border-w-t', 'border-w-r', 'border-w-b', 'border-w-l'],\n      'border-w-x': ['border-w-r', 'border-w-l'],\n      'border-w-y': ['border-w-t', 'border-w-b'],\n      'border-color': ['border-color-s', 'border-color-e', 'border-color-t', 'border-color-r', 'border-color-b', 'border-color-l'],\n      'border-color-x': ['border-color-r', 'border-color-l'],\n      'border-color-y': ['border-color-t', 'border-color-b'],\n      'scroll-m': ['scroll-mx', 'scroll-my', 'scroll-ms', 'scroll-me', 'scroll-mt', 'scroll-mr', 'scroll-mb', 'scroll-ml'],\n      'scroll-mx': ['scroll-mr', 'scroll-ml'],\n      'scroll-my': ['scroll-mt', 'scroll-mb'],\n      'scroll-p': ['scroll-px', 'scroll-py', 'scroll-ps', 'scroll-pe', 'scroll-pt', 'scroll-pr', 'scroll-pb', 'scroll-pl'],\n      'scroll-px': ['scroll-pr', 'scroll-pl'],\n      'scroll-py': ['scroll-pt', 'scroll-pb'],\n      touch: ['touch-x', 'touch-y', 'touch-pz'],\n      'touch-x': ['touch'],\n      'touch-y': ['touch'],\n      'touch-pz': ['touch']\n    },\n    conflictingClassGroupModifiers: {\n      'font-size': ['leading']\n    }\n  };\n};\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nconst mergeConfigs = (baseConfig, {\n  cacheSize,\n  prefix,\n  separator,\n  experimentalParseClassName,\n  extend = {},\n  override = {}\n}) => {\n  overrideProperty(baseConfig, 'cacheSize', cacheSize);\n  overrideProperty(baseConfig, 'prefix', prefix);\n  overrideProperty(baseConfig, 'separator', separator);\n  overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName);\n  for (const configKey in override) {\n    overrideConfigProperties(baseConfig[configKey], override[configKey]);\n  }\n  for (const key in extend) {\n    mergeConfigProperties(baseConfig[key], extend[key]);\n  }\n  return baseConfig;\n};\nconst overrideProperty = (baseObject, overrideKey, overrideValue) => {\n  if (overrideValue !== undefined) {\n    baseObject[overrideKey] = overrideValue;\n  }\n};\nconst overrideConfigProperties = (baseObject, overrideObject) => {\n  if (overrideObject) {\n    for (const key in overrideObject) {\n      overrideProperty(baseObject, key, overrideObject[key]);\n    }\n  }\n};\nconst mergeConfigProperties = (baseObject, mergeObject) => {\n  if (mergeObject) {\n    for (const key in mergeObject) {\n      const mergeValue = mergeObject[key];\n      if (mergeValue !== undefined) {\n        baseObject[key] = (baseObject[key] || []).concat(mergeValue);\n      }\n    }\n  }\n};\nconst extendTailwindMerge = (configExtension, ...createConfig) => typeof configExtension === 'function' ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig) : createTailwindMerge(() => mergeConfigs(getDefaultConfig(), configExtension), ...createConfig);\nconst twMerge = /*#__PURE__*/createTailwindMerge(getDefaultConfig);\nexport { createTailwindMerge, extendTailwindMerge, fromTheme, getDefaultConfig, mergeConfigs, twJoin, twMerge, validators };\n//# sourceMappingURL=bundle-mjs.mjs.map\n","import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\n// Merge Tailwind classes\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\n// Format number with locale\r\nexport function formatNumber(value: number, decimals = 2): string {\r\n  return value.toLocaleString('pt-BR', {\r\n    minimumFractionDigits: decimals,\r\n    maximumFractionDigits: decimals,\r\n  })\r\n}\r\n\r\n// Format percentage\r\nexport function formatPercent(value: number, decimals = 2): string {\r\n  const sign = value > 0 ? '+' : ''\r\n  return `${sign}${formatNumber(value, decimals)}%`\r\n}\r\n\r\n// Format date\r\nexport function formatDate(date: string | Date, format: 'short' | 'long' = 'short'): string {\r\n  const d = typeof date === 'string' ? new Date(date) : date\r\n  \r\n  if (format === 'long') {\r\n    return d.toLocaleDateString('pt-BR', {\r\n      day: '2-digit',\r\n      month: 'long',\r\n      year: 'numeric',\r\n    })\r\n  }\r\n  \r\n  return d.toLocaleDateString('pt-BR', {\r\n    day: '2-digit',\r\n    month: '2-digit',\r\n    year: 'numeric',\r\n  })\r\n}\r\n\r\n// Format datetime\r\nexport function formatDateTime(date: string | Date): string {\r\n  const d = typeof date === 'string' ? new Date(date) : date\r\n  return `${formatDate(d)} ${d.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}`\r\n}\r\n\r\n// Calculate balance percentage\r\nexport function calculateBalance(mpfm: number, ref: number): number {\r\n  if (ref === 0) return 0\r\n  return ((mpfm - ref) / ref) * 100\r\n}\r\n\r\n// Get balance status based on limits\r\nexport function getBalanceStatus(\r\n  value: number, \r\n  warningLimit: number, \r\n  errorLimit: number\r\n): 'OK' | 'ALERT' | 'FAIL' {\r\n  const absValue = Math.abs(value)\r\n  if (absValue >= errorLimit) return 'FAIL'\r\n  if (absValue >= warningLimit) return 'ALERT'\r\n  return 'OK'\r\n}\r\n\r\n// Get K-Factor status\r\nexport function getKFactorStatus(k: number, min = 0.8, max = 1.2): 'Dentro' | 'Fora' {\r\n  return k >= min && k <= max ? 'Dentro' : 'Fora'\r\n}\r\n\r\n// Get action based on balance and consecutive days\r\nexport function getAction(\r\n  hcBalance: number,\r\n  totalBalance: number,\r\n  consecutiveDays: number,\r\n  hcLimit = 10,\r\n  totalLimit = 7,\r\n  daysLimit = 10\r\n): 'MONITORAR' | 'INVESTIGAR' {\r\n  if (\r\n    Math.abs(hcBalance) >= hcLimit ||\r\n    Math.abs(totalBalance) >= totalLimit ||\r\n    consecutiveDays >= daysLimit\r\n  ) {\r\n    return 'INVESTIGAR'\r\n  }\r\n  return 'MONITORAR'\r\n}\r\n\r\n// Get color class for balance value\r\nexport function getBalanceColorClass(value: number, warningLimit = 7, errorLimit = 10): string {\r\n  const absValue = Math.abs(value)\r\n  if (absValue >= errorLimit) return 'text-red-400'\r\n  if (absValue >= warningLimit) return 'text-amber-400'\r\n  return 'text-emerald-400'\r\n}\r\n\r\n// Get background color class for status\r\nexport function getStatusBgClass(status: 'OK' | 'ALERT' | 'FAIL' | string): string {\r\n  switch (status) {\r\n    case 'OK':\r\n    case 'success':\r\n    case 'Dentro':\r\n      return 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30'\r\n    case 'ALERT':\r\n    case 'warning':\r\n      return 'bg-amber-500/20 text-amber-400 border-amber-500/30'\r\n    case 'FAIL':\r\n    case 'error':\r\n    case 'Fora':\r\n      return 'bg-red-500/20 text-red-400 border-red-500/30'\r\n    default:\r\n      return 'bg-zinc-700 text-zinc-300'\r\n  }\r\n}\r\n\r\n// Calculate duration in hours between two dates\r\nexport function calculateDuration(start: string | Date, end: string | Date): number {\r\n  const startDate = typeof start === 'string' ? new Date(start) : start\r\n  const endDate = typeof end === 'string' ? new Date(end) : end\r\n  return (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60)\r\n}\r\n\r\n// Calculate K-Factor\r\nexport function calculateKFactor(refMass: number, mpfmMass: number): number {\r\n  if (mpfmMass === 0) return 0\r\n  return refMass / mpfmMass\r\n}\r\n\r\n// Normalize molar composition to 100%\r\nexport function normalizeMolarComposition(\r\n  composition: { component: string; molPercent: number }[]\r\n): { component: string; molPercent: number; normalizedMolPercent: number }[] {\r\n  const total = composition.reduce((sum, c) => sum + c.molPercent, 0)\r\n  return composition.map(c => ({\r\n    ...c,\r\n    normalizedMolPercent: total > 0 ? (c.molPercent / total) * 100 : 0,\r\n  }))\r\n}\r\n\r\n// Generate event ID\r\nexport function generateEventId(\r\n  meterTag: string,\r\n  type: string,\r\n  date: Date = new Date()\r\n): string {\r\n  const typeCode = type.substring(0, 3).toUpperCase()\r\n  const month = String(date.getMonth() + 1).padStart(2, '0')\r\n  const year = String(date.getFullYear()).slice(-2)\r\n  return `CAL-${meterTag.replace(/-/g, '_')}-${typeCode}-${month}-${year}`\r\n}\r\n\r\n// Debounce function\r\nexport function debounce<T extends (...args: unknown[]) => unknown>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: ReturnType<typeof setTimeout> | null = null\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    if (timeout) clearTimeout(timeout)\r\n    timeout = setTimeout(() => func(...args), wait)\r\n  }\r\n}\r\n\r\n// Sleep function for async operations\r\nexport function sleep(ms: number): Promise<void> {\r\n  return new Promise(resolve => setTimeout(resolve, ms))\r\n}\r\n\r\n// Download file\r\nexport function downloadFile(blob: Blob, filename: string): void {\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = filename\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\n// Parse CSV\r\nexport function parseCSV(csv: string): Record<string, string>[] {\r\n  const lines = csv.trim().split('\\n')\r\n  if (lines.length < 2) return []\r\n  \r\n  const headers = lines[0].split(',').map(h => h.trim())\r\n  return lines.slice(1).map(line => {\r\n    const values = line.split(',').map(v => v.trim())\r\n    return headers.reduce((obj, header, i) => {\r\n      obj[header] = values[i] || ''\r\n      return obj\r\n    }, {} as Record<string, string>)\r\n  })\r\n}\r\n","import { Activity, Gauge, FileCheck, Droplets, AlertTriangle, ClipboardList } from 'lucide-react'\r\nimport { cn } from '@/utils'\r\n\r\ninterface Module {\r\n  id: string\r\n  label: string\r\n  icon: React.ComponentType<{ className?: string }>\r\n  description: string\r\n}\r\n\r\nconst modules: Module[] = [\r\n  {\r\n    id: 'monitoring',\r\n    label: 'Monitoramento SGM-FM',\r\n    icon: Activity,\r\n    description: 'Variveis crticas',\r\n  },\r\n  {\r\n    id: 'registro-diario',\r\n    label: 'Registro Dirio',\r\n    icon: ClipboardList,\r\n    description: 'Variveis e grficos',\r\n  },\r\n  {\r\n    id: 'calibration',\r\n    label: 'Avaliao de Desempenho',\r\n    icon: Gauge,\r\n    description: 'Calibrao MPFM',\r\n  },\r\n  {\r\n    id: 'compliance',\r\n    label: 'Conformidade ANP',\r\n    icon: FileCheck,\r\n    description: 'RANP 44/2015',\r\n  },\r\n  {\r\n    id: 'desenquadramento',\r\n    label: 'Desenquadramento',\r\n    icon: AlertTriangle,\r\n    description: 'Seo 10 RANP44',\r\n  },\r\n]\r\n\r\ninterface SidebarProps {\r\n  activeModule: string\r\n  onModuleChange: (moduleId: string) => void\r\n  collapsed: boolean\r\n}\r\n\r\nexport function Sidebar({ activeModule, onModuleChange, collapsed }: SidebarProps) {\r\n  return (\r\n    <aside\r\n      className={cn(\r\n        'bg-zinc-900 border-r border-zinc-800 flex flex-col transition-all duration-200 flex-shrink-0',\r\n        collapsed ? 'w-16' : 'w-56'\r\n      )}\r\n    >\r\n      {/* Logo */}\r\n      <div className=\"p-3 border-b border-zinc-800\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n            <Droplets className=\"w-6 h-6 text-white\" />\r\n          </div>\r\n          {!collapsed && (\r\n            <div>\r\n              <div className=\"font-bold text-sm\">MPFM Monitor</div>\r\n              <div className=\"text-xs text-zinc-500\">FPSO Bacalhau</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"flex-1 p-2 space-y-1\">\r\n        {modules.map((module) => {\r\n          const Icon = module.icon\r\n          const isActive = activeModule === module.id\r\n\r\n          return (\r\n            <button\r\n              key={module.id}\r\n              onClick={() => onModuleChange(module.id)}\r\n              className={cn(\r\n                'w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition text-sm',\r\n                isActive\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'hover:bg-zinc-800 text-zinc-400'\r\n              )}\r\n            >\r\n              <Icon className=\"w-5 h-5 flex-shrink-0\" />\r\n              {!collapsed && (\r\n                <div className=\"text-left\">\r\n                  <div className=\"text-xs font-medium\">{module.label}</div>\r\n                  <div className=\"text-[10px] opacity-60\">{module.description}</div>\r\n                </div>\r\n              )}\r\n            </button>\r\n          )\r\n        })}\r\n      </nav>\r\n\r\n      {/* Footer */}\r\n      <div className=\"p-3 border-t border-zinc-800\">\r\n        {!collapsed && (\r\n          <div className=\"text-xs text-zinc-500\">\r\n            <div>RANP 44/2015 ANP</div>\r\n            <div className=\"text-zinc-600\">v2.1.0</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </aside>\r\n  )\r\n}\r\n","import { cn } from '@/utils'\r\n\r\nexport type BadgeVariant =\r\n  | 'default'\r\n  | 'success'\r\n  | 'warning'\r\n  | 'error'\r\n  | 'danger'\r\n  | 'info'\r\n  | 'purple'\r\n  | 'secondary'\r\n  | 'OK'\r\n  | 'ALERT'\r\n  | 'FAIL'\r\n  | 'ERROR'\r\n  | 'Dentro'\r\n  | 'Fora'\r\n  | 'active'\r\n  | 'inactive'\r\n  | 'TOPSIDE'\r\n  | 'SUBSEA'\r\n  | 'MONITORAR'\r\n  | 'INVESTIGAR'\r\n  | 'Pendente'\r\n  | 'Parcial'\r\n  | 'Crtico'\r\n  | 'Alerta'\r\n  // Desenquadramento status\r\n  | 'Aberto'\r\n  | 'Em Investigao'\r\n  | 'Plano de Ao'\r\n  | 'Aguardando Validao'\r\n  | 'Concludo'\r\n  | 'Enviado ANP'\r\n\r\ninterface BadgeProps {\r\n  variant?: BadgeVariant\r\n  size?: 'sm' | 'default'\r\n  children: React.ReactNode\r\n  className?: string\r\n}\r\n\r\nconst variantStyles: Record<BadgeVariant, string> = {\r\n  default: 'bg-zinc-700 text-zinc-300',\r\n  success: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30',\r\n  warning: 'bg-amber-500/20 text-amber-400 border border-amber-500/30',\r\n  error: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  danger: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  info: 'bg-blue-500/20 text-blue-400 border border-blue-500/30',\r\n  purple: 'bg-purple-500/20 text-purple-400 border border-purple-500/30',\r\n  secondary: 'bg-zinc-600/20 text-zinc-300 border border-zinc-500/30',\r\n  OK: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30',\r\n  ALERT: 'bg-amber-500/20 text-amber-400 border border-amber-500/30',\r\n  FAIL: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  ERROR: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  Dentro: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30',\r\n  Fora: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  active: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30',\r\n  inactive: 'bg-zinc-600/20 text-zinc-400 border border-zinc-500/30',\r\n  TOPSIDE: 'bg-purple-500/20 text-purple-400 border border-purple-500/30',\r\n  SUBSEA: 'bg-blue-500/20 text-blue-400 border border-blue-500/30',\r\n  MONITORAR: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30',\r\n  INVESTIGAR: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  Pendente: 'bg-amber-500/20 text-amber-400 border border-amber-500/30',\r\n  Parcial: 'bg-blue-500/20 text-blue-400 border border-blue-500/30',\r\n  Crtico: 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  Alerta: 'bg-amber-500/20 text-amber-400 border border-amber-500/30',\r\n  // Desenquadramento status styles\r\n  'Aberto': 'bg-red-500/20 text-red-400 border border-red-500/30',\r\n  'Em Investigao': 'bg-amber-500/20 text-amber-400 border border-amber-500/30',\r\n  'Plano de Ao': 'bg-blue-500/20 text-blue-400 border border-blue-500/30',\r\n  'Aguardando Validao': 'bg-purple-500/20 text-purple-400 border border-purple-500/30',\r\n  'Concludo': 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30',\r\n  'Enviado ANP': 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/30',\r\n}\r\n\r\nconst sizeStyles = {\r\n  sm: 'px-1.5 py-0.5 text-[10px]',\r\n  default: 'px-2 py-0.5 text-xs',\r\n}\r\n\r\nexport function Badge({ \r\n  variant = 'default', \r\n  size = 'default', \r\n  children, \r\n  className \r\n}: BadgeProps) {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        'rounded-full font-medium inline-flex items-center',\r\n        variantStyles[variant],\r\n        sizeStyles[size],\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </span>\r\n  )\r\n}\r\n","import { forwardRef } from 'react'\r\nimport { cn } from '@/utils'\r\nimport { LucideIcon } from 'lucide-react'\r\n\r\nexport type ButtonVariant = \r\n  | 'primary' \r\n  | 'secondary' \r\n  | 'success' \r\n  | 'danger' \r\n  | 'ghost' \r\n  | 'outline'\r\n\r\nexport type ButtonSize = 'xs' | 'sm' | 'default' | 'lg'\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: ButtonVariant\r\n  size?: ButtonSize\r\n  icon?: LucideIcon\r\n  loading?: boolean\r\n}\r\n\r\nconst variantStyles: Record<ButtonVariant, string> = {\r\n  primary: 'bg-blue-600 hover:bg-blue-700 text-white',\r\n  secondary: 'bg-zinc-800 hover:bg-zinc-700 text-white border border-zinc-700',\r\n  success: 'bg-emerald-600 hover:bg-emerald-700 text-white',\r\n  danger: 'bg-red-600 hover:bg-red-700 text-white',\r\n  ghost: 'hover:bg-zinc-800 text-zinc-400',\r\n  outline: 'border border-zinc-600 hover:bg-zinc-800 text-zinc-300',\r\n}\r\n\r\nconst sizeStyles: Record<ButtonSize, string> = {\r\n  xs: 'px-2 py-1 text-xs',\r\n  sm: 'px-2 py-1.5 text-xs',\r\n  default: 'px-3 py-1.5 text-sm',\r\n  lg: 'px-4 py-2 text-sm',\r\n}\r\n\r\nconst iconSizes: Record<ButtonSize, string> = {\r\n  xs: 'w-3 h-3',\r\n  sm: 'w-3.5 h-3.5',\r\n  default: 'w-4 h-4',\r\n  lg: 'w-4 h-4',\r\n}\r\n\r\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\r\n  (\r\n    {\r\n      variant = 'primary',\r\n      size = 'default',\r\n      icon: Icon,\r\n      loading = false,\r\n      disabled,\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    return (\r\n      <button\r\n        ref={ref}\r\n        disabled={disabled || loading}\r\n        className={cn(\r\n          'flex items-center justify-center gap-1.5 rounded-lg font-medium transition',\r\n          variantStyles[variant],\r\n          sizeStyles[size],\r\n          (disabled || loading) && 'opacity-50 cursor-not-allowed',\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {loading ? (\r\n          <svg\r\n            className={cn('animate-spin', iconSizes[size])}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <circle\r\n              className=\"opacity-25\"\r\n              cx=\"12\"\r\n              cy=\"12\"\r\n              r=\"10\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"4\"\r\n            />\r\n            <path\r\n              className=\"opacity-75\"\r\n              fill=\"currentColor\"\r\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n            />\r\n          </svg>\r\n        ) : Icon ? (\r\n          <Icon className={iconSizes[size]} />\r\n        ) : null}\r\n        {children}\r\n      </button>\r\n    )\r\n  }\r\n)\r\n\r\nButton.displayName = 'Button'\r\n","import { cn } from '@/utils'\r\n\r\ninterface CardProps {\r\n  children: React.ReactNode\r\n  className?: string\r\n  title?: string\r\n  subtitle?: string\r\n  headerRight?: React.ReactNode\r\n  noPadding?: boolean\r\n}\r\n\r\nexport function Card({\r\n  children,\r\n  className,\r\n  title,\r\n  subtitle,\r\n  headerRight,\r\n  noPadding = false,\r\n}: CardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'bg-zinc-900/80 border border-zinc-800 rounded-xl',\r\n        className\r\n      )}\r\n    >\r\n      {title && (\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-zinc-800\">\r\n          <div>\r\n            <h3 className=\"text-sm font-semibold text-white\">{title}</h3>\r\n            {subtitle && (\r\n              <p className=\"text-xs text-zinc-500\">{subtitle}</p>\r\n            )}\r\n          </div>\r\n          {headerRight}\r\n        </div>\r\n      )}\r\n      <div className={noPadding ? '' : 'p-4'}>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n","import { forwardRef } from 'react'\r\nimport { cn } from '@/utils'\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  label?: string\r\n  unit?: string\r\n  error?: string\r\n  inputSize?: 'sm' | 'default'\r\n}\r\n\r\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\r\n  (\r\n    {\r\n      label,\r\n      unit,\r\n      error,\r\n      inputSize = 'default',\r\n      disabled,\r\n      readOnly,\r\n      className,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    return (\r\n      <div className={cn('space-y-1', className)}>\r\n        {label && (\r\n          <label className=\"text-xs text-zinc-400\">{label}</label>\r\n        )}\r\n        <div className=\"relative\">\r\n          <input\r\n            ref={ref}\r\n            disabled={disabled}\r\n            readOnly={readOnly}\r\n            className={cn(\r\n              'w-full bg-zinc-800 border rounded text-white placeholder-zinc-500 focus:outline-none focus:border-blue-500',\r\n              error ? 'border-red-500' : 'border-zinc-700',\r\n              (disabled || readOnly) && 'opacity-60 cursor-not-allowed',\r\n              inputSize === 'sm' ? 'px-2 py-1 text-xs' : 'px-3 py-2 text-sm',\r\n              unit && 'pr-12'\r\n            )}\r\n            {...props}\r\n          />\r\n          {unit && (\r\n            <span className=\"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-zinc-500\">\r\n              {unit}\r\n            </span>\r\n          )}\r\n        </div>\r\n        {error && <p className=\"text-xs text-red-400\">{error}</p>}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nInput.displayName = 'Input'\r\n","import { forwardRef } from 'react'\r\nimport { cn } from '@/utils'\r\n\r\ninterface SelectOption {\r\n  value: string\r\n  label: string\r\n}\r\n\r\ninterface SelectProps extends Omit<React.SelectHTMLAttributes<HTMLSelectElement>, 'size'> {\r\n  label?: string\r\n  options: SelectOption[]\r\n  selectSize?: 'sm' | 'default'\r\n  error?: string\r\n}\r\n\r\nexport const Select = forwardRef<HTMLSelectElement, SelectProps>(\r\n  (\r\n    {\r\n      label,\r\n      options,\r\n      selectSize = 'default',\r\n      error,\r\n      disabled,\r\n      className,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    return (\r\n      <div className={cn('space-y-1', className)}>\r\n        {label && (\r\n          <label className=\"text-xs text-zinc-400\">{label}</label>\r\n        )}\r\n        <select\r\n          ref={ref}\r\n          disabled={disabled}\r\n          className={cn(\r\n            'w-full bg-zinc-800 border border-zinc-700 rounded text-white focus:outline-none focus:border-blue-500',\r\n            disabled && 'opacity-60 cursor-not-allowed',\r\n            error && 'border-red-500',\r\n            selectSize === 'sm' ? 'px-2 py-1 text-xs' : 'px-3 py-2 text-sm'\r\n          )}\r\n          {...props}\r\n        >\r\n          {options.map((opt) => (\r\n            <option key={opt.value} value={opt.value}>\r\n              {opt.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        {error && <p className=\"text-xs text-red-400\">{error}</p>}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nSelect.displayName = 'Select'\r\n","import { useEffect } from 'react'\r\nimport { X } from 'lucide-react'\r\nimport { cn } from '@/utils'\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  title: string\r\n  children: React.ReactNode\r\n  size?: 'sm' | 'md' | 'default' | 'lg' | 'xl'\r\n}\r\n\r\nconst sizeStyles = {\r\n  sm: 'max-w-sm',\r\n  md: 'max-w-md',\r\n  default: 'max-w-2xl',\r\n  lg: 'max-w-4xl',\r\n  xl: 'max-w-6xl',\r\n}\r\n\r\nexport function Modal({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  size = 'default',\r\n}: ModalProps) {\r\n  // Close on Escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose()\r\n    }\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      document.body.style.overflow = 'hidden'\r\n    }\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape)\r\n      document.body.style.overflow = 'unset'\r\n    }\r\n  }, [isOpen, onClose])\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\r\n      <div\r\n        className={cn(\r\n          'bg-zinc-900 border border-zinc-800 rounded-xl w-full max-h-[90vh] flex flex-col',\r\n          sizeStyles[size]\r\n        )}\r\n      >\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-zinc-800\">\r\n          <h3 className=\"text-sm font-semibold text-white\">{title}</h3>\r\n          <button\r\n            onClick={onClose}\r\n            title=\"Fechar\"\r\n            className=\"p-1 hover:bg-zinc-800 rounded-lg transition\"\r\n          >\r\n            <X className=\"w-4 h-4 text-zinc-400\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-4 overflow-y-auto flex-1\">{children}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { cn } from '@/utils'\r\nimport { LucideIcon } from 'lucide-react'\r\n\r\ninterface Tab {\r\n  id: string\r\n  label: string\r\n  icon?: LucideIcon\r\n  count?: number\r\n}\r\n\r\ninterface TabsProps {\r\n  tabs: Tab[]\r\n  activeTab: string\r\n  onChange: (tabId: string) => void\r\n  className?: string\r\n}\r\n\r\nexport function Tabs({ tabs, activeTab, onChange, className }: TabsProps) {\r\n  return (\r\n    <div className={cn('flex gap-1 p-1 bg-zinc-800/50 rounded-lg', className)}>\r\n      {tabs.map((tab) => (\r\n        <button\r\n          key={tab.id}\r\n          onClick={() => onChange(tab.id)}\r\n          className={cn(\r\n            'px-3 py-1.5 text-xs font-medium rounded-md transition flex items-center gap-1.5',\r\n            activeTab === tab.id\r\n              ? 'bg-blue-600 text-white'\r\n              : 'text-zinc-400 hover:text-white hover:bg-zinc-700'\r\n          )}\r\n        >\r\n          {tab.icon && <tab.icon className=\"w-3.5 h-3.5\" />}\r\n          {tab.label}\r\n          {tab.count !== undefined && (\r\n            <span\r\n              className={cn(\r\n                'px-1.5 py-0.5 rounded-full text-[10px]',\r\n                activeTab === tab.id ? 'bg-white/20' : 'bg-zinc-700'\r\n              )}\r\n            >\r\n              {tab.count}\r\n            </span>\r\n          )}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","import { cn } from '@/utils'\r\nimport { LucideIcon, ArrowUpRight, ArrowDownRight } from 'lucide-react'\r\n\r\ntype KPIColor = 'blue' | 'emerald' | 'amber' | 'red' | 'purple'\r\n\r\ninterface KPICardProps {\r\n  title: string\r\n  value: string | number\r\n  unit?: string\r\n  subtitle?: string\r\n  icon: LucideIcon\r\n  color: KPIColor\r\n  trend?: number\r\n  onClick?: () => void\r\n  className?: string\r\n}\r\n\r\nconst colorStyles: Record<KPIColor, string> = {\r\n  blue: 'from-blue-500/20 to-blue-600/5 border-blue-500/30',\r\n  emerald: 'from-emerald-500/20 to-emerald-600/5 border-emerald-500/30',\r\n  amber: 'from-amber-500/20 to-amber-600/5 border-amber-500/30',\r\n  red: 'from-red-500/20 to-red-600/5 border-red-500/30',\r\n  purple: 'from-purple-500/20 to-purple-600/5 border-purple-500/30',\r\n}\r\n\r\nconst iconColors: Record<KPIColor, string> = {\r\n  blue: 'text-blue-400',\r\n  emerald: 'text-emerald-400',\r\n  amber: 'text-amber-400',\r\n  red: 'text-red-400',\r\n  purple: 'text-purple-400',\r\n}\r\n\r\nexport function KPICard({\r\n  title,\r\n  value,\r\n  unit,\r\n  subtitle,\r\n  icon: Icon,\r\n  color,\r\n  trend,\r\n  onClick,\r\n  className,\r\n}: KPICardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'bg-gradient-to-br border rounded-xl p-3',\r\n        colorStyles[color],\r\n        onClick && 'cursor-pointer hover:brightness-110 transition',\r\n        className\r\n      )}\r\n      onClick={onClick}\r\n    >\r\n      <div className=\"flex items-start justify-between\">\r\n        <div>\r\n          <p className=\"text-xs text-zinc-400\">{title}</p>\r\n          <div className=\"flex items-baseline gap-1 mt-1\">\r\n            <span className=\"text-xl font-bold text-white\">{value}</span>\r\n            {unit && <span className=\"text-xs text-zinc-400\">{unit}</span>}\r\n          </div>\r\n          {subtitle && (\r\n            <p className=\"text-xs text-zinc-500 mt-1\">{subtitle}</p>\r\n          )}\r\n          {trend !== undefined && trend !== 0 && (\r\n            <div\r\n              className={cn(\r\n                'flex items-center gap-1 mt-1 text-xs',\r\n                trend > 0 ? 'text-emerald-400' : 'text-red-400'\r\n              )}\r\n            >\r\n              {trend > 0 ? (\r\n                <ArrowUpRight className=\"w-3 h-3\" />\r\n              ) : (\r\n                <ArrowDownRight className=\"w-3 h-3\" />\r\n              )}\r\n              <span>{Math.abs(trend)}%</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className={cn('p-2 rounded-lg bg-zinc-800/50', iconColors[color])}>\r\n          <Icon className=\"w-4 h-4\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { cn } from '@/utils'\r\n\r\ntype ProgressColor = 'blue' | 'emerald' | 'amber' | 'red' | 'purple' | 'auto'\r\n\r\ninterface ProgressBarProps {\r\n  value: number\r\n  max?: number\r\n  color?: ProgressColor\r\n  showLabel?: boolean\r\n  size?: 'sm' | 'default'\r\n  className?: string\r\n}\r\n\r\nconst colorStyles: Record<Exclude<ProgressColor, 'auto'>, string> = {\r\n  blue: 'bg-blue-500',\r\n  emerald: 'bg-emerald-500',\r\n  amber: 'bg-amber-500',\r\n  red: 'bg-red-500',\r\n  purple: 'bg-purple-500',\r\n}\r\n\r\nexport function ProgressBar({\r\n  value,\r\n  max = 100,\r\n  color = 'blue',\r\n  showLabel = true,\r\n  size = 'default',\r\n  className,\r\n}: ProgressBarProps) {\r\n  const percent = Math.min((value / max) * 100, 100)\r\n\r\n  const getAutoColor = () => {\r\n    if (percent >= 100) return 'bg-red-500'\r\n    if (percent >= 70) return 'bg-amber-500'\r\n    return 'bg-emerald-500'\r\n  }\r\n\r\n  const barColor = color === 'auto' ? getAutoColor() : colorStyles[color]\r\n\r\n  return (\r\n    <div className={cn('space-y-1', className)}>\r\n      <div\r\n        className={cn(\r\n          'bg-zinc-800 rounded-full overflow-hidden',\r\n          size === 'sm' ? 'h-1.5' : 'h-2'\r\n        )}\r\n      >\r\n        <div\r\n          className={cn('h-full rounded-full transition-all', barColor)}\r\n          style={{ width: `${percent}%` }}\r\n        />\r\n      </div>\r\n      {showLabel && (\r\n        <div className=\"flex justify-between text-xs text-zinc-500\">\r\n          <span>{value}</span>\r\n          <span>{max}</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Check } from 'lucide-react'\r\nimport { cn } from '@/utils'\r\n\r\ninterface StepIndicatorProps {\r\n  steps: string[]\r\n  currentStep: number\r\n  onStepClick?: (step: number) => void\r\n  className?: string\r\n}\r\n\r\nexport function StepIndicator({\r\n  steps,\r\n  currentStep,\r\n  onStepClick,\r\n  className,\r\n}: StepIndicatorProps) {\r\n  return (\r\n    <div className={cn('flex items-center gap-1 overflow-x-auto pb-1', className)}>\r\n      {steps.map((step, i) => {\r\n        const stepNumber = i + 1\r\n        const isCompleted = stepNumber < currentStep\r\n        const isCurrent = stepNumber === currentStep\r\n        const isPending = stepNumber > currentStep\r\n\r\n        return (\r\n          <div key={i} className=\"flex items-center\">\r\n            <button\r\n              onClick={() => onStepClick?.(stepNumber)}\r\n              className={cn(\r\n                'flex items-center gap-1.5 px-2 py-1 rounded-lg transition flex-shrink-0',\r\n                isCurrent && 'bg-blue-600 text-white',\r\n                isCompleted && 'bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30',\r\n                isPending && 'bg-zinc-800 text-zinc-500 hover:bg-zinc-700'\r\n              )}\r\n            >\r\n              <div\r\n                className={cn(\r\n                  'w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium',\r\n                  isCompleted && 'bg-emerald-500 text-white',\r\n                  isCurrent && 'bg-white text-blue-600',\r\n                  isPending && 'bg-zinc-700 text-zinc-400'\r\n                )}\r\n              >\r\n                {isCompleted ? <Check className=\"w-3 h-3\" /> : stepNumber}\r\n              </div>\r\n              <span className=\"text-xs hidden lg:inline whitespace-nowrap\">\r\n                {step}\r\n              </span>\r\n            </button>\r\n            {i < steps.length - 1 && (\r\n              <div\r\n                className={cn(\r\n                  'w-4 h-px flex-shrink-0 mx-1',\r\n                  isCompleted ? 'bg-emerald-500' : 'bg-zinc-700'\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { cn } from '@/utils'\r\nimport { LucideIcon } from 'lucide-react'\r\n\r\ntype SectionColor = 'blue' | 'purple' | 'amber' | 'emerald' | 'red'\r\n\r\ninterface SectionHeaderProps {\r\n  icon: LucideIcon\r\n  title: string\r\n  color?: SectionColor\r\n  action?: React.ReactNode\r\n  className?: string\r\n}\r\n\r\nconst colorStyles: Record<SectionColor, string> = {\r\n  blue: 'text-blue-400 bg-blue-500/10',\r\n  purple: 'text-purple-400 bg-purple-500/10',\r\n  amber: 'text-amber-400 bg-amber-500/10',\r\n  emerald: 'text-emerald-400 bg-emerald-500/10',\r\n  red: 'text-red-400 bg-red-500/10',\r\n}\r\n\r\nexport function SectionHeader({\r\n  icon: Icon,\r\n  title,\r\n  color = 'blue',\r\n  action,\r\n  className,\r\n}: SectionHeaderProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'flex items-center justify-between px-3 py-2 rounded-lg mb-3',\r\n        colorStyles[color],\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"flex items-center gap-2\">\r\n        <Icon className=\"w-4 h-4\" />\r\n        <span className=\"text-sm font-medium\">{title}</span>\r\n      </div>\r\n      {action}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Sistema de Notificaes Toast - MPFM Monitor\r\n */\r\n\r\nimport { useState, createContext, useContext, useCallback, type ReactNode } from 'react'\r\nimport { CheckCircle, AlertTriangle, XCircle, Info, X } from 'lucide-react'\r\nimport { cn } from '@/utils'\r\n\r\ntype ToastType = 'success' | 'error' | 'warning' | 'info'\r\n\r\ninterface Toast {\r\n  id: string\r\n  type: ToastType\r\n  title: string\r\n  message?: string\r\n  duration?: number\r\n}\r\n\r\ninterface ToastContextValue {\r\n  toasts: Toast[]\r\n  addToast: (toast: Omit<Toast, 'id'>) => void\r\n  removeToast: (id: string) => void\r\n  success: (title: string, message?: string) => void\r\n  error: (title: string, message?: string) => void\r\n  warning: (title: string, message?: string) => void\r\n  info: (title: string, message?: string) => void\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextValue | null>(null)\r\n\r\nexport function ToastProvider({ children }: { children: ReactNode }) {\r\n  const [toasts, setToasts] = useState<Toast[]>([])\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts((prev) => prev.filter((t) => t.id !== id))\r\n  }, [])\r\n\r\n  const addToast = useCallback((toast: Omit<Toast, 'id'>) => {\r\n    const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`\r\n    const newToast = { ...toast, id }\r\n    \r\n    setToasts((prev) => [...prev, newToast])\r\n\r\n    // Auto-remove aps durao\r\n    const duration = toast.duration || 5000\r\n    setTimeout(() => {\r\n      removeToast(id)\r\n    }, duration)\r\n  }, [removeToast])\r\n\r\n  const success = useCallback(\r\n    (title: string, message?: string) => addToast({ type: 'success', title, message }),\r\n    [addToast]\r\n  )\r\n\r\n  const error = useCallback(\r\n    (title: string, message?: string) => addToast({ type: 'error', title, message, duration: 8000 }),\r\n    [addToast]\r\n  )\r\n\r\n  const warning = useCallback(\r\n    (title: string, message?: string) => addToast({ type: 'warning', title, message }),\r\n    [addToast]\r\n  )\r\n\r\n  const info = useCallback(\r\n    (title: string, message?: string) => addToast({ type: 'info', title, message }),\r\n    [addToast]\r\n  )\r\n\r\n  return (\r\n    <ToastContext.Provider value={{ toasts, addToast, removeToast, success, error, warning, info }}>\r\n      {children}\r\n      <ToastContainer toasts={toasts} onRemove={removeToast} />\r\n    </ToastContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useToast() {\r\n  const context = useContext(ToastContext)\r\n  if (!context) {\r\n    throw new Error('useToast deve ser usado dentro de ToastProvider')\r\n  }\r\n  return context\r\n}\r\n\r\nfunction ToastContainer({\r\n  toasts,\r\n  onRemove,\r\n}: {\r\n  toasts: Toast[]\r\n  onRemove: (id: string) => void\r\n}) {\r\n  if (toasts.length === 0) return null\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-md\">\r\n      {toasts.map((toast) => (\r\n        <ToastItem key={toast.id} toast={toast} onRemove={onRemove} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction ToastItem({\r\n  toast,\r\n  onRemove,\r\n}: {\r\n  toast: Toast\r\n  onRemove: (id: string) => void\r\n}) {\r\n  const [isExiting, setIsExiting] = useState(false)\r\n\r\n  const handleRemove = () => {\r\n    setIsExiting(true)\r\n    setTimeout(() => onRemove(toast.id), 200)\r\n  }\r\n\r\n  const icons = {\r\n    success: CheckCircle,\r\n    error: XCircle,\r\n    warning: AlertTriangle,\r\n    info: Info,\r\n  }\r\n\r\n  const styles = {\r\n    success: 'bg-emerald-500/10 border-emerald-500/30 text-emerald-400',\r\n    error: 'bg-red-500/10 border-red-500/30 text-red-400',\r\n    warning: 'bg-amber-500/10 border-amber-500/30 text-amber-400',\r\n    info: 'bg-blue-500/10 border-blue-500/30 text-blue-400',\r\n  }\r\n\r\n  const Icon = icons[toast.type]\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'flex items-start gap-3 p-4 rounded-lg border backdrop-blur-sm',\r\n        'min-w-[300px] shadow-lg transition-all duration-200',\r\n        isExiting ? 'opacity-0 translate-x-4' : 'opacity-100 translate-x-0',\r\n        styles[toast.type]\r\n      )}\r\n    >\r\n      <Icon className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\r\n      <div className=\"flex-1 min-w-0\">\r\n        <p className=\"font-medium text-white\">{toast.title}</p>\r\n        {toast.message && (\r\n          <p className=\"text-sm opacity-80 mt-1\">{toast.message}</p>\r\n        )}\r\n      </div>\r\n      <button\r\n        onClick={handleRemove}\r\n        className=\"text-zinc-500 hover:text-white transition-colors p-1\"\r\n        title=\"Fechar notificao\"\r\n        aria-label=\"Fechar notificao\"\r\n      >\r\n        <X className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n","import { Menu, Bell, Upload, Download } from 'lucide-react'\r\nimport { Button } from '@/components/ui'\r\nimport { formatDateTime } from '@/utils'\r\n\r\ninterface HeaderProps {\r\n  title: string\r\n  subtitle?: string\r\n  onToggleSidebar: () => void\r\n  onImport?: () => void\r\n  onExport?: () => void\r\n  alertCount?: number\r\n}\r\n\r\nexport function Header({\r\n  title,\r\n  subtitle,\r\n  onToggleSidebar,\r\n  onImport,\r\n  onExport,\r\n  alertCount = 0,\r\n}: HeaderProps) {\r\n  return (\r\n    <header className=\"h-14 bg-zinc-900 border-b border-zinc-800 flex items-center justify-between px-4 flex-shrink-0\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <button\r\n          onClick={onToggleSidebar}\r\n          title=\"Menu\"\r\n          className=\"p-2 hover:bg-zinc-800 rounded-lg transition\"\r\n        >\r\n          <Menu className=\"w-5 h-5 text-zinc-400\" />\r\n        </button>\r\n        <div>\r\n          <h1 className=\"text-sm font-semibold\">{title}</h1>\r\n          <p className=\"text-xs text-zinc-500\">\r\n            {subtitle || `ltima atualizao: ${formatDateTime(new Date())}`}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-2\">\r\n        {onImport && (\r\n          <Button variant=\"secondary\" size=\"sm\" icon={Upload} onClick={onImport}>\r\n            Importar\r\n          </Button>\r\n        )}\r\n        {onExport && (\r\n          <Button variant=\"secondary\" size=\"sm\" icon={Download} onClick={onExport}>\r\n            Exportar\r\n          </Button>\r\n        )}\r\n\r\n        {/* Notifications */}\r\n        <button \r\n          title=\"Notificaes\"\r\n          className=\"relative p-2 hover:bg-zinc-800 rounded-lg transition\"\r\n        >\r\n          <Bell className=\"w-5 h-5 text-zinc-400\" />\r\n          {alertCount > 0 && (\r\n            <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\" />\r\n          )}\r\n        </button>\r\n\r\n        {/* User Avatar */}\r\n        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-xs font-medium\">\r\n          MA\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","/**\r\n * Servio de clculos para MPFM\r\n * Implementa as frmulas conforme RANP 44/2015\r\n */\r\n\r\n// Limites ANP\r\nexport const ANP_LIMITS = {\r\n  HC_BALANCE_WARNING: 7, // 7% para alerta\r\n  HC_BALANCE_ERROR: 10, // 10% para erro\r\n  TOTAL_BALANCE_WARNING: 5, // 5% para alerta\r\n  TOTAL_BALANCE_ERROR: 7, // 7% para erro\r\n  CONSECUTIVE_DAYS_LIMIT: 10, // 10 dias consecutivos gatilha calibrao\r\n  K_FACTOR_MIN: 0.8, // K mnimo aceitvel\r\n  K_FACTOR_MAX: 1.2, // K mximo aceitvel\r\n  MIN_TOTALIZATION_HOURS: 24, // Mnimo 24h de totalizao\r\n} as const\r\n\r\n// Tipos para clculos\r\nexport interface MassData {\r\n  oil: number\r\n  gas: number\r\n  water: number\r\n}\r\n\r\nexport interface BalanceResult {\r\n  hcBalance: number\r\n  totalBalance: number\r\n  hcStatus: 'OK' | 'ALERT' | 'FAIL'\r\n  totalStatus: 'OK' | 'ALERT' | 'FAIL'\r\n  action: 'MONITORAR' | 'INVESTIGAR'\r\n}\r\n\r\nexport interface KFactorResult {\r\n  kOil: number\r\n  kGas: number\r\n  kWater: number\r\n  kOilStatus: 'Dentro' | 'Fora'\r\n  kGasStatus: 'Dentro' | 'Fora'\r\n  kWaterStatus: 'Dentro' | 'Fora'\r\n  overallStatus: 'Aprovado' | 'Reprovado'\r\n}\r\n\r\nexport interface DeviationResult {\r\n  phase: string\r\n  mpfm: number\r\n  ref: number\r\n  delta: number\r\n  deviation: number\r\n  status: 'OK' | 'FAIL'\r\n}\r\n\r\n// ============================================================================\r\n// FUNES DE CLCULO DE BALANO\r\n// ============================================================================\r\n\r\n/**\r\n * Calcula o desvio percentual entre dois valores\r\n */\r\nexport function calculateDeviation(measured: number, reference: number): number {\r\n  if (reference === 0) {\r\n    if (measured === 0) return 0\r\n    return 100 // Se referncia  0 e medido no, retorna 100%\r\n  }\r\n  return ((measured - reference) / reference) * 100\r\n}\r\n\r\n/**\r\n * Determina o status baseado no desvio e limites\r\n */\r\nexport function getDeviationStatus(\r\n  deviation: number,\r\n  warningLimit: number,\r\n  errorLimit: number\r\n): 'OK' | 'ALERT' | 'FAIL' {\r\n  const absDeviation = Math.abs(deviation)\r\n  if (absDeviation >= errorLimit) return 'FAIL'\r\n  if (absDeviation >= warningLimit) return 'ALERT'\r\n  return 'OK'\r\n}\r\n\r\n/**\r\n * Calcula o balano de massa entre MPFM e Referncia\r\n */\r\nexport function calculateMassBalance(\r\n  mpfmData: MassData,\r\n  refData: MassData\r\n): BalanceResult {\r\n  // HC = Oil + Gas\r\n  const mpfmHC = mpfmData.oil + mpfmData.gas\r\n  const refHC = refData.oil + refData.gas\r\n\r\n  // Total = Oil + Gas + Water\r\n  const mpfmTotal = mpfmHC + mpfmData.water\r\n  const refTotal = refHC + refData.water\r\n\r\n  // Calcular desvios\r\n  const hcBalance = calculateDeviation(mpfmHC, refHC)\r\n  const totalBalance = calculateDeviation(mpfmTotal, refTotal)\r\n\r\n  // Determinar status\r\n  const hcStatus = getDeviationStatus(\r\n    hcBalance,\r\n    ANP_LIMITS.HC_BALANCE_WARNING,\r\n    ANP_LIMITS.HC_BALANCE_ERROR\r\n  )\r\n  const totalStatus = getDeviationStatus(\r\n    totalBalance,\r\n    ANP_LIMITS.TOTAL_BALANCE_WARNING,\r\n    ANP_LIMITS.TOTAL_BALANCE_ERROR\r\n  )\r\n\r\n  // Determinar ao\r\n  const action: 'MONITORAR' | 'INVESTIGAR' =\r\n    hcStatus === 'FAIL' || totalStatus === 'FAIL' ? 'INVESTIGAR' : 'MONITORAR'\r\n\r\n  return {\r\n    hcBalance,\r\n    totalBalance,\r\n    hcStatus,\r\n    totalStatus,\r\n    action,\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// FUNES DE CLCULO DE K-FACTORS\r\n// ============================================================================\r\n\r\n/**\r\n * Calcula o K-Factor (fator de correo)\r\n * K = Massa Referncia / Massa MPFM\r\n */\r\nexport function calculateKFactor(mpfmMass: number, refMass: number): number {\r\n  if (mpfmMass === 0) {\r\n    if (refMass === 0) return 1 // Ambos zero = fator 1\r\n    return 0 // MPFM zero e ref no = fator 0\r\n  }\r\n  return refMass / mpfmMass\r\n}\r\n\r\n/**\r\n * Verifica se K-Factor est dentro dos limites\r\n */\r\nexport function getKFactorStatus(\r\n  k: number,\r\n  min: number = ANP_LIMITS.K_FACTOR_MIN,\r\n  max: number = ANP_LIMITS.K_FACTOR_MAX\r\n): 'Dentro' | 'Fora' {\r\n  return k >= min && k <= max ? 'Dentro' : 'Fora'\r\n}\r\n\r\n/**\r\n * Calcula todos os K-Factors\r\n */\r\nexport function calculateAllKFactors(\r\n  mpfmData: MassData,\r\n  refData: MassData,\r\n  kMin: number = ANP_LIMITS.K_FACTOR_MIN,\r\n  kMax: number = ANP_LIMITS.K_FACTOR_MAX\r\n): KFactorResult {\r\n  const kOil = calculateKFactor(mpfmData.oil, refData.oil)\r\n  const kGas = calculateKFactor(mpfmData.gas, refData.gas)\r\n  const kWater = calculateKFactor(mpfmData.water, refData.water)\r\n\r\n  const kOilStatus = getKFactorStatus(kOil, kMin, kMax)\r\n  const kGasStatus = getKFactorStatus(kGas, kMin, kMax)\r\n  const kWaterStatus = getKFactorStatus(kWater, kMin, kMax)\r\n\r\n  // Status geral: Aprovado se todos esto dentro dos limites\r\n  const overallStatus: 'Aprovado' | 'Reprovado' =\r\n    kOilStatus === 'Dentro' && kGasStatus === 'Dentro' && kWaterStatus === 'Dentro'\r\n      ? 'Aprovado'\r\n      : 'Reprovado'\r\n\r\n  return {\r\n    kOil,\r\n    kGas,\r\n    kWater,\r\n    kOilStatus,\r\n    kGasStatus,\r\n    kWaterStatus,\r\n    overallStatus,\r\n  }\r\n}\r\n\r\n/**\r\n * Aplica K-Factor para corrigir massa\r\n */\r\nexport function applyCorrectionFactor(mass: number, kFactor: number): number {\r\n  return mass * kFactor\r\n}\r\n\r\n/**\r\n * Calcula desvio corrigido aps aplicao de K-Factor\r\n */\r\nexport function calculateCorrectedDeviation(\r\n  mpfmMass: number,\r\n  refMass: number,\r\n  kFactor: number\r\n): DeviationResult {\r\n  const correctedMass = applyCorrectionFactor(mpfmMass, kFactor)\r\n  const deviation = calculateDeviation(correctedMass, refMass)\r\n  const status = Math.abs(deviation) <= ANP_LIMITS.HC_BALANCE_ERROR ? 'OK' : 'FAIL'\r\n\r\n  return {\r\n    phase: '',\r\n    mpfm: mpfmMass,\r\n    ref: refMass,\r\n    delta: correctedMass - refMass,\r\n    deviation,\r\n    status,\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// FUNES DE TOTALIZAO\r\n// ============================================================================\r\n\r\nexport interface TotalizationEntry {\r\n  startTime: string\r\n  endTime: string\r\n  mpfmOil: number\r\n  mpfmGas: number\r\n  mpfmWater: number\r\n  refOilVolume: number\r\n  refOilDensity: number\r\n  refGas: number\r\n  refWater: number\r\n}\r\n\r\nexport interface TotalizationResult {\r\n  totalHours: number\r\n  totalMpfmOil: number\r\n  totalMpfmGas: number\r\n  totalMpfmWater: number\r\n  totalMpfmHC: number\r\n  totalMpfmTotal: number\r\n  totalRefOil: number\r\n  totalRefGas: number\r\n  totalRefWater: number\r\n  totalRefHC: number\r\n  totalRefTotal: number\r\n  isValid: boolean // >= 24h\r\n}\r\n\r\n/**\r\n * Calcula a durao em horas entre dois timestamps\r\n */\r\nexport function calculateDurationHours(startTime: string, endTime: string): number {\r\n  const start = new Date(startTime).getTime()\r\n  const end = new Date(endTime).getTime()\r\n  return (end - start) / (1000 * 60 * 60)\r\n}\r\n\r\n/**\r\n * Converte volume de leo para massa usando densidade\r\n * Massa (kg) = Volume (m) * Densidade (kg/m)\r\n */\r\nexport function volumeToMass(volumeM3: number, densityKgM3: number): number {\r\n  return volumeM3 * densityKgM3\r\n}\r\n\r\n/**\r\n * Calcula totais de um perodo de totalizao\r\n */\r\nexport function calculateTotalization(entries: TotalizationEntry[]): TotalizationResult {\r\n  let totalHours = 0\r\n  let totalMpfmOil = 0\r\n  let totalMpfmGas = 0\r\n  let totalMpfmWater = 0\r\n  let totalRefOil = 0\r\n  let totalRefGas = 0\r\n  let totalRefWater = 0\r\n\r\n  for (const entry of entries) {\r\n    const hours = calculateDurationHours(entry.startTime, entry.endTime)\r\n    totalHours += hours\r\n\r\n    totalMpfmOil += entry.mpfmOil\r\n    totalMpfmGas += entry.mpfmGas\r\n    totalMpfmWater += entry.mpfmWater\r\n\r\n    // Converter volume para massa\r\n    const refOilMass = volumeToMass(entry.refOilVolume, entry.refOilDensity)\r\n    totalRefOil += refOilMass\r\n    totalRefGas += entry.refGas\r\n    totalRefWater += entry.refWater\r\n  }\r\n\r\n  const totalMpfmHC = totalMpfmOil + totalMpfmGas\r\n  const totalMpfmTotal = totalMpfmHC + totalMpfmWater\r\n  const totalRefHC = totalRefOil + totalRefGas\r\n  const totalRefTotal = totalRefHC + totalRefWater\r\n\r\n  return {\r\n    totalHours,\r\n    totalMpfmOil,\r\n    totalMpfmGas,\r\n    totalMpfmWater,\r\n    totalMpfmHC,\r\n    totalMpfmTotal,\r\n    totalRefOil,\r\n    totalRefGas,\r\n    totalRefWater,\r\n    totalRefHC,\r\n    totalRefTotal,\r\n    isValid: totalHours >= ANP_LIMITS.MIN_TOTALIZATION_HOURS,\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// FUNES DE COMPOSIO MOLAR\r\n// ============================================================================\r\n\r\nexport interface MolarComponent {\r\n  component: string\r\n  molecularWeight: number\r\n  molPercent: number\r\n}\r\n\r\nexport interface NormalizedComposition extends MolarComponent {\r\n  normalizedMolPercent: number\r\n}\r\n\r\n/**\r\n * Normaliza composio molar para 100%\r\n */\r\nexport function normalizeMolarComposition(\r\n  components: MolarComponent[]\r\n): NormalizedComposition[] {\r\n  const totalMol = components.reduce((sum, c) => sum + c.molPercent, 0)\r\n\r\n  return components.map((c) => ({\r\n    ...c,\r\n    normalizedMolPercent: totalMol > 0 ? (c.molPercent / totalMol) * 100 : 0,\r\n  }))\r\n}\r\n\r\n/**\r\n * Calcula peso molecular mdio da mistura\r\n */\r\nexport function calculateMixtureMolecularWeight(\r\n  components: NormalizedComposition[]\r\n): number {\r\n  return components.reduce(\r\n    (sum, c) => sum + (c.normalizedMolPercent / 100) * c.molecularWeight,\r\n    0\r\n  )\r\n}\r\n\r\n// ============================================================================\r\n// FUNES DE DIAS CONSECUTIVOS\r\n// ============================================================================\r\n\r\nexport interface DailyBalanceData {\r\n  date: string\r\n  hcStatus: 'OK' | 'ALERT' | 'FAIL'\r\n  totalStatus: 'OK' | 'ALERT' | 'FAIL'\r\n}\r\n\r\n/**\r\n * Calcula dias consecutivos com desvio\r\n */\r\nexport function calculateConsecutiveDays(\r\n  data: DailyBalanceData[],\r\n  statusToCheck: 'ALERT' | 'FAIL' = 'FAIL'\r\n): number {\r\n  // Ordenar por data decrescente\r\n  const sorted = [...data].sort(\r\n    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\r\n  )\r\n\r\n  let consecutiveDays = 0\r\n\r\n  for (const entry of sorted) {\r\n    if (entry.hcStatus === statusToCheck || entry.totalStatus === statusToCheck) {\r\n      consecutiveDays++\r\n    } else {\r\n      break // Interrompe ao encontrar um dia OK\r\n    }\r\n  }\r\n\r\n  return consecutiveDays\r\n}\r\n\r\n/**\r\n * Verifica se deve acionar calibrao baseado nos dias consecutivos\r\n */\r\nexport function shouldTriggerCalibration(consecutiveDays: number): boolean {\r\n  return consecutiveDays >= ANP_LIMITS.CONSECUTIVE_DAYS_LIMIT\r\n}\r\n\r\n// ============================================================================\r\n// GERAO DE IDs\r\n// ============================================================================\r\n\r\n/**\r\n * Gera ID nico para evento de calibrao\r\n */\r\nexport function generateCalibrationEventId(\r\n  meterTag: string,\r\n  type: string,\r\n  date: Date = new Date()\r\n): string {\r\n  const location = meterTag.startsWith('13') ? 'TOP' : 'SUB'\r\n  const typeCode = type.substring(0, 3).toUpperCase()\r\n  const month = String(date.getMonth() + 1).padStart(2, '0')\r\n  const year = String(date.getFullYear()).slice(-2)\r\n  return `CAL-MPFM_${location}-${typeCode}-${month}-${year}`\r\n}\r\n\r\n/**\r\n * Gera ID nico com timestamp\r\n */\r\nexport function generateUniqueId(prefix: string = ''): string {\r\n  const timestamp = Date.now().toString(36)\r\n  const random = Math.random().toString(36).substring(2, 8)\r\n  return prefix ? `${prefix}-${timestamp}-${random}` : `${timestamp}-${random}`\r\n}\r\n","import { create } from 'zustand'\r\nimport { persist, createJSONStorage } from 'zustand/middleware'\r\nimport type { Meter, CalibrationEvent, Alert, TotalizerRow, MolarComposition } from '@/types'\r\nimport type { MonitoringDataRow } from '@/data/monitoring'\r\nimport { \r\n  calculateMassBalance, \r\n  generateCalibrationEventId,\r\n  generateUniqueId,\r\n} from '@/services/calculations'\r\n\r\n// ============================================================================\r\n// TIPOS DO ESTADO\r\n// ============================================================================\r\n\r\nexport type ActiveModule = 'monitoring' | 'calibration' | 'compliance'\r\n\r\nexport type CalibrationFormData = {\r\n  // Step 01 - Registro\r\n  eventId: string\r\n  status: string\r\n  resultado: string\r\n  operador: string\r\n  serviceOrder: string\r\n  responsavelCalibracao: string\r\n  preenchidoPor: string\r\n  dataEmissao: string\r\n  unidade: string\r\n  baciaCampo: string\r\n  localizacao: string\r\n  referenciaMet: string\r\n  tagMPFM: string\r\n  serialNumber: string\r\n  fabricante: string\r\n  modelo: string\r\n  tamanho: string\r\n  razaoBeta: string\r\n  modoMedicao: string\r\n  sistema: string\r\n  versaoSoftwareMedidor: string\r\n  versaoFPM207: string\r\n  versaoFCS320: string\r\n  versaoPVTsim: string\r\n  naturezaAtividade: string\r\n  idEventoDesvio: string\r\n  inicioEstabilizacao: string\r\n  inicioTotalizacao: string\r\n  fimTotalizacao: string\r\n  duracaoEfetiva: number\r\n  observacoesIniciais: string\r\n  comentariosGerais: string\r\n\r\n  // Step 02 - PVT\r\n  pvtReportId: string\r\n  dataAmostragem: string\r\n  pontoAmostragem: string\r\n  softwareModelagem: string\r\n  versaoModelo: string\r\n  statusAprovacao: string\r\n  dataAprovacao: string\r\n  comentariosPVT: string\r\n  densidadeOleo: number\r\n  densidadeGas: number\r\n  densidadeAgua: number\r\n  gor: number\r\n  bsw: number\r\n  fatorEncolhimento: number\r\n  composicao: MolarComposition[]\r\n  penelouxGas: number\r\n  penelouxOil: number\r\n  pvtLoadedFCS320: boolean\r\n  pvtLoadedFPM207: boolean\r\n  gammaRestarted: boolean\r\n  pressureVerified: boolean\r\n  temperatureVerified: boolean\r\n\r\n  // Step 03 - Totalizadores\r\n  totalizadores: TotalizerRow[]\r\n\r\n  // Step 04 - K-Factors\r\n  kMin: number\r\n  kMax: number\r\n  limiteHC: number\r\n  limiteTotal: number\r\n  massas: {\r\n    oleo: { mpfm: number; ref: number }\r\n    gas: { mpfm: number; ref: number }\r\n    agua: { mpfm: number; ref: number }\r\n  }\r\n  kFactors: {\r\n    kOil: number\r\n    kGas: number\r\n    kWater: number\r\n    kOilStatus: 'Dentro' | 'Fora'\r\n    kGasStatus: 'Dentro' | 'Fora'\r\n    kWaterStatus: 'Dentro' | 'Fora'\r\n  }\r\n\r\n  // Step 05 - Balano\r\n  balancoTopOil: number\r\n  balancoTopGas: number\r\n  balancoGasLift: number\r\n  balancoDesvio: number\r\n\r\n  // Step 06 - Monitoramento Ps\r\n  monitoramentoPosData: Array<{\r\n    data: string\r\n    duracao: number\r\n    mpfmOil: number\r\n    mpfmGas: number\r\n    mpfmTotal: number\r\n    refTotal: number\r\n    desvio: number\r\n    alarmes: string\r\n  }>\r\n\r\n  // Step 07 - Alarmes\r\n  alarmes: Array<{\r\n    dataHora: string\r\n    tag: string\r\n    codigo: string\r\n    descricao: string\r\n    gravidade: 'Info' | 'Warning' | 'Critical'\r\n    acaoTomada: string\r\n  }>\r\n}\r\n\r\nexport interface AppState {\r\n  // User\r\n  user: {\r\n    id: string\r\n    name: string\r\n    email: string\r\n    role: 'Admin' | 'Operador' | 'Visualizador'\r\n  }\r\n\r\n  // UI State\r\n  activeModule: ActiveModule\r\n  sidebarCollapsed: boolean\r\n  showNewEventModal: boolean\r\n  showImportModal: boolean\r\n  showExportModal: boolean\r\n  showMeterModal: boolean\r\n  showAlertModal: boolean\r\n  editingMeter: Meter | null\r\n\r\n  // Meters\r\n  meters: Meter[]\r\n  selectedMeter: Meter | null\r\n\r\n  // Monitoring\r\n  monitoringData: MonitoringDataRow[]\r\n\r\n  // Calibration\r\n  calibrationEvents: CalibrationEvent[]\r\n  selectedEvent: CalibrationEvent | null\r\n  calibrationFormData: CalibrationFormData | null\r\n\r\n  // Alerts\r\n  alerts: Alert[]\r\n\r\n  // Filters\r\n  monitoringFilters: {\r\n    startDate: string\r\n    endDate: string\r\n    meterId: string\r\n    status: string\r\n  }\r\n  calibrationFilters: {\r\n    status: string\r\n    type: string\r\n    meterId: string\r\n    responsible: string\r\n  }\r\n}\r\n\r\nexport interface AppActions {\r\n  // UI Actions\r\n  setActiveModule: (module: ActiveModule) => void\r\n  toggleSidebar: () => void\r\n  setShowNewEventModal: (show: boolean) => void\r\n  setShowImportModal: (show: boolean) => void\r\n  setShowExportModal: (show: boolean) => void\r\n  setShowMeterModal: (show: boolean) => void\r\n  setShowAlertModal: (show: boolean) => void\r\n  setEditingMeter: (meter: Meter | null) => void\r\n\r\n  // Meter Actions\r\n  setSelectedMeter: (meter: Meter | null) => void\r\n  addMeter: (meter: Omit<Meter, 'id'>) => void\r\n  updateMeter: (id: string, updates: Partial<Meter>) => void\r\n  deleteMeter: (id: string) => void\r\n\r\n  // Monitoring Actions\r\n  addMonitoringData: (data: Omit<MonitoringDataRow, 'id'>) => void\r\n  updateMonitoringData: (id: string, updates: Partial<MonitoringDataRow>) => void\r\n  deleteMonitoringData: (id: string) => void\r\n  importMonitoringData: (data: MonitoringDataRow[]) => void\r\n  recalculateBalances: () => void\r\n\r\n  // Calibration Actions\r\n  setSelectedEvent: (event: CalibrationEvent | null) => void\r\n  addCalibrationEvent: (meter: Meter, type: string) => CalibrationEvent\r\n  updateCalibrationEvent: (id: string, updates: Partial<CalibrationEvent>) => void\r\n  deleteCalibrationEvent: (id: string) => void\r\n  setCalibrationFormData: (data: CalibrationFormData | null) => void\r\n  updateCalibrationFormData: (updates: Partial<CalibrationFormData>) => void\r\n  completeCalibrationStep: (eventId: string, step: number) => void\r\n  finalizeCalibration: (eventId: string, result: 'Aprovado' | 'Reprovado') => void\r\n\r\n  // Alert Actions\r\n  addAlert: (alert: Omit<Alert, 'id' | 'timestamp' | 'read'>) => void\r\n  markAlertAsRead: (alertId: string) => void\r\n  markAllAlertsAsRead: () => void\r\n  deleteAlert: (alertId: string) => void\r\n  clearAllAlerts: () => void\r\n\r\n  // Filter Actions\r\n  setMonitoringFilters: (filters: Partial<AppState['monitoringFilters']>) => void\r\n  setCalibrationFilters: (filters: Partial<AppState['calibrationFilters']>) => void\r\n\r\n  // Data Actions\r\n  resetToDefaults: () => void\r\n  clearAllData: () => void\r\n\r\n  // Computed\r\n  getUnreadAlertsCount: () => number\r\n  getActiveMetersCount: () => number\r\n  getFilteredMonitoringData: () => MonitoringDataRow[]\r\n  getFilteredCalibrationEvents: () => CalibrationEvent[]\r\n}\r\n\r\n// ============================================================================\r\n// ESTADO INICIAL\r\n// ============================================================================\r\n\r\nconst getInitialState = (): AppState => ({\r\n  user: {\r\n    id: 'user-1',\r\n    name: 'Mauricio Amorim',\r\n    email: 'mauricio.amorim@equinor.com',\r\n    role: 'Admin',\r\n  },\r\n\r\n  activeModule: 'monitoring',\r\n  sidebarCollapsed: false,\r\n  showNewEventModal: false,\r\n  showImportModal: false,\r\n  showExportModal: false,\r\n  showMeterModal: false,\r\n  showAlertModal: false,\r\n  editingMeter: null,\r\n\r\n  meters: [],\r\n  selectedMeter: null,\r\n\r\n  monitoringData: [],\r\n\r\n  calibrationEvents: [],\r\n  selectedEvent: null,\r\n  calibrationFormData: null,\r\n\r\n  alerts: [],\r\n\r\n  monitoringFilters: {\r\n    startDate: '',\r\n    endDate: '',\r\n    meterId: '',\r\n    status: '',\r\n  },\r\n  calibrationFilters: {\r\n    status: '',\r\n    type: '',\r\n    meterId: '',\r\n    responsible: '',\r\n  },\r\n})\r\n\r\n// ============================================================================\r\n// STORE\r\n// ============================================================================\r\n\r\nexport const useAppStore = create<AppState & AppActions>()(\r\n  persist(\r\n    (set, get) => ({\r\n      ...getInitialState(),\r\n\r\n      // ========================================================================\r\n      // UI ACTIONS\r\n      // ========================================================================\r\n      setActiveModule: (module) => set({ activeModule: module, selectedEvent: null }),\r\n      toggleSidebar: () => set((state) => ({ sidebarCollapsed: !state.sidebarCollapsed })),\r\n      setShowNewEventModal: (show) => set({ showNewEventModal: show }),\r\n      setShowImportModal: (show) => set({ showImportModal: show }),\r\n      setShowExportModal: (show) => set({ showExportModal: show }),\r\n      setShowMeterModal: (show) => set({ showMeterModal: show }),\r\n      setShowAlertModal: (show) => set({ showAlertModal: show }),\r\n      setEditingMeter: (meter) => set({ editingMeter: meter, showMeterModal: !!meter }),\r\n\r\n      // ========================================================================\r\n      // METER ACTIONS\r\n      // ========================================================================\r\n      setSelectedMeter: (meter) => set({ selectedMeter: meter }),\r\n\r\n      addMeter: (meterData) => {\r\n        const meter: Meter = {\r\n          ...meterData,\r\n          id: generateUniqueId('meter'),\r\n        }\r\n        set((state) => ({ meters: [...state.meters, meter] }))\r\n        \r\n        get().addAlert({\r\n          type: 'success',\r\n          severity: 'info',\r\n          message: `Medidor ${meter.tag} adicionado com sucesso`,\r\n          meterId: meter.id,\r\n          meterTag: meter.tag,\r\n        })\r\n      },\r\n\r\n      updateMeter: (id, updates) => {\r\n        set((state) => ({\r\n          meters: state.meters.map((m) => (m.id === id ? { ...m, ...updates } : m)),\r\n        }))\r\n      },\r\n\r\n      deleteMeter: (id) => {\r\n        const meter = get().meters.find((m) => m.id === id)\r\n        set((state) => ({\r\n          meters: state.meters.filter((m) => m.id !== id),\r\n          selectedMeter: state.selectedMeter?.id === id ? null : state.selectedMeter,\r\n        }))\r\n        \r\n        if (meter) {\r\n          get().addAlert({\r\n            type: 'warning',\r\n            severity: 'warning',\r\n            message: `Medidor ${meter.tag} removido`,\r\n          })\r\n        }\r\n      },\r\n\r\n      // ========================================================================\r\n      // MONITORING ACTIONS\r\n      // ========================================================================\r\n      addMonitoringData: (dataWithoutId) => {\r\n        const data: MonitoringDataRow = {\r\n          ...dataWithoutId,\r\n          id: generateUniqueId('mon'),\r\n        }\r\n        set((state) => ({ monitoringData: [...state.monitoringData, data] }))\r\n      },\r\n\r\n      updateMonitoringData: (id, updates) => {\r\n        set((state) => ({\r\n          monitoringData: state.monitoringData.map((d) =>\r\n            d.id === id ? { ...d, ...updates } : d\r\n          ),\r\n        }))\r\n      },\r\n\r\n      deleteMonitoringData: (id) => {\r\n        set((state) => ({\r\n          monitoringData: state.monitoringData.filter((d) => d.id !== id),\r\n        }))\r\n      },\r\n\r\n      importMonitoringData: (data) => {\r\n        const dataWithIds = data.map((d) => ({\r\n          ...d,\r\n          id: d.id || generateUniqueId('mon'),\r\n        }))\r\n        set((state) => ({\r\n          monitoringData: [...state.monitoringData, ...dataWithIds],\r\n        }))\r\n        \r\n        get().addAlert({\r\n          type: 'success',\r\n          severity: 'info',\r\n          message: `${data.length} registros de monitoramento importados`,\r\n        })\r\n      },\r\n\r\n      recalculateBalances: () => {\r\n        set((state) => ({\r\n          monitoringData: state.monitoringData.map((row) => {\r\n            const balance = calculateMassBalance(\r\n              { oil: row.topOil, gas: row.topGas, water: row.topWater || 0 },\r\n              { oil: row.sepOil, gas: row.sepGas, water: row.sepWater || 0 }\r\n            )\r\n            return {\r\n              ...row,\r\n              hcBalancePercent: balance.hcBalance,\r\n              totalBalancePercent: balance.totalBalance,\r\n              hcStatus: balance.hcStatus,\r\n              totalStatus: balance.totalStatus,\r\n              action: balance.action,\r\n            }\r\n          }),\r\n        }))\r\n      },\r\n\r\n      // ========================================================================\r\n      // CALIBRATION ACTIONS\r\n      // ========================================================================\r\n      setSelectedEvent: (event) => set({ selectedEvent: event }),\r\n\r\n      addCalibrationEvent: (meter, type) => {\r\n        const now = new Date()\r\n        const eventId = generateCalibrationEventId(meter.tag, type, now)\r\n        \r\n        const event: CalibrationEvent = {\r\n          id: eventId,\r\n          meterId: meter.id,\r\n          meterTag: meter.tag,\r\n          meterName: meter.name,\r\n          type: type as CalibrationEvent['type'],\r\n          status: 'Em Andamento',\r\n          startDate: now.toISOString().split('T')[0],\r\n          currentStep: 1,\r\n          progress: 0,\r\n          responsible: get().user.name,\r\n          createdAt: now.toISOString(),\r\n          updatedAt: now.toISOString(),\r\n        }\r\n\r\n        set((state) => ({\r\n          calibrationEvents: [...state.calibrationEvents, event],\r\n          showNewEventModal: false,\r\n        }))\r\n\r\n        get().addAlert({\r\n          type: 'info',\r\n          severity: 'info',\r\n          message: `Avaliao ${eventId} iniciada para ${meter.tag}`,\r\n          meterId: meter.id,\r\n          meterTag: meter.tag,\r\n        })\r\n\r\n        return event\r\n      },\r\n\r\n      updateCalibrationEvent: (id, updates) => {\r\n        set((state) => ({\r\n          calibrationEvents: state.calibrationEvents.map((e) =>\r\n            e.id === id ? { ...e, ...updates, updatedAt: new Date().toISOString() } : e\r\n          ),\r\n          selectedEvent:\r\n            state.selectedEvent?.id === id\r\n              ? { ...state.selectedEvent, ...updates, updatedAt: new Date().toISOString() }\r\n              : state.selectedEvent,\r\n        }))\r\n      },\r\n\r\n      deleteCalibrationEvent: (id) => {\r\n        set((state) => ({\r\n          calibrationEvents: state.calibrationEvents.filter((e) => e.id !== id),\r\n          selectedEvent: state.selectedEvent?.id === id ? null : state.selectedEvent,\r\n        }))\r\n      },\r\n\r\n      setCalibrationFormData: (data) => set({ calibrationFormData: data }),\r\n\r\n      updateCalibrationFormData: (updates) => {\r\n        set((state) => ({\r\n          calibrationFormData: state.calibrationFormData\r\n            ? { ...state.calibrationFormData, ...updates }\r\n            : null,\r\n        }))\r\n      },\r\n\r\n      completeCalibrationStep: (eventId, step) => {\r\n        const progress = Math.round((step / 7) * 100)\r\n        get().updateCalibrationEvent(eventId, {\r\n          currentStep: Math.min(step + 1, 7),\r\n          progress,\r\n          status: step >= 7 ? 'Concluda' : 'Em Andamento',\r\n        })\r\n      },\r\n\r\n      finalizeCalibration: (eventId, result) => {\r\n        const now = new Date()\r\n        get().updateCalibrationEvent(eventId, {\r\n          status: 'Concluda',\r\n          result,\r\n          progress: 100,\r\n          currentStep: 7,\r\n          endDate: now.toISOString().split('T')[0],\r\n        })\r\n\r\n        const event = get().calibrationEvents.find((e) => e.id === eventId)\r\n        if (event) {\r\n          if (result === 'Aprovado' && get().calibrationFormData?.kFactors) {\r\n            const { kFactors } = get().calibrationFormData!\r\n            get().updateMeter(event.meterId, {\r\n              kOil: kFactors.kOil,\r\n              kGas: kFactors.kGas,\r\n              kWater: kFactors.kWater,\r\n              lastCalibration: now.toISOString().split('T')[0],\r\n              daysToCalibration: 365,\r\n            })\r\n          }\r\n\r\n          get().addAlert({\r\n            type: result === 'Aprovado' ? 'success' : 'error',\r\n            severity: result === 'Aprovado' ? 'info' : 'critical',\r\n            message: `Calibrao ${eventId} finalizada: ${result}`,\r\n            meterId: event.meterId,\r\n            meterTag: event.meterTag,\r\n          })\r\n        }\r\n      },\r\n\r\n      // ========================================================================\r\n      // ALERT ACTIONS\r\n      // ========================================================================\r\n      addAlert: (alertData) => {\r\n        const alert: Alert = {\r\n          ...alertData,\r\n          id: generateUniqueId('alert'),\r\n          timestamp: new Date().toISOString(),\r\n          read: false,\r\n        }\r\n        set((state) => ({ alerts: [alert, ...state.alerts] }))\r\n      },\r\n\r\n      markAlertAsRead: (alertId) => {\r\n        set((state) => ({\r\n          alerts: state.alerts.map((a) => (a.id === alertId ? { ...a, read: true } : a)),\r\n        }))\r\n      },\r\n\r\n      markAllAlertsAsRead: () => {\r\n        set((state) => ({\r\n          alerts: state.alerts.map((a) => ({ ...a, read: true })),\r\n        }))\r\n      },\r\n\r\n      deleteAlert: (alertId) => {\r\n        set((state) => ({\r\n          alerts: state.alerts.filter((a) => a.id !== alertId),\r\n        }))\r\n      },\r\n\r\n      clearAllAlerts: () => set({ alerts: [] }),\r\n\r\n      // ========================================================================\r\n      // FILTER ACTIONS\r\n      // ========================================================================\r\n      setMonitoringFilters: (filters) => {\r\n        set((state) => ({\r\n          monitoringFilters: { ...state.monitoringFilters, ...filters },\r\n        }))\r\n      },\r\n\r\n      setCalibrationFilters: (filters) => {\r\n        set((state) => ({\r\n          calibrationFilters: { ...state.calibrationFilters, ...filters },\r\n        }))\r\n      },\r\n\r\n      // ========================================================================\r\n      // DATA ACTIONS\r\n      // ========================================================================\r\n      resetToDefaults: () => {\r\n        set(getInitialState())\r\n      },\r\n\r\n      clearAllData: () => {\r\n        set({\r\n          meters: [],\r\n          monitoringData: [],\r\n          calibrationEvents: [],\r\n          alerts: [],\r\n          selectedMeter: null,\r\n          selectedEvent: null,\r\n          calibrationFormData: null,\r\n        })\r\n      },\r\n\r\n      // ========================================================================\r\n      // COMPUTED\r\n      // ========================================================================\r\n      getUnreadAlertsCount: () => get().alerts.filter((a) => !a.read).length,\r\n\r\n      getActiveMetersCount: () => get().meters.filter((m) => m.status === 'active').length,\r\n\r\n      getFilteredMonitoringData: () => {\r\n        const { monitoringData, monitoringFilters } = get()\r\n        return monitoringData.filter((d) => {\r\n          if (monitoringFilters.startDate && d.date < monitoringFilters.startDate) return false\r\n          if (monitoringFilters.endDate && d.date > monitoringFilters.endDate) return false\r\n          if (monitoringFilters.status && d.hcStatus !== monitoringFilters.status) return false\r\n          return true\r\n        })\r\n      },\r\n\r\n      getFilteredCalibrationEvents: () => {\r\n        const { calibrationEvents, calibrationFilters } = get()\r\n        return calibrationEvents.filter((e) => {\r\n          if (calibrationFilters.status && e.status !== calibrationFilters.status) return false\r\n          if (calibrationFilters.type && e.type !== calibrationFilters.type) return false\r\n          if (calibrationFilters.meterId && e.meterId !== calibrationFilters.meterId) return false\r\n          if (\r\n            calibrationFilters.responsible &&\r\n            !e.responsible.toLowerCase().includes(calibrationFilters.responsible.toLowerCase())\r\n          )\r\n            return false\r\n          return true\r\n        })\r\n      },\r\n    }),\r\n    {\r\n      name: 'mpfm-monitor-storage',\r\n      storage: createJSONStorage(() => localStorage),\r\n      partialize: (state) => ({\r\n        meters: state.meters,\r\n        monitoringData: state.monitoringData,\r\n        calibrationEvents: state.calibrationEvents,\r\n        alerts: state.alerts,\r\n        user: state.user,\r\n        sidebarCollapsed: state.sidebarCollapsed,\r\n      }),\r\n    }\r\n  )\r\n)\r\n\r\n// ============================================================================\r\n// HOOKS AUXILIARES\r\n// ============================================================================\r\n\r\nexport const useMeters = () => useAppStore((state) => state.meters)\r\nexport const useMonitoringData = () => useAppStore((state) => state.monitoringData)\r\nexport const useCalibrationEvents = () => useAppStore((state) => state.calibrationEvents)\r\nexport const useAlerts = () => useAppStore((state) => state.alerts)\r\nexport const useUser = () => useAppStore((state) => state.user)\r\n","import { useState } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { Sidebar } from './Sidebar'\r\nimport { Header } from './Header'\r\nimport { useAppStore } from '@/store'\r\n\r\nconst MODULE_TITLES: Record<string, string> = {\r\n  monitoring: 'Monitoramento SGM-FM',\r\n  calibration: 'Avaliao de Desempenho',\r\n  compliance: 'Conformidade ANP',\r\n}\r\n\r\ninterface LayoutProps {\r\n  children: React.ReactNode\r\n}\r\n\r\nexport function Layout({ children }: LayoutProps) {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false)\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n  const { alerts, setShowImportModal, setShowExportModal } = useAppStore()\r\n  const unreadCount = alerts.filter((a) => !a.read).length\r\n\r\n  // Map path to module\r\n  const pathToModule = (path: string) => {\r\n    if (path.includes('calibration')) return 'calibration'\r\n    if (path.includes('compliance')) return 'compliance'\r\n    return 'monitoring'\r\n  }\r\n\r\n  const activeModule = pathToModule(location.pathname)\r\n\r\n  const handleModuleChange = (moduleId: string) => {\r\n    navigate(`/${moduleId}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-zinc-950 text-white flex\">\r\n      <Sidebar\r\n        activeModule={activeModule}\r\n        onModuleChange={handleModuleChange}\r\n        collapsed={sidebarCollapsed}\r\n      />\r\n\r\n      <main className=\"flex-1 flex flex-col min-w-0\">\r\n        <Header\r\n          title={MODULE_TITLES[activeModule] || 'MPFM Monitor'}\r\n          onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n          onImport={() => setShowImportModal(true)}\r\n          onExport={() => setShowExportModal(true)}\r\n          alertCount={unreadCount}\r\n        />\r\n\r\n        <div className=\"flex-1 p-4 overflow-auto\">{children}</div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n","import {\r\n  AreaChart,\r\n  Area,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  ReferenceLine,\r\n} from 'recharts'\r\nimport type { MonitoringDataRow } from '@/data/monitoring'\r\n\r\ninterface BalanceChartProps {\r\n  data: MonitoringDataRow[]\r\n}\r\n\r\nexport function BalanceChart({ data }: BalanceChartProps) {\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={220}>\r\n      <AreaChart data={data}>\r\n        <defs>\r\n          <linearGradient id=\"hcGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.3} />\r\n            <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0} />\r\n          </linearGradient>\r\n          <linearGradient id=\"totalGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3} />\r\n            <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\r\n          </linearGradient>\r\n        </defs>\r\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#27272a\" />\r\n        <XAxis\r\n          dataKey=\"date\"\r\n          stroke=\"#71717a\"\r\n          fontSize={10}\r\n          tickFormatter={(v) => v.slice(5)}\r\n        />\r\n        <YAxis stroke=\"#71717a\" fontSize={10} domain={[-15, 40]} />\r\n        <Tooltip\r\n          contentStyle={{\r\n            backgroundColor: '#18181b',\r\n            border: '1px solid #27272a',\r\n            borderRadius: '8px',\r\n            fontSize: '11px',\r\n          }}\r\n        />\r\n        <ReferenceLine y={10} stroke=\"#ef4444\" strokeDasharray=\"5 5\" />\r\n        <ReferenceLine y={-10} stroke=\"#ef4444\" strokeDasharray=\"5 5\" />\r\n        <ReferenceLine y={7} stroke=\"#f59e0b\" strokeDasharray=\"3 3\" />\r\n        <ReferenceLine y={-7} stroke=\"#f59e0b\" strokeDasharray=\"3 3\" />\r\n        <ReferenceLine y={0} stroke=\"#52525b\" />\r\n        <Area\r\n          type=\"monotone\"\r\n          dataKey=\"hcBalTS\"\r\n          stroke=\"#3b82f6\"\r\n          fill=\"url(#hcGrad)\"\r\n          name=\"HC %\"\r\n          strokeWidth={2}\r\n        />\r\n        <Area\r\n          type=\"monotone\"\r\n          dataKey=\"totalBalTS\"\r\n          stroke=\"#10b981\"\r\n          fill=\"url(#totalGrad)\"\r\n          name=\"Total %\"\r\n          strokeWidth={2}\r\n        />\r\n        <Legend wrapperStyle={{ fontSize: '11px' }} />\r\n      </AreaChart>\r\n    </ResponsiveContainer>\r\n  )\r\n}\r\n\r\ninterface ProductionChartProps {\r\n  data: MonitoringDataRow[]\r\n}\r\n\r\nexport function ProductionChart({ data }: ProductionChartProps) {\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={220}>\r\n      <BarChart data={data}>\r\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#27272a\" />\r\n        <XAxis\r\n          dataKey=\"date\"\r\n          stroke=\"#71717a\"\r\n          fontSize={10}\r\n          tickFormatter={(v) => v.slice(5)}\r\n        />\r\n        <YAxis stroke=\"#71717a\" fontSize={10} />\r\n        <Tooltip\r\n          contentStyle={{\r\n            backgroundColor: '#18181b',\r\n            border: '1px solid #27272a',\r\n            borderRadius: '8px',\r\n            fontSize: '11px',\r\n          }}\r\n        />\r\n        <Bar\r\n          dataKey=\"subHC\"\r\n          fill=\"#3b82f6\"\r\n          name=\"Subsea\"\r\n          radius={[4, 4, 0, 0]}\r\n        />\r\n        <Bar\r\n          dataKey=\"topHC\"\r\n          fill=\"#8b5cf6\"\r\n          name=\"Topside\"\r\n          radius={[4, 4, 0, 0]}\r\n        />\r\n        <Bar\r\n          dataKey=\"sepHC\"\r\n          fill=\"#10b981\"\r\n          name=\"Test Sep\"\r\n          radius={[4, 4, 0, 0]}\r\n        />\r\n        <Legend wrapperStyle={{ fontSize: '11px' }} />\r\n      </BarChart>\r\n    </ResponsiveContainer>\r\n  )\r\n}\r\n","import { cn } from '@/utils'\r\nimport type { DayStatus } from './CalendarView'\r\n\r\ninterface DayCellProps {\r\n  dayStatus: DayStatus | null\r\n  isToday?: boolean\r\n  onClick?: () => void\r\n}\r\n\r\nexport function DayCell({ dayStatus, isToday, onClick }: DayCellProps) {\r\n  // Clula vazia (padding do ms anterior)\r\n  if (!dayStatus) {\r\n    return <div className=\"h-16 bg-zinc-900/30 rounded\" />\r\n  }\r\n\r\n  const day = parseInt(dayStatus.date.split('-')[2], 10)\r\n\r\n  const statusStyles = {\r\n    OK: 'bg-emerald-500/10 border-emerald-500/30 hover:bg-emerald-500/20',\r\n    ALERT: 'bg-amber-500/10 border-amber-500/30 hover:bg-amber-500/20',\r\n    FAIL: 'bg-red-500/10 border-red-500/30 hover:bg-red-500/20',\r\n    NO_DATA: 'bg-zinc-800/50 border-zinc-700/30 hover:bg-zinc-700/50',\r\n  }\r\n\r\n  const statusDotStyles = {\r\n    OK: 'bg-emerald-500',\r\n    ALERT: 'bg-amber-500',\r\n    FAIL: 'bg-red-500',\r\n    NO_DATA: 'bg-zinc-600',\r\n  }\r\n\r\n  const statusTextStyles = {\r\n    OK: 'text-emerald-400',\r\n    ALERT: 'text-amber-400',\r\n    FAIL: 'text-red-400',\r\n    NO_DATA: 'text-zinc-500',\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={!dayStatus.hasData}\r\n      className={cn(\r\n        'h-16 rounded border transition-all duration-200 flex flex-col items-center justify-center gap-1',\r\n        'focus:outline-none focus:ring-2 focus:ring-blue-500/50',\r\n        statusStyles[dayStatus.status],\r\n        isToday && 'ring-2 ring-blue-500',\r\n        dayStatus.hasData ? 'cursor-pointer' : 'cursor-default'\r\n      )}\r\n    >\r\n      {/* Nmero do dia */}\r\n      <span\r\n        className={cn(\r\n          'text-sm font-medium',\r\n          dayStatus.hasData ? 'text-white' : 'text-zinc-600',\r\n          isToday && 'text-blue-400'\r\n        )}\r\n      >\r\n        {day}\r\n      </span>\r\n\r\n      {/* Indicador de status */}\r\n      {dayStatus.hasData && (\r\n        <div className=\"flex items-center gap-1\">\r\n          <span className={cn('w-2 h-2 rounded-full', statusDotStyles[dayStatus.status])} />\r\n          <span className={cn('text-[10px] font-medium', statusTextStyles[dayStatus.status])}>\r\n            {dayStatus.status}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Valor do balano HC */}\r\n      {dayStatus.hasData && dayStatus.hcBalance !== undefined && (\r\n        <span className={cn('text-[9px]', statusTextStyles[dayStatus.status])}>\r\n          HC: {dayStatus.hcBalance > 0 ? '+' : ''}{dayStatus.hcBalance.toFixed(1)}%\r\n        </span>\r\n      )}\r\n    </button>\r\n  )\r\n}\r\n","/**\r\n * Servio de Auditoria - MPFM Monitor\r\n * Registra todas as aes do usurio para rastreabilidade ANP\r\n */\r\n\r\nexport type AuditAction =\r\n  | 'CREATE'\r\n  | 'UPDATE'\r\n  | 'DELETE'\r\n  | 'IMPORT'\r\n  | 'EXPORT'\r\n  | 'APPROVE'\r\n  | 'REJECT'\r\n  | 'VIEW'\r\n  | 'LOGIN'\r\n  | 'LOGOUT'\r\n\r\nexport type AuditEntity =\r\n  | 'METER'\r\n  | 'CALIBRATION_EVENT'\r\n  | 'CALIBRATION_FORM'\r\n  | 'MONITORING_DATA'\r\n  | 'PVT_CONFIG'\r\n  | 'K_FACTOR'\r\n  | 'ALERT'\r\n  | 'REPORT'\r\n  | 'USER'\r\n\r\nexport interface AuditLogEntry {\r\n  id: string\r\n  timestamp: string\r\n  userId: string\r\n  userName: string\r\n  action: AuditAction\r\n  entity: AuditEntity\r\n  entityId: string\r\n  entityName?: string\r\n  previousValue?: unknown\r\n  newValue?: unknown\r\n  changes?: Record<string, { old: unknown; new: unknown }>\r\n  reason?: string\r\n  ipAddress?: string\r\n  userAgent?: string\r\n  sessionId?: string\r\n}\r\n\r\nconst STORAGE_KEY = 'mpfm_audit_log'\r\nconst MAX_ENTRIES = 10000\r\n\r\nclass AuditLogService {\r\n  private logs: AuditLogEntry[] = []\r\n  private initialized = false\r\n\r\n  constructor() {\r\n    this.loadFromStorage()\r\n  }\r\n\r\n  private loadFromStorage(): void {\r\n    if (this.initialized) return\r\n    \r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY)\r\n      if (stored) {\r\n        this.logs = JSON.parse(stored)\r\n      }\r\n    } catch (error) {\r\n      console.error('[AuditLog] Erro ao carregar logs:', error)\r\n      this.logs = []\r\n    }\r\n    \r\n    this.initialized = true\r\n  }\r\n\r\n  private saveToStorage(): void {\r\n    try {\r\n      // Manter apenas os ltimos MAX_ENTRIES registros\r\n      if (this.logs.length > MAX_ENTRIES) {\r\n        this.logs = this.logs.slice(-MAX_ENTRIES)\r\n      }\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.logs))\r\n    } catch (error) {\r\n      console.error('[AuditLog] Erro ao salvar logs:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Registra uma ao de auditoria\r\n   */\r\n  async log(entry: Omit<AuditLogEntry, 'id' | 'timestamp' | 'userAgent'>): Promise<AuditLogEntry> {\r\n    const logEntry: AuditLogEntry = {\r\n      ...entry,\r\n      id: `audit-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n      timestamp: new Date().toISOString(),\r\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'server',\r\n    }\r\n\r\n    this.logs.push(logEntry)\r\n    this.saveToStorage()\r\n\r\n    // Log no console em desenvolvimento\r\n    if (import.meta.env.DEV) {\r\n      console.log('[AuditLog]', {\r\n        action: logEntry.action,\r\n        entity: logEntry.entity,\r\n        entityId: logEntry.entityId,\r\n        user: logEntry.userName,\r\n      })\r\n    }\r\n\r\n    // Em produo, enviar para o backend\r\n    if (import.meta.env.PROD) {\r\n      this.sendToServer(logEntry).catch(console.error)\r\n    }\r\n\r\n    return logEntry\r\n  }\r\n\r\n  /**\r\n   * Envia log para o servidor (produo)\r\n   */\r\n  private async sendToServer(entry: AuditLogEntry): Promise<void> {\r\n    try {\r\n      await fetch('/api/audit', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(entry),\r\n      })\r\n    } catch (error) {\r\n      console.error('[AuditLog] Erro ao enviar para servidor:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Busca logs recentes\r\n   */\r\n  getRecentLogs(limit: number = 100): AuditLogEntry[] {\r\n    return this.logs.slice(-limit).reverse()\r\n  }\r\n\r\n  /**\r\n   * Busca logs por entidade\r\n   */\r\n  getLogsByEntity(entity: AuditEntity, entityId?: string): AuditLogEntry[] {\r\n    return this.logs\r\n      .filter((log) => {\r\n        if (log.entity !== entity) return false\r\n        if (entityId && log.entityId !== entityId) return false\r\n        return true\r\n      })\r\n      .reverse()\r\n  }\r\n\r\n  /**\r\n   * Busca logs por usurio\r\n   */\r\n  getLogsByUser(userId: string): AuditLogEntry[] {\r\n    return this.logs.filter((log) => log.userId === userId).reverse()\r\n  }\r\n\r\n  /**\r\n   * Busca logs por perodo\r\n   */\r\n  getLogsByPeriod(startDate: Date, endDate: Date): AuditLogEntry[] {\r\n    const start = startDate.getTime()\r\n    const end = endDate.getTime()\r\n\r\n    return this.logs\r\n      .filter((log) => {\r\n        const logTime = new Date(log.timestamp).getTime()\r\n        return logTime >= start && logTime <= end\r\n      })\r\n      .reverse()\r\n  }\r\n\r\n  /**\r\n   * Busca logs por ao\r\n   */\r\n  getLogsByAction(action: AuditAction): AuditLogEntry[] {\r\n    return this.logs.filter((log) => log.action === action).reverse()\r\n  }\r\n\r\n  /**\r\n   * Exporta logs como JSON\r\n   */\r\n  exportLogs(): string {\r\n    return JSON.stringify(this.logs, null, 2)\r\n  }\r\n\r\n  /**\r\n   * Exporta logs como CSV\r\n   */\r\n  exportLogsAsCSV(): string {\r\n    const headers = [\r\n      'ID',\r\n      'Timestamp',\r\n      'Usurio',\r\n      'Ao',\r\n      'Entidade',\r\n      'ID Entidade',\r\n      'Nome Entidade',\r\n      'Motivo',\r\n    ]\r\n\r\n    const rows = this.logs.map((log) => [\r\n      log.id,\r\n      log.timestamp,\r\n      log.userName,\r\n      log.action,\r\n      log.entity,\r\n      log.entityId,\r\n      log.entityName || '',\r\n      log.reason || '',\r\n    ])\r\n\r\n    return [headers.join(','), ...rows.map((row) => row.join(','))].join('\\n')\r\n  }\r\n\r\n  /**\r\n   * Limpa todos os logs (apenas para desenvolvimento)\r\n   */\r\n  clearLogs(): void {\r\n    if (import.meta.env.PROD) {\r\n      console.warn('[AuditLog] No  possvel limpar logs em produo')\r\n      return\r\n    }\r\n    this.logs = []\r\n    this.saveToStorage()\r\n  }\r\n}\r\n\r\n// Singleton\r\nexport const auditLog = new AuditLogService()\r\n\r\nexport default auditLog\r\n","/**\r\n * Hook de Auditoria - MPFM Monitor\r\n * Facilita o uso do servio de auditoria em componentes React\r\n */\r\n\r\nimport { useCallback } from 'react'\r\nimport { auditLog, type AuditAction, type AuditEntity } from '@/services/auditLog'\r\nimport { useAppStore } from '@/store/useAppStore'\r\n\r\nexport function useAuditLog() {\r\n  const user = useAppStore((state) => state.user)\r\n\r\n  const logAction = useCallback(\r\n    async (\r\n      action: AuditAction,\r\n      entity: AuditEntity,\r\n      entityId: string,\r\n      options?: {\r\n        entityName?: string\r\n        previousValue?: unknown\r\n        newValue?: unknown\r\n        changes?: Record<string, { old: unknown; new: unknown }>\r\n        reason?: string\r\n      }\r\n    ) => {\r\n      return auditLog.log({\r\n        userId: user?.id || 'anonymous',\r\n        userName: user?.name || 'Operador',\r\n        action,\r\n        entity,\r\n        entityId,\r\n        ...options,\r\n      })\r\n    },\r\n    [user]\r\n  )\r\n\r\n  return {\r\n    logAction,\r\n    getRecentLogs: auditLog.getRecentLogs.bind(auditLog),\r\n    getLogsByEntity: auditLog.getLogsByEntity.bind(auditLog),\r\n    getLogsByUser: auditLog.getLogsByUser.bind(auditLog),\r\n    getLogsByPeriod: auditLog.getLogsByPeriod.bind(auditLog),\r\n    exportLogs: auditLog.exportLogs.bind(auditLog),\r\n    exportLogsAsCSV: auditLog.exportLogsAsCSV.bind(auditLog),\r\n  }\r\n}\r\n\r\nexport default useAuditLog\r\n","import { useState } from 'react'\r\nimport {\r\n  Calendar,\r\n  BarChart3,\r\n  Droplets,\r\n  Flame,\r\n  Waves,\r\n  Edit3,\r\n  AlertTriangle,\r\n  CheckCircle,\r\n  XCircle,\r\n  FileText,\r\n} from 'lucide-react'\r\nimport { Modal, Button, Badge, Card, Input, useToast } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { useAuditLog } from '@/hooks/useAuditLog'\r\nimport { cn } from '@/utils'\r\n\r\ninterface DayDetailModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  date: string | null\r\n}\r\n\r\nexport function DayDetailModal({ isOpen, onClose, date }: DayDetailModalProps) {\r\n  const monitoringData = useAppStore((state) => state.monitoringData)\r\n  const updateMonitoringData = useAppStore((state) => state.updateMonitoringData)\r\n  const addAlert = useAppStore((state) => state.addAlert)\r\n  \r\n  const { logAction } = useAuditLog()\r\n  const toast = useToast()\r\n\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [editReason, setEditReason] = useState('')\r\n  const [editValues, setEditValues] = useState<Record<string, number>>({})\r\n\r\n  if (!date) return null\r\n\r\n  const dayData = monitoringData.find((d) => d.date === date)\r\n\r\n  if (!dayData) {\r\n    return (\r\n      <Modal isOpen={isOpen} onClose={onClose} title=\"Detalhes do Dia\" size=\"md\">\r\n        <div className=\"flex flex-col items-center justify-center py-12 text-zinc-500\">\r\n          <Calendar size={48} className=\"mb-4 opacity-50\" />\r\n          <p>Sem dados de medio para {date}</p>\r\n        </div>\r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  const formatDate = (dateStr: string) => {\r\n    const [year, month, day] = dateStr.split('-')\r\n    return `${day}/${month}/${year}`\r\n  }\r\n\r\n  const statusConfig = {\r\n    OK: { icon: CheckCircle, color: 'text-emerald-400', bg: 'bg-emerald-500/10' },\r\n    ALERT: { icon: AlertTriangle, color: 'text-amber-400', bg: 'bg-amber-500/10' },\r\n    FAIL: { icon: XCircle, color: 'text-red-400', bg: 'bg-red-500/10' },\r\n  }\r\n\r\n  const status = statusConfig[dayData.hcStatus] || statusConfig.OK\r\n  const StatusIcon = status.icon\r\n\r\n  const handleStartEdit = () => {\r\n    setIsEditing(true)\r\n    setEditValues({\r\n      subOil: dayData.subOil,\r\n      subGas: dayData.subGas,\r\n      subWater: dayData.subWater || 0,\r\n      topOil: dayData.topOil,\r\n      topGas: dayData.topGas,\r\n      topWater: dayData.topWater || 0,\r\n    })\r\n  }\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsEditing(false)\r\n    setEditReason('')\r\n    setEditValues({})\r\n  }\r\n\r\n  const handleSaveEdit = () => {\r\n    if (!editReason.trim()) {\r\n      addAlert({\r\n        type: 'error',\r\n        severity: 'warning',\r\n        message: ' necessrio informar o motivo da alterao',\r\n      })\r\n      return\r\n    }\r\n\r\n    // Recalcular balanos\r\n    const subHC = editValues.subOil + editValues.subGas\r\n    const topHC = editValues.topOil + editValues.topGas\r\n    const hcBalTS = subHC > 0 ? ((topHC - subHC) / subHC) * 100 : 0\r\n    const subTotal = subHC + (editValues.subWater || 0)\r\n    const topTotal = topHC + (editValues.topWater || 0)\r\n    const totalBalTS = subTotal > 0 ? ((topTotal - subTotal) / subTotal) * 100 : 0\r\n\r\n    // Determinar novo status\r\n    const newHcStatus: 'OK' | 'ALERT' | 'FAIL' =\r\n      Math.abs(hcBalTS) > 10 ? 'FAIL' : Math.abs(hcBalTS) > 7 ? 'ALERT' : 'OK'\r\n\r\n    const newTotalStatus: 'OK' | 'ALERT' | 'FAIL' =\r\n      Math.abs(totalBalTS) > 7 ? 'FAIL' : Math.abs(totalBalTS) > 5 ? 'ALERT' : 'OK'\r\n\r\n    // Atualizar dados\r\n    updateMonitoringData(dayData.id, {\r\n      subOil: editValues.subOil,\r\n      subGas: editValues.subGas,\r\n      subWater: editValues.subWater,\r\n      subHC,\r\n      topOil: editValues.topOil,\r\n      topGas: editValues.topGas,\r\n      topWater: editValues.topWater,\r\n      topHC,\r\n      hcBalTS: parseFloat(hcBalTS.toFixed(2)),\r\n      totalBalTS: parseFloat(totalBalTS.toFixed(2)),\r\n      hcBalancePercent: parseFloat(hcBalTS.toFixed(2)),\r\n      totalBalancePercent: parseFloat(totalBalTS.toFixed(2)),\r\n      hcStatus: newHcStatus,\r\n      totalStatus: newTotalStatus,\r\n      action: newHcStatus === 'FAIL' || newTotalStatus === 'FAIL' ? 'INVESTIGAR' : 'MONITORAR',\r\n    })\r\n\r\n    // Registrar auditoria detalhada\r\n    logAction('UPDATE', 'MONITORING_DATA', dayData.id, {\r\n      entityName: `Dados de medio - ${formatDate(date)}`,\r\n      previousValue: {\r\n        subOil: dayData.subOil,\r\n        subGas: dayData.subGas,\r\n        topOil: dayData.topOil,\r\n        topGas: dayData.topGas,\r\n      },\r\n      newValue: {\r\n        subOil: editValues.subOil,\r\n        subGas: editValues.subGas,\r\n        topOil: editValues.topOil,\r\n        topGas: editValues.topGas,\r\n      },\r\n      reason: editReason,\r\n    })\r\n\r\n    // Notificar usurio\r\n    toast.success(\r\n      'Dados atualizados',\r\n      `Medio de ${formatDate(date)} atualizada com sucesso`\r\n    )\r\n\r\n    addAlert({\r\n      type: 'info',\r\n      severity: 'info',\r\n      message: `Dados de ${formatDate(date)} editados. Motivo: ${editReason}`,\r\n    })\r\n\r\n    setIsEditing(false)\r\n    setEditReason('')\r\n    setEditValues({})\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"\" size=\"lg\">\r\n      <div className=\"space-y-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className={cn('p-2 rounded-lg', status.bg)}>\r\n              <StatusIcon className={status.color} size={24} />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-lg font-semibold text-white\">\r\n                {formatDate(date)}\r\n              </h2>\r\n              <p className=\"text-sm text-zinc-400\">\r\n                Dados de medio diria\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <Badge variant={dayData.hcStatus === 'OK' ? 'success' : dayData.hcStatus === 'ALERT' ? 'warning' : 'error'}>\r\n              {dayData.hcStatus}\r\n            </Badge>\r\n            {!isEditing && (\r\n              <Button variant=\"outline\" size=\"sm\" onClick={handleStartEdit}>\r\n                <Edit3 size={14} className=\"mr-1\" />\r\n                Editar\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Balano de Massa */}\r\n        <Card className=\"p-4 bg-zinc-800/50\">\r\n          <h3 className=\"text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2\">\r\n            <BarChart3 size={16} />\r\n            Balano de Massa\r\n          </h3>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"text-center p-3 rounded-lg bg-zinc-900/50\">\r\n              <p className=\"text-xs text-zinc-500 mb-1\">Balano HC</p>\r\n              <p className={cn('text-2xl font-bold', \r\n                Math.abs(dayData.hcBalTS) > 10 ? 'text-red-400' :\r\n                Math.abs(dayData.hcBalTS) > 7 ? 'text-amber-400' : 'text-emerald-400'\r\n              )}>\r\n                {dayData.hcBalTS > 0 ? '+' : ''}{dayData.hcBalTS.toFixed(2)}%\r\n              </p>\r\n              <p className=\"text-xs text-zinc-500 mt-1\">Limite: 10%</p>\r\n            </div>\r\n            <div className=\"text-center p-3 rounded-lg bg-zinc-900/50\">\r\n              <p className=\"text-xs text-zinc-500 mb-1\">Balano Total</p>\r\n              <p className={cn('text-2xl font-bold',\r\n                Math.abs(dayData.totalBalTS) > 7 ? 'text-red-400' :\r\n                Math.abs(dayData.totalBalTS) > 5 ? 'text-amber-400' : 'text-emerald-400'\r\n              )}>\r\n                {dayData.totalBalTS > 0 ? '+' : ''}{dayData.totalBalTS.toFixed(2)}%\r\n              </p>\r\n              <p className=\"text-xs text-zinc-500 mt-1\">Limite: 7%</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Dados de Medio */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          {/* Subsea */}\r\n          <Card className=\"p-4 bg-zinc-800/50\">\r\n            <h3 className=\"text-sm font-medium text-blue-400 mb-3 flex items-center gap-2\">\r\n              <Waves size={16} />\r\n              SUBSEA (MPFM)\r\n            </h3>\r\n            <div className=\"space-y-2\">\r\n              {isEditing ? (\r\n                <>\r\n                  <Input\r\n                    label=\"leo (t)\"\r\n                    type=\"number\"\r\n                    value={editValues.subOil}\r\n                    onChange={(e) => setEditValues({...editValues, subOil: parseFloat(e.target.value) || 0})}\r\n                  />\r\n                  <Input\r\n                    label=\"Gs (t)\"\r\n                    type=\"number\"\r\n                    value={editValues.subGas}\r\n                    onChange={(e) => setEditValues({...editValues, subGas: parseFloat(e.target.value) || 0})}\r\n                  />\r\n                  <Input\r\n                    label=\"gua (t)\"\r\n                    type=\"number\"\r\n                    value={editValues.subWater}\r\n                    onChange={(e) => setEditValues({...editValues, subWater: parseFloat(e.target.value) || 0})}\r\n                  />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-zinc-400 flex items-center gap-1\">\r\n                      <Droplets size={12} /> leo\r\n                    </span>\r\n                    <span className=\"text-white font-mono\">{dayData.subOil.toFixed(2)} t</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-zinc-400 flex items-center gap-1\">\r\n                      <Flame size={12} /> Gs\r\n                    </span>\r\n                    <span className=\"text-white font-mono\">{dayData.subGas.toFixed(2)} t</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-zinc-400 flex items-center gap-1\">\r\n                      <Waves size={12} /> gua\r\n                    </span>\r\n                    <span className=\"text-white font-mono\">{(dayData.subWater || 0).toFixed(2)} t</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between text-sm pt-2 border-t border-zinc-700\">\r\n                    <span className=\"text-zinc-300 font-medium\">HC Total</span>\r\n                    <span className=\"text-blue-400 font-mono font-medium\">{dayData.subHC.toFixed(2)} t</span>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Topside */}\r\n          <Card className=\"p-4 bg-zinc-800/50\">\r\n            <h3 className=\"text-sm font-medium text-purple-400 mb-3 flex items-center gap-2\">\r\n              <BarChart3 size={16} />\r\n              TOPSIDE (MPFM)\r\n            </h3>\r\n            <div className=\"space-y-2\">\r\n              {isEditing ? (\r\n                <>\r\n                  <Input\r\n                    label=\"leo (t)\"\r\n                    type=\"number\"\r\n                    value={editValues.topOil}\r\n                    onChange={(e) => setEditValues({...editValues, topOil: parseFloat(e.target.value) || 0})}\r\n                  />\r\n                  <Input\r\n                    label=\"Gs (t)\"\r\n                    type=\"number\"\r\n                    value={editValues.topGas}\r\n                    onChange={(e) => setEditValues({...editValues, topGas: parseFloat(e.target.value) || 0})}\r\n                  />\r\n                  <Input\r\n                    label=\"gua (t)\"\r\n                    type=\"number\"\r\n                    value={editValues.topWater}\r\n                    onChange={(e) => setEditValues({...editValues, topWater: parseFloat(e.target.value) || 0})}\r\n                  />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-zinc-400 flex items-center gap-1\">\r\n                      <Droplets size={12} /> leo\r\n                    </span>\r\n                    <span className=\"text-white font-mono\">{dayData.topOil.toFixed(2)} t</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-zinc-400 flex items-center gap-1\">\r\n                      <Flame size={12} /> Gs\r\n                    </span>\r\n                    <span className=\"text-white font-mono\">{dayData.topGas.toFixed(2)} t</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-zinc-400 flex items-center gap-1\">\r\n                      <Waves size={12} /> gua\r\n                    </span>\r\n                    <span className=\"text-white font-mono\">{(dayData.topWater || 0).toFixed(2)} t</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between text-sm pt-2 border-t border-zinc-700\">\r\n                    <span className=\"text-zinc-300 font-medium\">HC Total</span>\r\n                    <span className=\"text-purple-400 font-mono font-medium\">{dayData.topHC.toFixed(2)} t</span>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Campo de Justificativa (modo edio) */}\r\n        {isEditing && (\r\n          <Card className=\"p-4 bg-amber-500/10 border-amber-500/30\">\r\n            <h3 className=\"text-sm font-medium text-amber-400 mb-2 flex items-center gap-2\">\r\n              <FileText size={16} />\r\n              Justificativa da Alterao (obrigatrio)\r\n            </h3>\r\n            <textarea\r\n              value={editReason}\r\n              onChange={(e) => setEditReason(e.target.value)}\r\n              placeholder=\"Descreva o motivo da alterao para registro de auditoria...\"\r\n              className=\"w-full h-20 bg-zinc-900/50 border border-zinc-700 rounded-lg p-2 text-sm text-white resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50\"\r\n            />\r\n          </Card>\r\n        )}\r\n\r\n        {/* Aes */}\r\n        <div className=\"flex justify-end gap-2 pt-2 border-t border-zinc-800\">\r\n          {isEditing ? (\r\n            <>\r\n              <Button variant=\"ghost\" onClick={handleCancelEdit}>\r\n                Cancelar\r\n              </Button>\r\n              <Button variant=\"primary\" onClick={handleSaveEdit}>\r\n                Salvar Alteraes\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button variant=\"ghost\" onClick={onClose}>\r\n              Fechar\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n","import { useState, useMemo } from 'react'\r\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon } from 'lucide-react'\r\nimport { Card, Button, Select } from '@/components/ui'\r\nimport { DayCell } from './DayCell'\r\nimport { DayDetailModal } from './DayDetailModal'\r\nimport { useAppStore } from '@/store/useAppStore'\r\n\r\nconst WEEKDAYS = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sb']\r\nconst MONTHS = [\r\n  'Janeiro', 'Fevereiro', 'Maro', 'Abril', 'Maio', 'Junho',\r\n  'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'\r\n]\r\n\r\nexport interface DayStatus {\r\n  date: string\r\n  hasData: boolean\r\n  status: 'OK' | 'ALERT' | 'FAIL' | 'NO_DATA'\r\n  hcBalance?: number\r\n  totalBalance?: number\r\n}\r\n\r\nexport function CalendarView() {\r\n  const today = new Date()\r\n  const [currentMonth, setCurrentMonth] = useState(today.getMonth())\r\n  const [currentYear, setCurrentYear] = useState(today.getFullYear())\r\n  const [selectedDate, setSelectedDate] = useState<string | null>(null)\r\n  const [showDetailModal, setShowDetailModal] = useState(false)\r\n\r\n  const monitoringData = useAppStore((state) => state.monitoringData)\r\n\r\n  // Gerar dias do ms atual\r\n  const calendarDays = useMemo(() => {\r\n    const firstDay = new Date(currentYear, currentMonth, 1)\r\n    const lastDay = new Date(currentYear, currentMonth + 1, 0)\r\n    const startPadding = firstDay.getDay()\r\n    const totalDays = lastDay.getDate()\r\n\r\n    const days: (DayStatus | null)[] = []\r\n\r\n    // Dias vazios no incio\r\n    for (let i = 0; i < startPadding; i++) {\r\n      days.push(null)\r\n    }\r\n\r\n    // Dias do ms\r\n    for (let day = 1; day <= totalDays; day++) {\r\n      const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`\r\n      \r\n      // Buscar dados de monitoramento para este dia\r\n      const dayData = monitoringData.find(d => d.date === dateStr)\r\n      \r\n      if (dayData) {\r\n        days.push({\r\n          date: dateStr,\r\n          hasData: true,\r\n          status: dayData.hcStatus,\r\n          hcBalance: dayData.hcBalTS,\r\n          totalBalance: dayData.totalBalTS,\r\n        })\r\n      } else {\r\n        days.push({\r\n          date: dateStr,\r\n          hasData: false,\r\n          status: 'NO_DATA',\r\n        })\r\n      }\r\n    }\r\n\r\n    return days\r\n  }, [currentMonth, currentYear, monitoringData])\r\n\r\n  // Navegao do ms\r\n  const goToPreviousMonth = () => {\r\n    if (currentMonth === 0) {\r\n      setCurrentMonth(11)\r\n      setCurrentYear(currentYear - 1)\r\n    } else {\r\n      setCurrentMonth(currentMonth - 1)\r\n    }\r\n  }\r\n\r\n  const goToNextMonth = () => {\r\n    if (currentMonth === 11) {\r\n      setCurrentMonth(0)\r\n      setCurrentYear(currentYear + 1)\r\n    } else {\r\n      setCurrentMonth(currentMonth + 1)\r\n    }\r\n  }\r\n\r\n  const goToToday = () => {\r\n    setCurrentMonth(today.getMonth())\r\n    setCurrentYear(today.getFullYear())\r\n  }\r\n\r\n  const handleDayClick = (dayStatus: DayStatus) => {\r\n    setSelectedDate(dayStatus.date)\r\n    setShowDetailModal(true)\r\n  }\r\n\r\n  // Estatsticas do ms\r\n  const monthStats = useMemo(() => {\r\n    const daysWithData = calendarDays.filter(d => d?.hasData)\r\n    const okDays = daysWithData.filter(d => d?.status === 'OK').length\r\n    const alertDays = daysWithData.filter(d => d?.status === 'ALERT').length\r\n    const failDays = daysWithData.filter(d => d?.status === 'FAIL').length\r\n    \r\n    return { total: daysWithData.length, ok: okDays, alert: alertDays, fail: failDays }\r\n  }, [calendarDays])\r\n\r\n  // Anos disponveis para seleo\r\n  const yearOptions = Array.from({ length: 10 }, (_, i) => ({\r\n    value: String(currentYear - 5 + i),\r\n    label: String(currentYear - 5 + i)\r\n  }))\r\n\r\n  return (\r\n    <Card className=\"p-4\">\r\n      {/* Header do Calendrio */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <CalendarIcon className=\"text-blue-400\" size={24} />\r\n          <h2 className=\"text-lg font-semibold text-white\">\r\n            Calendrio de Medies\r\n          </h2>\r\n        </div>\r\n\r\n        {/* Estatsticas do ms */}\r\n        <div className=\"flex items-center gap-4 text-sm\">\r\n          <span className=\"text-zinc-400\">\r\n            {monthStats.total} dias com dados:\r\n          </span>\r\n          <span className=\"flex items-center gap-1\">\r\n            <span className=\"w-3 h-3 rounded-full bg-emerald-500\" />\r\n            <span className=\"text-emerald-400\">{monthStats.ok} OK</span>\r\n          </span>\r\n          <span className=\"flex items-center gap-1\">\r\n            <span className=\"w-3 h-3 rounded-full bg-amber-500\" />\r\n            <span className=\"text-amber-400\">{monthStats.alert} Alert</span>\r\n          </span>\r\n          <span className=\"flex items-center gap-1\">\r\n            <span className=\"w-3 h-3 rounded-full bg-red-500\" />\r\n            <span className=\"text-red-400\">{monthStats.fail} Fail</span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navegao Ms/Ano */}\r\n      <div className=\"flex items-center justify-between mb-4 bg-zinc-800/50 rounded-lg p-2\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={goToPreviousMonth}\r\n          className=\"text-zinc-400 hover:text-white\"\r\n        >\r\n          <ChevronLeft size={20} />\r\n        </Button>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <Select\r\n            value={String(currentMonth)}\r\n            onChange={(e) => setCurrentMonth(Number(e.target.value))}\r\n            options={MONTHS.map((m, i) => ({ value: String(i), label: m }))}\r\n            className=\"w-32\"\r\n          />\r\n          <Select\r\n            value={String(currentYear)}\r\n            onChange={(e) => setCurrentYear(Number(e.target.value))}\r\n            options={yearOptions}\r\n            className=\"w-24\"\r\n          />\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={goToToday}\r\n            className=\"ml-2\"\r\n          >\r\n            Hoje\r\n          </Button>\r\n        </div>\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={goToNextMonth}\r\n          className=\"text-zinc-400 hover:text-white\"\r\n        >\r\n          <ChevronRight size={20} />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Grade do Calendrio */}\r\n      <div className=\"grid grid-cols-7 gap-1\">\r\n        {/* Cabealho dos dias da semana */}\r\n        {WEEKDAYS.map((day) => (\r\n          <div\r\n            key={day}\r\n            className=\"text-center text-xs font-medium text-zinc-500 py-2\"\r\n          >\r\n            {day}\r\n          </div>\r\n        ))}\r\n\r\n        {/* Clulas dos dias */}\r\n        {calendarDays.map((dayStatus, index) => (\r\n          <DayCell\r\n            key={index}\r\n            dayStatus={dayStatus}\r\n            isToday={dayStatus?.date === today.toISOString().split('T')[0]}\r\n            onClick={dayStatus ? () => handleDayClick(dayStatus) : undefined}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Legenda */}\r\n      <div className=\"flex items-center justify-center gap-6 mt-4 pt-4 border-t border-zinc-800 text-xs text-zinc-500\">\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded bg-emerald-500/20 border border-emerald-500\" />\r\n          OK (HC  7%)\r\n        </span>\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded bg-amber-500/20 border border-amber-500\" />\r\n          Alert (7% &lt; HC  10%)\r\n        </span>\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded bg-red-500/20 border border-red-500\" />\r\n          Fail (HC &gt; 10%)\r\n        </span>\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-3 h-3 rounded bg-zinc-700 border border-zinc-600\" />\r\n          Sem dados\r\n        </span>\r\n      </div>\r\n\r\n      {/* Modal de Detalhes */}\r\n      <DayDetailModal\r\n        isOpen={showDetailModal}\r\n        onClose={() => setShowDetailModal(false)}\r\n        date={selectedDate}\r\n      />\r\n    </Card>\r\n  )\r\n}\r\n","import type { Alert, ComplianceItem } from '@/types'\r\n\r\nexport const alertsData: Alert[] = [\r\n  {\r\n    id: 'alert-1',\r\n    type: 'error',\r\n    severity: 'critical',\r\n    message: 'Balano HC > 10% detectado em 20/01',\r\n    meterId: 'meter-1',\r\n    meterTag: '13FT0367',\r\n    timestamp: '2026-01-23T12:00:00Z',\r\n    read: false,\r\n    actionRequired: 'Investigar causa do desvio',\r\n  },\r\n  {\r\n    id: 'alert-2',\r\n    type: 'warning',\r\n    severity: 'warning',\r\n    message: 'K-Factor de gs fora do range normal',\r\n    meterId: 'meter-3',\r\n    meterTag: '18FT1506',\r\n    timestamp: '2026-01-23T09:00:00Z',\r\n    read: false,\r\n    actionRequired: 'Verificar calibrao',\r\n  },\r\n  {\r\n    id: 'alert-3',\r\n    type: 'info',\r\n    severity: 'info',\r\n    message: 'Calibrao CAL-MPFM_SUB-COM-01-26 em andamento',\r\n    meterId: 'meter-3',\r\n    meterTag: '18FT1506',\r\n    timestamp: '2026-01-22T08:00:00Z',\r\n    read: true,\r\n  },\r\n  {\r\n    id: 'alert-4',\r\n    type: 'success',\r\n    severity: 'info',\r\n    message: 'Calibrao CAL-MPFM_TOP-PER-07-25 concluda',\r\n    meterId: 'meter-1',\r\n    meterTag: '13FT0367',\r\n    timestamp: '2026-01-20T16:00:00Z',\r\n    read: true,\r\n  },\r\n]\r\n\r\nexport const complianceData: ComplianceItem[] = [\r\n  {\r\n    id: 'comp-1',\r\n    item: '4.5',\r\n    description: 'Monitoramento de variveis crticas',\r\n    status: 'OK',\r\n    evidence: 'Planilha diria atualizada',\r\n    lastCheck: '2026-01-23',\r\n  },\r\n  {\r\n    id: 'comp-2',\r\n    item: '7.3',\r\n    description: 'RAD a cada 180 dias',\r\n    status: 'OK',\r\n    evidence: 'ltimo RAD em 15/10/2025',\r\n    lastCheck: '2026-01-23',\r\n  },\r\n  {\r\n    id: 'comp-3',\r\n    item: '8.6.3',\r\n    description: 'Totalizao mnima 24h',\r\n    status: 'OK',\r\n    evidence: 'Durao registrada: 24.0h',\r\n    lastCheck: '2026-01-23',\r\n  },\r\n  {\r\n    id: 'comp-4',\r\n    item: '10.3',\r\n    description: 'Relatrio final em 30 dias',\r\n    status: 'WARNING',\r\n    evidence: 'Prazo: 16/02/2026 (21 dias)',\r\n    lastCheck: '2026-01-23',\r\n  },\r\n  {\r\n    id: 'comp-5',\r\n    item: '10.4',\r\n    description: 'Parciais a cada 10 dias',\r\n    status: 'OK',\r\n    evidence: 'ltima parcial: 20/01/2026',\r\n    lastCheck: '2026-01-23',\r\n  },\r\n  {\r\n    id: 'comp-6',\r\n    item: '10.5',\r\n    description: 'Plano de contingncia',\r\n    status: 'OK',\r\n    evidence: 'PC-MPFM-001 aprovado',\r\n    lastCheck: '2026-01-23',\r\n  },\r\n]\r\n\r\n// Helper function to get time ago string\r\nexport function getTimeAgo(timestamp: string): string {\r\n  const now = new Date()\r\n  const date = new Date(timestamp)\r\n  const diffMs = now.getTime() - date.getTime()\r\n  const diffMins = Math.floor(diffMs / 60000)\r\n  const diffHours = Math.floor(diffMs / 3600000)\r\n  const diffDays = Math.floor(diffMs / 86400000)\r\n\r\n  if (diffMins < 60) return `${diffMins}m atrs`\r\n  if (diffHours < 24) return `${diffHours}h atrs`\r\n  return `${diffDays}d atrs`\r\n}\r\n","/**\r\n * Dados reais extrados dos PDFs de relatrios do FPSO Bacalhau\r\n * Fontes:\r\n * - B03_MPFM_Daily (Topside)\r\n * - B05_MPFM_Daily (Subsea)\r\n * - PVTCalibration_Bank03_Stream01_211 (Calibrao)\r\n * - Memorial_Descritivo_MPFM_v1.0.docx\r\n * - PRD_MPFM_Bacalhau_v1.0.docx\r\n */\r\n\r\nimport type { Meter } from '@/types'\r\n\r\n// ============================================================================\r\n// MEDIDORES MPFM - FPSO BACALHAU\r\n// ============================================================================\r\nexport const realMeters: Omit<Meter, 'id'>[] = [\r\n  {\r\n    tag: '13FT0367',\r\n    name: 'Riser P5',\r\n    location: 'TOPSIDE',\r\n    status: 'active',\r\n    serialNumber: 'SLB-VX-2024-0367',\r\n    manufacturer: 'Schlumberger',\r\n    model: 'Vx Spectra',\r\n    lastCalibration: '2026-01-18',\r\n    kOil: 1.0908,\r\n    kGas: 1.09262,\r\n    kWater: 1.0,\r\n    daysToCalibration: 365,\r\n  },\r\n  {\r\n    tag: '13FT0417',\r\n    name: 'Riser P6',\r\n    location: 'TOPSIDE',\r\n    status: 'inactive',\r\n    serialNumber: 'SLB-VX-2024-0417',\r\n    manufacturer: 'Schlumberger',\r\n    model: 'Vx Spectra',\r\n    lastCalibration: '2025-06-15',\r\n    kOil: 1.0,\r\n    kGas: 1.0,\r\n    kWater: 1.0,\r\n    daysToCalibration: 180,\r\n  },\r\n  {\r\n    tag: '18FT1506',\r\n    name: 'PE_4',\r\n    location: 'SUBSEA',\r\n    status: 'active',\r\n    serialNumber: 'TFMC-MPM-2024-1506',\r\n    manufacturer: 'TechnipFMC',\r\n    model: 'MPM',\r\n    lastCalibration: '2025-12-01',\r\n    kOil: 1.0,\r\n    kGas: 1.0,\r\n    kWater: 1.0,\r\n    daysToCalibration: 320,\r\n  },\r\n  {\r\n    tag: '18FT1806',\r\n    name: 'PE_EO4',\r\n    location: 'SUBSEA',\r\n    status: 'inactive',\r\n    serialNumber: 'TFMC-MPM-2024-1806',\r\n    manufacturer: 'TechnipFMC',\r\n    model: 'MPM',\r\n    lastCalibration: '2025-08-20',\r\n    kOil: 1.0,\r\n    kGas: 1.0,\r\n    kWater: 1.0,\r\n    daysToCalibration: 0,\r\n  },\r\n  {\r\n    tag: '18FT1706',\r\n    name: 'PE_EO105',\r\n    location: 'SUBSEA',\r\n    status: 'inactive',\r\n    serialNumber: 'TFMC-MPM-2024-1706',\r\n    manufacturer: 'TechnipFMC',\r\n    model: 'MPM',\r\n    lastCalibration: '2025-07-10',\r\n    kOil: 1.0,\r\n    kGas: 1.0,\r\n    kWater: 1.0,\r\n    daysToCalibration: 0,\r\n  },\r\n  {\r\n    tag: '18FT1406',\r\n    name: 'PE_EO10',\r\n    location: 'SUBSEA',\r\n    status: 'inactive',\r\n    serialNumber: 'TFMC-MPM-2024-1406',\r\n    manufacturer: 'TechnipFMC',\r\n    model: 'MPM',\r\n    lastCalibration: '2025-09-05',\r\n    kOil: 1.0,\r\n    kGas: 1.0,\r\n    kWater: 1.0,\r\n    daysToCalibration: 0,\r\n  },\r\n]\r\n\r\n// ============================================================================\r\n// PRODUO DIRIA - DADOS REAIS DOS RELATRIOS\r\n// ============================================================================\r\nexport interface DailyProductionData {\r\n  date: string\r\n  source: 'SUBSEA' | 'TOPSIDE' | 'SEPARATOR'\r\n  meterTag: string\r\n  oil: number // toneladas\r\n  gas: number // toneladas\r\n  water: number // toneladas\r\n  hc: number // toneladas (oil + gas)\r\n  total: number // toneladas (hc + water)\r\n}\r\n\r\nexport const realDailyProduction: DailyProductionData[] = [\r\n  // TOPSIDE - 13FT0367 (Riser P5)\r\n  {\r\n    date: '2026-01-02',\r\n    source: 'TOPSIDE',\r\n    meterTag: '13FT0367',\r\n    oil: 4438.862,\r\n    gas: 1014.71,\r\n    water: 1.288,\r\n    hc: 5452.137,\r\n    total: 5454.86,\r\n  },\r\n  {\r\n    date: '2026-01-03',\r\n    source: 'TOPSIDE',\r\n    meterTag: '13FT0367',\r\n    oil: 3019.265,\r\n    gas: 668.533,\r\n    water: 0.26,\r\n    hc: 3687.151,\r\n    total: 3688.058,\r\n  },\r\n  {\r\n    date: '2026-01-04',\r\n    source: 'TOPSIDE',\r\n    meterTag: '13FT0367',\r\n    oil: 3932.623,\r\n    gas: 880.823,\r\n    water: 1.287,\r\n    hc: 4812.451,\r\n    total: 4814.734,\r\n  },\r\n  // SUBSEA - 18FT1506 (PE_4)\r\n  {\r\n    date: '2026-01-02',\r\n    source: 'SUBSEA',\r\n    meterTag: '18FT1506',\r\n    oil: 5612.566,\r\n    gas: 0.0, // Subsea no mede gs separadamente neste config\r\n    water: 5.075,\r\n    hc: 5612.566,\r\n    total: 5617.641,\r\n  },\r\n  {\r\n    date: '2026-01-03',\r\n    source: 'SUBSEA',\r\n    meterTag: '18FT1506',\r\n    oil: 3578.973,\r\n    gas: 0.0,\r\n    water: 3.235,\r\n    hc: 3578.973,\r\n    total: 3582.208,\r\n  },\r\n  {\r\n    date: '2026-01-04',\r\n    source: 'SUBSEA',\r\n    meterTag: '18FT1506',\r\n    oil: 4870.265,\r\n    gas: 0.0,\r\n    water: 4.586,\r\n    hc: 4870.265,\r\n    total: 4874.851,\r\n  },\r\n]\r\n\r\n// ============================================================================\r\n// DADOS DE CALIBRAO PVT - Calibration #211\r\n// ============================================================================\r\nexport const realCalibrationPVT = {\r\n  calibrationNo: 211,\r\n  meterTag: '13FT0367',\r\n  meterName: 'N1 - Riser P5',\r\n  startDate: '2026-01-17',\r\n  endDate: '2026-01-18',\r\n  status: 'Completed' as const,\r\n  \r\n  // Condies de operao\r\n  conditions: {\r\n    pressure: { mpfm: 11505.73, separator: 8343.63, unit: 'kPa' },\r\n    temperature: { mpfm: 75.07, separator: 72.18, unit: 'C' },\r\n  },\r\n  \r\n  // Densidades\r\n  densities: {\r\n    oil: { mpfm: 754.033, separator: 831.987, unit: 'kg/m' },\r\n    gas: { mpfm: 91.842, separator: 81.585, unit: 'kg/m' },\r\n    water: { mpfm: 999.784, separator: 996.629, unit: 'kg/m' },\r\n  },\r\n  \r\n  // Composio molar\r\n  composition: [\r\n    { component: 'N', molPercent: 0.575, molecularWeight: 28.01 },\r\n    { component: 'CO', molPercent: 0.02, molecularWeight: 44.01 },\r\n    { component: 'C', molPercent: 62.183, molecularWeight: 16.04 },\r\n    { component: 'C', molPercent: 8.069, molecularWeight: 30.07 },\r\n    { component: 'C', molPercent: 5.047, molecularWeight: 44.1 },\r\n    { component: 'i-C', molPercent: 1.069, molecularWeight: 58.12 },\r\n    { component: 'n-C', molPercent: 1.858, molecularWeight: 58.12 },\r\n    { component: 'i-C', molPercent: 0.681, molecularWeight: 72.15 },\r\n    { component: 'n-C', molPercent: 0.788, molecularWeight: 72.15 },\r\n    { component: 'C', molPercent: 1.112, molecularWeight: 86.18 },\r\n    { component: 'C', molPercent: 1.138, molecularWeight: 97.37 },\r\n    { component: 'C', molPercent: 1.657, molecularWeight: 111.29 },\r\n    { component: 'C', molPercent: 1.472, molecularWeight: 125.25 },\r\n    { component: 'C+', molPercent: 14.331, molecularWeight: 289.64 },\r\n  ],\r\n  \r\n  // Pseudo-componentes\r\n  pseudoComponents: {\r\n    C7: { weight: 97.365, density: 748.787 },\r\n    C8: { weight: 111.286, density: 771.408 },\r\n    C9: { weight: 125.253, density: 788.64 },\r\n    'C10+': { weight: 289.64, density: 890.903 },\r\n  },\r\n  \r\n  // Fatores Peneloux\r\n  peneloux: { gas: 1.0, oil: 1.0 },\r\n  \r\n  // Massas acumuladas durante calibrao (24h)\r\n  accumulatedMass: {\r\n    mpfm: { oil: 6365.07, gas: 1476.18, water: 1.46, hc: 7841.25, unit: 't' },\r\n    separator: { oil: 6742.65, gas: 1813.28, water: 24.93, hc: 8555.93, unit: 't' },\r\n  },\r\n  \r\n  // K-Factors calculados\r\n  kFactors: {\r\n    oil: { used: 0.94433, new: 1.0908 },\r\n    gas: { used: 0.96191, new: 1.09262 },\r\n    water: { used: 1.0, new: 17.09393 }, // Valor alto indica pouca gua\r\n    hc: { used: 0.9473, new: 1.09114 },\r\n  },\r\n  \r\n  // Volumes PVT calculados\r\n  pvtVolumes: {\r\n    oil: { volume: 7176.047, unit: 'Sm' },\r\n    gas: { volume: 2479290.899, unit: 'Sm' },\r\n    water: { volume: 20.023, unit: 'Sm' },\r\n  },\r\n  \r\n  // Densidades PVT\r\n  pvtDensities: {\r\n    oil: { density: 871.271, unit: 'kg/Sm' },\r\n    gas: { density: 0.929, unit: 'kg/Sm' },\r\n    water: { density: 1212.228, unit: 'kg/Sm' },\r\n  },\r\n}\r\n\r\n// ============================================================================\r\n// DADOS DE BALANO DE MASSA CALCULADOS\r\n// ============================================================================\r\nexport interface CalculatedBalance {\r\n  date: string\r\n  subseaHC: number\r\n  topsideHC: number\r\n  hcBalancePercent: number\r\n  hcStatus: 'OK' | 'ALERT' | 'FAIL'\r\n  subseaTotal: number\r\n  topsideTotal: number\r\n  totalBalancePercent: number\r\n  totalStatus: 'OK' | 'ALERT' | 'FAIL'\r\n  action: 'MONITORAR' | 'INVESTIGAR'\r\n}\r\n\r\nexport function calculateBalances(): CalculatedBalance[] {\r\n  const balances: CalculatedBalance[] = []\r\n  const dates = [...new Set(realDailyProduction.map((d) => d.date))]\r\n\r\n  for (const date of dates) {\r\n    const subsea = realDailyProduction.find(\r\n      (d) => d.date === date && d.source === 'SUBSEA'\r\n    )\r\n    const topside = realDailyProduction.find(\r\n      (d) => d.date === date && d.source === 'TOPSIDE'\r\n    )\r\n\r\n    if (subsea && topside) {\r\n      const hcBalance = subsea.hc > 0 \r\n        ? ((topside.hc - subsea.hc) / subsea.hc) * 100 \r\n        : 0\r\n      const totalBalance = subsea.total > 0 \r\n        ? ((topside.total - subsea.total) / subsea.total) * 100 \r\n        : 0\r\n\r\n      const hcStatus: 'OK' | 'ALERT' | 'FAIL' = \r\n        Math.abs(hcBalance) > 10 ? 'FAIL' : \r\n        Math.abs(hcBalance) > 7 ? 'ALERT' : 'OK'\r\n      \r\n      const totalStatus: 'OK' | 'ALERT' | 'FAIL' = \r\n        Math.abs(totalBalance) > 7 ? 'FAIL' : \r\n        Math.abs(totalBalance) > 5 ? 'ALERT' : 'OK'\r\n\r\n      balances.push({\r\n        date,\r\n        subseaHC: subsea.hc,\r\n        topsideHC: topside.hc,\r\n        hcBalancePercent: hcBalance,\r\n        hcStatus,\r\n        subseaTotal: subsea.total,\r\n        topsideTotal: topside.total,\r\n        totalBalancePercent: totalBalance,\r\n        totalStatus,\r\n        action: hcStatus === 'FAIL' || totalStatus === 'FAIL' ? 'INVESTIGAR' : 'MONITORAR',\r\n      })\r\n    }\r\n  }\r\n\r\n  return balances\r\n}\r\n\r\n// ============================================================================\r\n// HELPER PARA INICIALIZAR STORE COM DADOS REAIS\r\n// ============================================================================\r\nexport function getInitialRealData() {\r\n  return {\r\n    meters: realMeters,\r\n    dailyProduction: realDailyProduction,\r\n    calibrationPVT: realCalibrationPVT,\r\n    balances: calculateBalances(),\r\n  }\r\n}\r\n","import { AlertCircle, AlertTriangle, CheckCircle, Info } from 'lucide-react'\r\nimport { useAppStore } from '@/store'\r\nimport { getTimeAgo } from '@/data'\r\nimport { cn } from '@/utils'\r\n\r\ninterface AlertsListProps {\r\n  limit?: number\r\n}\r\n\r\nexport function AlertsList({ limit }: AlertsListProps) {\r\n  const alerts = useAppStore((state) => state.alerts)\r\n  const displayAlerts = limit ? alerts.slice(0, limit) : alerts\r\n\r\n  const getIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'error':\r\n        return AlertCircle\r\n      case 'warning':\r\n        return AlertTriangle\r\n      case 'success':\r\n        return CheckCircle\r\n      default:\r\n        return Info\r\n    }\r\n  }\r\n\r\n  const getIconStyle = (type: string) => {\r\n    switch (type) {\r\n      case 'error':\r\n        return 'bg-red-500/20 text-red-400'\r\n      case 'warning':\r\n        return 'bg-amber-500/20 text-amber-400'\r\n      case 'success':\r\n        return 'bg-emerald-500/20 text-emerald-400'\r\n      default:\r\n        return 'bg-blue-500/20 text-blue-400'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"divide-y divide-zinc-800\">\r\n      {displayAlerts.map((alert) => {\r\n        const Icon = getIcon(alert.type)\r\n        return (\r\n          <div\r\n            key={alert.id}\r\n            className={cn('p-3', !alert.read && 'bg-zinc-800/30')}\r\n          >\r\n            <div className=\"flex items-start gap-2\">\r\n              <div className={cn('mt-0.5 p-1 rounded', getIconStyle(alert.type))}>\r\n                <Icon className=\"w-3 h-3\" />\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-xs text-zinc-200 truncate\">{alert.message}</p>\r\n                <p className=\"text-[10px] text-zinc-500 mt-0.5\">\r\n                  {alert.meterTag}  {getTimeAgo(alert.timestamp)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { Badge } from '@/components/ui'\r\nimport type { MonitoringDataRow } from '@/data/monitoring'\r\nimport { cn } from '@/utils'\r\n\r\ninterface DailyTableProps {\r\n  data: MonitoringDataRow[]\r\n}\r\n\r\nexport function DailyTable({ data }: DailyTableProps) {\r\n  const reversedData = [...data].reverse().slice(0, 5)\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto\">\r\n      <table className=\"w-full text-xs\">\r\n        <thead>\r\n          <tr className=\"border-b border-zinc-700 bg-zinc-800/50\">\r\n            <th className=\"py-2 px-3 text-left text-zinc-400\">Data</th>\r\n            <th className=\"py-2 px-3 text-right text-blue-400\">Subsea HC</th>\r\n            <th className=\"py-2 px-3 text-right text-purple-400\">Topside HC</th>\r\n            <th className=\"py-2 px-3 text-right text-emerald-400\">Test Sep HC</th>\r\n            <th className=\"py-2 px-3 text-center text-zinc-400\">Bal HC%</th>\r\n            <th className=\"py-2 px-3 text-center text-zinc-400\">Status</th>\r\n            <th className=\"py-2 px-3 text-center text-zinc-400\">Ao</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {reversedData.map((row, idx) => (\r\n            <tr\r\n              key={idx}\r\n              className=\"border-b border-zinc-800/50 hover:bg-zinc-800/30\"\r\n            >\r\n              <td className=\"py-2 px-3 text-zinc-200\">{row.date}</td>\r\n              <td className=\"py-2 px-3 text-right text-blue-400\">\r\n                {row.subHC.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}\r\n              </td>\r\n              <td className=\"py-2 px-3 text-right text-purple-400\">\r\n                {row.topHC.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}\r\n              </td>\r\n              <td className=\"py-2 px-3 text-right text-emerald-400\">\r\n                {row.sepHC.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}\r\n              </td>\r\n              <td\r\n                className={cn(\r\n                  'py-2 px-3 text-center font-mono',\r\n                  Math.abs(row.hcBalTS) > 10 ? 'text-red-400' : 'text-zinc-300'\r\n                )}\r\n              >\r\n                {row.hcBalTS > 0 ? '+' : ''}\r\n                {row.hcBalTS.toFixed(2)}%\r\n              </td>\r\n              <td className=\"py-2 px-3 text-center\">\r\n                <Badge variant={row.hcStatus} size=\"sm\">\r\n                  {row.hcStatus}\r\n                </Badge>\r\n              </td>\r\n              <td className=\"py-2 px-3 text-center\">\r\n                <Badge variant={row.action} size=\"sm\">\r\n                  {row.action}\r\n                </Badge>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n","import { Plus, Edit, Trash2 } from 'lucide-react'\r\nimport { Card, Badge, Button } from '@/components/ui'\r\nimport { useAppStore } from '@/store'\r\nimport { cn } from '@/utils'\r\n\r\nexport function MetersList() {\r\n  const { meters, setShowMeterModal, setEditingMeter, deleteMeter } = useAppStore()\r\n\r\n  const handleEdit = (meter: typeof meters[0]) => {\r\n    setEditingMeter(meter)\r\n  }\r\n\r\n  const handleDelete = (meterId: string) => {\r\n    if (confirm('Tem certeza que deseja remover este medidor?')) {\r\n      deleteMeter(meterId)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      title=\"Medidores MPFM\"\r\n      subtitle=\"Status e prximas calibraes\"\r\n      headerRight={\r\n        <Button\r\n          variant=\"primary\"\r\n          size=\"sm\"\r\n          icon={Plus}\r\n          onClick={() => setShowMeterModal(true)}\r\n        >\r\n          Adicionar\r\n        </Button>\r\n      }\r\n      noPadding\r\n    >\r\n      {meters.length === 0 ? (\r\n        <div className=\"p-8 text-center text-zinc-500\">\r\n          <p className=\"mb-4\">Nenhum medidor cadastrado.</p>\r\n          <Button\r\n            variant=\"secondary\"\r\n            size=\"sm\"\r\n            icon={Plus}\r\n            onClick={() => setShowMeterModal(true)}\r\n          >\r\n            Adicionar Primeiro Medidor\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-xs\">\r\n            <thead>\r\n              <tr className=\"border-b border-zinc-700 bg-zinc-800/50\">\r\n                <th className=\"py-2 px-3 text-left text-zinc-400\">TAG</th>\r\n                <th className=\"py-2 px-3 text-left text-zinc-400\">Nome</th>\r\n                <th className=\"py-2 px-3 text-center text-zinc-400\">Localizao</th>\r\n                <th className=\"py-2 px-3 text-center text-zinc-400\">Status</th>\r\n                <th className=\"py-2 px-3 text-center text-zinc-400\">ltima Calib.</th>\r\n                <th className=\"py-2 px-3 text-right text-zinc-400\">K-Oil</th>\r\n                <th className=\"py-2 px-3 text-right text-zinc-400\">K-Gas</th>\r\n                <th className=\"py-2 px-3 text-center text-zinc-400\">Prx. Calib.</th>\r\n                <th className=\"py-2 px-3 text-center text-zinc-400\">Aes</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {meters.map((meter) => (\r\n                <tr\r\n                  key={meter.id}\r\n                  className=\"border-b border-zinc-800/50 hover:bg-zinc-800/30\"\r\n                >\r\n                  <td className=\"py-2 px-3 font-mono text-blue-400\">{meter.tag}</td>\r\n                  <td className=\"py-2 px-3 text-zinc-200\">{meter.name}</td>\r\n                  <td className=\"py-2 px-3 text-center\">\r\n                    <Badge variant={meter.location} size=\"sm\">\r\n                      {meter.location}\r\n                    </Badge>\r\n                  </td>\r\n                  <td className=\"py-2 px-3 text-center\">\r\n                    <Badge variant={meter.status} size=\"sm\">\r\n                      {meter.status === 'active' ? 'Ativo' : 'Inativo'}\r\n                    </Badge>\r\n                  </td>\r\n                  <td className=\"py-2 px-3 text-center text-zinc-400\">\r\n                    {meter.lastCalibration}\r\n                  </td>\r\n                  <td\r\n                    className={cn(\r\n                      'py-2 px-3 text-right font-mono',\r\n                      meter.kOil < 0.8 || meter.kOil > 1.2\r\n                        ? 'text-red-400'\r\n                        : 'text-emerald-400'\r\n                    )}\r\n                  >\r\n                    {meter.kOil.toFixed(4)}\r\n                  </td>\r\n                  <td\r\n                    className={cn(\r\n                      'py-2 px-3 text-right font-mono',\r\n                      meter.kGas < 0.8 || meter.kGas > 1.2\r\n                        ? 'text-red-400'\r\n                        : 'text-emerald-400'\r\n                    )}\r\n                  >\r\n                    {meter.kGas.toFixed(4)}\r\n                  </td>\r\n                  <td className=\"py-2 px-3 text-center\">\r\n                    <Badge\r\n                      variant={\r\n                        meter.daysToCalibration < 30\r\n                          ? 'error'\r\n                          : meter.daysToCalibration < 60\r\n                          ? 'warning'\r\n                          : 'success'\r\n                      }\r\n                      size=\"sm\"\r\n                    >\r\n                      {meter.daysToCalibration}d\r\n                    </Badge>\r\n                  </td>\r\n                  <td className=\"py-2 px-3 text-center\">\r\n                    <div className=\"flex items-center justify-center gap-1\">\r\n                      <button\r\n                        onClick={() => handleEdit(meter)}\r\n                        className=\"p-1 hover:bg-zinc-700 rounded transition-colors\"\r\n                        title=\"Editar\"\r\n                      >\r\n                        <Edit className=\"w-3.5 h-3.5 text-zinc-400 hover:text-blue-400\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDelete(meter.id)}\r\n                        className=\"p-1 hover:bg-zinc-700 rounded transition-colors\"\r\n                        title=\"Remover\"\r\n                      >\r\n                        <Trash2 className=\"w-3.5 h-3.5 text-zinc-400 hover:text-red-400\" />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </Card>\r\n  )\r\n}\r\n","import { Target, Activity, Calendar, Gauge, Bell, Plus, Database } from 'lucide-react'\r\nimport { KPICard, Card, Badge, Button } from '@/components/ui'\r\nimport { BalanceChart, ProductionChart } from '@/components/charts'\r\nimport { CalendarView } from '@/components/calendar'\r\nimport { useAppStore } from '@/store'\r\nimport { AlertsList } from './AlertsList'\r\nimport { DailyTable } from './DailyTable'\r\nimport { MetersList } from './MetersList'\r\n\r\nexport function MonitoringDashboard() {\r\n  const { \r\n    monitoringData, \r\n    meters, \r\n    getUnreadAlertsCount, \r\n    getActiveMetersCount,\r\n    setShowMeterModal,\r\n    setShowImportModal,\r\n  } = useAppStore()\r\n\r\n  const hasData = monitoringData.length > 0\r\n  const hasMeters = meters.length > 0\r\n\r\n  const latestData = hasData ? monitoringData[monitoringData.length - 1] : null\r\n  const maxConsecDays = hasData\r\n    ? Math.max(...monitoringData.map((d) => Math.max(d.subVsTS || 0, d.topVsTS || 0, d.topVsSub || 0)))\r\n    : 0\r\n  const alertCount = getUnreadAlertsCount()\r\n  const activeMeters = getActiveMetersCount()\r\n\r\n  // Empty state\r\n  if (!hasData && !hasMeters) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-[60vh] space-y-6\">\r\n        <div className=\"text-center\">\r\n          <Database className=\"w-16 h-16 text-zinc-600 mx-auto mb-4\" />\r\n          <h2 className=\"text-xl font-semibold text-white mb-2\">Bem-vindo ao MPFM Monitor</h2>\r\n          <p className=\"text-zinc-400 max-w-md\">\r\n            Comece adicionando medidores MPFM e importando dados de monitoramento para visualizar os balanos de massa.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-4\">\r\n          <Button\r\n            variant=\"primary\"\r\n            icon={Plus}\r\n            onClick={() => setShowMeterModal(true)}\r\n          >\r\n            Adicionar Medidor\r\n          </Button>\r\n          <Button\r\n            variant=\"secondary\"\r\n            icon={Database}\r\n            onClick={() => setShowImportModal(true)}\r\n          >\r\n            Importar Dados\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* KPIs */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-5 gap-3\">\r\n        <KPICard\r\n          title=\"Balano HC Atual\"\r\n          value={latestData ? latestData.hcBalTS?.toFixed(2) || '0.00' : '--'}\r\n          unit=\"%\"\r\n          subtitle={\r\n            latestData && Math.abs(latestData.hcBalTS || 0) > 10\r\n              ? 'FORA DO LIMITE'\r\n              : 'Dentro do limite'\r\n          }\r\n          icon={Target}\r\n          color={latestData && Math.abs(latestData.hcBalTS || 0) > 10 ? 'red' : 'emerald'}\r\n        />\r\n        <KPICard\r\n          title=\"Balano Total\"\r\n          value={latestData ? latestData.totalBalTS?.toFixed(2) || '0.00' : '--'}\r\n          unit=\"%\"\r\n          subtitle=\"Limite: 7%\"\r\n          icon={Activity}\r\n          color={latestData && Math.abs(latestData.totalBalTS || 0) > 7 ? 'red' : 'emerald'}\r\n        />\r\n        <KPICard\r\n          title=\"Dias Consecutivos\"\r\n          value={maxConsecDays}\r\n          unit=\"/10\"\r\n          subtitle=\"Gatilho calibrao\"\r\n          icon={Calendar}\r\n          color={\r\n            maxConsecDays >= 10 ? 'red' : maxConsecDays >= 7 ? 'amber' : 'emerald'\r\n          }\r\n        />\r\n        <KPICard\r\n          title=\"Medidores Ativos\"\r\n          value={activeMeters}\r\n          unit={`/${meters.length}`}\r\n          icon={Gauge}\r\n          color=\"purple\"\r\n        />\r\n        <KPICard\r\n          title=\"Alertas Pendentes\"\r\n          value={alertCount}\r\n          icon={Bell}\r\n          color={alertCount > 0 ? 'amber' : 'emerald'}\r\n        />\r\n      </div>\r\n\r\n      {/* Charts */}\r\n      {hasData && (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n          <Card\r\n            title=\"Histrico de Balano de Massa\"\r\n            subtitle=\"ltimos 7 dias - Limites ANP: HC 10%, Total 7%\"\r\n          >\r\n            <BalanceChart data={monitoringData} />\r\n          </Card>\r\n\r\n          <Card title=\"Produo HC por Sistema\" subtitle=\"ltimos 7 dias (t)\">\r\n            <ProductionChart data={monitoringData} />\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* Table and Alerts */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n        <Card\r\n          title=\"Monitoramento Dirio\"\r\n          subtitle={hasData ? 'ltimos registros' : 'Nenhum dado importado'}\r\n          className=\"lg:col-span-2\"\r\n          noPadding\r\n        >\r\n          {hasData ? (\r\n            <DailyTable data={monitoringData} />\r\n          ) : (\r\n            <div className=\"p-8 text-center text-zinc-500\">\r\n              <p>Importe dados de monitoramento para visualizar a tabela.</p>\r\n              <Button\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                className=\"mt-4\"\r\n                onClick={() => setShowImportModal(true)}\r\n              >\r\n                Importar Dados\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </Card>\r\n\r\n        <Card\r\n          title=\"Alertas Recentes\"\r\n          headerRight={\r\n            <Badge variant={alertCount > 0 ? 'warning' : 'success'}>\r\n              {alertCount} novos\r\n            </Badge>\r\n          }\r\n          noPadding\r\n        >\r\n          <AlertsList limit={4} />\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Meters */}\r\n      <MetersList />\r\n\r\n      {/* Calendrio Interativo */}\r\n      <CalendarView />\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Servio de Rastreamento de K-Factors - MPFM Monitor\r\n * Monitora evoluo e detecta desvios consecutivos conforme ANP 44/2015\r\n */\r\n\r\n// Limites ANP 44/2015 especficos para rastreamento de K-Factors\r\nexport const KFACTOR_LIMITS = {\r\n  K_FACTOR_MIN: 0.8,\r\n  K_FACTOR_MAX: 1.2,\r\n  K_FACTOR_WARNING_MIN: 0.85,\r\n  K_FACTOR_WARNING_MAX: 1.15,\r\n  CONSECUTIVE_DAYS_TRIGGER: 10,\r\n  CONSECUTIVE_DAYS_WARNING: 7,\r\n  HC_DEVIATION_MAX: 10,\r\n  TOTAL_DEVIATION_MAX: 7,\r\n  BSW_WARNING: 15,\r\n  BSW_CRITICAL: 20,\r\n  CALIBRATION_INTERVAL_DAYS: 180,\r\n  CALIBRATION_WARNING_DAYS: 150,\r\n} as const\r\n\r\nexport interface KFactorReading {\r\n  date: string\r\n  timestamp: string\r\n  meterId: string\r\n  meterTag: string\r\n  kOil: number\r\n  kGas: number\r\n  kWater: number\r\n  source: 'calculated' | 'imported' | 'manual' | 'calibration'\r\n  isWithinLimits: boolean\r\n}\r\n\r\nexport interface MeterKFactorStatus {\r\n  meterId: string\r\n  meterTag: string\r\n  meterName: string\r\n  currentKFactors: {\r\n    oil: number\r\n    gas: number\r\n    water: number\r\n  }\r\n  status: 'ok' | 'warning' | 'critical'\r\n  consecutiveDaysOutOfRange: number\r\n  lastCalibrationDate?: string\r\n  daysSinceCalibration: number\r\n  calibrationRequired: boolean\r\n  calibrationReason?: string\r\n  complianceRate: number // % de dias dentro do limite nos ltimos 30 dias\r\n  trend: 'improving' | 'stable' | 'degrading'\r\n}\r\n\r\nexport interface KFactorHistory {\r\n  meterId: string\r\n  readings: KFactorReading[]\r\n  statistics: {\r\n    avgKOil: number\r\n    avgKGas: number\r\n    avgKWater: number\r\n    stdDevKOil: number\r\n    stdDevKGas: number\r\n    stdDevKWater: number\r\n    daysInRange: number\r\n    daysOutOfRange: number\r\n    complianceRate: number\r\n  }\r\n}\r\n\r\nconst STORAGE_KEY = 'mpfm_kfactor_history'\r\n\r\nclass KFactorTrackerService {\r\n  private histories: Map<string, KFactorHistory> = new Map()\r\n  private consecutiveDays: Map<string, number> = new Map()\r\n\r\n  constructor() {\r\n    this.loadFromStorage()\r\n  }\r\n\r\n  private loadFromStorage(): void {\r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY)\r\n      if (stored) {\r\n        const data = JSON.parse(stored)\r\n        this.histories = new Map(Object.entries(data.histories || {}))\r\n        this.consecutiveDays = new Map(Object.entries(data.consecutiveDays || {}))\r\n      }\r\n    } catch (error) {\r\n      console.error('[KFactorTracker] Erro ao carregar histrico:', error)\r\n    }\r\n  }\r\n\r\n  private saveToStorage(): void {\r\n    try {\r\n      const data = {\r\n        histories: Object.fromEntries(this.histories),\r\n        consecutiveDays: Object.fromEntries(this.consecutiveDays),\r\n      }\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\r\n    } catch (error) {\r\n      console.error('[KFactorTracker] Erro ao salvar histrico:', error)\r\n    }\r\n  }\r\n\r\n  private isWithinLimits(k: number): boolean {\r\n    return k >= KFACTOR_LIMITS.K_FACTOR_MIN && k <= KFACTOR_LIMITS.K_FACTOR_MAX\r\n  }\r\n\r\n  private isNearLimits(k: number): boolean {\r\n    return (\r\n      (k >= KFACTOR_LIMITS.K_FACTOR_MIN && k < KFACTOR_LIMITS.K_FACTOR_WARNING_MIN) ||\r\n      (k > KFACTOR_LIMITS.K_FACTOR_WARNING_MAX && k <= KFACTOR_LIMITS.K_FACTOR_MAX)\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Adiciona uma leitura de K-Factor\r\n   */\r\n  addReading(\r\n    meterId: string,\r\n    meterTag: string,\r\n    kOil: number,\r\n    kGas: number,\r\n    kWater: number,\r\n    source: KFactorReading['source'] = 'calculated'\r\n  ): KFactorReading {\r\n    const now = new Date()\r\n    const date = now.toISOString().split('T')[0]\r\n    \r\n    const allWithinLimits = \r\n      this.isWithinLimits(kOil) && \r\n      this.isWithinLimits(kGas) && \r\n      this.isWithinLimits(kWater)\r\n\r\n    const reading: KFactorReading = {\r\n      date,\r\n      timestamp: now.toISOString(),\r\n      meterId,\r\n      meterTag,\r\n      kOil,\r\n      kGas,\r\n      kWater,\r\n      source,\r\n      isWithinLimits: allWithinLimits,\r\n    }\r\n\r\n    // Atualizar histrico\r\n    let history = this.histories.get(meterId)\r\n    if (!history) {\r\n      history = {\r\n        meterId,\r\n        readings: [],\r\n        statistics: {\r\n          avgKOil: 1, avgKGas: 1, avgKWater: 1,\r\n          stdDevKOil: 0, stdDevKGas: 0, stdDevKWater: 0,\r\n          daysInRange: 0, daysOutOfRange: 0, complianceRate: 100,\r\n        },\r\n      }\r\n    }\r\n\r\n    // Evitar duplicatas no mesmo dia\r\n    const existingIdx = history.readings.findIndex(r => r.date === date)\r\n    if (existingIdx >= 0) {\r\n      history.readings[existingIdx] = reading\r\n    } else {\r\n      history.readings.push(reading)\r\n    }\r\n\r\n    // Manter ltimos 365 dias\r\n    if (history.readings.length > 365) {\r\n      history.readings = history.readings.slice(-365)\r\n    }\r\n\r\n    // Atualizar dias consecutivos fora do limite\r\n    this.updateConsecutiveDays(meterId, allWithinLimits)\r\n\r\n    // Recalcular estatsticas\r\n    this.updateStatistics(history)\r\n\r\n    this.histories.set(meterId, history)\r\n    this.saveToStorage()\r\n\r\n    console.log(`[KFactorTracker] Leitura adicionada: ${meterTag} - Oil: ${kOil.toFixed(4)}, Gas: ${kGas.toFixed(4)}, Water: ${kWater.toFixed(4)}`)\r\n\r\n    return reading\r\n  }\r\n\r\n  private updateConsecutiveDays(meterId: string, withinLimits: boolean): void {\r\n    if (withinLimits) {\r\n      this.consecutiveDays.set(meterId, 0)\r\n    } else {\r\n      const current = this.consecutiveDays.get(meterId) || 0\r\n      this.consecutiveDays.set(meterId, current + 1)\r\n    }\r\n  }\r\n\r\n  private updateStatistics(history: KFactorHistory): void {\r\n    const readings = history.readings\r\n    if (readings.length === 0) return\r\n\r\n    const kOils = readings.map(r => r.kOil)\r\n    const kGases = readings.map(r => r.kGas)\r\n    const kWaters = readings.map(r => r.kWater)\r\n\r\n    const avg = (arr: number[]) => arr.reduce((a, b) => a + b, 0) / arr.length\r\n    const stdDev = (arr: number[], mean: number) => \r\n      Math.sqrt(arr.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / arr.length)\r\n\r\n    const avgOil = avg(kOils)\r\n    const avgGas = avg(kGases)\r\n    const avgWater = avg(kWaters)\r\n\r\n    const inRange = readings.filter(r => r.isWithinLimits).length\r\n\r\n    history.statistics = {\r\n      avgKOil: avgOil,\r\n      avgKGas: avgGas,\r\n      avgKWater: avgWater,\r\n      stdDevKOil: stdDev(kOils, avgOil),\r\n      stdDevKGas: stdDev(kGases, avgGas),\r\n      stdDevKWater: stdDev(kWaters, avgWater),\r\n      daysInRange: inRange,\r\n      daysOutOfRange: readings.length - inRange,\r\n      complianceRate: (inRange / readings.length) * 100,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtm dias consecutivos fora do limite\r\n   */\r\n  getConsecutiveDaysOutOfRange(meterId: string): number {\r\n    return this.consecutiveDays.get(meterId) || 0\r\n  }\r\n\r\n  /**\r\n   * Verifica se calibrao  necessria\r\n   */\r\n  needsCalibration(meterId: string, lastCalibrationDate?: string): {\r\n    required: boolean\r\n    reason?: string\r\n    severity: 'warning' | 'critical' | 'none'\r\n    daysOutOfRange: number\r\n    daysSinceCalibration: number\r\n  } {\r\n    const days = this.getConsecutiveDaysOutOfRange(meterId)\r\n    \r\n    // Calcular dias desde ltima calibrao\r\n    let daysSinceCalibration = 0\r\n    if (lastCalibrationDate) {\r\n      const lastCal = new Date(lastCalibrationDate)\r\n      daysSinceCalibration = Math.floor(\r\n        (Date.now() - lastCal.getTime()) / (1000 * 60 * 60 * 24)\r\n      )\r\n    } else {\r\n      daysSinceCalibration = 365 // Assumir que nunca foi calibrado\r\n    }\r\n\r\n    // Regra 10 dias consecutivos (ANP 44/2015)\r\n    if (days >= KFACTOR_LIMITS.CONSECUTIVE_DAYS_TRIGGER) {\r\n      return {\r\n        required: true,\r\n        reason: `K-Factor fora do limite por ${days} dias consecutivos (ANP 44/2015 Art. 12)`,\r\n        severity: 'critical',\r\n        daysOutOfRange: days,\r\n        daysSinceCalibration,\r\n      }\r\n    }\r\n\r\n    // Calibrao peridica vencida\r\n    if (daysSinceCalibration > KFACTOR_LIMITS.CALIBRATION_INTERVAL_DAYS) {\r\n      return {\r\n        required: true,\r\n        reason: `Calibrao peridica vencida (${daysSinceCalibration} dias desde ltima calibrao)`,\r\n        severity: 'critical',\r\n        daysOutOfRange: days,\r\n        daysSinceCalibration,\r\n      }\r\n    }\r\n\r\n    // Alertas de aviso\r\n    if (days >= KFACTOR_LIMITS.CONSECUTIVE_DAYS_WARNING) {\r\n      return {\r\n        required: false,\r\n        reason: `Ateno: ${days} dias consecutivos fora do limite. Calibrao obrigatria em ${KFACTOR_LIMITS.CONSECUTIVE_DAYS_TRIGGER - days} dias.`,\r\n        severity: 'warning',\r\n        daysOutOfRange: days,\r\n        daysSinceCalibration,\r\n      }\r\n    }\r\n\r\n    if (daysSinceCalibration > KFACTOR_LIMITS.CALIBRATION_WARNING_DAYS) {\r\n      return {\r\n        required: false,\r\n        reason: `Calibrao peridica vence em ${KFACTOR_LIMITS.CALIBRATION_INTERVAL_DAYS - daysSinceCalibration} dias`,\r\n        severity: 'warning',\r\n        daysOutOfRange: days,\r\n        daysSinceCalibration,\r\n      }\r\n    }\r\n\r\n    return {\r\n      required: false,\r\n      severity: 'none',\r\n      daysOutOfRange: days,\r\n      daysSinceCalibration,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtm o status completo de K-Factor para um medidor\r\n   */\r\n  getMeterStatus(\r\n    meterId: string,\r\n    meterTag: string,\r\n    meterName: string,\r\n    currentKFactors: { oil: number; gas: number; water: number },\r\n    lastCalibrationDate?: string\r\n  ): MeterKFactorStatus {\r\n    const calibration = this.needsCalibration(meterId, lastCalibrationDate)\r\n    const history = this.histories.get(meterId)\r\n    \r\n    // Determinar status\r\n    let status: MeterKFactorStatus['status'] = 'ok'\r\n    if (calibration.severity === 'critical') {\r\n      status = 'critical'\r\n    } else if (calibration.severity === 'warning') {\r\n      status = 'warning'\r\n    } else {\r\n      // Verificar se K-Factors atuais esto perto do limite\r\n      const { oil, gas, water } = currentKFactors\r\n      if (this.isNearLimits(oil) || this.isNearLimits(gas) || this.isNearLimits(water)) {\r\n        status = 'warning'\r\n      }\r\n    }\r\n\r\n    // Determinar tendncia (ltimos 7 dias vs anterior)\r\n    let trend: MeterKFactorStatus['trend'] = 'stable'\r\n    if (history && history.readings.length >= 14) {\r\n      const recent = history.readings.slice(-7)\r\n      const previous = history.readings.slice(-14, -7)\r\n      \r\n      const recentOOL = recent.filter(r => !r.isWithinLimits).length\r\n      const previousOOL = previous.filter(r => !r.isWithinLimits).length\r\n      \r\n      if (recentOOL < previousOOL) trend = 'improving'\r\n      else if (recentOOL > previousOOL) trend = 'degrading'\r\n    }\r\n\r\n    return {\r\n      meterId,\r\n      meterTag,\r\n      meterName,\r\n      currentKFactors,\r\n      status,\r\n      consecutiveDaysOutOfRange: calibration.daysOutOfRange,\r\n      lastCalibrationDate,\r\n      daysSinceCalibration: calibration.daysSinceCalibration,\r\n      calibrationRequired: calibration.required,\r\n      calibrationReason: calibration.reason,\r\n      complianceRate: history?.statistics.complianceRate || 100,\r\n      trend,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtm histrico de um medidor\r\n   */\r\n  getHistory(meterId: string): KFactorHistory | undefined {\r\n    return this.histories.get(meterId)\r\n  }\r\n\r\n  /**\r\n   * Registra que uma calibrao foi realizada\r\n   */\r\n  recordCalibration(meterId: string, kOil: number, kGas: number, kWater: number): void {\r\n    // Resetar contador de dias consecutivos\r\n    this.consecutiveDays.set(meterId, 0)\r\n    \r\n    // Adicionar leitura como calibrao\r\n    const history = this.histories.get(meterId)\r\n    if (history) {\r\n      this.addReading(meterId, history.readings[0]?.meterTag || meterId, kOil, kGas, kWater, 'calibration')\r\n    }\r\n    \r\n    this.saveToStorage()\r\n    console.log(`[KFactorTracker] Calibrao registrada para ${meterId}`)\r\n  }\r\n\r\n  /**\r\n   * Limpa dados (apenas desenvolvimento)\r\n   */\r\n  clearAll(): void {\r\n    if (import.meta.env.PROD) return\r\n    this.histories.clear()\r\n    this.consecutiveDays.clear()\r\n    this.saveToStorage()\r\n  }\r\n}\r\n\r\n// Singleton\r\nexport const kFactorTracker = new KFactorTrackerService()\r\n\r\nexport default kFactorTracker\r\n","/**\r\n * Motor de Alertas - MPFM Monitor\r\n * Detecta e gerencia alertas em tempo real conforme ANP 44/2015\r\n */\r\n\r\nimport { KFACTOR_LIMITS } from './kFactorTracker'\r\n\r\nexport type AlertSeverity = 'critical' | 'warning' | 'info'\r\nexport type AlertCategory = \r\n  | 'k_factor' \r\n  | 'deviation' \r\n  | 'production' \r\n  | 'calibration' \r\n  | 'bsw' \r\n  | 'equipment'\r\n  | 'compliance'\r\n\r\nexport interface Alert {\r\n  id: string\r\n  timestamp: string\r\n  meterId?: string\r\n  meterTag?: string\r\n  category: AlertCategory\r\n  severity: AlertSeverity\r\n  title: string\r\n  description: string\r\n  value?: number\r\n  threshold?: number\r\n  unit?: string\r\n  acknowledged: boolean\r\n  acknowledgedBy?: string\r\n  acknowledgedAt?: string\r\n  resolved: boolean\r\n  resolvedAt?: string\r\n  resolutionNote?: string\r\n  source: 'automatic' | 'manual' | 'system'\r\n}\r\n\r\nexport interface AlertRule {\r\n  id: string\r\n  name: string\r\n  category: AlertCategory\r\n  condition: (data: AlertCheckData) => boolean\r\n  severity: AlertSeverity\r\n  titleTemplate: string\r\n  descriptionTemplate: string\r\n  enabled: boolean\r\n}\r\n\r\nexport interface AlertCheckData {\r\n  meterId?: string\r\n  meterTag?: string\r\n  meterName?: string\r\n  kOil?: number\r\n  kGas?: number\r\n  kWater?: number\r\n  bsw?: number\r\n  oilDeviation?: number\r\n  gasDeviation?: number\r\n  waterDeviation?: number\r\n  totalDeviation?: number\r\n  productionOil?: number\r\n  productionGas?: number\r\n  consecutiveDaysOutOfRange?: number\r\n  daysSinceCalibration?: number\r\n  customData?: Record<string, unknown>\r\n}\r\n\r\nconst STORAGE_KEY = 'mpfm_alerts'\r\n\r\nclass AlertEngineService {\r\n  private alerts: Alert[] = []\r\n  private rules: AlertRule[] = []\r\n  private listeners: Set<(alerts: Alert[]) => void> = new Set()\r\n\r\n  constructor() {\r\n    this.loadFromStorage()\r\n    this.initializeDefaultRules()\r\n  }\r\n\r\n  private loadFromStorage(): void {\r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY)\r\n      if (stored) {\r\n        this.alerts = JSON.parse(stored)\r\n      }\r\n    } catch (error) {\r\n      console.error('[AlertEngine] Erro ao carregar alertas:', error)\r\n    }\r\n  }\r\n\r\n  private saveToStorage(): void {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.alerts))\r\n      this.notifyListeners()\r\n    } catch (error) {\r\n      console.error('[AlertEngine] Erro ao salvar alertas:', error)\r\n    }\r\n  }\r\n\r\n  private notifyListeners(): void {\r\n    this.listeners.forEach(listener => listener([...this.alerts]))\r\n  }\r\n\r\n  private generateId(): string {\r\n    return `alert_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`\r\n  }\r\n\r\n  private initializeDefaultRules(): void {\r\n    this.rules = [\r\n      // K-Factor fora do limite\r\n      {\r\n        id: 'k_factor_out_of_range',\r\n        name: 'K-Factor Fora do Limite',\r\n        category: 'k_factor',\r\n        condition: (data) => {\r\n          if (!data.kOil || !data.kGas || !data.kWater) return false\r\n          return (\r\n            data.kOil < KFACTOR_LIMITS.K_FACTOR_MIN || data.kOil > KFACTOR_LIMITS.K_FACTOR_MAX ||\r\n            data.kGas < KFACTOR_LIMITS.K_FACTOR_MIN || data.kGas > KFACTOR_LIMITS.K_FACTOR_MAX ||\r\n            data.kWater < KFACTOR_LIMITS.K_FACTOR_MIN || data.kWater > KFACTOR_LIMITS.K_FACTOR_MAX\r\n          )\r\n        },\r\n        severity: 'warning',\r\n        titleTemplate: 'K-Factor fora do limite - {meterTag}',\r\n        descriptionTemplate: 'K-Factor(s) fora do intervalo permitido (0.8 - 1.2). K-Oil: {kOil}, K-Gas: {kGas}, K-Water: {kWater}',\r\n        enabled: true,\r\n      },\r\n\r\n      // Dias consecutivos - aviso (7 dias)\r\n      {\r\n        id: 'consecutive_days_warning',\r\n        name: 'Dias Consecutivos - Aviso',\r\n        category: 'calibration',\r\n        condition: (data) => {\r\n          const days = data.consecutiveDaysOutOfRange || 0\r\n          return days >= KFACTOR_LIMITS.CONSECUTIVE_DAYS_WARNING && days < KFACTOR_LIMITS.CONSECUTIVE_DAYS_TRIGGER\r\n        },\r\n        severity: 'warning',\r\n        titleTemplate: 'Ateno: {consecutiveDaysOutOfRange} dias consecutivos fora do limite',\r\n        descriptionTemplate: 'Medidor {meterTag} est fora do limite por {consecutiveDaysOutOfRange} dias. Calibrao obrigatria em {daysRemaining} dias.',\r\n        enabled: true,\r\n      },\r\n\r\n      // Dias consecutivos - crtico (10 dias)\r\n      {\r\n        id: 'consecutive_days_critical',\r\n        name: 'Dias Consecutivos - Crtico',\r\n        category: 'calibration',\r\n        condition: (data) => (data.consecutiveDaysOutOfRange || 0) >= KFACTOR_LIMITS.CONSECUTIVE_DAYS_TRIGGER,\r\n        severity: 'critical',\r\n        titleTemplate: 'CALIBRAO OBRIGATRIA - {meterTag}',\r\n        descriptionTemplate: 'K-Factor fora do limite por {consecutiveDaysOutOfRange} dias consecutivos. Calibrao obrigatria conforme ANP 44/2015 Art. 12.',\r\n        enabled: true,\r\n      },\r\n\r\n      // Desvio HC > 10%\r\n      {\r\n        id: 'hc_deviation_exceeded',\r\n        name: 'Desvio HC Excedido',\r\n        category: 'deviation',\r\n        condition: (data) => {\r\n          const oilDev = Math.abs(data.oilDeviation || 0)\r\n          const gasDev = Math.abs(data.gasDeviation || 0)\r\n          return oilDev > KFACTOR_LIMITS.HC_DEVIATION_MAX || gasDev > KFACTOR_LIMITS.HC_DEVIATION_MAX\r\n        },\r\n        severity: 'critical',\r\n        titleTemplate: 'Desvio de HC excedido - {meterTag}',\r\n        descriptionTemplate: 'Desvio de hidrocarboneto excede limite de 10%. leo: {oilDeviation}%, Gs: {gasDeviation}%',\r\n        enabled: true,\r\n      },\r\n\r\n      // Desvio Total > 7%\r\n      {\r\n        id: 'total_deviation_exceeded',\r\n        name: 'Desvio Total Excedido',\r\n        category: 'deviation',\r\n        condition: (data) => Math.abs(data.totalDeviation || 0) > KFACTOR_LIMITS.TOTAL_DEVIATION_MAX,\r\n        severity: 'warning',\r\n        titleTemplate: 'Desvio total excedido - {meterTag}',\r\n        descriptionTemplate: 'Desvio total excede limite de 7%. Valor: {totalDeviation}%',\r\n        enabled: true,\r\n      },\r\n\r\n      // BSW alto - aviso\r\n      {\r\n        id: 'bsw_warning',\r\n        name: 'BSW Elevado',\r\n        category: 'bsw',\r\n        condition: (data) => {\r\n          const bsw = data.bsw || 0\r\n          return bsw >= KFACTOR_LIMITS.BSW_WARNING && bsw < KFACTOR_LIMITS.BSW_CRITICAL\r\n        },\r\n        severity: 'warning',\r\n        titleTemplate: 'BSW elevado - {meterTag}',\r\n        descriptionTemplate: 'BSW em {bsw}% - acima do limite de advertncia de {threshold}%',\r\n        enabled: true,\r\n      },\r\n\r\n      // BSW crtico\r\n      {\r\n        id: 'bsw_critical',\r\n        name: 'BSW Crtico',\r\n        category: 'bsw',\r\n        condition: (data) => (data.bsw || 0) >= KFACTOR_LIMITS.BSW_CRITICAL,\r\n        severity: 'critical',\r\n        titleTemplate: 'BSW crtico - {meterTag}',\r\n        descriptionTemplate: 'BSW em {bsw}% - impacta significativamente a qualidade do leo',\r\n        enabled: true,\r\n      },\r\n\r\n      // Calibrao peridica - aviso\r\n      {\r\n        id: 'calibration_due_warning',\r\n        name: 'Calibrao Peridica - Aviso',\r\n        category: 'calibration',\r\n        condition: (data) => {\r\n          const days = data.daysSinceCalibration || 0\r\n          return days >= KFACTOR_LIMITS.CALIBRATION_WARNING_DAYS && days < KFACTOR_LIMITS.CALIBRATION_INTERVAL_DAYS\r\n        },\r\n        severity: 'info',\r\n        titleTemplate: 'Calibrao peridica se aproximando - {meterTag}',\r\n        descriptionTemplate: 'ltima calibrao h {daysSinceCalibration} dias. Vence em {daysRemaining} dias.',\r\n        enabled: true,\r\n      },\r\n\r\n      // Calibrao peridica - vencida\r\n      {\r\n        id: 'calibration_overdue',\r\n        name: 'Calibrao Peridica Vencida',\r\n        category: 'calibration',\r\n        condition: (data) => (data.daysSinceCalibration || 0) > KFACTOR_LIMITS.CALIBRATION_INTERVAL_DAYS,\r\n        severity: 'critical',\r\n        titleTemplate: 'CALIBRAO VENCIDA - {meterTag}',\r\n        descriptionTemplate: 'Calibrao peridica vencida h {overdueDays} dias. Verificar conformidade ANP.',\r\n        enabled: true,\r\n      },\r\n    ]\r\n  }\r\n\r\n  private processTemplate(template: string, data: AlertCheckData): string {\r\n    let result = template\r\n    \r\n    // Substituir variveis\r\n    Object.entries(data).forEach(([key, value]) => {\r\n      const regex = new RegExp(`\\\\{${key}\\\\}`, 'g')\r\n      result = result.replace(regex, String(value ?? 'N/A'))\r\n    })\r\n\r\n    // Variveis calculadas\r\n    if (data.consecutiveDaysOutOfRange) {\r\n      const daysRemaining = KFACTOR_LIMITS.CONSECUTIVE_DAYS_TRIGGER - data.consecutiveDaysOutOfRange\r\n      result = result.replace(/\\{daysRemaining\\}/g, String(Math.max(0, daysRemaining)))\r\n    }\r\n\r\n    if (data.daysSinceCalibration) {\r\n      const daysRemaining = KFACTOR_LIMITS.CALIBRATION_INTERVAL_DAYS - data.daysSinceCalibration\r\n      result = result.replace(/\\{daysRemaining\\}/g, String(Math.max(0, daysRemaining)))\r\n      const overdueDays = data.daysSinceCalibration - KFACTOR_LIMITS.CALIBRATION_INTERVAL_DAYS\r\n      result = result.replace(/\\{overdueDays\\}/g, String(Math.max(0, overdueDays)))\r\n    }\r\n\r\n    result = result.replace(/\\{threshold\\}/g, String(KFACTOR_LIMITS.BSW_WARNING))\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Verifica dados e gera alertas automaticamente\r\n   */\r\n  checkAndGenerateAlerts(data: AlertCheckData): Alert[] {\r\n    const newAlerts: Alert[] = []\r\n\r\n    for (const rule of this.rules) {\r\n      if (!rule.enabled) continue\r\n\r\n      try {\r\n        if (rule.condition(data)) {\r\n          // Verificar se j existe alerta similar no resolvido\r\n          const existingAlert = this.alerts.find(\r\n            a => !a.resolved && \r\n                 a.meterId === data.meterId && \r\n                 a.title.includes(rule.id.replace(/_/g, ' '))\r\n          )\r\n\r\n          if (!existingAlert) {\r\n            const alert = this.createAlert({\r\n              meterId: data.meterId,\r\n              meterTag: data.meterTag,\r\n              category: rule.category,\r\n              severity: rule.severity,\r\n              title: this.processTemplate(rule.titleTemplate, data),\r\n              description: this.processTemplate(rule.descriptionTemplate, data),\r\n              source: 'automatic',\r\n            })\r\n            newAlerts.push(alert)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(`[AlertEngine] Erro na regra ${rule.id}:`, error)\r\n      }\r\n    }\r\n\r\n    return newAlerts\r\n  }\r\n\r\n  /**\r\n   * Cria um alerta manualmente\r\n   */\r\n  createAlert(params: Omit<Alert, 'id' | 'timestamp' | 'acknowledged' | 'resolved'>): Alert {\r\n    const alert: Alert = {\r\n      id: this.generateId(),\r\n      timestamp: new Date().toISOString(),\r\n      acknowledged: false,\r\n      resolved: false,\r\n      ...params,\r\n    }\r\n\r\n    this.alerts.unshift(alert)\r\n    this.saveToStorage()\r\n\r\n    console.log(`[AlertEngine] Alerta criado: ${alert.severity.toUpperCase()} - ${alert.title}`)\r\n\r\n    return alert\r\n  }\r\n\r\n  /**\r\n   * Reconhece um alerta\r\n   */\r\n  acknowledgeAlert(alertId: string, userId: string): boolean {\r\n    const alert = this.alerts.find(a => a.id === alertId)\r\n    if (!alert) return false\r\n\r\n    alert.acknowledged = true\r\n    alert.acknowledgedBy = userId\r\n    alert.acknowledgedAt = new Date().toISOString()\r\n\r\n    this.saveToStorage()\r\n    console.log(`[AlertEngine] Alerta reconhecido: ${alertId} por ${userId}`)\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Resolve um alerta\r\n   */\r\n  resolveAlert(alertId: string, note?: string): boolean {\r\n    const alert = this.alerts.find(a => a.id === alertId)\r\n    if (!alert) return false\r\n\r\n    alert.resolved = true\r\n    alert.resolvedAt = new Date().toISOString()\r\n    if (note) alert.resolutionNote = note\r\n\r\n    this.saveToStorage()\r\n    console.log(`[AlertEngine] Alerta resolvido: ${alertId}`)\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Obtm alertas ativos (no resolvidos)\r\n   */\r\n  getActiveAlerts(): Alert[] {\r\n    return this.alerts.filter(a => !a.resolved)\r\n  }\r\n\r\n  /**\r\n   * Obtm alertas por severidade\r\n   */\r\n  getAlertsBySeverity(severity: AlertSeverity): Alert[] {\r\n    return this.alerts.filter(a => a.severity === severity && !a.resolved)\r\n  }\r\n\r\n  /**\r\n   * Obtm alertas por medidor\r\n   */\r\n  getAlertsByMeter(meterId: string): Alert[] {\r\n    return this.alerts.filter(a => a.meterId === meterId)\r\n  }\r\n\r\n  /**\r\n   * Obtm contagem de alertas por severidade\r\n   */\r\n  getAlertCounts(): Record<AlertSeverity, number> {\r\n    const active = this.getActiveAlerts()\r\n    return {\r\n      critical: active.filter(a => a.severity === 'critical').length,\r\n      warning: active.filter(a => a.severity === 'warning').length,\r\n      info: active.filter(a => a.severity === 'info').length,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtm todos os alertas\r\n   */\r\n  getAllAlerts(): Alert[] {\r\n    return [...this.alerts]\r\n  }\r\n\r\n  /**\r\n   * Limpa alertas resolvidos (mantm ltimos 30 dias)\r\n   */\r\n  cleanupOldAlerts(): number {\r\n    const cutoff = Date.now() - 30 * 24 * 60 * 60 * 1000\r\n    const before = this.alerts.length\r\n    \r\n    this.alerts = this.alerts.filter(a => {\r\n      if (!a.resolved) return true\r\n      return new Date(a.timestamp).getTime() > cutoff\r\n    })\r\n\r\n    this.saveToStorage()\r\n    return before - this.alerts.length\r\n  }\r\n\r\n  /**\r\n   * Subscreve para atualizaes de alertas\r\n   */\r\n  subscribe(listener: (alerts: Alert[]) => void): () => void {\r\n    this.listeners.add(listener)\r\n    return () => this.listeners.delete(listener)\r\n  }\r\n\r\n  /**\r\n   * Limpa todos os alertas (apenas desenvolvimento)\r\n   */\r\n  clearAll(): void {\r\n    if (import.meta.env.PROD) return\r\n    this.alerts = []\r\n    this.saveToStorage()\r\n  }\r\n}\r\n\r\n// Singleton\r\nexport const alertEngine = new AlertEngineService()\r\n\r\nexport default alertEngine\r\n","import { MonitoringDashboard } from '@/components/monitoring'\r\n\r\nexport function MonitoringPage() {\r\n  return <MonitoringDashboard />\r\n}\r\n","import { useState } from 'react'\r\nimport { Plus, Play, Clock, CheckCircle, ChevronRight, Trash2 } from 'lucide-react'\r\nimport { Button, Card, Badge, Tabs, ProgressBar } from '@/components/ui'\r\nimport { useAppStore } from '@/store'\r\nimport type { CalibrationEvent } from '@/types'\r\n\r\ninterface CalibrationEventsListProps {\r\n  onSelectEvent: (event: CalibrationEvent) => void\r\n}\r\n\r\nexport function CalibrationEventsList({ onSelectEvent }: CalibrationEventsListProps) {\r\n  const { calibrationEvents, setShowNewEventModal, deleteCalibrationEvent } = useAppStore()\r\n  const [activeTab, setActiveTab] = useState('all')\r\n\r\n  const filteredEvents = calibrationEvents.filter((event) => {\r\n    if (activeTab === 'all') return true\r\n    if (activeTab === 'active') return event.status === 'Em Andamento'\r\n    if (activeTab === 'pending') return event.status === 'Pendente'\r\n    if (activeTab === 'completed') return event.status === 'Concluda'\r\n    return true\r\n  })\r\n\r\n  const handleDelete = (e: React.MouseEvent, eventId: string) => {\r\n    e.stopPropagation()\r\n    if (confirm('Tem certeza que deseja remover este evento de calibrao?')) {\r\n      deleteCalibrationEvent(eventId)\r\n    }\r\n  }\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'Concluda':\r\n        return CheckCircle\r\n      case 'Em Andamento':\r\n        return Play\r\n      default:\r\n        return Clock\r\n    }\r\n  }\r\n\r\n  const getStatusStyle = (status: string) => {\r\n    switch (status) {\r\n      case 'Concluda':\r\n        return 'bg-emerald-500/20'\r\n      case 'Em Andamento':\r\n        return 'bg-blue-500/20'\r\n      default:\r\n        return 'bg-zinc-700'\r\n    }\r\n  }\r\n\r\n  const getIconColor = (status: string) => {\r\n    switch (status) {\r\n      case 'Concluda':\r\n        return 'text-emerald-400'\r\n      case 'Em Andamento':\r\n        return 'text-blue-400'\r\n      default:\r\n        return 'text-zinc-400'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-lg font-semibold text-white\">Eventos de Calibrao</h2>\r\n          <p className=\"text-xs text-zinc-500\">\r\n            Avaliaes de desempenho MPFM - Comissionamento, Peridica, Investigao\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => setShowNewEventModal(true)} icon={Plus}>\r\n          Nova Avaliao\r\n        </Button>\r\n      </div>\r\n\r\n      <Tabs\r\n        tabs={[\r\n          { id: 'all', label: 'Todos', count: calibrationEvents.length },\r\n          {\r\n            id: 'active',\r\n            label: 'Em Andamento',\r\n            count: calibrationEvents.filter((e) => e.status === 'Em Andamento').length,\r\n          },\r\n          {\r\n            id: 'pending',\r\n            label: 'Pendentes',\r\n            count: calibrationEvents.filter((e) => e.status === 'Pendente').length,\r\n          },\r\n          {\r\n            id: 'completed',\r\n            label: 'Concludas',\r\n            count: calibrationEvents.filter((e) => e.status === 'Concluda').length,\r\n          },\r\n        ]}\r\n        activeTab={activeTab}\r\n        onChange={setActiveTab}\r\n      />\r\n\r\n      {filteredEvents.length === 0 ? (\r\n        <Card className=\"p-8 text-center\">\r\n          <p className=\"text-zinc-500 mb-4\">\r\n            {activeTab === 'all'\r\n              ? 'Nenhum evento de calibrao cadastrado.'\r\n              : `Nenhum evento com status \"${activeTab === 'active' ? 'Em Andamento' : activeTab === 'pending' ? 'Pendente' : 'Concluda'}\".`}\r\n          </p>\r\n          {activeTab === 'all' && (\r\n            <Button\r\n              variant=\"primary\"\r\n              size=\"sm\"\r\n              icon={Plus}\r\n              onClick={() => setShowNewEventModal(true)}\r\n            >\r\n              Criar Primeira Avaliao\r\n            </Button>\r\n          )}\r\n        </Card>\r\n      ) : (\r\n        <div className=\"grid gap-3\">\r\n          {filteredEvents.map((event) => {\r\n            const StatusIcon = getStatusIcon(event.status)\r\n            return (\r\n              <Card\r\n                key={event.id}\r\n                className=\"hover:ring-1 hover:ring-blue-500/50 cursor-pointer transition\"\r\n                noPadding\r\n              >\r\n                <div className=\"p-4\" onClick={() => onSelectEvent(event)}>\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <div\r\n                        className={`w-12 h-12 rounded-lg flex items-center justify-center ${getStatusStyle(\r\n                          event.status\r\n                        )}`}\r\n                      >\r\n                        <StatusIcon className={`w-6 h-6 ${getIconColor(event.status)}`} />\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"flex items-center gap-2 flex-wrap\">\r\n                          <span className=\"text-sm font-semibold text-white\">\r\n                            {event.id}\r\n                          </span>\r\n                          <Badge\r\n                            variant={\r\n                              event.status === 'Concluda'\r\n                                ? 'success'\r\n                                : event.status === 'Em Andamento'\r\n                                ? 'info'\r\n                                : 'warning'\r\n                            }\r\n                          >\r\n                            {event.status}\r\n                          </Badge>\r\n                          <Badge variant=\"purple\">{event.type}</Badge>\r\n                          {event.result && (\r\n                            <Badge variant={event.result === 'Aprovado' ? 'success' : 'error'}>\r\n                              {event.result}\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-zinc-400 mt-1\">\r\n                          <span className=\"text-blue-400\">{event.meterTag}</span> -{' '}\r\n                          {event.meterName} | Incio: {event.startDate} | Resp:{' '}\r\n                          {event.responsible}\r\n                        </p>\r\n                        <div className=\"mt-2 flex items-center gap-3\">\r\n                          <div className=\"flex-1 max-w-xs\">\r\n                            <ProgressBar\r\n                              value={event.progress}\r\n                              color={event.status === 'Concluda' ? 'emerald' : 'blue'}\r\n                              showLabel={false}\r\n                              size=\"sm\"\r\n                            />\r\n                          </div>\r\n                          <span className=\"text-xs text-zinc-400\">\r\n                            Etapa {event.currentStep}/7\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={(e) => handleDelete(e, event.id)}\r\n                        className=\"p-2 hover:bg-zinc-700 rounded-lg transition-colors\"\r\n                        title=\"Remover evento\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4 text-zinc-400 hover:text-red-400\" />\r\n                      </button>\r\n                      <ChevronRight className=\"w-5 h-5 text-zinc-500\" />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Clipboard, Database, Gauge, Settings, Calendar, FileText } from 'lucide-react'\r\nimport { Card, Input, Select, SectionHeader } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport type { CalibrationEvent } from '@/types'\r\n\r\ninterface Step01RegistroProps {\r\n  event: CalibrationEvent\r\n}\r\n\r\nexport function Step01Registro({ event }: Step01RegistroProps) {\r\n  const { calibrationFormData, updateCalibrationFormData, user } = useAppStore()\r\n\r\n  const handleChange = (field: string, value: string | number) => {\r\n    updateCalibrationFormData({ [field]: value })\r\n  }\r\n\r\n  const formData = calibrationFormData || {\r\n    eventId: event.id,\r\n    status: event.status,\r\n    resultado: '',\r\n    operador: 'Equinor Brasil Energia Ltda.',\r\n    serviceOrder: '-',\r\n    responsavelCalibracao: event.responsible || user.name,\r\n    preenchidoPor: user.name,\r\n    dataEmissao: new Date().toISOString().split('T')[0],\r\n    unidade: 'FPSO Bacalhau',\r\n    baciaCampo: 'Santos / Bacalhau',\r\n    localizacao: `MEDIDOR SUBSEA - Poo ${event.meterName}`,\r\n    referenciaMet: 'Separador de Teste - TAG: 20VA121',\r\n    tagMPFM: event.meterTag,\r\n    serialNumber: '',\r\n    fabricante: 'TechnipFMC',\r\n    modelo: 'MPM High-Performance Flowmeter',\r\n    tamanho: '5\"',\r\n    razaoBeta: 'B = 0.7 MPM',\r\n    modoMedicao: 'Dual Mode',\r\n    sistema: event.meterName,\r\n    versaoSoftwareMedidor: '',\r\n    versaoFPM207: '',\r\n    versaoFCS320: '',\r\n    versaoPVTsim: '',\r\n    naturezaAtividade: `${event.type} - ${event.meterName} - ${event.meterTag}`,\r\n    idEventoDesvio: '-',\r\n    inicioEstabilizacao: '',\r\n    inicioTotalizacao: '',\r\n    fimTotalizacao: '',\r\n    duracaoEfetiva: 24,\r\n    observacoesIniciais: '',\r\n    comentariosGerais: '',\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Identificao do Responsvel */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Clipboard}\r\n          title=\"Identificao do Responsvel e Autoridade\"\r\n          color=\"blue\"\r\n        />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input \r\n            label=\"ID do Evento/Relatrio\" \r\n            value={formData.eventId} \r\n            readOnly \r\n          />\r\n          <Select\r\n            label=\"Status\"\r\n            value={formData.status}\r\n            onChange={(e) => handleChange('status', e.target.value)}\r\n            options={[\r\n              { value: 'Em Andamento', label: 'Em Andamento' },\r\n              { value: 'Aguardando PVT', label: 'Aguardando PVT' },\r\n              { value: 'Em Totalizao', label: 'Em Totalizao' },\r\n              { value: 'Concluda', label: 'Concluda' },\r\n            ]}\r\n          />\r\n          <Input \r\n            label=\"Operador\" \r\n            value={formData.operador}\r\n            onChange={(e) => handleChange('operador', e.target.value)}\r\n          />\r\n          <Select\r\n            label=\"Resultado\"\r\n            value={formData.resultado}\r\n            onChange={(e) => handleChange('resultado', e.target.value)}\r\n            options={[\r\n              { value: '', label: 'Pendente' },\r\n              { value: 'Aprovado', label: 'Aprovado' },\r\n              { value: 'Reprovado', label: 'Reprovado' },\r\n            ]}\r\n          />\r\n          <Input \r\n            label=\"Ordem de Servio (S.O.)\" \r\n            value={formData.serviceOrder}\r\n            onChange={(e) => handleChange('serviceOrder', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Responsvel Calibrao\" \r\n            value={formData.responsavelCalibracao}\r\n            onChange={(e) => handleChange('responsavelCalibracao', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Preenchido por\" \r\n            value={formData.preenchidoPor}\r\n            onChange={(e) => handleChange('preenchidoPor', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Data de Emisso\" \r\n            type=\"date\" \r\n            value={formData.dataEmissao}\r\n            onChange={(e) => handleChange('dataEmissao', e.target.value)}\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Dados da Instalao */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader icon={Database} title=\"Dados da Instalao\" color=\"purple\" />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input \r\n            label=\"Unidade / FPSO\" \r\n            value={formData.unidade} \r\n            onChange={(e) => handleChange('unidade', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Bacia / Campo\" \r\n            value={formData.baciaCampo}\r\n            onChange={(e) => handleChange('baciaCampo', e.target.value)}\r\n          />\r\n          <Input\r\n            label=\"Localizao na Planta\"\r\n            value={formData.localizacao}\r\n            onChange={(e) => handleChange('localizacao', e.target.value)}\r\n            className=\"col-span-2\"\r\n          />\r\n          <Input\r\n            label=\"Referncia Metrolgica (Autorizada)\"\r\n            value={formData.referenciaMet}\r\n            onChange={(e) => handleChange('referenciaMet', e.target.value)}\r\n            className=\"col-span-2\"\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Identificao do Instrumento */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Gauge}\r\n          title=\"Identificao do Instrumento (MPFM)\"\r\n          color=\"amber\"\r\n        />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input \r\n            label=\"TAG do MPFM\" \r\n            value={formData.tagMPFM} \r\n            readOnly \r\n          />\r\n          <Input \r\n            label=\"Nmero de Srie (S/N)\" \r\n            value={formData.serialNumber}\r\n            onChange={(e) => handleChange('serialNumber', e.target.value)}\r\n            placeholder=\"Ex: 14-100269\"\r\n          />\r\n          <Input\r\n            label=\"Fabricante\"\r\n            value={formData.fabricante}\r\n            onChange={(e) => handleChange('fabricante', e.target.value)}\r\n          />\r\n          <Input\r\n            label=\"Modelo\"\r\n            value={formData.modelo}\r\n            onChange={(e) => handleChange('modelo', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Tamanho\" \r\n            value={formData.tamanho}\r\n            onChange={(e) => handleChange('tamanho', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Razo Beta\" \r\n            value={formData.razaoBeta}\r\n            onChange={(e) => handleChange('razaoBeta', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Modo de Medio Ativo\" \r\n            value={formData.modoMedicao}\r\n            onChange={(e) => handleChange('modoMedicao', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Sistema\" \r\n            value={formData.sistema} \r\n            readOnly \r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Configurao de Software */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Settings}\r\n          title=\"Configurao de Software e Integridade\"\r\n          color=\"emerald\"\r\n        />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input\r\n            label=\"Verso de Software (Medidor)\"\r\n            value={formData.versaoSoftwareMedidor}\r\n            onChange={(e) => handleChange('versaoSoftwareMedidor', e.target.value)}\r\n            placeholder=\"Ex: FW-MPM-BAC-v1.12.3\"\r\n          />\r\n          <Input\r\n            label=\"Verso do Computador de Vazo FPM207\"\r\n            value={formData.versaoFPM207}\r\n            onChange={(e) => handleChange('versaoFPM207', e.target.value)}\r\n            placeholder=\"Ex: v2.8.5\"\r\n          />\r\n          <Input\r\n            label=\"Verso do Software FCS320\"\r\n            value={formData.versaoFCS320}\r\n            onChange={(e) => handleChange('versaoFCS320', e.target.value)}\r\n            placeholder=\"Ex: v8.4.1 Build 710\"\r\n          />\r\n          <Input\r\n            label=\"Software de Simulao (Calsep PVTsim)\"\r\n            value={formData.versaoPVTsim}\r\n            onChange={(e) => handleChange('versaoPVTsim', e.target.value)}\r\n            placeholder=\"Ex: v23.1.0\"\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Escopo e Perodo */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Calendar}\r\n          title=\"Escopo e Perodo do Teste de Calibrao\"\r\n          color=\"red\"\r\n        />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input\r\n            label=\"Natureza da Atividade\"\r\n            value={formData.naturezaAtividade}\r\n            className=\"col-span-2\"\r\n            readOnly\r\n          />\r\n          <Input \r\n            label=\"ID do Evento de Desvio (se aplicvel)\" \r\n            value={formData.idEventoDesvio}\r\n            onChange={(e) => handleChange('idEventoDesvio', e.target.value)}\r\n          />\r\n          <div></div>\r\n          <Input\r\n            label=\"Incio da Estabilizao\"\r\n            type=\"datetime-local\"\r\n            value={formData.inicioEstabilizacao}\r\n            onChange={(e) => handleChange('inicioEstabilizacao', e.target.value)}\r\n          />\r\n          <Input\r\n            label=\"Incio da Totalizao (24h)\"\r\n            type=\"datetime-local\"\r\n            value={formData.inicioTotalizacao}\r\n            onChange={(e) => handleChange('inicioTotalizacao', e.target.value)}\r\n          />\r\n          <Input\r\n            label=\"Fim da Totalizao\"\r\n            type=\"datetime-local\"\r\n            value={formData.fimTotalizacao}\r\n            onChange={(e) => handleChange('fimTotalizacao', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Durao Total Efetiva (h)\" \r\n            value={String(formData.duracaoEfetiva)} \r\n            unit=\"h\" \r\n            readOnly \r\n          />\r\n          <Input\r\n            label=\"Observaes Iniciais\"\r\n            className=\"col-span-2\"\r\n            value={formData.observacoesIniciais}\r\n            onChange={(e) => handleChange('observacoesIniciais', e.target.value)}\r\n            placeholder=\"Observaes...\"\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Comentrios Gerais */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader icon={FileText} title=\"Comentrios Gerais\" />\r\n        <textarea\r\n          className=\"w-full h-24 px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-sm text-white placeholder-zinc-500 focus:outline-none focus:border-blue-500\"\r\n          placeholder=\"Observaes adicionais sobre o evento de calibrao...\"\r\n          value={formData.comentariosGerais}\r\n          onChange={(e) => handleChange('comentariosGerais', e.target.value)}\r\n        />\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { FlaskConical, Beaker, Database, Layers, CheckCircle, Sparkles } from 'lucide-react'\r\nimport { Card, Input, Select, SectionHeader, Badge, Button } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { realCalibrationPVT } from '@/data/realData'\r\nimport type { MolarComposition } from '@/types'\r\n\r\nconst defaultComposition: MolarComposition[] = [\r\n  { component: 'N', molecularWeight: 28.01, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'CO', molecularWeight: 44.01, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'HS', molecularWeight: 34.08, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'C', molecularWeight: 16.04, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'C', molecularWeight: 30.07, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'C', molecularWeight: 44.10, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'i-C', molecularWeight: 58.12, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'n-C', molecularWeight: 58.12, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'i-C', molecularWeight: 72.15, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'n-C', molecularWeight: 72.15, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'C', molecularWeight: 86.18, molPercent: 0, normalizedMolPercent: 0 },\r\n  { component: 'C+', molecularWeight: 97.37, molPercent: 0, normalizedMolPercent: 0 },\r\n]\r\n\r\nexport function Step02PVT() {\r\n  const { calibrationFormData, updateCalibrationFormData } = useAppStore()\r\n\r\n  const [composition, setComposition] = useState<MolarComposition[]>(\r\n    calibrationFormData?.composicao || defaultComposition\r\n  )\r\n\r\n  const formData = calibrationFormData || {\r\n    pvtReportId: '',\r\n    dataAmostragem: '',\r\n    pontoAmostragem: 'Separador',\r\n    softwareModelagem: 'PVTsim',\r\n    versaoModelo: '',\r\n    statusAprovacao: 'Pendente',\r\n    dataAprovacao: '',\r\n    comentariosPVT: '',\r\n    densidadeOleo: 0,\r\n    densidadeGas: 0,\r\n    densidadeAgua: 0,\r\n    gor: 0,\r\n    bsw: 0,\r\n    fatorEncolhimento: 0,\r\n    penelouxGas: 1.0,\r\n    penelouxOil: 1.0,\r\n    pvtLoadedFCS320: false,\r\n    pvtLoadedFPM207: false,\r\n    gammaRestarted: false,\r\n    pressureVerified: false,\r\n    temperatureVerified: false,\r\n  }\r\n\r\n  const handleChange = (field: string, value: string | number | boolean) => {\r\n    updateCalibrationFormData({ [field]: value })\r\n  }\r\n\r\n  const handleCompositionChange = (index: number, value: number) => {\r\n    const newComposition = [...composition]\r\n    newComposition[index] = { ...newComposition[index], molPercent: value }\r\n    setComposition(newComposition)\r\n  }\r\n\r\n  // Funo para preencher com dados reais da calibrao 211\r\n  const handleLoadRealData = () => {\r\n    // Atualiza campos do formulrio\r\n    updateCalibrationFormData({\r\n      pvtReportId: `Calibration #${realCalibrationPVT.calibrationNo}`,\r\n      dataAmostragem: realCalibrationPVT.startDate,\r\n      pontoAmostragem: 'Separador de Teste',\r\n      softwareModelagem: 'PVTsim',\r\n      versaoModelo: 'v23.1.0',\r\n      statusAprovacao: 'Aprovado',\r\n      dataAprovacao: realCalibrationPVT.endDate,\r\n      comentariosPVT: `Dados reais do FPSO Bacalhau - ${realCalibrationPVT.meterName}`,\r\n      densidadeOleo: realCalibrationPVT.densities.oil.mpfm,\r\n      densidadeGas: realCalibrationPVT.densities.gas.mpfm,\r\n      densidadeAgua: realCalibrationPVT.densities.water.mpfm,\r\n      gor: 350, // Valor tpico\r\n      bsw: 0.02, // ~2%\r\n      fatorEncolhimento: 0.85,\r\n      penelouxGas: realCalibrationPVT.peneloux.gas,\r\n      penelouxOil: realCalibrationPVT.peneloux.oil,\r\n      pvtLoadedFCS320: true,\r\n      pvtLoadedFPM207: true,\r\n      gammaRestarted: true,\r\n      pressureVerified: true,\r\n      temperatureVerified: true,\r\n    })\r\n\r\n    // Atualiza composio com dados reais\r\n    const realComp: MolarComposition[] = realCalibrationPVT.composition.map((c) => ({\r\n      component: c.component,\r\n      molecularWeight: c.molecularWeight,\r\n      molPercent: c.molPercent,\r\n      normalizedMolPercent: c.molPercent,\r\n    }))\r\n    setComposition(realComp)\r\n    updateCalibrationFormData({ composicao: realComp })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      updateCalibrationFormData({ composicao: composition })\r\n    }, 500)\r\n    return () => clearTimeout(timeoutId)\r\n  }, [composition, updateCalibrationFormData])\r\n\r\n  const somaMol = composition.reduce((acc, c) => acc + c.molPercent, 0)\r\n  const mwMistura = somaMol > 0 \r\n    ? composition.reduce((acc, c) => acc + c.molPercent * c.molecularWeight, 0) / somaMol\r\n    : 0\r\n\r\n  const controlItems = [\r\n    { key: 'pvtLoadedFCS320', label: 'PVT carregada no FCS320' },\r\n    { key: 'pvtLoadedFPM207', label: 'PVT carregada no FPM207' },\r\n    { key: 'gammaRestarted', label: 'Gamma reiniciado' },\r\n    { key: 'pressureVerified', label: 'Presso verificada' },\r\n    { key: 'temperatureVerified', label: 'Temperatura verificada' },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <SectionHeader\r\n            icon={FlaskConical}\r\n            title=\"Identificao do Relatrio PVT / Amostragem\"\r\n            color=\"purple\"\r\n          />\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleLoadRealData}\r\n            className=\"flex items-center gap-2 text-purple-400 border-purple-500/30 hover:bg-purple-500/10\"\r\n          >\r\n            <Sparkles size={14} />\r\n            Carregar Dados Reais (Cal. #211)\r\n          </Button>\r\n        </div>\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input\r\n            label=\"ID do Relatrio Laboratorial\"\r\n            value={formData.pvtReportId}\r\n            onChange={(e) => handleChange('pvtReportId', e.target.value)}\r\n            className=\"col-span-2\"\r\n            placeholder=\"Ex: SLB - P.1077663_2025BRRD-P004039\"\r\n          />\r\n          <Input \r\n            label=\"Data da Amostragem\" \r\n            type=\"date\" \r\n            value={formData.dataAmostragem}\r\n            onChange={(e) => handleChange('dataAmostragem', e.target.value)}\r\n          />\r\n          <Input \r\n            label=\"Ponto de Amostragem\" \r\n            value={formData.pontoAmostragem}\r\n            onChange={(e) => handleChange('pontoAmostragem', e.target.value)}\r\n          />\r\n          <Input\r\n            label=\"Software de Modelagem\"\r\n            value={formData.softwareModelagem}\r\n            onChange={(e) => handleChange('softwareModelagem', e.target.value)}\r\n          />\r\n          <Input\r\n            label=\"Verso/Arquivo do Modelo\"\r\n            value={formData.versaoModelo}\r\n            onChange={(e) => handleChange('versaoModelo', e.target.value)}\r\n            placeholder=\"Ex: v23.1.0\"\r\n          />\r\n          <Select\r\n            label=\"Status de Aprovao (PVT GROUP)\"\r\n            value={formData.statusAprovacao}\r\n            onChange={(e) => handleChange('statusAprovacao', e.target.value)}\r\n            options={[\r\n              { value: 'Pendente', label: 'Pendente' },\r\n              { value: 'Em Anlise', label: 'Em Anlise' },\r\n              { value: 'Aprovado', label: 'Aprovado' },\r\n              { value: 'Reprovado', label: 'Reprovado' },\r\n            ]}\r\n          />\r\n          <Input \r\n            label=\"Data de Aprovao\" \r\n            type=\"date\" \r\n            value={formData.dataAprovacao}\r\n            onChange={(e) => handleChange('dataAprovacao', e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"mt-3\">\r\n          <Input\r\n            label=\"Comentrios\"\r\n            value={formData.comentariosPVT}\r\n            onChange={(e) => handleChange('comentariosPVT', e.target.value)}\r\n            placeholder=\"Observaes sobre o relatrio PVT...\"\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Beaker}\r\n          title=\"Propriedades de Referncia (@std)\"\r\n          color=\"blue\"\r\n        />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-5 gap-3\">\r\n          <Input \r\n            label=\"Densidade leo\" \r\n            type=\"number\"\r\n            value={formData.densidadeOleo || ''}\r\n            onChange={(e) => handleChange('densidadeOleo', parseFloat(e.target.value) || 0)}\r\n            unit=\"kg/m\" \r\n            placeholder=\"773.41\"\r\n          />\r\n          <Input \r\n            label=\"Densidade Gs\" \r\n            type=\"number\"\r\n            value={formData.densidadeGas || ''}\r\n            onChange={(e) => handleChange('densidadeGas', parseFloat(e.target.value) || 0)}\r\n            unit=\"kg/m\" \r\n            placeholder=\"0.87\"\r\n          />\r\n          <Input \r\n            label=\"Densidade gua\" \r\n            type=\"number\"\r\n            value={formData.densidadeAgua || ''}\r\n            onChange={(e) => handleChange('densidadeAgua', parseFloat(e.target.value) || 0)}\r\n            unit=\"kg/m\" \r\n            placeholder=\"1.25\"\r\n          />\r\n          <Input \r\n            label=\"GOR\" \r\n            type=\"number\"\r\n            value={formData.gor || ''}\r\n            onChange={(e) => handleChange('gor', parseFloat(e.target.value) || 0)}\r\n            unit=\"Sm/Sm\" \r\n            placeholder=\"216.81\"\r\n          />\r\n          <Input \r\n            label=\"BSW\" \r\n            type=\"number\"\r\n            value={formData.bsw || ''}\r\n            onChange={(e) => handleChange('bsw', parseFloat(e.target.value) || 0)}\r\n            unit=\"%\" \r\n            placeholder=\"5.5\"\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Database}\r\n          title=\"Composio molar (mol%)\"\r\n          color=\"amber\"\r\n        />\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-xs\">\r\n            <thead>\r\n              <tr className=\"border-b border-zinc-700\">\r\n                <th className=\"py-2 px-2 text-left text-zinc-400\">Componente</th>\r\n                <th className=\"py-2 px-2 text-right text-zinc-400\">Massa Molar</th>\r\n                <th className=\"py-2 px-2 text-right text-zinc-400\">mol% (entrada)</th>\r\n                <th className=\"py-2 px-2 text-right text-zinc-400\">mol% (normalizado)</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {composition.map((comp, index) => (\r\n                <tr key={comp.component} className=\"border-b border-zinc-800/50\">\r\n                  <td className=\"py-1.5 px-2 text-zinc-200\">{comp.component}</td>\r\n                  <td className=\"py-1.5 px-2 text-right text-zinc-400\">\r\n                    {comp.molecularWeight.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"py-1.5 px-2 text-right\">\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.001\"\r\n                      value={comp.molPercent || ''}\r\n                      onChange={(e) => handleCompositionChange(index, parseFloat(e.target.value) || 0)}\r\n                      className=\"w-20 px-2 py-1 bg-zinc-800 border border-zinc-700 rounded text-xs text-blue-400 text-right\"\r\n                      placeholder=\"0.000\"\r\n                      title={`mol% de ${comp.component}`}\r\n                    />\r\n                  </td>\r\n                  <td className=\"py-1.5 px-2 text-right text-emerald-400\">\r\n                    {somaMol > 0 ? ((comp.molPercent / somaMol) * 100).toFixed(3) : '0.000'}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n            <tfoot className=\"bg-zinc-800/50\">\r\n              <tr>\r\n                <td className=\"py-2 px-2 text-zinc-200 font-medium\">Soma mol%</td>\r\n                <td className=\"py-2 px-2\"></td>\r\n                <td className=\"py-2 px-2 text-right text-blue-400 font-medium\">{somaMol.toFixed(3)}</td>\r\n                <td className=\"py-2 px-2 text-right text-emerald-400 font-medium\">100.000</td>\r\n              </tr>\r\n              <tr>\r\n                <td className=\"py-2 px-2 text-zinc-200 font-medium\">MW mistura</td>\r\n                <td className=\"py-2 px-2\"></td>\r\n                <td className=\"py-2 px-2 text-right text-amber-400 font-medium\" colSpan={2}>\r\n                  {mwMistura.toFixed(2)} kg/kmol\r\n                </td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n      </Card>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n        <Card className=\"p-4\">\r\n          <SectionHeader icon={Layers} title=\"Fatores Peneloux\" color=\"emerald\" />\r\n          <div className=\"grid grid-cols-2 gap-2\">\r\n            <Input\r\n              label=\"Peneloux Gas\"\r\n              type=\"number\"\r\n              step=\"0.001\"\r\n              value={formData.penelouxGas || ''}\r\n              onChange={(e) => handleChange('penelouxGas', parseFloat(e.target.value) || 1)}\r\n              inputSize=\"sm\"\r\n            />\r\n            <Input\r\n              label=\"Peneloux Oil\"\r\n              type=\"number\"\r\n              step=\"0.001\"\r\n              value={formData.penelouxOil || ''}\r\n              onChange={(e) => handleChange('penelouxOil', parseFloat(e.target.value) || 1)}\r\n              inputSize=\"sm\"\r\n            />\r\n          </div>\r\n        </Card>\r\n\r\n        <Card className=\"p-4\">\r\n          <SectionHeader icon={CheckCircle} title=\"Controle de Aplicao PVT\" color=\"emerald\" />\r\n          <p className=\"text-xs text-zinc-500 mb-3\">Clique para alternar</p>\r\n          <div className=\"space-y-2\">\r\n            {controlItems.map((item) => {\r\n              const isChecked = formData[item.key as keyof typeof formData] as boolean\r\n              return (\r\n                <button\r\n                  key={item.key}\r\n                  type=\"button\"\r\n                  onClick={() => handleChange(item.key, !isChecked)}\r\n                  className=\"w-full flex items-center justify-between p-2 bg-zinc-800/50 rounded hover:bg-zinc-700/50 transition-colors\"\r\n                >\r\n                  <span className=\"text-xs text-zinc-300\">{item.label}</span>\r\n                  <Badge variant={isChecked ? 'OK' : 'Pendente'} size=\"sm\">\r\n                    {isChecked ? 'OK' : 'Pendente'}\r\n                  </Badge>\r\n                </button>\r\n              )\r\n            })}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useCallback } from 'react'\r\nimport { Info, Database, Calculator, Plus, Trash2 } from 'lucide-react'\r\nimport { Card, Badge, SectionHeader, Button } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { formatNumber } from '@/utils'\r\nimport type { TotalizerRow } from '@/types'\r\n\r\nconst generateRowId = () => `tot-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\nexport function Step03Totalizadores() {\r\n  const { calibrationFormData, updateCalibrationFormData } = useAppStore()\r\n\r\n  const [rows, setRows] = useState<TotalizerRow[]>(\r\n    calibrationFormData?.totalizadores || []\r\n  )\r\n\r\n  const calculateDeltaHours = (start: string, end: string): number => {\r\n    if (!start || !end) return 0\r\n    const startDate = new Date(start)\r\n    const endDate = new Date(end)\r\n    return Math.max(0, (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60))\r\n  }\r\n\r\n  const calculateHC = (oil: number, gas: number): number => oil + gas\r\n\r\n  const addRow = useCallback(() => {\r\n    const newRow: TotalizerRow = {\r\n      id: generateRowId(),\r\n      startTime: '',\r\n      endTime: '',\r\n      deltaHours: 0,\r\n      mpfmOil: 0,\r\n      mpfmGas: 0,\r\n      mpfmWater: 0,\r\n      mpfmHC: 0,\r\n      mpfmTotal: 0,\r\n      refOilVolume: 0,\r\n      refOilDensity: 0,\r\n      refOilMassCalc: 0,\r\n      refOilMassPI: 0,\r\n      refGas: 0,\r\n      refWater: 0,\r\n      refHC: 0,\r\n      status: 'Pendente',\r\n    }\r\n    const updated = [...rows, newRow]\r\n    setRows(updated)\r\n    updateCalibrationFormData({ totalizadores: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const removeRow = useCallback((id: string) => {\r\n    const updated = rows.filter((r) => r.id !== id)\r\n    setRows(updated)\r\n    updateCalibrationFormData({ totalizadores: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const updateRow = useCallback((id: string, field: keyof TotalizerRow, value: string | number) => {\r\n    const updated = rows.map((row) => {\r\n      if (row.id !== id) return row\r\n\r\n      const updatedRow = { ...row, [field]: value }\r\n\r\n      // Recalculate derived fields\r\n      if (field === 'startTime' || field === 'endTime') {\r\n        updatedRow.deltaHours = calculateDeltaHours(\r\n          field === 'startTime' ? String(value) : row.startTime,\r\n          field === 'endTime' ? String(value) : row.endTime\r\n        )\r\n      }\r\n\r\n      if (field === 'mpfmOil' || field === 'mpfmGas') {\r\n        const oil = field === 'mpfmOil' ? Number(value) : row.mpfmOil\r\n        const gas = field === 'mpfmGas' ? Number(value) : row.mpfmGas\r\n        updatedRow.mpfmHC = calculateHC(oil, gas)\r\n      }\r\n\r\n      if (field === 'refOilMassCalc' || field === 'refGas') {\r\n        const oil = field === 'refOilMassCalc' ? Number(value) : row.refOilMassCalc\r\n        const gas = field === 'refGas' ? Number(value) : row.refGas\r\n        updatedRow.refHC = calculateHC(oil, gas)\r\n      }\r\n\r\n      // Update status based on data completeness\r\n      if (updatedRow.deltaHours >= 24 && updatedRow.mpfmOil > 0 && updatedRow.refOilMassCalc > 0) {\r\n        updatedRow.status = 'OK'\r\n      } else if (updatedRow.startTime && updatedRow.endTime) {\r\n        updatedRow.status = 'Parcial'\r\n      }\r\n\r\n      return updatedRow\r\n    })\r\n\r\n    setRows(updated)\r\n    updateCalibrationFormData({ totalizadores: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  // Calculate totals\r\n  const totalMPFMOil = rows.reduce((acc, t) => acc + t.mpfmOil, 0)\r\n  const totalMPFMGas = rows.reduce((acc, t) => acc + t.mpfmGas, 0)\r\n  const totalMPFMHC = rows.reduce((acc, t) => acc + t.mpfmHC, 0)\r\n  const totalRefOil = rows.reduce((acc, t) => acc + t.refOilMassCalc, 0)\r\n  const totalRefGas = rows.reduce((acc, t) => acc + t.refGas, 0)\r\n  const totalDuration = rows.reduce((acc, t) => acc + t.deltaHours, 0)\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\r\n        <p className=\"text-xs text-blue-300\">\r\n          <Info className=\"w-3 h-3 inline mr-1\" />\r\n          Adicione perodos de totalizao. As deltas e totais so calculados automaticamente.\r\n          O perodo total deve ser de no mnimo 24 horas.\r\n        </p>\r\n      </div>\r\n\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <SectionHeader\r\n            icon={Database}\r\n            title=\"Totalizadores / Horrio (mnimo 24h)\"\r\n            color=\"blue\"\r\n          />\r\n          <Button variant=\"primary\" size=\"sm\" icon={Plus} onClick={addRow}>\r\n            Adicionar Perodo\r\n          </Button>\r\n        </div>\r\n\r\n        {rows.length === 0 ? (\r\n          <div className=\"text-center py-8 text-zinc-500\">\r\n            <Database className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n            <p>Nenhum perodo de totalizao adicionado.</p>\r\n            <p className=\"text-xs mt-1\">Clique em \"Adicionar Perodo\" para comear.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-xs\">\r\n              <thead>\r\n                <tr className=\"border-b border-zinc-700\">\r\n                  <th className=\"py-2 px-1 text-left text-zinc-400\">Incio</th>\r\n                  <th className=\"py-2 px-1 text-left text-zinc-400\">Fim</th>\r\n                  <th className=\"py-2 px-1 text-center text-zinc-400\">t (h)</th>\r\n                  <th className=\"py-2 px-1 text-right text-blue-400\">MPFM leo (kg)</th>\r\n                  <th className=\"py-2 px-1 text-right text-blue-400\">MPFM Gs (kg)</th>\r\n                  <th className=\"py-2 px-1 text-right text-blue-400\">HC (kg)</th>\r\n                  <th className=\"py-2 px-1 text-right text-emerald-400\">REF leo (kg)</th>\r\n                  <th className=\"py-2 px-1 text-right text-emerald-400\">REF Gs (kg)</th>\r\n                  <th className=\"py-2 px-1 text-center text-zinc-400\">Status</th>\r\n                  <th className=\"py-2 px-1 w-8\"></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {rows.map((row) => (\r\n                  <tr key={row.id} className=\"border-b border-zinc-800/50\">\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <input\r\n                        type=\"datetime-local\"\r\n                        value={row.startTime}\r\n                        onChange={(e) => updateRow(row.id, 'startTime', e.target.value)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        title=\"Incio do perodo\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <input\r\n                        type=\"datetime-local\"\r\n                        value={row.endTime}\r\n                        onChange={(e) => updateRow(row.id, 'endTime', e.target.value)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        title=\"Fim do perodo\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1 text-center text-zinc-400\">\r\n                      {row.deltaHours.toFixed(2)}\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={row.mpfmOil || ''}\r\n                        onChange={(e) => updateRow(row.id, 'mpfmOil', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-blue-400 text-right\"\r\n                        placeholder=\"0\"\r\n                        title=\"MPFM leo\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={row.mpfmGas || ''}\r\n                        onChange={(e) => updateRow(row.id, 'mpfmGas', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-blue-400 text-right\"\r\n                        placeholder=\"0\"\r\n                        title=\"MPFM Gs\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1 text-right text-blue-400 font-medium\">\r\n                      {formatNumber(row.mpfmHC)}\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={row.refOilMassCalc || ''}\r\n                        onChange={(e) => updateRow(row.id, 'refOilMassCalc', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-emerald-400 text-right\"\r\n                        placeholder=\"0\"\r\n                        title=\"Referncia leo\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={row.refGas || ''}\r\n                        onChange={(e) => updateRow(row.id, 'refGas', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-emerald-400 text-right\"\r\n                        placeholder=\"0\"\r\n                        title=\"Referncia Gs\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1 text-center\">\r\n                      <Badge variant={row.status as 'OK' | 'Parcial' | 'Pendente'} size=\"sm\">\r\n                        {row.status}\r\n                      </Badge>\r\n                    </td>\r\n                    <td className=\"py-1.5 px-1\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => removeRow(row.id)}\r\n                        className=\"p-1 text-red-400 hover:text-red-300 transition-colors\"\r\n                        title=\"Remover perodo\"\r\n                      >\r\n                        <Trash2 className=\"w-3 h-3\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      <Card className=\"p-4\">\r\n        <SectionHeader icon={Calculator} title=\"Total - Somatrio\" color=\"amber\" />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-6 gap-3\">\r\n          <div className={`p-3 rounded-lg ${totalDuration >= 24 ? 'bg-emerald-500/10 border border-emerald-500/20' : 'bg-zinc-800/50'}`}>\r\n            <p className=\"text-xs text-zinc-500\">Durao Total</p>\r\n            <p className={`text-lg font-bold ${totalDuration >= 24 ? 'text-emerald-400' : 'text-white'}`}>\r\n              {totalDuration.toFixed(1)}h\r\n            </p>\r\n            {totalDuration < 24 && (\r\n              <p className=\"text-xs text-amber-400\">Mnimo 24h</p>\r\n            )}\r\n          </div>\r\n          <div className=\"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20\">\r\n            <p className=\"text-xs text-zinc-500\">MPFM leo</p>\r\n            <p className=\"text-lg font-bold text-blue-400\">{formatNumber(totalMPFMOil)}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20\">\r\n            <p className=\"text-xs text-zinc-500\">MPFM Gs</p>\r\n            <p className=\"text-lg font-bold text-blue-400\">{formatNumber(totalMPFMGas)}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20\">\r\n            <p className=\"text-xs text-zinc-500\">MPFM HC</p>\r\n            <p className=\"text-lg font-bold text-blue-400\">{formatNumber(totalMPFMHC)}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/20\">\r\n            <p className=\"text-xs text-zinc-500\">REF leo</p>\r\n            <p className=\"text-lg font-bold text-emerald-400\">{formatNumber(totalRefOil)}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/20\">\r\n            <p className=\"text-xs text-zinc-500\">REF Gs</p>\r\n            <p className=\"text-lg font-bold text-emerald-400\">{formatNumber(totalRefGas)}</p>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useMemo } from 'react'\r\nimport { Settings, Database, Calculator, AlertTriangle, CheckCircle } from 'lucide-react'\r\nimport { Card, Input, Badge, SectionHeader } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { cn } from '@/utils'\r\nimport { calculateKFactor, ANP_LIMITS } from '@/services/calculations'\r\n\r\nexport function Step04KFactors() {\r\n  const { calibrationFormData, updateCalibrationFormData } = useAppStore()\r\n\r\n  const formData = calibrationFormData || {\r\n    kMin: ANP_LIMITS.K_FACTOR_MIN,\r\n    kMax: ANP_LIMITS.K_FACTOR_MAX,\r\n    limiteHC: ANP_LIMITS.HC_BALANCE_ERROR,\r\n    limiteTotal: ANP_LIMITS.TOTAL_BALANCE_ERROR,\r\n    massas: {\r\n      oleo: { mpfm: 0, ref: 0 },\r\n      gas: { mpfm: 0, ref: 0 },\r\n      agua: { mpfm: 0, ref: 0 },\r\n    },\r\n    kFactors: {\r\n      kOil: 1.0,\r\n      kGas: 1.0,\r\n      kWater: 1.0,\r\n      kOilStatus: 'Dentro' as const,\r\n      kGasStatus: 'Dentro' as const,\r\n      kWaterStatus: 'Dentro' as const,\r\n    },\r\n    totalizadores: [],\r\n  }\r\n\r\n  // Calculate totals from totalizadores\r\n  const totals = useMemo(() => {\r\n    const tots = formData.totalizadores || []\r\n    return {\r\n      mpfmOil: tots.reduce((acc: number, t: { mpfmOil: number }) => acc + t.mpfmOil, 0),\r\n      mpfmGas: tots.reduce((acc: number, t: { mpfmGas: number }) => acc + t.mpfmGas, 0),\r\n      refOil: tots.reduce((acc: number, t: { refOilMassCalc: number }) => acc + t.refOilMassCalc, 0),\r\n      refGas: tots.reduce((acc: number, t: { refGas: number }) => acc + t.refGas, 0),\r\n    }\r\n  }, [formData.totalizadores])\r\n\r\n  // Helper function to check if K-factor is in range\r\n  const isKFactorInRange = (k: number, min: number, max: number) => k >= min && k <= max\r\n\r\n  // Calculate K-factors based on totals\r\n  const kFactors = useMemo(() => {\r\n    const kOil = calculateKFactor(totals.refOil, totals.mpfmOil)\r\n    const kGas = calculateKFactor(totals.refGas, totals.mpfmGas)\r\n    // For water, use stored values or default\r\n    const kWater = formData.massas?.agua?.mpfm > 0 \r\n      ? calculateKFactor(formData.massas.agua.ref, formData.massas.agua.mpfm)\r\n      : 1.0\r\n\r\n    return {\r\n      kOil,\r\n      kGas,\r\n      kWater,\r\n      kOilStatus: isKFactorInRange(kOil, formData.kMin, formData.kMax) ? 'Dentro' as const : 'Fora' as const,\r\n      kGasStatus: isKFactorInRange(kGas, formData.kMin, formData.kMax) ? 'Dentro' as const : 'Fora' as const,\r\n      kWaterStatus: isKFactorInRange(kWater, formData.kMin, formData.kMax) ? 'Dentro' as const : 'Fora' as const,\r\n    }\r\n  }, [totals, formData.kMin, formData.kMax, formData.massas])\r\n\r\n  // Calculate deviations\r\n  const massasData = useMemo(() => {\r\n    const calcDesvio = (mpfm: number, ref: number) => {\r\n      if (ref === 0) return 0\r\n      return ((mpfm - ref) / ref) * 100\r\n    }\r\n\r\n    const mpfmHC = totals.mpfmOil + totals.mpfmGas\r\n    const refHC = totals.refOil + totals.refGas\r\n\r\n    return [\r\n      { fase: 'leo', mpfm: totals.mpfmOil, ref: totals.refOil, desvio: calcDesvio(totals.mpfmOil, totals.refOil) },\r\n      { fase: 'Gs', mpfm: totals.mpfmGas, ref: totals.refGas, desvio: calcDesvio(totals.mpfmGas, totals.refGas) },\r\n      { fase: 'gua', mpfm: formData.massas?.agua?.mpfm || 0, ref: formData.massas?.agua?.ref || 0, desvio: calcDesvio(formData.massas?.agua?.mpfm || 0, formData.massas?.agua?.ref || 0) },\r\n      { fase: 'HC (Total)', mpfm: mpfmHC, ref: refHC, desvio: calcDesvio(mpfmHC, refHC), isTotal: true },\r\n    ]\r\n  }, [totals, formData.massas])\r\n\r\n  // Update store when K-factors change\r\n  useEffect(() => {\r\n    updateCalibrationFormData({\r\n      kFactors,\r\n      massas: {\r\n        oleo: { mpfm: totals.mpfmOil, ref: totals.refOil },\r\n        gas: { mpfm: totals.mpfmGas, ref: totals.refGas },\r\n        agua: formData.massas?.agua || { mpfm: 0, ref: 0 },\r\n      },\r\n    })\r\n  }, [kFactors, totals, updateCalibrationFormData, formData.massas?.agua])\r\n\r\n  const handleChange = (field: string, value: number) => {\r\n    updateCalibrationFormData({ [field]: value })\r\n  }\r\n\r\n  const allKFactorsOk = kFactors.kOilStatus === 'Dentro' && kFactors.kGasStatus === 'Dentro'\r\n  const hcDesvio = massasData.find((m) => m.fase === 'HC (Total)')?.desvio || 0\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Status Summary */}\r\n      {totals.mpfmOil > 0 && totals.refOil > 0 && (\r\n        <div className={cn(\r\n          'p-4 rounded-lg flex items-center gap-3',\r\n          allKFactorsOk && Math.abs(hcDesvio) <= formData.limiteHC\r\n            ? 'bg-emerald-500/10 border border-emerald-500/20'\r\n            : 'bg-red-500/10 border border-red-500/20'\r\n        )}>\r\n          {allKFactorsOk && Math.abs(hcDesvio) <= formData.limiteHC ? (\r\n            <>\r\n              <CheckCircle className=\"w-5 h-5 text-emerald-400\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium text-emerald-400\">K-Factors dentro do limite</p>\r\n                <p className=\"text-xs text-zinc-400\">Todos os fatores esto entre {formData.kMin} e {formData.kMax}</p>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <AlertTriangle className=\"w-5 h-5 text-red-400\" />\r\n              <div>\r\n                <p className=\"text-sm font-medium text-red-400\">K-Factors fora do limite</p>\r\n                <p className=\"text-xs text-zinc-400\">Um ou mais fatores esto fora do intervalo permitido</p>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <Card className=\"p-4\">\r\n        <SectionHeader icon={Settings} title=\"Parmetros de Aceitao (ANP 44/2015)\" color=\"amber\" />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n          <Input\r\n            label=\"K mnimo\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.kMin}\r\n            onChange={(e) => handleChange('kMin', parseFloat(e.target.value) || 0.8)}\r\n          />\r\n          <Input\r\n            label=\"K mximo\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.kMax}\r\n            onChange={(e) => handleChange('kMax', parseFloat(e.target.value) || 1.2)}\r\n          />\r\n          <Input\r\n            label=\"Limite desvio HC ()\"\r\n            type=\"number\"\r\n            step=\"0.1\"\r\n            value={formData.limiteHC}\r\n            onChange={(e) => handleChange('limiteHC', parseFloat(e.target.value) || 10)}\r\n            unit=\"%\"\r\n          />\r\n          <Input\r\n            label=\"Limite desvio Total ()\"\r\n            type=\"number\"\r\n            step=\"0.1\"\r\n            value={formData.limiteTotal}\r\n            onChange={(e) => handleChange('limiteTotal', parseFloat(e.target.value) || 7)}\r\n            unit=\"%\"\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n        <Card className=\"p-4\">\r\n          <SectionHeader icon={Database} title=\"Massas Totalizadas (24h)\" color=\"blue\" />\r\n          {totals.mpfmOil === 0 && totals.refOil === 0 ? (\r\n            <div className=\"text-center py-6 text-zinc-500\">\r\n              <Database className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\r\n              <p className=\"text-sm\">Nenhum dado de totalizao</p>\r\n              <p className=\"text-xs\">Preencha os totalizadores no passo anterior</p>\r\n            </div>\r\n          ) : (\r\n            <table className=\"w-full text-xs\">\r\n              <thead>\r\n                <tr className=\"border-b border-zinc-700\">\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Fase</th>\r\n                  <th className=\"py-2 px-2 text-right text-blue-400\">MPFM (kg)</th>\r\n                  <th className=\"py-2 px-2 text-right text-emerald-400\">Ref (kg)</th>\r\n                  <th className=\"py-2 px-2 text-right text-zinc-400\">Desvio</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {massasData.map((r) => (\r\n                  <tr\r\n                    key={r.fase}\r\n                    className={cn(\r\n                      'border-b border-zinc-800/50',\r\n                      r.isTotal && 'bg-zinc-800/30 font-medium'\r\n                    )}\r\n                  >\r\n                    <td className=\"py-2 px-2 text-zinc-200\">{r.fase}</td>\r\n                    <td className=\"py-2 px-2 text-right text-blue-400\">\r\n                      {r.mpfm.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}\r\n                    </td>\r\n                    <td className=\"py-2 px-2 text-right text-emerald-400\">\r\n                      {r.ref.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}\r\n                    </td>\r\n                    <td\r\n                      className={cn(\r\n                        'py-2 px-2 text-right',\r\n                        r.isTotal\r\n                          ? Math.abs(r.desvio) > formData.limiteHC ? 'text-red-400' : 'text-emerald-400'\r\n                          : Math.abs(r.desvio) > 20 ? 'text-red-400' : 'text-zinc-300'\r\n                      )}\r\n                    >\r\n                      {r.desvio.toFixed(1)}%\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </Card>\r\n\r\n        <Card className=\"p-4\">\r\n          <SectionHeader icon={Calculator} title=\"K-Factors Calculados\" color=\"purple\" />\r\n          {totals.mpfmOil === 0 && totals.refOil === 0 ? (\r\n            <div className=\"text-center py-6 text-zinc-500\">\r\n              <Calculator className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\r\n              <p className=\"text-sm\">K-Factors sero calculados</p>\r\n              <p className=\"text-xs\">aps preenchimento dos totalizadores</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {[\r\n                { fase: 'K-Oil (leo)', k: kFactors.kOil, status: kFactors.kOilStatus },\r\n                { fase: 'K-Gas (Gs)', k: kFactors.kGas, status: kFactors.kGasStatus },\r\n                { fase: 'K-Water (gua)', k: kFactors.kWater, status: kFactors.kWaterStatus },\r\n              ].map((item) => (\r\n                <div\r\n                  key={item.fase}\r\n                  className={cn(\r\n                    'p-3 rounded-lg flex items-center justify-between',\r\n                    item.status === 'Fora'\r\n                      ? 'bg-red-500/10 border border-red-500/20'\r\n                      : 'bg-emerald-500/10 border border-emerald-500/20'\r\n                  )}\r\n                >\r\n                  <div>\r\n                    <span className=\"text-xs text-zinc-400\">{item.fase}</span>\r\n                    <p\r\n                      className={cn(\r\n                        'text-xl font-bold font-mono',\r\n                        item.status === 'Fora' ? 'text-red-400' : 'text-emerald-400'\r\n                      )}\r\n                    >\r\n                      {item.k.toFixed(4)}\r\n                    </p>\r\n                  </div>\r\n                  <Badge variant={item.status === 'Dentro' ? 'OK' : 'Fora'}>\r\n                    {item.status === 'Dentro' ? `${formData.kMin} - ${formData.kMax}` : 'Fora'}\r\n                  </Badge>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-4 p-3 bg-zinc-800/50 rounded-lg\">\r\n            <p className=\"text-xs text-zinc-500 mb-2\">Frmula ANP 44/2015:</p>\r\n            <p className=\"text-xs text-zinc-400 font-mono\">\r\n              K = Massa<sub>REF</sub> / Massa<sub>MPFM</sub>\r\n            </p>\r\n            <p className=\"text-xs text-zinc-500 mt-2\">\r\n              Intervalo vlido: {formData.kMin}  K  {formData.kMax}\r\n            </p>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useMemo } from 'react'\r\nimport { Target, CheckCircle, AlertTriangle } from 'lucide-react'\r\nimport { Card, Input, Badge, SectionHeader } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { cn } from '@/utils'\r\n\r\ninterface EnvelopeItem {\r\n  id: string\r\n  item: string\r\n  value: number\r\n  limit: number\r\n  status: 'OK' | 'Fora' | 'Pendente'\r\n}\r\n\r\nconst defaultEnvelope: EnvelopeItem[] = [\r\n  { id: 'gvf', item: 'GVF (%)', value: 0, limit: 95, status: 'Pendente' },\r\n  { id: 'pressure', item: 'Presso (bar)', value: 0, limit: 500, status: 'Pendente' },\r\n  { id: 'temperature', item: 'Temperatura (C)', value: 0, limit: 150, status: 'Pendente' },\r\n  { id: 'flow', item: 'Vazo (m/h)', value: 0, limit: 1000, status: 'Pendente' },\r\n  { id: 'bsw', item: 'BSW (%)', value: 0, limit: 50, status: 'Pendente' },\r\n]\r\n\r\nexport function Step05Balanco() {\r\n  const { calibrationFormData, updateCalibrationFormData } = useAppStore()\r\n\r\n  const formData = calibrationFormData || {\r\n    balancoTopOil: 0,\r\n    balancoTopGas: 0,\r\n    balancoGasLift: 0,\r\n    balancoDesvio: 0,\r\n  }\r\n\r\n  const [envelope, setEnvelope] = useState<EnvelopeItem[]>(defaultEnvelope)\r\n\r\n  // Calculate balance deviation\r\n  const balance = useMemo(() => {\r\n    // Get totalizadores totals if available\r\n    const tots = (formData as { totalizadores?: { mpfmOil: number; mpfmGas: number }[] }).totalizadores || []\r\n    const subseaOil = tots.reduce((acc: number, t) => acc + (t.mpfmOil || 0), 0)\r\n    const subseaGas = tots.reduce((acc: number, t) => acc + (t.mpfmGas || 0), 0)\r\n    const subseaTotal = subseaOil + subseaGas\r\n\r\n    const topsideTotal = formData.balancoTopOil + formData.balancoTopGas - formData.balancoGasLift\r\n\r\n    const desvio = subseaTotal > 0 \r\n      ? ((topsideTotal - subseaTotal) / subseaTotal) * 100 \r\n      : 0\r\n\r\n    return {\r\n      subseaTotal,\r\n      topsideTotal,\r\n      desvio,\r\n      status: Math.abs(desvio) <= 10 ? 'Dentro' : 'Fora',\r\n    }\r\n  }, [formData])\r\n\r\n  const handleChange = (field: string, value: number) => {\r\n    updateCalibrationFormData({ [field]: value, balancoDesvio: balance.desvio })\r\n  }\r\n\r\n  const updateEnvelopeItem = (id: string, field: 'value' | 'limit', value: number) => {\r\n    setEnvelope((prev) =>\r\n      prev.map((item) => {\r\n        if (item.id !== id) return item\r\n        const updated = { ...item, [field]: value }\r\n        // Auto-calculate status\r\n        if (updated.value > 0 && updated.limit > 0) {\r\n          updated.status = updated.value <= updated.limit ? 'OK' : 'Fora'\r\n        }\r\n        return updated\r\n      })\r\n    )\r\n  }\r\n\r\n  const allEnvelopeOk = envelope.every((e) => e.status === 'OK' || e.status === 'Pendente')\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={Target}\r\n          title=\"Balano HC Subsea vs Topside (com desconto de Gs Lift)\"\r\n          color=\"blue\"\r\n        />\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4\">\r\n          <Input\r\n            label=\"MPFM Topside  leo (kg)\"\r\n            type=\"number\"\r\n            value={formData.balancoTopOil || ''}\r\n            onChange={(e) => handleChange('balancoTopOil', parseFloat(e.target.value) || 0)}\r\n            placeholder=\"0\"\r\n          />\r\n          <Input\r\n            label=\"MPFM Topside  Gs (kg)\"\r\n            type=\"number\"\r\n            value={formData.balancoTopGas || ''}\r\n            onChange={(e) => handleChange('balancoTopGas', parseFloat(e.target.value) || 0)}\r\n            placeholder=\"0\"\r\n          />\r\n          <Input\r\n            label=\"Gs Lift  Gs (kg)\"\r\n            type=\"number\"\r\n            value={formData.balancoGasLift || ''}\r\n            onChange={(e) => handleChange('balancoGasLift', parseFloat(e.target.value) || 0)}\r\n            placeholder=\"0\"\r\n          />\r\n          <Input\r\n            label=\"Desvio (%)\"\r\n            value={balance.desvio.toFixed(2)}\r\n            readOnly\r\n            className={cn(\r\n              Math.abs(balance.desvio) > 10 && 'text-red-400'\r\n            )}\r\n          />\r\n        </div>\r\n\r\n        {/* Summary */}\r\n        <div className=\"grid grid-cols-3 gap-3 mb-4\">\r\n          <div className=\"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20 text-center\">\r\n            <p className=\"text-xs text-zinc-500\">MPFM Subsea (Total)</p>\r\n            <p className=\"text-lg font-bold text-blue-400\">\r\n              {balance.subseaTotal.toLocaleString('pt-BR', { maximumFractionDigits: 0 })} kg\r\n            </p>\r\n          </div>\r\n          <div className=\"p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/20 text-center\">\r\n            <p className=\"text-xs text-zinc-500\">Topside (Corrigido)</p>\r\n            <p className=\"text-lg font-bold text-emerald-400\">\r\n              {balance.topsideTotal.toLocaleString('pt-BR', { maximumFractionDigits: 0 })} kg\r\n            </p>\r\n          </div>\r\n          <div className={cn(\r\n            'p-3 rounded-lg text-center',\r\n            balance.status === 'Dentro' \r\n              ? 'bg-emerald-500/10 border border-emerald-500/20'\r\n              : 'bg-red-500/10 border border-red-500/20'\r\n          )}>\r\n            <p className=\"text-xs text-zinc-500\">Desvio</p>\r\n            <p className={cn(\r\n              'text-lg font-bold',\r\n              balance.status === 'Dentro' ? 'text-emerald-400' : 'text-red-400'\r\n            )}>\r\n              {balance.desvio.toFixed(1)}%\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={cn(\r\n          'p-3 rounded-lg flex items-center gap-2',\r\n          balance.status === 'Dentro' \r\n            ? 'bg-emerald-500/10 border border-emerald-500/20'\r\n            : 'bg-red-500/10 border border-red-500/20'\r\n        )}>\r\n          {balance.status === 'Dentro' ? (\r\n            <>\r\n              <CheckCircle className=\"w-4 h-4 text-emerald-400\" />\r\n              <p className=\"text-xs text-emerald-300\">\r\n                Status (10%): Dentro do limite\r\n              </p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <AlertTriangle className=\"w-4 h-4 text-red-400\" />\r\n              <p className=\"text-xs text-red-300\">\r\n                Status (10%): Fora do limite - verificar dados\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n      </Card>\r\n\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={CheckCircle}\r\n          title=\"Checagens de Envelope / Integridade\"\r\n          color=\"emerald\"\r\n        />\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-xs\">\r\n            <thead>\r\n              <tr className=\"border-b border-zinc-700\">\r\n                <th className=\"py-2 px-3 text-left text-zinc-400\">Item</th>\r\n                <th className=\"py-2 px-3 text-right text-zinc-400\">Valor Medido</th>\r\n                <th className=\"py-2 px-3 text-right text-zinc-400\">Limite Mx.</th>\r\n                <th className=\"py-2 px-3 text-center text-zinc-400\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {envelope.map((item) => (\r\n                <tr key={item.id} className=\"border-b border-zinc-800/50\">\r\n                  <td className=\"py-2 px-3 text-zinc-200\">{item.item}</td>\r\n                  <td className=\"py-2 px-3\">\r\n                    <input\r\n                      type=\"number\"\r\n                      value={item.value || ''}\r\n                      onChange={(e) => updateEnvelopeItem(item.id, 'value', parseFloat(e.target.value) || 0)}\r\n                      className=\"w-full px-2 py-1 bg-zinc-800 border border-zinc-700 rounded text-xs text-white text-right\"\r\n                      placeholder=\"0\"\r\n                      title={`Valor de ${item.item}`}\r\n                    />\r\n                  </td>\r\n                  <td className=\"py-2 px-3\">\r\n                    <input\r\n                      type=\"number\"\r\n                      value={item.limit || ''}\r\n                      onChange={(e) => updateEnvelopeItem(item.id, 'limit', parseFloat(e.target.value) || 0)}\r\n                      className=\"w-full px-2 py-1 bg-zinc-800 border border-zinc-700 rounded text-xs text-white text-right\"\r\n                      placeholder=\"0\"\r\n                      title={`Limite de ${item.item}`}\r\n                    />\r\n                  </td>\r\n                  <td className=\"py-2 px-3 text-center\">\r\n                    <Badge variant={item.status} size=\"sm\">\r\n                      {item.status}\r\n                    </Badge>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {!allEnvelopeOk && (\r\n          <div className=\"mt-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg\">\r\n            <p className=\"text-xs text-amber-300\">\r\n              <AlertTriangle className=\"w-3 h-3 inline mr-1\" />\r\n              Alguns itens esto fora do envelope operacional. Verifique os valores.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useCallback } from 'react'\r\nimport { Info, Eye, Plus, Trash2 } from 'lucide-react'\r\nimport { Card, SectionHeader, Button, Badge } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { cn } from '@/utils'\r\n\r\ninterface MonitorRow {\r\n  id: string\r\n  data: string\r\n  duracao: number\r\n  mpfmOil: number\r\n  mpfmGas: number\r\n  mpfmTotal: number\r\n  refTotal: number\r\n  desvio: number\r\n  alarmes: string\r\n}\r\n\r\nconst generateId = () => `mon-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\nconst migrateRows = (data: unknown[]): MonitorRow[] => {\r\n  if (!data || !Array.isArray(data)) return []\r\n  return data.map((row) => ({\r\n    id: (row as { id?: string }).id || generateId(),\r\n    data: (row as { data?: string }).data || '',\r\n    duracao: (row as { duracao?: number }).duracao || 0,\r\n    mpfmOil: (row as { mpfmOil?: number }).mpfmOil || 0,\r\n    mpfmGas: (row as { mpfmGas?: number }).mpfmGas || 0,\r\n    mpfmTotal: (row as { mpfmTotal?: number }).mpfmTotal || 0,\r\n    refTotal: (row as { refTotal?: number }).refTotal || 0,\r\n    desvio: (row as { desvio?: number }).desvio || 0,\r\n    alarmes: (row as { alarmes?: string }).alarmes || '',\r\n  }))\r\n}\r\n\r\nexport function Step06Monitoramento() {\r\n  const { calibrationFormData, updateCalibrationFormData } = useAppStore()\r\n\r\n  const [rows, setRows] = useState<MonitorRow[]>(() =>\r\n    migrateRows(calibrationFormData?.monitoramentoPosData || [])\r\n  )\r\n\r\n  const addRow = useCallback(() => {\r\n    const newRow: MonitorRow = {\r\n      id: generateId(),\r\n      data: new Date().toISOString().split('T')[0],\r\n      duracao: 24,\r\n      mpfmOil: 0,\r\n      mpfmGas: 0,\r\n      mpfmTotal: 0,\r\n      refTotal: 0,\r\n      desvio: 0,\r\n      alarmes: '',\r\n    }\r\n    const updated = [...rows, newRow]\r\n    setRows(updated)\r\n    updateCalibrationFormData({ monitoramentoPosData: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const removeRow = useCallback((id: string) => {\r\n    const updated = rows.filter((r) => r.id !== id)\r\n    setRows(updated)\r\n    updateCalibrationFormData({ monitoramentoPosData: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const updateRow = useCallback((id: string, field: keyof MonitorRow, value: string | number) => {\r\n    const updated = rows.map((row) => {\r\n      if (row.id !== id) return row\r\n      \r\n      const updatedRow = { ...row, [field]: value }\r\n      \r\n      // Auto-calculate total and deviation\r\n      if (field === 'mpfmOil' || field === 'mpfmGas') {\r\n        const oil = field === 'mpfmOil' ? Number(value) : row.mpfmOil\r\n        const gas = field === 'mpfmGas' ? Number(value) : row.mpfmGas\r\n        updatedRow.mpfmTotal = oil + gas\r\n        \r\n        if (updatedRow.refTotal > 0) {\r\n          updatedRow.desvio = ((updatedRow.mpfmTotal - updatedRow.refTotal) / updatedRow.refTotal) * 100\r\n        }\r\n      }\r\n      \r\n      if (field === 'refTotal' && updatedRow.mpfmTotal > 0) {\r\n        updatedRow.desvio = ((updatedRow.mpfmTotal - Number(value)) / Number(value)) * 100\r\n      }\r\n      \r\n      return updatedRow\r\n    })\r\n    \r\n    setRows(updated)\r\n    updateCalibrationFormData({ monitoramentoPosData: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const getDesvioStatus = (desvio: number): 'OK' | 'Alerta' | 'Crtico' => {\r\n    const abs = Math.abs(desvio)\r\n    if (abs <= 7) return 'OK'\r\n    if (abs <= 10) return 'Alerta'\r\n    return 'Crtico'\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg\">\r\n        <p className=\"text-xs text-purple-300\">\r\n          <Info className=\"w-3 h-3 inline mr-1\" />\r\n          Registre por perodo as massas totalizadas e o efeito dos novos K-factors.\r\n          Este monitoramento serve como evidncia ps-calibrao.\r\n        </p>\r\n      </div>\r\n\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <SectionHeader\r\n            icon={Eye}\r\n            title=\"Monitoramento Ps-Aplicao de Novos Fatores\"\r\n            color=\"purple\"\r\n          />\r\n          <Button variant=\"primary\" size=\"sm\" icon={Plus} onClick={addRow}>\r\n            Adicionar Perodo\r\n          </Button>\r\n        </div>\r\n\r\n        {rows.length === 0 ? (\r\n          <div className=\"text-center py-8 text-zinc-500\">\r\n            <Eye className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n            <p>Nenhum perodo de monitoramento registrado.</p>\r\n            <p className=\"text-xs mt-1\">Adicione perodos para acompanhar o desempenho ps-calibrao.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-xs\">\r\n              <thead>\r\n                <tr className=\"border-b border-zinc-700\">\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Data</th>\r\n                  <th className=\"py-2 px-2 text-center text-zinc-400\">Durao (h)</th>\r\n                  <th className=\"py-2 px-2 text-right text-zinc-400\">MPFM leo</th>\r\n                  <th className=\"py-2 px-2 text-right text-zinc-400\">MPFM Gs</th>\r\n                  <th className=\"py-2 px-2 text-right text-blue-400\">MPFM Total</th>\r\n                  <th className=\"py-2 px-2 text-right text-emerald-400\">REF Total</th>\r\n                  <th className=\"py-2 px-2 text-center text-zinc-400\">Desvio</th>\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Alarmes</th>\r\n                  <th className=\"py-2 px-2 w-8\"></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {rows.map((row) => {\r\n                  const status = getDesvioStatus(row.desvio)\r\n                  return (\r\n                    <tr key={row.id} className=\"border-b border-zinc-800/50\">\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <input\r\n                          type=\"date\"\r\n                          value={row.data}\r\n                          onChange={(e) => updateRow(row.id, 'data', e.target.value)}\r\n                          className=\"px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                          title=\"Data do perodo\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <input\r\n                          type=\"number\"\r\n                          value={row.duracao || ''}\r\n                          onChange={(e) => updateRow(row.id, 'duracao', parseFloat(e.target.value) || 0)}\r\n                          className=\"w-14 px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white text-center\"\r\n                          placeholder=\"24\"\r\n                          title=\"Durao em horas\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <input\r\n                          type=\"number\"\r\n                          value={row.mpfmOil || ''}\r\n                          onChange={(e) => updateRow(row.id, 'mpfmOil', parseFloat(e.target.value) || 0)}\r\n                          className=\"w-20 px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white text-right\"\r\n                          placeholder=\"0\"\r\n                          title=\"MPFM leo\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <input\r\n                          type=\"number\"\r\n                          value={row.mpfmGas || ''}\r\n                          onChange={(e) => updateRow(row.id, 'mpfmGas', parseFloat(e.target.value) || 0)}\r\n                          className=\"w-20 px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white text-right\"\r\n                          placeholder=\"0\"\r\n                          title=\"MPFM Gs\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2 text-right text-blue-400 font-medium\">\r\n                        {row.mpfmTotal.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <input\r\n                          type=\"number\"\r\n                          value={row.refTotal || ''}\r\n                          onChange={(e) => updateRow(row.id, 'refTotal', parseFloat(e.target.value) || 0)}\r\n                          className=\"w-20 px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-emerald-400 text-right\"\r\n                          placeholder=\"0\"\r\n                          title=\"Referncia Total\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2 text-center\">\r\n                        <Badge\r\n                          variant={status === 'OK' ? 'OK' : status === 'Alerta' ? 'Alerta' : 'Crtico'}\r\n                          size=\"sm\"\r\n                        >\r\n                          {row.desvio.toFixed(1)}%\r\n                        </Badge>\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <input\r\n                          value={row.alarmes}\r\n                          onChange={(e) => updateRow(row.id, 'alarmes', e.target.value)}\r\n                          className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                          placeholder=\"Nenhum\"\r\n                          title=\"Alarmes observados\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"py-1.5 px-2\">\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => removeRow(row.id)}\r\n                          className=\"p-1 text-red-400 hover:text-red-300 transition-colors\"\r\n                          title=\"Remover perodo\"\r\n                        >\r\n                          <Trash2 className=\"w-3 h-3\" />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        {rows.length > 0 && (\r\n          <div className=\"mt-4 p-3 bg-zinc-800/50 rounded-lg\">\r\n            <div className=\"flex justify-between text-xs\">\r\n              <span className=\"text-zinc-400\">Total de perodos: {rows.length}</span>\r\n              <span className={cn(\r\n                rows.filter(r => getDesvioStatus(r.desvio) === 'OK').length === rows.length\r\n                  ? 'text-emerald-400'\r\n                  : 'text-amber-400'\r\n              )}>\r\n                Perodos OK: {rows.filter(r => getDesvioStatus(r.desvio) === 'OK').length} / {rows.length}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useCallback } from 'react'\r\nimport { AlertTriangle, Bell, Plus, Trash2, CheckCircle } from 'lucide-react'\r\nimport { Card, SectionHeader, Button } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { cn } from '@/utils'\r\n\r\ninterface AlarmRow {\r\n  id: string\r\n  dataHora: string\r\n  tag: string\r\n  codigo: string\r\n  descricao: string\r\n  gravidade: 'Info' | 'Warning' | 'Critical'\r\n  acaoTomada: string\r\n}\r\n\r\nconst generateId = () => `alm-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\nconst migrateAlarmRows = (data: unknown[]): AlarmRow[] => {\r\n  if (!data || !Array.isArray(data)) return []\r\n  return data.map((row) => ({\r\n    id: (row as { id?: string }).id || generateId(),\r\n    dataHora: (row as { dataHora?: string }).dataHora || '',\r\n    tag: (row as { tag?: string }).tag || '',\r\n    codigo: (row as { codigo?: string }).codigo || '',\r\n    descricao: (row as { descricao?: string }).descricao || '',\r\n    gravidade: ((row as { gravidade?: string }).gravidade as AlarmRow['gravidade']) || 'Info',\r\n    acaoTomada: (row as { acaoTomada?: string }).acaoTomada || '',\r\n  }))\r\n}\r\n\r\nexport function Step07Alarmes() {\r\n  const { calibrationFormData, updateCalibrationFormData, selectedEvent } = useAppStore()\r\n\r\n  const [rows, setRows] = useState<AlarmRow[]>(() =>\r\n    migrateAlarmRows(calibrationFormData?.alarmes || [])\r\n  )\r\n\r\n  const addRow = useCallback(() => {\r\n    const newRow: AlarmRow = {\r\n      id: generateId(),\r\n      dataHora: new Date().toISOString().slice(0, 16),\r\n      tag: selectedEvent?.meterTag || '',\r\n      codigo: '',\r\n      descricao: '',\r\n      gravidade: 'Info',\r\n      acaoTomada: '',\r\n    }\r\n    const updated = [...rows, newRow]\r\n    setRows(updated)\r\n    updateCalibrationFormData({ alarmes: updated })\r\n  }, [rows, updateCalibrationFormData, selectedEvent])\r\n\r\n  const removeRow = useCallback((id: string) => {\r\n    const updated = rows.filter((r) => r.id !== id)\r\n    setRows(updated)\r\n    updateCalibrationFormData({ alarmes: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const updateRow = useCallback((id: string, field: keyof AlarmRow, value: string) => {\r\n    const updated = rows.map((row) =>\r\n      row.id === id ? { ...row, [field]: value } : row\r\n    )\r\n    setRows(updated)\r\n    updateCalibrationFormData({ alarmes: updated })\r\n  }, [rows, updateCalibrationFormData])\r\n\r\n  const getGravidadeColor = (gravidade: AlarmRow['gravidade']) => {\r\n    switch (gravidade) {\r\n      case 'Critical':\r\n        return 'bg-red-500/10 border-red-500/20'\r\n      case 'Warning':\r\n        return 'bg-amber-500/10 border-amber-500/20'\r\n      default:\r\n        return 'bg-blue-500/10 border-blue-500/20'\r\n    }\r\n  }\r\n\r\n  const criticalCount = rows.filter((r) => r.gravidade === 'Critical').length\r\n  const warningCount = rows.filter((r) => r.gravidade === 'Warning').length\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"p-3 bg-red-500/10 border border-red-500/20 rounded-lg\">\r\n        <p className=\"text-xs text-red-300\">\r\n          <AlertTriangle className=\"w-3 h-3 inline mr-1\" />\r\n          Use este log para rastreabilidade: alarmes crticos devem estar inativos no\r\n          incio do teste e investigados quando ocorrerem.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Summary */}\r\n      <div className=\"grid grid-cols-3 gap-3\">\r\n        <div className={cn(\r\n          'p-3 rounded-lg border text-center',\r\n          rows.length === 0 ? 'bg-emerald-500/10 border-emerald-500/20' : 'bg-zinc-800/50 border-zinc-700'\r\n        )}>\r\n          <p className=\"text-xs text-zinc-500\">Total de Alarmes</p>\r\n          <p className=\"text-2xl font-bold text-white\">{rows.length}</p>\r\n        </div>\r\n        <div className={cn(\r\n          'p-3 rounded-lg border text-center',\r\n          criticalCount > 0 ? 'bg-red-500/10 border-red-500/20' : 'bg-emerald-500/10 border-emerald-500/20'\r\n        )}>\r\n          <p className=\"text-xs text-zinc-500\">Crticos</p>\r\n          <p className={cn('text-2xl font-bold', criticalCount > 0 ? 'text-red-400' : 'text-emerald-400')}>\r\n            {criticalCount}\r\n          </p>\r\n        </div>\r\n        <div className={cn(\r\n          'p-3 rounded-lg border text-center',\r\n          warningCount > 0 ? 'bg-amber-500/10 border-amber-500/20' : 'bg-emerald-500/10 border-emerald-500/20'\r\n        )}>\r\n          <p className=\"text-xs text-zinc-500\">Warnings</p>\r\n          <p className={cn('text-2xl font-bold', warningCount > 0 ? 'text-amber-400' : 'text-emerald-400')}>\r\n            {warningCount}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <SectionHeader\r\n            icon={Bell}\r\n            title=\"Registro de Alarmes / Eventos (HMI/MPM/FCS320)\"\r\n            color=\"red\"\r\n          />\r\n          <Button variant=\"secondary\" size=\"sm\" icon={Plus} onClick={addRow}>\r\n            Adicionar Alarme\r\n          </Button>\r\n        </div>\r\n\r\n        {rows.length === 0 ? (\r\n          <div className=\"text-center py-8 text-zinc-500\">\r\n            <CheckCircle className=\"w-12 h-12 mx-auto mb-3 text-emerald-500 opacity-50\" />\r\n            <p className=\"text-emerald-400\">Nenhum alarme registrado durante o perodo.</p>\r\n            <p className=\"text-xs mt-1\">Isso  um bom sinal para a calibrao.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-xs\">\r\n              <thead>\r\n                <tr className=\"border-b border-zinc-700\">\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Data/Hora</th>\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">TAG</th>\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Cdigo</th>\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Descrio</th>\r\n                  <th className=\"py-2 px-2 text-center text-zinc-400\">Gravidade</th>\r\n                  <th className=\"py-2 px-2 text-left text-zinc-400\">Ao Tomada</th>\r\n                  <th className=\"py-2 px-2 w-8\"></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {rows.map((alarm) => (\r\n                  <tr\r\n                    key={alarm.id}\r\n                    className={cn('border-b border-zinc-800/50', getGravidadeColor(alarm.gravidade))}\r\n                  >\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <input\r\n                        type=\"datetime-local\"\r\n                        value={alarm.dataHora}\r\n                        onChange={(e) => updateRow(alarm.id, 'dataHora', e.target.value)}\r\n                        className=\"px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        title=\"Data e hora do alarme\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <input\r\n                        value={alarm.tag}\r\n                        onChange={(e) => updateRow(alarm.id, 'tag', e.target.value)}\r\n                        className=\"w-24 px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-blue-400\"\r\n                        placeholder=\"TAG\"\r\n                        title=\"TAG do equipamento\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <input\r\n                        value={alarm.codigo}\r\n                        onChange={(e) => updateRow(alarm.id, 'codigo', e.target.value)}\r\n                        className=\"w-20 px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        placeholder=\"Cdigo\"\r\n                        title=\"Cdigo do alarme\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <input\r\n                        value={alarm.descricao}\r\n                        onChange={(e) => updateRow(alarm.id, 'descricao', e.target.value)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        placeholder=\"Descrio do alarme\"\r\n                        title=\"Descrio detalhada\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2 text-center\">\r\n                      <select\r\n                        value={alarm.gravidade}\r\n                        onChange={(e) => updateRow(alarm.id, 'gravidade', e.target.value as AlarmRow['gravidade'])}\r\n                        className=\"px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        title=\"Gravidade do alarme\"\r\n                      >\r\n                        <option value=\"Info\">Info</option>\r\n                        <option value=\"Warning\">Warning</option>\r\n                        <option value=\"Critical\">Critical</option>\r\n                      </select>\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <input\r\n                        value={alarm.acaoTomada}\r\n                        onChange={(e) => updateRow(alarm.id, 'acaoTomada', e.target.value)}\r\n                        className=\"w-full px-1 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-xs text-white\"\r\n                        placeholder=\"Ao tomada\"\r\n                        title=\"Ao tomada para resolver\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"py-1.5 px-2\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => removeRow(alarm.id)}\r\n                        className=\"p-1 text-red-400 hover:text-red-300 transition-colors\"\r\n                        title=\"Remover alarme\"\r\n                      >\r\n                        <Trash2 className=\"w-3 h-3\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      {criticalCount > 0 && (\r\n        <div className=\"p-4 bg-red-500/10 border border-red-500/20 rounded-lg\">\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <AlertTriangle className=\"w-4 h-4 text-red-400\" />\r\n            <span className=\"text-sm font-medium text-red-400\">Ateno</span>\r\n          </div>\r\n          <p className=\"text-xs text-red-300\">\r\n            H {criticalCount} alarme(s) crtico(s) registrado(s). Certifique-se de que todos \r\n            foram investigados e as aes corretivas foram tomadas antes de finalizar a calibrao.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { ChevronLeft, ChevronRight, Save, FileText, Check } from 'lucide-react'\r\nimport { Button, Card, Badge, StepIndicator } from '@/components/ui'\r\nimport type { CalibrationEvent } from '@/types'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { Step01Registro } from './steps/Step01Registro'\r\nimport { Step02PVT } from './steps/Step02PVT'\r\nimport { Step03Totalizadores } from './steps/Step03Totalizadores'\r\nimport { Step04KFactors } from './steps/Step04KFactors'\r\nimport { Step05Balanco } from './steps/Step05Balanco'\r\nimport { Step06Monitoramento } from './steps/Step06Monitoramento'\r\nimport { Step07Alarmes } from './steps/Step07Alarmes'\r\n\r\nconst STEPS = [\r\n  'Registro',\r\n  'PVT',\r\n  'Totalizadores',\r\n  'K-Fatores',\r\n  'Balanos',\r\n  'Ps-Monit.',\r\n  'Alarmes',\r\n]\r\n\r\ninterface CalibrationWorkflowProps {\r\n  event: CalibrationEvent\r\n  onBack: () => void\r\n}\r\n\r\nexport function CalibrationWorkflow({ event, onBack }: CalibrationWorkflowProps) {\r\n  const { \r\n    setSelectedEvent, \r\n    setCalibrationFormData,\r\n    calibrationFormData,\r\n    completeCalibrationStep,\r\n    finalizeCalibration,\r\n  } = useAppStore()\r\n  \r\n  const [currentStep, setCurrentStep] = useState(event.currentStep)\r\n  const [isSaving, setIsSaving] = useState(false)\r\n\r\n  // Initialize form data when event is selected\r\n  useEffect(() => {\r\n    setSelectedEvent(event)\r\n    if (!calibrationFormData || calibrationFormData.eventId !== event.id) {\r\n      setCalibrationFormData({\r\n        eventId: event.id,\r\n        status: event.status,\r\n        resultado: event.result || '',\r\n        operador: '',\r\n        serviceOrder: '',\r\n        responsavelCalibracao: event.responsible,\r\n        preenchidoPor: '',\r\n        dataEmissao: new Date().toISOString().split('T')[0],\r\n        unidade: '',\r\n        baciaCampo: '',\r\n        localizacao: '',\r\n        referenciaMet: '',\r\n        tagMPFM: event.meterTag,\r\n        serialNumber: '',\r\n        fabricante: '',\r\n        modelo: '',\r\n        tamanho: '',\r\n        razaoBeta: '',\r\n        modoMedicao: '',\r\n        sistema: '',\r\n        versaoSoftwareMedidor: '',\r\n        versaoFPM207: '',\r\n        versaoFCS320: '',\r\n        versaoPVTsim: '',\r\n        naturezaAtividade: event.type,\r\n        idEventoDesvio: '',\r\n        inicioEstabilizacao: event.startDate,\r\n        inicioTotalizacao: '',\r\n        fimTotalizacao: '',\r\n        duracaoEfetiva: 0,\r\n        observacoesIniciais: '',\r\n        comentariosGerais: '',\r\n        pvtReportId: '',\r\n        dataAmostragem: '',\r\n        pontoAmostragem: '',\r\n        softwareModelagem: 'PVTsim',\r\n        versaoModelo: '',\r\n        statusAprovacao: 'Pendente',\r\n        dataAprovacao: '',\r\n        comentariosPVT: '',\r\n        densidadeOleo: 0,\r\n        densidadeGas: 0,\r\n        densidadeAgua: 0,\r\n        gor: 0,\r\n        bsw: 0,\r\n        fatorEncolhimento: 0,\r\n        composicao: [],\r\n        penelouxGas: 1.0,\r\n        penelouxOil: 1.0,\r\n        pvtLoadedFCS320: false,\r\n        pvtLoadedFPM207: false,\r\n        gammaRestarted: false,\r\n        pressureVerified: false,\r\n        temperatureVerified: false,\r\n        totalizadores: [],\r\n        kMin: 0.8,\r\n        kMax: 1.2,\r\n        limiteHC: 10,\r\n        limiteTotal: 7,\r\n        massas: {\r\n          oleo: { mpfm: 0, ref: 0 },\r\n          gas: { mpfm: 0, ref: 0 },\r\n          agua: { mpfm: 0, ref: 0 },\r\n        },\r\n        kFactors: {\r\n          kOil: 1.0,\r\n          kGas: 1.0,\r\n          kWater: 1.0,\r\n          kOilStatus: 'Dentro',\r\n          kGasStatus: 'Dentro',\r\n          kWaterStatus: 'Dentro',\r\n        },\r\n        balancoTopOil: 0,\r\n        balancoTopGas: 0,\r\n        balancoGasLift: 0,\r\n        balancoDesvio: 0,\r\n        monitoramentoPosData: [],\r\n        alarmes: [],\r\n      })\r\n    }\r\n  }, [event, setSelectedEvent, setCalibrationFormData, calibrationFormData])\r\n\r\n  const handleSave = async () => {\r\n    setIsSaving(true)\r\n    // Data is auto-saved via Zustand persist\r\n    setTimeout(() => {\r\n      setIsSaving(false)\r\n      alert('Dados salvos com sucesso!')\r\n    }, 500)\r\n  }\r\n\r\n  const handleNextStep = () => {\r\n    completeCalibrationStep(event.id, currentStep)\r\n    setCurrentStep(Math.min(7, currentStep + 1))\r\n  }\r\n\r\n  const handleFinalize = () => {\r\n    const result = confirm('Deseja aprovar ou reprovar a calibrao?\\n\\nOK = Aprovado\\nCancelar = Reprovado')\r\n    finalizeCalibration(event.id, result ? 'Aprovado' : 'Reprovado')\r\n    alert(`Calibrao ${result ? 'aprovada' : 'reprovada'} com sucesso!`)\r\n    onBack()\r\n  }\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 1:\r\n        return <Step01Registro event={event} />\r\n      case 2:\r\n        return <Step02PVT />\r\n      case 3:\r\n        return <Step03Totalizadores />\r\n      case 4:\r\n        return <Step04KFactors />\r\n      case 5:\r\n        return <Step05Balanco />\r\n      case 6:\r\n        return <Step06Monitoramento />\r\n      case 7:\r\n        return <Step07Alarmes />\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Button variant=\"ghost\" size=\"sm\" onClick={onBack} icon={ChevronLeft}>\r\n            Voltar\r\n          </Button>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-white\">{event.id}</h2>\r\n            <p className=\"text-xs text-zinc-500\">\r\n              {event.meterTag} - {event.meterName} | {event.type}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Badge variant=\"info\">{event.status}</Badge>\r\n          <Button \r\n            variant=\"secondary\" \r\n            size=\"sm\" \r\n            icon={Save} \r\n            onClick={handleSave}\r\n            disabled={isSaving}\r\n          >\r\n            {isSaving ? 'Salvando...' : 'Salvar'}\r\n          </Button>\r\n          <Button variant=\"secondary\" size=\"sm\" icon={FileText}>\r\n            Relatrio\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Step Navigator */}\r\n      <Card className=\"p-3\">\r\n        <StepIndicator\r\n          steps={STEPS}\r\n          currentStep={currentStep}\r\n          onStepClick={setCurrentStep}\r\n        />\r\n      </Card>\r\n\r\n      {/* Content */}\r\n      {renderStepContent()}\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between pt-4 border-t border-zinc-800\">\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={() => setCurrentStep(Math.max(1, currentStep - 1))}\r\n          disabled={currentStep === 1}\r\n          icon={ChevronLeft}\r\n        >\r\n          Anterior\r\n        </Button>\r\n        <div className=\"flex gap-2\">\r\n          {currentStep < 7 ? (\r\n            <Button onClick={handleNextStep}>\r\n              Prximo\r\n              <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n            </Button>\r\n          ) : (\r\n            <Button variant=\"success\" icon={Check} onClick={handleFinalize}>\r\n              Concluir Avaliao\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\nimport { CalibrationEventsList, CalibrationWorkflow } from '@/components/calibration'\r\nimport type { CalibrationEvent } from '@/types'\r\n\r\nexport function CalibrationPage() {\r\n  const [selectedEvent, setSelectedEvent] = useState<CalibrationEvent | null>(null)\r\n\r\n  if (selectedEvent) {\r\n    return (\r\n      <CalibrationWorkflow\r\n        event={selectedEvent}\r\n        onBack={() => setSelectedEvent(null)}\r\n      />\r\n    )\r\n  }\r\n\r\n  return <CalibrationEventsList onSelectEvent={setSelectedEvent} />\r\n}\r\n","import { CheckCircle2, FileCheck, Clock, AlertCircle, ChevronRight } from 'lucide-react'\r\nimport { Card, Badge, SectionHeader, ProgressBar } from '@/components/ui'\r\nimport { cn } from '@/utils'\r\n\r\ninterface ChecklistItem {\r\n  id: string\r\n  category: string\r\n  description: string\r\n  status: 'compliant' | 'pending' | 'overdue' | 'in-progress'\r\n  dueDate?: string\r\n  notes?: string\r\n}\r\n\r\nconst checklistData: ChecklistItem[] = [\r\n  {\r\n    id: '1',\r\n    category: 'RTMV',\r\n    description: 'Avaliao de desempenho no comissionamento',\r\n    status: 'compliant',\r\n    dueDate: '2025-12-01',\r\n    notes: 'Concludo - CAL-2025-001',\r\n  },\r\n  {\r\n    id: '2',\r\n    category: 'RTMV',\r\n    description: 'Avaliao peridica (intervalos 6-12 meses)',\r\n    status: 'in-progress',\r\n    dueDate: '2026-06-01',\r\n    notes: 'Prxima avaliao agendada',\r\n  },\r\n  {\r\n    id: '3',\r\n    category: 'RTMV',\r\n    description: 'Investigao por gatilho ANP (10% HC ou 7% total)',\r\n    status: 'pending',\r\n    notes: 'Aplicvel quando limite excedido',\r\n  },\r\n  {\r\n    id: '4',\r\n    category: 'RTMV',\r\n    description: 'Arquivo PVT atualizado e aprovado',\r\n    status: 'compliant',\r\n    dueDate: '2026-01-10',\r\n    notes: 'PVTsim v23.1.0',\r\n  },\r\n  {\r\n    id: '5',\r\n    category: 'RTMV',\r\n    description: 'Software do medidor atualizado',\r\n    status: 'compliant',\r\n    notes: 'FW-MPM-BAC-v1.12.3',\r\n  },\r\n  {\r\n    id: '6',\r\n    category: 'RTMV',\r\n    description: 'Relatrio de calibrao arquivado',\r\n    status: 'compliant',\r\n    notes: '3 relatrios gerados',\r\n  },\r\n  {\r\n    id: '7',\r\n    category: 'RTMV',\r\n    description: 'K-factors dentro do range (0.8-1.2)',\r\n    status: 'overdue',\r\n    notes: 'K-Gas fora do limite - investigar',\r\n  },\r\n  {\r\n    id: '8',\r\n    category: 'RTMV',\r\n    description: 'Monitoramento de balano dirio implementado',\r\n    status: 'compliant',\r\n    notes: 'Dashboard operacional',\r\n  },\r\n  {\r\n    id: '9',\r\n    category: 'Manuteno',\r\n    description: 'Verificao de integridade mecnica',\r\n    status: 'pending',\r\n    dueDate: '2026-03-15',\r\n  },\r\n  {\r\n    id: '10',\r\n    category: 'Manuteno',\r\n    description: 'Calibrao de sensores P/T',\r\n    status: 'in-progress',\r\n    dueDate: '2026-02-01',\r\n  },\r\n]\r\n\r\nconst categoryStats = [\r\n  {\r\n    name: 'RTMV',\r\n    total: 8,\r\n    compliant: 5,\r\n    pending: 1,\r\n    overdue: 1,\r\n    inProgress: 1,\r\n  },\r\n  {\r\n    name: 'Manuteno',\r\n    total: 2,\r\n    compliant: 0,\r\n    pending: 1,\r\n    overdue: 0,\r\n    inProgress: 1,\r\n  },\r\n]\r\n\r\nexport function ComplianceDashboard() {\r\n  const totalItems = checklistData.length\r\n  const compliantItems = checklistData.filter((c) => c.status === 'compliant').length\r\n  const pendingItems = checklistData.filter((c) => c.status === 'pending').length\r\n  const overdueItems = checklistData.filter((c) => c.status === 'overdue').length\r\n\r\n  const getStatusBadge = (status: ChecklistItem['status']) => {\r\n    switch (status) {\r\n      case 'compliant':\r\n        return <Badge variant=\"success\">Conforme</Badge>\r\n      case 'pending':\r\n        return <Badge variant=\"warning\">Pendente</Badge>\r\n      case 'overdue':\r\n        return <Badge variant=\"error\">Atrasado</Badge>\r\n      case 'in-progress':\r\n        return <Badge variant=\"info\">Em Andamento</Badge>\r\n    }\r\n  }\r\n\r\n  const getStatusIcon = (status: ChecklistItem['status']) => {\r\n    switch (status) {\r\n      case 'compliant':\r\n        return <CheckCircle2 className=\"w-4 h-4 text-emerald-400\" />\r\n      case 'pending':\r\n        return <Clock className=\"w-4 h-4 text-amber-400\" />\r\n      case 'overdue':\r\n        return <AlertCircle className=\"w-4 h-4 text-red-400\" />\r\n      case 'in-progress':\r\n        return <Clock className=\"w-4 h-4 text-blue-400\" />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* KPIs */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n        <Card className=\"p-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-zinc-700 flex items-center justify-center\">\r\n              <FileCheck className=\"w-5 h-5 text-zinc-300\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs text-zinc-500\">Total Requisitos</p>\r\n              <p className=\"text-2xl font-bold text-white\">{totalItems}</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card className=\"p-4 bg-emerald-500/10 border-emerald-500/20\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center\">\r\n              <CheckCircle2 className=\"w-5 h-5 text-emerald-400\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs text-zinc-500\">Conformes</p>\r\n              <p className=\"text-2xl font-bold text-emerald-400\">{compliantItems}</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card className=\"p-4 bg-amber-500/10 border-amber-500/20\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center\">\r\n              <Clock className=\"w-5 h-5 text-amber-400\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs text-zinc-500\">Pendentes</p>\r\n              <p className=\"text-2xl font-bold text-amber-400\">{pendingItems}</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card className=\"p-4 bg-red-500/10 border-red-500/20\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center\">\r\n              <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-xs text-zinc-500\">Atrasados</p>\r\n              <p className=\"text-2xl font-bold text-red-400\">{overdueItems}</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Progress por Categoria */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={FileCheck}\r\n          title=\"Conformidade por Categoria\"\r\n          color=\"blue\"\r\n        />\r\n        <div className=\"space-y-4\">\r\n          {categoryStats.map((cat) => (\r\n            <div key={cat.name} className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm text-zinc-300\">{cat.name}</span>\r\n                <span className=\"text-xs text-zinc-500\">\r\n                  {cat.compliant}/{cat.total} conformes\r\n                </span>\r\n              </div>\r\n              <ProgressBar\r\n                value={(cat.compliant / cat.total) * 100}\r\n                color={cat.overdue > 0 ? 'red' : cat.compliant === cat.total ? 'emerald' : 'amber'}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Checklist */}\r\n      <Card className=\"p-4\">\r\n        <SectionHeader\r\n          icon={CheckCircle2}\r\n          title=\"Checklist de Requisitos Regulatrios (RTMV)\"\r\n          color=\"emerald\"\r\n        />\r\n        <div className=\"space-y-2\">\r\n          {checklistData.map((item) => (\r\n            <div\r\n              key={item.id}\r\n              className={cn(\r\n                'flex items-center justify-between p-3 rounded-lg border transition cursor-pointer hover:bg-zinc-700/50',\r\n                item.status === 'overdue'\r\n                  ? 'bg-red-500/5 border-red-500/20'\r\n                  : item.status === 'compliant'\r\n                  ? 'bg-emerald-500/5 border-emerald-500/10'\r\n                  : 'bg-zinc-800/50 border-zinc-700'\r\n              )}\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                {getStatusIcon(item.status)}\r\n                <div>\r\n                  <div className=\"flex items-center gap-2 flex-wrap\">\r\n                    <span className=\"text-sm text-zinc-200\">{item.description}</span>\r\n                    <Badge variant=\"secondary\" size=\"sm\">\r\n                      {item.category}\r\n                    </Badge>\r\n                  </div>\r\n                  {item.notes && (\r\n                    <p className=\"text-xs text-zinc-500 mt-0.5\">{item.notes}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                {item.dueDate && (\r\n                  <span className=\"text-xs text-zinc-500\">{item.dueDate}</span>\r\n                )}\r\n                {getStatusBadge(item.status)}\r\n                <ChevronRight className=\"w-4 h-4 text-zinc-600\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","import { ComplianceDashboard } from '@/components/compliance'\r\n\r\nexport function CompliancePage() {\r\n  return <ComplianceDashboard />\r\n}\r\n","/**\r\n * Servio de Gesto de Desenquadramento - MPFM Monitor\r\n * Conforme Resoluo ANP n 44/2015 - Seo 10\r\n */\r\n\r\nimport type {\r\n  DesenquadramentoEvent,\r\n  DesenquadramentoStatus,\r\n  TipoRelatorioANP,\r\n  AmbienteEquipamento,\r\n  DiarioBordoEntry,\r\n  AcaoCAPA,\r\n  ChecklistItemANP,\r\n  CondicoesOperacionais,\r\n  DiagnosticoData,\r\n  ContingenciaData,\r\n} from '@/types'\r\n\r\n// Prazos conforme RANP 44/2015\r\nexport const PRAZOS_RANP44 = {\r\n  RELATORIO_PARCIAL_DIAS: 10,      // D+10\r\n  RELATORIO_FINAL_TOPSIDE: 30,     // D+30\r\n  RELATORIO_FINAL_SUBSEA: 60,      // D+60 (pode ser 90 ou 120)\r\n  REPARO_TOPSIDE_DIAS: 60,\r\n  REPARO_SUBSEA_DIAS: 120,\r\n  DIAS_TRIGGER_INVESTIGACAO: 10,   // 10 dias consecutivos\r\n} as const\r\n\r\n// Checklist padro ANP para relatrios\r\nconst CHECKLIST_PADRAO_ANP: Omit<ChecklistItemANP, 'id' | 'status' | 'campoPreenchido' | 'observacao'>[] = [\r\n  // Relatrio Parcial - 10.4.1\r\n  { itemRANP: '10.4.1.a', descricao: 'Identificao do Agente Autorizado', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.b', descricao: 'Bacia, campo e instalao', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.c', descricao: 'Identificao do sistema de medio', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.d', descricao: 'TAG e nome do equipamento', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.e', descricao: 'Responsvel tcnico', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.f', descricao: 'Condies operacionais (GVF, BSW, P, T, vazes)', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.g', descricao: 'Data de ocorrncia da falha', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.h', descricao: 'Data de deteco da falha', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.i', descricao: 'Data de emisso do relatrio', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.j', descricao: 'Descrio da falha ou irregularidade', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.k', descricao: 'Investigao realizada at o momento', obrigatorio: true, tipoRelatorio: ['Parcial'] },\r\n  { itemRANP: '10.4.1.l', descricao: 'Plano de contingncia acionado', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  { itemRANP: '10.4.1.m', descricao: 'Medidas mitigadoras', obrigatorio: true, tipoRelatorio: ['Parcial', 'Final'] },\r\n  \r\n  // Relatrio Final - 10.4.2 (itens adicionais)\r\n  { itemRANP: '10.4.2.j', descricao: 'Investigao completa', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.k', descricao: 'Cronologia e metodologia da investigao', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.l', descricao: 'Causa provvel da falha', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.m', descricao: 'Fato determinante do evento', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.n', descricao: 'Plano de contingncia acionado e eficcia', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.o', descricao: 'Recomendaes de aes corretivas/preventivas', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.p', descricao: 'Cronograma de execuo das recomendaes', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.q', descricao: 'Prazo previsto para reparo', obrigatorio: true, tipoRelatorio: ['Final'] },\r\n  { itemRANP: '10.4.2.r', descricao: 'Justificativa se prazo > 60/120 dias', obrigatorio: false, tipoRelatorio: ['Final'] },\r\n]\r\n\r\nconst STORAGE_KEY = 'mpfm_desenquadramento_events'\r\n\r\nclass DesenquadramentoService {\r\n  private events: DesenquadramentoEvent[] = []\r\n\r\n  constructor() {\r\n    this.loadFromStorage()\r\n  }\r\n\r\n  private loadFromStorage(): void {\r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY)\r\n      if (stored) {\r\n        this.events = JSON.parse(stored)\r\n      }\r\n    } catch (error) {\r\n      console.error('[Desenquadramento] Erro ao carregar eventos:', error)\r\n    }\r\n  }\r\n\r\n  private saveToStorage(): void {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.events))\r\n    } catch (error) {\r\n      console.error('[Desenquadramento] Erro ao salvar eventos:', error)\r\n    }\r\n  }\r\n\r\n  private generateId(): string {\r\n    const year = new Date().getFullYear()\r\n    const sequence = this.events.filter(e => \r\n      e.id.startsWith(`DES-${year}`)\r\n    ).length + 1\r\n    return `DES-${year}-${String(sequence).padStart(4, '0')}`\r\n  }\r\n\r\n  private generateEntryId(): string {\r\n    return `ENT-${Date.now()}-${Math.random().toString(36).substring(2, 7)}`\r\n  }\r\n\r\n  /**\r\n   * Calcula os prazos com base no ambiente e data de ocorrncia\r\n   */\r\n  private calcularPrazos(dataOcorrencia: string, ambiente: AmbienteEquipamento): {\r\n    prazoRelatorioParcial: string\r\n    prazoRelatorioFinal: string\r\n    prazoReparo: string\r\n  } {\r\n    const dataBase = new Date(dataOcorrencia)\r\n    \r\n    const prazoRelatorioParcial = new Date(dataBase)\r\n    prazoRelatorioParcial.setDate(prazoRelatorioParcial.getDate() + PRAZOS_RANP44.RELATORIO_PARCIAL_DIAS)\r\n\r\n    const diasFinal = ambiente === 'TOPSIDE' \r\n      ? PRAZOS_RANP44.RELATORIO_FINAL_TOPSIDE \r\n      : PRAZOS_RANP44.RELATORIO_FINAL_SUBSEA\r\n\r\n    const prazoRelatorioFinal = new Date(dataBase)\r\n    prazoRelatorioFinal.setDate(prazoRelatorioFinal.getDate() + diasFinal)\r\n\r\n    const diasReparo = ambiente === 'TOPSIDE'\r\n      ? PRAZOS_RANP44.REPARO_TOPSIDE_DIAS\r\n      : PRAZOS_RANP44.REPARO_SUBSEA_DIAS\r\n\r\n    const prazoReparo = new Date(dataBase)\r\n    prazoReparo.setDate(prazoReparo.getDate() + diasReparo)\r\n\r\n    return {\r\n      prazoRelatorioParcial: prazoRelatorioParcial.toISOString().split('T')[0],\r\n      prazoRelatorioFinal: prazoRelatorioFinal.toISOString().split('T')[0],\r\n      prazoReparo: prazoReparo.toISOString().split('T')[0],\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gera o checklist padro ANP para um evento\r\n   */\r\n  private gerarChecklistANP(tipoRelatorio: TipoRelatorioANP): ChecklistItemANP[] {\r\n    return CHECKLIST_PADRAO_ANP\r\n      .filter(item => item.tipoRelatorio.includes(tipoRelatorio))\r\n      .map((item, index) => ({\r\n        ...item,\r\n        id: `CHK-${index + 1}`,\r\n        status: 'Pendente' as const,\r\n      }))\r\n  }\r\n\r\n  /**\r\n   * Cria um novo evento de desenquadramento\r\n   */\r\n  criarEvento(params: {\r\n    equipamentoId: string\r\n    equipamentoTag: string\r\n    equipamentoNome: string\r\n    ambiente: AmbienteEquipamento\r\n    dataOcorrencia: string\r\n    dataDeteccao: string\r\n    responsavelTecnico: string\r\n    condicoesOperacionais: CondicoesOperacionais\r\n    diasConsecutivosDesvio: number\r\n    desvioHC: number\r\n    desvioTotal: number\r\n    createdBy: string\r\n  }): DesenquadramentoEvent {\r\n    const prazos = this.calcularPrazos(params.dataOcorrencia, params.ambiente)\r\n    const now = new Date().toISOString()\r\n\r\n    const evento: DesenquadramentoEvent = {\r\n      id: this.generateId(),\r\n      status: 'Aberto',\r\n      tipoRelatorio: 'Parcial',\r\n      ambiente: params.ambiente,\r\n      \r\n      equipamentoId: params.equipamentoId,\r\n      equipamentoTag: params.equipamentoTag,\r\n      equipamentoNome: params.equipamentoNome,\r\n      \r\n      dataOcorrencia: params.dataOcorrencia,\r\n      dataDeteccao: params.dataDeteccao,\r\n      dataRelatorio: now.split('T')[0],\r\n      ...prazos,\r\n      \r\n      responsavelTecnico: params.responsavelTecnico,\r\n      \r\n      condicoesOperacionais: params.condicoesOperacionais,\r\n      diarioBordo: [],\r\n      planosAcao: [],\r\n      anexos: [],\r\n      checklistANP: this.gerarChecklistANP('Parcial'),\r\n      \r\n      diasConsecutivosDesvio: params.diasConsecutivosDesvio,\r\n      desvioHC: params.desvioHC,\r\n      desvioTotal: params.desvioTotal,\r\n      \r\n      createdAt: now,\r\n      updatedAt: now,\r\n      createdBy: params.createdBy,\r\n    }\r\n\r\n    // Adicionar entrada inicial no dirio de bordo\r\n    const entradaInicial: DiarioBordoEntry = {\r\n      id: this.generateEntryId(),\r\n      eventId: evento.id,\r\n      dataHora: now,\r\n      dPlus: 0,\r\n      etapa: 'Abertura do Evento',\r\n      detalhe: `Evento de desenquadramento aberto automaticamente aps ${params.diasConsecutivosDesvio} dias consecutivos de desvio. Desvio HC: ${params.desvioHC.toFixed(2)}%, Desvio Total: ${params.desvioTotal.toFixed(2)}%`,\r\n      responsavel: params.createdBy,\r\n      area: 'Medio',\r\n      status: 'Concludo',\r\n      itemRANP: '10.4.1.g',\r\n    }\r\n    evento.diarioBordo.push(entradaInicial)\r\n\r\n    this.events.push(evento)\r\n    this.saveToStorage()\r\n\r\n    console.log(`[Desenquadramento] Evento criado: ${evento.id}`)\r\n    return evento\r\n  }\r\n\r\n  /**\r\n   * Adiciona entrada no dirio de bordo\r\n   */\r\n  adicionarEntradaDiario(\r\n    eventId: string,\r\n    entrada: Omit<DiarioBordoEntry, 'id' | 'eventId' | 'dataHora'>\r\n  ): DiarioBordoEntry | null {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return null\r\n\r\n    const novaEntrada: DiarioBordoEntry = {\r\n      id: this.generateEntryId(),\r\n      eventId,\r\n      dataHora: new Date().toISOString(),\r\n      ...entrada,\r\n    }\r\n\r\n    evento.diarioBordo.push(novaEntrada)\r\n    evento.updatedAt = new Date().toISOString()\r\n    this.saveToStorage()\r\n\r\n    console.log(`[Desenquadramento] Entrada adicionada ao dirio: ${novaEntrada.id}`)\r\n    return novaEntrada\r\n  }\r\n\r\n  /**\r\n   * Atualiza o diagnstico do evento\r\n   */\r\n  atualizarDiagnostico(eventId: string, diagnostico: DiagnosticoData): boolean {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return false\r\n\r\n    evento.diagnostico = diagnostico\r\n    evento.updatedAt = new Date().toISOString()\r\n    \r\n    // Avanar status se apropriado\r\n    if (evento.status === 'Aberto' || evento.status === 'Em Investigao') {\r\n      evento.status = 'Em Investigao'\r\n    }\r\n\r\n    this.saveToStorage()\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Atualiza a contingncia do evento\r\n   */\r\n  atualizarContingencia(eventId: string, contingencia: ContingenciaData): boolean {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return false\r\n\r\n    evento.contingencia = contingencia\r\n    evento.updatedAt = new Date().toISOString()\r\n    this.saveToStorage()\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Adiciona ao CAPA (corretiva/preventiva)\r\n   */\r\n  adicionarAcaoCAPA(\r\n    eventId: string,\r\n    acao: Omit<AcaoCAPA, 'id' | 'eventId'>\r\n  ): AcaoCAPA | null {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return null\r\n\r\n    const novaAcao: AcaoCAPA = {\r\n      id: `CAPA-${Date.now()}`,\r\n      eventId,\r\n      ...acao,\r\n    }\r\n\r\n    evento.planosAcao.push(novaAcao)\r\n    evento.updatedAt = new Date().toISOString()\r\n\r\n    // Avanar status para Plano de Ao\r\n    if (evento.status === 'Em Investigao') {\r\n      evento.status = 'Plano de Ao'\r\n    }\r\n\r\n    this.saveToStorage()\r\n    return novaAcao\r\n  }\r\n\r\n  /**\r\n   * Atualiza status de uma ao CAPA\r\n   */\r\n  atualizarAcaoCAPA(\r\n    eventId: string,\r\n    acaoId: string,\r\n    updates: Partial<AcaoCAPA>\r\n  ): boolean {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return false\r\n\r\n    const acao = evento.planosAcao.find(a => a.id === acaoId)\r\n    if (!acao) return false\r\n\r\n    Object.assign(acao, updates)\r\n    evento.updatedAt = new Date().toISOString()\r\n    this.saveToStorage()\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Atualiza status de item do checklist ANP\r\n   */\r\n  atualizarChecklistItem(\r\n    eventId: string,\r\n    itemId: string,\r\n    status: ChecklistItemANP['status'],\r\n    observacao?: string\r\n  ): boolean {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return false\r\n\r\n    const item = evento.checklistANP.find(i => i.id === itemId)\r\n    if (!item) return false\r\n\r\n    item.status = status\r\n    if (observacao) item.observacao = observacao\r\n    evento.updatedAt = new Date().toISOString()\r\n    this.saveToStorage()\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Verifica se o evento est pronto para envio  ANP\r\n   */\r\n  verificarProntidaoEnvio(eventId: string): {\r\n    pronto: boolean\r\n    itensOK: number\r\n    itensPendentes: number\r\n    itensObrigatoriosPendentes: string[]\r\n  } {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) {\r\n      return { pronto: false, itensOK: 0, itensPendentes: 0, itensObrigatoriosPendentes: [] }\r\n    }\r\n\r\n    const itensOK = evento.checklistANP.filter(i => i.status === 'OK').length\r\n    const itensPendentes = evento.checklistANP.filter(i => i.status === 'Pendente').length\r\n    const itensObrigatoriosPendentes = evento.checklistANP\r\n      .filter(i => i.obrigatorio && i.status === 'Pendente')\r\n      .map(i => i.itemRANP)\r\n\r\n    return {\r\n      pronto: itensObrigatoriosPendentes.length === 0,\r\n      itensOK,\r\n      itensPendentes,\r\n      itensObrigatoriosPendentes,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Atualiza o status do evento\r\n   */\r\n  atualizarStatus(eventId: string, novoStatus: DesenquadramentoStatus): boolean {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return false\r\n\r\n    const statusAnterior = evento.status\r\n    evento.status = novoStatus\r\n    evento.updatedAt = new Date().toISOString()\r\n\r\n    // Adicionar entrada no dirio de bordo\r\n    this.adicionarEntradaDiario(eventId, {\r\n      dPlus: this.calcularDPlus(evento.dataOcorrencia),\r\n      etapa: 'Alterao de Status',\r\n      detalhe: `Status alterado de \"${statusAnterior}\" para \"${novoStatus}\"`,\r\n      responsavel: 'Sistema',\r\n      area: 'Medio',\r\n      status: 'Concludo',\r\n    })\r\n\r\n    this.saveToStorage()\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Promove para relatrio final\r\n   */\r\n  promoverParaFinal(eventId: string): boolean {\r\n    const evento = this.events.find(e => e.id === eventId)\r\n    if (!evento) return false\r\n\r\n    evento.tipoRelatorio = 'Final'\r\n    evento.checklistANP = this.gerarChecklistANP('Final')\r\n    evento.updatedAt = new Date().toISOString()\r\n\r\n    this.adicionarEntradaDiario(eventId, {\r\n      dPlus: this.calcularDPlus(evento.dataOcorrencia),\r\n      etapa: 'Promoo para Relatrio Final',\r\n      detalhe: 'Evento promovido de Relatrio Parcial para Relatrio Final',\r\n      responsavel: 'Sistema',\r\n      area: 'Medio',\r\n      status: 'Concludo',\r\n      itemRANP: '10.4.2',\r\n    })\r\n\r\n    this.saveToStorage()\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Calcula D+ (dias desde a ocorrncia)\r\n   */\r\n  calcularDPlus(dataOcorrencia: string): number {\r\n    const ocorrencia = new Date(dataOcorrencia)\r\n    const hoje = new Date()\r\n    const diffMs = hoje.getTime() - ocorrencia.getTime()\r\n    return Math.floor(diffMs / (1000 * 60 * 60 * 24))\r\n  }\r\n\r\n  /**\r\n   * Obtm todos os eventos\r\n   */\r\n  getAll(): DesenquadramentoEvent[] {\r\n    return [...this.events]\r\n  }\r\n\r\n  /**\r\n   * Obtm evento por ID\r\n   */\r\n  getById(id: string): DesenquadramentoEvent | undefined {\r\n    return this.events.find(e => e.id === id)\r\n  }\r\n\r\n  /**\r\n   * Obtm eventos ativos (no concludos/enviados)\r\n   */\r\n  getAtivos(): DesenquadramentoEvent[] {\r\n    return this.events.filter(e => \r\n      e.status !== 'Concludo' && e.status !== 'Enviado ANP'\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Obtm eventos com prazo prximo de vencer\r\n   */\r\n  getComPrazoProximo(diasAntecedencia: number = 3): DesenquadramentoEvent[] {\r\n    const hoje = new Date()\r\n    \r\n    return this.events.filter(e => {\r\n      if (e.status === 'Concludo' || e.status === 'Enviado ANP') return false\r\n\r\n      const prazo = e.tipoRelatorio === 'Parcial' \r\n        ? new Date(e.prazoRelatorioParcial)\r\n        : new Date(e.prazoRelatorioFinal)\r\n\r\n      const diffDias = Math.ceil((prazo.getTime() - hoje.getTime()) / (1000 * 60 * 60 * 24))\r\n      return diffDias <= diasAntecedencia && diffDias >= 0\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Obtm eventos vencidos\r\n   */\r\n  getVencidos(): DesenquadramentoEvent[] {\r\n    const hoje = new Date()\r\n    \r\n    return this.events.filter(e => {\r\n      if (e.status === 'Concludo' || e.status === 'Enviado ANP') return false\r\n\r\n      const prazo = e.tipoRelatorio === 'Parcial'\r\n        ? new Date(e.prazoRelatorioParcial)\r\n        : new Date(e.prazoRelatorioFinal)\r\n\r\n      return prazo < hoje\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Obtm estatsticas\r\n   */\r\n  getEstatisticas(): {\r\n    total: number\r\n    abertos: number\r\n    emInvestigacao: number\r\n    planoAcao: number\r\n    concluidos: number\r\n    vencidos: number\r\n    proximos3Dias: number\r\n  } {\r\n    const vencidos = this.getVencidos().length\r\n    const proximos = this.getComPrazoProximo(3).length\r\n\r\n    return {\r\n      total: this.events.length,\r\n      abertos: this.events.filter(e => e.status === 'Aberto').length,\r\n      emInvestigacao: this.events.filter(e => e.status === 'Em Investigao').length,\r\n      planoAcao: this.events.filter(e => e.status === 'Plano de Ao').length,\r\n      concluidos: this.events.filter(e => e.status === 'Concludo' || e.status === 'Enviado ANP').length,\r\n      vencidos,\r\n      proximos3Dias: proximos,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Limpa dados (desenvolvimento)\r\n   */\r\n  clearAll(): void {\r\n    if (import.meta.env.PROD) return\r\n    this.events = []\r\n    this.saveToStorage()\r\n  }\r\n}\r\n\r\n// Singleton\r\nexport const desenquadramentoService = new DesenquadramentoService()\r\n\r\nexport default desenquadramentoService\r\n","/**\r\n * Pgina de Gesto de Desenquadramento - MPFM Monitor\r\n * Conforme Resoluo ANP n 44/2015 - Seo 10\r\n */\r\n\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport {\r\n  AlertTriangle,\r\n  FileText,\r\n  Clock,\r\n  CheckCircle,\r\n  XCircle,\r\n  Plus,\r\n  Filter,\r\n  ChevronRight,\r\n  Calendar,\r\n  User,\r\n  Activity,\r\n  ClipboardList,\r\n  Send,\r\n} from 'lucide-react'\r\nimport { Button, Badge, Card, Input, Select, Modal, Tabs, KPICard } from '@/components/ui'\r\nimport type { BadgeVariant } from '@/components/ui/Badge'\r\nimport { desenquadramentoService } from '@/services/desenquadramento'\r\nimport type { DesenquadramentoEvent, DesenquadramentoStatus } from '@/types'\r\nimport { cn } from '@/utils'\r\n\r\nexport function Desenquadramento() {\r\n  const [events, setEvents] = useState<DesenquadramentoEvent[]>([])\r\n  const [selectedEvent, setSelectedEvent] = useState<DesenquadramentoEvent | null>(null)\r\n  const [showNewEventModal, setShowNewEventModal] = useState(false)\r\n  const [filterStatus, setFilterStatus] = useState<DesenquadramentoStatus | 'all'>('all')\r\n  const [activeTab, setActiveTab] = useState('lista')\r\n\r\n  useEffect(() => {\r\n    loadEvents()\r\n  }, [])\r\n\r\n  const loadEvents = () => {\r\n    setEvents(desenquadramentoService.getAll())\r\n  }\r\n\r\n  const stats = useMemo(() => desenquadramentoService.getEstatisticas(), [events])\r\n  const eventosVencidos = useMemo(() => desenquadramentoService.getVencidos(), [events])\r\n  const eventosProximos = useMemo(() => desenquadramentoService.getComPrazoProximo(3), [events])\r\n\r\n  const filteredEvents = useMemo(() => {\r\n    if (filterStatus === 'all') return events\r\n    return events.filter(e => e.status === filterStatus)\r\n  }, [events, filterStatus])\r\n\r\n  const getStatusConfig = (status: DesenquadramentoStatus) => {\r\n    const configs: Record<DesenquadramentoStatus, { color: string; icon: typeof AlertTriangle; bgColor: string }> = {\r\n      'Aberto': { color: 'text-red-500', icon: XCircle, bgColor: 'bg-red-50' },\r\n      'Em Investigao': { color: 'text-yellow-500', icon: Activity, bgColor: 'bg-yellow-50' },\r\n      'Plano de Ao': { color: 'text-blue-500', icon: ClipboardList, bgColor: 'bg-blue-50' },\r\n      'Aguardando Validao': { color: 'text-purple-500', icon: Clock, bgColor: 'bg-purple-50' },\r\n      'Concludo': { color: 'text-green-500', icon: CheckCircle, bgColor: 'bg-green-50' },\r\n      'Enviado ANP': { color: 'text-emerald-500', icon: Send, bgColor: 'bg-emerald-50' },\r\n    }\r\n    return configs[status]\r\n  }\r\n\r\n  const calcularDiasRestantes = (prazo: string) => {\r\n    const hoje = new Date()\r\n    const dataPrazo = new Date(prazo)\r\n    return Math.ceil((dataPrazo.getTime() - hoje.getTime()) / (1000 * 60 * 60 * 24))\r\n  }\r\n\r\n  const formatDate = (date: string) => {\r\n    return new Date(date).toLocaleDateString('pt-BR')\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n            <AlertTriangle className=\"w-7 h-7 text-orange-500\" />\r\n            Gesto de Desenquadramento\r\n          </h1>\r\n          <p className=\"text-zinc-400 mt-1\">\r\n            Conforme Resoluo ANP n 44/2015 - Seo 10\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => setShowNewEventModal(true)}>\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          Novo Evento\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Alertas de Prazo */}\r\n      {(eventosVencidos.length > 0 || eventosProximos.length > 0) && (\r\n        <div className=\"space-y-2\">\r\n          {eventosVencidos.length > 0 && (\r\n            <div className=\"bg-red-500/20 border border-red-500/30 rounded-lg p-4 flex items-center gap-3\">\r\n              <XCircle className=\"w-6 h-6 text-red-400 flex-shrink-0\" />\r\n              <div>\r\n                <p className=\"text-red-400 font-medium\">\r\n                  {eventosVencidos.length} evento(s) com prazo vencido!\r\n                </p>\r\n                <p className=\"text-red-300/80 text-sm\">\r\n                  {eventosVencidos.map(e => e.id).join(', ')}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {eventosProximos.length > 0 && (\r\n            <div className=\"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 flex items-center gap-3\">\r\n              <Clock className=\"w-6 h-6 text-yellow-400 flex-shrink-0\" />\r\n              <div>\r\n                <p className=\"text-yellow-400 font-medium\">\r\n                  {eventosProximos.length} evento(s) com prazo nos prximos 3 dias\r\n                </p>\r\n                <p className=\"text-yellow-300/80 text-sm\">\r\n                  {eventosProximos.map(e => `${e.id} (${calcularDiasRestantes(\r\n                    e.tipoRelatorio === 'Parcial' ? e.prazoRelatorioParcial : e.prazoRelatorioFinal\r\n                  )}d)`).join(', ')}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* KPIs */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\r\n        <KPICard\r\n          title=\"Total Eventos\"\r\n          value={stats.total}\r\n          icon={FileText}\r\n          color=\"blue\"\r\n        />\r\n        <KPICard\r\n          title=\"Abertos\"\r\n          value={stats.abertos}\r\n          icon={XCircle}\r\n          color={stats.abertos > 0 ? 'red' : 'blue'}\r\n        />\r\n        <KPICard\r\n          title=\"Em Investigao\"\r\n          value={stats.emInvestigacao}\r\n          icon={Activity}\r\n          color={stats.emInvestigacao > 0 ? 'amber' : 'blue'}\r\n        />\r\n        <KPICard\r\n          title=\"Plano de Ao\"\r\n          value={stats.planoAcao}\r\n          icon={ClipboardList}\r\n          color=\"purple\"\r\n        />\r\n        <KPICard\r\n          title=\"Concludos\"\r\n          value={stats.concluidos}\r\n          icon={CheckCircle}\r\n          color=\"emerald\"\r\n        />\r\n        <KPICard\r\n          title=\"Vencidos\"\r\n          value={stats.vencidos}\r\n          icon={Clock}\r\n          color={stats.vencidos > 0 ? 'red' : 'blue'}\r\n        />\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <Tabs\r\n        activeTab={activeTab}\r\n        onChange={setActiveTab}\r\n        tabs={[\r\n          { id: 'lista', label: 'Lista de Eventos', icon: FileText },\r\n          { id: 'timeline', label: 'Timeline', icon: Clock },\r\n          { id: 'relatorios', label: 'Relatrios ANP', icon: Send },\r\n        ]}\r\n      />\r\n\r\n      {/* Filtros */}\r\n      {activeTab === 'lista' && (\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Filter className=\"w-4 h-4 text-zinc-400\" />\r\n            <label htmlFor=\"status-filter\" className=\"sr-only\">Filtrar por status</label>\r\n            <Select\r\n              id=\"status-filter\"\r\n              value={filterStatus}\r\n              onChange={(e) => setFilterStatus(e.target.value as DesenquadramentoStatus | 'all')}\r\n              options={[\r\n                { value: 'all', label: 'Todos os Status' },\r\n                { value: 'Aberto', label: 'Aberto' },\r\n                { value: 'Em Investigao', label: 'Em Investigao' },\r\n                { value: 'Plano de Ao', label: 'Plano de Ao' },\r\n                { value: 'Aguardando Validao', label: 'Aguardando Validao' },\r\n                { value: 'Concludo', label: 'Concludo' },\r\n                { value: 'Enviado ANP', label: 'Enviado ANP' },\r\n              ]}\r\n            />\r\n          </div>\r\n          <span className=\"text-zinc-500 text-sm\">\r\n            {filteredEvents.length} evento(s)\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Lista de Eventos */}\r\n      {activeTab === 'lista' && (\r\n        <div className=\"space-y-4\">\r\n          {filteredEvents.length === 0 ? (\r\n            <Card className=\"p-12 text-center\">\r\n              <FileText className=\"w-16 h-16 text-zinc-600 mx-auto mb-4\" />\r\n              <p className=\"text-zinc-400 text-lg\">Nenhum evento de desenquadramento registrado</p>\r\n              <p className=\"text-zinc-500 text-sm mt-2\">\r\n                Eventos so criados automaticamente quando K-Factors ficam fora do limite por 10 dias consecutivos\r\n              </p>\r\n            </Card>\r\n          ) : (\r\n            filteredEvents.map((evento) => {\r\n              const statusConfig = getStatusConfig(evento.status)\r\n              const StatusIcon = statusConfig.icon\r\n              const diasRestantes = calcularDiasRestantes(\r\n                evento.tipoRelatorio === 'Parcial' \r\n                  ? evento.prazoRelatorioParcial \r\n                  : evento.prazoRelatorioFinal\r\n              )\r\n              const isVencido = diasRestantes < 0\r\n              const dPlus = desenquadramentoService.calcularDPlus(evento.dataOcorrencia)\r\n\r\n              return (\r\n                <div\r\n                  key={evento.id}\r\n                  className=\"cursor-pointer\"\r\n                  onClick={() => setSelectedEvent(evento)}\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  onKeyDown={(e) => e.key === 'Enter' && setSelectedEvent(evento)}\r\n                >\r\n                  <Card\r\n                    className={cn(\r\n                      'p-4 hover:border-blue-500/50 transition-colors',\r\n                      isVencido && 'border-red-500/50'\r\n                    )}\r\n                  >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <div className={cn('p-3 rounded-lg', statusConfig.bgColor)}>\r\n                        <StatusIcon className={cn('w-6 h-6', statusConfig.color)} />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <h3 className=\"font-semibold text-white\">{evento.id}</h3>\r\n                          <Badge variant={evento.tipoRelatorio === 'Parcial' ? 'warning' : 'info'}>\r\n                            Relatrio {evento.tipoRelatorio}\r\n                          </Badge>\r\n                          <Badge variant={evento.ambiente === 'TOPSIDE' ? 'TOPSIDE' : 'SUBSEA'}>\r\n                            {evento.ambiente}\r\n                          </Badge>\r\n                        </div>\r\n\r\n                        <p className=\"text-zinc-400 mt-1\">\r\n                          {evento.equipamentoTag} - {evento.equipamentoNome}\r\n                        </p>\r\n\r\n                        <div className=\"flex items-center gap-4 mt-2 text-sm text-zinc-500\">\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <Calendar className=\"w-4 h-4\" />\r\n                            Ocorrncia: {formatDate(evento.dataOcorrencia)}\r\n                          </span>\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <Clock className=\"w-4 h-4\" />\r\n                            D+{dPlus}\r\n                          </span>\r\n                          <span className=\"flex items-center gap-1\">\r\n                            <User className=\"w-4 h-4\" />\r\n                            {evento.responsavelTecnico}\r\n                          </span>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-4 mt-2\">\r\n                          <span className={cn(\r\n                            'text-sm font-medium',\r\n                            isVencido ? 'text-red-400' : diasRestantes <= 3 ? 'text-yellow-400' : 'text-zinc-400'\r\n                          )}>\r\n                            {isVencido \r\n                              ? `Vencido h ${Math.abs(diasRestantes)} dia(s)`\r\n                              : `${diasRestantes} dia(s) restante(s)`\r\n                            }\r\n                          </span>\r\n                          <span className=\"text-sm text-zinc-500\">\r\n                            Desvio HC: {evento.desvioHC.toFixed(1)}%\r\n                          </span>\r\n                          <span className=\"text-sm text-zinc-500\">\r\n                            {evento.diarioBordo.length} entrada(s) no dirio\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Badge variant={evento.status as BadgeVariant}>\r\n                        {evento.status}\r\n                      </Badge>\r\n                      <ChevronRight className=\"w-5 h-5 text-zinc-500\" />\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n                </div>\r\n              )\r\n            })\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Timeline (placeholder) */}\r\n      {activeTab === 'timeline' && (\r\n        <Card className=\"p-8 text-center\">\r\n          <Clock className=\"w-16 h-16 text-zinc-600 mx-auto mb-4\" />\r\n          <p className=\"text-zinc-400 text-lg\">Timeline de Eventos</p>\r\n          <p className=\"text-zinc-500 text-sm mt-2\">\r\n            Visualizao cronolgica dos eventos e marcos D+10, D+30\r\n          </p>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Relatrios ANP (placeholder) */}\r\n      {activeTab === 'relatorios' && (\r\n        <Card className=\"p-8 text-center\">\r\n          <Send className=\"w-16 h-16 text-zinc-600 mx-auto mb-4\" />\r\n          <p className=\"text-zinc-400 text-lg\">Relatrios para ANP</p>\r\n          <p className=\"text-zinc-500 text-sm mt-2\">\r\n            Gerao e controle de relatrios parciais e finais\r\n          </p>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Modal de Detalhes do Evento */}\r\n      {selectedEvent && (\r\n        <EventDetailModal\r\n          event={selectedEvent}\r\n          onClose={() => setSelectedEvent(null)}\r\n          onUpdate={loadEvents}\r\n        />\r\n      )}\r\n\r\n      {/* Modal de Novo Evento */}\r\n      {showNewEventModal && (\r\n        <NewEventModal\r\n          onClose={() => setShowNewEventModal(false)}\r\n          onCreate={(evento) => {\r\n            loadEvents()\r\n            setSelectedEvent(evento)\r\n            setShowNewEventModal(false)\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// Modal de Detalhes do Evento\r\nfunction EventDetailModal({\r\n  event,\r\n  onClose,\r\n  onUpdate,\r\n}: {\r\n  event: DesenquadramentoEvent\r\n  onClose: () => void\r\n  onUpdate: () => void\r\n}) {\r\n  const [activeTab, setActiveTab] = useState('geral')\r\n  const prontidao = desenquadramentoService.verificarProntidaoEnvio(event.id)\r\n  const dPlus = desenquadramentoService.calcularDPlus(event.dataOcorrencia)\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={true}\r\n      onClose={onClose}\r\n      title={`Evento ${event.id}`}\r\n      size=\"xl\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Header do Evento */}\r\n        <div className=\"flex items-center justify-between pb-4 border-b border-zinc-700\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Badge variant={event.status as BadgeVariant}>{event.status}</Badge>\r\n            <Badge variant={event.tipoRelatorio === 'Parcial' ? 'warning' : 'info'}>\r\n              Relatrio {event.tipoRelatorio}\r\n            </Badge>\r\n            <Badge variant={event.ambiente === 'TOPSIDE' ? 'TOPSIDE' : 'SUBSEA'}>\r\n              {event.ambiente}\r\n            </Badge>\r\n            <span className=\"text-zinc-400\">D+{dPlus}</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            {prontidao.pronto ? (\r\n              <Badge variant=\"success\">Pronto para Envio</Badge>\r\n            ) : (\r\n              <Badge variant=\"warning\">{prontidao.itensPendentes} itens pendentes</Badge>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <Tabs\r\n          activeTab={activeTab}\r\n          onChange={setActiveTab}\r\n          tabs={[\r\n            { id: 'geral', label: 'Informaes Gerais' },\r\n            { id: 'diario', label: `Dirio de Bordo (${event.diarioBordo.length})` },\r\n            { id: 'diagnostico', label: 'Diagnstico' },\r\n            { id: 'acoes', label: `Aes CAPA (${event.planosAcao.length})` },\r\n            { id: 'checklist', label: 'Checklist ANP' },\r\n          ]}\r\n        />\r\n\r\n        {/* Contedo das Tabs */}\r\n        {activeTab === 'geral' && (\r\n          <div className=\"grid grid-cols-2 gap-6\">\r\n            <div className=\"space-y-4\">\r\n              <h4 className=\"font-medium text-white\">Identificao</h4>\r\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                <span className=\"text-zinc-500\">Equipamento:</span>\r\n                <span className=\"text-white\">{event.equipamentoTag}</span>\r\n                <span className=\"text-zinc-500\">Nome:</span>\r\n                <span className=\"text-white\">{event.equipamentoNome}</span>\r\n                <span className=\"text-zinc-500\">Responsvel:</span>\r\n                <span className=\"text-white\">{event.responsavelTecnico}</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"space-y-4\">\r\n              <h4 className=\"font-medium text-white\">Datas</h4>\r\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                <span className=\"text-zinc-500\">Ocorrncia:</span>\r\n                <span className=\"text-white\">{new Date(event.dataOcorrencia).toLocaleDateString('pt-BR')}</span>\r\n                <span className=\"text-zinc-500\">Deteco:</span>\r\n                <span className=\"text-white\">{new Date(event.dataDeteccao).toLocaleDateString('pt-BR')}</span>\r\n                <span className=\"text-zinc-500\">Prazo Parcial:</span>\r\n                <span className=\"text-white\">{new Date(event.prazoRelatorioParcial).toLocaleDateString('pt-BR')}</span>\r\n                <span className=\"text-zinc-500\">Prazo Final:</span>\r\n                <span className=\"text-white\">{new Date(event.prazoRelatorioFinal).toLocaleDateString('pt-BR')}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-span-2 space-y-4\">\r\n              <h4 className=\"font-medium text-white\">Condies Operacionais</h4>\r\n              <div className=\"grid grid-cols-5 gap-4\">\r\n                <div className=\"bg-zinc-800 p-3 rounded-lg text-center\">\r\n                  <p className=\"text-zinc-500 text-xs\">GVF</p>\r\n                  <p className=\"text-white font-mono\">{event.condicoesOperacionais.gvf}%</p>\r\n                </div>\r\n                <div className=\"bg-zinc-800 p-3 rounded-lg text-center\">\r\n                  <p className=\"text-zinc-500 text-xs\">BSW</p>\r\n                  <p className=\"text-white font-mono\">{event.condicoesOperacionais.bsw}%</p>\r\n                </div>\r\n                <div className=\"bg-zinc-800 p-3 rounded-lg text-center\">\r\n                  <p className=\"text-zinc-500 text-xs\">Presso</p>\r\n                  <p className=\"text-white font-mono\">{event.condicoesOperacionais.pressao} bar</p>\r\n                </div>\r\n                <div className=\"bg-zinc-800 p-3 rounded-lg text-center\">\r\n                  <p className=\"text-zinc-500 text-xs\">Temperatura</p>\r\n                  <p className=\"text-white font-mono\">{event.condicoesOperacionais.temperatura}C</p>\r\n                </div>\r\n                <div className=\"bg-zinc-800 p-3 rounded-lg text-center\">\r\n                  <p className=\"text-zinc-500 text-xs\">Desvio HC</p>\r\n                  <p className=\"text-white font-mono\">{event.desvioHC.toFixed(2)}%</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'diario' && (\r\n          <div className=\"space-y-4\">\r\n            {event.diarioBordo.length === 0 ? (\r\n              <p className=\"text-zinc-500 text-center py-8\">Nenhuma entrada no dirio de bordo</p>\r\n            ) : (\r\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                {event.diarioBordo.map((entrada, index) => (\r\n                  <div key={entrada.id} className=\"flex gap-4\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                      <div className=\"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 text-xs font-bold\">\r\n                        D+{entrada.dPlus}\r\n                      </div>\r\n                      {index < event.diarioBordo.length - 1 && (\r\n                        <div className=\"w-0.5 h-full bg-zinc-700 my-1\" />\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex-1 bg-zinc-800 rounded-lg p-3\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"font-medium text-white\">{entrada.etapa}</span>\r\n                        <Badge variant={entrada.status === 'Concludo' ? 'success' : 'warning'} size=\"sm\">\r\n                          {entrada.status}\r\n                        </Badge>\r\n                      </div>\r\n                      <p className=\"text-zinc-400 text-sm mt-1\">{entrada.detalhe}</p>\r\n                      <div className=\"flex items-center gap-4 mt-2 text-xs text-zinc-500\">\r\n                        <span>{new Date(entrada.dataHora).toLocaleString('pt-BR')}</span>\r\n                        <span>{entrada.responsavel}</span>\r\n                        {entrada.itemRANP && <span>Ref: {entrada.itemRANP}</span>}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n            <Button variant=\"outline\" className=\"w-full\">\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Adicionar Entrada\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'checklist' && (\r\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n            {event.checklistANP.map((item) => (\r\n              <div\r\n                key={item.id}\r\n                className={cn(\r\n                  'flex items-center justify-between p-3 rounded-lg',\r\n                  item.status === 'OK' ? 'bg-green-500/10' :\r\n                  item.status === 'Pendente' ? 'bg-zinc-800' : 'bg-zinc-700'\r\n                )}\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  {item.status === 'OK' ? (\r\n                    <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n                  ) : item.status === 'N/A' ? (\r\n                    <div className=\"w-5 h-5 rounded-full bg-zinc-600\" />\r\n                  ) : (\r\n                    <div className=\"w-5 h-5 rounded-full border-2 border-zinc-500\" />\r\n                  )}\r\n                  <div>\r\n                    <span className=\"text-zinc-400 text-sm font-mono mr-2\">{item.itemRANP}</span>\r\n                    <span className=\"text-white text-sm\">{item.descricao}</span>\r\n                    {item.obrigatorio && (\r\n                      <span className=\"text-red-400 text-xs ml-2\">*</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <Badge variant={item.status === 'OK' ? 'success' : item.status === 'N/A' ? 'secondary' : 'warning'} size=\"sm\">\r\n                  {item.status}\r\n                </Badge>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'diagnostico' && (\r\n          <div className=\"space-y-4\">\r\n            {event.diagnostico ? (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <h4 className=\"font-medium text-white mb-2\">Descrio da Falha</h4>\r\n                  <p className=\"text-zinc-400\">{event.diagnostico.descricaoFalha}</p>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-medium text-white mb-2\">Causa Provvel</h4>\r\n                  <p className=\"text-zinc-400\">{event.diagnostico.causaProvavel}</p>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-medium text-white mb-2\">Metodologia</h4>\r\n                  <Badge>{event.diagnostico.metodologiaAnalise}</Badge>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-8\">\r\n                <Activity className=\"w-12 h-12 text-zinc-600 mx-auto mb-2\" />\r\n                <p className=\"text-zinc-500\">Diagnstico ainda no preenchido</p>\r\n                <Button variant=\"outline\" className=\"mt-4\">\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Iniciar Diagnstico\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'acoes' && (\r\n          <div className=\"space-y-4\">\r\n            {event.planosAcao.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <ClipboardList className=\"w-12 h-12 text-zinc-600 mx-auto mb-2\" />\r\n                <p className=\"text-zinc-500\">Nenhuma ao CAPA registrada</p>\r\n                <Button variant=\"outline\" className=\"mt-4\">\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Adicionar Ao\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {event.planosAcao.map((acao) => (\r\n                  <div key={acao.id} className=\"bg-zinc-800 rounded-lg p-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className=\"font-medium text-white\">{acao.acao}</span>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Badge variant={acao.tipo === 'Corretiva' ? 'error' : 'info'} size=\"sm\">\r\n                          {acao.tipo}\r\n                        </Badge>\r\n                        <Badge variant={acao.status === 'Concludo' ? 'success' : 'warning'} size=\"sm\">\r\n                          {acao.status}\r\n                        </Badge>\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-zinc-400 text-sm mt-2\">{acao.descricao}</p>\r\n                    <div className=\"flex items-center gap-4 mt-2 text-xs text-zinc-500\">\r\n                      <span>Responsvel: {acao.responsavel}</span>\r\n                      <span>Prazo: {new Date(acao.prazo).toLocaleDateString('pt-BR')}</span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Aes */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t border-zinc-700\">\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Fechar\r\n          </Button>\r\n          {event.tipoRelatorio === 'Parcial' && event.status !== 'Enviado ANP' && (\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                desenquadramentoService.promoverParaFinal(event.id)\r\n                onUpdate()\r\n              }}\r\n            >\r\n              Promover para Final\r\n            </Button>\r\n          )}\r\n          {prontidao.pronto && (\r\n            <Button>\r\n              <Send className=\"w-4 h-4 mr-2\" />\r\n              Gerar Relatrio ANP\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\n// Modal de Novo Evento\r\nfunction NewEventModal({\r\n  onClose,\r\n  onCreate,\r\n}: {\r\n  onClose: () => void\r\n  onCreate: (evento: DesenquadramentoEvent) => void\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    equipamentoId: '',\r\n    equipamentoTag: '',\r\n    equipamentoNome: '',\r\n    ambiente: 'TOPSIDE' as 'TOPSIDE' | 'SUBSEA',\r\n    dataOcorrencia: new Date().toISOString().split('T')[0],\r\n    dataDeteccao: new Date().toISOString().split('T')[0],\r\n    responsavelTecnico: '',\r\n    diasConsecutivosDesvio: 10,\r\n    desvioHC: 0,\r\n    desvioTotal: 0,\r\n    gvf: 0,\r\n    bsw: 0,\r\n    pressao: 0,\r\n    temperatura: 0,\r\n    vazaoOleo: 0,\r\n    vazaoGas: 0,\r\n    vazaoAgua: 0,\r\n    vazaoTotal: 0,\r\n  })\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    const evento = desenquadramentoService.criarEvento({\r\n      equipamentoId: formData.equipamentoId,\r\n      equipamentoTag: formData.equipamentoTag,\r\n      equipamentoNome: formData.equipamentoNome,\r\n      ambiente: formData.ambiente,\r\n      dataOcorrencia: formData.dataOcorrencia,\r\n      dataDeteccao: formData.dataDeteccao,\r\n      responsavelTecnico: formData.responsavelTecnico,\r\n      diasConsecutivosDesvio: formData.diasConsecutivosDesvio,\r\n      desvioHC: formData.desvioHC,\r\n      desvioTotal: formData.desvioTotal,\r\n      createdBy: 'Usurio',\r\n      condicoesOperacionais: {\r\n        gvf: formData.gvf,\r\n        bsw: formData.bsw,\r\n        pressao: formData.pressao,\r\n        temperatura: formData.temperatura,\r\n        vazaoOleo: formData.vazaoOleo,\r\n        vazaoGas: formData.vazaoGas,\r\n        vazaoAgua: formData.vazaoAgua,\r\n        vazaoTotal: formData.vazaoTotal,\r\n        salinidade: 0,\r\n      },\r\n    })\r\n\r\n    onCreate(evento)\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title=\"Novo Evento de Desenquadramento\" size=\"lg\">\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <Input\r\n            label=\"TAG do Equipamento\"\r\n            value={formData.equipamentoTag}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, equipamentoTag: e.target.value }))}\r\n            placeholder=\"Ex: 2601.18FT1506\"\r\n            required\r\n          />\r\n          <Input\r\n            label=\"Nome do Equipamento\"\r\n            value={formData.equipamentoNome}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, equipamentoNome: e.target.value }))}\r\n            placeholder=\"Ex: MPFM Bank 05\"\r\n            required\r\n          />\r\n          <Select\r\n            label=\"Ambiente\"\r\n            value={formData.ambiente}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, ambiente: e.target.value as 'TOPSIDE' | 'SUBSEA' }))}\r\n            options={[\r\n              { value: 'TOPSIDE', label: 'Topside' },\r\n              { value: 'SUBSEA', label: 'Subsea' },\r\n            ]}\r\n          />\r\n          <Input\r\n            label=\"Responsvel Tcnico\"\r\n            value={formData.responsavelTecnico}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, responsavelTecnico: e.target.value }))}\r\n            required\r\n          />\r\n          <Input\r\n            label=\"Data de Ocorrncia\"\r\n            type=\"date\"\r\n            value={formData.dataOcorrencia}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, dataOcorrencia: e.target.value }))}\r\n            required\r\n          />\r\n          <Input\r\n            label=\"Data de Deteco\"\r\n            type=\"date\"\r\n            value={formData.dataDeteccao}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, dataDeteccao: e.target.value }))}\r\n            required\r\n          />\r\n          <Input\r\n            label=\"Dias Consecutivos de Desvio\"\r\n            type=\"number\"\r\n            value={formData.diasConsecutivosDesvio}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, diasConsecutivosDesvio: Number(e.target.value) }))}\r\n            min={10}\r\n            required\r\n          />\r\n          <Input\r\n            label=\"Desvio HC (%)\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.desvioHC}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, desvioHC: Number(e.target.value) }))}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button type=\"submit\">\r\n            <Plus className=\"w-4 h-4 mr-2\" />\r\n            Criar Evento\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default Desenquadramento\r\n","/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*exported XLSX */\n/*global process:false, Buffer:false, ArrayBuffer:false, DataView:false, Deno:false */\nvar XLSX = {};\nXLSX.version = '0.18.5';\nvar current_codepage = 1200, current_ansi = 1252;\n\nvar VALID_ANSI = [ 874, 932, 936, 949, 950, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258, 10000 ];\n/* ECMA-376 Part I 18.4.1 charset to codepage mapping */\nvar CS2CP = ({\n\t/*::[*/0/*::]*/:    1252, /* ANSI */\n\t/*::[*/1/*::]*/:   65001, /* DEFAULT */\n\t/*::[*/2/*::]*/:   65001, /* SYMBOL */\n\t/*::[*/77/*::]*/:  10000, /* MAC */\n\t/*::[*/128/*::]*/:   932, /* SHIFTJIS */\n\t/*::[*/129/*::]*/:   949, /* HANGUL */\n\t/*::[*/130/*::]*/:  1361, /* JOHAB */\n\t/*::[*/134/*::]*/:   936, /* GB2312 */\n\t/*::[*/136/*::]*/:   950, /* CHINESEBIG5 */\n\t/*::[*/161/*::]*/:  1253, /* GREEK */\n\t/*::[*/162/*::]*/:  1254, /* TURKISH */\n\t/*::[*/163/*::]*/:  1258, /* VIETNAMESE */\n\t/*::[*/177/*::]*/:  1255, /* HEBREW */\n\t/*::[*/178/*::]*/:  1256, /* ARABIC */\n\t/*::[*/186/*::]*/:  1257, /* BALTIC */\n\t/*::[*/204/*::]*/:  1251, /* RUSSIAN */\n\t/*::[*/222/*::]*/:   874, /* THAI */\n\t/*::[*/238/*::]*/:  1250, /* EASTEUROPE */\n\t/*::[*/255/*::]*/:  1252, /* OEM */\n\t/*::[*/69/*::]*/:   6969  /* MISC */\n}/*:any*/);\n\nvar set_ansi = function(cp/*:number*/) { if(VALID_ANSI.indexOf(cp) == -1) return; current_ansi = CS2CP[0] = cp; };\nfunction reset_ansi() { set_ansi(1252); }\n\nvar set_cp = function(cp/*:number*/) { current_codepage = cp; set_ansi(cp); };\nfunction reset_cp() { set_cp(1200); reset_ansi(); }\n\nfunction char_codes(data/*:string*/)/*:Array<number>*/ { var o/*:Array<number>*/ = []; for(var i = 0, len = data.length; i < len; ++i) o[i] = data.charCodeAt(i); return o; }\n\nfunction utf16leread(data/*:string*/)/*:string*/ {\n\tvar o/*:Array<string>*/ = [];\n\tfor(var i = 0; i < (data.length>>1); ++i) o[i] = String.fromCharCode(data.charCodeAt(2*i) + (data.charCodeAt(2*i+1)<<8));\n\treturn o.join(\"\");\n}\nfunction utf16beread(data/*:string*/)/*:string*/ {\n\tvar o/*:Array<string>*/ = [];\n\tfor(var i = 0; i < (data.length>>1); ++i) o[i] = String.fromCharCode(data.charCodeAt(2*i+1) + (data.charCodeAt(2*i)<<8));\n\treturn o.join(\"\");\n}\n\nvar debom = function(data/*:string*/)/*:string*/ {\n\tvar c1 = data.charCodeAt(0), c2 = data.charCodeAt(1);\n\tif(c1 == 0xFF && c2 == 0xFE) return utf16leread(data.slice(2));\n\tif(c1 == 0xFE && c2 == 0xFF) return utf16beread(data.slice(2));\n\tif(c1 == 0xFEFF) return data.slice(1);\n\treturn data;\n};\n\nvar _getchar = function _gc1(x/*:number*/)/*:string*/ { return String.fromCharCode(x); };\nvar _getansi = function _ga1(x/*:number*/)/*:string*/ { return String.fromCharCode(x); };\n\nvar $cptable;\nfunction set_cptable(cptable) {\n\t$cptable = cptable;\n\tset_cp = function(cp/*:number*/) { current_codepage = cp; set_ansi(cp); };\n\tdebom = function(data/*:string*/) {\n\t\tif(data.charCodeAt(0) === 0xFF && data.charCodeAt(1) === 0xFE) { return $cptable.utils.decode(1200, char_codes(data.slice(2))); }\n\t\treturn data;\n\t};\n\t_getchar = function _gc2(x/*:number*/)/*:string*/ {\n\t\tif(current_codepage === 1200) return String.fromCharCode(x);\n\t\treturn $cptable.utils.decode(current_codepage, [x&255,x>>8])[0];\n\t};\n\t_getansi = function _ga2(x/*:number*/)/*:string*/ {\n\t\treturn $cptable.utils.decode(current_ansi, [x])[0];\n\t};\n\tcpdoit();\n}\nexport { set_cptable };\nvar DENSE = null;\nvar DIF_XL = true;\nvar Base64_map = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nfunction Base64_encode(input) {\n  var o = \"\";\n  var c1 = 0, c2 = 0, c3 = 0, e1 = 0, e2 = 0, e3 = 0, e4 = 0;\n  for (var i = 0; i < input.length; ) {\n    c1 = input.charCodeAt(i++);\n    e1 = c1 >> 2;\n    c2 = input.charCodeAt(i++);\n    e2 = (c1 & 3) << 4 | c2 >> 4;\n    c3 = input.charCodeAt(i++);\n    e3 = (c2 & 15) << 2 | c3 >> 6;\n    e4 = c3 & 63;\n    if (isNaN(c2)) {\n      e3 = e4 = 64;\n    } else if (isNaN(c3)) {\n      e4 = 64;\n    }\n    o += Base64_map.charAt(e1) + Base64_map.charAt(e2) + Base64_map.charAt(e3) + Base64_map.charAt(e4);\n  }\n  return o;\n}\nfunction Base64_decode(input) {\n  var o = \"\";\n  var c1 = 0, c2 = 0, c3 = 0, e1 = 0, e2 = 0, e3 = 0, e4 = 0;\n  input = input.replace(/[^\\w\\+\\/\\=]/g, \"\");\n  for (var i = 0; i < input.length; ) {\n    e1 = Base64_map.indexOf(input.charAt(i++));\n    e2 = Base64_map.indexOf(input.charAt(i++));\n    c1 = e1 << 2 | e2 >> 4;\n    o += String.fromCharCode(c1);\n    e3 = Base64_map.indexOf(input.charAt(i++));\n    c2 = (e2 & 15) << 4 | e3 >> 2;\n    if (e3 !== 64) {\n      o += String.fromCharCode(c2);\n    }\n    e4 = Base64_map.indexOf(input.charAt(i++));\n    c3 = (e3 & 3) << 6 | e4;\n    if (e4 !== 64) {\n      o += String.fromCharCode(c3);\n    }\n  }\n  return o;\n}\nvar has_buf = /*#__PURE__*/(function() { return typeof Buffer !== 'undefined' && typeof process !== 'undefined' && typeof process.versions !== 'undefined' && !!process.versions.node; })();\n\nvar Buffer_from = /*#__PURE__*/(function() {\n\tif(typeof Buffer !== 'undefined') {\n\t\tvar nbfs = !Buffer.from;\n\t\tif(!nbfs) try { Buffer.from(\"foo\", \"utf8\"); } catch(e) { nbfs = true; }\n\t\treturn nbfs ? function(buf, enc) { return (enc) ? new Buffer(buf, enc) : new Buffer(buf); } : Buffer.from.bind(Buffer);\n\t}\n\treturn function() {};\n})();\n\n\nfunction new_raw_buf(len/*:number*/) {\n\t/* jshint -W056 */\n\tif(has_buf) return Buffer.alloc ? Buffer.alloc(len) : new Buffer(len);\n\treturn typeof Uint8Array != \"undefined\" ? new Uint8Array(len) : new Array(len);\n\t/* jshint +W056 */\n}\n\nfunction new_unsafe_buf(len/*:number*/) {\n\t/* jshint -W056 */\n\tif(has_buf) return Buffer.allocUnsafe ? Buffer.allocUnsafe(len) : new Buffer(len);\n\treturn typeof Uint8Array != \"undefined\" ? new Uint8Array(len) : new Array(len);\n\t/* jshint +W056 */\n}\n\nvar s2a = function s2a(s/*:string*/)/*:any*/ {\n\tif(has_buf) return Buffer_from(s, \"binary\");\n\treturn s.split(\"\").map(function(x/*:string*/)/*:number*/{ return x.charCodeAt(0) & 0xff; });\n};\n\nfunction s2ab(s/*:string*/)/*:any*/ {\n\tif(typeof ArrayBuffer === 'undefined') return s2a(s);\n\tvar buf = new ArrayBuffer(s.length), view = new Uint8Array(buf);\n\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\treturn buf;\n}\n\nfunction a2s(data/*:any*/)/*:string*/ {\n\tif(Array.isArray(data)) return data.map(function(c) { return String.fromCharCode(c); }).join(\"\");\n\tvar o/*:Array<string>*/ = []; for(var i = 0; i < data.length; ++i) o[i] = String.fromCharCode(data[i]); return o.join(\"\");\n}\n\nfunction a2u(data/*:Array<number>*/)/*:Uint8Array*/ {\n\tif(typeof Uint8Array === 'undefined') throw new Error(\"Unsupported\");\n\treturn new Uint8Array(data);\n}\n\nfunction ab2a(data/*:ArrayBuffer|Uint8Array*/)/*:Array<number>*/ {\n\tif(typeof ArrayBuffer == 'undefined') throw new Error(\"Unsupported\");\n\tif(data instanceof ArrayBuffer) return ab2a(new Uint8Array(data));\n\t/*:: if(data instanceof ArrayBuffer) throw new Error(\"unreachable\"); */\n\tvar o = new Array(data.length);\n\tfor(var i = 0; i < data.length; ++i) o[i] = data[i];\n\treturn o;\n}\n\nvar bconcat = has_buf ? function(bufs) { return Buffer.concat(bufs.map(function(buf) { return Buffer.isBuffer(buf) ? buf : Buffer_from(buf); })); } : function(bufs) {\n\tif(typeof Uint8Array !== \"undefined\") {\n\t\tvar i = 0, maxlen = 0;\n\t\tfor(i = 0; i < bufs.length; ++i) maxlen += bufs[i].length;\n\t\tvar o = new Uint8Array(maxlen);\n\t\tvar len = 0;\n\t\tfor(i = 0, maxlen = 0; i < bufs.length; maxlen += len, ++i) {\n\t\t\tlen = bufs[i].length;\n\t\t\tif(bufs[i] instanceof Uint8Array) o.set(bufs[i], maxlen);\n\t\t\telse if(typeof bufs[i] == \"string\") { throw \"wtf\"; }\n\t\t\telse o.set(new Uint8Array(bufs[i]), maxlen);\n\t\t}\n\t\treturn o;\n\t}\n\treturn [].concat.apply([], bufs.map(function(buf) { return Array.isArray(buf) ? buf : [].slice.call(buf); }));\n};\n\nfunction utf8decode(content/*:string*/) {\n\tvar out = [], widx = 0, L = content.length + 250;\n\tvar o = new_raw_buf(content.length + 255);\n\tfor(var ridx = 0; ridx < content.length; ++ridx) {\n\t\tvar c = content.charCodeAt(ridx);\n\t\tif(c < 0x80) o[widx++] = c;\n\t\telse if(c < 0x800) {\n\t\t\to[widx++] = (192|((c>>6)&31));\n\t\t\to[widx++] = (128|(c&63));\n\t\t} else if(c >= 0xD800 && c < 0xE000) {\n\t\t\tc = (c&1023)+64;\n\t\t\tvar d = content.charCodeAt(++ridx)&1023;\n\t\t\to[widx++] = (240|((c>>8)&7));\n\t\t\to[widx++] = (128|((c>>2)&63));\n\t\t\to[widx++] = (128|((d>>6)&15)|((c&3)<<4));\n\t\t\to[widx++] = (128|(d&63));\n\t\t} else {\n\t\t\to[widx++] = (224|((c>>12)&15));\n\t\t\to[widx++] = (128|((c>>6)&63));\n\t\t\to[widx++] = (128|(c&63));\n\t\t}\n\t\tif(widx > L) {\n\t\t\tout.push(o.slice(0, widx));\n\t\t\twidx = 0;\n\t\t\to = new_raw_buf(65535);\n\t\t\tL = 65530;\n\t\t}\n\t}\n\tout.push(o.slice(0, widx));\n\treturn bconcat(out);\n}\n\nvar chr0 = /\\u0000/g, chr1 = /[\\u0001-\\u0006]/g;\n/*::\ndeclare type Block = any;\ndeclare type BufArray = {\n\tnewblk(sz:number):Block;\n\tnext(sz:number):Block;\n\tend():any;\n\tpush(buf:Block):void;\n};\n\ntype RecordHopperCB = {(d:any, Rn:string, RT:number):?boolean;};\n\ntype EvertType = {[string]:string};\ntype EvertNumType = {[string]:number};\ntype EvertArrType = {[string]:Array<string>};\n\ntype StringConv = {(string):string};\n\n*/\n/* ssf.js (C) 2013-present SheetJS -- http://sheetjs.com */\n/*jshint -W041 */\nfunction _strrev(x/*:string*/)/*:string*/ { var o = \"\", i = x.length-1; while(i>=0) o += x.charAt(i--); return o; }\nfunction pad0(v/*:any*/,d/*:number*/)/*:string*/{var t=\"\"+v; return t.length>=d?t:fill('0',d-t.length)+t;}\nfunction pad_(v/*:any*/,d/*:number*/)/*:string*/{var t=\"\"+v;return t.length>=d?t:fill(' ',d-t.length)+t;}\nfunction rpad_(v/*:any*/,d/*:number*/)/*:string*/{var t=\"\"+v; return t.length>=d?t:t+fill(' ',d-t.length);}\nfunction pad0r1(v/*:any*/,d/*:number*/)/*:string*/{var t=\"\"+Math.round(v); return t.length>=d?t:fill('0',d-t.length)+t;}\nfunction pad0r2(v/*:any*/,d/*:number*/)/*:string*/{var t=\"\"+v; return t.length>=d?t:fill('0',d-t.length)+t;}\nvar p2_32 = /*#__PURE__*/Math.pow(2,32);\nfunction pad0r(v/*:any*/,d/*:number*/)/*:string*/{if(v>p2_32||v<-p2_32) return pad0r1(v,d); var i = Math.round(v); return pad0r2(i,d); }\n/* yes, in 2022 this is still faster than string compare */\nfunction SSF_isgeneral(s/*:string*/, i/*:?number*/)/*:boolean*/ { i = i || 0; return s.length >= 7 + i && (s.charCodeAt(i)|32) === 103 && (s.charCodeAt(i+1)|32) === 101 && (s.charCodeAt(i+2)|32) === 110 && (s.charCodeAt(i+3)|32) === 101 && (s.charCodeAt(i+4)|32) === 114 && (s.charCodeAt(i+5)|32) === 97 && (s.charCodeAt(i+6)|32) === 108; }\nvar days/*:Array<Array<string> >*/ = [\n\t['Sun', 'Sunday'],\n\t['Mon', 'Monday'],\n\t['Tue', 'Tuesday'],\n\t['Wed', 'Wednesday'],\n\t['Thu', 'Thursday'],\n\t['Fri', 'Friday'],\n\t['Sat', 'Saturday']\n];\nvar months/*:Array<Array<string> >*/ = [\n\t['J', 'Jan', 'January'],\n\t['F', 'Feb', 'February'],\n\t['M', 'Mar', 'March'],\n\t['A', 'Apr', 'April'],\n\t['M', 'May', 'May'],\n\t['J', 'Jun', 'June'],\n\t['J', 'Jul', 'July'],\n\t['A', 'Aug', 'August'],\n\t['S', 'Sep', 'September'],\n\t['O', 'Oct', 'October'],\n\t['N', 'Nov', 'November'],\n\t['D', 'Dec', 'December']\n];\nfunction SSF_init_table(t/*:any*/) {\n\tif(!t) t = {};\n\tt[0]=  'General';\n\tt[1]=  '0';\n\tt[2]=  '0.00';\n\tt[3]=  '#,##0';\n\tt[4]=  '#,##0.00';\n\tt[9]=  '0%';\n\tt[10]= '0.00%';\n\tt[11]= '0.00E+00';\n\tt[12]= '# ?/?';\n\tt[13]= '# ??/??';\n\tt[14]= 'm/d/yy';\n\tt[15]= 'd-mmm-yy';\n\tt[16]= 'd-mmm';\n\tt[17]= 'mmm-yy';\n\tt[18]= 'h:mm AM/PM';\n\tt[19]= 'h:mm:ss AM/PM';\n\tt[20]= 'h:mm';\n\tt[21]= 'h:mm:ss';\n\tt[22]= 'm/d/yy h:mm';\n\tt[37]= '#,##0 ;(#,##0)';\n\tt[38]= '#,##0 ;[Red](#,##0)';\n\tt[39]= '#,##0.00;(#,##0.00)';\n\tt[40]= '#,##0.00;[Red](#,##0.00)';\n\tt[45]= 'mm:ss';\n\tt[46]= '[h]:mm:ss';\n\tt[47]= 'mmss.0';\n\tt[48]= '##0.0E+0';\n\tt[49]= '@';\n\tt[56]= '\"/ \"hh\"\"mm\"\"ss\" \"';\n\treturn t;\n}\n/* repeated to satiate webpack */\nvar table_fmt = {\n\t0:  'General',\n\t1:  '0',\n\t2:  '0.00',\n\t3:  '#,##0',\n\t4:  '#,##0.00',\n\t9:  '0%',\n\t10: '0.00%',\n\t11: '0.00E+00',\n\t12: '# ?/?',\n\t13: '# ??/??',\n\t14: 'm/d/yy',\n\t15: 'd-mmm-yy',\n\t16: 'd-mmm',\n\t17: 'mmm-yy',\n\t18: 'h:mm AM/PM',\n\t19: 'h:mm:ss AM/PM',\n\t20: 'h:mm',\n\t21: 'h:mm:ss',\n\t22: 'm/d/yy h:mm',\n\t37: '#,##0 ;(#,##0)',\n\t38: '#,##0 ;[Red](#,##0)',\n\t39: '#,##0.00;(#,##0.00)',\n\t40: '#,##0.00;[Red](#,##0.00)',\n\t45: 'mm:ss',\n\t46: '[h]:mm:ss',\n\t47: 'mmss.0',\n\t48: '##0.0E+0',\n\t49: '@',\n\t56: '\"/ \"hh\"\"mm\"\"ss\" \"'\n};\n\n/* Defaults determined by systematically testing in Excel 2019 */\n\n/* These formats appear to default to other formats in the table */\nvar SSF_default_map = {\n\t5:  37, 6:  38, 7:  39, 8:  40,         //  5 -> 37 ...  8 -> 40\n\n\t23:  0, 24:  0, 25:  0, 26:  0,         // 23 ->  0 ... 26 ->  0\n\n\t27: 14, 28: 14, 29: 14, 30: 14, 31: 14, // 27 -> 14 ... 31 -> 14\n\n\t50: 14, 51: 14, 52: 14, 53: 14, 54: 14, // 50 -> 14 ... 58 -> 14\n\t55: 14, 56: 14, 57: 14, 58: 14,\n\t59:  1, 60:  2, 61:  3, 62:  4,         // 59 ->  1 ... 62 ->  4\n\n\t67:  9, 68: 10,                         // 67 ->  9 ... 68 -> 10\n\t69: 12, 70: 13, 71: 14,                 // 69 -> 12 ... 71 -> 14\n\t72: 14, 73: 15, 74: 16, 75: 17,         // 72 -> 14 ... 75 -> 17\n\t76: 20, 77: 21, 78: 22,                 // 76 -> 20 ... 78 -> 22\n\t79: 45, 80: 46, 81: 47,                 // 79 -> 45 ... 81 -> 47\n\t82: 0                                   // 82 ->  0 ... 65536 -> 0 (omitted)\n};\n\n\n/* These formats technically refer to Accounting formats with no equivalent */\nvar SSF_default_str = {\n\t//  5 -- Currency,   0 decimal, black negative\n\t5:  '\"$\"#,##0_);\\\\(\"$\"#,##0\\\\)',\n\t63: '\"$\"#,##0_);\\\\(\"$\"#,##0\\\\)',\n\n\t//  6 -- Currency,   0 decimal, red   negative\n\t6:  '\"$\"#,##0_);[Red]\\\\(\"$\"#,##0\\\\)',\n\t64: '\"$\"#,##0_);[Red]\\\\(\"$\"#,##0\\\\)',\n\n\t//  7 -- Currency,   2 decimal, black negative\n\t7:  '\"$\"#,##0.00_);\\\\(\"$\"#,##0.00\\\\)',\n\t65: '\"$\"#,##0.00_);\\\\(\"$\"#,##0.00\\\\)',\n\n\t//  8 -- Currency,   2 decimal, red   negative\n\t8:  '\"$\"#,##0.00_);[Red]\\\\(\"$\"#,##0.00\\\\)',\n\t66: '\"$\"#,##0.00_);[Red]\\\\(\"$\"#,##0.00\\\\)',\n\n\t// 41 -- Accounting, 0 decimal, No Symbol\n\t41: '_(* #,##0_);_(* \\\\(#,##0\\\\);_(* \"-\"_);_(@_)',\n\n\t// 42 -- Accounting, 0 decimal, $  Symbol\n\t42: '_(\"$\"* #,##0_);_(\"$\"* \\\\(#,##0\\\\);_(\"$\"* \"-\"_);_(@_)',\n\n\t// 43 -- Accounting, 2 decimal, No Symbol\n\t43: '_(* #,##0.00_);_(* \\\\(#,##0.00\\\\);_(* \"-\"??_);_(@_)',\n\n\t// 44 -- Accounting, 2 decimal, $  Symbol\n\t44: '_(\"$\"* #,##0.00_);_(\"$\"* \\\\(#,##0.00\\\\);_(\"$\"* \"-\"??_);_(@_)'\n};\n\nfunction SSF_frac(x/*:number*/, D/*:number*/, mixed/*:?boolean*/)/*:Array<number>*/ {\n\tvar sgn = x < 0 ? -1 : 1;\n\tvar B = x * sgn;\n\tvar P_2 = 0, P_1 = 1, P = 0;\n\tvar Q_2 = 1, Q_1 = 0, Q = 0;\n\tvar A = Math.floor(B);\n\twhile(Q_1 < D) {\n\t\tA = Math.floor(B);\n\t\tP = A * P_1 + P_2;\n\t\tQ = A * Q_1 + Q_2;\n\t\tif((B - A) < 0.00000005) break;\n\t\tB = 1 / (B - A);\n\t\tP_2 = P_1; P_1 = P;\n\t\tQ_2 = Q_1; Q_1 = Q;\n\t}\n\tif(Q > D) { if(Q_1 > D) { Q = Q_2; P = P_2; } else { Q = Q_1; P = P_1; } }\n\tif(!mixed) return [0, sgn * P, Q];\n\tvar q = Math.floor(sgn * P/Q);\n\treturn [q, sgn*P - q*Q, Q];\n}\nfunction SSF_parse_date_code(v/*:number*/,opts/*:?any*/,b2/*:?boolean*/) {\n\tif(v > 2958465 || v < 0) return null;\n\tvar date = (v|0), time = Math.floor(86400 * (v - date)), dow=0;\n\tvar dout=[];\n\tvar out={D:date, T:time, u:86400*(v-date)-time,y:0,m:0,d:0,H:0,M:0,S:0,q:0};\n\tif(Math.abs(out.u) < 1e-6) out.u = 0;\n\tif(opts && opts.date1904) date += 1462;\n\tif(out.u > 0.9999) {\n\t\tout.u = 0;\n\t\tif(++time == 86400) { out.T = time = 0; ++date; ++out.D; }\n\t}\n\tif(date === 60) {dout = b2 ? [1317,10,29] : [1900,2,29]; dow=3;}\n\telse if(date === 0) {dout = b2 ? [1317,8,29] : [1900,1,0]; dow=6;}\n\telse {\n\t\tif(date > 60) --date;\n\t\t/* 1 = Jan 1 1900 in Gregorian */\n\t\tvar d = new Date(1900, 0, 1);\n\t\td.setDate(d.getDate() + date - 1);\n\t\tdout = [d.getFullYear(), d.getMonth()+1,d.getDate()];\n\t\tdow = d.getDay();\n\t\tif(date < 60) dow = (dow + 6) % 7;\n\t\tif(b2) dow = SSF_fix_hijri(d, dout);\n\t}\n\tout.y = dout[0]; out.m = dout[1]; out.d = dout[2];\n\tout.S = time % 60; time = Math.floor(time / 60);\n\tout.M = time % 60; time = Math.floor(time / 60);\n\tout.H = time;\n\tout.q = dow;\n\treturn out;\n}\nvar SSFbasedate = /*#__PURE__*/new Date(1899, 11, 31, 0, 0, 0);\nvar SSFdnthresh = /*#__PURE__*/SSFbasedate.getTime();\nvar SSFbase1904 = /*#__PURE__*/new Date(1900, 2, 1, 0, 0, 0);\nfunction datenum_local(v/*:Date*/, date1904/*:?boolean*/)/*:number*/ {\n\tvar epoch = /*#__PURE__*/v.getTime();\n\tif(date1904) epoch -= 1461*24*60*60*1000;\n\telse if(v >= SSFbase1904) epoch += 24*60*60*1000;\n\treturn (epoch - (SSFdnthresh + (/*#__PURE__*/v.getTimezoneOffset() - /*#__PURE__*/SSFbasedate.getTimezoneOffset()) * 60000)) / (24 * 60 * 60 * 1000);\n}\n/* ECMA-376 18.8.30 numFmt*/\n/* Note: `toPrecision` uses standard form when prec > E and E >= -6 */\n/* exponent >= -9 and <= 9 */\nfunction SSF_strip_decimal(o/*:string*/)/*:string*/ {\n\treturn (o.indexOf(\".\") == -1) ? o : o.replace(/(?:\\.0*|(\\.\\d*[1-9])0+)$/, \"$1\");\n}\n\n/* General Exponential always shows 2 digits exp and trims the mantissa */\nfunction SSF_normalize_exp(o/*:string*/)/*:string*/ {\n\tif(o.indexOf(\"E\") == -1) return o;\n\treturn o.replace(/(?:\\.0*|(\\.\\d*[1-9])0+)[Ee]/,\"$1E\").replace(/(E[+-])(\\d)$/,\"$10$2\");\n}\n\n/* exponent >= -9 and <= 9 */\nfunction SSF_small_exp(v/*:number*/)/*:string*/ {\n\tvar w = (v<0?12:11);\n\tvar o = SSF_strip_decimal(v.toFixed(12)); if(o.length <= w) return o;\n\to = v.toPrecision(10); if(o.length <= w) return o;\n\treturn v.toExponential(5);\n}\n\n/* exponent >= 11 or <= -10 likely exponential */\nfunction SSF_large_exp(v/*:number*/)/*:string*/ {\n\tvar o = SSF_strip_decimal(v.toFixed(11));\n\treturn (o.length > (v<0?12:11) || o === \"0\" || o === \"-0\") ? v.toPrecision(6) : o;\n}\n\nfunction SSF_general_num(v/*:number*/)/*:string*/ {\n\tvar V = Math.floor(Math.log(Math.abs(v))*Math.LOG10E), o;\n\n\tif(V >= -4 && V <= -1) o = v.toPrecision(10+V);\n\telse if(Math.abs(V) <= 9) o = SSF_small_exp(v);\n\telse if(V === 10) o = v.toFixed(10).substr(0,12);\n\telse o = SSF_large_exp(v);\n\n\treturn SSF_strip_decimal(SSF_normalize_exp(o.toUpperCase()));\n}\n\n\n/*\n\t\"General\" rules:\n\t- text is passed through (\"@\")\n\t- booleans are rendered as TRUE/FALSE\n\t- \"up to 11 characters\" displayed for numbers\n\t- Default date format (code 14) used for Dates\n\n\tThe longest 32-bit integer text is \"-2147483648\", exactly 11 chars\n\tTODO: technically the display depends on the width of the cell\n*/\nfunction SSF_general(v/*:any*/, opts/*:any*/) {\n\tswitch(typeof v) {\n\t\tcase 'string': return v;\n\t\tcase 'boolean': return v ? \"TRUE\" : \"FALSE\";\n\t\tcase 'number': return (v|0) === v ? v.toString(10) : SSF_general_num(v);\n\t\tcase 'undefined': return \"\";\n\t\tcase 'object':\n\t\t\tif(v == null) return \"\";\n\t\t\tif(v instanceof Date) return SSF_format(14, datenum_local(v, opts && opts.date1904), opts);\n\t}\n\tthrow new Error(\"unsupported value in General format: \" + v);\n}\n\nfunction SSF_fix_hijri(date/*:Date*/, o/*:[number, number, number]*/) {\n  /* TODO: properly adjust y/m/d and  */\n  o[0] -= 581;\n  var dow = date.getDay();\n  if(date < 60) dow = (dow + 6) % 7;\n  return dow;\n}\n//var THAI_DIGITS = \"\\u0E50\\u0E51\\u0E52\\u0E53\\u0E54\\u0E55\\u0E56\\u0E57\\u0E58\\u0E59\".split(\"\");\nfunction SSF_write_date(type/*:number*/, fmt/*:string*/, val, ss0/*:?number*/)/*:string*/ {\n\tvar o=\"\", ss=0, tt=0, y = val.y, out, outl = 0;\n\tswitch(type) {\n\t\tcase 98: /* 'b' buddhist year */\n\t\t\ty = val.y + 543;\n\t\t\t/* falls through */\n\t\tcase 121: /* 'y' year */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = y % 100; outl = 2; break;\n\t\t\tdefault: out = y % 10000; outl = 4; break;\n\t\t} break;\n\t\tcase 109: /* 'm' month */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.m; outl = fmt.length; break;\n\t\t\tcase 3: return months[val.m-1][1];\n\t\t\tcase 5: return months[val.m-1][0];\n\t\t\tdefault: return months[val.m-1][2];\n\t\t} break;\n\t\tcase 100: /* 'd' day */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.d; outl = fmt.length; break;\n\t\t\tcase 3: return days[val.q][0];\n\t\t\tdefault: return days[val.q][1];\n\t\t} break;\n\t\tcase 104: /* 'h' 12-hour */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = 1+(val.H+11)%12; outl = fmt.length; break;\n\t\t\tdefault: throw 'bad hour format: ' + fmt;\n\t\t} break;\n\t\tcase 72: /* 'H' 24-hour */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.H; outl = fmt.length; break;\n\t\t\tdefault: throw 'bad hour format: ' + fmt;\n\t\t} break;\n\t\tcase 77: /* 'M' minutes */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.M; outl = fmt.length; break;\n\t\t\tdefault: throw 'bad minute format: ' + fmt;\n\t\t} break;\n\t\tcase 115: /* 's' seconds */\n\t\t\tif(fmt != 's' && fmt != 'ss' && fmt != '.0' && fmt != '.00' && fmt != '.000') throw 'bad second format: ' + fmt;\n\t\t\tif(val.u === 0 && (fmt == \"s\" || fmt == \"ss\")) return pad0(val.S, fmt.length);\n\t\t\t/*::if(!ss0) ss0 = 0; */\n\t\t\tif(ss0 >= 2) tt = ss0 === 3 ? 1000 : 100;\n\t\t\telse tt = ss0 === 1 ? 10 : 1;\n\t\t\tss = Math.round((tt)*(val.S + val.u));\n\t\t\tif(ss >= 60*tt) ss = 0;\n\t\t\tif(fmt === 's') return ss === 0 ? \"0\" : \"\"+ss/tt;\n\t\t\to = pad0(ss,2 + ss0);\n\t\t\tif(fmt === 'ss') return o.substr(0,2);\n\t\t\treturn \".\" + o.substr(2,fmt.length-1);\n\t\tcase 90: /* 'Z' absolute time */\n\t\tswitch(fmt) {\n\t\t\tcase '[h]': case '[hh]': out = val.D*24+val.H; break;\n\t\t\tcase '[m]': case '[mm]': out = (val.D*24+val.H)*60+val.M; break;\n\t\t\tcase '[s]': case '[ss]': out = ((val.D*24+val.H)*60+val.M)*60+Math.round(val.S+val.u); break;\n\t\t\tdefault: throw 'bad abstime format: ' + fmt;\n\t\t} outl = fmt.length === 3 ? 1 : 2; break;\n\t\tcase 101: /* 'e' era */\n\t\t\tout = y; outl = 1; break;\n\t}\n\tvar outstr = outl > 0 ? pad0(out, outl) : \"\";\n\treturn outstr;\n}\n\n\n/*jshint -W086 */\n/*jshint +W086 */\nfunction commaify(s/*:string*/)/*:string*/ {\n\tvar w = 3;\n\tif(s.length <= w) return s;\n\tvar j = (s.length % w), o = s.substr(0,j);\n\tfor(; j!=s.length; j+=w) o+=(o.length > 0 ? \",\" : \"\") + s.substr(j,w);\n\treturn o;\n}\nvar pct1 = /%/g;\nfunction write_num_pct(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{\n\tvar sfmt = fmt.replace(pct1,\"\"), mul = fmt.length - sfmt.length;\n\treturn write_num(type, sfmt, val * Math.pow(10,2*mul)) + fill(\"%\",mul);\n}\n\nfunction write_num_cm(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{\n\tvar idx = fmt.length - 1;\n\twhile(fmt.charCodeAt(idx-1) === 44) --idx;\n\treturn write_num(type, fmt.substr(0,idx), val / Math.pow(10,3*(fmt.length-idx)));\n}\n\nfunction write_num_exp(fmt/*:string*/, val/*:number*/)/*:string*/{\n\tvar o/*:string*/;\n\tvar idx = fmt.indexOf(\"E\") - fmt.indexOf(\".\") - 1;\n\tif(fmt.match(/^#+0.0E\\+0$/)) {\n\t\tif(val == 0) return \"0.0E+0\";\n\t\telse if(val < 0) return \"-\" + write_num_exp(fmt, -val);\n\t\tvar period = fmt.indexOf(\".\"); if(period === -1) period=fmt.indexOf('E');\n\t\tvar ee = Math.floor(Math.log(val)*Math.LOG10E)%period;\n\t\tif(ee < 0) ee += period;\n\t\to = (val/Math.pow(10,ee)).toPrecision(idx+1+(period+ee)%period);\n\t\tif(o.indexOf(\"e\") === -1) {\n\t\t\tvar fakee = Math.floor(Math.log(val)*Math.LOG10E);\n\t\t\tif(o.indexOf(\".\") === -1) o = o.charAt(0) + \".\" + o.substr(1) + \"E+\" + (fakee - o.length+ee);\n\t\t\telse o += \"E+\" + (fakee - ee);\n\t\t\twhile(o.substr(0,2) === \"0.\") {\n\t\t\t\to = o.charAt(0) + o.substr(2,period) + \".\" + o.substr(2+period);\n\t\t\t\to = o.replace(/^0+([1-9])/,\"$1\").replace(/^0+\\./,\"0.\");\n\t\t\t}\n\t\t\to = o.replace(/\\+-/,\"-\");\n\t\t}\n\t\to = o.replace(/^([+-]?)(\\d*)\\.(\\d*)[Ee]/,function($$,$1,$2,$3) { return $1 + $2 + $3.substr(0,(period+ee)%period) + \".\" + $3.substr(ee) + \"E\"; });\n\t} else o = val.toExponential(idx);\n\tif(fmt.match(/E\\+00$/) && o.match(/e[+-]\\d$/)) o = o.substr(0,o.length-1) + \"0\" + o.charAt(o.length-1);\n\tif(fmt.match(/E\\-/) && o.match(/e\\+/)) o = o.replace(/e\\+/,\"e\");\n\treturn o.replace(\"e\",\"E\");\n}\nvar frac1 = /# (\\?+)( ?)\\/( ?)(\\d+)/;\nfunction write_num_f1(r/*:Array<string>*/, aval/*:number*/, sign/*:string*/)/*:string*/ {\n\tvar den = parseInt(r[4],10), rr = Math.round(aval * den), base = Math.floor(rr/den);\n\tvar myn = (rr - base*den), myd = den;\n\treturn sign + (base === 0 ? \"\" : \"\"+base) + \" \" + (myn === 0 ? fill(\" \", r[1].length + 1 + r[4].length) : pad_(myn,r[1].length) + r[2] + \"/\" + r[3] + pad0(myd,r[4].length));\n}\nfunction write_num_f2(r/*:Array<string>*/, aval/*:number*/, sign/*:string*/)/*:string*/ {\n\treturn sign + (aval === 0 ? \"\" : \"\"+aval) + fill(\" \", r[1].length + 2 + r[4].length);\n}\nvar dec1 = /^#*0*\\.([0#]+)/;\nvar closeparen = /\\).*[0#]/;\nvar phone = /\\(###\\) ###\\\\?-####/;\nfunction hashq(str/*:string*/)/*:string*/ {\n\tvar o = \"\", cc;\n\tfor(var i = 0; i != str.length; ++i) switch((cc=str.charCodeAt(i))) {\n\t\tcase 35: break;\n\t\tcase 63: o+= \" \"; break;\n\t\tcase 48: o+= \"0\"; break;\n\t\tdefault: o+= String.fromCharCode(cc);\n\t}\n\treturn o;\n}\nfunction rnd(val/*:number*/, d/*:number*/)/*:string*/ { var dd = Math.pow(10,d); return \"\"+(Math.round(val * dd)/dd); }\nfunction dec(val/*:number*/, d/*:number*/)/*:number*/ {\n\tvar _frac = val - Math.floor(val), dd = Math.pow(10,d);\n\tif (d < ('' + Math.round(_frac * dd)).length) return 0;\n\treturn Math.round(_frac * dd);\n}\nfunction carry(val/*:number*/, d/*:number*/)/*:number*/ {\n\tif (d < ('' + Math.round((val-Math.floor(val))*Math.pow(10,d))).length) {\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nfunction flr(val/*:number*/)/*:string*/ {\n\tif(val < 2147483647 && val > -2147483648) return \"\"+(val >= 0 ? (val|0) : (val-1|0));\n\treturn \"\"+Math.floor(val);\n}\nfunction write_num_flt(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/ {\n\tif(type.charCodeAt(0) === 40 && !fmt.match(closeparen)) {\n\t\tvar ffmt = fmt.replace(/\\( */,\"\").replace(/ \\)/,\"\").replace(/\\)/,\"\");\n\t\tif(val >= 0) return write_num_flt('n', ffmt, val);\n\t\treturn '(' + write_num_flt('n', ffmt, -val) + ')';\n\t}\n\tif(fmt.charCodeAt(fmt.length - 1) === 44) return write_num_cm(type, fmt, val);\n\tif(fmt.indexOf('%') !== -1) return write_num_pct(type, fmt, val);\n\tif(fmt.indexOf('E') !== -1) return write_num_exp(fmt, val);\n\tif(fmt.charCodeAt(0) === 36) return \"$\"+write_num_flt(type,fmt.substr(fmt.charAt(1)==' '?2:1),val);\n\tvar o;\n\tvar r/*:?Array<string>*/, ri, ff, aval = Math.abs(val), sign = val < 0 ? \"-\" : \"\";\n\tif(fmt.match(/^00+$/)) return sign + pad0r(aval,fmt.length);\n\tif(fmt.match(/^[#?]+$/)) {\n\t\to = pad0r(val,0); if(o === \"0\") o = \"\";\n\t\treturn o.length > fmt.length ? o : hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(frac1))) return write_num_f1(r, aval, sign);\n\tif(fmt.match(/^#+0+$/)) return sign + pad0r(aval,fmt.length - fmt.indexOf(\"0\"));\n\tif((r = fmt.match(dec1))) {\n\t\to = rnd(val, r[1].length).replace(/^([^\\.]+)$/,\"$1.\"+hashq(r[1])).replace(/\\.$/,\".\"+hashq(r[1])).replace(/\\.(\\d*)$/,function($$, $1) { return \".\" + $1 + fill(\"0\", hashq(/*::(*/r/*::||[\"\"])*/[1]).length-$1.length); });\n\t\treturn fmt.indexOf(\"0.\") !== -1 ? o : o.replace(/^0\\./,\".\");\n\t}\n\tfmt = fmt.replace(/^#+([0.])/, \"$1\");\n\tif((r = fmt.match(/^(0*)\\.(#*)$/))) {\n\t\treturn sign + rnd(aval, r[2].length).replace(/\\.(\\d*[1-9])0*$/,\".$1\").replace(/^(-?\\d*)$/,\"$1.\").replace(/^0\\./,r[1].length?\"0.\":\".\");\n\t}\n\tif((r = fmt.match(/^#{1,3},##0(\\.?)$/))) return sign + commaify(pad0r(aval,0));\n\tif((r = fmt.match(/^#,##0\\.([#0]*0)$/))) {\n\t\treturn val < 0 ? \"-\" + write_num_flt(type, fmt, -val) : commaify(\"\"+(Math.floor(val) + carry(val, r[1].length))) + \".\" + pad0(dec(val, r[1].length),r[1].length);\n\t}\n\tif((r = fmt.match(/^#,#*,#0/))) return write_num_flt(type,fmt.replace(/^#,#*,/,\"\"),val);\n\tif((r = fmt.match(/^([0#]+)(\\\\?-([0#]+))+$/))) {\n\t\to = _strrev(write_num_flt(type, fmt.replace(/[\\\\-]/g,\"\"), val));\n\t\tri = 0;\n\t\treturn _strrev(_strrev(fmt.replace(/\\\\/g,\"\")).replace(/[0#]/g,function(x){return ri<o.length?o.charAt(ri++):x==='0'?'0':\"\";}));\n\t}\n\tif(fmt.match(phone)) {\n\t\to = write_num_flt(type, \"##########\", val);\n\t\treturn \"(\" + o.substr(0,3) + \") \" + o.substr(3, 3) + \"-\" + o.substr(6);\n\t}\n\tvar oa = \"\";\n\tif((r = fmt.match(/^([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(/*::String(*/r[4]/*::)*/.length,7);\n\t\tff = SSF_frac(aval, Math.pow(10,ri)-1, false);\n\t\to = \"\" + sign;\n\t\toa = write_num(\"n\", /*::String(*/r[1]/*::)*/, ff[1]);\n\t\tif(oa.charAt(oa.length-1) == \" \") oa = oa.substr(0,oa.length-1) + \"0\";\n\t\to += oa + /*::String(*/r[2]/*::)*/ + \"/\" + /*::String(*/r[3]/*::)*/;\n\t\toa = rpad_(ff[2],ri);\n\t\tif(oa.length < r[4].length) oa = hashq(r[4].substr(r[4].length-oa.length)) + oa;\n\t\to += oa;\n\t\treturn o;\n\t}\n\tif((r = fmt.match(/^# ([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(Math.max(r[1].length, r[4].length),7);\n\t\tff = SSF_frac(aval, Math.pow(10,ri)-1, true);\n\t\treturn sign + (ff[0]||(ff[1] ? \"\" : \"0\")) + \" \" + (ff[1] ? pad_(ff[1],ri) + r[2] + \"/\" + r[3] + rpad_(ff[2],ri): fill(\" \", 2*ri+1 + r[2].length + r[3].length));\n\t}\n\tif((r = fmt.match(/^[#0?]+$/))) {\n\t\to = pad0r(val, 0);\n\t\tif(fmt.length <= o.length) return o;\n\t\treturn hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(/^([#0?]+)\\.([#0]+)$/))) {\n\t\to = \"\" + val.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,\"$1\");\n\t\tri = o.indexOf(\".\");\n\t\tvar lres = fmt.indexOf(\".\") - ri, rres = fmt.length - o.length - lres;\n\t\treturn hashq(fmt.substr(0,lres) + o + fmt.substr(fmt.length-rres));\n\t}\n\tif((r = fmt.match(/^00,000\\.([#0]*0)$/))) {\n\t\tri = dec(val, r[1].length);\n\t\treturn val < 0 ? \"-\" + write_num_flt(type, fmt, -val) : commaify(flr(val)).replace(/^\\d,\\d{3}$/,\"0$&\").replace(/^\\d*$/,function($$) { return \"00,\" + ($$.length < 3 ? pad0(0,3-$$.length) : \"\") + $$; }) + \".\" + pad0(ri,r[1].length);\n\t}\n\tswitch(fmt) {\n\t\tcase \"###,##0.00\": return write_num_flt(type, \"#,##0.00\", val);\n\t\tcase \"###,###\":\n\t\tcase \"##,###\":\n\t\tcase \"#,###\": var x = commaify(pad0r(aval,0)); return x !== \"0\" ? sign + x : \"\";\n\t\tcase \"###,###.00\": return write_num_flt(type, \"###,##0.00\",val).replace(/^0\\./,\".\");\n\t\tcase \"#,###.00\": return write_num_flt(type, \"#,##0.00\",val).replace(/^0\\./,\".\");\n\t\tdefault:\n\t}\n\tthrow new Error(\"unsupported format |\" + fmt + \"|\");\n}\nfunction write_num_cm2(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{\n\tvar idx = fmt.length - 1;\n\twhile(fmt.charCodeAt(idx-1) === 44) --idx;\n\treturn write_num(type, fmt.substr(0,idx), val / Math.pow(10,3*(fmt.length-idx)));\n}\nfunction write_num_pct2(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{\n\tvar sfmt = fmt.replace(pct1,\"\"), mul = fmt.length - sfmt.length;\n\treturn write_num(type, sfmt, val * Math.pow(10,2*mul)) + fill(\"%\",mul);\n}\nfunction write_num_exp2(fmt/*:string*/, val/*:number*/)/*:string*/{\n\tvar o/*:string*/;\n\tvar idx = fmt.indexOf(\"E\") - fmt.indexOf(\".\") - 1;\n\tif(fmt.match(/^#+0.0E\\+0$/)) {\n\t\tif(val == 0) return \"0.0E+0\";\n\t\telse if(val < 0) return \"-\" + write_num_exp2(fmt, -val);\n\t\tvar period = fmt.indexOf(\".\"); if(period === -1) period=fmt.indexOf('E');\n\t\tvar ee = Math.floor(Math.log(val)*Math.LOG10E)%period;\n\t\tif(ee < 0) ee += period;\n\t\to = (val/Math.pow(10,ee)).toPrecision(idx+1+(period+ee)%period);\n\t\tif(!o.match(/[Ee]/)) {\n\t\t\tvar fakee = Math.floor(Math.log(val)*Math.LOG10E);\n\t\t\tif(o.indexOf(\".\") === -1) o = o.charAt(0) + \".\" + o.substr(1) + \"E+\" + (fakee - o.length+ee);\n\t\t\telse o += \"E+\" + (fakee - ee);\n\t\t\to = o.replace(/\\+-/,\"-\");\n\t\t}\n\t\to = o.replace(/^([+-]?)(\\d*)\\.(\\d*)[Ee]/,function($$,$1,$2,$3) { return $1 + $2 + $3.substr(0,(period+ee)%period) + \".\" + $3.substr(ee) + \"E\"; });\n\t} else o = val.toExponential(idx);\n\tif(fmt.match(/E\\+00$/) && o.match(/e[+-]\\d$/)) o = o.substr(0,o.length-1) + \"0\" + o.charAt(o.length-1);\n\tif(fmt.match(/E\\-/) && o.match(/e\\+/)) o = o.replace(/e\\+/,\"e\");\n\treturn o.replace(\"e\",\"E\");\n}\nfunction write_num_int(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/ {\n\tif(type.charCodeAt(0) === 40 && !fmt.match(closeparen)) {\n\t\tvar ffmt = fmt.replace(/\\( */,\"\").replace(/ \\)/,\"\").replace(/\\)/,\"\");\n\t\tif(val >= 0) return write_num_int('n', ffmt, val);\n\t\treturn '(' + write_num_int('n', ffmt, -val) + ')';\n\t}\n\tif(fmt.charCodeAt(fmt.length - 1) === 44) return write_num_cm2(type, fmt, val);\n\tif(fmt.indexOf('%') !== -1) return write_num_pct2(type, fmt, val);\n\tif(fmt.indexOf('E') !== -1) return write_num_exp2(fmt, val);\n\tif(fmt.charCodeAt(0) === 36) return \"$\"+write_num_int(type,fmt.substr(fmt.charAt(1)==' '?2:1),val);\n\tvar o;\n\tvar r/*:?Array<string>*/, ri, ff, aval = Math.abs(val), sign = val < 0 ? \"-\" : \"\";\n\tif(fmt.match(/^00+$/)) return sign + pad0(aval,fmt.length);\n\tif(fmt.match(/^[#?]+$/)) {\n\t\to = (\"\"+val); if(val === 0) o = \"\";\n\t\treturn o.length > fmt.length ? o : hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(frac1))) return write_num_f2(r, aval, sign);\n\tif(fmt.match(/^#+0+$/)) return sign + pad0(aval,fmt.length - fmt.indexOf(\"0\"));\n\tif((r = fmt.match(dec1))) {\n\t\t/*:: if(!Array.isArray(r)) throw new Error(\"unreachable\"); */\n\t\to = (\"\"+val).replace(/^([^\\.]+)$/,\"$1.\"+hashq(r[1])).replace(/\\.$/,\".\"+hashq(r[1]));\n\t\to = o.replace(/\\.(\\d*)$/,function($$, $1) {\n\t\t/*:: if(!Array.isArray(r)) throw new Error(\"unreachable\"); */\n\t\t\treturn \".\" + $1 + fill(\"0\", hashq(r[1]).length-$1.length); });\n\t\treturn fmt.indexOf(\"0.\") !== -1 ? o : o.replace(/^0\\./,\".\");\n\t}\n\tfmt = fmt.replace(/^#+([0.])/, \"$1\");\n\tif((r = fmt.match(/^(0*)\\.(#*)$/))) {\n\t\treturn sign + (\"\"+aval).replace(/\\.(\\d*[1-9])0*$/,\".$1\").replace(/^(-?\\d*)$/,\"$1.\").replace(/^0\\./,r[1].length?\"0.\":\".\");\n\t}\n\tif((r = fmt.match(/^#{1,3},##0(\\.?)$/))) return sign + commaify((\"\"+aval));\n\tif((r = fmt.match(/^#,##0\\.([#0]*0)$/))) {\n\t\treturn val < 0 ? \"-\" + write_num_int(type, fmt, -val) : commaify((\"\"+val)) + \".\" + fill('0',r[1].length);\n\t}\n\tif((r = fmt.match(/^#,#*,#0/))) return write_num_int(type,fmt.replace(/^#,#*,/,\"\"),val);\n\tif((r = fmt.match(/^([0#]+)(\\\\?-([0#]+))+$/))) {\n\t\to = _strrev(write_num_int(type, fmt.replace(/[\\\\-]/g,\"\"), val));\n\t\tri = 0;\n\t\treturn _strrev(_strrev(fmt.replace(/\\\\/g,\"\")).replace(/[0#]/g,function(x){return ri<o.length?o.charAt(ri++):x==='0'?'0':\"\";}));\n\t}\n\tif(fmt.match(phone)) {\n\t\to = write_num_int(type, \"##########\", val);\n\t\treturn \"(\" + o.substr(0,3) + \") \" + o.substr(3, 3) + \"-\" + o.substr(6);\n\t}\n\tvar oa = \"\";\n\tif((r = fmt.match(/^([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(/*::String(*/r[4]/*::)*/.length,7);\n\t\tff = SSF_frac(aval, Math.pow(10,ri)-1, false);\n\t\to = \"\" + sign;\n\t\toa = write_num(\"n\", /*::String(*/r[1]/*::)*/, ff[1]);\n\t\tif(oa.charAt(oa.length-1) == \" \") oa = oa.substr(0,oa.length-1) + \"0\";\n\t\to += oa + /*::String(*/r[2]/*::)*/ + \"/\" + /*::String(*/r[3]/*::)*/;\n\t\toa = rpad_(ff[2],ri);\n\t\tif(oa.length < r[4].length) oa = hashq(r[4].substr(r[4].length-oa.length)) + oa;\n\t\to += oa;\n\t\treturn o;\n\t}\n\tif((r = fmt.match(/^# ([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(Math.max(r[1].length, r[4].length),7);\n\t\tff = SSF_frac(aval, Math.pow(10,ri)-1, true);\n\t\treturn sign + (ff[0]||(ff[1] ? \"\" : \"0\")) + \" \" + (ff[1] ? pad_(ff[1],ri) + r[2] + \"/\" + r[3] + rpad_(ff[2],ri): fill(\" \", 2*ri+1 + r[2].length + r[3].length));\n\t}\n\tif((r = fmt.match(/^[#0?]+$/))) {\n\t\to = \"\" + val;\n\t\tif(fmt.length <= o.length) return o;\n\t\treturn hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(/^([#0]+)\\.([#0]+)$/))) {\n\t\to = \"\" + val.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,\"$1\");\n\t\tri = o.indexOf(\".\");\n\t\tvar lres = fmt.indexOf(\".\") - ri, rres = fmt.length - o.length - lres;\n\t\treturn hashq(fmt.substr(0,lres) + o + fmt.substr(fmt.length-rres));\n\t}\n\tif((r = fmt.match(/^00,000\\.([#0]*0)$/))) {\n\t\treturn val < 0 ? \"-\" + write_num_int(type, fmt, -val) : commaify(\"\"+val).replace(/^\\d,\\d{3}$/,\"0$&\").replace(/^\\d*$/,function($$) { return \"00,\" + ($$.length < 3 ? pad0(0,3-$$.length) : \"\") + $$; }) + \".\" + pad0(0,r[1].length);\n\t}\n\tswitch(fmt) {\n\t\tcase \"###,###\":\n\t\tcase \"##,###\":\n\t\tcase \"#,###\": var x = commaify(\"\"+aval); return x !== \"0\" ? sign + x : \"\";\n\t\tdefault:\n\t\t\tif(fmt.match(/\\.[0#?]*$/)) return write_num_int(type, fmt.slice(0,fmt.lastIndexOf(\".\")), val) + hashq(fmt.slice(fmt.lastIndexOf(\".\")));\n\t}\n\tthrow new Error(\"unsupported format |\" + fmt + \"|\");\n}\nfunction write_num(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/ {\n\treturn (val|0) === val ? write_num_int(type, fmt, val) : write_num_flt(type, fmt, val);\n}\nfunction SSF_split_fmt(fmt/*:string*/)/*:Array<string>*/ {\n\tvar out/*:Array<string>*/ = [];\n\tvar in_str = false/*, cc*/;\n\tfor(var i = 0, j = 0; i < fmt.length; ++i) switch((/*cc=*/fmt.charCodeAt(i))) {\n\t\tcase 34: /* '\"' */\n\t\t\tin_str = !in_str; break;\n\t\tcase 95: case 42: case 92: /* '_' '*' '\\\\' */\n\t\t\t++i; break;\n\t\tcase 59: /* ';' */\n\t\t\tout[out.length] = fmt.substr(j,i-j);\n\t\t\tj = i+1;\n\t}\n\tout[out.length] = fmt.substr(j);\n\tif(in_str === true) throw new Error(\"Format |\" + fmt + \"| unterminated string \");\n\treturn out;\n}\n\nvar SSF_abstime = /\\[[HhMmSs\\u0E0A\\u0E19\\u0E17]*\\]/;\nfunction fmt_is_date(fmt/*:string*/)/*:boolean*/ {\n\tvar i = 0, /*cc = 0,*/ c = \"\", o = \"\";\n\twhile(i < fmt.length) {\n\t\tswitch((c = fmt.charAt(i))) {\n\t\t\tcase 'G': if(SSF_isgeneral(fmt, i)) i+= 6; i++; break;\n\t\t\tcase '\"': for(;(/*cc=*/fmt.charCodeAt(++i)) !== 34 && i < fmt.length;){/*empty*/} ++i; break;\n\t\t\tcase '\\\\': i+=2; break;\n\t\t\tcase '_': i+=2; break;\n\t\t\tcase '@': ++i; break;\n\t\t\tcase 'B': case 'b':\n\t\t\t\tif(fmt.charAt(i+1) === \"1\" || fmt.charAt(i+1) === \"2\") return true;\n\t\t\t\t/* falls through */\n\t\t\tcase 'M': case 'D': case 'Y': case 'H': case 'S': case 'E':\n\t\t\t\t/* falls through */\n\t\t\tcase 'm': case 'd': case 'y': case 'h': case 's': case 'e': case 'g': return true;\n\t\t\tcase 'A': case 'a': case '':\n\t\t\t\tif(fmt.substr(i, 3).toUpperCase() === \"A/P\") return true;\n\t\t\t\tif(fmt.substr(i, 5).toUpperCase() === \"AM/PM\") return true;\n\t\t\t\tif(fmt.substr(i, 5).toUpperCase() === \"/\") return true;\n\t\t\t\t++i; break;\n\t\t\tcase '[':\n\t\t\t\to = c;\n\t\t\t\twhile(fmt.charAt(i++) !== ']' && i < fmt.length) o += fmt.charAt(i);\n\t\t\t\tif(o.match(SSF_abstime)) return true;\n\t\t\t\tbreak;\n\t\t\tcase '.':\n\t\t\t\t/* falls through */\n\t\t\tcase '0': case '#':\n\t\t\t\twhile(i < fmt.length && (\"0#?.,E+-%\".indexOf(c=fmt.charAt(++i)) > -1 || (c=='\\\\' && fmt.charAt(i+1) == \"-\" && \"0#\".indexOf(fmt.charAt(i+2))>-1))){/* empty */}\n\t\t\t\tbreak;\n\t\t\tcase '?': while(fmt.charAt(++i) === c){/* empty */} break;\n\t\t\tcase '*': ++i; if(fmt.charAt(i) == ' ' || fmt.charAt(i) == '*') ++i; break;\n\t\t\tcase '(': case ')': ++i; break;\n\t\t\tcase '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':\n\t\t\t\twhile(i < fmt.length && \"0123456789\".indexOf(fmt.charAt(++i)) > -1){/* empty */} break;\n\t\t\tcase ' ': ++i; break;\n\t\t\tdefault: ++i; break;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction eval_fmt(fmt/*:string*/, v/*:any*/, opts/*:any*/, flen/*:number*/) {\n\tvar out = [], o = \"\", i = 0, c = \"\", lst='t', dt, j, cc;\n\tvar hr='H';\n\t/* Tokenize */\n\twhile(i < fmt.length) {\n\t\tswitch((c = fmt.charAt(i))) {\n\t\t\tcase 'G': /* General */\n\t\t\t\tif(!SSF_isgeneral(fmt, i)) throw new Error('unrecognized character ' + c + ' in ' +fmt);\n\t\t\t\tout[out.length] = {t:'G', v:'General'}; i+=7; break;\n\t\t\tcase '\"': /* Literal text */\n\t\t\t\tfor(o=\"\";(cc=fmt.charCodeAt(++i)) !== 34 && i < fmt.length;) o += String.fromCharCode(cc);\n\t\t\t\tout[out.length] = {t:'t', v:o}; ++i; break;\n\t\t\tcase '\\\\': var w = fmt.charAt(++i), t = (w === \"(\" || w === \")\") ? w : 't';\n\t\t\t\tout[out.length] = {t:t, v:w}; ++i; break;\n\t\t\tcase '_': out[out.length] = {t:'t', v:\" \"}; i+=2; break;\n\t\t\tcase '@': /* Text Placeholder */\n\t\t\t\tout[out.length] = {t:'T', v:v}; ++i; break;\n\t\t\tcase 'B': case 'b':\n\t\t\t\tif(fmt.charAt(i+1) === \"1\" || fmt.charAt(i+1) === \"2\") {\n\t\t\t\t\tif(dt==null) { dt=SSF_parse_date_code(v, opts, fmt.charAt(i+1) === \"2\"); if(dt==null) return \"\"; }\n\t\t\t\t\tout[out.length] = {t:'X', v:fmt.substr(i,2)}; lst = c; i+=2; break;\n\t\t\t\t}\n\t\t\t\t/* falls through */\n\t\t\tcase 'M': case 'D': case 'Y': case 'H': case 'S': case 'E':\n\t\t\t\tc = c.toLowerCase();\n\t\t\t\t/* falls through */\n\t\t\tcase 'm': case 'd': case 'y': case 'h': case 's': case 'e': case 'g':\n\t\t\t\tif(v < 0) return \"\";\n\t\t\t\tif(dt==null) { dt=SSF_parse_date_code(v, opts); if(dt==null) return \"\"; }\n\t\t\t\to = c; while(++i < fmt.length && fmt.charAt(i).toLowerCase() === c) o+=c;\n\t\t\t\tif(c === 'm' && lst.toLowerCase() === 'h') c = 'M';\n\t\t\t\tif(c === 'h') c = hr;\n\t\t\t\tout[out.length] = {t:c, v:o}; lst = c; break;\n\t\t\tcase 'A': case 'a': case '':\n\t\t\t\tvar q={t:c, v:c};\n\t\t\t\tif(dt==null) dt=SSF_parse_date_code(v, opts);\n\t\t\t\tif(fmt.substr(i, 3).toUpperCase() === \"A/P\") { if(dt!=null) q.v = dt.H >= 12 ? \"P\" : \"A\"; q.t = 'T'; hr='h';i+=3;}\n\t\t\t\telse if(fmt.substr(i,5).toUpperCase() === \"AM/PM\") { if(dt!=null) q.v = dt.H >= 12 ? \"PM\" : \"AM\"; q.t = 'T'; i+=5; hr='h'; }\n\t\t\t\telse if(fmt.substr(i,5).toUpperCase() === \"/\") { if(dt!=null) q.v = dt.H >= 12 ? \"\" : \"\"; q.t = 'T'; i+=5; hr='h'; }\n\t\t\t\telse { q.t = \"t\"; ++i; }\n\t\t\t\tif(dt==null && q.t === 'T') return \"\";\n\t\t\t\tout[out.length] = q; lst = c; break;\n\t\t\tcase '[':\n\t\t\t\to = c;\n\t\t\t\twhile(fmt.charAt(i++) !== ']' && i < fmt.length) o += fmt.charAt(i);\n\t\t\t\tif(o.slice(-1) !== ']') throw 'unterminated \"[\" block: |' + o + '|';\n\t\t\t\tif(o.match(SSF_abstime)) {\n\t\t\t\t\tif(dt==null) { dt=SSF_parse_date_code(v, opts); if(dt==null) return \"\"; }\n\t\t\t\t\tout[out.length] = {t:'Z', v:o.toLowerCase()};\n\t\t\t\t\tlst = o.charAt(1);\n\t\t\t\t} else if(o.indexOf(\"$\") > -1) {\n\t\t\t\t\to = (o.match(/\\$([^-\\[\\]]*)/)||[])[1]||\"$\";\n\t\t\t\t\tif(!fmt_is_date(fmt)) out[out.length] = {t:'t',v:o};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t/* Numbers */\n\t\t\tcase '.':\n\t\t\t\tif(dt != null) {\n\t\t\t\t\to = c; while(++i < fmt.length && (c=fmt.charAt(i)) === \"0\") o += c;\n\t\t\t\t\tout[out.length] = {t:'s', v:o}; break;\n\t\t\t\t}\n\t\t\t\t/* falls through */\n\t\t\tcase '0': case '#':\n\t\t\t\to = c; while(++i < fmt.length && \"0#?.,E+-%\".indexOf(c=fmt.charAt(i)) > -1) o += c;\n\t\t\t\tout[out.length] = {t:'n', v:o}; break;\n\t\t\tcase '?':\n\t\t\t\to = c; while(fmt.charAt(++i) === c) o+=c;\n\t\t\t\tout[out.length] = {t:c, v:o}; lst = c; break;\n\t\t\tcase '*': ++i; if(fmt.charAt(i) == ' ' || fmt.charAt(i) == '*') ++i; break; // **\n\t\t\tcase '(': case ')': out[out.length] = {t:(flen===1?'t':c), v:c}; ++i; break;\n\t\t\tcase '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':\n\t\t\t\to = c; while(i < fmt.length && \"0123456789\".indexOf(fmt.charAt(++i)) > -1) o+=fmt.charAt(i);\n\t\t\t\tout[out.length] = {t:'D', v:o}; break;\n\t\t\tcase ' ': out[out.length] = {t:c, v:c}; ++i; break;\n\t\t\tcase '$': out[out.length] = {t:'t', v:'$'}; ++i; break;\n\t\t\tdefault:\n\t\t\t\tif(\",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP\".indexOf(c) === -1) throw new Error('unrecognized character ' + c + ' in ' + fmt);\n\t\t\t\tout[out.length] = {t:'t', v:c}; ++i; break;\n\t\t}\n\t}\n\n\t/* Scan for date/time parts */\n\tvar bt = 0, ss0 = 0, ssm;\n\tfor(i=out.length-1, lst='t'; i >= 0; --i) {\n\t\tswitch(out[i].t) {\n\t\t\tcase 'h': case 'H': out[i].t = hr; lst='h'; if(bt < 1) bt = 1; break;\n\t\t\tcase 's':\n\t\t\t\tif((ssm=out[i].v.match(/\\.0+$/))) ss0=Math.max(ss0,ssm[0].length-1);\n\t\t\t\tif(bt < 3) bt = 3;\n\t\t\t/* falls through */\n\t\t\tcase 'd': case 'y': case 'M': case 'e': lst=out[i].t; break;\n\t\t\tcase 'm': if(lst === 's') { out[i].t = 'M'; if(bt < 2) bt = 2; } break;\n\t\t\tcase 'X': /*if(out[i].v === \"B2\");*/\n\t\t\t\tbreak;\n\t\t\tcase 'Z':\n\t\t\t\tif(bt < 1 && out[i].v.match(/[Hh]/)) bt = 1;\n\t\t\t\tif(bt < 2 && out[i].v.match(/[Mm]/)) bt = 2;\n\t\t\t\tif(bt < 3 && out[i].v.match(/[Ss]/)) bt = 3;\n\t\t}\n\t}\n\t/* time rounding depends on presence of minute / second / usec fields */\n\tswitch(bt) {\n\t\tcase 0: break;\n\t\tcase 1:\n\t\t\t/*::if(!dt) break;*/\n\t\t\tif(dt.u >= 0.5) { dt.u = 0; ++dt.S; }\n\t\t\tif(dt.S >=  60) { dt.S = 0; ++dt.M; }\n\t\t\tif(dt.M >=  60) { dt.M = 0; ++dt.H; }\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\t/*::if(!dt) break;*/\n\t\t\tif(dt.u >= 0.5) { dt.u = 0; ++dt.S; }\n\t\t\tif(dt.S >=  60) { dt.S = 0; ++dt.M; }\n\t\t\tbreak;\n\t}\n\n\t/* replace fields */\n\tvar nstr = \"\", jj;\n\tfor(i=0; i < out.length; ++i) {\n\t\tswitch(out[i].t) {\n\t\t\tcase 't': case 'T': case ' ': case 'D': break;\n\t\t\tcase 'X': out[i].v = \"\"; out[i].t = \";\"; break;\n\t\t\tcase 'd': case 'm': case 'y': case 'h': case 'H': case 'M': case 's': case 'e': case 'b': case 'Z':\n\t\t\t\t/*::if(!dt) throw \"unreachable\"; */\n\t\t\t\tout[i].v = SSF_write_date(out[i].t.charCodeAt(0), out[i].v, dt, ss0);\n\t\t\t\tout[i].t = 't'; break;\n\t\t\tcase 'n': case '?':\n\t\t\t\tjj = i+1;\n\t\t\t\twhile(out[jj] != null && (\n\t\t\t\t\t(c=out[jj].t) === \"?\" || c === \"D\" ||\n\t\t\t\t\t((c === \" \" || c === \"t\") && out[jj+1] != null && (out[jj+1].t === '?' || out[jj+1].t === \"t\" && out[jj+1].v === '/')) ||\n\t\t\t\t\t(out[i].t === '(' && (c === ' ' || c === 'n' || c === ')')) ||\n\t\t\t\t\t(c === 't' && (out[jj].v === '/' || out[jj].v === ' ' && out[jj+1] != null && out[jj+1].t == '?'))\n\t\t\t\t)) {\n\t\t\t\t\tout[i].v += out[jj].v;\n\t\t\t\t\tout[jj] = {v:\"\", t:\";\"}; ++jj;\n\t\t\t\t}\n\t\t\t\tnstr += out[i].v;\n\t\t\t\ti = jj-1; break;\n\t\t\tcase 'G': out[i].t = 't'; out[i].v = SSF_general(v,opts); break;\n\t\t}\n\t}\n\tvar vv = \"\", myv, ostr;\n\tif(nstr.length > 0) {\n\t\tif(nstr.charCodeAt(0) == 40) /* '(' */ {\n\t\t\tmyv = (v<0&&nstr.charCodeAt(0) === 45 ? -v : v);\n\t\t\tostr = write_num('n', nstr, myv);\n\t\t} else {\n\t\t\tmyv = (v<0 && flen > 1 ? -v : v);\n\t\t\tostr = write_num('n', nstr, myv);\n\t\t\tif(myv < 0 && out[0] && out[0].t == 't') {\n\t\t\t\tostr = ostr.substr(1);\n\t\t\t\tout[0].v = \"-\" + out[0].v;\n\t\t\t}\n\t\t}\n\t\tjj=ostr.length-1;\n\t\tvar decpt = out.length;\n\t\tfor(i=0; i < out.length; ++i) if(out[i] != null && out[i].t != 't' && out[i].v.indexOf(\".\") > -1) { decpt = i; break; }\n\t\tvar lasti=out.length;\n\t\tif(decpt === out.length && ostr.indexOf(\"E\") === -1) {\n\t\t\tfor(i=out.length-1; i>= 0;--i) {\n\t\t\t\tif(out[i] == null || 'n?'.indexOf(out[i].t) === -1) continue;\n\t\t\t\tif(jj>=out[i].v.length-1) { jj -= out[i].v.length; out[i].v = ostr.substr(jj+1, out[i].v.length); }\n\t\t\t\telse if(jj < 0) out[i].v = \"\";\n\t\t\t\telse { out[i].v = ostr.substr(0, jj+1); jj = -1; }\n\t\t\t\tout[i].t = 't';\n\t\t\t\tlasti = i;\n\t\t\t}\n\t\t\tif(jj>=0 && lasti<out.length) out[lasti].v = ostr.substr(0,jj+1) + out[lasti].v;\n\t\t}\n\t\telse if(decpt !== out.length && ostr.indexOf(\"E\") === -1) {\n\t\t\tjj = ostr.indexOf(\".\")-1;\n\t\t\tfor(i=decpt; i>= 0; --i) {\n\t\t\t\tif(out[i] == null || 'n?'.indexOf(out[i].t) === -1) continue;\n\t\t\t\tj=out[i].v.indexOf(\".\")>-1&&i===decpt?out[i].v.indexOf(\".\")-1:out[i].v.length-1;\n\t\t\t\tvv = out[i].v.substr(j+1);\n\t\t\t\tfor(; j>=0; --j) {\n\t\t\t\t\tif(jj>=0 && (out[i].v.charAt(j) === \"0\" || out[i].v.charAt(j) === \"#\")) vv = ostr.charAt(jj--) + vv;\n\t\t\t\t}\n\t\t\t\tout[i].v = vv;\n\t\t\t\tout[i].t = 't';\n\t\t\t\tlasti = i;\n\t\t\t}\n\t\t\tif(jj>=0 && lasti<out.length) out[lasti].v = ostr.substr(0,jj+1) + out[lasti].v;\n\t\t\tjj = ostr.indexOf(\".\")+1;\n\t\t\tfor(i=decpt; i<out.length; ++i) {\n\t\t\t\tif(out[i] == null || ('n?('.indexOf(out[i].t) === -1 && i !== decpt)) continue;\n\t\t\t\tj=out[i].v.indexOf(\".\")>-1&&i===decpt?out[i].v.indexOf(\".\")+1:0;\n\t\t\t\tvv = out[i].v.substr(0,j);\n\t\t\t\tfor(; j<out[i].v.length; ++j) {\n\t\t\t\t\tif(jj<ostr.length) vv += ostr.charAt(jj++);\n\t\t\t\t}\n\t\t\t\tout[i].v = vv;\n\t\t\t\tout[i].t = 't';\n\t\t\t\tlasti = i;\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=0; i<out.length; ++i) if(out[i] != null && 'n?'.indexOf(out[i].t)>-1) {\n\t\tmyv = (flen >1 && v < 0 && i>0 && out[i-1].v === \"-\" ? -v:v);\n\t\tout[i].v = write_num(out[i].t, out[i].v, myv);\n\t\tout[i].t = 't';\n\t}\n\tvar retval = \"\";\n\tfor(i=0; i !== out.length; ++i) if(out[i] != null) retval += out[i].v;\n\treturn retval;\n}\n\nvar cfregex2 = /\\[(=|>[=]?|<[>=]?)(-?\\d+(?:\\.\\d*)?)\\]/;\nfunction chkcond(v, rr) {\n\tif(rr == null) return false;\n\tvar thresh = parseFloat(rr[2]);\n\tswitch(rr[1]) {\n\t\tcase \"=\":  if(v == thresh) return true; break;\n\t\tcase \">\":  if(v >  thresh) return true; break;\n\t\tcase \"<\":  if(v <  thresh) return true; break;\n\t\tcase \"<>\": if(v != thresh) return true; break;\n\t\tcase \">=\": if(v >= thresh) return true; break;\n\t\tcase \"<=\": if(v <= thresh) return true; break;\n\t}\n\treturn false;\n}\nfunction choose_fmt(f/*:string*/, v/*:any*/) {\n\tvar fmt = SSF_split_fmt(f);\n\tvar l = fmt.length, lat = fmt[l-1].indexOf(\"@\");\n\tif(l<4 && lat>-1) --l;\n\tif(fmt.length > 4) throw new Error(\"cannot find right format for |\" + fmt.join(\"|\") + \"|\");\n\tif(typeof v !== \"number\") return [4, fmt.length === 4 || lat>-1?fmt[fmt.length-1]:\"@\"];\n\tswitch(fmt.length) {\n\t\tcase 1: fmt = lat>-1 ? [\"General\", \"General\", \"General\", fmt[0]] : [fmt[0], fmt[0], fmt[0], \"@\"]; break;\n\t\tcase 2: fmt = lat>-1 ? [fmt[0], fmt[0], fmt[0], fmt[1]] : [fmt[0], fmt[1], fmt[0], \"@\"]; break;\n\t\tcase 3: fmt = lat>-1 ? [fmt[0], fmt[1], fmt[0], fmt[2]] : [fmt[0], fmt[1], fmt[2], \"@\"]; break;\n\t\tcase 4: break;\n\t}\n\tvar ff = v > 0 ? fmt[0] : v < 0 ? fmt[1] : fmt[2];\n\tif(fmt[0].indexOf(\"[\") === -1 && fmt[1].indexOf(\"[\") === -1) return [l, ff];\n\tif(fmt[0].match(/\\[[=<>]/) != null || fmt[1].match(/\\[[=<>]/) != null) {\n\t\tvar m1 = fmt[0].match(cfregex2);\n\t\tvar m2 = fmt[1].match(cfregex2);\n\t\treturn chkcond(v, m1) ? [l, fmt[0]] : chkcond(v, m2) ? [l, fmt[1]] : [l, fmt[m1 != null && m2 != null ? 2 : 1]];\n\t}\n\treturn [l, ff];\n}\nfunction SSF_format(fmt/*:string|number*/,v/*:any*/,o/*:?any*/) {\n\tif(o == null) o = {};\n\tvar sfmt = \"\";\n\tswitch(typeof fmt) {\n\t\tcase \"string\":\n\t\t\tif(fmt == \"m/d/yy\" && o.dateNF) sfmt = o.dateNF;\n\t\t\telse sfmt = fmt;\n\t\t\tbreak;\n\t\tcase \"number\":\n\t\t\tif(fmt == 14 && o.dateNF) sfmt = o.dateNF;\n\t\t\telse sfmt = (o.table != null ? (o.table/*:any*/) : table_fmt)[fmt];\n\t\t\tif(sfmt == null) sfmt = (o.table && o.table[SSF_default_map[fmt]]) || table_fmt[SSF_default_map[fmt]];\n\t\t\tif(sfmt == null) sfmt = SSF_default_str[fmt] || \"General\";\n\t\t\tbreak;\n\t}\n\tif(SSF_isgeneral(sfmt,0)) return SSF_general(v, o);\n\tif(v instanceof Date) v = datenum_local(v, o.date1904);\n\tvar f = choose_fmt(sfmt, v);\n\tif(SSF_isgeneral(f[1])) return SSF_general(v, o);\n\tif(v === true) v = \"TRUE\"; else if(v === false) v = \"FALSE\";\n\telse if(v === \"\" || v == null) return \"\";\n\treturn eval_fmt(f[1], v, o, f[0]);\n}\nfunction SSF_load(fmt/*:string*/, idx/*:?number*/)/*:number*/ {\n\tif(typeof idx != 'number') {\n\t\tidx = +idx || -1;\n/*::if(typeof idx != 'number') return 0x188; */\n\t\tfor(var i = 0; i < 0x0188; ++i) {\n/*::if(typeof idx != 'number') return 0x188; */\n\t\t\tif(table_fmt[i] == undefined) { if(idx < 0) idx = i; continue; }\n\t\t\tif(table_fmt[i] == fmt) { idx = i; break; }\n\t\t}\n/*::if(typeof idx != 'number') return 0x188; */\n\t\tif(idx < 0) idx = 0x187;\n\t}\n/*::if(typeof idx != 'number') return 0x188; */\n\ttable_fmt[idx] = fmt;\n\treturn idx;\n}\nfunction SSF_load_table(tbl/*:SSFTable*/)/*:void*/ {\n\tfor(var i=0; i!=0x0188; ++i)\n\t\tif(tbl[i] !== undefined) SSF_load(tbl[i], i);\n}\n\nfunction make_ssf() {\n\ttable_fmt = SSF_init_table();\n}\n\nvar SSF = {\n\tformat: SSF_format,\n\tload: SSF_load,\n\t_table: table_fmt,\n\tload_table: SSF_load_table,\n\tparse_date_code: SSF_parse_date_code,\n\tis_date: fmt_is_date,\n\tget_table: function get_table() { return SSF._table = table_fmt; }\n};\n\nvar SSFImplicit/*{[number]:string}*/ = ({\n\t\"5\": '\"$\"#,##0_);\\\\(\"$\"#,##0\\\\)',\n\t\"6\": '\"$\"#,##0_);[Red]\\\\(\"$\"#,##0\\\\)',\n\t\"7\": '\"$\"#,##0.00_);\\\\(\"$\"#,##0.00\\\\)',\n\t\"8\": '\"$\"#,##0.00_);[Red]\\\\(\"$\"#,##0.00\\\\)',\n\t\"23\": 'General', \"24\": 'General', \"25\": 'General', \"26\": 'General',\n\t\"27\": 'm/d/yy', \"28\": 'm/d/yy', \"29\": 'm/d/yy', \"30\": 'm/d/yy', \"31\": 'm/d/yy',\n\t\"32\": 'h:mm:ss', \"33\": 'h:mm:ss', \"34\": 'h:mm:ss', \"35\": 'h:mm:ss',\n\t\"36\": 'm/d/yy',\n\t\"41\": '_(* #,##0_);_(* \\(#,##0\\);_(* \"-\"_);_(@_)',\n\t\"42\": '_(\"$\"* #,##0_);_(\"$\"* \\(#,##0\\);_(\"$\"* \"-\"_);_(@_)',\n\t\"43\": '_(* #,##0.00_);_(* \\(#,##0.00\\);_(* \"-\"??_);_(@_)',\n\t\"44\": '_(\"$\"* #,##0.00_);_(\"$\"* \\(#,##0.00\\);_(\"$\"* \"-\"??_);_(@_)',\n\t\"50\": 'm/d/yy', \"51\": 'm/d/yy', \"52\": 'm/d/yy', \"53\": 'm/d/yy', \"54\": 'm/d/yy',\n\t\"55\": 'm/d/yy', \"56\": 'm/d/yy', \"57\": 'm/d/yy', \"58\": 'm/d/yy',\n\t\"59\": '0',\n\t\"60\": '0.00',\n\t\"61\": '#,##0',\n\t\"62\": '#,##0.00',\n\t\"63\": '\"$\"#,##0_);\\\\(\"$\"#,##0\\\\)',\n\t\"64\": '\"$\"#,##0_);[Red]\\\\(\"$\"#,##0\\\\)',\n\t\"65\": '\"$\"#,##0.00_);\\\\(\"$\"#,##0.00\\\\)',\n\t\"66\": '\"$\"#,##0.00_);[Red]\\\\(\"$\"#,##0.00\\\\)',\n\t\"67\": '0%',\n\t\"68\": '0.00%',\n\t\"69\": '# ?/?',\n\t\"70\": '# ??/??',\n\t\"71\": 'm/d/yy',\n\t\"72\": 'm/d/yy',\n\t\"73\": 'd-mmm-yy',\n\t\"74\": 'd-mmm',\n\t\"75\": 'mmm-yy',\n\t\"76\": 'h:mm',\n\t\"77\": 'h:mm:ss',\n\t\"78\": 'm/d/yy h:mm',\n\t\"79\": 'mm:ss',\n\t\"80\": '[h]:mm:ss',\n\t\"81\": 'mmss.0'\n}/*:any*/);\n\n/* dateNF parse TODO: move to SSF */\nvar dateNFregex = /[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;\nfunction dateNF_regex(dateNF/*:string|number*/)/*:RegExp*/ {\n\tvar fmt = typeof dateNF == \"number\" ? table_fmt[dateNF] : dateNF;\n\tfmt = fmt.replace(dateNFregex, \"(\\\\d+)\");\n\treturn new RegExp(\"^\" + fmt + \"$\");\n}\nfunction dateNF_fix(str/*:string*/, dateNF/*:string*/, match/*:Array<string>*/)/*:string*/ {\n\tvar Y = -1, m = -1, d = -1, H = -1, M = -1, S = -1;\n\t(dateNF.match(dateNFregex)||[]).forEach(function(n, i) {\n\t\tvar v = parseInt(match[i+1], 10);\n\t\tswitch(n.toLowerCase().charAt(0)) {\n\t\t\tcase 'y': Y = v; break; case 'd': d = v; break;\n\t\t\tcase 'h': H = v; break; case 's': S = v; break;\n\t\t\tcase 'm': if(H >= 0) M = v; else m = v; break;\n\t\t}\n\t});\n\tif(S >= 0 && M == -1 && m >= 0) { M = m; m = -1; }\n\tvar datestr = ((\"\" + (Y>=0?Y: new Date().getFullYear())).slice(-4) + \"-\" + (\"00\" + (m>=1?m:1)).slice(-2) + \"-\" + (\"00\" + (d>=1?d:1)).slice(-2));\n\tif(datestr.length == 7) datestr = \"0\" + datestr;\n\tif(datestr.length == 8) datestr = \"20\" + datestr;\n\tvar timestr = ((\"00\" + (H>=0?H:0)).slice(-2) + \":\" + (\"00\" + (M>=0?M:0)).slice(-2) + \":\" + (\"00\" + (S>=0?S:0)).slice(-2));\n\tif(H == -1 && M == -1 && S == -1) return datestr;\n\tif(Y == -1 && m == -1 && d == -1) return timestr;\n\treturn datestr + \"T\" + timestr;\n}\n\n/*::\ndeclare var ReadShift:any;\ndeclare var CheckField:any;\ndeclare var prep_blob:any;\ndeclare var __readUInt32LE:any;\ndeclare var __readInt32LE:any;\ndeclare var __toBuffer:any;\ndeclare var __utf16le:any;\ndeclare var bconcat:any;\ndeclare var s2a:any;\ndeclare var chr0:any;\ndeclare var chr1:any;\ndeclare var has_buf:boolean;\ndeclare var new_buf:any;\ndeclare var new_raw_buf:any;\ndeclare var new_unsafe_buf:any;\ndeclare var Buffer_from:any;\n*/\n/* cfb.js (C) 2013-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*jshint eqnull:true */\n/*exported CFB */\n/*global Uint8Array:false, Uint16Array:false */\n\n/*::\ntype SectorEntry = {\n\tname?:string;\n\tnodes?:Array<number>;\n\tdata:RawBytes;\n};\ntype SectorList = {\n\t[k:string|number]:SectorEntry;\n\tname:?string;\n\tfat_addrs:Array<number>;\n\tssz:number;\n}\ntype CFBFiles = {[n:string]:CFBEntry};\n*/\n/* crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*exported CRC32 */\nvar CRC32 = /*#__PURE__*/(function() {\nvar CRC32 = {};\nCRC32.version = '1.2.0';\n/* see perf/crc32table.js */\n/*global Int32Array */\nfunction signed_crc_table()/*:any*/ {\n\tvar c = 0, table/*:Array<number>*/ = new Array(256);\n\n\tfor(var n =0; n != 256; ++n){\n\t\tc = n;\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\ttable[n] = c;\n\t}\n\n\treturn typeof Int32Array !== 'undefined' ? new Int32Array(table) : table;\n}\n\nvar T0 = signed_crc_table();\nfunction slice_by_16_tables(T) {\n\tvar c = 0, v = 0, n = 0, table/*:Array<number>*/ = typeof Int32Array !== 'undefined' ? new Int32Array(4096) : new Array(4096) ;\n\n\tfor(n = 0; n != 256; ++n) table[n] = T[n];\n\tfor(n = 0; n != 256; ++n) {\n\t\tv = T[n];\n\t\tfor(c = 256 + n; c < 4096; c += 256) v = table[c] = (v >>> 8) ^ T[v & 0xFF];\n\t}\n\tvar out = [];\n\tfor(n = 1; n != 16; ++n) out[n - 1] = typeof Int32Array !== 'undefined' ? table.subarray(n * 256, n * 256 + 256) : table.slice(n * 256, n * 256 + 256);\n\treturn out;\n}\nvar TT = slice_by_16_tables(T0);\nvar T1 = TT[0],  T2 = TT[1],  T3 = TT[2],  T4 = TT[3],  T5 = TT[4];\nvar T6 = TT[5],  T7 = TT[6],  T8 = TT[7],  T9 = TT[8],  Ta = TT[9];\nvar Tb = TT[10], Tc = TT[11], Td = TT[12], Te = TT[13], Tf = TT[14];\nfunction crc32_bstr(bstr/*:string*/, seed/*:number*/)/*:number*/ {\n\tvar C = seed/*:: ? 0 : 0 */ ^ -1;\n\tfor(var i = 0, L = bstr.length; i < L;) C = (C>>>8) ^ T0[(C^bstr.charCodeAt(i++))&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_buf(B/*:Uint8Array|Array<number>*/, seed/*:number*/)/*:number*/ {\n\tvar C = seed/*:: ? 0 : 0 */ ^ -1, L = B.length - 15, i = 0;\n\tfor(; i < L;) C =\n\t\tTf[B[i++] ^ (C & 255)] ^\n\t\tTe[B[i++] ^ ((C >> 8) & 255)] ^\n\t\tTd[B[i++] ^ ((C >> 16) & 255)] ^\n\t\tTc[B[i++] ^ (C >>> 24)] ^\n\t\tTb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^\n\t\tT7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^\n\t\tT3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];\n\tL += 15;\n\twhile(i < L) C = (C>>>8) ^ T0[(C^B[i++])&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_str(str/*:string*/, seed/*:number*/)/*:number*/ {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = str.length, c = 0, d = 0; i < L;) {\n\t\tc = str.charCodeAt(i++);\n\t\tif(c < 0x80) {\n\t\t\tC = (C>>>8) ^ T0[(C^c)&0xFF];\n\t\t} else if(c < 0x800) {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (192|((c>>6)&31)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t} else if(c >= 0xD800 && c < 0xE000) {\n\t\t\tc = (c&1023)+64; d = str.charCodeAt(i++)&1023;\n\t\t\tC = (C>>>8) ^ T0[(C ^ (240|((c>>8)&7)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>2)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((d>>6)&15)|((c&3)<<4)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(d&63)))&0xFF];\n\t\t} else {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (224|((c>>12)&15)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>6)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t}\n\t}\n\treturn ~C;\n}\nCRC32.table = T0;\nCRC32.bstr = crc32_bstr;\nCRC32.buf = crc32_buf;\nCRC32.str = crc32_str;\nreturn CRC32;\n})();\n/* [MS-CFB] v20171201 */\nvar CFB = /*#__PURE__*/(function _CFB(){\nvar exports = {};\nexports.version = '1.2.1';\n/* [MS-CFB] 2.6.4 */\nfunction namecmp(l/*:string*/, r/*:string*/)/*:number*/ {\n\tvar L = l.split(\"/\"), R = r.split(\"/\");\n\tfor(var i = 0, c = 0, Z = Math.min(L.length, R.length); i < Z; ++i) {\n\t\tif((c = L[i].length - R[i].length)) return c;\n\t\tif(L[i] != R[i]) return L[i] < R[i] ? -1 : 1;\n\t}\n\treturn L.length - R.length;\n}\nfunction dirname(p/*:string*/)/*:string*/ {\n\tif(p.charAt(p.length - 1) == \"/\") return (p.slice(0,-1).indexOf(\"/\") === -1) ? p : dirname(p.slice(0, -1));\n\tvar c = p.lastIndexOf(\"/\");\n\treturn (c === -1) ? p : p.slice(0, c+1);\n}\n\nfunction filename(p/*:string*/)/*:string*/ {\n\tif(p.charAt(p.length - 1) == \"/\") return filename(p.slice(0, -1));\n\tvar c = p.lastIndexOf(\"/\");\n\treturn (c === -1) ? p : p.slice(c+1);\n}\n/* -------------------------------------------------------------------------- */\n/* DOS Date format:\n   high|YYYYYYYm.mmmddddd.HHHHHMMM.MMMSSSSS|low\n   add 1980 to stored year\n   stored second should be doubled\n*/\n\n/* write JS date to buf as a DOS date */\nfunction write_dos_date(buf/*:CFBlob*/, date/*:Date|string*/) {\n\tif(typeof date === \"string\") date = new Date(date);\n\tvar hms/*:number*/ = date.getHours();\n\thms = hms << 6 | date.getMinutes();\n\thms = hms << 5 | (date.getSeconds()>>>1);\n\tbuf.write_shift(2, hms);\n\tvar ymd/*:number*/ = (date.getFullYear() - 1980);\n\tymd = ymd << 4 | (date.getMonth()+1);\n\tymd = ymd << 5 | date.getDate();\n\tbuf.write_shift(2, ymd);\n}\n\n/* read four bytes from buf and interpret as a DOS date */\nfunction parse_dos_date(buf/*:CFBlob*/)/*:Date*/ {\n\tvar hms = buf.read_shift(2) & 0xFFFF;\n\tvar ymd = buf.read_shift(2) & 0xFFFF;\n\tvar val = new Date();\n\tvar d = ymd & 0x1F; ymd >>>= 5;\n\tvar m = ymd & 0x0F; ymd >>>= 4;\n\tval.setMilliseconds(0);\n\tval.setFullYear(ymd + 1980);\n\tval.setMonth(m-1);\n\tval.setDate(d);\n\tvar S = hms & 0x1F; hms >>>= 5;\n\tvar M = hms & 0x3F; hms >>>= 6;\n\tval.setHours(hms);\n\tval.setMinutes(M);\n\tval.setSeconds(S<<1);\n\treturn val;\n}\nfunction parse_extra_field(blob/*:CFBlob*/)/*:any*/ {\n\tprep_blob(blob, 0);\n\tvar o = /*::(*/{}/*:: :any)*/;\n\tvar flags = 0;\n\twhile(blob.l <= blob.length - 4) {\n\t\tvar type = blob.read_shift(2);\n\t\tvar sz = blob.read_shift(2), tgt = blob.l + sz;\n\t\tvar p = {};\n\t\tswitch(type) {\n\t\t\t/* UNIX-style Timestamps */\n\t\t\tcase 0x5455: {\n\t\t\t\tflags = blob.read_shift(1);\n\t\t\t\tif(flags & 1) p.mtime = blob.read_shift(4);\n\t\t\t\t/* for some reason, CD flag corresponds to LFH */\n\t\t\t\tif(sz > 5) {\n\t\t\t\t\tif(flags & 2) p.atime = blob.read_shift(4);\n\t\t\t\t\tif(flags & 4) p.ctime = blob.read_shift(4);\n\t\t\t\t}\n\t\t\t\tif(p.mtime) p.mt = new Date(p.mtime*1000);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tblob.l = tgt;\n\t\to[type] = p;\n\t}\n\treturn o;\n}\nvar fs/*:: = require('fs'); */;\nfunction get_fs() { return fs || (fs = {}); }\nfunction parse(file/*:RawBytes*/, options/*:CFBReadOpts*/)/*:CFBContainer*/ {\nif(file[0] == 0x50 && file[1] == 0x4b) return parse_zip(file, options);\nif((file[0] | 0x20) == 0x6d && (file[1]|0x20) == 0x69) return parse_mad(file, options);\nif(file.length < 512) throw new Error(\"CFB file size \" + file.length + \" < 512\");\nvar mver = 3;\nvar ssz = 512;\nvar nmfs = 0; // number of mini FAT sectors\nvar difat_sec_cnt = 0;\nvar dir_start = 0;\nvar minifat_start = 0;\nvar difat_start = 0;\n\nvar fat_addrs/*:Array<number>*/ = []; // locations of FAT sectors\n\n/* [MS-CFB] 2.2 Compound File Header */\nvar blob/*:CFBlob*/ = /*::(*/file.slice(0,512)/*:: :any)*/;\nprep_blob(blob, 0);\n\n/* major version */\nvar mv = check_get_mver(blob);\nmver = mv[0];\nswitch(mver) {\n\tcase 3: ssz = 512; break; case 4: ssz = 4096; break;\n\tcase 0: if(mv[1] == 0) return parse_zip(file, options);\n\t/* falls through */\n\tdefault: throw new Error(\"Major Version: Expected 3 or 4 saw \" + mver);\n}\n\n/* reprocess header */\nif(ssz !== 512) { blob = /*::(*/file.slice(0,ssz)/*:: :any)*/; prep_blob(blob, 28 /* blob.l */); }\n/* Save header for final object */\nvar header/*:RawBytes*/ = file.slice(0,ssz);\n\ncheck_shifts(blob, mver);\n\n// Number of Directory Sectors\nvar dir_cnt/*:number*/ = blob.read_shift(4, 'i');\nif(mver === 3 && dir_cnt !== 0) throw new Error('# Directory Sectors: Expected 0 saw ' + dir_cnt);\n\n// Number of FAT Sectors\nblob.l += 4;\n\n// First Directory Sector Location\ndir_start = blob.read_shift(4, 'i');\n\n// Transaction Signature\nblob.l += 4;\n\n// Mini Stream Cutoff Size\nblob.chk('00100000', 'Mini Stream Cutoff Size: ');\n\n// First Mini FAT Sector Location\nminifat_start = blob.read_shift(4, 'i');\n\n// Number of Mini FAT Sectors\nnmfs = blob.read_shift(4, 'i');\n\n// First DIFAT sector location\ndifat_start = blob.read_shift(4, 'i');\n\n// Number of DIFAT Sectors\ndifat_sec_cnt = blob.read_shift(4, 'i');\n\n// Grab FAT Sector Locations\nfor(var q = -1, j = 0; j < 109; ++j) { /* 109 = (512 - blob.l)>>>2; */\n\tq = blob.read_shift(4, 'i');\n\tif(q<0) break;\n\tfat_addrs[j] = q;\n}\n\n/** Break the file up into sectors */\nvar sectors/*:Array<RawBytes>*/ = sectorify(file, ssz);\n\nsleuth_fat(difat_start, difat_sec_cnt, sectors, ssz, fat_addrs);\n\n/** Chains */\nvar sector_list/*:SectorList*/ = make_sector_list(sectors, dir_start, fat_addrs, ssz);\n\nsector_list[dir_start].name = \"!Directory\";\nif(nmfs > 0 && minifat_start !== ENDOFCHAIN) sector_list[minifat_start].name = \"!MiniFAT\";\nsector_list[fat_addrs[0]].name = \"!FAT\";\nsector_list.fat_addrs = fat_addrs;\nsector_list.ssz = ssz;\n\n/* [MS-CFB] 2.6.1 Compound File Directory Entry */\nvar files/*:CFBFiles*/ = {}, Paths/*:Array<string>*/ = [], FileIndex/*:CFBFileIndex*/ = [], FullPaths/*:Array<string>*/ = [];\nread_directory(dir_start, sector_list, sectors, Paths, nmfs, files, FileIndex, minifat_start);\n\nbuild_full_paths(FileIndex, FullPaths, Paths);\nPaths.shift();\n\nvar o = {\n\tFileIndex: FileIndex,\n\tFullPaths: FullPaths\n};\n\n// $FlowIgnore\nif(options && options.raw) o.raw = {header: header, sectors: sectors};\nreturn o;\n} // parse\n\n/* [MS-CFB] 2.2 Compound File Header -- read up to major version */\nfunction check_get_mver(blob/*:CFBlob*/)/*:[number, number]*/ {\n\tif(blob[blob.l] == 0x50 && blob[blob.l + 1] == 0x4b) return [0, 0];\n\t// header signature 8\n\tblob.chk(HEADER_SIGNATURE, 'Header Signature: ');\n\n\t// clsid 16\n\t//blob.chk(HEADER_CLSID, 'CLSID: ');\n\tblob.l += 16;\n\n\t// minor version 2\n\tvar mver/*:number*/ = blob.read_shift(2, 'u');\n\n\treturn [blob.read_shift(2,'u'), mver];\n}\nfunction check_shifts(blob/*:CFBlob*/, mver/*:number*/)/*:void*/ {\n\tvar shift = 0x09;\n\n\t// Byte Order\n\t//blob.chk('feff', 'Byte Order: '); // note: some writers put 0xffff\n\tblob.l += 2;\n\n\t// Sector Shift\n\tswitch((shift = blob.read_shift(2))) {\n\t\tcase 0x09: if(mver != 3) throw new Error('Sector Shift: Expected 9 saw ' + shift); break;\n\t\tcase 0x0c: if(mver != 4) throw new Error('Sector Shift: Expected 12 saw ' + shift); break;\n\t\tdefault: throw new Error('Sector Shift: Expected 9 or 12 saw ' + shift);\n\t}\n\n\t// Mini Sector Shift\n\tblob.chk('0600', 'Mini Sector Shift: ');\n\n\t// Reserved\n\tblob.chk('000000000000', 'Reserved: ');\n}\n\n/** Break the file up into sectors */\nfunction sectorify(file/*:RawBytes*/, ssz/*:number*/)/*:Array<RawBytes>*/ {\n\tvar nsectors = Math.ceil(file.length/ssz)-1;\n\tvar sectors/*:Array<RawBytes>*/ = [];\n\tfor(var i=1; i < nsectors; ++i) sectors[i-1] = file.slice(i*ssz,(i+1)*ssz);\n\tsectors[nsectors-1] = file.slice(nsectors*ssz);\n\treturn sectors;\n}\n\n/* [MS-CFB] 2.6.4 Red-Black Tree */\nfunction build_full_paths(FI/*:CFBFileIndex*/, FP/*:Array<string>*/, Paths/*:Array<string>*/)/*:void*/ {\n\tvar i = 0, L = 0, R = 0, C = 0, j = 0, pl = Paths.length;\n\tvar dad/*:Array<number>*/ = [], q/*:Array<number>*/ = [];\n\n\tfor(; i < pl; ++i) { dad[i]=q[i]=i; FP[i]=Paths[i]; }\n\n\tfor(; j < q.length; ++j) {\n\t\ti = q[j];\n\t\tL = FI[i].L; R = FI[i].R; C = FI[i].C;\n\t\tif(dad[i] === i) {\n\t\t\tif(L !== -1 /*NOSTREAM*/ && dad[L] !== L) dad[i] = dad[L];\n\t\t\tif(R !== -1 && dad[R] !== R) dad[i] = dad[R];\n\t\t}\n\t\tif(C !== -1 /*NOSTREAM*/) dad[C] = i;\n\t\tif(L !== -1 && i != dad[i]) { dad[L] = dad[i]; if(q.lastIndexOf(L) < j) q.push(L); }\n\t\tif(R !== -1 && i != dad[i]) { dad[R] = dad[i]; if(q.lastIndexOf(R) < j) q.push(R); }\n\t}\n\tfor(i=1; i < pl; ++i) if(dad[i] === i) {\n\t\tif(R !== -1 /*NOSTREAM*/ && dad[R] !== R) dad[i] = dad[R];\n\t\telse if(L !== -1 && dad[L] !== L) dad[i] = dad[L];\n\t}\n\n\tfor(i=1; i < pl; ++i) {\n\t\tif(FI[i].type === 0 /* unknown */) continue;\n\t\tj = i;\n\t\tif(j != dad[j]) do {\n\t\t\tj = dad[j];\n\t\t\tFP[i] = FP[j] + \"/\" + FP[i];\n\t\t} while (j !== 0 && -1 !== dad[j] && j != dad[j]);\n\t\tdad[i] = -1;\n\t}\n\n\tFP[0] += \"/\";\n\tfor(i=1; i < pl; ++i) {\n\t\tif(FI[i].type !== 2 /* stream */) FP[i] += \"/\";\n\t}\n}\n\nfunction get_mfat_entry(entry/*:CFBEntry*/, payload/*:RawBytes*/, mini/*:?RawBytes*/)/*:CFBlob*/ {\n\tvar start = entry.start, size = entry.size;\n\t//return (payload.slice(start*MSSZ, start*MSSZ + size)/*:any*/);\n\tvar o = [];\n\tvar idx = start;\n\twhile(mini && size > 0 && idx >= 0) {\n\t\to.push(payload.slice(idx * MSSZ, idx * MSSZ + MSSZ));\n\t\tsize -= MSSZ;\n\t\tidx = __readInt32LE(mini, idx * 4);\n\t}\n\tif(o.length === 0) return (new_buf(0)/*:any*/);\n\treturn (bconcat(o).slice(0, entry.size)/*:any*/);\n}\n\n/** Chase down the rest of the DIFAT chain to build a comprehensive list\n    DIFAT chains by storing the next sector number as the last 32 bits */\nfunction sleuth_fat(idx/*:number*/, cnt/*:number*/, sectors/*:Array<RawBytes>*/, ssz/*:number*/, fat_addrs)/*:void*/ {\n\tvar q/*:number*/ = ENDOFCHAIN;\n\tif(idx === ENDOFCHAIN) {\n\t\tif(cnt !== 0) throw new Error(\"DIFAT chain shorter than expected\");\n\t} else if(idx !== -1 /*FREESECT*/) {\n\t\tvar sector = sectors[idx], m = (ssz>>>2)-1;\n\t\tif(!sector) return;\n\t\tfor(var i = 0; i < m; ++i) {\n\t\t\tif((q = __readInt32LE(sector,i*4)) === ENDOFCHAIN) break;\n\t\t\tfat_addrs.push(q);\n\t\t}\n\t\tsleuth_fat(__readInt32LE(sector,ssz-4),cnt - 1, sectors, ssz, fat_addrs);\n\t}\n}\n\n/** Follow the linked list of sectors for a given starting point */\nfunction get_sector_list(sectors/*:Array<RawBytes>*/, start/*:number*/, fat_addrs/*:Array<number>*/, ssz/*:number*/, chkd/*:?Array<boolean>*/)/*:SectorEntry*/ {\n\tvar buf/*:Array<number>*/ = [], buf_chain/*:Array<any>*/ = [];\n\tif(!chkd) chkd = [];\n\tvar modulus = ssz - 1, j = 0, jj = 0;\n\tfor(j=start; j>=0;) {\n\t\tchkd[j] = true;\n\t\tbuf[buf.length] = j;\n\t\tbuf_chain.push(sectors[j]);\n\t\tvar addr = fat_addrs[Math.floor(j*4/ssz)];\n\t\tjj = ((j*4) & modulus);\n\t\tif(ssz < 4 + jj) throw new Error(\"FAT boundary crossed: \" + j + \" 4 \"+ssz);\n\t\tif(!sectors[addr]) break;\n\t\tj = __readInt32LE(sectors[addr], jj);\n\t}\n\treturn {nodes: buf, data:__toBuffer([buf_chain])};\n}\n\n/** Chase down the sector linked lists */\nfunction make_sector_list(sectors/*:Array<RawBytes>*/, dir_start/*:number*/, fat_addrs/*:Array<number>*/, ssz/*:number*/)/*:SectorList*/ {\n\tvar sl = sectors.length, sector_list/*:SectorList*/ = ([]/*:any*/);\n\tvar chkd/*:Array<boolean>*/ = [], buf/*:Array<number>*/ = [], buf_chain/*:Array<RawBytes>*/ = [];\n\tvar modulus = ssz - 1, i=0, j=0, k=0, jj=0;\n\tfor(i=0; i < sl; ++i) {\n\t\tbuf = ([]/*:Array<number>*/);\n\t\tk = (i + dir_start); if(k >= sl) k-=sl;\n\t\tif(chkd[k]) continue;\n\t\tbuf_chain = [];\n\t\tvar seen = [];\n\t\tfor(j=k; j>=0;) {\n\t\t\tseen[j] = true;\n\t\t\tchkd[j] = true;\n\t\t\tbuf[buf.length] = j;\n\t\t\tbuf_chain.push(sectors[j]);\n\t\t\tvar addr/*:number*/ = fat_addrs[Math.floor(j*4/ssz)];\n\t\t\tjj = ((j*4) & modulus);\n\t\t\tif(ssz < 4 + jj) throw new Error(\"FAT boundary crossed: \" + j + \" 4 \"+ssz);\n\t\t\tif(!sectors[addr]) break;\n\t\t\tj = __readInt32LE(sectors[addr], jj);\n\t\t\tif(seen[j]) break;\n\t\t}\n\t\tsector_list[k] = ({nodes: buf, data:__toBuffer([buf_chain])}/*:SectorEntry*/);\n\t}\n\treturn sector_list;\n}\n\n/* [MS-CFB] 2.6.1 Compound File Directory Entry */\nfunction read_directory(dir_start/*:number*/, sector_list/*:SectorList*/, sectors/*:Array<RawBytes>*/, Paths/*:Array<string>*/, nmfs, files, FileIndex, mini) {\n\tvar minifat_store = 0, pl = (Paths.length?2:0);\n\tvar sector = sector_list[dir_start].data;\n\tvar i = 0, namelen = 0, name;\n\tfor(; i < sector.length; i+= 128) {\n\t\tvar blob/*:CFBlob*/ = /*::(*/sector.slice(i, i+128)/*:: :any)*/;\n\t\tprep_blob(blob, 64);\n\t\tnamelen = blob.read_shift(2);\n\t\tname = __utf16le(blob,0,namelen-pl);\n\t\tPaths.push(name);\n\t\tvar o/*:CFBEntry*/ = ({\n\t\t\tname:  name,\n\t\t\ttype:  blob.read_shift(1),\n\t\t\tcolor: blob.read_shift(1),\n\t\t\tL:     blob.read_shift(4, 'i'),\n\t\t\tR:     blob.read_shift(4, 'i'),\n\t\t\tC:     blob.read_shift(4, 'i'),\n\t\t\tclsid: blob.read_shift(16),\n\t\t\tstate: blob.read_shift(4, 'i'),\n\t\t\tstart: 0,\n\t\t\tsize: 0\n\t\t});\n\t\tvar ctime/*:number*/ = blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2);\n\t\tif(ctime !== 0) o.ct = read_date(blob, blob.l-8);\n\t\tvar mtime/*:number*/ = blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2);\n\t\tif(mtime !== 0) o.mt = read_date(blob, blob.l-8);\n\t\to.start = blob.read_shift(4, 'i');\n\t\to.size = blob.read_shift(4, 'i');\n\t\tif(o.size < 0 && o.start < 0) { o.size = o.type = 0; o.start = ENDOFCHAIN; o.name = \"\"; }\n\t\tif(o.type === 5) { /* root */\n\t\t\tminifat_store = o.start;\n\t\t\tif(nmfs > 0 && minifat_store !== ENDOFCHAIN) sector_list[minifat_store].name = \"!StreamData\";\n\t\t\t/*minifat_size = o.size;*/\n\t\t} else if(o.size >= 4096 /* MSCSZ */) {\n\t\t\to.storage = 'fat';\n\t\t\tif(sector_list[o.start] === undefined) sector_list[o.start] = get_sector_list(sectors, o.start, sector_list.fat_addrs, sector_list.ssz);\n\t\t\tsector_list[o.start].name = o.name;\n\t\t\to.content = (sector_list[o.start].data.slice(0,o.size)/*:any*/);\n\t\t} else {\n\t\t\to.storage = 'minifat';\n\t\t\tif(o.size < 0) o.size = 0;\n\t\t\telse if(minifat_store !== ENDOFCHAIN && o.start !== ENDOFCHAIN && sector_list[minifat_store]) {\n\t\t\t\to.content = get_mfat_entry(o, sector_list[minifat_store].data, (sector_list[mini]||{}).data);\n\t\t\t}\n\t\t}\n\t\tif(o.content) prep_blob(o.content, 0);\n\t\tfiles[name] = o;\n\t\tFileIndex.push(o);\n\t}\n}\n\nfunction read_date(blob/*:RawBytes|CFBlob*/, offset/*:number*/)/*:Date*/ {\n\treturn new Date(( ( (__readUInt32LE(blob,offset+4)/1e7)*Math.pow(2,32)+__readUInt32LE(blob,offset)/1e7 ) - 11644473600)*1000);\n}\n\nfunction read_file(filename/*:string*/, options/*:CFBReadOpts*/) {\n\tget_fs();\n\treturn parse(fs.readFileSync(filename), options);\n}\n\nfunction read(blob/*:RawBytes|string*/, options/*:CFBReadOpts*/) {\n\tvar type = options && options.type;\n\tif(!type) {\n\t\tif(has_buf && Buffer.isBuffer(blob)) type = \"buffer\";\n\t}\n\tswitch(type || \"base64\") {\n\t\tcase \"file\": /*:: if(typeof blob !== 'string') throw \"Must pass a filename when type='file'\"; */return read_file(blob, options);\n\t\tcase \"base64\": /*:: if(typeof blob !== 'string') throw \"Must pass a base64-encoded binary string when type='file'\"; */return parse(s2a(Base64_decode(blob)), options);\n\t\tcase \"binary\": /*:: if(typeof blob !== 'string') throw \"Must pass a binary string when type='file'\"; */return parse(s2a(blob), options);\n\t}\n\treturn parse(/*::typeof blob == 'string' ? new Buffer(blob, 'utf-8') : */blob, options);\n}\n\nfunction init_cfb(cfb/*:CFBContainer*/, opts/*:?any*/)/*:void*/ {\n\tvar o = opts || {}, root = o.root || \"Root Entry\";\n\tif(!cfb.FullPaths) cfb.FullPaths = [];\n\tif(!cfb.FileIndex) cfb.FileIndex = [];\n\tif(cfb.FullPaths.length !== cfb.FileIndex.length) throw new Error(\"inconsistent CFB structure\");\n\tif(cfb.FullPaths.length === 0) {\n\t\tcfb.FullPaths[0] = root + \"/\";\n\t\tcfb.FileIndex[0] = ({ name: root, type: 5 }/*:any*/);\n\t}\n\tif(o.CLSID) cfb.FileIndex[0].clsid = o.CLSID;\n\tseed_cfb(cfb);\n}\nfunction seed_cfb(cfb/*:CFBContainer*/)/*:void*/ {\n\tvar nm = \"\\u0001Sh33tJ5\";\n\tif(CFB.find(cfb, \"/\" + nm)) return;\n\tvar p = new_buf(4); p[0] = 55; p[1] = p[3] = 50; p[2] = 54;\n\tcfb.FileIndex.push(({ name: nm, type: 2, content:p, size:4, L:69, R:69, C:69 }/*:any*/));\n\tcfb.FullPaths.push(cfb.FullPaths[0] + nm);\n\trebuild_cfb(cfb);\n}\nfunction rebuild_cfb(cfb/*:CFBContainer*/, f/*:?boolean*/)/*:void*/ {\n\tinit_cfb(cfb);\n\tvar gc = false, s = false;\n\tfor(var i = cfb.FullPaths.length - 1; i >= 0; --i) {\n\t\tvar _file = cfb.FileIndex[i];\n\t\tswitch(_file.type) {\n\t\t\tcase 0:\n\t\t\t\tif(s) gc = true;\n\t\t\t\telse { cfb.FileIndex.pop(); cfb.FullPaths.pop(); }\n\t\t\t\tbreak;\n\t\t\tcase 1: case 2: case 5:\n\t\t\t\ts = true;\n\t\t\t\tif(isNaN(_file.R * _file.L * _file.C)) gc = true;\n\t\t\t\tif(_file.R > -1 && _file.L > -1 && _file.R == _file.L) gc = true;\n\t\t\t\tbreak;\n\t\t\tdefault: gc = true; break;\n\t\t}\n\t}\n\tif(!gc && !f) return;\n\n\tvar now = new Date(1987, 1, 19), j = 0;\n\t// Track which names exist\n\tvar fullPaths = Object.create ? Object.create(null) : {};\n\tvar data/*:Array<[string, CFBEntry]>*/ = [];\n\tfor(i = 0; i < cfb.FullPaths.length; ++i) {\n\t\tfullPaths[cfb.FullPaths[i]] = true;\n\t\tif(cfb.FileIndex[i].type === 0) continue;\n\t\tdata.push([cfb.FullPaths[i], cfb.FileIndex[i]]);\n\t}\n\tfor(i = 0; i < data.length; ++i) {\n\t\tvar dad = dirname(data[i][0]);\n\t\ts = fullPaths[dad];\n\t\tif(!s) {\n\t\t\tdata.push([dad, ({\n\t\t\t\tname: filename(dad).replace(\"/\",\"\"),\n\t\t\t\ttype: 1,\n\t\t\t\tclsid: HEADER_CLSID,\n\t\t\t\tct: now, mt: now,\n\t\t\t\tcontent: null\n\t\t\t}/*:any*/)]);\n\t\t\t// Add name to set\n\t\t\tfullPaths[dad] = true;\n\t\t}\n\t}\n\n\tdata.sort(function(x,y) { return namecmp(x[0], y[0]); });\n\tcfb.FullPaths = []; cfb.FileIndex = [];\n\tfor(i = 0; i < data.length; ++i) { cfb.FullPaths[i] = data[i][0]; cfb.FileIndex[i] = data[i][1]; }\n\tfor(i = 0; i < data.length; ++i) {\n\t\tvar elt = cfb.FileIndex[i];\n\t\tvar nm = cfb.FullPaths[i];\n\n\t\telt.name =  filename(nm).replace(\"/\",\"\");\n\t\telt.L = elt.R = elt.C = -(elt.color = 1);\n\t\telt.size = elt.content ? elt.content.length : 0;\n\t\telt.start = 0;\n\t\telt.clsid = (elt.clsid || HEADER_CLSID);\n\t\tif(i === 0) {\n\t\t\telt.C = data.length > 1 ? 1 : -1;\n\t\t\telt.size = 0;\n\t\t\telt.type = 5;\n\t\t} else if(nm.slice(-1) == \"/\") {\n\t\t\tfor(j=i+1;j < data.length; ++j) if(dirname(cfb.FullPaths[j])==nm) break;\n\t\t\telt.C = j >= data.length ? -1 : j;\n\t\t\tfor(j=i+1;j < data.length; ++j) if(dirname(cfb.FullPaths[j])==dirname(nm)) break;\n\t\t\telt.R = j >= data.length ? -1 : j;\n\t\t\telt.type = 1;\n\t\t} else {\n\t\t\tif(dirname(cfb.FullPaths[i+1]||\"\") == dirname(nm)) elt.R = i + 1;\n\t\t\telt.type = 2;\n\t\t}\n\t}\n\n}\n\nfunction _write(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:RawBytes|string*/ {\n\tvar _opts = options || {};\n\t/* MAD is order-sensitive, skip rebuild and sort */\n\tif(_opts.fileType == 'mad') return write_mad(cfb, _opts);\n\trebuild_cfb(cfb);\n\tswitch(_opts.fileType) {\n\t\tcase 'zip': return write_zip(cfb, _opts);\n\t\t//case 'mad': return write_mad(cfb, _opts);\n\t}\n\tvar L = (function(cfb/*:CFBContainer*/)/*:Array<number>*/{\n\t\tvar mini_size = 0, fat_size = 0;\n\t\tfor(var i = 0; i < cfb.FileIndex.length; ++i) {\n\t\t\tvar file = cfb.FileIndex[i];\n\t\t\tif(!file.content) continue;\n\t\t\t/*:: if(file.content == null) throw new Error(\"unreachable\"); */\n\t\t\tvar flen = file.content.length;\n\t\t\tif(flen > 0){\n\t\t\t\tif(flen < 0x1000) mini_size += (flen + 0x3F) >> 6;\n\t\t\t\telse fat_size += (flen + 0x01FF) >> 9;\n\t\t\t}\n\t\t}\n\t\tvar dir_cnt = (cfb.FullPaths.length +3) >> 2;\n\t\tvar mini_cnt = (mini_size + 7) >> 3;\n\t\tvar mfat_cnt = (mini_size + 0x7F) >> 7;\n\t\tvar fat_base = mini_cnt + fat_size + dir_cnt + mfat_cnt;\n\t\tvar fat_cnt = (fat_base + 0x7F) >> 7;\n\t\tvar difat_cnt = fat_cnt <= 109 ? 0 : Math.ceil((fat_cnt-109)/0x7F);\n\t\twhile(((fat_base + fat_cnt + difat_cnt + 0x7F) >> 7) > fat_cnt) difat_cnt = ++fat_cnt <= 109 ? 0 : Math.ceil((fat_cnt-109)/0x7F);\n\t\tvar L =  [1, difat_cnt, fat_cnt, mfat_cnt, dir_cnt, fat_size, mini_size, 0];\n\t\tcfb.FileIndex[0].size = mini_size << 6;\n\t\tL[7] = (cfb.FileIndex[0].start=L[0]+L[1]+L[2]+L[3]+L[4]+L[5])+((L[6]+7) >> 3);\n\t\treturn L;\n\t})(cfb);\n\tvar o = new_buf(L[7] << 9);\n\tvar i = 0, T = 0;\n\t{\n\t\tfor(i = 0; i < 8; ++i) o.write_shift(1, HEADER_SIG[i]);\n\t\tfor(i = 0; i < 8; ++i) o.write_shift(2, 0);\n\t\to.write_shift(2, 0x003E);\n\t\to.write_shift(2, 0x0003);\n\t\to.write_shift(2, 0xFFFE);\n\t\to.write_shift(2, 0x0009);\n\t\to.write_shift(2, 0x0006);\n\t\tfor(i = 0; i < 3; ++i) o.write_shift(2, 0);\n\t\to.write_shift(4, 0);\n\t\to.write_shift(4, L[2]);\n\t\to.write_shift(4, L[0] + L[1] + L[2] + L[3] - 1);\n\t\to.write_shift(4, 0);\n\t\to.write_shift(4, 1<<12);\n\t\to.write_shift(4, L[3] ? L[0] + L[1] + L[2] - 1: ENDOFCHAIN);\n\t\to.write_shift(4, L[3]);\n\t\to.write_shift(-4, L[1] ? L[0] - 1: ENDOFCHAIN);\n\t\to.write_shift(4, L[1]);\n\t\tfor(i = 0; i < 109; ++i) o.write_shift(-4, i < L[2] ? L[1] + i : -1);\n\t}\n\tif(L[1]) {\n\t\tfor(T = 0; T < L[1]; ++T) {\n\t\t\tfor(; i < 236 + T * 127; ++i) o.write_shift(-4, i < L[2] ? L[1] + i : -1);\n\t\t\to.write_shift(-4, T === L[1] - 1 ? ENDOFCHAIN : T + 1);\n\t\t}\n\t}\n\tvar chainit = function(w/*:number*/)/*:void*/ {\n\t\tfor(T += w; i<T-1; ++i) o.write_shift(-4, i+1);\n\t\tif(w) { ++i; o.write_shift(-4, ENDOFCHAIN); }\n\t};\n\tT = i = 0;\n\tfor(T+=L[1]; i<T; ++i) o.write_shift(-4, consts.DIFSECT);\n\tfor(T+=L[2]; i<T; ++i) o.write_shift(-4, consts.FATSECT);\n\tchainit(L[3]);\n\tchainit(L[4]);\n\tvar j/*:number*/ = 0, flen/*:number*/ = 0;\n\tvar file/*:CFBEntry*/ = cfb.FileIndex[0];\n\tfor(; j < cfb.FileIndex.length; ++j) {\n\t\tfile = cfb.FileIndex[j];\n\t\tif(!file.content) continue;\n\t\t/*:: if(file.content == null) throw new Error(\"unreachable\"); */\n\t\tflen = file.content.length;\n\t\tif(flen < 0x1000) continue;\n\t\tfile.start = T;\n\t\tchainit((flen + 0x01FF) >> 9);\n\t}\n\tchainit((L[6] + 7) >> 3);\n\twhile(o.l & 0x1FF) o.write_shift(-4, consts.ENDOFCHAIN);\n\tT = i = 0;\n\tfor(j = 0; j < cfb.FileIndex.length; ++j) {\n\t\tfile = cfb.FileIndex[j];\n\t\tif(!file.content) continue;\n\t\t/*:: if(file.content == null) throw new Error(\"unreachable\"); */\n\t\tflen = file.content.length;\n\t\tif(!flen || flen >= 0x1000) continue;\n\t\tfile.start = T;\n\t\tchainit((flen + 0x3F) >> 6);\n\t}\n\twhile(o.l & 0x1FF) o.write_shift(-4, consts.ENDOFCHAIN);\n\tfor(i = 0; i < L[4]<<2; ++i) {\n\t\tvar nm = cfb.FullPaths[i];\n\t\tif(!nm || nm.length === 0) {\n\t\t\tfor(j = 0; j < 17; ++j) o.write_shift(4, 0);\n\t\t\tfor(j = 0; j < 3; ++j) o.write_shift(4, -1);\n\t\t\tfor(j = 0; j < 12; ++j) o.write_shift(4, 0);\n\t\t\tcontinue;\n\t\t}\n\t\tfile = cfb.FileIndex[i];\n\t\tif(i === 0) file.start = file.size ? file.start - 1 : ENDOFCHAIN;\n\t\tvar _nm/*:string*/ = (i === 0 && _opts.root) || file.name;\n\t\tflen = 2*(_nm.length+1);\n\t\to.write_shift(64, _nm, \"utf16le\");\n\t\to.write_shift(2, flen);\n\t\to.write_shift(1, file.type);\n\t\to.write_shift(1, file.color);\n\t\to.write_shift(-4, file.L);\n\t\to.write_shift(-4, file.R);\n\t\to.write_shift(-4, file.C);\n\t\tif(!file.clsid) for(j = 0; j < 4; ++j) o.write_shift(4, 0);\n\t\telse o.write_shift(16, file.clsid, \"hex\");\n\t\to.write_shift(4, file.state || 0);\n\t\to.write_shift(4, 0); o.write_shift(4, 0);\n\t\to.write_shift(4, 0); o.write_shift(4, 0);\n\t\to.write_shift(4, file.start);\n\t\to.write_shift(4, file.size); o.write_shift(4, 0);\n\t}\n\tfor(i = 1; i < cfb.FileIndex.length; ++i) {\n\t\tfile = cfb.FileIndex[i];\n\t\t/*:: if(!file.content) throw new Error(\"unreachable\"); */\n\t\tif(file.size >= 0x1000) {\n\t\t\to.l = (file.start+1) << 9;\n\t\t\tif (has_buf && Buffer.isBuffer(file.content)) {\n\t\t\t\tfile.content.copy(o, o.l, 0, file.size);\n\t\t\t\t// o is a 0-filled Buffer so just set next offset\n\t\t\t\to.l += (file.size + 511) & -512;\n\t\t\t} else {\n\t\t\t\tfor(j = 0; j < file.size; ++j) o.write_shift(1, file.content[j]);\n\t\t\t\tfor(; j & 0x1FF; ++j) o.write_shift(1, 0);\n\t\t\t}\n\t\t}\n\t}\n\tfor(i = 1; i < cfb.FileIndex.length; ++i) {\n\t\tfile = cfb.FileIndex[i];\n\t\t/*:: if(!file.content) throw new Error(\"unreachable\"); */\n\t\tif(file.size > 0 && file.size < 0x1000) {\n\t\t\tif (has_buf && Buffer.isBuffer(file.content)) {\n\t\t\t\tfile.content.copy(o, o.l, 0, file.size);\n\t\t\t\t// o is a 0-filled Buffer so just set next offset\n\t\t\t\to.l += (file.size + 63) & -64;\n\t\t\t} else {\n\t\t\t\tfor(j = 0; j < file.size; ++j) o.write_shift(1, file.content[j]);\n\t\t\t\tfor(; j & 0x3F; ++j) o.write_shift(1, 0);\n\t\t\t}\n\t\t}\n\t}\n\tif (has_buf) {\n\t\to.l = o.length;\n\t} else {\n\t\t// When using Buffer, already 0-filled\n\t\twhile(o.l < o.length) o.write_shift(1, 0);\n\t}\n\treturn o;\n}\n/* [MS-CFB] 2.6.4 (Unicode 3.0.1 case conversion) */\nfunction find(cfb/*:CFBContainer*/, path/*:string*/)/*:?CFBEntry*/ {\n\tvar UCFullPaths/*:Array<string>*/ = cfb.FullPaths.map(function(x) { return x.toUpperCase(); });\n\tvar UCPaths/*:Array<string>*/ = UCFullPaths.map(function(x) { var y = x.split(\"/\"); return y[y.length - (x.slice(-1) == \"/\" ? 2 : 1)]; });\n\tvar k/*:boolean*/ = false;\n\tif(path.charCodeAt(0) === 47 /* \"/\" */) { k = true; path = UCFullPaths[0].slice(0, -1) + path; }\n\telse k = path.indexOf(\"/\") !== -1;\n\tvar UCPath/*:string*/ = path.toUpperCase();\n\tvar w/*:number*/ = k === true ? UCFullPaths.indexOf(UCPath) : UCPaths.indexOf(UCPath);\n\tif(w !== -1) return cfb.FileIndex[w];\n\n\tvar m = !UCPath.match(chr1);\n\tUCPath = UCPath.replace(chr0,'');\n\tif(m) UCPath = UCPath.replace(chr1,'!');\n\tfor(w = 0; w < UCFullPaths.length; ++w) {\n\t\tif((m ? UCFullPaths[w].replace(chr1,'!') : UCFullPaths[w]).replace(chr0,'') == UCPath) return cfb.FileIndex[w];\n\t\tif((m ? UCPaths[w].replace(chr1,'!') : UCPaths[w]).replace(chr0,'') == UCPath) return cfb.FileIndex[w];\n\t}\n\treturn null;\n}\n/** CFB Constants */\nvar MSSZ = 64; /* Mini Sector Size = 1<<6 */\n//var MSCSZ = 4096; /* Mini Stream Cutoff Size */\n/* 2.1 Compound File Sector Numbers and Types */\nvar ENDOFCHAIN = -2;\n/* 2.2 Compound File Header */\nvar HEADER_SIGNATURE = 'd0cf11e0a1b11ae1';\nvar HEADER_SIG = [0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1];\nvar HEADER_CLSID = '00000000000000000000000000000000';\nvar consts = {\n\t/* 2.1 Compund File Sector Numbers and Types */\n\tMAXREGSECT: -6,\n\tDIFSECT: -4,\n\tFATSECT: -3,\n\tENDOFCHAIN: ENDOFCHAIN,\n\tFREESECT: -1,\n\t/* 2.2 Compound File Header */\n\tHEADER_SIGNATURE: HEADER_SIGNATURE,\n\tHEADER_MINOR_VERSION: '3e00',\n\tMAXREGSID: -6,\n\tNOSTREAM: -1,\n\tHEADER_CLSID: HEADER_CLSID,\n\t/* 2.6.1 Compound File Directory Entry */\n\tEntryTypes: ['unknown','storage','stream','lockbytes','property','root']\n};\n\nfunction write_file(cfb/*:CFBContainer*/, filename/*:string*/, options/*:CFBWriteOpts*/)/*:void*/ {\n\tget_fs();\n\tvar o = _write(cfb, options);\n\t/*:: if(typeof Buffer == 'undefined' || !Buffer.isBuffer(o) || !(o instanceof Buffer)) throw new Error(\"unreachable\"); */\n\tfs.writeFileSync(filename, o);\n}\n\nfunction a2s(o/*:RawBytes*/)/*:string*/ {\n\tvar out = new Array(o.length);\n\tfor(var i = 0; i < o.length; ++i) out[i] = String.fromCharCode(o[i]);\n\treturn out.join(\"\");\n}\n\nfunction write(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:RawBytes|string*/ {\n\tvar o = _write(cfb, options);\n\tswitch(options && options.type || \"buffer\") {\n\t\tcase \"file\": get_fs(); fs.writeFileSync(options.filename, (o/*:any*/)); return o;\n\t\tcase \"binary\": return typeof o == \"string\" ? o : a2s(o);\n\t\tcase \"base64\": return Base64_encode(typeof o == \"string\" ? o : a2s(o));\n\t\tcase \"buffer\": if(has_buf) return Buffer.isBuffer(o) ? o : Buffer_from(o);\n\t\t\t/* falls through */\n\t\tcase \"array\": return typeof o == \"string\" ? s2a(o) : o;\n\t}\n\treturn o;\n}\n/* node < 8.1 zlib does not expose bytesRead, so default to pure JS */\nvar _zlib;\nfunction use_zlib(zlib) { try {\n\tvar InflateRaw = zlib.InflateRaw;\n\tvar InflRaw = new InflateRaw();\n\tInflRaw._processChunk(new Uint8Array([3, 0]), InflRaw._finishFlushFlag);\n\tif(InflRaw.bytesRead) _zlib = zlib;\n\telse throw new Error(\"zlib does not expose bytesRead\");\n} catch(e) {console.error(\"cannot use native zlib: \" + (e.message || e)); } }\n\nfunction _inflateRawSync(payload, usz) {\n\tif(!_zlib) return _inflate(payload, usz);\n\tvar InflateRaw = _zlib.InflateRaw;\n\tvar InflRaw = new InflateRaw();\n\tvar out = InflRaw._processChunk(payload.slice(payload.l), InflRaw._finishFlushFlag);\n\tpayload.l += InflRaw.bytesRead;\n\treturn out;\n}\n\nfunction _deflateRawSync(payload) {\n\treturn _zlib ? _zlib.deflateRawSync(payload) : _deflate(payload);\n}\nvar CLEN_ORDER = [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n/*  LEN_ID = [ 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285 ]; */\nvar LEN_LN = [   3,   4,   5,   6,   7,   8,   9,  10,  11,  13 , 15,  17,  19,  23,  27,  31,  35,  43,  51,  59,  67,  83,  99, 115, 131, 163, 195, 227, 258 ];\n\n/*  DST_ID = [  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13,  14,  15,  16,  17,  18,  19,   20,   21,   22,   23,   24,   25,   26,    27,    28,    29 ]; */\nvar DST_LN = [  1,  2,  3,  4,  5,  7,  9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577 ];\n\nfunction bit_swap_8(n) { var t = (((((n<<1)|(n<<11)) & 0x22110) | (((n<<5)|(n<<15)) & 0x88440))); return ((t>>16) | (t>>8) |t)&0xFF; }\n\nvar use_typed_arrays = typeof Uint8Array !== 'undefined';\n\nvar bitswap8 = use_typed_arrays ? new Uint8Array(1<<8) : [];\nfor(var q = 0; q < (1<<8); ++q) bitswap8[q] = bit_swap_8(q);\n\nfunction bit_swap_n(n, b) {\n\tvar rev = bitswap8[n & 0xFF];\n\tif(b <= 8) return rev >>> (8-b);\n\trev = (rev << 8) | bitswap8[(n>>8)&0xFF];\n\tif(b <= 16) return rev >>> (16-b);\n\trev = (rev << 8) | bitswap8[(n>>16)&0xFF];\n\treturn rev >>> (24-b);\n}\n\n/* helpers for unaligned bit reads */\nfunction read_bits_2(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 6 ? 0 : buf[h+1]<<8))>>>w)& 0x03; }\nfunction read_bits_3(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 5 ? 0 : buf[h+1]<<8))>>>w)& 0x07; }\nfunction read_bits_4(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 4 ? 0 : buf[h+1]<<8))>>>w)& 0x0F; }\nfunction read_bits_5(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 3 ? 0 : buf[h+1]<<8))>>>w)& 0x1F; }\nfunction read_bits_7(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 1 ? 0 : buf[h+1]<<8))>>>w)& 0x7F; }\n\n/* works up to n = 3 * 8 + 1 = 25 */\nfunction read_bits_n(buf, bl, n) {\n\tvar w = (bl&7), h = (bl>>>3), f = ((1<<n)-1);\n\tvar v = buf[h] >>> w;\n\tif(n < 8 - w) return v & f;\n\tv |= buf[h+1]<<(8-w);\n\tif(n < 16 - w) return v & f;\n\tv |= buf[h+2]<<(16-w);\n\tif(n < 24 - w) return v & f;\n\tv |= buf[h+3]<<(24-w);\n\treturn v & f;\n}\n\n/* helpers for unaligned bit writes */\nfunction write_bits_3(buf, bl, v) { var w = bl & 7, h = bl >>> 3;\n\tif(w <= 5) buf[h] |= (v & 7) << w;\n\telse {\n\t\tbuf[h] |= (v << w) & 0xFF;\n\t\tbuf[h+1] = (v&7) >> (8-w);\n\t}\n\treturn bl + 3;\n}\n\nfunction write_bits_1(buf, bl, v) {\n\tvar w = bl & 7, h = bl >>> 3;\n\tv = (v&1) << w;\n\tbuf[h] |= v;\n\treturn bl + 1;\n}\nfunction write_bits_8(buf, bl, v) {\n\tvar w = bl & 7, h = bl >>> 3;\n\tv <<= w;\n\tbuf[h] |=  v & 0xFF; v >>>= 8;\n\tbuf[h+1] = v;\n\treturn bl + 8;\n}\nfunction write_bits_16(buf, bl, v) {\n\tvar w = bl & 7, h = bl >>> 3;\n\tv <<= w;\n\tbuf[h] |=  v & 0xFF; v >>>= 8;\n\tbuf[h+1] = v & 0xFF;\n\tbuf[h+2] = v >>> 8;\n\treturn bl + 16;\n}\n\n/* until ArrayBuffer#realloc is a thing, fake a realloc */\nfunction realloc(b, sz/*:number*/) {\n\tvar L = b.length, M = 2*L > sz ? 2*L : sz + 5, i = 0;\n\tif(L >= sz) return b;\n\tif(has_buf) {\n\t\tvar o = new_unsafe_buf(M);\n\t\t// $FlowIgnore\n\t\tif(b.copy) b.copy(o);\n\t\telse for(; i < b.length; ++i) o[i] = b[i];\n\t\treturn o;\n\t} else if(use_typed_arrays) {\n\t\tvar a = new Uint8Array(M);\n\t\tif(a.set) a.set(b);\n\t\telse for(; i < L; ++i) a[i] = b[i];\n\t\treturn a;\n\t}\n\tb.length = M;\n\treturn b;\n}\n\n/* zero-filled arrays for older browsers */\nfunction zero_fill_array(n) {\n\tvar o = new Array(n);\n\tfor(var i = 0; i < n; ++i) o[i] = 0;\n\treturn o;\n}\n\n/* build tree (used for literals and lengths) */\nfunction build_tree(clens, cmap, MAX/*:number*/)/*:number*/ {\n\tvar maxlen = 1, w = 0, i = 0, j = 0, ccode = 0, L = clens.length;\n\n\tvar bl_count  = use_typed_arrays ? new Uint16Array(32) : zero_fill_array(32);\n\tfor(i = 0; i < 32; ++i) bl_count[i] = 0;\n\n\tfor(i = L; i < MAX; ++i) clens[i] = 0;\n\tL = clens.length;\n\n\tvar ctree = use_typed_arrays ? new Uint16Array(L) : zero_fill_array(L); // []\n\n\t/* build code tree */\n\tfor(i = 0; i < L; ++i) {\n\t\tbl_count[(w = clens[i])]++;\n\t\tif(maxlen < w) maxlen = w;\n\t\tctree[i] = 0;\n\t}\n\tbl_count[0] = 0;\n\tfor(i = 1; i <= maxlen; ++i) bl_count[i+16] = (ccode = (ccode + bl_count[i-1])<<1);\n\tfor(i = 0; i < L; ++i) {\n\t\tccode = clens[i];\n\t\tif(ccode != 0) ctree[i] = bl_count[ccode+16]++;\n\t}\n\n\t/* cmap[maxlen + 4 bits] = (off&15) + (lit<<4) reverse mapping */\n\tvar cleni = 0;\n\tfor(i = 0; i < L; ++i) {\n\t\tcleni = clens[i];\n\t\tif(cleni != 0) {\n\t\t\tccode = bit_swap_n(ctree[i], maxlen)>>(maxlen-cleni);\n\t\t\tfor(j = (1<<(maxlen + 4 - cleni)) - 1; j>=0; --j)\n\t\t\t\tcmap[ccode|(j<<cleni)] = (cleni&15) | (i<<4);\n\t\t}\n\t}\n\treturn maxlen;\n}\n\n/* Fixed Huffman */\nvar fix_lmap = use_typed_arrays ? new Uint16Array(512) : zero_fill_array(512);\nvar fix_dmap = use_typed_arrays ? new Uint16Array(32)  : zero_fill_array(32);\nif(!use_typed_arrays) {\n\tfor(var i = 0; i < 512; ++i) fix_lmap[i] = 0;\n\tfor(i = 0; i < 32; ++i) fix_dmap[i] = 0;\n}\n(function() {\n\tvar dlens/*:Array<number>*/ = [];\n\tvar i = 0;\n\tfor(;i<32; i++) dlens.push(5);\n\tbuild_tree(dlens, fix_dmap, 32);\n\n\tvar clens/*:Array<number>*/ = [];\n\ti = 0;\n\tfor(; i<=143; i++) clens.push(8);\n\tfor(; i<=255; i++) clens.push(9);\n\tfor(; i<=279; i++) clens.push(7);\n\tfor(; i<=287; i++) clens.push(8);\n\tbuild_tree(clens, fix_lmap, 288);\n})();var _deflateRaw = /*#__PURE__*/(function _deflateRawIIFE() {\n\tvar DST_LN_RE = use_typed_arrays ? new Uint8Array(0x8000) : [];\n\tvar j = 0, k = 0;\n\tfor(; j < DST_LN.length - 1; ++j) {\n\t\tfor(; k < DST_LN[j+1]; ++k) DST_LN_RE[k] = j;\n\t}\n\tfor(;k < 32768; ++k) DST_LN_RE[k] = 29;\n\n\tvar LEN_LN_RE = use_typed_arrays ? new Uint8Array(0x103) : [];\n\tfor(j = 0, k = 0; j < LEN_LN.length - 1; ++j) {\n\t\tfor(; k < LEN_LN[j+1]; ++k) LEN_LN_RE[k] = j;\n\t}\n\n\tfunction write_stored(data, out) {\n\t\tvar boff = 0;\n\t\twhile(boff < data.length) {\n\t\t\tvar L = Math.min(0xFFFF, data.length - boff);\n\t\t\tvar h = boff + L == data.length;\n\t\t\tout.write_shift(1, +h);\n\t\t\tout.write_shift(2, L);\n\t\t\tout.write_shift(2, (~L) & 0xFFFF);\n\t\t\twhile(L-- > 0) out[out.l++] = data[boff++];\n\t\t}\n\t\treturn out.l;\n\t}\n\n\t/* Fixed Huffman */\n\tfunction write_huff_fixed(data, out) {\n\t\tvar bl = 0;\n\t\tvar boff = 0;\n\t\tvar addrs = use_typed_arrays ? new Uint16Array(0x8000) : [];\n\t\twhile(boff < data.length) {\n\t\t\tvar L = /* data.length - boff; */ Math.min(0xFFFF, data.length - boff);\n\n\t\t\t/* write a stored block for short data */\n\t\t\tif(L < 10) {\n\t\t\t\tbl = write_bits_3(out, bl, +!!(boff + L == data.length)); // jshint ignore:line\n\t\t\t\tif(bl & 7) bl += 8 - (bl & 7);\n\t\t\t\tout.l = (bl / 8) | 0;\n\t\t\t\tout.write_shift(2, L);\n\t\t\t\tout.write_shift(2, (~L) & 0xFFFF);\n\t\t\t\twhile(L-- > 0) out[out.l++] = data[boff++];\n\t\t\t\tbl = out.l * 8;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tbl = write_bits_3(out, bl, +!!(boff + L == data.length) + 2); // jshint ignore:line\n\t\t\tvar hash = 0;\n\t\t\twhile(L-- > 0) {\n\t\t\t\tvar d = data[boff];\n\t\t\t\thash = ((hash << 5) ^ d) & 0x7FFF;\n\n\t\t\t\tvar match = -1, mlen = 0;\n\n\t\t\t\tif((match = addrs[hash])) {\n\t\t\t\t\tmatch |= boff & ~0x7FFF;\n\t\t\t\t\tif(match > boff) match -= 0x8000;\n\t\t\t\t\tif(match < boff) while(data[match + mlen] == data[boff + mlen] && mlen < 250) ++mlen;\n\t\t\t\t}\n\n\t\t\t\tif(mlen > 2) {\n\t\t\t\t\t/* Copy Token  */\n\t\t\t\t\td = LEN_LN_RE[mlen];\n\t\t\t\t\tif(d <= 22) bl = write_bits_8(out, bl, bitswap8[d+1]>>1) - 1;\n\t\t\t\t\telse {\n\t\t\t\t\t\twrite_bits_8(out, bl, 3);\n\t\t\t\t\t\tbl += 5;\n\t\t\t\t\t\twrite_bits_8(out, bl, bitswap8[d-23]>>5);\n\t\t\t\t\t\tbl += 3;\n\t\t\t\t\t}\n\t\t\t\t\tvar len_eb = (d < 8) ? 0 : ((d - 4)>>2);\n\t\t\t\t\tif(len_eb > 0) {\n\t\t\t\t\t\twrite_bits_16(out, bl, mlen - LEN_LN[d]);\n\t\t\t\t\t\tbl += len_eb;\n\t\t\t\t\t}\n\n\t\t\t\t\td = DST_LN_RE[boff - match];\n\t\t\t\t\tbl = write_bits_8(out, bl, bitswap8[d]>>3);\n\t\t\t\t\tbl -= 3;\n\n\t\t\t\t\tvar dst_eb = d < 4 ? 0 : (d-2)>>1;\n\t\t\t\t\tif(dst_eb > 0) {\n\t\t\t\t\t\twrite_bits_16(out, bl, boff - match - DST_LN[d]);\n\t\t\t\t\t\tbl += dst_eb;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var q = 0; q < mlen; ++q) {\n\t\t\t\t\t\taddrs[hash] = boff & 0x7FFF;\n\t\t\t\t\t\thash = ((hash << 5) ^ data[boff]) & 0x7FFF;\n\t\t\t\t\t\t++boff;\n\t\t\t\t\t}\n\t\t\t\t\tL-= mlen - 1;\n\t\t\t\t} else {\n\t\t\t\t\t/* Literal Token */\n\t\t\t\t\tif(d <= 143) d = d + 48;\n\t\t\t\t\telse bl = write_bits_1(out, bl, 1);\n\t\t\t\t\tbl = write_bits_8(out, bl, bitswap8[d]);\n\t\t\t\t\taddrs[hash] = boff & 0x7FFF;\n\t\t\t\t\t++boff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbl = write_bits_8(out, bl, 0) - 1;\n\t\t}\n\t\tout.l = ((bl + 7)/8)|0;\n\t\treturn out.l;\n\t}\n\treturn function _deflateRaw(data, out) {\n\t\tif(data.length < 8) return write_stored(data, out);\n\t\treturn write_huff_fixed(data, out);\n\t};\n})();\n\nfunction _deflate(data) {\n\tvar buf = new_buf(50+Math.floor(data.length*1.1));\n\tvar off = _deflateRaw(data, buf);\n\treturn buf.slice(0, off);\n}\n/* modified inflate function also moves original read head */\n\nvar dyn_lmap = use_typed_arrays ? new Uint16Array(32768) : zero_fill_array(32768);\nvar dyn_dmap = use_typed_arrays ? new Uint16Array(32768) : zero_fill_array(32768);\nvar dyn_cmap = use_typed_arrays ? new Uint16Array(128)   : zero_fill_array(128);\nvar dyn_len_1 = 1, dyn_len_2 = 1;\n\n/* 5.5.3 Expanding Huffman Codes */\nfunction dyn(data, boff/*:number*/) {\n\t/* nomenclature from RFC1951 refers to bit values; these are offset by the implicit constant */\n\tvar _HLIT = read_bits_5(data, boff) + 257; boff += 5;\n\tvar _HDIST = read_bits_5(data, boff) + 1; boff += 5;\n\tvar _HCLEN = read_bits_4(data, boff) + 4; boff += 4;\n\tvar w = 0;\n\n\t/* grab and store code lengths */\n\tvar clens = use_typed_arrays ? new Uint8Array(19) : zero_fill_array(19);\n\tvar ctree = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\tvar maxlen = 1;\n\tvar bl_count =  use_typed_arrays ? new Uint8Array(8) : zero_fill_array(8);\n\tvar next_code = use_typed_arrays ? new Uint8Array(8) : zero_fill_array(8);\n\tvar L = clens.length; /* 19 */\n\tfor(var i = 0; i < _HCLEN; ++i) {\n\t\tclens[CLEN_ORDER[i]] = w = read_bits_3(data, boff);\n\t\tif(maxlen < w) maxlen = w;\n\t\tbl_count[w]++;\n\t\tboff += 3;\n\t}\n\n\t/* build code tree */\n\tvar ccode = 0;\n\tbl_count[0] = 0;\n\tfor(i = 1; i <= maxlen; ++i) next_code[i] = ccode = (ccode + bl_count[i-1])<<1;\n\tfor(i = 0; i < L; ++i) if((ccode = clens[i]) != 0) ctree[i] = next_code[ccode]++;\n\t/* cmap[7 bits from stream] = (off&7) + (lit<<3) */\n\tvar cleni = 0;\n\tfor(i = 0; i < L; ++i) {\n\t\tcleni = clens[i];\n\t\tif(cleni != 0) {\n\t\t\tccode = bitswap8[ctree[i]]>>(8-cleni);\n\t\t\tfor(var j = (1<<(7-cleni))-1; j>=0; --j) dyn_cmap[ccode|(j<<cleni)] = (cleni&7) | (i<<3);\n\t\t}\n\t}\n\n\t/* read literal and dist codes at once */\n\tvar hcodes/*:Array<number>*/ = [];\n\tmaxlen = 1;\n\tfor(; hcodes.length < _HLIT + _HDIST;) {\n\t\tccode = dyn_cmap[read_bits_7(data, boff)];\n\t\tboff += ccode & 7;\n\t\tswitch((ccode >>>= 3)) {\n\t\t\tcase 16:\n\t\t\t\tw = 3 + read_bits_2(data, boff); boff += 2;\n\t\t\t\tccode = hcodes[hcodes.length - 1];\n\t\t\t\twhile(w-- > 0) hcodes.push(ccode);\n\t\t\t\tbreak;\n\t\t\tcase 17:\n\t\t\t\tw = 3 + read_bits_3(data, boff); boff += 3;\n\t\t\t\twhile(w-- > 0) hcodes.push(0);\n\t\t\t\tbreak;\n\t\t\tcase 18:\n\t\t\t\tw = 11 + read_bits_7(data, boff); boff += 7;\n\t\t\t\twhile(w -- > 0) hcodes.push(0);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\thcodes.push(ccode);\n\t\t\t\tif(maxlen < ccode) maxlen = ccode;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/* build literal / length trees */\n\tvar h1 = hcodes.slice(0, _HLIT), h2 = hcodes.slice(_HLIT);\n\tfor(i = _HLIT; i < 286; ++i) h1[i] = 0;\n\tfor(i = _HDIST; i < 30; ++i) h2[i] = 0;\n\tdyn_len_1 = build_tree(h1, dyn_lmap, 286);\n\tdyn_len_2 = build_tree(h2, dyn_dmap, 30);\n\treturn boff;\n}\n\n/* return [ data, bytesRead ] */\nfunction inflate(data, usz/*:number*/) {\n\t/* shortcircuit for empty buffer [0x03, 0x00] */\n\tif(data[0] == 3 && !(data[1] & 0x3)) { return [new_raw_buf(usz), 2]; }\n\n\t/* bit offset */\n\tvar boff = 0;\n\n\t/* header includes final bit and type bits */\n\tvar header = 0;\n\n\tvar outbuf = new_unsafe_buf(usz ? usz : (1<<18));\n\tvar woff = 0;\n\tvar OL = outbuf.length>>>0;\n\tvar max_len_1 = 0, max_len_2 = 0;\n\n\twhile((header&1) == 0) {\n\t\theader = read_bits_3(data, boff); boff += 3;\n\t\tif((header >>> 1) == 0) {\n\t\t\t/* Stored block */\n\t\t\tif(boff & 7) boff += 8 - (boff&7);\n\t\t\t/* 2 bytes sz, 2 bytes bit inverse */\n\t\t\tvar sz = data[boff>>>3] | data[(boff>>>3)+1]<<8;\n\t\t\tboff += 32;\n\t\t\t/* push sz bytes */\n\t\t\tif(sz > 0) {\n\t\t\t\tif(!usz && OL < woff + sz) { outbuf = realloc(outbuf, woff + sz); OL = outbuf.length; }\n\t\t\t\twhile(sz-- > 0) { outbuf[woff++] = data[boff>>>3]; boff += 8; }\n\t\t\t}\n\t\t\tcontinue;\n\t\t} else if((header >> 1) == 1) {\n\t\t\t/* Fixed Huffman */\n\t\t\tmax_len_1 = 9; max_len_2 = 5;\n\t\t} else {\n\t\t\t/* Dynamic Huffman */\n\t\t\tboff = dyn(data, boff);\n\t\t\tmax_len_1 = dyn_len_1; max_len_2 = dyn_len_2;\n\t\t}\n\t\tfor(;;) { // while(true) is apparently out of vogue in modern JS circles\n\t\t\tif(!usz && (OL < woff + 32767)) { outbuf = realloc(outbuf, woff + 32767); OL = outbuf.length; }\n\t\t\t/* ingest code and move read head */\n\t\t\tvar bits = read_bits_n(data, boff, max_len_1);\n\t\t\tvar code = (header>>>1) == 1 ? fix_lmap[bits] : dyn_lmap[bits];\n\t\t\tboff += code & 15; code >>>= 4;\n\t\t\t/* 0-255 are literals, 256 is end of block token, 257+ are copy tokens */\n\t\t\tif(((code>>>8)&0xFF) === 0) outbuf[woff++] = code;\n\t\t\telse if(code == 256) break;\n\t\t\telse {\n\t\t\t\tcode -= 257;\n\t\t\t\tvar len_eb = (code < 8) ? 0 : ((code-4)>>2); if(len_eb > 5) len_eb = 0;\n\t\t\t\tvar tgt = woff + LEN_LN[code];\n\t\t\t\t/* length extra bits */\n\t\t\t\tif(len_eb > 0) {\n\t\t\t\t\ttgt += read_bits_n(data, boff, len_eb);\n\t\t\t\t\tboff += len_eb;\n\t\t\t\t}\n\n\t\t\t\t/* dist code */\n\t\t\t\tbits = read_bits_n(data, boff, max_len_2);\n\t\t\t\tcode = (header>>>1) == 1 ? fix_dmap[bits] : dyn_dmap[bits];\n\t\t\t\tboff += code & 15; code >>>= 4;\n\t\t\t\tvar dst_eb = (code < 4 ? 0 : (code-2)>>1);\n\t\t\t\tvar dst = DST_LN[code];\n\t\t\t\t/* dist extra bits */\n\t\t\t\tif(dst_eb > 0) {\n\t\t\t\t\tdst += read_bits_n(data, boff, dst_eb);\n\t\t\t\t\tboff += dst_eb;\n\t\t\t\t}\n\n\t\t\t\t/* in the common case, manual byte copy is faster than TA set / Buffer copy */\n\t\t\t\tif(!usz && OL < tgt) { outbuf = realloc(outbuf, tgt + 100); OL = outbuf.length; }\n\t\t\t\twhile(woff < tgt) { outbuf[woff] = outbuf[woff - dst]; ++woff; }\n\t\t\t}\n\t\t}\n\t}\n\tif(usz) return [outbuf, (boff+7)>>>3];\n\treturn [outbuf.slice(0, woff), (boff+7)>>>3];\n}\n\nfunction _inflate(payload, usz) {\n\tvar data = payload.slice(payload.l||0);\n\tvar out = inflate(data, usz);\n\tpayload.l += out[1];\n\treturn out[0];\n}\n\nfunction warn_or_throw(wrn, msg) {\n\tif(wrn) { if(typeof console !== 'undefined') console.error(msg); }\n\telse throw new Error(msg);\n}\n\nfunction parse_zip(file/*:RawBytes*/, options/*:CFBReadOpts*/)/*:CFBContainer*/ {\n\tvar blob/*:CFBlob*/ = /*::(*/file/*:: :any)*/;\n\tprep_blob(blob, 0);\n\n\tvar FileIndex/*:CFBFileIndex*/ = [], FullPaths/*:Array<string>*/ = [];\n\tvar o = {\n\t\tFileIndex: FileIndex,\n\t\tFullPaths: FullPaths\n\t};\n\tinit_cfb(o, { root: options.root });\n\n\t/* find end of central directory, start just after signature */\n\tvar i = blob.length - 4;\n\twhile((blob[i] != 0x50 || blob[i+1] != 0x4b || blob[i+2] != 0x05 || blob[i+3] != 0x06) && i >= 0) --i;\n\tblob.l = i + 4;\n\n\t/* parse end of central directory */\n\tblob.l += 4;\n\tvar fcnt = blob.read_shift(2);\n\tblob.l += 6;\n\tvar start_cd = blob.read_shift(4);\n\n\t/* parse central directory */\n\tblob.l = start_cd;\n\n\tfor(i = 0; i < fcnt; ++i) {\n\t\t/* trust local file header instead of CD entry */\n\t\tblob.l += 20;\n\t\tvar csz = blob.read_shift(4);\n\t\tvar usz = blob.read_shift(4);\n\t\tvar namelen = blob.read_shift(2);\n\t\tvar efsz = blob.read_shift(2);\n\t\tvar fcsz = blob.read_shift(2);\n\t\tblob.l += 8;\n\t\tvar offset = blob.read_shift(4);\n\t\tvar EF = parse_extra_field(/*::(*/blob.slice(blob.l+namelen, blob.l+namelen+efsz)/*:: :any)*/);\n\t\tblob.l += namelen + efsz + fcsz;\n\n\t\tvar L = blob.l;\n\t\tblob.l = offset + 4;\n\t\tparse_local_file(blob, csz, usz, o, EF);\n\t\tblob.l = L;\n\t}\n\treturn o;\n}\n\n\n/* head starts just after local file header signature */\nfunction parse_local_file(blob/*:CFBlob*/, csz/*:number*/, usz/*:number*/, o/*:CFBContainer*/, EF) {\n\t/* [local file header] */\n\tblob.l += 2;\n\tvar flags = blob.read_shift(2);\n\tvar meth = blob.read_shift(2);\n\tvar date = parse_dos_date(blob);\n\n\tif(flags & 0x2041) throw new Error(\"Unsupported ZIP encryption\");\n\tvar crc32 = blob.read_shift(4);\n\tvar _csz = blob.read_shift(4);\n\tvar _usz = blob.read_shift(4);\n\n\tvar namelen = blob.read_shift(2);\n\tvar efsz = blob.read_shift(2);\n\n\t// TODO: flags & (1<<11) // UTF8\n\tvar name = \"\"; for(var i = 0; i < namelen; ++i) name += String.fromCharCode(blob[blob.l++]);\n\tif(efsz) {\n\t\tvar ef = parse_extra_field(/*::(*/blob.slice(blob.l, blob.l + efsz)/*:: :any)*/);\n\t\tif((ef[0x5455]||{}).mt) date = ef[0x5455].mt;\n\t\tif(((EF||{})[0x5455]||{}).mt) date = EF[0x5455].mt;\n\t}\n\tblob.l += efsz;\n\n\t/* [encryption header] */\n\n\t/* [file data] */\n\tvar data = blob.slice(blob.l, blob.l + _csz);\n\tswitch(meth) {\n\t\tcase 8: data = _inflateRawSync(blob, _usz); break;\n\t\tcase 0: break; // TODO: scan for magic number\n\t\tdefault: throw new Error(\"Unsupported ZIP Compression method \" + meth);\n\t}\n\n\t/* [data descriptor] */\n\tvar wrn = false;\n\tif(flags & 8) {\n\t\tcrc32 = blob.read_shift(4);\n\t\tif(crc32 == 0x08074b50) { crc32 = blob.read_shift(4); wrn = true; }\n\t\t_csz = blob.read_shift(4);\n\t\t_usz = blob.read_shift(4);\n\t}\n\n\tif(_csz != csz) warn_or_throw(wrn, \"Bad compressed size: \" + csz + \" != \" + _csz);\n\tif(_usz != usz) warn_or_throw(wrn, \"Bad uncompressed size: \" + usz + \" != \" + _usz);\n\t//var _crc32 = CRC32.buf(data, 0);\n\t//if((crc32>>0) != (_crc32>>0)) warn_or_throw(wrn, \"Bad CRC32 checksum: \" + crc32 + \" != \" + _crc32);\n\tcfb_add(o, name, data, {unsafe: true, mt: date});\n}\nfunction write_zip(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:RawBytes*/ {\n\tvar _opts = options || {};\n\tvar out = [], cdirs = [];\n\tvar o/*:CFBlob*/ = new_buf(1);\n\tvar method = (_opts.compression ? 8 : 0), flags = 0;\n\tvar desc = false;\n\tif(desc) flags |= 8;\n\tvar i = 0, j = 0;\n\n\tvar start_cd = 0, fcnt = 0;\n\tvar root = cfb.FullPaths[0], fp = root, fi = cfb.FileIndex[0];\n\tvar crcs = [];\n\tvar sz_cd = 0;\n\n\tfor(i = 1; i < cfb.FullPaths.length; ++i) {\n\t\tfp = cfb.FullPaths[i].slice(root.length); fi = cfb.FileIndex[i];\n\t\tif(!fi.size || !fi.content || fp == \"\\u0001Sh33tJ5\") continue;\n\t\tvar start = start_cd;\n\n\t\t/* TODO: CP437 filename */\n\t\tvar namebuf = new_buf(fp.length);\n\t\tfor(j = 0; j < fp.length; ++j) namebuf.write_shift(1, fp.charCodeAt(j) & 0x7F);\n\t\tnamebuf = namebuf.slice(0, namebuf.l);\n\t\tcrcs[fcnt] = CRC32.buf(/*::((*/fi.content/*::||[]):any)*/, 0);\n\n\t\tvar outbuf = fi.content/*::||[]*/;\n\t\tif(method == 8) outbuf = _deflateRawSync(outbuf);\n\n\t\t/* local file header */\n\t\to = new_buf(30);\n\t\to.write_shift(4, 0x04034b50);\n\t\to.write_shift(2, 20);\n\t\to.write_shift(2, flags);\n\t\to.write_shift(2, method);\n\t\t/* TODO: last mod file time/date */\n\t\tif(fi.mt) write_dos_date(o, fi.mt);\n\t\telse o.write_shift(4, 0);\n\t\to.write_shift(-4, (flags & 8) ? 0 : crcs[fcnt]);\n\t\to.write_shift(4,  (flags & 8) ? 0 : outbuf.length);\n\t\to.write_shift(4,  (flags & 8) ? 0 : /*::(*/fi.content/*::||[])*/.length);\n\t\to.write_shift(2, namebuf.length);\n\t\to.write_shift(2, 0);\n\n\t\tstart_cd += o.length;\n\t\tout.push(o);\n\t\tstart_cd += namebuf.length;\n\t\tout.push(namebuf);\n\n\t\t/* TODO: extra fields? */\n\n\t\t/* TODO: encryption header ? */\n\n\t\tstart_cd += outbuf.length;\n\t\tout.push(outbuf);\n\n\t\t/* data descriptor */\n\t\tif(flags & 8) {\n\t\t\to = new_buf(12);\n\t\t\to.write_shift(-4, crcs[fcnt]);\n\t\t\to.write_shift(4, outbuf.length);\n\t\t\to.write_shift(4, /*::(*/fi.content/*::||[])*/.length);\n\t\t\tstart_cd += o.l;\n\t\t\tout.push(o);\n\t\t}\n\n\t\t/* central directory */\n\t\to = new_buf(46);\n\t\to.write_shift(4, 0x02014b50);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(2, 20);\n\t\to.write_shift(2, flags);\n\t\to.write_shift(2, method);\n\t\to.write_shift(4, 0); /* TODO: last mod file time/date */\n\t\to.write_shift(-4, crcs[fcnt]);\n\n\t\to.write_shift(4, outbuf.length);\n\t\to.write_shift(4, /*::(*/fi.content/*::||[])*/.length);\n\t\to.write_shift(2, namebuf.length);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(4, 0);\n\t\to.write_shift(4, start);\n\n\t\tsz_cd += o.l;\n\t\tcdirs.push(o);\n\t\tsz_cd += namebuf.length;\n\t\tcdirs.push(namebuf);\n\t\t++fcnt;\n\t}\n\n\t/* end of central directory */\n\to = new_buf(22);\n\to.write_shift(4, 0x06054b50);\n\to.write_shift(2, 0);\n\to.write_shift(2, 0);\n\to.write_shift(2, fcnt);\n\to.write_shift(2, fcnt);\n\to.write_shift(4, sz_cd);\n\to.write_shift(4, start_cd);\n\to.write_shift(2, 0);\n\n\treturn bconcat(([bconcat((out/*:any*/)), bconcat(cdirs), o]/*:any*/));\n}\nvar ContentTypeMap = ({\n\t\"htm\": \"text/html\",\n\t\"xml\": \"text/xml\",\n\n\t\"gif\": \"image/gif\",\n\t\"jpg\": \"image/jpeg\",\n\t\"png\": \"image/png\",\n\n\t\"mso\": \"application/x-mso\",\n\t\"thmx\": \"application/vnd.ms-officetheme\",\n\t\"sh33tj5\": \"application/octet-stream\"\n}/*:any*/);\n\nfunction get_content_type(fi/*:CFBEntry*/, fp/*:string*/)/*:string*/ {\n\tif(fi.ctype) return fi.ctype;\n\n\tvar ext = fi.name || \"\", m = ext.match(/\\.([^\\.]+)$/);\n\tif(m && ContentTypeMap[m[1]]) return ContentTypeMap[m[1]];\n\n\tif(fp) {\n\t\tm = (ext = fp).match(/[\\.\\\\]([^\\.\\\\])+$/);\n\t\tif(m && ContentTypeMap[m[1]]) return ContentTypeMap[m[1]];\n\t}\n\n\treturn \"application/octet-stream\";\n}\n\n/* 76 character chunks TODO: intertwine encoding */\nfunction write_base64_76(bstr/*:string*/)/*:string*/ {\n\tvar data = Base64_encode(bstr);\n\tvar o = [];\n\tfor(var i = 0; i < data.length; i+= 76) o.push(data.slice(i, i+76));\n\treturn o.join(\"\\r\\n\") + \"\\r\\n\";\n}\n\n/*\nRules for QP:\n\t- escape =## applies for all non-display characters and literal \"=\"\n\t- space or tab at end of line must be encoded\n\t- \\r\\n newlines can be preserved, but bare \\r and \\n must be escaped\n\t- lines must not exceed 76 characters, use soft breaks =\\r\\n\n\nTODO: Some files from word appear to write line extensions with bare equals:\n\n```\n<table class=3DMsoTableGrid border=3D1 cellspacing=3D0 cellpadding=3D0 width=\n=\"70%\"\n```\n*/\nfunction write_quoted_printable(text/*:string*/)/*:string*/ {\n\tvar encoded = text.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7E-\\xFF=]/g, function(c) {\n\t\tvar w = c.charCodeAt(0).toString(16).toUpperCase();\n\t\treturn \"=\" + (w.length == 1 ? \"0\" + w : w);\n\t});\n\n\tencoded = encoded.replace(/ $/mg, \"=20\").replace(/\\t$/mg, \"=09\");\n\n\tif(encoded.charAt(0) == \"\\n\") encoded = \"=0D\" + encoded.slice(1);\n\tencoded = encoded.replace(/\\r(?!\\n)/mg, \"=0D\").replace(/\\n\\n/mg, \"\\n=0A\").replace(/([^\\r\\n])\\n/mg, \"$1=0A\");\n\n\tvar o/*:Array<string>*/ = [], split = encoded.split(\"\\r\\n\");\n\tfor(var si = 0; si < split.length; ++si) {\n\t\tvar str = split[si];\n\t\tif(str.length == 0) { o.push(\"\"); continue; }\n\t\tfor(var i = 0; i < str.length;) {\n\t\t\tvar end = 76;\n\t\t\tvar tmp = str.slice(i, i + end);\n\t\t\tif(tmp.charAt(end - 1) == \"=\") end --;\n\t\t\telse if(tmp.charAt(end - 2) == \"=\") end -= 2;\n\t\t\telse if(tmp.charAt(end - 3) == \"=\") end -= 3;\n\t\t\ttmp = str.slice(i, i + end);\n\t\t\ti += end;\n\t\t\tif(i < str.length) tmp += \"=\";\n\t\t\to.push(tmp);\n\t\t}\n\t}\n\n\treturn o.join(\"\\r\\n\");\n}\nfunction parse_quoted_printable(data/*:Array<string>*/)/*:RawBytes*/ {\n\tvar o = [];\n\n\t/* unify long lines */\n\tfor(var di = 0; di < data.length; ++di) {\n\t\tvar line = data[di];\n\t\twhile(di <= data.length && line.charAt(line.length - 1) == \"=\") line = line.slice(0, line.length - 1) + data[++di];\n\t\to.push(line);\n\t}\n\n\t/* decode */\n\tfor(var oi = 0; oi < o.length; ++oi) o[oi] = o[oi].replace(/[=][0-9A-Fa-f]{2}/g, function($$) { return String.fromCharCode(parseInt($$.slice(1), 16)); });\n\treturn s2a(o.join(\"\\r\\n\"));\n}\n\n\nfunction parse_mime(cfb/*:CFBContainer*/, data/*:Array<string>*/, root/*:string*/)/*:void*/ {\n\tvar fname = \"\", cte = \"\", ctype = \"\", fdata;\n\tvar di = 0;\n\tfor(;di < 10; ++di) {\n\t\tvar line = data[di];\n\t\tif(!line || line.match(/^\\s*$/)) break;\n\t\tvar m = line.match(/^(.*?):\\s*([^\\s].*)$/);\n\t\tif(m) switch(m[1].toLowerCase()) {\n\t\t\tcase \"content-location\": fname = m[2].trim(); break;\n\t\t\tcase \"content-type\": ctype = m[2].trim(); break;\n\t\t\tcase \"content-transfer-encoding\": cte = m[2].trim(); break;\n\t\t}\n\t}\n\t++di;\n\tswitch(cte.toLowerCase()) {\n\t\tcase 'base64': fdata = s2a(Base64_decode(data.slice(di).join(\"\"))); break;\n\t\tcase 'quoted-printable': fdata = parse_quoted_printable(data.slice(di)); break;\n\t\tdefault: throw new Error(\"Unsupported Content-Transfer-Encoding \" + cte);\n\t}\n\tvar file = cfb_add(cfb, fname.slice(root.length), fdata, {unsafe: true});\n\tif(ctype) file.ctype = ctype;\n}\n\nfunction parse_mad(file/*:RawBytes*/, options/*:CFBReadOpts*/)/*:CFBContainer*/ {\n\tif(a2s(file.slice(0,13)).toLowerCase() != \"mime-version:\") throw new Error(\"Unsupported MAD header\");\n\tvar root = (options && options.root || \"\");\n\t// $FlowIgnore\n\tvar data = (has_buf && Buffer.isBuffer(file) ? file.toString(\"binary\") : a2s(file)).split(\"\\r\\n\");\n\tvar di = 0, row = \"\";\n\n\t/* if root is not specified, scan for the common prefix */\n\tfor(di = 0; di < data.length; ++di) {\n\t\trow = data[di];\n\t\tif(!/^Content-Location:/i.test(row)) continue;\n\t\trow = row.slice(row.indexOf(\"file\"));\n\t\tif(!root) root = row.slice(0, row.lastIndexOf(\"/\") + 1);\n\t\tif(row.slice(0, root.length) == root) continue;\n\t\twhile(root.length > 0) {\n\t\t\troot = root.slice(0, root.length - 1);\n\t\t\troot = root.slice(0, root.lastIndexOf(\"/\") + 1);\n\t\t\tif(row.slice(0,root.length) == root) break;\n\t\t}\n\t}\n\n\tvar mboundary = (data[1] || \"\").match(/boundary=\"(.*?)\"/);\n\tif(!mboundary) throw new Error(\"MAD cannot find boundary\");\n\tvar boundary = \"--\" + (mboundary[1] || \"\");\n\n\tvar FileIndex/*:CFBFileIndex*/ = [], FullPaths/*:Array<string>*/ = [];\n\tvar o = {\n\t\tFileIndex: FileIndex,\n\t\tFullPaths: FullPaths\n\t};\n\tinit_cfb(o);\n\tvar start_di, fcnt = 0;\n\tfor(di = 0; di < data.length; ++di) {\n\t\tvar line = data[di];\n\t\tif(line !== boundary && line !== boundary + \"--\") continue;\n\t\tif(fcnt++) parse_mime(o, data.slice(start_di, di), root);\n\t\tstart_di = di;\n\t}\n\treturn o;\n}\n\nfunction write_mad(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:string*/ {\n\tvar opts = options || {};\n\tvar boundary = opts.boundary || \"SheetJS\";\n\tboundary = '------=' + boundary;\n\n\tvar out = [\n\t\t'MIME-Version: 1.0',\n\t\t'Content-Type: multipart/related; boundary=\"' + boundary.slice(2) + '\"',\n\t\t'',\n\t\t'',\n\t\t''\n\t];\n\n\tvar root = cfb.FullPaths[0], fp = root, fi = cfb.FileIndex[0];\n\tfor(var i = 1; i < cfb.FullPaths.length; ++i) {\n\t\tfp = cfb.FullPaths[i].slice(root.length);\n\t\tfi = cfb.FileIndex[i];\n\t\tif(!fi.size || !fi.content || fp == \"\\u0001Sh33tJ5\") continue;\n\n\t\t/* Normalize filename */\n\t\tfp = fp.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7E-\\xFF]/g, function(c) {\n\t\t\treturn \"_x\" + c.charCodeAt(0).toString(16) + \"_\";\n\t\t}).replace(/[\\u0080-\\uFFFF]/g, function(u) {\n\t\t\treturn \"_u\" + u.charCodeAt(0).toString(16) + \"_\";\n\t\t});\n\n\t\t/* Extract content as binary string */\n\t\tvar ca = fi.content;\n\t\t// $FlowIgnore\n\t\tvar cstr = has_buf && Buffer.isBuffer(ca) ? ca.toString(\"binary\") : a2s(ca);\n\n\t\t/* 4/5 of first 1024 chars ascii -> quoted printable, else base64 */\n\t\tvar dispcnt = 0, L = Math.min(1024, cstr.length), cc = 0;\n\t\tfor(var csl = 0; csl <= L; ++csl) if((cc=cstr.charCodeAt(csl)) >= 0x20 && cc < 0x80) ++dispcnt;\n\t\tvar qp = dispcnt >= L * 4 / 5;\n\n\t\tout.push(boundary);\n\t\tout.push('Content-Location: ' + (opts.root || 'file:///C:/SheetJS/') + fp);\n\t\tout.push('Content-Transfer-Encoding: ' + (qp ? 'quoted-printable' : 'base64'));\n\t\tout.push('Content-Type: ' + get_content_type(fi, fp));\n\t\tout.push('');\n\n\t\tout.push(qp ? write_quoted_printable(cstr) : write_base64_76(cstr));\n\t}\n\tout.push(boundary + '--\\r\\n');\n\treturn out.join(\"\\r\\n\");\n}\nfunction cfb_new(opts/*:?any*/)/*:CFBContainer*/ {\n\tvar o/*:CFBContainer*/ = ({}/*:any*/);\n\tinit_cfb(o, opts);\n\treturn o;\n}\n\nfunction cfb_add(cfb/*:CFBContainer*/, name/*:string*/, content/*:?RawBytes*/, opts/*:?any*/)/*:CFBEntry*/ {\n\tvar unsafe = opts && opts.unsafe;\n\tif(!unsafe) init_cfb(cfb);\n\tvar file = !unsafe && CFB.find(cfb, name);\n\tif(!file) {\n\t\tvar fpath/*:string*/ = cfb.FullPaths[0];\n\t\tif(name.slice(0, fpath.length) == fpath) fpath = name;\n\t\telse {\n\t\t\tif(fpath.slice(-1) != \"/\") fpath += \"/\";\n\t\t\tfpath = (fpath + name).replace(\"//\",\"/\");\n\t\t}\n\t\tfile = ({name: filename(name), type: 2}/*:any*/);\n\t\tcfb.FileIndex.push(file);\n\t\tcfb.FullPaths.push(fpath);\n\t\tif(!unsafe) CFB.utils.cfb_gc(cfb);\n\t}\n\t/*:: if(!file) throw new Error(\"unreachable\"); */\n\tfile.content = (content/*:any*/);\n\tfile.size = content ? content.length : 0;\n\tif(opts) {\n\t\tif(opts.CLSID) file.clsid = opts.CLSID;\n\t\tif(opts.mt) file.mt = opts.mt;\n\t\tif(opts.ct) file.ct = opts.ct;\n\t}\n\treturn file;\n}\n\nfunction cfb_del(cfb/*:CFBContainer*/, name/*:string*/)/*:boolean*/ {\n\tinit_cfb(cfb);\n\tvar file = CFB.find(cfb, name);\n\tif(file) for(var j = 0; j < cfb.FileIndex.length; ++j) if(cfb.FileIndex[j] == file) {\n\t\tcfb.FileIndex.splice(j, 1);\n\t\tcfb.FullPaths.splice(j, 1);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction cfb_mov(cfb/*:CFBContainer*/, old_name/*:string*/, new_name/*:string*/)/*:boolean*/ {\n\tinit_cfb(cfb);\n\tvar file = CFB.find(cfb, old_name);\n\tif(file) for(var j = 0; j < cfb.FileIndex.length; ++j) if(cfb.FileIndex[j] == file) {\n\t\tcfb.FileIndex[j].name = filename(new_name);\n\t\tcfb.FullPaths[j] = new_name;\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction cfb_gc(cfb/*:CFBContainer*/)/*:void*/ { rebuild_cfb(cfb, true); }\n\nexports.find = find;\nexports.read = read;\nexports.parse = parse;\nexports.write = write;\nexports.writeFile = write_file;\nexports.utils = {\n\tcfb_new: cfb_new,\n\tcfb_add: cfb_add,\n\tcfb_del: cfb_del,\n\tcfb_mov: cfb_mov,\n\tcfb_gc: cfb_gc,\n\tReadShift: ReadShift,\n\tCheckField: CheckField,\n\tprep_blob: prep_blob,\n\tbconcat: bconcat,\n\tuse_zlib: use_zlib,\n\t_deflateRaw: _deflate,\n\t_inflateRaw: _inflate,\n\tconsts: consts\n};\n\nreturn exports;\n})();\n\nlet _fs = void 0;\nfunction set_fs(fs) { _fs = fs; }\nexport { set_fs };\n\n/* normalize data for blob ctor */\nfunction blobify(data) {\n\tif(typeof data === \"string\") return s2ab(data);\n\tif(Array.isArray(data)) return a2u(data);\n\treturn data;\n}\n/* write or download file */\nfunction write_dl(fname/*:string*/, payload/*:any*/, enc/*:?string*/) {\n\t/*global IE_SaveFile, Blob, navigator, saveAs, document, File, chrome */\n\tif(typeof _fs !== 'undefined' && _fs.writeFileSync) return enc ? _fs.writeFileSync(fname, payload, enc) : _fs.writeFileSync(fname, payload);\n\tif(typeof Deno !== 'undefined') {\n\t\t/* in this spot, it's safe to assume typed arrays and TextEncoder/TextDecoder exist */\n\t\tif(enc && typeof payload == \"string\") switch(enc) {\n\t\t\tcase \"utf8\": payload = new TextEncoder(enc).encode(payload); break;\n\t\t\tcase \"binary\": payload = s2ab(payload); break;\n\t\t\t/* TODO: binary equivalent */\n\t\t\tdefault: throw new Error(\"Unsupported encoding \" + enc);\n\t\t}\n\t\treturn Deno.writeFileSync(fname, payload);\n\t}\n\tvar data = (enc == \"utf8\") ? utf8write(payload) : payload;\n\t/*:: declare var IE_SaveFile: any; */\n\tif(typeof IE_SaveFile !== 'undefined') return IE_SaveFile(data, fname);\n\tif(typeof Blob !== 'undefined') {\n\t\tvar blob = new Blob([blobify(data)], {type:\"application/octet-stream\"});\n\t\t/*:: declare var navigator: any; */\n\t\tif(typeof navigator !== 'undefined' && navigator.msSaveBlob) return navigator.msSaveBlob(blob, fname);\n\t\t/*:: declare var saveAs: any; */\n\t\tif(typeof saveAs !== 'undefined') return saveAs(blob, fname);\n\t\tif(typeof URL !== 'undefined' && typeof document !== 'undefined' && document.createElement && URL.createObjectURL) {\n\t\t\tvar url = URL.createObjectURL(blob);\n\t\t\t/*:: declare var chrome: any; */\n\t\t\tif(typeof chrome === 'object' && typeof (chrome.downloads||{}).download == \"function\") {\n\t\t\t\tif(URL.revokeObjectURL && typeof setTimeout !== 'undefined') setTimeout(function() { URL.revokeObjectURL(url); }, 60000);\n\t\t\t\treturn chrome.downloads.download({ url: url, filename: fname, saveAs: true});\n\t\t\t}\n\t\t\tvar a = document.createElement(\"a\");\n\t\t\tif(a.download != null) {\n\t\t\t\t/*:: if(document.body == null) throw new Error(\"unreachable\"); */\n\t\t\t\ta.download = fname; a.href = url; document.body.appendChild(a); a.click();\n\t\t\t\t/*:: if(document.body == null) throw new Error(\"unreachable\"); */ document.body.removeChild(a);\n\t\t\t\tif(URL.revokeObjectURL && typeof setTimeout !== 'undefined') setTimeout(function() { URL.revokeObjectURL(url); }, 60000);\n\t\t\t\treturn url;\n\t\t\t}\n\t\t}\n\t}\n\t// $FlowIgnore\n\tif(typeof $ !== 'undefined' && typeof File !== 'undefined' && typeof Folder !== 'undefined') try { // extendscript\n\t\t// $FlowIgnore\n\t\tvar out = File(fname); out.open(\"w\"); out.encoding = \"binary\";\n\t\tif(Array.isArray(payload)) payload = a2s(payload);\n\t\tout.write(payload); out.close(); return payload;\n\t} catch(e) { if(!e.message || !e.message.match(/onstruct/)) throw e; }\n\tthrow new Error(\"cannot save file \" + fname);\n}\n\n/* read binary data from file */\nfunction read_binary(path/*:string*/) {\n\tif(typeof _fs !== 'undefined') return _fs.readFileSync(path);\n\tif(typeof Deno !== 'undefined') return Deno.readFileSync(path);\n\t// $FlowIgnore\n\tif(typeof $ !== 'undefined' && typeof File !== 'undefined' && typeof Folder !== 'undefined') try { // extendscript\n\t\t// $FlowIgnore\n\t\tvar infile = File(path); infile.open(\"r\"); infile.encoding = \"binary\";\n\t\tvar data = infile.read(); infile.close();\n\t\treturn data;\n\t} catch(e) { if(!e.message || !e.message.match(/onstruct/)) throw e; }\n\tthrow new Error(\"Cannot access file \" + path);\n}\nfunction keys(o/*:any*/)/*:Array<any>*/ {\n\tvar ks = Object.keys(o), o2 = [];\n\tfor(var i = 0; i < ks.length; ++i) if(Object.prototype.hasOwnProperty.call(o, ks[i])) o2.push(ks[i]);\n\treturn o2;\n}\n\nfunction evert_key(obj/*:any*/, key/*:string*/)/*:EvertType*/ {\n\tvar o = ([]/*:any*/), K = keys(obj);\n\tfor(var i = 0; i !== K.length; ++i) if(o[obj[K[i]][key]] == null) o[obj[K[i]][key]] = K[i];\n\treturn o;\n}\n\nfunction evert(obj/*:any*/)/*:EvertType*/ {\n\tvar o = ([]/*:any*/), K = keys(obj);\n\tfor(var i = 0; i !== K.length; ++i) o[obj[K[i]]] = K[i];\n\treturn o;\n}\n\nfunction evert_num(obj/*:any*/)/*:EvertNumType*/ {\n\tvar o = ([]/*:any*/), K = keys(obj);\n\tfor(var i = 0; i !== K.length; ++i) o[obj[K[i]]] = parseInt(K[i],10);\n\treturn o;\n}\n\nfunction evert_arr(obj/*:any*/)/*:EvertArrType*/ {\n\tvar o/*:EvertArrType*/ = ([]/*:any*/), K = keys(obj);\n\tfor(var i = 0; i !== K.length; ++i) {\n\t\tif(o[obj[K[i]]] == null) o[obj[K[i]]] = [];\n\t\to[obj[K[i]]].push(K[i]);\n\t}\n\treturn o;\n}\n\nvar basedate = /*#__PURE__*/new Date(1899, 11, 30, 0, 0, 0); // 2209161600000\nfunction datenum(v/*:Date*/, date1904/*:?boolean*/)/*:number*/ {\n\tvar epoch = /*#__PURE__*/v.getTime();\n\tif(date1904) epoch -= 1462*24*60*60*1000;\n\tvar dnthresh = /*#__PURE__*/basedate.getTime() + (/*#__PURE__*/v.getTimezoneOffset() - /*#__PURE__*/basedate.getTimezoneOffset()) * 60000;\n\treturn (epoch - dnthresh) / (24 * 60 * 60 * 1000);\n}\nvar refdate = /*#__PURE__*/new Date();\nvar dnthresh = /*#__PURE__*/basedate.getTime() + (/*#__PURE__*/refdate.getTimezoneOffset() - /*#__PURE__*/basedate.getTimezoneOffset()) * 60000;\nvar refoffset = /*#__PURE__*/refdate.getTimezoneOffset();\nfunction numdate(v/*:number*/)/*:Date*/ {\n\tvar out = new Date();\n\tout.setTime(v * 24 * 60 * 60 * 1000 + dnthresh);\n\tif (out.getTimezoneOffset() !== refoffset) {\n\t\tout.setTime(out.getTime() + (out.getTimezoneOffset() - refoffset) * 60000);\n\t}\n\treturn out;\n}\n\n/* ISO 8601 Duration */\nfunction parse_isodur(s) {\n\tvar sec = 0, mt = 0, time = false;\n\tvar m = s.match(/P([0-9\\.]+Y)?([0-9\\.]+M)?([0-9\\.]+D)?T([0-9\\.]+H)?([0-9\\.]+M)?([0-9\\.]+S)?/);\n\tif(!m) throw new Error(\"|\" + s + \"| is not an ISO8601 Duration\");\n\tfor(var i = 1; i != m.length; ++i) {\n\t\tif(!m[i]) continue;\n\t\tmt = 1;\n\t\tif(i > 3) time = true;\n\t\tswitch(m[i].slice(m[i].length-1)) {\n\t\t\tcase 'Y':\n\t\t\t\tthrow new Error(\"Unsupported ISO Duration Field: \" + m[i].slice(m[i].length-1));\n\t\t\tcase 'D': mt *= 24;\n\t\t\t\t/* falls through */\n\t\t\tcase 'H': mt *= 60;\n\t\t\t\t/* falls through */\n\t\t\tcase 'M':\n\t\t\t\tif(!time) throw new Error(\"Unsupported ISO Duration Field: M\");\n\t\t\t\telse mt *= 60;\n\t\t\t\t/* falls through */\n\t\t\tcase 'S': break;\n\t\t}\n\t\tsec += mt * parseInt(m[i], 10);\n\t}\n\treturn sec;\n}\n\nvar good_pd_date_1 = /*#__PURE__*/new Date('2017-02-19T19:06:09.000Z');\nvar good_pd_date = /*#__PURE__*/isNaN(/*#__PURE__*/good_pd_date_1.getFullYear()) ? /*#__PURE__*/new Date('2/19/17') : good_pd_date_1;\nvar good_pd = /*#__PURE__*/good_pd_date.getFullYear() == 2017;\n/* parses a date as a local date */\nfunction parseDate(str/*:string|Date*/, fixdate/*:?number*/)/*:Date*/ {\n\tvar d = new Date(str);\n\tif(good_pd) {\n\t\t/*:: if(fixdate == null) fixdate = 0; */\n\t\tif(fixdate > 0) d.setTime(d.getTime() + d.getTimezoneOffset() * 60 * 1000);\n\t\telse if(fixdate < 0) d.setTime(d.getTime() - d.getTimezoneOffset() * 60 * 1000);\n\t\treturn d;\n\t}\n\tif(str instanceof Date) return str;\n\tif(good_pd_date.getFullYear() == 1917 && !isNaN(d.getFullYear())) {\n\t\tvar s = d.getFullYear();\n\t\tif(str.indexOf(\"\" + s) > -1) return d;\n\t\td.setFullYear(d.getFullYear() + 100); return d;\n\t}\n\tvar n = str.match(/\\d+/g)||[\"2017\",\"2\",\"19\",\"0\",\"0\",\"0\"];\n\tvar out = new Date(+n[0], +n[1] - 1, +n[2], (+n[3]||0), (+n[4]||0), (+n[5]||0));\n\tif(str.indexOf(\"Z\") > -1) out = new Date(out.getTime() - out.getTimezoneOffset() * 60 * 1000);\n\treturn out;\n}\n\nfunction cc2str(arr/*:Array<number>*/, debomit)/*:string*/ {\n\tif(has_buf && Buffer.isBuffer(arr)) {\n\t\tif(debomit) {\n\t\t\tif(arr[0] == 0xFF && arr[1] == 0xFE) return utf8write(arr.slice(2).toString(\"utf16le\"));\n\t\t\tif(arr[1] == 0xFE && arr[2] == 0xFF) return utf8write(utf16beread(arr.slice(2).toString(\"binary\")));\n\t\t}\n\t\treturn arr.toString(\"binary\");\n\t}\n\n\tif(typeof TextDecoder !== \"undefined\") try {\n\t\tif(debomit) {\n\t\t\tif(arr[0] == 0xFF && arr[1] == 0xFE) return utf8write(new TextDecoder(\"utf-16le\").decode(arr.slice(2)));\n\t\t\tif(arr[0] == 0xFE && arr[1] == 0xFF) return utf8write(new TextDecoder(\"utf-16be\").decode(arr.slice(2)));\n\t\t}\n\t\tvar rev = {\n\t\t\t\"\\u20ac\": \"\\x80\", \"\\u201a\": \"\\x82\", \"\\u0192\": \"\\x83\", \"\\u201e\": \"\\x84\",\n\t\t\t\"\\u2026\": \"\\x85\", \"\\u2020\": \"\\x86\", \"\\u2021\": \"\\x87\", \"\\u02c6\": \"\\x88\",\n\t\t\t\"\\u2030\": \"\\x89\", \"\\u0160\": \"\\x8a\", \"\\u2039\": \"\\x8b\", \"\\u0152\": \"\\x8c\",\n\t\t\t\"\\u017d\": \"\\x8e\", \"\\u2018\": \"\\x91\", \"\\u2019\": \"\\x92\", \"\\u201c\": \"\\x93\",\n\t\t\t\"\\u201d\": \"\\x94\", \"\\u2022\": \"\\x95\", \"\\u2013\": \"\\x96\", \"\\u2014\": \"\\x97\",\n\t\t\t\"\\u02dc\": \"\\x98\", \"\\u2122\": \"\\x99\", \"\\u0161\": \"\\x9a\", \"\\u203a\": \"\\x9b\",\n\t\t\t\"\\u0153\": \"\\x9c\", \"\\u017e\": \"\\x9e\", \"\\u0178\": \"\\x9f\"\n\t\t};\n\t\tif(Array.isArray(arr)) arr = new Uint8Array(arr);\n\t\treturn new TextDecoder(\"latin1\").decode(arr).replace(/[]/g, function(c) { return rev[c] || c; });\n\t} catch(e) {}\n\n\tvar o = [];\n\tfor(var i = 0; i != arr.length; ++i) o.push(String.fromCharCode(arr[i]));\n\treturn o.join(\"\");\n}\n\nfunction dup(o/*:any*/)/*:any*/ {\n\tif(typeof JSON != 'undefined' && !Array.isArray(o)) return JSON.parse(JSON.stringify(o));\n\tif(typeof o != 'object' || o == null) return o;\n\tif(o instanceof Date) return new Date(o.getTime());\n\tvar out = {};\n\tfor(var k in o) if(Object.prototype.hasOwnProperty.call(o, k)) out[k] = dup(o[k]);\n\treturn out;\n}\n\nfunction fill(c/*:string*/,l/*:number*/)/*:string*/ { var o = \"\"; while(o.length < l) o+=c; return o; }\n\n/* TODO: stress test */\nfunction fuzzynum(s/*:string*/)/*:number*/ {\n\tvar v/*:number*/ = Number(s);\n\tif(!isNaN(v)) return isFinite(v) ? v : NaN;\n\tif(!/\\d/.test(s)) return v;\n\tvar wt = 1;\n\tvar ss = s.replace(/([\\d]),([\\d])/g,\"$1$2\").replace(/[$]/g,\"\").replace(/[%]/g, function() { wt *= 100; return \"\";});\n\tif(!isNaN(v = Number(ss))) return v / wt;\n\tss = ss.replace(/[(](.*)[)]/,function($$, $1) { wt = -wt; return $1;});\n\tif(!isNaN(v = Number(ss))) return v / wt;\n\treturn v;\n}\nvar lower_months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\nfunction fuzzydate(s/*:string*/)/*:Date*/ {\n\tvar o = new Date(s), n = new Date(NaN);\n\tvar y = o.getYear(), m = o.getMonth(), d = o.getDate();\n\tif(isNaN(d)) return n;\n\tvar lower = s.toLowerCase();\n\tif(lower.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)) {\n\t\tlower = lower.replace(/[^a-z]/g,\"\").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,\"\");\n\t\tif(lower.length > 3 && lower_months.indexOf(lower) == -1) return n;\n\t} else if(lower.match(/[a-z]/)) return n;\n\tif(y < 0 || y > 8099) return n;\n\tif((m > 0 || d > 1) && y != 101) return o;\n\tif(s.match(/[^-0-9:,\\/\\\\]/)) return n;\n\treturn o;\n}\n\nvar split_regex = /*#__PURE__*/(function() {\n\tvar safe_split_regex = \"abacaba\".split(/(:?b)/i).length == 5;\n\treturn function split_regex(str/*:string*/, re, def/*:string*/)/*:Array<string>*/ {\n\t\tif(safe_split_regex || typeof re == \"string\") return str.split(re);\n\t\tvar p = str.split(re), o = [p[0]];\n\t\tfor(var i = 1; i < p.length; ++i) { o.push(def); o.push(p[i]); }\n\t\treturn o;\n\t};\n})();\nfunction getdatastr(data)/*:?string*/ {\n\tif(!data) return null;\n\tif(data.content && data.type) return cc2str(data.content, true);\n\tif(data.data) return debom(data.data);\n\tif(data.asNodeBuffer && has_buf) return debom(data.asNodeBuffer().toString('binary'));\n\tif(data.asBinary) return debom(data.asBinary());\n\tif(data._data && data._data.getContent) return debom(cc2str(Array.prototype.slice.call(data._data.getContent(),0)));\n\treturn null;\n}\n\nfunction getdatabin(data) {\n\tif(!data) return null;\n\tif(data.data) return char_codes(data.data);\n\tif(data.asNodeBuffer && has_buf) return data.asNodeBuffer();\n\tif(data._data && data._data.getContent) {\n\t\tvar o = data._data.getContent();\n\t\tif(typeof o == \"string\") return char_codes(o);\n\t\treturn Array.prototype.slice.call(o);\n\t}\n\tif(data.content && data.type) return data.content;\n\treturn null;\n}\n\nfunction getdata(data) { return (data && data.name.slice(-4) === \".bin\") ? getdatabin(data) : getdatastr(data); }\n\n/* Part 2 Section 10.1.2 \"Mapping Content Types\" Names are case-insensitive */\n/* OASIS does not comment on filename case sensitivity */\nfunction safegetzipfile(zip, file/*:string*/) {\n\tvar k = zip.FullPaths || keys(zip.files);\n\tvar f = file.toLowerCase().replace(/[\\/]/g, '\\\\'), g = f.replace(/\\\\/g,'\\/');\n\tfor(var i=0; i<k.length; ++i) {\n\t\tvar n = k[i].replace(/^Root Entry[\\/]/,\"\").toLowerCase();\n\t\tif(f == n || g == n) return zip.files ? zip.files[k[i]] : zip.FileIndex[i];\n\t}\n\treturn null;\n}\n\nfunction getzipfile(zip, file/*:string*/) {\n\tvar o = safegetzipfile(zip, file);\n\tif(o == null) throw new Error(\"Cannot find file \" + file + \" in zip\");\n\treturn o;\n}\n\nfunction getzipdata(zip, file/*:string*/, safe/*:?boolean*/)/*:any*/ {\n\tif(!safe) return getdata(getzipfile(zip, file));\n\tif(!file) return null;\n\ttry { return getzipdata(zip, file); } catch(e) { return null; }\n}\n\nfunction getzipstr(zip, file/*:string*/, safe/*:?boolean*/)/*:?string*/ {\n\tif(!safe) return getdatastr(getzipfile(zip, file));\n\tif(!file) return null;\n\ttry { return getzipstr(zip, file); } catch(e) { return null; }\n}\n\nfunction getzipbin(zip, file/*:string*/, safe/*:?boolean*/)/*:any*/ {\n\tif(!safe) return getdatabin(getzipfile(zip, file));\n\tif(!file) return null;\n\ttry { return getzipbin(zip, file); } catch(e) { return null; }\n}\n\nfunction zipentries(zip) {\n\tvar k = zip.FullPaths || keys(zip.files), o = [];\n\tfor(var i = 0; i < k.length; ++i) if(k[i].slice(-1) != '/') o.push(k[i].replace(/^Root Entry[\\/]/, \"\"));\n\treturn o.sort();\n}\n\nfunction zip_add_file(zip, path, content) {\n\tif(zip.FullPaths) {\n\t\tif(typeof content == \"string\") {\n\t\t\tvar res;\n\t\t\tif(has_buf) res = Buffer_from(content);\n\t\t\t/* TODO: investigate performance in Edge 13 */\n\t\t\t//else if(typeof TextEncoder !== \"undefined\") res = new TextEncoder().encode(content);\n\t\t\telse res = utf8decode(content);\n\t\t\treturn CFB.utils.cfb_add(zip, path, res);\n\t\t}\n\t\tCFB.utils.cfb_add(zip, path, content);\n\t}\n\telse zip.file(path, content);\n}\n\nfunction zip_new() { return CFB.utils.cfb_new(); }\n\nfunction zip_read(d, o) {\n\tswitch(o.type) {\n\t\tcase \"base64\": return CFB.read(d, { type: \"base64\" });\n\t\tcase \"binary\": return CFB.read(d, { type: \"binary\" });\n\t\tcase \"buffer\": case \"array\": return CFB.read(d, { type: \"buffer\" });\n\t}\n\tthrow new Error(\"Unrecognized type \" + o.type);\n}\n\nfunction resolve_path(path/*:string*/, base/*:string*/)/*:string*/ {\n\tif(path.charAt(0) == \"/\") return path.slice(1);\n\tvar result = base.split('/');\n\tif(base.slice(-1) != \"/\") result.pop(); // folder path\n\tvar target = path.split('/');\n\twhile (target.length !== 0) {\n\t\tvar step = target.shift();\n\t\tif (step === '..') result.pop();\n\t\telse if (step !== '.') result.push(step);\n\t}\n\treturn result.join('/');\n}\nvar XML_HEADER = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n';\nvar attregexg=/([^\"\\s?>\\/]+)\\s*=\\s*((?:\")([^\"]*)(?:\")|(?:')([^']*)(?:')|([^'\">\\s]+))/g;\nvar tagregex1=/<[\\/\\?]?[a-zA-Z0-9:_-]+(?:\\s+[^\"\\s?>\\/]+\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^'\">\\s=]+))*\\s*[\\/\\?]?>/mg, tagregex2 = /<[^>]*>/g;\nvar tagregex = /*#__PURE__*/XML_HEADER.match(tagregex1) ? tagregex1 : tagregex2;\nvar nsregex=/<\\w*:/, nsregex2 = /<(\\/?)\\w+:/;\nfunction parsexmltag(tag/*:string*/, skip_root/*:?boolean*/, skip_LC/*:?boolean*/)/*:any*/ {\n\tvar z = ({}/*:any*/);\n\tvar eq = 0, c = 0;\n\tfor(; eq !== tag.length; ++eq) if((c = tag.charCodeAt(eq)) === 32 || c === 10 || c === 13) break;\n\tif(!skip_root) z[0] = tag.slice(0, eq);\n\tif(eq === tag.length) return z;\n\tvar m = tag.match(attregexg), j=0, v=\"\", i=0, q=\"\", cc=\"\", quot = 1;\n\tif(m) for(i = 0; i != m.length; ++i) {\n\t\tcc = m[i];\n\t\tfor(c=0; c != cc.length; ++c) if(cc.charCodeAt(c) === 61) break;\n\t\tq = cc.slice(0,c).trim();\n\t\twhile(cc.charCodeAt(c+1) == 32) ++c;\n\t\tquot = ((eq=cc.charCodeAt(c+1)) == 34 || eq == 39) ? 1 : 0;\n\t\tv = cc.slice(c+1+quot, cc.length-quot);\n\t\tfor(j=0;j!=q.length;++j) if(q.charCodeAt(j) === 58) break;\n\t\tif(j===q.length) {\n\t\t\tif(q.indexOf(\"_\") > 0) q = q.slice(0, q.indexOf(\"_\")); // from ods\n\t\t\tz[q] = v;\n\t\t\tif(!skip_LC) z[q.toLowerCase()] = v;\n\t\t}\n\t\telse {\n\t\t\tvar k = (j===5 && q.slice(0,5)===\"xmlns\"?\"xmlns\":\"\")+q.slice(j+1);\n\t\t\tif(z[k] && q.slice(j-3,j) == \"ext\") continue; // from ods\n\t\t\tz[k] = v;\n\t\t\tif(!skip_LC) z[k.toLowerCase()] = v;\n\t\t}\n\t}\n\treturn z;\n}\nfunction strip_ns(x/*:string*/)/*:string*/ { return x.replace(nsregex2, \"<$1\"); }\n\nvar encodings = {\n\t'&quot;': '\"',\n\t'&apos;': \"'\",\n\t'&gt;': '>',\n\t'&lt;': '<',\n\t'&amp;': '&'\n};\nvar rencoding = /*#__PURE__*/evert(encodings);\n//var rencstr = \"&<>'\\\"\".split(\"\");\n\n// TODO: CP remap (need to read file version to determine OS)\nvar unescapexml/*:StringConv*/ = /*#__PURE__*/(function() {\n\t/* 22.4.2.4 bstr (Basic String) */\n\tvar encregex = /&(?:quot|apos|gt|lt|amp|#x?([\\da-fA-F]+));/ig, coderegex = /_x([\\da-fA-F]{4})_/ig;\n\treturn function unescapexml(text/*:string*/)/*:string*/ {\n\t\tvar s = text + '', i = s.indexOf(\"<![CDATA[\");\n\t\tif(i == -1) return s.replace(encregex, function($$, $1) { return encodings[$$]||String.fromCharCode(parseInt($1,$$.indexOf(\"x\")>-1?16:10))||$$; }).replace(coderegex,function(m,c) {return String.fromCharCode(parseInt(c,16));});\n\t\tvar j = s.indexOf(\"]]>\");\n\t\treturn unescapexml(s.slice(0, i)) + s.slice(i+9,j) + unescapexml(s.slice(j+3));\n\t};\n})();\n\nvar decregex=/[&<>'\"]/g, charegex = /[\\u0000-\\u0008\\u000b-\\u001f]/g;\nfunction escapexml(text/*:string*/)/*:string*/{\n\tvar s = text + '';\n\treturn s.replace(decregex, function(y) { return rencoding[y]; }).replace(charegex,function(s) { return \"_x\" + (\"000\"+s.charCodeAt(0).toString(16)).slice(-4) + \"_\";});\n}\nfunction escapexmltag(text/*:string*/)/*:string*/{ return escapexml(text).replace(/ /g,\"_x0020_\"); }\n\nvar htmlcharegex = /[\\u0000-\\u001f]/g;\nfunction escapehtml(text/*:string*/)/*:string*/{\n\tvar s = text + '';\n\treturn s.replace(decregex, function(y) { return rencoding[y]; }).replace(/\\n/g, \"<br/>\").replace(htmlcharegex,function(s) { return \"&#x\" + (\"000\"+s.charCodeAt(0).toString(16)).slice(-4) + \";\"; });\n}\n\nfunction escapexlml(text/*:string*/)/*:string*/{\n\tvar s = text + '';\n\treturn s.replace(decregex, function(y) { return rencoding[y]; }).replace(htmlcharegex,function(s) { return \"&#x\" + (s.charCodeAt(0).toString(16)).toUpperCase() + \";\"; });\n}\n\n/* TODO: handle codepages */\nvar xlml_fixstr/*:StringConv*/ = /*#__PURE__*/(function() {\n\tvar entregex = /&#(\\d+);/g;\n\tfunction entrepl($$/*:string*/,$1/*:string*/)/*:string*/ { return String.fromCharCode(parseInt($1,10)); }\n\treturn function xlml_fixstr(str/*:string*/)/*:string*/ { return str.replace(entregex,entrepl); };\n})();\nfunction xlml_unfixstr(str/*:string*/)/*:string*/ { return str.replace(/(\\r\\n|[\\r\\n])/g,\"\\&#10;\"); }\n\nfunction parsexmlbool(value/*:any*/)/*:boolean*/ {\n\tswitch(value) {\n\t\tcase 1: case true: case '1': case 'true': case 'TRUE': return true;\n\t\t/* case '0': case 'false': case 'FALSE':*/\n\t\tdefault: return false;\n\t}\n}\n\nfunction utf8reada(orig/*:string*/)/*:string*/ {\n\tvar out = \"\", i = 0, c = 0, d = 0, e = 0, f = 0, w = 0;\n\twhile (i < orig.length) {\n\t\tc = orig.charCodeAt(i++);\n\t\tif (c < 128) { out += String.fromCharCode(c); continue; }\n\t\td = orig.charCodeAt(i++);\n\t\tif (c>191 && c<224) { f = ((c & 31) << 6); f |= (d & 63); out += String.fromCharCode(f); continue; }\n\t\te = orig.charCodeAt(i++);\n\t\tif (c < 240) { out += String.fromCharCode(((c & 15) << 12) | ((d & 63) << 6) | (e & 63)); continue; }\n\t\tf = orig.charCodeAt(i++);\n\t\tw = (((c & 7) << 18) | ((d & 63) << 12) | ((e & 63) << 6) | (f & 63))-65536;\n\t\tout += String.fromCharCode(0xD800 + ((w>>>10)&1023));\n\t\tout += String.fromCharCode(0xDC00 + (w&1023));\n\t}\n\treturn out;\n}\n\nfunction utf8readb(data) {\n\tvar out = new_raw_buf(2*data.length), w, i, j = 1, k = 0, ww=0, c;\n\tfor(i = 0; i < data.length; i+=j) {\n\t\tj = 1;\n\t\tif((c=data.charCodeAt(i)) < 128) w = c;\n\t\telse if(c < 224) { w = (c&31)*64+(data.charCodeAt(i+1)&63); j=2; }\n\t\telse if(c < 240) { w=(c&15)*4096+(data.charCodeAt(i+1)&63)*64+(data.charCodeAt(i+2)&63); j=3; }\n\t\telse { j = 4;\n\t\t\tw = (c & 7)*262144+(data.charCodeAt(i+1)&63)*4096+(data.charCodeAt(i+2)&63)*64+(data.charCodeAt(i+3)&63);\n\t\t\tw -= 65536; ww = 0xD800 + ((w>>>10)&1023); w = 0xDC00 + (w&1023);\n\t\t}\n\t\tif(ww !== 0) { out[k++] = ww&255; out[k++] = ww>>>8; ww = 0; }\n\t\tout[k++] = w%256; out[k++] = w>>>8;\n\t}\n\treturn out.slice(0,k).toString('ucs2');\n}\n\nfunction utf8readc(data) { return Buffer_from(data, 'binary').toString('utf8'); }\n\nvar utf8corpus = \"foo bar baz\\u00e2\\u0098\\u0083\\u00f0\\u009f\\u008d\\u00a3\";\nvar utf8read = has_buf && (/*#__PURE__*/utf8readc(utf8corpus) == /*#__PURE__*/utf8reada(utf8corpus) && utf8readc || /*#__PURE__*/utf8readb(utf8corpus) == /*#__PURE__*/utf8reada(utf8corpus) && utf8readb) || utf8reada;\n\nvar utf8write/*:StringConv*/ = has_buf ? function(data) { return Buffer_from(data, 'utf8').toString(\"binary\"); } : function(orig/*:string*/)/*:string*/ {\n\tvar out/*:Array<string>*/ = [], i = 0, c = 0, d = 0;\n\twhile(i < orig.length) {\n\t\tc = orig.charCodeAt(i++);\n\t\tswitch(true) {\n\t\t\tcase c < 128: out.push(String.fromCharCode(c)); break;\n\t\t\tcase c < 2048:\n\t\t\t\tout.push(String.fromCharCode(192 + (c >> 6)));\n\t\t\t\tout.push(String.fromCharCode(128 + (c & 63)));\n\t\t\t\tbreak;\n\t\t\tcase c >= 55296 && c < 57344:\n\t\t\t\tc -= 55296; d = orig.charCodeAt(i++) - 56320 + (c<<10);\n\t\t\t\tout.push(String.fromCharCode(240 + ((d >>18) & 7)));\n\t\t\t\tout.push(String.fromCharCode(144 + ((d >>12) & 63)));\n\t\t\t\tout.push(String.fromCharCode(128 + ((d >> 6) & 63)));\n\t\t\t\tout.push(String.fromCharCode(128 + (d & 63)));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tout.push(String.fromCharCode(224 + (c >> 12)));\n\t\t\t\tout.push(String.fromCharCode(128 + ((c >> 6) & 63)));\n\t\t\t\tout.push(String.fromCharCode(128 + (c & 63)));\n\t\t}\n\t}\n\treturn out.join(\"\");\n};\n\n// matches <foo>...</foo> extracts content\nvar matchtag = /*#__PURE__*/(function() {\n\tvar mtcache/*:{[k:string]:RegExp}*/ = ({}/*:any*/);\n\treturn function matchtag(f/*:string*/,g/*:?string*/)/*:RegExp*/ {\n\t\tvar t = f+\"|\"+(g||\"\");\n\t\tif(mtcache[t]) return mtcache[t];\n\t\treturn (mtcache[t] = new RegExp('<(?:\\\\w+:)?'+f+'(?: xml:space=\"preserve\")?(?:[^>]*)>([\\\\s\\\\S]*?)</(?:\\\\w+:)?'+f+'>',((g||\"\")/*:any*/)));\n\t};\n})();\n\nvar htmldecode/*:{(s:string):string}*/ = /*#__PURE__*/(function() {\n\tvar entities/*:Array<[RegExp, string]>*/ = [\n\t\t['nbsp', ' '], ['middot', ''],\n\t\t['quot', '\"'], ['apos', \"'\"], ['gt',   '>'], ['lt',   '<'], ['amp',  '&']\n\t].map(function(x/*:[string, string]*/) { return [new RegExp('&' + x[0] + ';', \"ig\"), x[1]]; });\n\treturn function htmldecode(str/*:string*/)/*:string*/ {\n\t\tvar o = str\n\t\t\t\t// Remove new lines and spaces from start of content\n\t\t\t\t.replace(/^[\\t\\n\\r ]+/, \"\")\n\t\t\t\t// Remove new lines and spaces from end of content\n\t\t\t\t.replace(/[\\t\\n\\r ]+$/,\"\")\n\t\t\t\t// Added line which removes any white space characters after and before html tags\n\t\t\t\t.replace(/>\\s+/g,\">\").replace(/\\s+</g,\"<\")\n\t\t\t\t// Replace remaining new lines and spaces with space\n\t\t\t\t.replace(/[\\t\\n\\r ]+/g, \" \")\n\t\t\t\t// Replace <br> tags with new lines\n\t\t\t\t.replace(/<\\s*[bB][rR]\\s*\\/?>/g,\"\\n\")\n\t\t\t\t// Strip HTML elements\n\t\t\t\t.replace(/<[^>]*>/g,\"\");\n\t\tfor(var i = 0; i < entities.length; ++i) o = o.replace(entities[i][0], entities[i][1]);\n\t\treturn o;\n\t};\n})();\n\nvar vtregex = /*#__PURE__*/(function(){ var vt_cache = {};\n\treturn function vt_regex(bt) {\n\t\tif(vt_cache[bt] !== undefined) return vt_cache[bt];\n\t\treturn (vt_cache[bt] = new RegExp(\"<(?:vt:)?\" + bt + \">([\\\\s\\\\S]*?)</(?:vt:)?\" + bt + \">\", 'g') );\n};})();\nvar vtvregex = /<\\/?(?:vt:)?variant>/g, vtmregex = /<(?:vt:)([^>]*)>([\\s\\S]*)</;\nfunction parseVector(data/*:string*/, opts)/*:Array<{v:string,t:string}>*/ {\n\tvar h = parsexmltag(data);\n\n\tvar matches/*:Array<string>*/ = data.match(vtregex(h.baseType))||[];\n\tvar res/*:Array<any>*/ = [];\n\tif(matches.length != h.size) {\n\t\tif(opts.WTF) throw new Error(\"unexpected vector length \" + matches.length + \" != \" + h.size);\n\t\treturn res;\n\t}\n\tmatches.forEach(function(x/*:string*/) {\n\t\tvar v = x.replace(vtvregex,\"\").match(vtmregex);\n\t\tif(v) res.push({v:utf8read(v[2]), t:v[1]});\n\t});\n\treturn res;\n}\n\nvar wtregex = /(^\\s|\\s$|\\n)/;\nfunction writetag(f/*:string*/,g/*:string*/)/*:string*/ { return '<' + f + (g.match(wtregex)?' xml:space=\"preserve\"' : \"\") + '>' + g + '</' + f + '>'; }\n\nfunction wxt_helper(h)/*:string*/ { return keys(h).map(function(k) { return \" \" + k + '=\"' + h[k] + '\"';}).join(\"\"); }\nfunction writextag(f/*:string*/,g/*:?string*/,h) { return '<' + f + ((h != null) ? wxt_helper(h) : \"\") + ((g != null) ? (g.match(wtregex)?' xml:space=\"preserve\"' : \"\") + '>' + g + '</' + f : \"/\") + '>';}\n\nfunction write_w3cdtf(d/*:Date*/, t/*:?boolean*/)/*:string*/ { try { return d.toISOString().replace(/\\.\\d*/,\"\"); } catch(e) { if(t) throw e; } return \"\"; }\n\nfunction write_vt(s, xlsx/*:?boolean*/)/*:string*/ {\n\tswitch(typeof s) {\n\t\tcase 'string':\n\t\t\tvar o = writextag('vt:lpwstr', escapexml(s));\n\t\t\tif(xlsx) o = o.replace(/&quot;/g, \"_x0022_\");\n\t\t\treturn o;\n\t\tcase 'number': return writextag((s|0)==s?'vt:i4':'vt:r8', escapexml(String(s)));\n\t\tcase 'boolean': return writextag('vt:bool',s?'true':'false');\n\t}\n\tif(s instanceof Date) return writextag('vt:filetime', write_w3cdtf(s));\n\tthrow new Error(\"Unable to serialize \" + s);\n}\n\nfunction xlml_normalize(d)/*:string*/ {\n\tif(has_buf &&/*::typeof Buffer !== \"undefined\" && d != null && d instanceof Buffer &&*/ Buffer.isBuffer(d)) return d.toString('utf8');\n\tif(typeof d === 'string') return d;\n\t/* duktape */\n\tif(typeof Uint8Array !== 'undefined' && d instanceof Uint8Array) return utf8read(a2s(ab2a(d)));\n\tthrow new Error(\"Bad input format: expected Buffer or string\");\n}\n/* UOS uses CJK in tags */\nvar xlmlregex = /<(\\/?)([^\\s?><!\\/:]*:|)([^\\s?<>:\\/]+)(?:[\\s?:\\/][^>]*)?>/mg;\n//var xlmlregex = /<(\\/?)([a-z0-9]*:|)(\\w+)[^>]*>/mg;\n\nvar XMLNS = ({\n\tCORE_PROPS: 'http://schemas.openxmlformats.org/package/2006/metadata/core-properties',\n\tCUST_PROPS: \"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties\",\n\tEXT_PROPS: \"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\",\n\tCT: 'http://schemas.openxmlformats.org/package/2006/content-types',\n\tRELS: 'http://schemas.openxmlformats.org/package/2006/relationships',\n\tTCMNT: 'http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments',\n\t'dc': 'http://purl.org/dc/elements/1.1/',\n\t'dcterms': 'http://purl.org/dc/terms/',\n\t'dcmitype': 'http://purl.org/dc/dcmitype/',\n\t'mx': 'http://schemas.microsoft.com/office/mac/excel/2008/main',\n\t'r': 'http://schemas.openxmlformats.org/officeDocument/2006/relationships',\n\t'sjs': 'http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties',\n\t'vt': 'http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes',\n\t'xsi': 'http://www.w3.org/2001/XMLSchema-instance',\n\t'xsd': 'http://www.w3.org/2001/XMLSchema'\n}/*:any*/);\n\nvar XMLNS_main = [\n\t'http://schemas.openxmlformats.org/spreadsheetml/2006/main',\n\t'http://purl.oclc.org/ooxml/spreadsheetml/main',\n\t'http://schemas.microsoft.com/office/excel/2006/main',\n\t'http://schemas.microsoft.com/office/excel/2006/2'\n];\n\nvar XLMLNS = ({\n\t'o':    'urn:schemas-microsoft-com:office:office',\n\t'x':    'urn:schemas-microsoft-com:office:excel',\n\t'ss':   'urn:schemas-microsoft-com:office:spreadsheet',\n\t'dt':   'uuid:C2F41010-65B3-11d1-A29F-00AA00C14882',\n\t'mv':   'http://macVmlSchemaUri',\n\t'v':    'urn:schemas-microsoft-com:vml',\n\t'html': 'http://www.w3.org/TR/REC-html40'\n}/*:any*/);\nfunction read_double_le(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ {\n\tvar s = 1 - 2 * (b[idx + 7] >>> 7);\n\tvar e = ((b[idx + 7] & 0x7f) << 4) + ((b[idx + 6] >>> 4) & 0x0f);\n\tvar m = (b[idx+6]&0x0f);\n\tfor(var i = 5; i >= 0; --i) m = m * 256 + b[idx + i];\n\tif(e == 0x7ff) return m == 0 ? (s * Infinity) : NaN;\n\tif(e == 0) e = -1022;\n\telse { e -= 1023; m += Math.pow(2,52); }\n\treturn s * Math.pow(2, e - 52) * m;\n}\n\nfunction write_double_le(b/*:RawBytes|CFBlob*/, v/*:number*/, idx/*:number*/) {\n\tvar bs = ((((v < 0) || (1/v == -Infinity)) ? 1 : 0) << 7), e = 0, m = 0;\n\tvar av = bs ? (-v) : v;\n\tif(!isFinite(av)) { e = 0x7ff; m = isNaN(v) ? 0x6969 : 0; }\n\telse if(av == 0) e = m = 0;\n\telse {\n\t\te = Math.floor(Math.log(av) / Math.LN2);\n\t\tm = av * Math.pow(2, 52 - e);\n\t\tif((e <= -1023) && (!isFinite(m) || (m < Math.pow(2,52)))) { e = -1022; }\n\t\telse { m -= Math.pow(2,52); e+=1023; }\n\t}\n\tfor(var i = 0; i <= 5; ++i, m/=256) b[idx + i] = m & 0xff;\n\tb[idx + 6] = ((e & 0x0f) << 4) | (m & 0xf);\n\tb[idx + 7] = (e >> 4) | bs;\n}\n\nvar ___toBuffer = function(bufs/*:Array<Array<RawBytes> >*/)/*:RawBytes*/ { var x=[],w=10240; for(var i=0;i<bufs[0].length;++i) if(bufs[0][i]) for(var j=0,L=bufs[0][i].length;j<L;j+=w) x.push.apply(x, bufs[0][i].slice(j,j+w)); return x; };\nvar __toBuffer = has_buf ? function(bufs) { return (bufs[0].length > 0 && Buffer.isBuffer(bufs[0][0])) ? Buffer.concat(bufs[0].map(function(x) { return Buffer.isBuffer(x) ? x : Buffer_from(x); })) : ___toBuffer(bufs);} : ___toBuffer;\n\nvar ___utf16le = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/)/*:string*/ { var ss/*:Array<string>*/=[]; for(var i=s; i<e; i+=2) ss.push(String.fromCharCode(__readUInt16LE(b,i))); return ss.join(\"\").replace(chr0,''); };\nvar __utf16le = has_buf ? function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/)/*:string*/ { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___utf16le(b,s,e); return b.toString('utf16le',s,e).replace(chr0,'')/*.replace(chr1,'!')*/; } : ___utf16le;\n\nvar ___hexlify = function(b/*:RawBytes|CFBlob*/,s/*:number*/,l/*:number*/)/*:string*/ { var ss/*:Array<string>*/=[]; for(var i=s; i<s+l; ++i) ss.push((\"0\" + b[i].toString(16)).slice(-2)); return ss.join(\"\"); };\nvar __hexlify = has_buf ? function(b/*:RawBytes|CFBlob*/,s/*:number*/,l/*:number*/)/*:string*/ { return Buffer.isBuffer(b)/*:: && b instanceof Buffer*/ ? b.toString('hex',s,s+l) : ___hexlify(b,s,l); } : ___hexlify;\n\nvar ___utf8 = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/) { var ss=[]; for(var i=s; i<e; i++) ss.push(String.fromCharCode(__readUInt8(b,i))); return ss.join(\"\"); };\nvar __utf8 = has_buf ? function utf8_b(b/*:RawBytes|CFBlob*/, s/*:number*/, e/*:number*/) { return (Buffer.isBuffer(b)/*:: && (b instanceof Buffer)*/) ? b.toString('utf8',s,e) : ___utf8(b,s,e); } : ___utf8;\n\nvar ___lpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len-1) : \"\";};\nvar __lpstr = ___lpstr;\n\nvar ___cpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len-1) : \"\";};\nvar __cpstr = ___cpstr;\n\nvar ___lpwstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = 2*__readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len-1) : \"\";};\nvar __lpwstr = ___lpwstr;\n\nvar ___lpp4 = function lpp4_(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf16le(b, i+4,i+4+len) : \"\";};\nvar __lpp4 = ___lpp4;\n\nvar ___8lpp4 = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len) : \"\";};\nvar __8lpp4 = ___8lpp4;\n\nvar ___double = function(b/*:RawBytes|CFBlob*/, idx/*:number*/) { return read_double_le(b, idx);};\nvar __double = ___double;\n\nvar is_buf = function is_buf_a(a) { return Array.isArray(a) || (typeof Uint8Array !== \"undefined\" && a instanceof Uint8Array); };\n\nif(has_buf/*:: && typeof Buffer !== 'undefined'*/) {\n\t__lpstr = function lpstr_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___lpstr(b, i); var len = b.readUInt32LE(i); return len > 0 ? b.toString('utf8',i+4,i+4+len-1) : \"\";};\n\t__cpstr = function cpstr_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___cpstr(b, i); var len = b.readUInt32LE(i); return len > 0 ? b.toString('utf8',i+4,i+4+len-1) : \"\";};\n\t__lpwstr = function lpwstr_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___lpwstr(b, i); var len = 2*b.readUInt32LE(i); return b.toString('utf16le',i+4,i+4+len-1);};\n\t__lpp4 = function lpp4_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___lpp4(b, i); var len = b.readUInt32LE(i); return b.toString('utf16le',i+4,i+4+len);};\n\t__8lpp4 = function lpp4_8b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___8lpp4(b, i); var len = b.readUInt32LE(i); return b.toString('utf8',i+4,i+4+len);};\n\t__double = function double_(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(Buffer.isBuffer(b)/*::&& b instanceof Buffer*/) return b.readDoubleLE(i); return ___double(b,i); };\n\tis_buf = function is_buf_b(a) { return Buffer.isBuffer(a) || Array.isArray(a) || (typeof Uint8Array !== \"undefined\" && a instanceof Uint8Array); };\n}\n\n/* from js-xls */\nfunction cpdoit() {\n\t__utf16le = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/) { return $cptable.utils.decode(1200, b.slice(s,e)).replace(chr0, ''); };\n\t__utf8 = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/) { return $cptable.utils.decode(65001, b.slice(s,e)); };\n\t__lpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(current_ansi, b.slice(i+4, i+4+len-1)) : \"\";};\n\t__cpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(current_codepage, b.slice(i+4, i+4+len-1)) : \"\";};\n\t__lpwstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = 2*__readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(1200, b.slice(i+4,i+4+len-1)) : \"\";};\n\t__lpp4 = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(1200, b.slice(i+4,i+4+len)) : \"\";};\n\t__8lpp4 = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(65001, b.slice(i+4,i+4+len)) : \"\";};\n}\nif(typeof $cptable !== 'undefined') cpdoit();\n\nvar __readUInt8 = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return b[idx]; };\nvar __readUInt16LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return (b[idx+1]*(1<<8))+b[idx]; };\nvar __readInt16LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { var u = (b[idx+1]*(1<<8))+b[idx]; return (u < 0x8000) ? u : ((0xffff - u + 1) * -1); };\nvar __readUInt32LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return b[idx+3]*(1<<24)+(b[idx+2]<<16)+(b[idx+1]<<8)+b[idx]; };\nvar __readInt32LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return (b[idx+3]<<24)|(b[idx+2]<<16)|(b[idx+1]<<8)|b[idx]; };\nvar __readInt32BE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return (b[idx]<<24)|(b[idx+1]<<16)|(b[idx+2]<<8)|b[idx+3]; };\n\nfunction ReadShift(size/*:number*/, t/*:?string*/)/*:number|string*/ {\n\tvar o=\"\", oI/*:: :number = 0*/, oR, oo=[], w, vv, i, loc;\n\tswitch(t) {\n\t\tcase 'dbcs':\n\t\t\tloc = this.l;\n\t\t\tif(has_buf && Buffer.isBuffer(this)) o = this.slice(this.l, this.l+2*size).toString(\"utf16le\");\n\t\t\telse for(i = 0; i < size; ++i) { o+=String.fromCharCode(__readUInt16LE(this, loc)); loc+=2; }\n\t\t\tsize *= 2;\n\t\t\tbreak;\n\n\t\tcase 'utf8': o = __utf8(this, this.l, this.l + size); break;\n\t\tcase 'utf16le': size *= 2; o = __utf16le(this, this.l, this.l + size); break;\n\n\t\tcase 'wstr':\n\t\t\tif(typeof $cptable !== 'undefined') o = $cptable.utils.decode(current_codepage, this.slice(this.l, this.l+2*size));\n\t\t\telse return ReadShift.call(this, size, 'dbcs');\n\t\t\tsize = 2 * size; break;\n\n\t\t/* [MS-OLEDS] 2.1.4 LengthPrefixedAnsiString */\n\t\tcase 'lpstr-ansi': o = __lpstr(this, this.l); size = 4 + __readUInt32LE(this, this.l); break;\n\t\tcase 'lpstr-cp': o = __cpstr(this, this.l); size = 4 + __readUInt32LE(this, this.l); break;\n\t\t/* [MS-OLEDS] 2.1.5 LengthPrefixedUnicodeString */\n\t\tcase 'lpwstr': o = __lpwstr(this, this.l); size = 4 + 2 * __readUInt32LE(this, this.l); break;\n\t\t/* [MS-OFFCRYPTO] 2.1.2 Length-Prefixed Padded Unicode String (UNICODE-LP-P4) */\n\t\tcase 'lpp4': size = 4 +  __readUInt32LE(this, this.l); o = __lpp4(this, this.l); if(size & 0x02) size += 2; break;\n\t\t/* [MS-OFFCRYPTO] 2.1.3 Length-Prefixed UTF-8 String (UTF-8-LP-P4) */\n\t\tcase '8lpp4': size = 4 +  __readUInt32LE(this, this.l); o = __8lpp4(this, this.l); if(size & 0x03) size += 4 - (size & 0x03); break;\n\n\t\tcase 'cstr': size = 0; o = \"\";\n\t\t\twhile((w=__readUInt8(this, this.l + size++))!==0) oo.push(_getchar(w));\n\t\t\to = oo.join(\"\"); break;\n\t\tcase '_wstr': size = 0; o = \"\";\n\t\t\twhile((w=__readUInt16LE(this,this.l +size))!==0){oo.push(_getchar(w));size+=2;}\n\t\t\tsize+=2; o = oo.join(\"\"); break;\n\n\t\t/* sbcs and dbcs support continue records in the SST way TODO codepages */\n\t\tcase 'dbcs-cont': o = \"\"; loc = this.l;\n\t\t\tfor(i = 0; i < size; ++i) {\n\t\t\t\tif(this.lens && this.lens.indexOf(loc) !== -1) {\n\t\t\t\t\tw = __readUInt8(this, loc);\n\t\t\t\t\tthis.l = loc + 1;\n\t\t\t\t\tvv = ReadShift.call(this, size-i, w ? 'dbcs-cont' : 'sbcs-cont');\n\t\t\t\t\treturn oo.join(\"\") + vv;\n\t\t\t\t}\n\t\t\t\too.push(_getchar(__readUInt16LE(this, loc)));\n\t\t\t\tloc+=2;\n\t\t\t} o = oo.join(\"\"); size *= 2; break;\n\n\t\tcase 'cpstr':\n\t\t\tif(typeof $cptable !== 'undefined') {\n\t\t\t\to = $cptable.utils.decode(current_codepage, this.slice(this.l, this.l + size));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t/* falls through */\n\t\tcase 'sbcs-cont': o = \"\"; loc = this.l;\n\t\t\tfor(i = 0; i != size; ++i) {\n\t\t\t\tif(this.lens && this.lens.indexOf(loc) !== -1) {\n\t\t\t\t\tw = __readUInt8(this, loc);\n\t\t\t\t\tthis.l = loc + 1;\n\t\t\t\t\tvv = ReadShift.call(this, size-i, w ? 'dbcs-cont' : 'sbcs-cont');\n\t\t\t\t\treturn oo.join(\"\") + vv;\n\t\t\t\t}\n\t\t\t\too.push(_getchar(__readUInt8(this, loc)));\n\t\t\t\tloc+=1;\n\t\t\t} o = oo.join(\"\"); break;\n\n\t\tdefault:\n\tswitch(size) {\n\t\tcase 1: oI = __readUInt8(this, this.l); this.l++; return oI;\n\t\tcase 2: oI = (t === 'i' ? __readInt16LE : __readUInt16LE)(this, this.l); this.l += 2; return oI;\n\t\tcase 4: case -4:\n\t\t\tif(t === 'i' || ((this[this.l+3] & 0x80)===0)) { oI = ((size > 0) ? __readInt32LE : __readInt32BE)(this, this.l); this.l += 4; return oI; }\n\t\t\telse { oR = __readUInt32LE(this, this.l); this.l += 4; } return oR;\n\t\tcase 8: case -8:\n\t\t\tif(t === 'f') {\n\t\t\t\tif(size == 8) oR = __double(this, this.l);\n\t\t\t\telse oR = __double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]], 0);\n\t\t\t\tthis.l += 8; return oR;\n\t\t\t} else size = 8;\n\t\t/* falls through */\n\t\tcase 16: o = __hexlify(this, this.l, size); break;\n\t}}\n\tthis.l+=size; return o;\n}\n\nvar __writeUInt32LE = function(b/*:RawBytes|CFBlob*/, val/*:number*/, idx/*:number*/)/*:void*/ { b[idx] = (val & 0xFF); b[idx+1] = ((val >>> 8) & 0xFF); b[idx+2] = ((val >>> 16) & 0xFF); b[idx+3] = ((val >>> 24) & 0xFF); };\nvar __writeInt32LE  = function(b/*:RawBytes|CFBlob*/, val/*:number*/, idx/*:number*/)/*:void*/ { b[idx] = (val & 0xFF); b[idx+1] = ((val >> 8) & 0xFF); b[idx+2] = ((val >> 16) & 0xFF); b[idx+3] = ((val >> 24) & 0xFF); };\nvar __writeUInt16LE = function(b/*:RawBytes|CFBlob*/, val/*:number*/, idx/*:number*/)/*:void*/ { b[idx] = (val & 0xFF); b[idx+1] = ((val >>> 8) & 0xFF); };\n\nfunction WriteShift(t/*:number*/, val/*:string|number*/, f/*:?string*/)/*:any*/ {\n\tvar size = 0, i = 0;\n\tif(f === 'dbcs') {\n\t\t/*:: if(typeof val !== 'string') throw new Error(\"unreachable\"); */\n\t\tfor(i = 0; i != val.length; ++i) __writeUInt16LE(this, val.charCodeAt(i), this.l + 2 * i);\n\t\tsize = 2 * val.length;\n\t} else if(f === 'sbcs') {\n\t\tif(typeof $cptable !== 'undefined' && current_ansi == 874) {\n\t\t\t/* TODO: use tables directly, don't encode */\n\t\t\t/*:: if(typeof val !== \"string\") throw new Error(\"unreachable\"); */\n\t\t\tfor(i = 0; i != val.length; ++i) {\n\t\t\t\tvar cppayload = $cptable.utils.encode(current_ansi, val.charAt(i));\n\t\t\t\tthis[this.l + i] = cppayload[0];\n\t\t\t}\n\t\t} else {\n\t\t\t/*:: if(typeof val !== 'string') throw new Error(\"unreachable\"); */\n\t\t\tval = val.replace(/[^\\x00-\\x7F]/g, \"_\");\n\t\t\t/*:: if(typeof val !== 'string') throw new Error(\"unreachable\"); */\n\t\t\tfor(i = 0; i != val.length; ++i) this[this.l + i] = (val.charCodeAt(i) & 0xFF);\n\t\t}\n\t\tsize = val.length;\n\t} else if(f === 'hex') {\n\t\tfor(; i < t; ++i) {\n\t\t\t/*:: if(typeof val !== \"string\") throw new Error(\"unreachable\"); */\n\t\t\tthis[this.l++] = (parseInt(val.slice(2*i, 2*i+2), 16)||0);\n\t\t} return this;\n\t} else if(f === 'utf16le') {\n\t\t\t/*:: if(typeof val !== \"string\") throw new Error(\"unreachable\"); */\n\t\t\tvar end/*:number*/ = Math.min(this.l + t, this.length);\n\t\t\tfor(i = 0; i < Math.min(val.length, t); ++i) {\n\t\t\t\tvar cc = val.charCodeAt(i);\n\t\t\t\tthis[this.l++] = (cc & 0xff);\n\t\t\t\tthis[this.l++] = (cc >> 8);\n\t\t\t}\n\t\t\twhile(this.l < end) this[this.l++] = 0;\n\t\t\treturn this;\n\t} else /*:: if(typeof val === 'number') */ switch(t) {\n\t\tcase  1: size = 1; this[this.l] = val&0xFF; break;\n\t\tcase  2: size = 2; this[this.l] = val&0xFF; val >>>= 8; this[this.l+1] = val&0xFF; break;\n\t\tcase  3: size = 3; this[this.l] = val&0xFF; val >>>= 8; this[this.l+1] = val&0xFF; val >>>= 8; this[this.l+2] = val&0xFF; break;\n\t\tcase  4: size = 4; __writeUInt32LE(this, val, this.l); break;\n\t\tcase  8: size = 8; if(f === 'f') { write_double_le(this, val, this.l); break; }\n\t\t/* falls through */\n\t\tcase 16: break;\n\t\tcase -4: size = 4; __writeInt32LE(this, val, this.l); break;\n\t}\n\tthis.l += size; return this;\n}\n\nfunction CheckField(hexstr/*:string*/, fld/*:string*/)/*:void*/ {\n\tvar m = __hexlify(this,this.l,hexstr.length>>1);\n\tif(m !== hexstr) throw new Error(fld + 'Expected ' + hexstr + ' saw ' + m);\n\tthis.l += hexstr.length>>1;\n}\n\nfunction prep_blob(blob, pos/*:number*/)/*:void*/ {\n\tblob.l = pos;\n\tblob.read_shift = /*::(*/ReadShift/*:: :any)*/;\n\tblob.chk = CheckField;\n\tblob.write_shift = WriteShift;\n}\n\nfunction parsenoop(blob, length/*:: :number, opts?:any */) { blob.l += length; }\n\nfunction new_buf(sz/*:number*/)/*:Block*/ {\n\tvar o = new_raw_buf(sz);\n\tprep_blob(o, 0);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.1.4 Record */\nfunction recordhopper(data, cb/*:RecordHopperCB*/, opts/*:?any*/) {\n\tif(!data) return;\n\tvar tmpbyte, cntbyte, length;\n\tprep_blob(data, data.l || 0);\n\tvar L = data.length, RT = 0, tgt = 0;\n\twhile(data.l < L) {\n\t\tRT = data.read_shift(1);\n\t\tif(RT & 0x80) RT = (RT & 0x7F) + ((data.read_shift(1) & 0x7F)<<7);\n\t\tvar R = XLSBRecordEnum[RT] || XLSBRecordEnum[0xFFFF];\n\t\ttmpbyte = data.read_shift(1);\n\t\tlength = tmpbyte & 0x7F;\n\t\tfor(cntbyte = 1; cntbyte <4 && (tmpbyte & 0x80); ++cntbyte) length += ((tmpbyte = data.read_shift(1)) & 0x7F)<<(7*cntbyte);\n\t\ttgt = data.l + length;\n\t\tvar d = R.f && R.f(data, length, opts);\n\t\tdata.l = tgt;\n\t\tif(cb(d, R, RT)) return;\n\t}\n}\n\n/* control buffer usage for fixed-length buffers */\nfunction buf_array()/*:BufArray*/ {\n\tvar bufs/*:Array<Block>*/ = [], blksz = has_buf ? 256 : 2048;\n\tvar newblk = function ba_newblk(sz/*:number*/)/*:Block*/ {\n\t\tvar o/*:Block*/ = (new_buf(sz)/*:any*/);\n\t\tprep_blob(o, 0);\n\t\treturn o;\n\t};\n\n\tvar curbuf/*:Block*/ = newblk(blksz);\n\n\tvar endbuf = function ba_endbuf() {\n\t\tif(!curbuf) return;\n\t\tif(curbuf.length > curbuf.l) { curbuf = curbuf.slice(0, curbuf.l); curbuf.l = curbuf.length; }\n\t\tif(curbuf.length > 0) bufs.push(curbuf);\n\t\tcurbuf = null;\n\t};\n\n\tvar next = function ba_next(sz/*:number*/)/*:Block*/ {\n\t\tif(curbuf && (sz < (curbuf.length - curbuf.l))) return curbuf;\n\t\tendbuf();\n\t\treturn (curbuf = newblk(Math.max(sz+1, blksz)));\n\t};\n\n\tvar end = function ba_end() {\n\t\tendbuf();\n\t\treturn bconcat(bufs);\n\t};\n\n\tvar push = function ba_push(buf) { endbuf(); curbuf = buf; if(curbuf.l == null) curbuf.l = curbuf.length; next(blksz); };\n\n\treturn ({ next:next, push:push, end:end, _bufs:bufs }/*:any*/);\n}\n\nfunction write_record(ba/*:BufArray*/, type/*:number*/, payload, length/*:?number*/) {\n\tvar t/*:number*/ = +type, l;\n\tif(isNaN(t)) return; // TODO: throw something here?\n\tif(!length) length = XLSBRecordEnum[t].p || (payload||[]).length || 0;\n\tl = 1 + (t >= 0x80 ? 1 : 0) + 1/* + length*/;\n\tif(length >= 0x80) ++l; if(length >= 0x4000) ++l; if(length >= 0x200000) ++l;\n\tvar o = ba.next(l);\n\tif(t <= 0x7F) o.write_shift(1, t);\n\telse {\n\t\to.write_shift(1, (t & 0x7F) + 0x80);\n\t\to.write_shift(1, (t >> 7));\n\t}\n\tfor(var i = 0; i != 4; ++i) {\n\t\tif(length >= 0x80) { o.write_shift(1, (length & 0x7F)+0x80); length >>= 7; }\n\t\telse { o.write_shift(1, length); break; }\n\t}\n\tif(/*:: length != null &&*/length > 0 && is_buf(payload)) ba.push(payload);\n}\n/* XLS ranges enforced */\nfunction shift_cell_xls(cell/*:CellAddress*/, tgt/*:any*/, opts/*:?any*/)/*:CellAddress*/ {\n\tvar out = dup(cell);\n\tif(tgt.s) {\n\t\tif(out.cRel) out.c += tgt.s.c;\n\t\tif(out.rRel) out.r += tgt.s.r;\n\t} else {\n\t\tif(out.cRel) out.c += tgt.c;\n\t\tif(out.rRel) out.r += tgt.r;\n\t}\n\tif(!opts || opts.biff < 12) {\n\t\twhile(out.c >= 0x100) out.c -= 0x100;\n\t\twhile(out.r >= 0x10000) out.r -= 0x10000;\n\t}\n\treturn out;\n}\n\nfunction shift_range_xls(cell, range, opts) {\n\tvar out = dup(cell);\n\tout.s = shift_cell_xls(out.s, range.s, opts);\n\tout.e = shift_cell_xls(out.e, range.s, opts);\n\treturn out;\n}\n\nfunction encode_cell_xls(c/*:CellAddress*/, biff/*:number*/)/*:string*/ {\n\tif(c.cRel && c.c < 0) { c = dup(c); while(c.c < 0) c.c += (biff > 8) ? 0x4000 : 0x100; }\n\tif(c.rRel && c.r < 0) { c = dup(c); while(c.r < 0) c.r += (biff > 8) ? 0x100000 : ((biff > 5) ? 0x10000 : 0x4000); }\n\tvar s = encode_cell(c);\n\tif(!c.cRel && c.cRel != null) s = fix_col(s);\n\tif(!c.rRel && c.rRel != null) s = fix_row(s);\n\treturn s;\n}\n\nfunction encode_range_xls(r, opts)/*:string*/ {\n\tif(r.s.r == 0 && !r.s.rRel) {\n\t\tif(r.e.r == (opts.biff >= 12 ? 0xFFFFF : (opts.biff >= 8 ? 0x10000 : 0x4000)) && !r.e.rRel) {\n\t\t\treturn (r.s.cRel ? \"\" : \"$\") + encode_col(r.s.c) + \":\" + (r.e.cRel ? \"\" : \"$\") + encode_col(r.e.c);\n\t\t}\n\t}\n\tif(r.s.c == 0 && !r.s.cRel) {\n\t\tif(r.e.c == (opts.biff >= 12 ? 0x3FFF : 0xFF) && !r.e.cRel) {\n\t\t\treturn (r.s.rRel ? \"\" : \"$\") + encode_row(r.s.r) + \":\" + (r.e.rRel ? \"\" : \"$\") + encode_row(r.e.r);\n\t\t}\n\t}\n\treturn encode_cell_xls(r.s, opts.biff) + \":\" + encode_cell_xls(r.e, opts.biff);\n}\nfunction decode_row(rowstr/*:string*/)/*:number*/ { return parseInt(unfix_row(rowstr),10) - 1; }\nfunction encode_row(row/*:number*/)/*:string*/ { return \"\" + (row + 1); }\nfunction fix_row(cstr/*:string*/)/*:string*/ { return cstr.replace(/([A-Z]|^)(\\d+)$/,\"$1$$$2\"); }\nfunction unfix_row(cstr/*:string*/)/*:string*/ { return cstr.replace(/\\$(\\d+)$/,\"$1\"); }\n\nfunction decode_col(colstr/*:string*/)/*:number*/ { var c = unfix_col(colstr), d = 0, i = 0; for(; i !== c.length; ++i) d = 26*d + c.charCodeAt(i) - 64; return d - 1; }\nfunction encode_col(col/*:number*/)/*:string*/ { if(col < 0) throw new Error(\"invalid column \" + col); var s=\"\"; for(++col; col; col=Math.floor((col-1)/26)) s = String.fromCharCode(((col-1)%26) + 65) + s; return s; }\nfunction fix_col(cstr/*:string*/)/*:string*/ { return cstr.replace(/^([A-Z])/,\"$$$1\"); }\nfunction unfix_col(cstr/*:string*/)/*:string*/ { return cstr.replace(/^\\$([A-Z])/,\"$1\"); }\n\nfunction split_cell(cstr/*:string*/)/*:Array<string>*/ { return cstr.replace(/(\\$?[A-Z]*)(\\$?\\d*)/,\"$1,$2\").split(\",\"); }\n//function decode_cell(cstr/*:string*/)/*:CellAddress*/ { var splt = split_cell(cstr); return { c:decode_col(splt[0]), r:decode_row(splt[1]) }; }\nfunction decode_cell(cstr/*:string*/)/*:CellAddress*/ {\n\tvar R = 0, C = 0;\n\tfor(var i = 0; i < cstr.length; ++i) {\n\t\tvar cc = cstr.charCodeAt(i);\n\t\tif(cc >= 48 && cc <= 57) R = 10 * R + (cc - 48);\n\t\telse if(cc >= 65 && cc <= 90) C = 26 * C + (cc - 64);\n\t}\n\treturn { c: C - 1, r:R - 1 };\n}\n//function encode_cell(cell/*:CellAddress*/)/*:string*/ { return encode_col(cell.c) + encode_row(cell.r); }\nfunction encode_cell(cell/*:CellAddress*/)/*:string*/ {\n\tvar col = cell.c + 1;\n\tvar s=\"\";\n\tfor(; col; col=((col-1)/26)|0) s = String.fromCharCode(((col-1)%26) + 65) + s;\n\treturn s + (cell.r + 1);\n}\nfunction decode_range(range/*:string*/)/*:Range*/ {\n\tvar idx = range.indexOf(\":\");\n\tif(idx == -1) return { s: decode_cell(range), e: decode_cell(range) };\n\treturn { s: decode_cell(range.slice(0, idx)), e: decode_cell(range.slice(idx + 1)) };\n}\n/*# if only one arg, it is assumed to be a Range.  If 2 args, both are cell addresses */\nfunction encode_range(cs/*:CellAddrSpec|Range*/,ce/*:?CellAddrSpec*/)/*:string*/ {\n\tif(typeof ce === 'undefined' || typeof ce === 'number') {\n/*:: if(!(cs instanceof Range)) throw \"unreachable\"; */\n\t\treturn encode_range(cs.s, cs.e);\n\t}\n/*:: if((cs instanceof Range)) throw \"unreachable\"; */\n\tif(typeof cs !== 'string') cs = encode_cell((cs/*:any*/));\n\tif(typeof ce !== 'string') ce = encode_cell((ce/*:any*/));\n/*:: if(typeof cs !== 'string') throw \"unreachable\"; */\n/*:: if(typeof ce !== 'string') throw \"unreachable\"; */\n\treturn cs == ce ? cs : cs + \":\" + ce;\n}\n\nfunction safe_decode_range(range/*:string*/)/*:Range*/ {\n\tvar o = {s:{c:0,r:0},e:{c:0,r:0}};\n\tvar idx = 0, i = 0, cc = 0;\n\tvar len = range.length;\n\tfor(idx = 0; i < len; ++i) {\n\t\tif((cc=range.charCodeAt(i)-64) < 1 || cc > 26) break;\n\t\tidx = 26*idx + cc;\n\t}\n\to.s.c = --idx;\n\n\tfor(idx = 0; i < len; ++i) {\n\t\tif((cc=range.charCodeAt(i)-48) < 0 || cc > 9) break;\n\t\tidx = 10*idx + cc;\n\t}\n\to.s.r = --idx;\n\n\tif(i === len || cc != 10) { o.e.c=o.s.c; o.e.r=o.s.r; return o; }\n\t++i;\n\n\tfor(idx = 0; i != len; ++i) {\n\t\tif((cc=range.charCodeAt(i)-64) < 1 || cc > 26) break;\n\t\tidx = 26*idx + cc;\n\t}\n\to.e.c = --idx;\n\n\tfor(idx = 0; i != len; ++i) {\n\t\tif((cc=range.charCodeAt(i)-48) < 0 || cc > 9) break;\n\t\tidx = 10*idx + cc;\n\t}\n\to.e.r = --idx;\n\treturn o;\n}\n\nfunction safe_format_cell(cell/*:Cell*/, v/*:any*/) {\n\tvar q = (cell.t == 'd' && v instanceof Date);\n\tif(cell.z != null) try { return (cell.w = SSF_format(cell.z, q ? datenum(v) : v)); } catch(e) { }\n\ttry { return (cell.w = SSF_format((cell.XF||{}).numFmtId||(q ? 14 : 0),  q ? datenum(v) : v)); } catch(e) { return ''+v; }\n}\n\nfunction format_cell(cell/*:Cell*/, v/*:any*/, o/*:any*/) {\n\tif(cell == null || cell.t == null || cell.t == 'z') return \"\";\n\tif(cell.w !== undefined) return cell.w;\n\tif(cell.t == 'd' && !cell.z && o && o.dateNF) cell.z = o.dateNF;\n\tif(cell.t == \"e\") return BErr[cell.v] || cell.v;\n\tif(v == undefined) return safe_format_cell(cell, cell.v);\n\treturn safe_format_cell(cell, v);\n}\n\nfunction sheet_to_workbook(sheet/*:Worksheet*/, opts)/*:Workbook*/ {\n\tvar n = opts && opts.sheet ? opts.sheet : \"Sheet1\";\n\tvar sheets = {}; sheets[n] = sheet;\n\treturn { SheetNames: [n], Sheets: sheets };\n}\n\nfunction sheet_add_aoa(_ws/*:?Worksheet*/, data/*:AOA*/, opts/*:?any*/)/*:Worksheet*/ {\n\tvar o = opts || {};\n\tvar dense = _ws ? Array.isArray(_ws) : o.dense;\n\tif(DENSE != null && dense == null) dense = DENSE;\n\tvar ws/*:Worksheet*/ = _ws || (dense ? ([]/*:any*/) : ({}/*:any*/));\n\tvar _R = 0, _C = 0;\n\tif(ws && o.origin != null) {\n\t\tif(typeof o.origin == 'number') _R = o.origin;\n\t\telse {\n\t\t\tvar _origin/*:CellAddress*/ = typeof o.origin == \"string\" ? decode_cell(o.origin) : o.origin;\n\t\t\t_R = _origin.r; _C = _origin.c;\n\t\t}\n\t\tif(!ws[\"!ref\"]) ws[\"!ref\"] = \"A1:A1\";\n\t}\n\tvar range/*:Range*/ = ({s: {c:10000000, r:10000000}, e: {c:0, r:0}}/*:any*/);\n\tif(ws['!ref']) {\n\t\tvar _range = safe_decode_range(ws['!ref']);\n\t\trange.s.c = _range.s.c;\n\t\trange.s.r = _range.s.r;\n\t\trange.e.c = Math.max(range.e.c, _range.e.c);\n\t\trange.e.r = Math.max(range.e.r, _range.e.r);\n\t\tif(_R == -1) range.e.r = _R = _range.e.r + 1;\n\t}\n\tfor(var R = 0; R != data.length; ++R) {\n\t\tif(!data[R]) continue;\n\t\tif(!Array.isArray(data[R])) throw new Error(\"aoa_to_sheet expects an array of arrays\");\n\t\tfor(var C = 0; C != data[R].length; ++C) {\n\t\t\tif(typeof data[R][C] === 'undefined') continue;\n\t\t\tvar cell/*:Cell*/ = ({v: data[R][C] }/*:any*/);\n\t\t\tvar __R = _R + R, __C = _C + C;\n\t\t\tif(range.s.r > __R) range.s.r = __R;\n\t\t\tif(range.s.c > __C) range.s.c = __C;\n\t\t\tif(range.e.r < __R) range.e.r = __R;\n\t\t\tif(range.e.c < __C) range.e.c = __C;\n\t\t\tif(data[R][C] && typeof data[R][C] === 'object' && !Array.isArray(data[R][C]) && !(data[R][C] instanceof Date)) cell = data[R][C];\n\t\t\telse {\n\t\t\t\tif(Array.isArray(cell.v)) { cell.f = data[R][C][1]; cell.v = cell.v[0]; }\n\t\t\t\tif(cell.v === null) {\n\t\t\t\t\tif(cell.f) cell.t = 'n';\n\t\t\t\t\telse if(o.nullError) { cell.t = 'e'; cell.v = 0; }\n\t\t\t\t\telse if(!o.sheetStubs) continue;\n\t\t\t\t\telse cell.t = 'z';\n\t\t\t\t}\n\t\t\t\telse if(typeof cell.v === 'number') cell.t = 'n';\n\t\t\t\telse if(typeof cell.v === 'boolean') cell.t = 'b';\n\t\t\t\telse if(cell.v instanceof Date) {\n\t\t\t\t\tcell.z = o.dateNF || table_fmt[14];\n\t\t\t\t\tif(o.cellDates) { cell.t = 'd'; cell.w = SSF_format(cell.z, datenum(cell.v)); }\n\t\t\t\t\telse { cell.t = 'n'; cell.v = datenum(cell.v); cell.w = SSF_format(cell.z, cell.v); }\n\t\t\t\t}\n\t\t\t\telse cell.t = 's';\n\t\t\t}\n\t\t\tif(dense) {\n\t\t\t\tif(!ws[__R]) ws[__R] = [];\n\t\t\t\tif(ws[__R][__C] && ws[__R][__C].z) cell.z = ws[__R][__C].z;\n\t\t\t\tws[__R][__C] = cell;\n\t\t\t} else {\n\t\t\t\tvar cell_ref = encode_cell(({c:__C,r:__R}/*:any*/));\n\t\t\t\tif(ws[cell_ref] && ws[cell_ref].z) cell.z = ws[cell_ref].z;\n\t\t\t\tws[cell_ref] = cell;\n\t\t\t}\n\t\t}\n\t}\n\tif(range.s.c < 10000000) ws['!ref'] = encode_range(range);\n\treturn ws;\n}\nfunction aoa_to_sheet(data/*:AOA*/, opts/*:?any*/)/*:Worksheet*/ { return sheet_add_aoa(null, data, opts); }\n\nfunction parse_Int32LE(data) {\n\treturn data.read_shift(4, 'i');\n}\nfunction write_UInt32LE(x/*:number*/, o) {\n\tif (!o) o = new_buf(4);\n\to.write_shift(4, x);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.5.168 */\nfunction parse_XLWideString(data/*::, length*/)/*:string*/ {\n\tvar cchCharacters = data.read_shift(4);\n\treturn cchCharacters === 0 ? \"\" : data.read_shift(cchCharacters, 'dbcs');\n}\nfunction write_XLWideString(data/*:string*/, o) {\n\tvar _null = false; if (o == null) { _null = true; o = new_buf(4 + 2 * data.length); }\n\to.write_shift(4, data.length);\n\tif (data.length > 0) o.write_shift(0, data, 'dbcs');\n\treturn _null ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.5.91 */\n//function parse_LPWideString(data/*::, length*/)/*:string*/ {\n//\tvar cchCharacters = data.read_shift(2);\n//\treturn cchCharacters === 0 ? \"\" : data.read_shift(cchCharacters, \"utf16le\");\n//}\n\n/* [MS-XLSB] 2.5.143 */\nfunction parse_StrRun(data) {\n\treturn { ich: data.read_shift(2), ifnt: data.read_shift(2) };\n}\nfunction write_StrRun(run, o) {\n\tif (!o) o = new_buf(4);\n\to.write_shift(2, run.ich || 0);\n\to.write_shift(2, run.ifnt || 0);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.5.121 */\nfunction parse_RichStr(data, length/*:number*/)/*:XLString*/ {\n\tvar start = data.l;\n\tvar flags = data.read_shift(1);\n\tvar str = parse_XLWideString(data);\n\tvar rgsStrRun = [];\n\tvar z = ({ t: str, h: str }/*:any*/);\n\tif ((flags & 1) !== 0) { /* fRichStr */\n\t\t/* TODO: formatted string */\n\t\tvar dwSizeStrRun = data.read_shift(4);\n\t\tfor (var i = 0; i != dwSizeStrRun; ++i) rgsStrRun.push(parse_StrRun(data));\n\t\tz.r = rgsStrRun;\n\t}\n\telse z.r = [{ ich: 0, ifnt: 0 }];\n\t//if((flags & 2) !== 0) { /* fExtStr */\n\t//\t/* TODO: phonetic string */\n\t//}\n\tdata.l = start + length;\n\treturn z;\n}\nfunction write_RichStr(str/*:XLString*/, o/*:?Block*/)/*:Block*/ {\n\t/* TODO: formatted string */\n\tvar _null = false; if (o == null) { _null = true; o = new_buf(15 + 4 * str.t.length); }\n\to.write_shift(1, 0);\n\twrite_XLWideString(str.t, o);\n\treturn _null ? o.slice(0, o.l) : o;\n}\n/* [MS-XLSB] 2.4.328 BrtCommentText (RichStr w/1 run) */\nvar parse_BrtCommentText = parse_RichStr;\nfunction write_BrtCommentText(str/*:XLString*/, o/*:?Block*/)/*:Block*/ {\n\t/* TODO: formatted string */\n\tvar _null = false; if (o == null) { _null = true; o = new_buf(23 + 4 * str.t.length); }\n\to.write_shift(1, 1);\n\twrite_XLWideString(str.t, o);\n\to.write_shift(4, 1);\n\twrite_StrRun({ ich: 0, ifnt: 0 }, o);\n\treturn _null ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.5.9 */\nfunction parse_XLSBCell(data)/*:any*/ {\n\tvar col = data.read_shift(4);\n\tvar iStyleRef = data.read_shift(2);\n\tiStyleRef += data.read_shift(1) << 16;\n\tdata.l++; //var fPhShow = data.read_shift(1);\n\treturn { c: col, iStyleRef: iStyleRef };\n}\nfunction write_XLSBCell(cell/*:any*/, o/*:?Block*/) {\n\tif (o == null) o = new_buf(8);\n\to.write_shift(-4, cell.c);\n\to.write_shift(3, cell.iStyleRef || cell.s);\n\to.write_shift(1, 0); /* fPhShow */\n\treturn o;\n}\n\n/* Short XLSB Cell does not include column */\nfunction parse_XLSBShortCell(data)/*:any*/ {\n\tvar iStyleRef = data.read_shift(2);\n\tiStyleRef += data.read_shift(1) <<16;\n\tdata.l++; //var fPhShow = data.read_shift(1);\n\treturn { c:-1, iStyleRef: iStyleRef };\n}\nfunction write_XLSBShortCell(cell/*:any*/, o/*:?Block*/) {\n\tif(o == null) o = new_buf(4);\n\to.write_shift(3, cell.iStyleRef || cell.s);\n\to.write_shift(1, 0); /* fPhShow */\n\treturn o;\n}\n\n/* [MS-XLSB] 2.5.21 */\nvar parse_XLSBCodeName = parse_XLWideString;\nvar write_XLSBCodeName = write_XLWideString;\n\n/* [MS-XLSB] 2.5.166 */\nfunction parse_XLNullableWideString(data/*::, length*/)/*:string*/ {\n\tvar cchCharacters = data.read_shift(4);\n\treturn cchCharacters === 0 || cchCharacters === 0xFFFFFFFF ? \"\" : data.read_shift(cchCharacters, 'dbcs');\n}\nfunction write_XLNullableWideString(data/*:string*/, o) {\n\tvar _null = false; if (o == null) { _null = true; o = new_buf(127); }\n\to.write_shift(4, data.length > 0 ? data.length : 0xFFFFFFFF);\n\tif (data.length > 0) o.write_shift(0, data, 'dbcs');\n\treturn _null ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.5.165 */\nvar parse_XLNameWideString = parse_XLWideString;\n//var write_XLNameWideString = write_XLWideString;\n\n/* [MS-XLSB] 2.5.114 */\nvar parse_RelID = parse_XLNullableWideString;\nvar write_RelID = write_XLNullableWideString;\n\n\n/* [MS-XLS] 2.5.217 ; [MS-XLSB] 2.5.122 */\nfunction parse_RkNumber(data)/*:number*/ {\n\tvar b = data.slice(data.l, data.l + 4);\n\tvar fX100 = (b[0] & 1), fInt = (b[0] & 2);\n\tdata.l += 4;\n\tvar RK = fInt === 0 ? __double([0, 0, 0, 0, (b[0] & 0xFC), b[1], b[2], b[3]], 0) : __readInt32LE(b, 0) >> 2;\n\treturn fX100 ? (RK / 100) : RK;\n}\nfunction write_RkNumber(data/*:number*/, o) {\n\tif (o == null) o = new_buf(4);\n\tvar fX100 = 0, fInt = 0, d100 = data * 100;\n\tif ((data == (data | 0)) && (data >= -(1 << 29)) && (data < (1 << 29))) { fInt = 1; }\n\telse if ((d100 == (d100 | 0)) && (d100 >= -(1 << 29)) && (d100 < (1 << 29))) { fInt = 1; fX100 = 1; }\n\tif (fInt) o.write_shift(-4, ((fX100 ? d100 : data) << 2) + (fX100 + 2));\n\telse throw new Error(\"unsupported RkNumber \" + data); // TODO\n}\n\n\n/* [MS-XLSB] 2.5.117 RfX */\nfunction parse_RfX(data /*::, length*/)/*:Range*/ {\n\tvar cell/*:Range*/ = ({ s: {}, e: {} }/*:any*/);\n\tcell.s.r = data.read_shift(4);\n\tcell.e.r = data.read_shift(4);\n\tcell.s.c = data.read_shift(4);\n\tcell.e.c = data.read_shift(4);\n\treturn cell;\n}\nfunction write_RfX(r/*:Range*/, o) {\n\tif (!o) o = new_buf(16);\n\to.write_shift(4, r.s.r);\n\to.write_shift(4, r.e.r);\n\to.write_shift(4, r.s.c);\n\to.write_shift(4, r.e.c);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.5.153 UncheckedRfX */\nvar parse_UncheckedRfX = parse_RfX;\nvar write_UncheckedRfX = write_RfX;\n\n/* [MS-XLSB] 2.5.155 UncheckedSqRfX */\n//function parse_UncheckedSqRfX(data) {\n//\tvar cnt = data.read_shift(4);\n//\tvar out = [];\n//\tfor(var i = 0; i < cnt; ++i) {\n//\t\tvar rng = parse_UncheckedRfX(data);\n//\t\tout.push(encode_range(rng));\n//\t}\n//\treturn out.join(\",\");\n//}\n//function write_UncheckedSqRfX(sqrfx/*:string*/) {\n//\tvar parts = sqrfx.split(/\\s*,\\s*/);\n//\tvar o = new_buf(4); o.write_shift(4, parts.length);\n//\tvar out = [o];\n//\tparts.forEach(function(rng) {\n//\t\tout.push(write_UncheckedRfX(safe_decode_range(rng)));\n//\t});\n//\treturn bconcat(out);\n//}\n\n/* [MS-XLS] 2.5.342 ; [MS-XLSB] 2.5.171 */\n/* TODO: error checking, NaN and Infinity values are not valid Xnum */\nfunction parse_Xnum(data/*::, length*/) {\n\tif(data.length - data.l < 8) throw \"XLS Xnum Buffer underflow\";\n\treturn data.read_shift(8, 'f');\n}\nfunction write_Xnum(data, o) { return (o || new_buf(8)).write_shift(8, data, 'f'); }\n\n/* [MS-XLSB] 2.4.324 BrtColor */\nfunction parse_BrtColor(data/*::, length*/) {\n\tvar out = {};\n\tvar d = data.read_shift(1);\n\n\t//var fValidRGB = d & 1;\n\tvar xColorType = d >>> 1;\n\n\tvar index = data.read_shift(1);\n\tvar nTS = data.read_shift(2, 'i');\n\tvar bR = data.read_shift(1);\n\tvar bG = data.read_shift(1);\n\tvar bB = data.read_shift(1);\n\tdata.l++; //var bAlpha = data.read_shift(1);\n\n\tswitch (xColorType) {\n\t\tcase 0: out.auto = 1; break;\n\t\tcase 1:\n\t\t\tout.index = index;\n\t\t\tvar icv = XLSIcv[index];\n\t\t\t/* automatic pseudo index 81 */\n\t\t\tif (icv) out.rgb = rgb2Hex(icv);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\t/* if(!fValidRGB) throw new Error(\"invalid\"); */\n\t\t\tout.rgb = rgb2Hex([bR, bG, bB]);\n\t\t\tbreak;\n\t\tcase 3: out.theme = index; break;\n\t}\n\tif (nTS != 0) out.tint = nTS > 0 ? nTS / 32767 : nTS / 32768;\n\n\treturn out;\n}\nfunction write_BrtColor(color, o) {\n\tif (!o) o = new_buf(8);\n\tif (!color || color.auto) { o.write_shift(4, 0); o.write_shift(4, 0); return o; }\n\tif (color.index != null) {\n\t\to.write_shift(1, 0x02);\n\t\to.write_shift(1, color.index);\n\t} else if (color.theme != null) {\n\t\to.write_shift(1, 0x06);\n\t\to.write_shift(1, color.theme);\n\t} else {\n\t\to.write_shift(1, 0x05);\n\t\to.write_shift(1, 0);\n\t}\n\tvar nTS = color.tint || 0;\n\tif (nTS > 0) nTS *= 32767;\n\telse if (nTS < 0) nTS *= 32768;\n\to.write_shift(2, nTS);\n\tif (!color.rgb || color.theme != null) {\n\t\to.write_shift(2, 0);\n\t\to.write_shift(1, 0);\n\t\to.write_shift(1, 0);\n\t} else {\n\t\tvar rgb = (color.rgb || 'FFFFFF');\n\t\tif (typeof rgb == 'number') rgb = (\"000000\" + rgb.toString(16)).slice(-6);\n\t\to.write_shift(1, parseInt(rgb.slice(0, 2), 16));\n\t\to.write_shift(1, parseInt(rgb.slice(2, 4), 16));\n\t\to.write_shift(1, parseInt(rgb.slice(4, 6), 16));\n\t\to.write_shift(1, 0xFF);\n\t}\n\treturn o;\n}\n\n/* [MS-XLSB] 2.5.52 */\nfunction parse_FontFlags(data/*::, length, opts*/) {\n\tvar d = data.read_shift(1);\n\tdata.l++;\n\tvar out = {\n\t\tfBold: d & 0x01,\n\t\tfItalic: d & 0x02,\n\t\tfUnderline: d & 0x04,\n\t\tfStrikeout: d & 0x08,\n\t\tfOutline: d & 0x10,\n\t\tfShadow: d & 0x20,\n\t\tfCondense: d & 0x40,\n\t\tfExtend: d & 0x80\n\t};\n\treturn out;\n}\nfunction write_FontFlags(font, o) {\n\tif (!o) o = new_buf(2);\n\tvar grbit =\n\t\t(font.italic ? 0x02 : 0) |\n\t\t(font.strike ? 0x08 : 0) |\n\t\t(font.outline ? 0x10 : 0) |\n\t\t(font.shadow ? 0x20 : 0) |\n\t\t(font.condense ? 0x40 : 0) |\n\t\t(font.extend ? 0x80 : 0);\n\to.write_shift(1, grbit);\n\to.write_shift(1, 0);\n\treturn o;\n}\n\n/* [MS-OLEDS] 2.3.1 and 2.3.2 */\nfunction parse_ClipboardFormatOrString(o, w/*:number*/)/*:string*/ {\n\t// $FlowIgnore\n\tvar ClipFmt = { 2: \"BITMAP\", 3: \"METAFILEPICT\", 8: \"DIB\", 14: \"ENHMETAFILE\" };\n\tvar m/*:number*/ = o.read_shift(4);\n\tswitch (m) {\n\t\tcase 0x00000000: return \"\";\n\t\tcase 0xffffffff: case 0xfffffffe: return ClipFmt[o.read_shift(4)] || \"\";\n\t}\n\tif (m > 0x190) throw new Error(\"Unsupported Clipboard: \" + m.toString(16));\n\to.l -= 4;\n\treturn o.read_shift(0, w == 1 ? \"lpstr\" : \"lpwstr\");\n}\nfunction parse_ClipboardFormatOrAnsiString(o) { return parse_ClipboardFormatOrString(o, 1); }\nfunction parse_ClipboardFormatOrUnicodeString(o) { return parse_ClipboardFormatOrString(o, 2); }\n\n/* [MS-OLEPS] 2.2 PropertyType */\n// Note: some tree shakers cannot handle VT_VECTOR | $CONST, hence extra vars\n//var VT_EMPTY    = 0x0000;\n//var VT_NULL     = 0x0001;\nvar VT_I2       = 0x0002;\nvar VT_I4       = 0x0003;\n//var VT_R4       = 0x0004;\n//var VT_R8       = 0x0005;\n//var VT_CY       = 0x0006;\n//var VT_DATE     = 0x0007;\n//var VT_BSTR     = 0x0008;\n//var VT_ERROR    = 0x000A;\nvar VT_BOOL     = 0x000B;\nvar VT_VARIANT  = 0x000C;\n//var VT_DECIMAL  = 0x000E;\n//var VT_I1       = 0x0010;\n//var VT_UI1      = 0x0011;\n//var VT_UI2      = 0x0012;\nvar VT_UI4      = 0x0013;\n//var VT_I8       = 0x0014;\n//var VT_UI8      = 0x0015;\n//var VT_INT      = 0x0016;\n//var VT_UINT     = 0x0017;\nvar VT_LPSTR    = 0x001E;\n//var VT_LPWSTR   = 0x001F;\nvar VT_FILETIME = 0x0040;\nvar VT_BLOB     = 0x0041;\n//var VT_STREAM   = 0x0042;\n//var VT_STORAGE  = 0x0043;\n//var VT_STREAMED_Object  = 0x0044;\n//var VT_STORED_Object    = 0x0045;\n//var VT_BLOB_Object      = 0x0046;\nvar VT_CF       = 0x0047;\n//var VT_CLSID    = 0x0048;\n//var VT_VERSIONED_STREAM = 0x0049;\nvar VT_VECTOR   = 0x1000;\nvar VT_VECTOR_VARIANT = 0x100C;\nvar VT_VECTOR_LPSTR   = 0x101E;\n//var VT_ARRAY    = 0x2000;\n\nvar VT_STRING   = 0x0050; // 2.3.3.1.11 VtString\nvar VT_USTR     = 0x0051; // 2.3.3.1.12 VtUnalignedString\nvar VT_CUSTOM   = [VT_STRING, VT_USTR];\n\n/* [MS-OSHARED] 2.3.3.2.2.1 Document Summary Information PIDDSI */\nvar DocSummaryPIDDSI = {\n\t/*::[*/0x01/*::]*/: { n: 'CodePage', t: VT_I2 },\n\t/*::[*/0x02/*::]*/: { n: 'Category', t: VT_STRING },\n\t/*::[*/0x03/*::]*/: { n: 'PresentationFormat', t: VT_STRING },\n\t/*::[*/0x04/*::]*/: { n: 'ByteCount', t: VT_I4 },\n\t/*::[*/0x05/*::]*/: { n: 'LineCount', t: VT_I4 },\n\t/*::[*/0x06/*::]*/: { n: 'ParagraphCount', t: VT_I4 },\n\t/*::[*/0x07/*::]*/: { n: 'SlideCount', t: VT_I4 },\n\t/*::[*/0x08/*::]*/: { n: 'NoteCount', t: VT_I4 },\n\t/*::[*/0x09/*::]*/: { n: 'HiddenCount', t: VT_I4 },\n\t/*::[*/0x0a/*::]*/: { n: 'MultimediaClipCount', t: VT_I4 },\n\t/*::[*/0x0b/*::]*/: { n: 'ScaleCrop', t: VT_BOOL },\n\t/*::[*/0x0c/*::]*/: { n: 'HeadingPairs', t: VT_VECTOR_VARIANT /* VT_VECTOR | VT_VARIANT */ },\n\t/*::[*/0x0d/*::]*/: { n: 'TitlesOfParts', t: VT_VECTOR_LPSTR /* VT_VECTOR | VT_LPSTR */ },\n\t/*::[*/0x0e/*::]*/: { n: 'Manager', t: VT_STRING },\n\t/*::[*/0x0f/*::]*/: { n: 'Company', t: VT_STRING },\n\t/*::[*/0x10/*::]*/: { n: 'LinksUpToDate', t: VT_BOOL },\n\t/*::[*/0x11/*::]*/: { n: 'CharacterCount', t: VT_I4 },\n\t/*::[*/0x13/*::]*/: { n: 'SharedDoc', t: VT_BOOL },\n\t/*::[*/0x16/*::]*/: { n: 'HyperlinksChanged', t: VT_BOOL },\n\t/*::[*/0x17/*::]*/: { n: 'AppVersion', t: VT_I4, p: 'version' },\n\t/*::[*/0x18/*::]*/: { n: 'DigSig', t: VT_BLOB },\n\t/*::[*/0x1A/*::]*/: { n: 'ContentType', t: VT_STRING },\n\t/*::[*/0x1B/*::]*/: { n: 'ContentStatus', t: VT_STRING },\n\t/*::[*/0x1C/*::]*/: { n: 'Language', t: VT_STRING },\n\t/*::[*/0x1D/*::]*/: { n: 'Version', t: VT_STRING },\n\t/*::[*/0xFF/*::]*/: {},\n\t/* [MS-OLEPS] 2.18 */\n\t/*::[*/0x80000000/*::]*/: { n: 'Locale', t: VT_UI4 },\n\t/*::[*/0x80000003/*::]*/: { n: 'Behavior', t: VT_UI4 },\n\t/*::[*/0x72627262/*::]*/: {}\n};\n\n/* [MS-OSHARED] 2.3.3.2.1.1 Summary Information Property Set PIDSI */\nvar SummaryPIDSI = {\n\t/*::[*/0x01/*::]*/: { n: 'CodePage', t: VT_I2 },\n\t/*::[*/0x02/*::]*/: { n: 'Title', t: VT_STRING },\n\t/*::[*/0x03/*::]*/: { n: 'Subject', t: VT_STRING },\n\t/*::[*/0x04/*::]*/: { n: 'Author', t: VT_STRING },\n\t/*::[*/0x05/*::]*/: { n: 'Keywords', t: VT_STRING },\n\t/*::[*/0x06/*::]*/: { n: 'Comments', t: VT_STRING },\n\t/*::[*/0x07/*::]*/: { n: 'Template', t: VT_STRING },\n\t/*::[*/0x08/*::]*/: { n: 'LastAuthor', t: VT_STRING },\n\t/*::[*/0x09/*::]*/: { n: 'RevNumber', t: VT_STRING },\n\t/*::[*/0x0A/*::]*/: { n: 'EditTime', t: VT_FILETIME },\n\t/*::[*/0x0B/*::]*/: { n: 'LastPrinted', t: VT_FILETIME },\n\t/*::[*/0x0C/*::]*/: { n: 'CreatedDate', t: VT_FILETIME },\n\t/*::[*/0x0D/*::]*/: { n: 'ModifiedDate', t: VT_FILETIME },\n\t/*::[*/0x0E/*::]*/: { n: 'PageCount', t: VT_I4 },\n\t/*::[*/0x0F/*::]*/: { n: 'WordCount', t: VT_I4 },\n\t/*::[*/0x10/*::]*/: { n: 'CharCount', t: VT_I4 },\n\t/*::[*/0x11/*::]*/: { n: 'Thumbnail', t: VT_CF },\n\t/*::[*/0x12/*::]*/: { n: 'Application', t: VT_STRING },\n\t/*::[*/0x13/*::]*/: { n: 'DocSecurity', t: VT_I4 },\n\t/*::[*/0xFF/*::]*/: {},\n\t/* [MS-OLEPS] 2.18 */\n\t/*::[*/0x80000000/*::]*/: { n: 'Locale', t: VT_UI4 },\n\t/*::[*/0x80000003/*::]*/: { n: 'Behavior', t: VT_UI4 },\n\t/*::[*/0x72627262/*::]*/: {}\n};\n\n/* [MS-XLS] 2.4.63 Country/Region codes */\nvar CountryEnum = {\n\t/*::[*/0x0001/*::]*/: \"US\", // United States\n\t/*::[*/0x0002/*::]*/: \"CA\", // Canada\n\t/*::[*/0x0003/*::]*/: \"\", // Latin America (except Brazil)\n\t/*::[*/0x0007/*::]*/: \"RU\", // Russia\n\t/*::[*/0x0014/*::]*/: \"EG\", // Egypt\n\t/*::[*/0x001E/*::]*/: \"GR\", // Greece\n\t/*::[*/0x001F/*::]*/: \"NL\", // Netherlands\n\t/*::[*/0x0020/*::]*/: \"BE\", // Belgium\n\t/*::[*/0x0021/*::]*/: \"FR\", // France\n\t/*::[*/0x0022/*::]*/: \"ES\", // Spain\n\t/*::[*/0x0024/*::]*/: \"HU\", // Hungary\n\t/*::[*/0x0027/*::]*/: \"IT\", // Italy\n\t/*::[*/0x0029/*::]*/: \"CH\", // Switzerland\n\t/*::[*/0x002B/*::]*/: \"AT\", // Austria\n\t/*::[*/0x002C/*::]*/: \"GB\", // United Kingdom\n\t/*::[*/0x002D/*::]*/: \"DK\", // Denmark\n\t/*::[*/0x002E/*::]*/: \"SE\", // Sweden\n\t/*::[*/0x002F/*::]*/: \"NO\", // Norway\n\t/*::[*/0x0030/*::]*/: \"PL\", // Poland\n\t/*::[*/0x0031/*::]*/: \"DE\", // Germany\n\t/*::[*/0x0034/*::]*/: \"MX\", // Mexico\n\t/*::[*/0x0037/*::]*/: \"BR\", // Brazil\n\t/*::[*/0x003d/*::]*/: \"AU\", // Australia\n\t/*::[*/0x0040/*::]*/: \"NZ\", // New Zealand\n\t/*::[*/0x0042/*::]*/: \"TH\", // Thailand\n\t/*::[*/0x0051/*::]*/: \"JP\", // Japan\n\t/*::[*/0x0052/*::]*/: \"KR\", // Korea\n\t/*::[*/0x0054/*::]*/: \"VN\", // Viet Nam\n\t/*::[*/0x0056/*::]*/: \"CN\", // China\n\t/*::[*/0x005A/*::]*/: \"TR\", // Turkey\n\t/*::[*/0x0069/*::]*/: \"JS\", // Ramastan\n\t/*::[*/0x00D5/*::]*/: \"DZ\", // Algeria\n\t/*::[*/0x00D8/*::]*/: \"MA\", // Morocco\n\t/*::[*/0x00DA/*::]*/: \"LY\", // Libya\n\t/*::[*/0x015F/*::]*/: \"PT\", // Portugal\n\t/*::[*/0x0162/*::]*/: \"IS\", // Iceland\n\t/*::[*/0x0166/*::]*/: \"FI\", // Finland\n\t/*::[*/0x01A4/*::]*/: \"CZ\", // Czech Republic\n\t/*::[*/0x0376/*::]*/: \"TW\", // Taiwan\n\t/*::[*/0x03C1/*::]*/: \"LB\", // Lebanon\n\t/*::[*/0x03C2/*::]*/: \"JO\", // Jordan\n\t/*::[*/0x03C3/*::]*/: \"SY\", // Syria\n\t/*::[*/0x03C4/*::]*/: \"IQ\", // Iraq\n\t/*::[*/0x03C5/*::]*/: \"KW\", // Kuwait\n\t/*::[*/0x03C6/*::]*/: \"SA\", // Saudi Arabia\n\t/*::[*/0x03CB/*::]*/: \"AE\", // United Arab Emirates\n\t/*::[*/0x03CC/*::]*/: \"IL\", // Israel\n\t/*::[*/0x03CE/*::]*/: \"QA\", // Qatar\n\t/*::[*/0x03D5/*::]*/: \"IR\", // Iran\n\t/*::[*/0xFFFF/*::]*/: \"US\"  // United States\n};\n\n/* [MS-XLS] 2.5.127 */\nvar XLSFillPattern = [\n\tnull,\n\t'solid',\n\t'mediumGray',\n\t'darkGray',\n\t'lightGray',\n\t'darkHorizontal',\n\t'darkVertical',\n\t'darkDown',\n\t'darkUp',\n\t'darkGrid',\n\t'darkTrellis',\n\t'lightHorizontal',\n\t'lightVertical',\n\t'lightDown',\n\t'lightUp',\n\t'lightGrid',\n\t'lightTrellis',\n\t'gray125',\n\t'gray0625'\n];\n\nfunction rgbify(arr/*:Array<number>*/)/*:Array<[number, number, number]>*/ { return arr.map(function(x) { return [(x>>16)&255,(x>>8)&255,x&255]; }); }\n\n/* [MS-XLS] 2.5.161 */\n/* [MS-XLSB] 2.5.75 Icv */\nvar _XLSIcv = /*#__PURE__*/ rgbify([\n\t/* Color Constants */\n\t0x000000,\n\t0xFFFFFF,\n\t0xFF0000,\n\t0x00FF00,\n\t0x0000FF,\n\t0xFFFF00,\n\t0xFF00FF,\n\t0x00FFFF,\n\n\t/* Overridable Defaults */\n\t0x000000,\n\t0xFFFFFF,\n\t0xFF0000,\n\t0x00FF00,\n\t0x0000FF,\n\t0xFFFF00,\n\t0xFF00FF,\n\t0x00FFFF,\n\n\t0x800000,\n\t0x008000,\n\t0x000080,\n\t0x808000,\n\t0x800080,\n\t0x008080,\n\t0xC0C0C0,\n\t0x808080,\n\t0x9999FF,\n\t0x993366,\n\t0xFFFFCC,\n\t0xCCFFFF,\n\t0x660066,\n\t0xFF8080,\n\t0x0066CC,\n\t0xCCCCFF,\n\n\t0x000080,\n\t0xFF00FF,\n\t0xFFFF00,\n\t0x00FFFF,\n\t0x800080,\n\t0x800000,\n\t0x008080,\n\t0x0000FF,\n\t0x00CCFF,\n\t0xCCFFFF,\n\t0xCCFFCC,\n\t0xFFFF99,\n\t0x99CCFF,\n\t0xFF99CC,\n\t0xCC99FF,\n\t0xFFCC99,\n\n\t0x3366FF,\n\t0x33CCCC,\n\t0x99CC00,\n\t0xFFCC00,\n\t0xFF9900,\n\t0xFF6600,\n\t0x666699,\n\t0x969696,\n\t0x003366,\n\t0x339966,\n\t0x003300,\n\t0x333300,\n\t0x993300,\n\t0x993366,\n\t0x333399,\n\t0x333333,\n\n\t/* Other entries to appease BIFF8/12 */\n\t0xFFFFFF, /* 0x40 icvForeground ?? */\n\t0x000000, /* 0x41 icvBackground ?? */\n\t0x000000, /* 0x42 icvFrame ?? */\n\t0x000000, /* 0x43 icv3D ?? */\n\t0x000000, /* 0x44 icv3DText ?? */\n\t0x000000, /* 0x45 icv3DHilite ?? */\n\t0x000000, /* 0x46 icv3DShadow ?? */\n\t0x000000, /* 0x47 icvHilite ?? */\n\t0x000000, /* 0x48 icvCtlText ?? */\n\t0x000000, /* 0x49 icvCtlScrl ?? */\n\t0x000000, /* 0x4A icvCtlInv ?? */\n\t0x000000, /* 0x4B icvCtlBody ?? */\n\t0x000000, /* 0x4C icvCtlFrame ?? */\n\t0x000000, /* 0x4D icvCtlFore ?? */\n\t0x000000, /* 0x4E icvCtlBack ?? */\n\t0x000000, /* 0x4F icvCtlNeutral */\n\t0x000000, /* 0x50 icvInfoBk ?? */\n\t0x000000 /* 0x51 icvInfoText ?? */\n]);\nvar XLSIcv = /*#__PURE__*/dup(_XLSIcv);\n\n/* [MS-XLSB] 2.5.97.2 */\nvar BErr = {\n\t/*::[*/0x00/*::]*/: \"#NULL!\",\n\t/*::[*/0x07/*::]*/: \"#DIV/0!\",\n\t/*::[*/0x0F/*::]*/: \"#VALUE!\",\n\t/*::[*/0x17/*::]*/: \"#REF!\",\n\t/*::[*/0x1D/*::]*/: \"#NAME?\",\n\t/*::[*/0x24/*::]*/: \"#NUM!\",\n\t/*::[*/0x2A/*::]*/: \"#N/A\",\n\t/*::[*/0x2B/*::]*/: \"#GETTING_DATA\",\n\t/*::[*/0xFF/*::]*/: \"#WTF?\"\n};\n//var RBErr = evert_num(BErr);\nvar RBErr = {\n\t\"#NULL!\":        0x00,\n\t\"#DIV/0!\":       0x07,\n\t\"#VALUE!\":       0x0F,\n\t\"#REF!\":         0x17,\n\t\"#NAME?\":        0x1D,\n\t\"#NUM!\":         0x24,\n\t\"#N/A\":          0x2A,\n\t\"#GETTING_DATA\": 0x2B,\n\t\"#WTF?\":         0xFF\n};\n\n/* Parts enumerated in OPC spec, MS-XLSB and MS-XLSX */\n/* 12.3 Part Summary <SpreadsheetML> */\n/* 14.2 Part Summary <DrawingML> */\n/* [MS-XLSX] 2.1 Part Enumerations ; [MS-XLSB] 2.1.7 Part Enumeration */\nvar ct2type/*{[string]:string}*/ = ({\n\t/* Workbook */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\": \"workbooks\",\n\t\"application/vnd.ms-excel.sheet.macroEnabled.main+xml\": \"workbooks\",\n\t\"application/vnd.ms-excel.sheet.binary.macroEnabled.main\": \"workbooks\",\n\t\"application/vnd.ms-excel.addin.macroEnabled.main+xml\": \"workbooks\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml\": \"workbooks\",\n\n\t/* Worksheet */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\": \"sheets\",\n\t\"application/vnd.ms-excel.worksheet\": \"sheets\",\n\t\"application/vnd.ms-excel.binIndexWs\": \"TODO\", /* Binary Index */\n\n\t/* Chartsheet */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml\": \"charts\",\n\t\"application/vnd.ms-excel.chartsheet\": \"charts\",\n\n\t/* Macrosheet */\n\t\"application/vnd.ms-excel.macrosheet+xml\": \"macros\",\n\t\"application/vnd.ms-excel.macrosheet\": \"macros\",\n\t\"application/vnd.ms-excel.intlmacrosheet\": \"TODO\",\n\t\"application/vnd.ms-excel.binIndexMs\": \"TODO\", /* Binary Index */\n\n\t/* Dialogsheet */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml\": \"dialogs\",\n\t\"application/vnd.ms-excel.dialogsheet\": \"dialogs\",\n\n\t/* Shared Strings */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\": \"strs\",\n\t\"application/vnd.ms-excel.sharedStrings\": \"strs\",\n\n\t/* Styles */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\": \"styles\",\n\t\"application/vnd.ms-excel.styles\": \"styles\",\n\n\t/* File Properties */\n\t\"application/vnd.openxmlformats-package.core-properties+xml\": \"coreprops\",\n\t\"application/vnd.openxmlformats-officedocument.custom-properties+xml\": \"custprops\",\n\t\"application/vnd.openxmlformats-officedocument.extended-properties+xml\": \"extprops\",\n\n\t/* Custom Data Properties */\n\t\"application/vnd.openxmlformats-officedocument.customXmlProperties+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty\": \"TODO\",\n\n\t/* Comments */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml\": \"comments\",\n\t\"application/vnd.ms-excel.comments\": \"comments\",\n\t\"application/vnd.ms-excel.threadedcomments+xml\": \"threadedcomments\",\n\t\"application/vnd.ms-excel.person+xml\": \"people\",\n\n\t/* Metadata (Stock/Geography and Dynamic Array) */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml\": \"metadata\",\n\t\"application/vnd.ms-excel.sheetMetadata\": \"metadata\",\n\n\t/* PivotTable */\n\t\"application/vnd.ms-excel.pivotTable\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml\": \"TODO\",\n\n\t/* Chart Objects */\n\t\"application/vnd.openxmlformats-officedocument.drawingml.chart+xml\": \"TODO\",\n\n\t/* Chart Colors */\n\t\"application/vnd.ms-office.chartcolorstyle+xml\": \"TODO\",\n\n\t/* Chart Style */\n\t\"application/vnd.ms-office.chartstyle+xml\": \"TODO\",\n\n\t/* Chart Advanced */\n\t\"application/vnd.ms-office.chartex+xml\": \"TODO\",\n\n\t/* Calculation Chain */\n\t\"application/vnd.ms-excel.calcChain\": \"calcchains\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml\": \"calcchains\",\n\n\t/* Printer Settings */\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings\": \"TODO\",\n\n\t/* ActiveX */\n\t\"application/vnd.ms-office.activeX\": \"TODO\",\n\t\"application/vnd.ms-office.activeX+xml\": \"TODO\",\n\n\t/* Custom Toolbars */\n\t\"application/vnd.ms-excel.attachedToolbars\": \"TODO\",\n\n\t/* External Data Connections */\n\t\"application/vnd.ms-excel.connections\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml\": \"TODO\",\n\n\t/* External Links */\n\t\"application/vnd.ms-excel.externalLink\": \"links\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml\": \"links\",\n\n\t/* PivotCache */\n\t\"application/vnd.ms-excel.pivotCacheDefinition\": \"TODO\",\n\t\"application/vnd.ms-excel.pivotCacheRecords\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml\": \"TODO\",\n\n\t/* Query Table */\n\t\"application/vnd.ms-excel.queryTable\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml\": \"TODO\",\n\n\t/* Shared Workbook */\n\t\"application/vnd.ms-excel.userNames\": \"TODO\",\n\t\"application/vnd.ms-excel.revisionHeaders\": \"TODO\",\n\t\"application/vnd.ms-excel.revisionLog\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml\": \"TODO\",\n\n\t/* Single Cell Table */\n\t\"application/vnd.ms-excel.tableSingleCells\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml\": \"TODO\",\n\n\t/* Slicer */\n\t\"application/vnd.ms-excel.slicer\": \"TODO\",\n\t\"application/vnd.ms-excel.slicerCache\": \"TODO\",\n\t\"application/vnd.ms-excel.slicer+xml\": \"TODO\",\n\t\"application/vnd.ms-excel.slicerCache+xml\": \"TODO\",\n\n\t/* Sort Map */\n\t\"application/vnd.ms-excel.wsSortMap\": \"TODO\",\n\n\t/* Table */\n\t\"application/vnd.ms-excel.table\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\": \"TODO\",\n\n\t/* Themes */\n\t\"application/vnd.openxmlformats-officedocument.theme+xml\": \"themes\",\n\n\t/* Theme Override */\n\t\"application/vnd.openxmlformats-officedocument.themeOverride+xml\": \"TODO\",\n\n\t/* Timeline */\n\t\"application/vnd.ms-excel.Timeline+xml\": \"TODO\", /* verify */\n\t\"application/vnd.ms-excel.TimelineCache+xml\": \"TODO\", /* verify */\n\n\t/* VBA */\n\t\"application/vnd.ms-office.vbaProject\": \"vba\",\n\t\"application/vnd.ms-office.vbaProjectSignature\": \"TODO\",\n\n\t/* Volatile Dependencies */\n\t\"application/vnd.ms-office.volatileDependencies\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml\": \"TODO\",\n\n\t/* Control Properties */\n\t\"application/vnd.ms-excel.controlproperties+xml\": \"TODO\",\n\n\t/* Data Model */\n\t\"application/vnd.openxmlformats-officedocument.model+data\": \"TODO\",\n\n\t/* Survey */\n\t\"application/vnd.ms-excel.Survey+xml\": \"TODO\",\n\n\t/* Drawing */\n\t\"application/vnd.openxmlformats-officedocument.drawing+xml\": \"drawings\",\n\t\"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml\": \"TODO\",\n\t\"application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml\": \"TODO\",\n\n\t/* VML */\n\t\"application/vnd.openxmlformats-officedocument.vmlDrawing\": \"TODO\",\n\n\t\"application/vnd.openxmlformats-package.relationships+xml\": \"rels\",\n\t\"application/vnd.openxmlformats-officedocument.oleObject\": \"TODO\",\n\n\t/* Image */\n\t\"image/png\": \"TODO\",\n\n\t\"sheet\": \"js\"\n}/*:any*/);\n\nvar CT_LIST = {\n\t\tworkbooks: {\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\",\n\t\t\txlsm: \"application/vnd.ms-excel.sheet.macroEnabled.main+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.sheet.binary.macroEnabled.main\",\n\t\t\txlam: \"application/vnd.ms-excel.addin.macroEnabled.main+xml\",\n\t\t\txltx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml\"\n\t\t},\n\t\tstrs: { /* Shared Strings */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.sharedStrings\"\n\t\t},\n\t\tcomments: { /* Comments */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.comments\"\n\t\t},\n\t\tsheets: { /* Worksheet */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.worksheet\"\n\t\t},\n\t\tcharts: { /* Chartsheet */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.chartsheet\"\n\t\t},\n\t\tdialogs: { /* Dialogsheet */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.dialogsheet\"\n\t\t},\n\t\tmacros: { /* Macrosheet (Excel 4.0 Macros) */\n\t\t\txlsx: \"application/vnd.ms-excel.macrosheet+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.macrosheet\"\n\t\t},\n\t\tmetadata: { /* Metadata (Stock/Geography and Dynamic Array) */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.sheetMetadata\"\n\t\t},\n\t\tstyles: { /* Styles */\n\t\t\txlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\",\n\t\t\txlsb: \"application/vnd.ms-excel.styles\"\n\t\t}\n};\n\nfunction new_ct()/*:any*/ {\n\treturn ({\n\t\tworkbooks:[], sheets:[], charts:[], dialogs:[], macros:[],\n\t\trels:[], strs:[], comments:[], threadedcomments:[], links:[],\n\t\tcoreprops:[], extprops:[], custprops:[], themes:[], styles:[],\n\t\tcalcchains:[], vba: [], drawings: [], metadata: [], people:[],\n\t\tTODO:[], xmlns: \"\" }/*:any*/);\n}\n\nfunction parse_ct(data/*:?string*/) {\n\tvar ct = new_ct();\n\tif(!data || !data.match) return ct;\n\tvar ctext = {};\n\t(data.match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\tswitch(y[0].replace(nsregex,\"<\")) {\n\t\t\tcase '<?xml': break;\n\t\t\tcase '<Types': ct.xmlns = y['xmlns' + (y[0].match(/<(\\w+):/)||[\"\",\"\"])[1] ]; break;\n\t\t\tcase '<Default': ctext[y.Extension] = y.ContentType; break;\n\t\t\tcase '<Override':\n\t\t\t\tif(ct[ct2type[y.ContentType]] !== undefined) ct[ct2type[y.ContentType]].push(y.PartName);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\tif(ct.xmlns !== XMLNS.CT) throw new Error(\"Unknown Namespace: \" + ct.xmlns);\n\tct.calcchain = ct.calcchains.length > 0 ? ct.calcchains[0] : \"\";\n\tct.sst = ct.strs.length > 0 ? ct.strs[0] : \"\";\n\tct.style = ct.styles.length > 0 ? ct.styles[0] : \"\";\n\tct.defaults = ctext;\n\tdelete ct.calcchains;\n\treturn ct;\n}\n\nfunction write_ct(ct, opts)/*:string*/ {\n\tvar type2ct/*{[string]:Array<string>}*/ = evert_arr(ct2type);\n\n\tvar o/*:Array<string>*/ = [], v;\n\to[o.length] = (XML_HEADER);\n\to[o.length] = writextag('Types', null, {\n\t\t'xmlns': XMLNS.CT,\n\t\t'xmlns:xsd': XMLNS.xsd,\n\t\t'xmlns:xsi': XMLNS.xsi\n\t});\n\n\to = o.concat([\n\t\t['xml', 'application/xml'],\n\t\t['bin', 'application/vnd.ms-excel.sheet.binary.macroEnabled.main'],\n\t\t['vml', 'application/vnd.openxmlformats-officedocument.vmlDrawing'],\n\t\t['data', 'application/vnd.openxmlformats-officedocument.model+data'],\n\t\t/* from test files */\n\t\t['bmp', 'image/bmp'],\n\t\t['png', 'image/png'],\n\t\t['gif', 'image/gif'],\n\t\t['emf', 'image/x-emf'],\n\t\t['wmf', 'image/x-wmf'],\n\t\t['jpg', 'image/jpeg'], ['jpeg', 'image/jpeg'],\n\t\t['tif', 'image/tiff'], ['tiff', 'image/tiff'],\n\t\t['pdf', 'application/pdf'],\n\t\t['rels', 'application/vnd.openxmlformats-package.relationships+xml']\n\t].map(function(x) {\n\t\treturn writextag('Default', null, {'Extension':x[0], 'ContentType': x[1]});\n\t}));\n\n\t/* only write first instance */\n\tvar f1 = function(w) {\n\t\tif(ct[w] && ct[w].length > 0) {\n\t\t\tv = ct[w][0];\n\t\t\to[o.length] = (writextag('Override', null, {\n\t\t\t\t'PartName': (v[0] == '/' ? \"\":\"/\") + v,\n\t\t\t\t'ContentType': CT_LIST[w][opts.bookType] || CT_LIST[w]['xlsx']\n\t\t\t}));\n\t\t}\n\t};\n\n\t/* book type-specific */\n\tvar f2 = function(w) {\n\t\t(ct[w]||[]).forEach(function(v) {\n\t\t\to[o.length] = (writextag('Override', null, {\n\t\t\t\t'PartName': (v[0] == '/' ? \"\":\"/\") + v,\n\t\t\t\t'ContentType': CT_LIST[w][opts.bookType] || CT_LIST[w]['xlsx']\n\t\t\t}));\n\t\t});\n\t};\n\n\t/* standard type */\n\tvar f3 = function(t) {\n\t\t(ct[t]||[]).forEach(function(v) {\n\t\t\to[o.length] = (writextag('Override', null, {\n\t\t\t\t'PartName': (v[0] == '/' ? \"\":\"/\") + v,\n\t\t\t\t'ContentType': type2ct[t][0]\n\t\t\t}));\n\t\t});\n\t};\n\n\tf1('workbooks');\n\tf2('sheets');\n\tf2('charts');\n\tf3('themes');\n\t['strs', 'styles'].forEach(f1);\n\t['coreprops', 'extprops', 'custprops'].forEach(f3);\n\tf3('vba');\n\tf3('comments');\n\tf3('threadedcomments');\n\tf3('drawings');\n\tf2('metadata');\n\tf3('people');\n\tif(o.length>2){ o[o.length] = ('</Types>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* 9.3 Relationships */\nvar RELS = ({\n\tWB: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\",\n\tSHEET: \"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument\",\n\tHLINK: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\",\n\tVML: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing\",\n\tXPATH: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath\",\n\tXMISS: \"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing\",\n\tXLINK: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink\",\n\tCXML: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml\",\n\tCXMLP: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps\",\n\tCMNT: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments\",\n\tCORE_PROPS: \"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\",\n\tEXT_PROPS: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties',\n\tCUST_PROPS: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties',\n\tSST: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\",\n\tSTY: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\",\n\tTHEME: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\",\n\tCHART: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart\",\n\tCHARTEX: \"http://schemas.microsoft.com/office/2014/relationships/chartEx\",\n\tCS: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet\",\n\tWS: [\n\t\t\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\",\n\t\t\"http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet\"\n\t],\n\tDS: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet\",\n\tMS: \"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet\",\n\tIMG: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\",\n\tDRAW: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing\",\n\tXLMETA: \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata\",\n\tTCMNT: \"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment\",\n\tPEOPLE: \"http://schemas.microsoft.com/office/2017/10/relationships/person\",\n\tVBA: \"http://schemas.microsoft.com/office/2006/relationships/vbaProject\"\n}/*:any*/);\n\n\n/* 9.3.3 Representing Relationships */\nfunction get_rels_path(file/*:string*/)/*:string*/ {\n\tvar n = file.lastIndexOf(\"/\");\n\treturn file.slice(0,n+1) + '_rels/' + file.slice(n+1) + \".rels\";\n}\n\nfunction parse_rels(data/*:?string*/, currentFilePath/*:string*/) {\n\tvar rels = {\"!id\":{}};\n\tif (!data) return rels;\n\tif (currentFilePath.charAt(0) !== '/') {\n\t\tcurrentFilePath = '/'+currentFilePath;\n\t}\n\tvar hash = {};\n\n\t(data.match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\t/* 9.3.2.2 OPC_Relationships */\n\t\tif (y[0] === '<Relationship') {\n\t\t\tvar rel = {}; rel.Type = y.Type; rel.Target = y.Target; rel.Id = y.Id; if(y.TargetMode) rel.TargetMode = y.TargetMode;\n\t\t\tvar canonictarget = y.TargetMode === 'External' ? y.Target : resolve_path(y.Target, currentFilePath);\n\t\t\trels[canonictarget] = rel;\n\t\t\thash[y.Id] = rel;\n\t\t}\n\t});\n\trels[\"!id\"] = hash;\n\treturn rels;\n}\n\n\n/* TODO */\nfunction write_rels(rels)/*:string*/ {\n\tvar o = [XML_HEADER, writextag('Relationships', null, {\n\t\t//'xmlns:ns0': XMLNS.RELS,\n\t\t'xmlns': XMLNS.RELS\n\t})];\n\tkeys(rels['!id']).forEach(function(rid) {\n\t\to[o.length] = (writextag('Relationship', null, rels['!id'][rid]));\n\t});\n\tif(o.length>2){ o[o.length] = ('</Relationships>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n\nfunction add_rels(rels, rId/*:number*/, f, type, relobj, targetmode/*:?string*/)/*:number*/ {\n\tif(!relobj) relobj = {};\n\tif(!rels['!id']) rels['!id'] = {};\n\tif(!rels['!idx']) rels['!idx'] = 1;\n\tif(rId < 0) for(rId = rels['!idx']; rels['!id']['rId' + rId]; ++rId){/* empty */}\n\trels['!idx'] = rId + 1;\n\trelobj.Id = 'rId' + rId;\n\trelobj.Type = type;\n\trelobj.Target = f;\n\tif(targetmode) relobj.TargetMode = targetmode;\n\telse if([RELS.HLINK, RELS.XPATH, RELS.XMISS].indexOf(relobj.Type) > -1) relobj.TargetMode = \"External\";\n\tif(rels['!id'][relobj.Id]) throw new Error(\"Cannot rewrite rId \" + rId);\n\trels['!id'][relobj.Id] = relobj;\n\trels[('/' + relobj.Target).replace(\"//\",\"/\")] = relobj;\n\treturn rId;\n}\n/* Open Document Format for Office Applications (OpenDocument) Version 1.2 */\n/* Part 3 Section 4 Manifest File */\nvar CT_ODS = \"application/vnd.oasis.opendocument.spreadsheet\";\nfunction parse_manifest(d, opts) {\n\tvar str = xlml_normalize(d);\n\tvar Rn;\n\tvar FEtag;\n\twhile((Rn = xlmlregex.exec(str))) switch(Rn[3]) {\n\t\tcase 'manifest': break; // 4.2 <manifest:manifest>\n\t\tcase 'file-entry': // 4.3 <manifest:file-entry>\n\t\t\tFEtag = parsexmltag(Rn[0], false);\n\t\t\tif(FEtag.path == '/' && FEtag.type !== CT_ODS) throw new Error(\"This OpenDocument is not a spreadsheet\");\n\t\t\tbreak;\n\t\tcase 'encryption-data': // 4.4 <manifest:encryption-data>\n\t\tcase 'algorithm': // 4.5 <manifest:algorithm>\n\t\tcase 'start-key-generation': // 4.6 <manifest:start-key-generation>\n\t\tcase 'key-derivation': // 4.7 <manifest:key-derivation>\n\t\t\tthrow new Error(\"Unsupported ODS Encryption\");\n\t\tdefault: if(opts && opts.WTF) throw Rn;\n\t}\n}\n\nfunction write_manifest(manifest/*:Array<Array<string> >*/)/*:string*/ {\n\tvar o = [XML_HEADER];\n\to.push('<manifest:manifest xmlns:manifest=\"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0\" manifest:version=\"1.2\">\\n');\n\to.push('  <manifest:file-entry manifest:full-path=\"/\" manifest:version=\"1.2\" manifest:media-type=\"application/vnd.oasis.opendocument.spreadsheet\"/>\\n');\n\tfor(var i = 0; i < manifest.length; ++i) o.push('  <manifest:file-entry manifest:full-path=\"' + manifest[i][0] + '\" manifest:media-type=\"' + manifest[i][1] + '\"/>\\n');\n\to.push('</manifest:manifest>');\n\treturn o.join(\"\");\n}\n\n/* Part 3 Section 6 Metadata Manifest File */\nfunction write_rdf_type(file/*:string*/, res/*:string*/, tag/*:?string*/) {\n\treturn [\n\t\t'  <rdf:Description rdf:about=\"' + file + '\">\\n',\n\t\t'    <rdf:type rdf:resource=\"http://docs.oasis-open.org/ns/office/1.2/meta/' + (tag || \"odf\") + '#' + res + '\"/>\\n',\n\t\t'  </rdf:Description>\\n'\n\t].join(\"\");\n}\nfunction write_rdf_has(base/*:string*/, file/*:string*/) {\n\treturn [\n\t\t'  <rdf:Description rdf:about=\"' + base + '\">\\n',\n\t\t'    <ns0:hasPart xmlns:ns0=\"http://docs.oasis-open.org/ns/office/1.2/meta/pkg#\" rdf:resource=\"' + file + '\"/>\\n',\n\t\t'  </rdf:Description>\\n'\n\t].join(\"\");\n}\nfunction write_rdf(rdf) {\n\tvar o = [XML_HEADER];\n\to.push('<rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\\n');\n\tfor(var i = 0; i != rdf.length; ++i) {\n\t\to.push(write_rdf_type(rdf[i][0], rdf[i][1]));\n\t\to.push(write_rdf_has(\"\",rdf[i][0]));\n\t}\n\to.push(write_rdf_type(\"\",\"Document\", \"pkg\"));\n\to.push('</rdf:RDF>');\n\treturn o.join(\"\");\n}\n/* TODO: pull properties */\nfunction write_meta_ods(/*:: wb: Workbook, opts: any*/)/*:string*/ {\n\treturn '<office:document-meta xmlns:office=\"urn:oasis:names:tc:opendocument:xmlns:office:1.0\" xmlns:meta=\"urn:oasis:names:tc:opendocument:xmlns:meta:1.0\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" office:version=\"1.2\"><office:meta><meta:generator>Sheet' + 'JS ' + XLSX.version + '</meta:generator></office:meta></office:document-meta>';\n}\n\n/* ECMA-376 Part II 11.1 Core Properties Part */\n/* [MS-OSHARED] 2.3.3.2.[1-2].1 (PIDSI/PIDDSI) */\nvar CORE_PROPS/*:Array<Array<string> >*/ = [\n\t[\"cp:category\", \"Category\"],\n\t[\"cp:contentStatus\", \"ContentStatus\"],\n\t[\"cp:keywords\", \"Keywords\"],\n\t[\"cp:lastModifiedBy\", \"LastAuthor\"],\n\t[\"cp:lastPrinted\", \"LastPrinted\"],\n\t[\"cp:revision\", \"RevNumber\"],\n\t[\"cp:version\", \"Version\"],\n\t[\"dc:creator\", \"Author\"],\n\t[\"dc:description\", \"Comments\"],\n\t[\"dc:identifier\", \"Identifier\"],\n\t[\"dc:language\", \"Language\"],\n\t[\"dc:subject\", \"Subject\"],\n\t[\"dc:title\", \"Title\"],\n\t[\"dcterms:created\", \"CreatedDate\", 'date'],\n\t[\"dcterms:modified\", \"ModifiedDate\", 'date']\n];\n\nvar CORE_PROPS_REGEX/*:Array<RegExp>*/ = /*#__PURE__*/(function() {\n\tvar r = new Array(CORE_PROPS.length);\n\tfor(var i = 0; i < CORE_PROPS.length; ++i) {\n\t\tvar f = CORE_PROPS[i];\n\t\tvar g = \"(?:\"+ f[0].slice(0,f[0].indexOf(\":\")) +\":)\"+ f[0].slice(f[0].indexOf(\":\")+1);\n\t\tr[i] = new RegExp(\"<\" + g + \"[^>]*>([\\\\s\\\\S]*?)<\\/\" + g + \">\");\n\t}\n\treturn r;\n})();\n\nfunction parse_core_props(data) {\n\tvar p = {};\n\tdata = utf8read(data);\n\n\tfor(var i = 0; i < CORE_PROPS.length; ++i) {\n\t\tvar f = CORE_PROPS[i], cur = data.match(CORE_PROPS_REGEX[i]);\n\t\tif(cur != null && cur.length > 0) p[f[1]] = unescapexml(cur[1]);\n\t\tif(f[2] === 'date' && p[f[1]]) p[f[1]] = parseDate(p[f[1]]);\n\t}\n\n\treturn p;\n}\n\nfunction cp_doit(f, g, h, o, p) {\n\tif(p[f] != null || g == null || g === \"\") return;\n\tp[f] = g;\n\tg = escapexml(g);\n\to[o.length] = (h ? writextag(f,g,h) : writetag(f,g));\n}\n\nfunction write_core_props(cp, _opts) {\n\tvar opts = _opts || {};\n\tvar o = [XML_HEADER, writextag('cp:coreProperties', null, {\n\t\t//'xmlns': XMLNS.CORE_PROPS,\n\t\t'xmlns:cp': XMLNS.CORE_PROPS,\n\t\t'xmlns:dc': XMLNS.dc,\n\t\t'xmlns:dcterms': XMLNS.dcterms,\n\t\t'xmlns:dcmitype': XMLNS.dcmitype,\n\t\t'xmlns:xsi': XMLNS.xsi\n\t})], p = {};\n\tif(!cp && !opts.Props) return o.join(\"\");\n\n\tif(cp) {\n\t\tif(cp.CreatedDate != null) cp_doit(\"dcterms:created\", typeof cp.CreatedDate === \"string\" ? cp.CreatedDate : write_w3cdtf(cp.CreatedDate, opts.WTF), {\"xsi:type\":\"dcterms:W3CDTF\"}, o, p);\n\t\tif(cp.ModifiedDate != null) cp_doit(\"dcterms:modified\", typeof cp.ModifiedDate === \"string\" ? cp.ModifiedDate : write_w3cdtf(cp.ModifiedDate, opts.WTF), {\"xsi:type\":\"dcterms:W3CDTF\"}, o, p);\n\t}\n\n\tfor(var i = 0; i != CORE_PROPS.length; ++i) {\n\t\tvar f = CORE_PROPS[i];\n\t\tvar v = opts.Props && opts.Props[f[1]] != null ? opts.Props[f[1]] : cp ? cp[f[1]] : null;\n\t\tif(v === true) v = \"1\";\n\t\telse if(v === false) v = \"0\";\n\t\telse if(typeof v == \"number\") v = String(v);\n\t\tif(v != null) cp_doit(f[0], v, null, o, p);\n\t}\n\tif(o.length>2){ o[o.length] = ('</cp:coreProperties>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* 15.2.12.3 Extended File Properties Part */\n/* [MS-OSHARED] 2.3.3.2.[1-2].1 (PIDSI/PIDDSI) */\nvar EXT_PROPS/*:Array<Array<string> >*/ = [\n\t[\"Application\", \"Application\", \"string\"],\n\t[\"AppVersion\", \"AppVersion\", \"string\"],\n\t[\"Company\", \"Company\", \"string\"],\n\t[\"DocSecurity\", \"DocSecurity\", \"string\"],\n\t[\"Manager\", \"Manager\", \"string\"],\n\t[\"HyperlinksChanged\", \"HyperlinksChanged\", \"bool\"],\n\t[\"SharedDoc\", \"SharedDoc\", \"bool\"],\n\t[\"LinksUpToDate\", \"LinksUpToDate\", \"bool\"],\n\t[\"ScaleCrop\", \"ScaleCrop\", \"bool\"],\n\t[\"HeadingPairs\", \"HeadingPairs\", \"raw\"],\n\t[\"TitlesOfParts\", \"TitlesOfParts\", \"raw\"]\n];\n\nvar PseudoPropsPairs = [\n\t\"Worksheets\",  \"SheetNames\",\n\t\"NamedRanges\", \"DefinedNames\",\n\t\"Chartsheets\", \"ChartNames\"\n];\nfunction load_props_pairs(HP/*:string|Array<Array<any>>*/, TOP, props, opts) {\n\tvar v = [];\n\tif(typeof HP == \"string\") v = parseVector(HP, opts);\n\telse for(var j = 0; j < HP.length; ++j) v = v.concat(HP[j].map(function(hp) { return {v:hp}; }));\n\tvar parts = (typeof TOP == \"string\") ? parseVector(TOP, opts).map(function (x) { return x.v; }) : TOP;\n\tvar idx = 0, len = 0;\n\tif(parts.length > 0) for(var i = 0; i !== v.length; i += 2) {\n\t\tlen = +(v[i+1].v);\n\t\tswitch(v[i].v) {\n\t\t\tcase \"Worksheets\":\n\t\t\tcase \"\":\n\t\t\tcase \"\":\n\t\t\tcase \" \":\n\t\t\tcase \"\":\n\t\t\tcase \" \":\n\t\t\tcase \"Arbeitsbltter\":\n\t\t\tcase \"alma Sayfalar\":\n\t\t\tcase \"Feuilles de calcul\":\n\t\t\tcase \"Fogli di lavoro\":\n\t\t\tcase \"Folhas de clculo\":\n\t\t\tcase \"Planilhas\":\n\t\t\tcase \"Regneark\":\n\t\t\tcase \"Hojas de clculo\":\n\t\t\tcase \"Werkbladen\":\n\t\t\t\tprops.Worksheets = len;\n\t\t\t\tprops.SheetNames = parts.slice(idx, idx + len);\n\t\t\t\tbreak;\n\n\t\t\tcase \"Named Ranges\":\n\t\t\tcase \"Rangos con nombre\":\n\t\t\tcase \"\":\n\t\t\tcase \"Benannte Bereiche\":\n\t\t\tcase \"Navngivne omrder\":\n\t\t\t\tprops.NamedRanges = len;\n\t\t\t\tprops.DefinedNames = parts.slice(idx, idx + len);\n\t\t\t\tbreak;\n\n\t\t\tcase \"Charts\":\n\t\t\tcase \"Diagramme\":\n\t\t\t\tprops.Chartsheets = len;\n\t\t\t\tprops.ChartNames = parts.slice(idx, idx + len);\n\t\t\t\tbreak;\n\t\t}\n\t\tidx += len;\n\t}\n}\n\nfunction parse_ext_props(data, p, opts) {\n\tvar q = {}; if(!p) p = {};\n\tdata = utf8read(data);\n\n\tEXT_PROPS.forEach(function(f) {\n\t\tvar xml = (data.match(matchtag(f[0]))||[])[1];\n\t\tswitch(f[2]) {\n\t\t\tcase \"string\": if(xml) p[f[1]] = unescapexml(xml); break;\n\t\t\tcase \"bool\": p[f[1]] = xml === \"true\"; break;\n\t\t\tcase \"raw\":\n\t\t\t\tvar cur = data.match(new RegExp(\"<\" + f[0] + \"[^>]*>([\\\\s\\\\S]*?)<\\/\" + f[0] + \">\"));\n\t\t\t\tif(cur && cur.length > 0) q[f[1]] = cur[1];\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(q.HeadingPairs && q.TitlesOfParts) load_props_pairs(q.HeadingPairs, q.TitlesOfParts, p, opts);\n\n\treturn p;\n}\n\nfunction write_ext_props(cp/*::, opts*/)/*:string*/ {\n\tvar o/*:Array<string>*/ = [], W = writextag;\n\tif(!cp) cp = {};\n\tcp.Application = \"SheetJS\";\n\to[o.length] = (XML_HEADER);\n\to[o.length] = (writextag('Properties', null, {\n\t\t'xmlns': XMLNS.EXT_PROPS,\n\t\t'xmlns:vt': XMLNS.vt\n\t}));\n\n\tEXT_PROPS.forEach(function(f) {\n\t\tif(cp[f[1]] === undefined) return;\n\t\tvar v;\n\t\tswitch(f[2]) {\n\t\t\tcase 'string': v = escapexml(String(cp[f[1]])); break;\n\t\t\tcase 'bool': v = cp[f[1]] ? 'true' : 'false'; break;\n\t\t}\n\t\tif(v !== undefined) o[o.length] = (W(f[0], v));\n\t});\n\n\t/* TODO: HeadingPairs, TitlesOfParts */\n\to[o.length] = (W('HeadingPairs', W('vt:vector', W('vt:variant', '<vt:lpstr>Worksheets</vt:lpstr>')+W('vt:variant', W('vt:i4', String(cp.Worksheets))), {size:2, baseType:\"variant\"})));\n\to[o.length] = (W('TitlesOfParts', W('vt:vector', cp.SheetNames.map(function(s) { return \"<vt:lpstr>\" + escapexml(s) + \"</vt:lpstr>\"; }).join(\"\"), {size: cp.Worksheets, baseType:\"lpstr\"})));\n\tif(o.length>2){ o[o.length] = ('</Properties>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* 15.2.12.2 Custom File Properties Part */\nvar custregex = /<[^>]+>[^<]*/g;\nfunction parse_cust_props(data/*:string*/, opts) {\n\tvar p = {}, name = \"\";\n\tvar m = data.match(custregex);\n\tif(m) for(var i = 0; i != m.length; ++i) {\n\t\tvar x = m[i], y = parsexmltag(x);\n\t\tswitch(y[0]) {\n\t\t\tcase '<?xml': break;\n\t\t\tcase '<Properties': break;\n\t\t\tcase '<property': name = unescapexml(y.name); break;\n\t\t\tcase '</property>': name = null; break;\n\t\t\tdefault: if (x.indexOf('<vt:') === 0) {\n\t\t\t\tvar toks = x.split('>');\n\t\t\t\tvar type = toks[0].slice(4), text = toks[1];\n\t\t\t\t/* 22.4.2.32 (CT_Variant). Omit the binary types from 22.4 (Variant Types) */\n\t\t\t\tswitch(type) {\n\t\t\t\t\tcase 'lpstr': case 'bstr': case 'lpwstr':\n\t\t\t\t\t\tp[name] = unescapexml(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'bool':\n\t\t\t\t\t\tp[name] = parsexmlbool(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'i1': case 'i2': case 'i4': case 'i8': case 'int': case 'uint':\n\t\t\t\t\t\tp[name] = parseInt(text, 10);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'r4': case 'r8': case 'decimal':\n\t\t\t\t\t\tp[name] = parseFloat(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'filetime': case 'date':\n\t\t\t\t\t\tp[name] = parseDate(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'cy': case 'error':\n\t\t\t\t\t\tp[name] = unescapexml(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(type.slice(-1) == '/') break;\n\t\t\t\t\t\tif(opts.WTF && typeof console !== 'undefined') console.warn('Unexpected', x, type, toks);\n\t\t\t\t}\n\t\t\t} else if(x.slice(0,2) === \"</\") {/* empty */\n\t\t\t} else if(opts.WTF) throw new Error(x);\n\t\t}\n\t}\n\treturn p;\n}\n\nfunction write_cust_props(cp/*::, opts*/)/*:string*/ {\n\tvar o = [XML_HEADER, writextag('Properties', null, {\n\t\t'xmlns': XMLNS.CUST_PROPS,\n\t\t'xmlns:vt': XMLNS.vt\n\t})];\n\tif(!cp) return o.join(\"\");\n\tvar pid = 1;\n\tkeys(cp).forEach(function custprop(k) { ++pid;\n\t\to[o.length] = (writextag('property', write_vt(cp[k], true), {\n\t\t\t'fmtid': '{D5CDD505-2E9C-101B-9397-08002B2CF9AE}',\n\t\t\t'pid': pid,\n\t\t\t'name': escapexml(k)\n\t\t}));\n\t});\n\tif(o.length>2){ o[o.length] = '</Properties>'; o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* Common Name -> XLML Name */\nvar XLMLDocPropsMap = {\n\tTitle: 'Title',\n\tSubject: 'Subject',\n\tAuthor: 'Author',\n\tKeywords: 'Keywords',\n\tComments: 'Description',\n\tLastAuthor: 'LastAuthor',\n\tRevNumber: 'Revision',\n\tApplication: 'AppName',\n\t/* TotalTime: 'TotalTime', */\n\tLastPrinted: 'LastPrinted',\n\tCreatedDate: 'Created',\n\tModifiedDate: 'LastSaved',\n\t/* Pages */\n\t/* Words */\n\t/* Characters */\n\tCategory: 'Category',\n\t/* PresentationFormat */\n\tManager: 'Manager',\n\tCompany: 'Company',\n\t/* Guid */\n\t/* HyperlinkBase */\n\t/* Bytes */\n\t/* Lines */\n\t/* Paragraphs */\n\t/* CharactersWithSpaces */\n\tAppVersion: 'Version',\n\n\tContentStatus: 'ContentStatus', /* NOTE: missing from schema */\n\tIdentifier: 'Identifier', /* NOTE: missing from schema */\n\tLanguage: 'Language' /* NOTE: missing from schema */\n};\nvar evert_XLMLDPM;\n\nfunction xlml_set_prop(Props, tag/*:string*/, val) {\n\tif(!evert_XLMLDPM) evert_XLMLDPM = evert(XLMLDocPropsMap);\n\ttag = evert_XLMLDPM[tag] || tag;\n\tProps[tag] = val;\n}\n\nfunction xlml_write_docprops(Props, opts) {\n\tvar o/*:Array<string>*/ = [];\n\tkeys(XLMLDocPropsMap).map(function(m) {\n\t\tfor(var i = 0; i < CORE_PROPS.length; ++i) if(CORE_PROPS[i][1] == m) return CORE_PROPS[i];\n\t\tfor(i = 0; i < EXT_PROPS.length; ++i) if(EXT_PROPS[i][1] == m) return EXT_PROPS[i];\n\t\tthrow m;\n\t}).forEach(function(p) {\n\t\tif(Props[p[1]] == null) return;\n\t\tvar m = opts && opts.Props && opts.Props[p[1]] != null ? opts.Props[p[1]] : Props[p[1]];\n\t\tswitch(p[2]) {\n\t\t\tcase 'date': m = new Date(m).toISOString().replace(/\\.\\d*Z/,\"Z\"); break;\n\t\t}\n\t\tif(typeof m == 'number') m = String(m);\n\t\telse if(m === true || m === false) { m = m ? \"1\" : \"0\"; }\n\t\telse if(m instanceof Date) m = new Date(m).toISOString().replace(/\\.\\d*Z/,\"\");\n\t\to.push(writetag(XLMLDocPropsMap[p[1]] || p[1], m));\n\t});\n\treturn writextag('DocumentProperties', o.join(\"\"), {xmlns:XLMLNS.o });\n}\nfunction xlml_write_custprops(Props, Custprops/*::, opts*/) {\n\tvar BLACKLIST = [\"Worksheets\",\"SheetNames\"];\n\tvar T = 'CustomDocumentProperties';\n\tvar o/*:Array<string>*/ = [];\n\tif(Props) keys(Props).forEach(function(k) {\n\t\t/*:: if(!Props) return; */\n\t\tif(!Object.prototype.hasOwnProperty.call(Props, k)) return;\n\t\tfor(var i = 0; i < CORE_PROPS.length; ++i) if(k == CORE_PROPS[i][1]) return;\n\t\tfor(i = 0; i < EXT_PROPS.length; ++i) if(k == EXT_PROPS[i][1]) return;\n\t\tfor(i = 0; i < BLACKLIST.length; ++i) if(k == BLACKLIST[i]) return;\n\n\t\tvar m = Props[k];\n\t\tvar t = \"string\";\n\t\tif(typeof m == 'number') { t = \"float\"; m = String(m); }\n\t\telse if(m === true || m === false) { t = \"boolean\"; m = m ? \"1\" : \"0\"; }\n\t\telse m = String(m);\n\t\to.push(writextag(escapexmltag(k), m, {\"dt:dt\":t}));\n\t});\n\tif(Custprops) keys(Custprops).forEach(function(k) {\n\t\t/*:: if(!Custprops) return; */\n\t\tif(!Object.prototype.hasOwnProperty.call(Custprops, k)) return;\n\t\tif(Props && Object.prototype.hasOwnProperty.call(Props, k)) return;\n\t\tvar m = Custprops[k];\n\t\tvar t = \"string\";\n\t\tif(typeof m == 'number') { t = \"float\"; m = String(m); }\n\t\telse if(m === true || m === false) { t = \"boolean\"; m = m ? \"1\" : \"0\"; }\n\t\telse if(m instanceof Date) { t = \"dateTime.tz\"; m = m.toISOString(); }\n\t\telse m = String(m);\n\t\to.push(writextag(escapexmltag(k), m, {\"dt:dt\":t}));\n\t});\n\treturn '<' + T + ' xmlns=\"' + XLMLNS.o + '\">' + o.join(\"\") + '</' + T + '>';\n}\n/* [MS-DTYP] 2.3.3 FILETIME */\n/* [MS-OLEDS] 2.1.3 FILETIME (Packet Version) */\n/* [MS-OLEPS] 2.8 FILETIME (Packet Version) */\nfunction parse_FILETIME(blob) {\n\tvar dwLowDateTime = blob.read_shift(4), dwHighDateTime = blob.read_shift(4);\n\treturn new Date(((dwHighDateTime/1e7*Math.pow(2,32) + dwLowDateTime/1e7) - 11644473600)*1000).toISOString().replace(/\\.000/,\"\");\n}\nfunction write_FILETIME(time/*:string|Date*/) {\n\tvar date = (typeof time == \"string\") ? new Date(Date.parse(time)) : time;\n\tvar t = date.getTime() / 1000 + 11644473600;\n\tvar l = t % Math.pow(2,32), h = (t - l) / Math.pow(2,32);\n\tl *= 1e7; h *= 1e7;\n\tvar w = (l / Math.pow(2,32)) | 0;\n\tif(w > 0) { l = l % Math.pow(2,32); h += w; }\n\tvar o = new_buf(8); o.write_shift(4, l); o.write_shift(4, h); return o;\n}\n\n/* [MS-OSHARED] 2.3.3.1.4 Lpstr */\nfunction parse_lpstr(blob, type, pad/*:?number*/) {\n\tvar start = blob.l;\n\tvar str = blob.read_shift(0, 'lpstr-cp');\n\tif(pad) while((blob.l - start) & 3) ++blob.l;\n\treturn str;\n}\n\n/* [MS-OSHARED] 2.3.3.1.6 Lpwstr */\nfunction parse_lpwstr(blob, type, pad) {\n\tvar str = blob.read_shift(0, 'lpwstr');\n\tif(pad) blob.l += (4 - ((str.length+1) & 3)) & 3;\n\treturn str;\n}\n\n\n/* [MS-OSHARED] 2.3.3.1.11 VtString */\n/* [MS-OSHARED] 2.3.3.1.12 VtUnalignedString */\nfunction parse_VtStringBase(blob, stringType, pad) {\n\tif(stringType === 0x1F /*VT_LPWSTR*/) return parse_lpwstr(blob);\n\treturn parse_lpstr(blob, stringType, pad);\n}\n\nfunction parse_VtString(blob, t/*:number*/, pad/*:?boolean*/) { return parse_VtStringBase(blob, t, pad === false ? 0: 4); }\nfunction parse_VtUnalignedString(blob, t/*:number*/) { if(!t) throw new Error(\"VtUnalignedString must have positive length\"); return parse_VtStringBase(blob, t, 0); }\n\n/* [MS-OSHARED] 2.3.3.1.7 VtVecLpwstrValue */\nfunction parse_VtVecLpwstrValue(blob)/*:Array<string>*/ {\n\tvar length = blob.read_shift(4);\n\tvar ret/*:Array<string>*/ = [];\n\tfor(var i = 0; i != length; ++i) {\n\t\tvar start = blob.l;\n\t\tret[i] = blob.read_shift(0, 'lpwstr').replace(chr0,'');\n\t\tif((blob.l - start) & 0x02) blob.l += 2;\n\t}\n\treturn ret;\n}\n\n/* [MS-OSHARED] 2.3.3.1.9 VtVecUnalignedLpstrValue */\nfunction parse_VtVecUnalignedLpstrValue(blob)/*:Array<string>*/ {\n\tvar length = blob.read_shift(4);\n\tvar ret/*:Array<string>*/ = [];\n\tfor(var i = 0; i != length; ++i) ret[i] = blob.read_shift(0, 'lpstr-cp').replace(chr0,'');\n\treturn ret;\n}\n\n\n/* [MS-OSHARED] 2.3.3.1.13 VtHeadingPair */\nfunction parse_VtHeadingPair(blob) {\n\tvar start = blob.l;\n\tvar headingString = parse_TypedPropertyValue(blob, VT_USTR);\n\tif(blob[blob.l] == 0x00 && blob[blob.l+1] == 0x00 && ((blob.l - start) & 0x02)) blob.l += 2;\n\tvar headerParts = parse_TypedPropertyValue(blob, VT_I4);\n\treturn [headingString, headerParts];\n}\n\n/* [MS-OSHARED] 2.3.3.1.14 VtVecHeadingPairValue */\nfunction parse_VtVecHeadingPairValue(blob) {\n\tvar cElements = blob.read_shift(4);\n\tvar out = [];\n\tfor(var i = 0; i < cElements / 2; ++i) out.push(parse_VtHeadingPair(blob));\n\treturn out;\n}\n\n/* [MS-OLEPS] 2.18.1 Dictionary (uses 2.17, 2.16) */\nfunction parse_dictionary(blob,CodePage) {\n\tvar cnt = blob.read_shift(4);\n\tvar dict/*:{[number]:string}*/ = ({}/*:any*/);\n\tfor(var j = 0; j != cnt; ++j) {\n\t\tvar pid = blob.read_shift(4);\n\t\tvar len = blob.read_shift(4);\n\t\tdict[pid] = blob.read_shift(len, (CodePage === 0x4B0 ?'utf16le':'utf8')).replace(chr0,'').replace(chr1,'!');\n\t\tif(CodePage === 0x4B0 && (len % 2)) blob.l += 2;\n\t}\n\tif(blob.l & 3) blob.l = (blob.l>>2+1)<<2;\n\treturn dict;\n}\n\n/* [MS-OLEPS] 2.9 BLOB */\nfunction parse_BLOB(blob) {\n\tvar size = blob.read_shift(4);\n\tvar bytes = blob.slice(blob.l,blob.l+size);\n\tblob.l += size;\n\tif((size & 3) > 0) blob.l += (4 - (size & 3)) & 3;\n\treturn bytes;\n}\n\n/* [MS-OLEPS] 2.11 ClipboardData */\nfunction parse_ClipboardData(blob) {\n\t// TODO\n\tvar o = {};\n\to.Size = blob.read_shift(4);\n\t//o.Format = blob.read_shift(4);\n\tblob.l += o.Size + 3 - (o.Size - 1) % 4;\n\treturn o;\n}\n\n/* [MS-OLEPS] 2.15 TypedPropertyValue */\nfunction parse_TypedPropertyValue(blob, type/*:number*/, _opts)/*:any*/ {\n\tvar t = blob.read_shift(2), ret, opts = _opts||{};\n\tblob.l += 2;\n\tif(type !== VT_VARIANT)\n\tif(t !== type && VT_CUSTOM.indexOf(type)===-1 && !((type & 0xFFFE) == 0x101E && (t & 0xFFFE) == 0x101E)) throw new Error('Expected type ' + type + ' saw ' + t);\n\tswitch(type === VT_VARIANT ? t : type) {\n\t\tcase 0x02 /*VT_I2*/: ret = blob.read_shift(2, 'i'); if(!opts.raw) blob.l += 2; return ret;\n\t\tcase 0x03 /*VT_I4*/: ret = blob.read_shift(4, 'i'); return ret;\n\t\tcase 0x0B /*VT_BOOL*/: return blob.read_shift(4) !== 0x0;\n\t\tcase 0x13 /*VT_UI4*/: ret = blob.read_shift(4); return ret;\n\t\tcase 0x1E /*VT_LPSTR*/: return parse_lpstr(blob, t, 4).replace(chr0,'');\n\t\tcase 0x1F /*VT_LPWSTR*/: return parse_lpwstr(blob);\n\t\tcase 0x40 /*VT_FILETIME*/: return parse_FILETIME(blob);\n\t\tcase 0x41 /*VT_BLOB*/: return parse_BLOB(blob);\n\t\tcase 0x47 /*VT_CF*/: return parse_ClipboardData(blob);\n\t\tcase 0x50 /*VT_STRING*/: return parse_VtString(blob, t, !opts.raw).replace(chr0,'');\n\t\tcase 0x51 /*VT_USTR*/: return parse_VtUnalignedString(blob, t/*, 4*/).replace(chr0,'');\n\t\tcase 0x100C /*VT_VECTOR|VT_VARIANT*/: return parse_VtVecHeadingPairValue(blob);\n\t\tcase 0x101E /*VT_VECTOR|VT_LPSTR*/:\n\t\tcase 0x101F /*VT_VECTOR|VT_LPWSTR*/:\n\t\t\treturn t == 0x101F ? parse_VtVecLpwstrValue(blob) : parse_VtVecUnalignedLpstrValue(blob);\n\t\tdefault: throw new Error(\"TypedPropertyValue unrecognized type \" + type + \" \" + t);\n\t}\n}\nfunction write_TypedPropertyValue(type/*:number*/, value) {\n\tvar o = new_buf(4), p = new_buf(4);\n\to.write_shift(4, type == 0x50 ? 0x1F : type);\n\tswitch(type) {\n\t\tcase 0x03 /*VT_I4*/: p.write_shift(-4, value); break;\n\t\tcase 0x05 /*VT_I4*/: p = new_buf(8); p.write_shift(8, value, 'f'); break;\n\t\tcase 0x0B /*VT_BOOL*/: p.write_shift(4, value ? 0x01 : 0x00); break;\n\t\tcase 0x40 /*VT_FILETIME*/: /*:: if(typeof value !== \"string\" && !(value instanceof Date)) throw \"unreachable\"; */ p = write_FILETIME(value); break;\n\t\tcase 0x1F /*VT_LPWSTR*/:\n\t\tcase 0x50 /*VT_STRING*/:\n\t\t\t/*:: if(typeof value !== \"string\") throw \"unreachable\"; */\n\t\t\tp = new_buf(4 + 2 * (value.length + 1) + (value.length % 2 ? 0 : 2));\n\t\t\tp.write_shift(4, value.length + 1);\n\t\t\tp.write_shift(0, value, \"dbcs\");\n\t\t\twhile(p.l != p.length) p.write_shift(1, 0);\n\t\t\tbreak;\n\t\tdefault: throw new Error(\"TypedPropertyValue unrecognized type \" + type + \" \" + value);\n\t}\n\treturn bconcat([o, p]);\n}\n\n/* [MS-OLEPS] 2.20 PropertySet */\nfunction parse_PropertySet(blob, PIDSI) {\n\tvar start_addr = blob.l;\n\tvar size = blob.read_shift(4);\n\tvar NumProps = blob.read_shift(4);\n\tvar Props = [], i = 0;\n\tvar CodePage = 0;\n\tvar Dictionary = -1, DictObj/*:{[number]:string}*/ = ({}/*:any*/);\n\tfor(i = 0; i != NumProps; ++i) {\n\t\tvar PropID = blob.read_shift(4);\n\t\tvar Offset = blob.read_shift(4);\n\t\tProps[i] = [PropID, Offset + start_addr];\n\t}\n\tProps.sort(function(x,y) { return x[1] - y[1]; });\n\tvar PropH = {};\n\tfor(i = 0; i != NumProps; ++i) {\n\t\tif(blob.l !== Props[i][1]) {\n\t\t\tvar fail = true;\n\t\t\tif(i>0 && PIDSI) switch(PIDSI[Props[i-1][0]].t) {\n\t\t\t\tcase 0x02 /*VT_I2*/: if(blob.l+2 === Props[i][1]) { blob.l+=2; fail = false; } break;\n\t\t\t\tcase 0x50 /*VT_STRING*/: if(blob.l <= Props[i][1]) { blob.l=Props[i][1]; fail = false; } break;\n\t\t\t\tcase 0x100C /*VT_VECTOR|VT_VARIANT*/: if(blob.l <= Props[i][1]) { blob.l=Props[i][1]; fail = false; } break;\n\t\t\t}\n\t\t\tif((!PIDSI||i==0) && blob.l <= Props[i][1]) { fail=false; blob.l = Props[i][1]; }\n\t\t\tif(fail) throw new Error(\"Read Error: Expected address \" + Props[i][1] + ' at ' + blob.l + ' :' + i);\n\t\t}\n\t\tif(PIDSI) {\n\t\t\tvar piddsi = PIDSI[Props[i][0]];\n\t\t\tPropH[piddsi.n] = parse_TypedPropertyValue(blob, piddsi.t, {raw:true});\n\t\t\tif(piddsi.p === 'version') PropH[piddsi.n] = String(PropH[piddsi.n] >> 16) + \".\" + (\"0000\" + String(PropH[piddsi.n] & 0xFFFF)).slice(-4);\n\t\t\tif(piddsi.n == \"CodePage\") switch(PropH[piddsi.n]) {\n\t\t\t\tcase 0: PropH[piddsi.n] = 1252;\n\t\t\t\t\t/* falls through */\n\t\t\t\tcase 874:\n\t\t\t\tcase 932:\n\t\t\t\tcase 936:\n\t\t\t\tcase 949:\n\t\t\t\tcase 950:\n\t\t\t\tcase 1250:\n\t\t\t\tcase 1251:\n\t\t\t\tcase 1253:\n\t\t\t\tcase 1254:\n\t\t\t\tcase 1255:\n\t\t\t\tcase 1256:\n\t\t\t\tcase 1257:\n\t\t\t\tcase 1258:\n\t\t\t\tcase 10000:\n\t\t\t\tcase 1200:\n\t\t\t\tcase 1201:\n\t\t\t\tcase 1252:\n\t\t\t\tcase 65000: case -536:\n\t\t\t\tcase 65001: case -535:\n\t\t\t\t\tset_cp(CodePage = (PropH[piddsi.n]>>>0) & 0xFFFF); break;\n\t\t\t\tdefault: throw new Error(\"Unsupported CodePage: \" + PropH[piddsi.n]);\n\t\t\t}\n\t\t} else {\n\t\t\tif(Props[i][0] === 0x1) {\n\t\t\t\tCodePage = PropH.CodePage = (parse_TypedPropertyValue(blob, VT_I2)/*:number*/);\n\t\t\t\tset_cp(CodePage);\n\t\t\t\tif(Dictionary !== -1) {\n\t\t\t\t\tvar oldpos = blob.l;\n\t\t\t\t\tblob.l = Props[Dictionary][1];\n\t\t\t\t\tDictObj = parse_dictionary(blob,CodePage);\n\t\t\t\t\tblob.l = oldpos;\n\t\t\t\t}\n\t\t\t} else if(Props[i][0] === 0) {\n\t\t\t\tif(CodePage === 0) { Dictionary = i; blob.l = Props[i+1][1]; continue; }\n\t\t\t\tDictObj = parse_dictionary(blob,CodePage);\n\t\t\t} else {\n\t\t\t\tvar name = DictObj[Props[i][0]];\n\t\t\t\tvar val;\n\t\t\t\t/* [MS-OSHARED] 2.3.3.2.3.1.2 + PROPVARIANT */\n\t\t\t\tswitch(blob[blob.l]) {\n\t\t\t\t\tcase 0x41 /*VT_BLOB*/: blob.l += 4; val = parse_BLOB(blob); break;\n\t\t\t\t\tcase 0x1E /*VT_LPSTR*/: blob.l += 4; val = parse_VtString(blob, blob[blob.l-4]).replace(/\\u0000+$/,\"\"); break;\n\t\t\t\t\tcase 0x1F /*VT_LPWSTR*/: blob.l += 4; val = parse_VtString(blob, blob[blob.l-4]).replace(/\\u0000+$/,\"\"); break;\n\t\t\t\t\tcase 0x03 /*VT_I4*/: blob.l += 4; val = blob.read_shift(4, 'i'); break;\n\t\t\t\t\tcase 0x13 /*VT_UI4*/: blob.l += 4; val = blob.read_shift(4); break;\n\t\t\t\t\tcase 0x05 /*VT_R8*/: blob.l += 4; val = blob.read_shift(8, 'f'); break;\n\t\t\t\t\tcase 0x0B /*VT_BOOL*/: blob.l += 4; val = parsebool(blob, 4); break;\n\t\t\t\t\tcase 0x40 /*VT_FILETIME*/: blob.l += 4; val = parseDate(parse_FILETIME(blob)); break;\n\t\t\t\t\tdefault: throw new Error(\"unparsed value: \" + blob[blob.l]);\n\t\t\t\t}\n\t\t\t\tPropH[name] = val;\n\t\t\t}\n\t\t}\n\t}\n\tblob.l = start_addr + size; /* step ahead to skip padding */\n\treturn PropH;\n}\nvar XLSPSSkip = [ \"CodePage\", \"Thumbnail\", \"_PID_LINKBASE\", \"_PID_HLINKS\", \"SystemIdentifier\", \"FMTID\" ]; //.concat(PseudoPropsPairs);\nfunction guess_property_type(val/*:any*/)/*:number*/ {\n\tswitch(typeof val) {\n\t\tcase \"boolean\": return 0x0B;\n\t\tcase \"number\": return ((val|0)==val) ? 0x03 : 0x05;\n\t\tcase \"string\": return 0x1F;\n\t\tcase \"object\": if(val instanceof Date) return 0x40; break;\n\t}\n\treturn -1;\n}\nfunction write_PropertySet(entries, RE, PIDSI) {\n\tvar hdr = new_buf(8), piao = [], prop = [];\n\tvar sz = 8, i = 0;\n\n\tvar pr = new_buf(8), pio = new_buf(8);\n\tpr.write_shift(4, 0x0002);\n\tpr.write_shift(4, 0x04B0);\n\tpio.write_shift(4, 0x0001);\n\tprop.push(pr); piao.push(pio);\n\tsz += 8 + pr.length;\n\n\tif(!RE) {\n\t\tpio = new_buf(8);\n\t\tpio.write_shift(4, 0);\n\t\tpiao.unshift(pio);\n\n\t\tvar bufs = [new_buf(4)];\n\t\tbufs[0].write_shift(4, entries.length);\n\t\tfor(i = 0; i < entries.length; ++i) {\n\t\t\tvar value = entries[i][0];\n\t\t\tpr = new_buf(4 + 4 + 2 * (value.length + 1) + (value.length % 2 ? 0 : 2));\n\t\t\tpr.write_shift(4, i+2);\n\t\t\tpr.write_shift(4, value.length + 1);\n\t\t\tpr.write_shift(0, value, \"dbcs\");\n\t\t\twhile(pr.l != pr.length) pr.write_shift(1, 0);\n\t\t\tbufs.push(pr);\n\t\t}\n\t\tpr = bconcat(bufs);\n\t\tprop.unshift(pr);\n\t\tsz += 8 + pr.length;\n\t}\n\n\tfor(i = 0; i < entries.length; ++i) {\n\t\tif(RE && !RE[entries[i][0]]) continue;\n\t\tif(XLSPSSkip.indexOf(entries[i][0]) > -1 || PseudoPropsPairs.indexOf(entries[i][0]) > -1) continue;\n\t\tif(entries[i][1] == null) continue;\n\n\t\tvar val = entries[i][1], idx = 0;\n\t\tif(RE) {\n\t\t\tidx = +RE[entries[i][0]];\n\t\t\tvar pinfo = (PIDSI/*:: || {}*/)[idx]/*:: || {} */;\n\t\t\tif(pinfo.p == \"version\" && typeof val == \"string\") {\n\t\t\t\t/*:: if(typeof val !== \"string\") throw \"unreachable\"; */\n\t\t\t\tvar arr = val.split(\".\");\n\t\t\t\tval = ((+arr[0])<<16) + ((+arr[1])||0);\n\t\t\t}\n\t\t\tpr = write_TypedPropertyValue(pinfo.t, val);\n\t\t} else {\n\t\t\tvar T = guess_property_type(val);\n\t\t\tif(T == -1) { T = 0x1F; val = String(val); }\n\t\t\tpr = write_TypedPropertyValue(T, val);\n\t\t}\n\t\tprop.push(pr);\n\n\t\tpio = new_buf(8);\n\t\tpio.write_shift(4, !RE ? 2+i : idx);\n\t\tpiao.push(pio);\n\n\t\tsz += 8 + pr.length;\n\t}\n\n\tvar w = 8 * (prop.length + 1);\n\tfor(i = 0; i < prop.length; ++i) { piao[i].write_shift(4, w); w += prop[i].length; }\n\thdr.write_shift(4, sz);\n\thdr.write_shift(4, prop.length);\n\treturn bconcat([hdr].concat(piao).concat(prop));\n}\n\n/* [MS-OLEPS] 2.21 PropertySetStream */\nfunction parse_PropertySetStream(file, PIDSI, clsid) {\n\tvar blob = file.content;\n\tif(!blob) return ({}/*:any*/);\n\tprep_blob(blob, 0);\n\n\tvar NumSets, FMTID0, FMTID1, Offset0, Offset1 = 0;\n\tblob.chk('feff', 'Byte Order: ');\n\n\t/*var vers = */blob.read_shift(2); // TODO: check version\n\tvar SystemIdentifier = blob.read_shift(4);\n\tvar CLSID = blob.read_shift(16);\n\tif(CLSID !== CFB.utils.consts.HEADER_CLSID && CLSID !== clsid) throw new Error(\"Bad PropertySet CLSID \" + CLSID);\n\tNumSets = blob.read_shift(4);\n\tif(NumSets !== 1 && NumSets !== 2) throw new Error(\"Unrecognized #Sets: \" + NumSets);\n\tFMTID0 = blob.read_shift(16); Offset0 = blob.read_shift(4);\n\n\tif(NumSets === 1 && Offset0 !== blob.l) throw new Error(\"Length mismatch: \" + Offset0 + \" !== \" + blob.l);\n\telse if(NumSets === 2) { FMTID1 = blob.read_shift(16); Offset1 = blob.read_shift(4); }\n\tvar PSet0 = parse_PropertySet(blob, PIDSI);\n\n\tvar rval = ({ SystemIdentifier: SystemIdentifier }/*:any*/);\n\tfor(var y in PSet0) rval[y] = PSet0[y];\n\t//rval.blob = blob;\n\trval.FMTID = FMTID0;\n\t//rval.PSet0 = PSet0;\n\tif(NumSets === 1) return rval;\n\tif(Offset1 - blob.l == 2) blob.l += 2;\n\tif(blob.l !== Offset1) throw new Error(\"Length mismatch 2: \" + blob.l + \" !== \" + Offset1);\n\tvar PSet1;\n\ttry { PSet1 = parse_PropertySet(blob, null); } catch(e) {/* empty */}\n\tfor(y in PSet1) rval[y] = PSet1[y];\n\trval.FMTID = [FMTID0, FMTID1]; // TODO: verify FMTID0/1\n\treturn rval;\n}\nfunction write_PropertySetStream(entries, clsid, RE, PIDSI/*:{[key:string|number]:any}*/, entries2/*:?any*/, clsid2/*:?any*/) {\n\tvar hdr = new_buf(entries2 ? 68 : 48);\n\tvar bufs = [hdr];\n\thdr.write_shift(2, 0xFFFE);\n\thdr.write_shift(2, 0x0000); /* TODO: type 1 props */\n\thdr.write_shift(4, 0x32363237);\n\thdr.write_shift(16, CFB.utils.consts.HEADER_CLSID, \"hex\");\n\thdr.write_shift(4, (entries2 ? 2 : 1));\n\thdr.write_shift(16, clsid, \"hex\");\n\thdr.write_shift(4, (entries2 ? 68 : 48));\n\tvar ps0 = write_PropertySet(entries, RE, PIDSI);\n\tbufs.push(ps0);\n\n\tif(entries2) {\n\t\tvar ps1 = write_PropertySet(entries2, null, null);\n\t\thdr.write_shift(16, clsid2, \"hex\");\n\t\thdr.write_shift(4, 68 + ps0.length);\n\t\tbufs.push(ps1);\n\t}\n\treturn bconcat(bufs);\n}\n\nfunction parsenoop2(blob, length) { blob.read_shift(length); return null; }\nfunction writezeroes(n, o) { if(!o) o=new_buf(n); for(var j=0; j<n; ++j) o.write_shift(1, 0); return o; }\n\nfunction parslurp(blob, length, cb) {\n\tvar arr = [], target = blob.l + length;\n\twhile(blob.l < target) arr.push(cb(blob, target - blob.l));\n\tif(target !== blob.l) throw new Error(\"Slurp error\");\n\treturn arr;\n}\n\nfunction parsebool(blob, length/*:number*/) { return blob.read_shift(length) === 0x1; }\nfunction writebool(v/*:any*/, o) { if(!o) o=new_buf(2); o.write_shift(2, +!!v); return o; }\n\nfunction parseuint16(blob/*::, length:?number, opts:?any*/) { return blob.read_shift(2, 'u'); }\nfunction writeuint16(v/*:number*/, o) { if(!o) o=new_buf(2); o.write_shift(2, v); return o; }\nfunction parseuint16a(blob, length/*:: :?number, opts:?any*/) { return parslurp(blob,length,parseuint16);}\n\n/* --- 2.5 Structures --- */\n\n/* [MS-XLS] 2.5.10 Bes (boolean or error) */\nfunction parse_Bes(blob/*::, length*/) {\n\tvar v = blob.read_shift(1), t = blob.read_shift(1);\n\treturn t === 0x01 ? v : v === 0x01;\n}\nfunction write_Bes(v, t/*:string*/, o) {\n\tif(!o) o = new_buf(2);\n\to.write_shift(1, ((t == 'e') ? +v : +!!v));\n\to.write_shift(1, ((t == 'e') ? 1 : 0));\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.240 ShortXLUnicodeString */\nfunction parse_ShortXLUnicodeString(blob, length, opts) {\n\tvar cch = blob.read_shift(opts && opts.biff >= 12 ? 2 : 1);\n\tvar encoding = 'sbcs-cont';\n\tvar cp = current_codepage;\n\tif(opts && opts.biff >= 8) current_codepage = 1200;\n\tif(!opts || opts.biff == 8 ) {\n\t\tvar fHighByte = blob.read_shift(1);\n\t\tif(fHighByte) { encoding = 'dbcs-cont'; }\n\t} else if(opts.biff == 12) {\n\t\tencoding = 'wstr';\n\t}\n\tif(opts.biff >= 2 && opts.biff <= 5) encoding = 'cpstr';\n\tvar o = cch ? blob.read_shift(cch, encoding) : \"\";\n\tcurrent_codepage = cp;\n\treturn o;\n}\n\n/* 2.5.293 XLUnicodeRichExtendedString */\nfunction parse_XLUnicodeRichExtendedString(blob) {\n\tvar cp = current_codepage;\n\tcurrent_codepage = 1200;\n\tvar cch = blob.read_shift(2), flags = blob.read_shift(1);\n\tvar /*fHighByte = flags & 0x1,*/ fExtSt = flags & 0x4, fRichSt = flags & 0x8;\n\tvar width = 1 + (flags & 0x1); // 0x0 -> utf8, 0x1 -> dbcs\n\tvar cRun = 0, cbExtRst;\n\tvar z = {};\n\tif(fRichSt) cRun = blob.read_shift(2);\n\tif(fExtSt) cbExtRst = blob.read_shift(4);\n\tvar encoding = width == 2 ? 'dbcs-cont' : 'sbcs-cont';\n\tvar msg = cch === 0 ? \"\" : blob.read_shift(cch, encoding);\n\tif(fRichSt) blob.l += 4 * cRun; //TODO: parse this\n\tif(fExtSt) blob.l += cbExtRst; //TODO: parse this\n\tz.t = msg;\n\tif(!fRichSt) { z.raw = \"<t>\" + z.t + \"</t>\"; z.r = z.t; }\n\tcurrent_codepage = cp;\n\treturn z;\n}\nfunction write_XLUnicodeRichExtendedString(xlstr/*:: :XLString, opts*/) {\n\tvar str = (xlstr.t||\"\"), nfmts = 1;\n\n\tvar hdr = new_buf(3 + (nfmts > 1 ? 2 : 0));\n\thdr.write_shift(2, str.length);\n\thdr.write_shift(1, (nfmts > 1 ? 0x08 : 0x00) | 0x01);\n\tif(nfmts > 1) hdr.write_shift(2, nfmts);\n\n\tvar otext = new_buf(2 * str.length);\n\totext.write_shift(2 * str.length, str, 'utf16le');\n\n\tvar out = [hdr, otext];\n\n\treturn bconcat(out);\n}\n\n/* 2.5.296 XLUnicodeStringNoCch */\nfunction parse_XLUnicodeStringNoCch(blob, cch, opts) {\n\tvar retval;\n\tif(opts) {\n\t\tif(opts.biff >= 2 && opts.biff <= 5) return blob.read_shift(cch, 'cpstr');\n\t\tif(opts.biff >= 12) return blob.read_shift(cch, 'dbcs-cont');\n\t}\n\tvar fHighByte = blob.read_shift(1);\n\tif(fHighByte===0) { retval = blob.read_shift(cch, 'sbcs-cont'); }\n\telse { retval = blob.read_shift(cch, 'dbcs-cont'); }\n\treturn retval;\n}\n\n/* 2.5.294 XLUnicodeString */\nfunction parse_XLUnicodeString(blob, length, opts) {\n\tvar cch = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);\n\tif(cch === 0) { blob.l++; return \"\"; }\n\treturn parse_XLUnicodeStringNoCch(blob, cch, opts);\n}\n/* BIFF5 override */\nfunction parse_XLUnicodeString2(blob, length, opts) {\n\tif(opts.biff > 5) return parse_XLUnicodeString(blob, length, opts);\n\tvar cch = blob.read_shift(1);\n\tif(cch === 0) { blob.l++; return \"\"; }\n\treturn blob.read_shift(cch, (opts.biff <= 4 || !blob.lens ) ? 'cpstr' : 'sbcs-cont');\n}\n/* TODO: BIFF5 and lower, codepage awareness */\nfunction write_XLUnicodeString(str, opts, o) {\n\tif(!o) o = new_buf(3 + 2 * str.length);\n\to.write_shift(2, str.length);\n\to.write_shift(1, 1);\n\to.write_shift(31, str, 'utf16le');\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.61 ControlInfo */\nfunction parse_ControlInfo(blob/*::, length, opts*/) {\n\tvar flags = blob.read_shift(1);\n\tblob.l++;\n\tvar accel = blob.read_shift(2);\n\tblob.l += 2;\n\treturn [flags, accel];\n}\n\n/* [MS-OSHARED] 2.3.7.6 URLMoniker TODO: flags */\nfunction parse_URLMoniker(blob/*::, length, opts*/) {\n\tvar len = blob.read_shift(4), start = blob.l;\n\tvar extra = false;\n\tif(len > 24) {\n\t\t/* look ahead */\n\t\tblob.l += len - 24;\n\t\tif(blob.read_shift(16) === \"795881f43b1d7f48af2c825dc4852763\") extra = true;\n\t\tblob.l = start;\n\t}\n\tvar url = blob.read_shift((extra?len-24:len)>>1, 'utf16le').replace(chr0,\"\");\n\tif(extra) blob.l += 24;\n\treturn url;\n}\n\n/* [MS-OSHARED] 2.3.7.8 FileMoniker TODO: all fields */\nfunction parse_FileMoniker(blob/*::, length*/) {\n\tvar cAnti = blob.read_shift(2);\n\tvar preamble = \"\"; while(cAnti-- > 0) preamble += \"../\";\n\tvar ansiPath = blob.read_shift(0, 'lpstr-ansi');\n\tblob.l += 2; //var endServer = blob.read_shift(2);\n\tif(blob.read_shift(2) != 0xDEAD) throw new Error(\"Bad FileMoniker\");\n\tvar sz = blob.read_shift(4);\n\tif(sz === 0) return preamble + ansiPath.replace(/\\\\/g,\"/\");\n\tvar bytes = blob.read_shift(4);\n\tif(blob.read_shift(2) != 3) throw new Error(\"Bad FileMoniker\");\n\tvar unicodePath = blob.read_shift(bytes>>1, 'utf16le').replace(chr0,\"\");\n\treturn preamble + unicodePath;\n}\n\n/* [MS-OSHARED] 2.3.7.2 HyperlinkMoniker TODO: all the monikers */\nfunction parse_HyperlinkMoniker(blob, length) {\n\tvar clsid = blob.read_shift(16); length -= 16;\n\tswitch(clsid) {\n\t\tcase \"e0c9ea79f9bace118c8200aa004ba90b\": return parse_URLMoniker(blob, length);\n\t\tcase \"0303000000000000c000000000000046\": return parse_FileMoniker(blob, length);\n\t\tdefault: throw new Error(\"Unsupported Moniker \" + clsid);\n\t}\n}\n\n/* [MS-OSHARED] 2.3.7.9 HyperlinkString */\nfunction parse_HyperlinkString(blob/*::, length*/) {\n\tvar len = blob.read_shift(4);\n\tvar o = len > 0 ? blob.read_shift(len, 'utf16le').replace(chr0, \"\") : \"\";\n\treturn o;\n}\nfunction write_HyperlinkString(str/*:string*/, o) {\n\tif(!o) o = new_buf(6 + str.length * 2);\n\to.write_shift(4, 1 + str.length);\n\tfor(var i = 0; i < str.length; ++i) o.write_shift(2, str.charCodeAt(i));\n\to.write_shift(2, 0);\n\treturn o;\n}\n\n/* [MS-OSHARED] 2.3.7.1 Hyperlink Object */\nfunction parse_Hyperlink(blob, length)/*:Hyperlink*/ {\n\tvar end = blob.l + length;\n\tvar sVer = blob.read_shift(4);\n\tif(sVer !== 2) throw new Error(\"Unrecognized streamVersion: \" + sVer);\n\tvar flags = blob.read_shift(2);\n\tblob.l += 2;\n\tvar displayName, targetFrameName, moniker, oleMoniker, Loc=\"\", guid, fileTime;\n\tif(flags & 0x0010) displayName = parse_HyperlinkString(blob, end - blob.l);\n\tif(flags & 0x0080) targetFrameName = parse_HyperlinkString(blob, end - blob.l);\n\tif((flags & 0x0101) === 0x0101) moniker = parse_HyperlinkString(blob, end - blob.l);\n\tif((flags & 0x0101) === 0x0001) oleMoniker = parse_HyperlinkMoniker(blob, end - blob.l);\n\tif(flags & 0x0008) Loc = parse_HyperlinkString(blob, end - blob.l);\n\tif(flags & 0x0020) guid = blob.read_shift(16);\n\tif(flags & 0x0040) fileTime = parse_FILETIME(blob/*, 8*/);\n\tblob.l = end;\n\tvar target = targetFrameName||moniker||oleMoniker||\"\";\n\tif(target && Loc) target+=\"#\"+Loc;\n\tif(!target) target = \"#\" + Loc;\n\tif((flags & 0x0002) && target.charAt(0) == \"/\" && target.charAt(1) != \"/\") target = \"file://\" + target;\n\tvar out = ({Target:target}/*:any*/);\n\tif(guid) out.guid = guid;\n\tif(fileTime) out.time = fileTime;\n\tif(displayName) out.Tooltip = displayName;\n\treturn out;\n}\nfunction write_Hyperlink(hl) {\n\tvar out = new_buf(512), i = 0;\n\tvar Target = hl.Target;\n\tif(Target.slice(0,7) == \"file://\") Target = Target.slice(7);\n\tvar hashidx = Target.indexOf(\"#\");\n\tvar F = hashidx > -1 ? 0x1f : 0x17;\n\tswitch(Target.charAt(0)) { case \"#\": F=0x1c; break; case \".\": F&=~2; break; }\n\tout.write_shift(4,2); out.write_shift(4, F);\n\tvar data = [8,6815827,6619237,4849780,83]; for(i = 0; i < data.length; ++i) out.write_shift(4, data[i]);\n\tif(F == 0x1C) {\n\t\tTarget = Target.slice(1);\n\t\twrite_HyperlinkString(Target, out);\n\t} else if(F & 0x02) {\n\t\tdata = \"e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b\".split(\" \");\n\t\tfor(i = 0; i < data.length; ++i) out.write_shift(1, parseInt(data[i], 16));\n\t\tvar Pretarget = hashidx > -1 ? Target.slice(0, hashidx) : Target;\n\t\tout.write_shift(4, 2*(Pretarget.length + 1));\n\t\tfor(i = 0; i < Pretarget.length; ++i) out.write_shift(2, Pretarget.charCodeAt(i));\n\t\tout.write_shift(2, 0);\n\t\tif(F & 0x08) write_HyperlinkString(hashidx > -1 ? Target.slice(hashidx+1): \"\", out);\n\t} else {\n\t\tdata = \"03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46\".split(\" \");\n\t\tfor(i = 0; i < data.length; ++i) out.write_shift(1, parseInt(data[i], 16));\n\t\tvar P = 0;\n\t\twhile(Target.slice(P*3,P*3+3)==\"../\"||Target.slice(P*3,P*3+3)==\"..\\\\\") ++P;\n\t\tout.write_shift(2, P);\n\t\tout.write_shift(4, Target.length - 3 * P + 1);\n\t\tfor(i = 0; i < Target.length - 3 * P; ++i) out.write_shift(1, Target.charCodeAt(i + 3 * P) & 0xFF);\n\t\tout.write_shift(1, 0);\n\t\tout.write_shift(2, 0xFFFF);\n\t\tout.write_shift(2, 0xDEAD);\n\t\tfor(i = 0; i < 6; ++i) out.write_shift(4, 0);\n\t}\n\treturn out.slice(0, out.l);\n}\n\n/* 2.5.178 LongRGBA */\nfunction parse_LongRGBA(blob/*::, length*/) { var r = blob.read_shift(1), g = blob.read_shift(1), b = blob.read_shift(1), a = blob.read_shift(1); return [r,g,b,a]; }\n\n/* 2.5.177 LongRGB */\nfunction parse_LongRGB(blob, length) { var x = parse_LongRGBA(blob, length); x[3] = 0; return x; }\n\n\n/* [MS-XLS] 2.5.19 */\nfunction parse_XLSCell(blob/*::, length*/)/*:Cell*/ {\n\tvar rw = blob.read_shift(2); // 0-indexed\n\tvar col = blob.read_shift(2);\n\tvar ixfe = blob.read_shift(2);\n\treturn ({r:rw, c:col, ixfe:ixfe}/*:any*/);\n}\nfunction write_XLSCell(R/*:number*/, C/*:number*/, ixfe/*:?number*/, o) {\n\tif(!o) o = new_buf(6);\n\to.write_shift(2, R);\n\to.write_shift(2, C);\n\to.write_shift(2, ixfe||0);\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.134 */\nfunction parse_frtHeader(blob) {\n\tvar rt = blob.read_shift(2);\n\tvar flags = blob.read_shift(2); // TODO: parse these flags\n\tblob.l += 8;\n\treturn {type: rt, flags: flags};\n}\n\n\n\nfunction parse_OptXLUnicodeString(blob, length, opts) { return length === 0 ? \"\" : parse_XLUnicodeString2(blob, length, opts); }\n\n/* [MS-XLS] 2.5.344 */\nfunction parse_XTI(blob, length, opts) {\n\tvar w = opts.biff > 8 ? 4 : 2;\n\tvar iSupBook = blob.read_shift(w), itabFirst = blob.read_shift(w,'i'), itabLast = blob.read_shift(w,'i');\n\treturn [iSupBook, itabFirst, itabLast];\n}\n\n/* [MS-XLS] 2.5.218 */\nfunction parse_RkRec(blob) {\n\tvar ixfe = blob.read_shift(2);\n\tvar RK = parse_RkNumber(blob);\n\treturn [ixfe, RK];\n}\n\n/* [MS-XLS] 2.5.1 */\nfunction parse_AddinUdf(blob, length, opts) {\n\tblob.l += 4; length -= 4;\n\tvar l = blob.l + length;\n\tvar udfName = parse_ShortXLUnicodeString(blob, length, opts);\n\tvar cb = blob.read_shift(2);\n\tl -= blob.l;\n\tif(cb !== l) throw new Error(\"Malformed AddinUdf: padding = \" + l + \" != \" + cb);\n\tblob.l += cb;\n\treturn udfName;\n}\n\n/* [MS-XLS] 2.5.209 TODO: Check sizes */\nfunction parse_Ref8U(blob/*::, length*/) {\n\tvar rwFirst = blob.read_shift(2);\n\tvar rwLast = blob.read_shift(2);\n\tvar colFirst = blob.read_shift(2);\n\tvar colLast = blob.read_shift(2);\n\treturn {s:{c:colFirst, r:rwFirst}, e:{c:colLast,r:rwLast}};\n}\nfunction write_Ref8U(r/*:Range*/, o) {\n\tif(!o) o = new_buf(8);\n\to.write_shift(2, r.s.r);\n\to.write_shift(2, r.e.r);\n\to.write_shift(2, r.s.c);\n\to.write_shift(2, r.e.c);\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.211 */\nfunction parse_RefU(blob/*::, length*/) {\n\tvar rwFirst = blob.read_shift(2);\n\tvar rwLast = blob.read_shift(2);\n\tvar colFirst = blob.read_shift(1);\n\tvar colLast = blob.read_shift(1);\n\treturn {s:{c:colFirst, r:rwFirst}, e:{c:colLast,r:rwLast}};\n}\n\n/* [MS-XLS] 2.5.207 */\nvar parse_Ref = parse_RefU;\n\n/* [MS-XLS] 2.5.143 */\nfunction parse_FtCmo(blob/*::, length*/) {\n\tblob.l += 4;\n\tvar ot = blob.read_shift(2);\n\tvar id = blob.read_shift(2);\n\tvar flags = blob.read_shift(2);\n\tblob.l+=12;\n\treturn [id, ot, flags];\n}\n\n/* [MS-XLS] 2.5.149 */\nfunction parse_FtNts(blob) {\n\tvar out = {};\n\tblob.l += 4;\n\tblob.l += 16; // GUID TODO\n\tout.fSharedNote = blob.read_shift(2);\n\tblob.l += 4;\n\treturn out;\n}\n\n/* [MS-XLS] 2.5.142 */\nfunction parse_FtCf(blob) {\n\tvar out = {};\n\tblob.l += 4;\n\tblob.cf = blob.read_shift(2);\n\treturn out;\n}\n\n/* [MS-XLS] 2.5.140 - 2.5.154 and friends */\nfunction parse_FtSkip(blob) { blob.l += 2; blob.l += blob.read_shift(2); }\nvar FtTab = {\n\t/*::[*/0x00/*::]*/: parse_FtSkip,      /* FtEnd */\n\t/*::[*/0x04/*::]*/: parse_FtSkip,      /* FtMacro */\n\t/*::[*/0x05/*::]*/: parse_FtSkip,      /* FtButton */\n\t/*::[*/0x06/*::]*/: parse_FtSkip,      /* FtGmo */\n\t/*::[*/0x07/*::]*/: parse_FtCf,        /* FtCf */\n\t/*::[*/0x08/*::]*/: parse_FtSkip,      /* FtPioGrbit */\n\t/*::[*/0x09/*::]*/: parse_FtSkip,      /* FtPictFmla */\n\t/*::[*/0x0A/*::]*/: parse_FtSkip,      /* FtCbls */\n\t/*::[*/0x0B/*::]*/: parse_FtSkip,      /* FtRbo */\n\t/*::[*/0x0C/*::]*/: parse_FtSkip,      /* FtSbs */\n\t/*::[*/0x0D/*::]*/: parse_FtNts,       /* FtNts */\n\t/*::[*/0x0E/*::]*/: parse_FtSkip,      /* FtSbsFmla */\n\t/*::[*/0x0F/*::]*/: parse_FtSkip,      /* FtGboData */\n\t/*::[*/0x10/*::]*/: parse_FtSkip,      /* FtEdoData */\n\t/*::[*/0x11/*::]*/: parse_FtSkip,      /* FtRboData */\n\t/*::[*/0x12/*::]*/: parse_FtSkip,      /* FtCblsData */\n\t/*::[*/0x13/*::]*/: parse_FtSkip,      /* FtLbsData */\n\t/*::[*/0x14/*::]*/: parse_FtSkip,      /* FtCblsFmla */\n\t/*::[*/0x15/*::]*/: parse_FtCmo\n};\nfunction parse_FtArray(blob, length/*::, ot*/) {\n\tvar tgt = blob.l + length;\n\tvar fts = [];\n\twhile(blob.l < tgt) {\n\t\tvar ft = blob.read_shift(2);\n\t\tblob.l-=2;\n\t\ttry {\n\t\t\tfts.push(FtTab[ft](blob, tgt - blob.l));\n\t\t} catch(e) { blob.l = tgt; return fts; }\n\t}\n\tif(blob.l != tgt) blob.l = tgt; //throw new Error(\"bad Object Ft-sequence\");\n\treturn fts;\n}\n\n/* --- 2.4 Records --- */\n\n/* [MS-XLS] 2.4.21 */\nfunction parse_BOF(blob, length) {\n\tvar o = {BIFFVer:0, dt:0};\n\to.BIFFVer = blob.read_shift(2); length -= 2;\n\tif(length >= 2) { o.dt = blob.read_shift(2); blob.l -= 2; }\n\tswitch(o.BIFFVer) {\n\t\tcase 0x0600: /* BIFF8 */\n\t\tcase 0x0500: /* BIFF5 */\n\t\tcase 0x0400: /* BIFF4 */\n\t\tcase 0x0300: /* BIFF3 */\n\t\tcase 0x0200: /* BIFF2 */\n\t\tcase 0x0002: case 0x0007: /* BIFF2 */\n\t\t\tbreak;\n\t\tdefault: if(length > 6) throw new Error(\"Unexpected BIFF Ver \" + o.BIFFVer);\n\t}\n\n\tblob.read_shift(length);\n\treturn o;\n}\nfunction write_BOF(wb/*:Workbook*/, t/*:number*/, o) {\n\tvar h = 0x0600, w = 16;\n\tswitch(o.bookType) {\n\t\tcase 'biff8': break;\n\t\tcase 'biff5': h = 0x0500; w = 8; break;\n\t\tcase 'biff4': h = 0x0004; w = 6; break;\n\t\tcase 'biff3': h = 0x0003; w = 6; break;\n\t\tcase 'biff2': h = 0x0002; w = 4; break;\n\t\tcase 'xla': break;\n\t\tdefault: throw new Error(\"unsupported BIFF version\");\n\t}\n\tvar out = new_buf(w);\n\tout.write_shift(2, h);\n\tout.write_shift(2, t);\n\tif(w > 4) out.write_shift(2, 0x7262);\n\tif(w > 6) out.write_shift(2, 0x07CD);\n\tif(w > 8) {\n\t\tout.write_shift(2, 0xC009);\n\t\tout.write_shift(2, 0x0001);\n\t\tout.write_shift(2, 0x0706);\n\t\tout.write_shift(2, 0x0000);\n\t}\n\treturn out;\n}\n\n\n/* [MS-XLS] 2.4.146 */\nfunction parse_InterfaceHdr(blob, length) {\n\tif(length === 0) return 0x04b0;\n\tif((blob.read_shift(2))!==0x04b0){/* empty */}\n\treturn 0x04b0;\n}\n\n\n/* [MS-XLS] 2.4.349 */\nfunction parse_WriteAccess(blob, length, opts) {\n\tif(opts.enc) { blob.l += length; return \"\"; }\n\tvar l = blob.l;\n\t// TODO: make sure XLUnicodeString doesnt overrun\n\tvar UserName = parse_XLUnicodeString2(blob, 0, opts);\n\tblob.read_shift(length + l - blob.l);\n\treturn UserName;\n}\nfunction write_WriteAccess(s/*:string*/, opts) {\n\tvar b8 = !opts || opts.biff == 8;\n\tvar o = new_buf(b8 ? 112 : 54);\n\to.write_shift(opts.biff == 8 ? 2 : 1, 7);\n\tif(b8) o.write_shift(1, 0);\n\to.write_shift(4, 0x33336853);\n\to.write_shift(4, (0x00534A74 | (b8 ? 0 : 0x20000000)));\n\twhile(o.l < o.length) o.write_shift(1, (b8 ? 0 : 32));\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.351 */\nfunction parse_WsBool(blob, length, opts) {\n\tvar flags = opts && opts.biff == 8 || length == 2 ? blob.read_shift(2) : (blob.l += length, 0);\n\treturn { fDialog: flags & 0x10, fBelow: flags & 0x40, fRight: flags & 0x80 };\n}\n\n/* [MS-XLS] 2.4.28 */\nfunction parse_BoundSheet8(blob, length, opts) {\n\tvar pos = blob.read_shift(4);\n\tvar hidden = blob.read_shift(1) & 0x03;\n\tvar dt = blob.read_shift(1);\n\tswitch(dt) {\n\t\tcase 0: dt = 'Worksheet'; break;\n\t\tcase 1: dt = 'Macrosheet'; break;\n\t\tcase 2: dt = 'Chartsheet'; break;\n\t\tcase 6: dt = 'VBAModule'; break;\n\t}\n\tvar name = parse_ShortXLUnicodeString(blob, 0, opts);\n\tif(name.length === 0) name = \"Sheet1\";\n\treturn { pos:pos, hs:hidden, dt:dt, name:name };\n}\nfunction write_BoundSheet8(data, opts) {\n\tvar w = (!opts || opts.biff >= 8 ? 2 : 1);\n\tvar o = new_buf(8 + w * data.name.length);\n\to.write_shift(4, data.pos);\n\to.write_shift(1, data.hs || 0);\n\to.write_shift(1, data.dt);\n\to.write_shift(1, data.name.length);\n\tif(opts.biff >= 8) o.write_shift(1, 1);\n\to.write_shift(w * data.name.length, data.name, opts.biff < 8 ? 'sbcs' : 'utf16le');\n\tvar out = o.slice(0, o.l);\n\tout.l = o.l; return out;\n}\n\n/* [MS-XLS] 2.4.265 TODO */\nfunction parse_SST(blob, length)/*:SST*/ {\n\tvar end = blob.l + length;\n\tvar cnt = blob.read_shift(4);\n\tvar ucnt = blob.read_shift(4);\n\tvar strs/*:SST*/ = ([]/*:any*/);\n\tfor(var i = 0; i != ucnt && blob.l < end; ++i) {\n\t\tstrs.push(parse_XLUnicodeRichExtendedString(blob));\n\t}\n\tstrs.Count = cnt; strs.Unique = ucnt;\n\treturn strs;\n}\nfunction write_SST(sst, opts) {\n\tvar header = new_buf(8);\n\theader.write_shift(4, sst.Count);\n\theader.write_shift(4, sst.Unique);\n\tvar strs = [];\n\tfor(var j = 0; j < sst.length; ++j) strs[j] = write_XLUnicodeRichExtendedString(sst[j], opts);\n\tvar o = bconcat([header].concat(strs));\n\t/*::(*/o/*:: :any)*/.parts = [header.length].concat(strs.map(function(str) { return str.length; }));\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.107 */\nfunction parse_ExtSST(blob, length) {\n\tvar extsst = {};\n\textsst.dsst = blob.read_shift(2);\n\tblob.l += length-2;\n\treturn extsst;\n}\n\n\n/* [MS-XLS] 2.4.221 TODO: check BIFF2-4 */\nfunction parse_Row(blob) {\n\tvar z = ({}/*:any*/);\n\tz.r = blob.read_shift(2);\n\tz.c = blob.read_shift(2);\n\tz.cnt = blob.read_shift(2) - z.c;\n\tvar miyRw = blob.read_shift(2);\n\tblob.l += 4; // reserved(2), unused(2)\n\tvar flags = blob.read_shift(1); // various flags\n\tblob.l += 3; // reserved(8), ixfe(12), flags(4)\n\tif(flags & 0x07) z.level = flags & 0x07;\n\t// collapsed: flags & 0x10\n\tif(flags & 0x20) z.hidden = true;\n\tif(flags & 0x40) z.hpt = miyRw / 20;\n\treturn z;\n}\n\n\n/* [MS-XLS] 2.4.125 */\nfunction parse_ForceFullCalculation(blob) {\n\tvar header = parse_frtHeader(blob);\n\tif(header.type != 0x08A3) throw new Error(\"Invalid Future Record \" + header.type);\n\tvar fullcalc = blob.read_shift(4);\n\treturn fullcalc !== 0x0;\n}\n\n\n\n\n\n/* [MS-XLS] 2.4.215 rt */\nfunction parse_RecalcId(blob) {\n\tblob.read_shift(2);\n\treturn blob.read_shift(4);\n}\n\n/* [MS-XLS] 2.4.87 */\nfunction parse_DefaultRowHeight(blob, length, opts) {\n\tvar f = 0;\n\tif(!(opts && opts.biff == 2)) {\n\t\tf = blob.read_shift(2);\n\t}\n\tvar miyRw = blob.read_shift(2);\n\tif((opts && opts.biff == 2)) {\n\t\tf = 1 - (miyRw >> 15); miyRw &= 0x7fff;\n\t}\n\tvar fl = {Unsynced:f&1,DyZero:(f&2)>>1,ExAsc:(f&4)>>2,ExDsc:(f&8)>>3};\n\treturn [fl, miyRw];\n}\n\n/* [MS-XLS] 2.4.345 TODO */\nfunction parse_Window1(blob) {\n\tvar xWn = blob.read_shift(2), yWn = blob.read_shift(2), dxWn = blob.read_shift(2), dyWn = blob.read_shift(2);\n\tvar flags = blob.read_shift(2), iTabCur = blob.read_shift(2), iTabFirst = blob.read_shift(2);\n\tvar ctabSel = blob.read_shift(2), wTabRatio = blob.read_shift(2);\n\treturn { Pos: [xWn, yWn], Dim: [dxWn, dyWn], Flags: flags, CurTab: iTabCur,\n\t\tFirstTab: iTabFirst, Selected: ctabSel, TabRatio: wTabRatio };\n}\nfunction write_Window1(/*::opts*/) {\n\tvar o = new_buf(18);\n\to.write_shift(2, 0);\n\to.write_shift(2, 0);\n\to.write_shift(2, 0x7260);\n\to.write_shift(2, 0x44c0);\n\to.write_shift(2, 0x38);\n\to.write_shift(2, 0);\n\to.write_shift(2, 0);\n\to.write_shift(2, 1);\n\to.write_shift(2, 0x01f4);\n\treturn o;\n}\n/* [MS-XLS] 2.4.346 TODO */\nfunction parse_Window2(blob, length, opts) {\n\tif(opts && opts.biff >= 2 && opts.biff < 5) return {};\n\tvar f = blob.read_shift(2);\n\treturn { RTL: f & 0x40 };\n}\nfunction write_Window2(view) {\n\tvar o = new_buf(18), f = 0x6b6;\n\tif(view && view.RTL) f |= 0x40;\n\to.write_shift(2, f);\n\to.write_shift(4, 0);\n\to.write_shift(4, 64);\n\to.write_shift(4, 0);\n\to.write_shift(4, 0);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.189 TODO */\nfunction parse_Pane(/*blob, length, opts*/) {\n}\n\n/* [MS-XLS] 2.4.122 TODO */\nfunction parse_Font(blob, length, opts) {\n\tvar o/*:any*/ = {\n\t\tdyHeight: blob.read_shift(2),\n\t\tfl: blob.read_shift(2)\n\t};\n\tswitch((opts && opts.biff) || 8) {\n\t\tcase 2: break;\n\t\tcase 3: case 4: blob.l += 2; break;\n\t\tdefault: blob.l += 10; break;\n\t}\n\to.name = parse_ShortXLUnicodeString(blob, 0, opts);\n\treturn o;\n}\nfunction write_Font(data, opts) {\n\tvar name = data.name || \"Arial\";\n\tvar b5 = (opts && (opts.biff == 5)), w = (b5 ? (15 + name.length) : (16 + 2 * name.length));\n\tvar o = new_buf(w);\n\to.write_shift(2, (data.sz || 12) * 20);\n\to.write_shift(4, 0);\n\to.write_shift(2, 400);\n\to.write_shift(4, 0);\n\to.write_shift(2, 0);\n\to.write_shift(1, name.length);\n\tif(!b5) o.write_shift(1, 1);\n\to.write_shift((b5 ? 1 : 2) * name.length, name, (b5 ? \"sbcs\" : \"utf16le\"));\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.149 */\nfunction parse_LabelSst(blob) {\n\tvar cell = parse_XLSCell(blob);\n\tcell.isst = blob.read_shift(4);\n\treturn cell;\n}\nfunction write_LabelSst(R/*:number*/, C/*:number*/, v/*:number*/, os/*:number*/ /*::, opts*/) {\n\tvar o = new_buf(10);\n\twrite_XLSCell(R, C, os, o);\n\to.write_shift(4, v);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.148 */\nfunction parse_Label(blob, length, opts) {\n\tif(opts.biffguess && opts.biff == 2) opts.biff = 5;\n\tvar target = blob.l + length;\n\tvar cell = parse_XLSCell(blob, 6);\n\tif(opts.biff == 2) blob.l++;\n\tvar str = parse_XLUnicodeString(blob, target - blob.l, opts);\n\tcell.val = str;\n\treturn cell;\n}\nfunction write_Label(R/*:number*/, C/*:number*/, v/*:string*/, os/*:number*/, opts) {\n\tvar b8 = !opts || opts.biff == 8;\n\tvar o = new_buf(6 + 2 + (+b8) + (1 + b8) * v.length);\n\twrite_XLSCell(R, C, os, o);\n\to.write_shift(2, v.length);\n\tif(b8) o.write_shift(1, 1);\n\to.write_shift((1 + b8) * v.length, v, b8 ? 'utf16le' : 'sbcs');\n\treturn o;\n}\n\n\n/* [MS-XLS] 2.4.126 Number Formats */\nfunction parse_Format(blob, length, opts) {\n\tvar numFmtId = blob.read_shift(2);\n\tvar fmtstr = parse_XLUnicodeString2(blob, 0, opts);\n\treturn [numFmtId, fmtstr];\n}\nfunction write_Format(i/*:number*/, f/*:string*/, opts, o) {\n\tvar b5 = (opts && (opts.biff == 5));\n\tif(!o) o = new_buf(b5 ? (3 + f.length) : (5 + 2 * f.length));\n\to.write_shift(2, i);\n\to.write_shift((b5 ? 1 : 2), f.length);\n\tif(!b5) o.write_shift(1, 1);\n\to.write_shift((b5 ? 1 : 2) * f.length, f, (b5 ? 'sbcs' : 'utf16le'));\n\tvar out = (o.length > o.l) ? o.slice(0, o.l) : o;\n\tif(out.l == null) out.l = out.length;\n\treturn out;\n}\nvar parse_BIFF2Format = parse_XLUnicodeString2;\n\n/* [MS-XLS] 2.4.90 */\nfunction parse_Dimensions(blob, length, opts) {\n\tvar end = blob.l + length;\n\tvar w = opts.biff == 8 || !opts.biff ? 4 : 2;\n\tvar r = blob.read_shift(w), R = blob.read_shift(w);\n\tvar c = blob.read_shift(2), C = blob.read_shift(2);\n\tblob.l = end;\n\treturn {s: {r:r, c:c}, e: {r:R, c:C}};\n}\nfunction write_Dimensions(range, opts) {\n\tvar w = opts.biff == 8 || !opts.biff ? 4 : 2;\n\tvar o = new_buf(2*w + 6);\n\to.write_shift(w, range.s.r);\n\to.write_shift(w, range.e.r + 1);\n\to.write_shift(2, range.s.c);\n\to.write_shift(2, range.e.c + 1);\n\to.write_shift(2, 0);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.220 */\nfunction parse_RK(blob) {\n\tvar rw = blob.read_shift(2), col = blob.read_shift(2);\n\tvar rkrec = parse_RkRec(blob);\n\treturn {r:rw, c:col, ixfe:rkrec[0], rknum:rkrec[1]};\n}\n\n/* [MS-XLS] 2.4.175 */\nfunction parse_MulRk(blob, length) {\n\tvar target = blob.l + length - 2;\n\tvar rw = blob.read_shift(2), col = blob.read_shift(2);\n\tvar rkrecs = [];\n\twhile(blob.l < target) rkrecs.push(parse_RkRec(blob));\n\tif(blob.l !== target) throw new Error(\"MulRK read error\");\n\tvar lastcol = blob.read_shift(2);\n\tif(rkrecs.length != lastcol - col + 1) throw new Error(\"MulRK length mismatch\");\n\treturn {r:rw, c:col, C:lastcol, rkrec:rkrecs};\n}\n/* [MS-XLS] 2.4.174 */\nfunction parse_MulBlank(blob, length) {\n\tvar target = blob.l + length - 2;\n\tvar rw = blob.read_shift(2), col = blob.read_shift(2);\n\tvar ixfes = [];\n\twhile(blob.l < target) ixfes.push(blob.read_shift(2));\n\tif(blob.l !== target) throw new Error(\"MulBlank read error\");\n\tvar lastcol = blob.read_shift(2);\n\tif(ixfes.length != lastcol - col + 1) throw new Error(\"MulBlank length mismatch\");\n\treturn {r:rw, c:col, C:lastcol, ixfe:ixfes};\n}\n\n/* [MS-XLS] 2.5.20 2.5.249 TODO: interpret values here */\nfunction parse_CellStyleXF(blob, length, style, opts) {\n\tvar o = {};\n\tvar a = blob.read_shift(4), b = blob.read_shift(4);\n\tvar c = blob.read_shift(4), d = blob.read_shift(2);\n\to.patternType = XLSFillPattern[c >> 26];\n\n\tif(!opts.cellStyles) return o;\n\to.alc = a & 0x07;\n\to.fWrap = (a >> 3) & 0x01;\n\to.alcV = (a >> 4) & 0x07;\n\to.fJustLast = (a >> 7) & 0x01;\n\to.trot = (a >> 8) & 0xFF;\n\to.cIndent = (a >> 16) & 0x0F;\n\to.fShrinkToFit = (a >> 20) & 0x01;\n\to.iReadOrder = (a >> 22) & 0x02;\n\to.fAtrNum = (a >> 26) & 0x01;\n\to.fAtrFnt = (a >> 27) & 0x01;\n\to.fAtrAlc = (a >> 28) & 0x01;\n\to.fAtrBdr = (a >> 29) & 0x01;\n\to.fAtrPat = (a >> 30) & 0x01;\n\to.fAtrProt = (a >> 31) & 0x01;\n\n\to.dgLeft = b & 0x0F;\n\to.dgRight = (b >> 4) & 0x0F;\n\to.dgTop = (b >> 8) & 0x0F;\n\to.dgBottom = (b >> 12) & 0x0F;\n\to.icvLeft = (b >> 16) & 0x7F;\n\to.icvRight = (b >> 23) & 0x7F;\n\to.grbitDiag = (b >> 30) & 0x03;\n\n\to.icvTop = c & 0x7F;\n\to.icvBottom = (c >> 7) & 0x7F;\n\to.icvDiag = (c >> 14) & 0x7F;\n\to.dgDiag = (c >> 21) & 0x0F;\n\n\to.icvFore = d & 0x7F;\n\to.icvBack = (d >> 7) & 0x7F;\n\to.fsxButton = (d >> 14) & 0x01;\n\treturn o;\n}\n//function parse_CellXF(blob, length, opts) {return parse_CellStyleXF(blob,length,0, opts);}\n//function parse_StyleXF(blob, length, opts) {return parse_CellStyleXF(blob,length,1, opts);}\n\n/* [MS-XLS] 2.4.353 TODO: actually do this right */\nfunction parse_XF(blob, length, opts) {\n\tvar o = {};\n\to.ifnt = blob.read_shift(2); o.numFmtId = blob.read_shift(2); o.flags = blob.read_shift(2);\n\to.fStyle = (o.flags >> 2) & 0x01;\n\tlength -= 6;\n\to.data = parse_CellStyleXF(blob, length, o.fStyle, opts);\n\treturn o;\n}\nfunction write_XF(data, ixfeP, opts, o) {\n\tvar b5 = (opts && (opts.biff == 5));\n\tif(!o) o = new_buf(b5 ? 16 : 20);\n\to.write_shift(2, 0);\n\tif(data.style) {\n\t\to.write_shift(2, (data.numFmtId||0));\n\t\to.write_shift(2, 0xFFF4);\n\t} else {\n\t\to.write_shift(2, (data.numFmtId||0));\n\t\to.write_shift(2, (ixfeP<<4));\n\t}\n\tvar f = 0;\n\tif(data.numFmtId > 0 && b5) f |= 0x0400;\n\to.write_shift(4, f);\n\to.write_shift(4, 0);\n\tif(!b5) o.write_shift(4, 0);\n\to.write_shift(2, 0);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.134 */\nfunction parse_Guts(blob) {\n\tblob.l += 4;\n\tvar out = [blob.read_shift(2), blob.read_shift(2)];\n\tif(out[0] !== 0) out[0]--;\n\tif(out[1] !== 0) out[1]--;\n\tif(out[0] > 7 || out[1] > 7) throw new Error(\"Bad Gutters: \" + out.join(\"|\"));\n\treturn out;\n}\nfunction write_Guts(guts/*:Array<number>*/) {\n\tvar o = new_buf(8);\n\to.write_shift(4, 0);\n\to.write_shift(2, guts[0] ? guts[0] + 1 : 0);\n\to.write_shift(2, guts[1] ? guts[1] + 1 : 0);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.24 */\nfunction parse_BoolErr(blob, length, opts) {\n\tvar cell = parse_XLSCell(blob, 6);\n\tif(opts.biff == 2 || length == 9) ++blob.l;\n\tvar val = parse_Bes(blob, 2);\n\tcell.val = val;\n\tcell.t = (val === true || val === false) ? 'b' : 'e';\n\treturn cell;\n}\nfunction write_BoolErr(R/*:number*/, C/*:number*/, v, os/*:number*/, opts, t/*:string*/) {\n\tvar o = new_buf(8);\n\twrite_XLSCell(R, C, os, o);\n\twrite_Bes(v, t, o);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.180 Number */\nfunction parse_Number(blob, length, opts) {\n\tif(opts.biffguess && opts.biff == 2) opts.biff = 5;\n\tvar cell = parse_XLSCell(blob, 6);\n\tvar xnum = parse_Xnum(blob, 8);\n\tcell.val = xnum;\n\treturn cell;\n}\nfunction write_Number(R/*:number*/, C/*:number*/, v, os/*:: :number, opts*/) {\n\tvar o = new_buf(14);\n\twrite_XLSCell(R, C, os, o);\n\twrite_Xnum(v, o);\n\treturn o;\n}\n\nvar parse_XLHeaderFooter = parse_OptXLUnicodeString; // TODO: parse 2.4.136\n\n/* [MS-XLS] 2.4.271 */\nfunction parse_SupBook(blob, length, opts) {\n\tvar end = blob.l + length;\n\tvar ctab = blob.read_shift(2);\n\tvar cch = blob.read_shift(2);\n\topts.sbcch = cch;\n\tif(cch == 0x0401 || cch == 0x3A01) return [cch, ctab];\n\tif(cch < 0x01 || cch >0xff) throw new Error(\"Unexpected SupBook type: \"+cch);\n\tvar virtPath = parse_XLUnicodeStringNoCch(blob, cch);\n\t/* TODO: 2.5.277 Virtual Path */\n\tvar rgst = [];\n\twhile(end > blob.l) rgst.push(parse_XLUnicodeString(blob));\n\treturn [cch, ctab, virtPath, rgst];\n}\n\n/* [MS-XLS] 2.4.105 TODO */\nfunction parse_ExternName(blob, length, opts) {\n\tvar flags = blob.read_shift(2);\n\tvar body;\n\tvar o = ({\n\t\tfBuiltIn: flags & 0x01,\n\t\tfWantAdvise: (flags >>> 1) & 0x01,\n\t\tfWantPict: (flags >>> 2) & 0x01,\n\t\tfOle: (flags >>> 3) & 0x01,\n\t\tfOleLink: (flags >>> 4) & 0x01,\n\t\tcf: (flags >>> 5) & 0x3FF,\n\t\tfIcon: flags >>> 15 & 0x01\n\t}/*:any*/);\n\tif(opts.sbcch === 0x3A01) body = parse_AddinUdf(blob, length-2, opts);\n\t//else throw new Error(\"unsupported SupBook cch: \" + opts.sbcch);\n\to.body = body || blob.read_shift(length-2);\n\tif(typeof body === \"string\") o.Name = body;\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.150 TODO */\nvar XLSLblBuiltIn = [\n\t\"_xlnm.Consolidate_Area\",\n\t\"_xlnm.Auto_Open\",\n\t\"_xlnm.Auto_Close\",\n\t\"_xlnm.Extract\",\n\t\"_xlnm.Database\",\n\t\"_xlnm.Criteria\",\n\t\"_xlnm.Print_Area\",\n\t\"_xlnm.Print_Titles\",\n\t\"_xlnm.Recorder\",\n\t\"_xlnm.Data_Form\",\n\t\"_xlnm.Auto_Activate\",\n\t\"_xlnm.Auto_Deactivate\",\n\t\"_xlnm.Sheet_Title\",\n\t\"_xlnm._FilterDatabase\"\n];\nfunction parse_Lbl(blob, length, opts) {\n\tvar target = blob.l + length;\n\tvar flags = blob.read_shift(2);\n\tvar chKey = blob.read_shift(1);\n\tvar cch = blob.read_shift(1);\n\tvar cce = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);\n\tvar itab = 0;\n\tif(!opts || opts.biff >= 5) {\n\t\tif(opts.biff != 5) blob.l += 2;\n\t\titab = blob.read_shift(2);\n\t\tif(opts.biff == 5) blob.l += 2;\n\t\tblob.l += 4;\n\t}\n\tvar name = parse_XLUnicodeStringNoCch(blob, cch, opts);\n\tif(flags & 0x20) name = XLSLblBuiltIn[name.charCodeAt(0)];\n\tvar npflen = target - blob.l; if(opts && opts.biff == 2) --npflen;\n\t/*jshint -W018 */\n\tvar rgce = (target == blob.l || cce === 0 || !(npflen > 0)) ? [] : parse_NameParsedFormula(blob, npflen, opts, cce);\n\t/*jshint +W018 */\n\treturn {\n\t\tchKey: chKey,\n\t\tName: name,\n\t\titab: itab,\n\t\trgce: rgce\n\t};\n}\n\n/* [MS-XLS] 2.4.106 TODO: verify filename encoding */\nfunction parse_ExternSheet(blob, length, opts) {\n\tif(opts.biff < 8) return parse_BIFF5ExternSheet(blob, length, opts);\n\tvar o = [], target = blob.l + length, len = blob.read_shift(opts.biff > 8 ? 4 : 2);\n\twhile(len-- !== 0) o.push(parse_XTI(blob, opts.biff > 8 ? 12 : 6, opts));\n\t\t// [iSupBook, itabFirst, itabLast];\n\tif(blob.l != target) throw new Error(\"Bad ExternSheet: \" + blob.l + \" != \" + target);\n\treturn o;\n}\nfunction parse_BIFF5ExternSheet(blob, length, opts) {\n\tif(blob[blob.l + 1] == 0x03) blob[blob.l]++;\n\tvar o = parse_ShortXLUnicodeString(blob, length, opts);\n\treturn o.charCodeAt(0) == 0x03 ? o.slice(1) : o;\n}\n\n/* [MS-XLS] 2.4.176 TODO: check older biff */\nfunction parse_NameCmt(blob, length, opts) {\n\tif(opts.biff < 8) { blob.l += length; return; }\n\tvar cchName = blob.read_shift(2);\n\tvar cchComment = blob.read_shift(2);\n\tvar name = parse_XLUnicodeStringNoCch(blob, cchName, opts);\n\tvar comment = parse_XLUnicodeStringNoCch(blob, cchComment, opts);\n\treturn [name, comment];\n}\n\n/* [MS-XLS] 2.4.260 */\nfunction parse_ShrFmla(blob, length, opts) {\n\tvar ref = parse_RefU(blob, 6);\n\tblob.l++;\n\tvar cUse = blob.read_shift(1);\n\tlength -= 8;\n\treturn [parse_SharedParsedFormula(blob, length, opts), cUse, ref];\n}\n\n/* [MS-XLS] 2.4.4 TODO */\nfunction parse_Array(blob, length, opts) {\n\tvar ref = parse_Ref(blob, 6);\n\t/* TODO: fAlwaysCalc */\n\tswitch(opts.biff) {\n\t\tcase 2: blob.l ++; length -= 7; break;\n\t\tcase 3: case 4: blob.l += 2; length -= 8; break;\n\t\tdefault: blob.l += 6; length -= 12;\n\t}\n\treturn [ref, parse_ArrayParsedFormula(blob, length, opts, ref)];\n}\n\n/* [MS-XLS] 2.4.173 */\nfunction parse_MTRSettings(blob) {\n\tvar fMTREnabled = blob.read_shift(4) !== 0x00;\n\tvar fUserSetThreadCount = blob.read_shift(4) !== 0x00;\n\tvar cUserThreadCount = blob.read_shift(4);\n\treturn [fMTREnabled, fUserSetThreadCount, cUserThreadCount];\n}\n\n/* [MS-XLS] 2.5.186 TODO: BIFF5 */\nfunction parse_NoteSh(blob, length, opts) {\n\tif(opts.biff < 8) return;\n\tvar row = blob.read_shift(2), col = blob.read_shift(2);\n\tvar flags = blob.read_shift(2), idObj = blob.read_shift(2);\n\tvar stAuthor = parse_XLUnicodeString2(blob, 0, opts);\n\tif(opts.biff < 8) blob.read_shift(1);\n\treturn [{r:row,c:col}, stAuthor, idObj, flags];\n}\n\n/* [MS-XLS] 2.4.179 */\nfunction parse_Note(blob, length, opts) {\n\t/* TODO: Support revisions */\n\treturn parse_NoteSh(blob, length, opts);\n}\n\n/* [MS-XLS] 2.4.168 */\nfunction parse_MergeCells(blob, length)/*:Array<Range>*/ {\n\tvar merges/*:Array<Range>*/ = [];\n\tvar cmcs = blob.read_shift(2);\n\twhile (cmcs--) merges.push(parse_Ref8U(blob,length));\n\treturn merges;\n}\nfunction write_MergeCells(merges/*:Array<Range>*/) {\n\tvar o = new_buf(2 + merges.length * 8);\n\to.write_shift(2, merges.length);\n\tfor(var i = 0; i < merges.length; ++i) write_Ref8U(merges[i], o);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.181 TODO: parse all the things! */\nfunction parse_Obj(blob, length, opts) {\n\tif(opts && opts.biff < 8) return parse_BIFF5Obj(blob, length, opts);\n\tvar cmo = parse_FtCmo(blob, 22); // id, ot, flags\n\tvar fts = parse_FtArray(blob, length-22, cmo[1]);\n\treturn { cmo: cmo, ft:fts };\n}\n/* from older spec */\nvar parse_BIFF5OT = {\n0x08: function(blob, length) {\n\tvar tgt = blob.l + length;\n\tblob.l += 10; // todo\n\tvar cf = blob.read_shift(2);\n\tblob.l += 4;\n\tblob.l += 2; //var cbPictFmla = blob.read_shift(2);\n\tblob.l += 2;\n\tblob.l += 2; //var grbit = blob.read_shift(2);\n\tblob.l += 4;\n\tvar cchName = blob.read_shift(1);\n\tblob.l += cchName; // TODO: stName\n\tblob.l = tgt; // TODO: fmla\n\treturn { fmt:cf };\n}\n};\n\nfunction parse_BIFF5Obj(blob, length, opts) {\n\tblob.l += 4; //var cnt = blob.read_shift(4);\n\tvar ot = blob.read_shift(2);\n\tvar id = blob.read_shift(2);\n\tvar grbit = blob.read_shift(2);\n\tblob.l += 2; //var colL = blob.read_shift(2);\n\tblob.l += 2; //var dxL = blob.read_shift(2);\n\tblob.l += 2; //var rwT = blob.read_shift(2);\n\tblob.l += 2; //var dyT = blob.read_shift(2);\n\tblob.l += 2; //var colR = blob.read_shift(2);\n\tblob.l += 2; //var dxR = blob.read_shift(2);\n\tblob.l += 2; //var rwB = blob.read_shift(2);\n\tblob.l += 2; //var dyB = blob.read_shift(2);\n\tblob.l += 2; //var cbMacro = blob.read_shift(2);\n\tblob.l += 6;\n\tlength -= 36;\n\tvar fts = [];\n\tfts.push((parse_BIFF5OT[ot]||parsenoop)(blob, length, opts));\n\treturn { cmo: [id, ot, grbit], ft:fts };\n}\n\n/* [MS-XLS] 2.4.329 TODO: parse properly */\nfunction parse_TxO(blob, length, opts) {\n\tvar s = blob.l;\n\tvar texts = \"\";\ntry {\n\tblob.l += 4;\n\tvar ot = (opts.lastobj||{cmo:[0,0]}).cmo[1];\n\tvar controlInfo; // eslint-disable-line no-unused-vars\n\tif([0,5,7,11,12,14].indexOf(ot) == -1) blob.l += 6;\n\telse controlInfo = parse_ControlInfo(blob, 6, opts); // eslint-disable-line no-unused-vars\n\tvar cchText = blob.read_shift(2);\n\t/*var cbRuns = */blob.read_shift(2);\n\t/*var ifntEmpty = */parseuint16(blob, 2);\n\tvar len = blob.read_shift(2);\n\tblob.l += len;\n\t//var fmla = parse_ObjFmla(blob, s + length - blob.l);\n\n\tfor(var i = 1; i < blob.lens.length-1; ++i) {\n\t\tif(blob.l-s != blob.lens[i]) throw new Error(\"TxO: bad continue record\");\n\t\tvar hdr = blob[blob.l];\n\t\tvar t = parse_XLUnicodeStringNoCch(blob, blob.lens[i+1]-blob.lens[i]-1);\n\t\ttexts += t;\n\t\tif(texts.length >= (hdr ? cchText : 2*cchText)) break;\n\t}\n\tif(texts.length !== cchText && texts.length !== cchText*2) {\n\t\tthrow new Error(\"cchText: \" + cchText + \" != \" + texts.length);\n\t}\n\n\tblob.l = s + length;\n\t/* [MS-XLS] 2.5.272 TxORuns */\n//\tvar rgTxoRuns = [];\n//\tfor(var j = 0; j != cbRuns/8-1; ++j) blob.l += 8;\n//\tvar cchText2 = blob.read_shift(2);\n//\tif(cchText2 !== cchText) throw new Error(\"TxOLastRun mismatch: \" + cchText2 + \" \" + cchText);\n//\tblob.l += 6;\n//\tif(s + length != blob.l) throw new Error(\"TxO \" + (s + length) + \", at \" + blob.l);\n\treturn { t: texts };\n} catch(e) { blob.l = s + length; return { t: texts }; }\n}\n\n/* [MS-XLS] 2.4.140 */\nfunction parse_HLink(blob, length) {\n\tvar ref = parse_Ref8U(blob, 8);\n\tblob.l += 16; /* CLSID */\n\tvar hlink = parse_Hyperlink(blob, length-24);\n\treturn [ref, hlink];\n}\nfunction write_HLink(hl) {\n\tvar O = new_buf(24);\n\tvar ref = decode_cell(hl[0]);\n\tO.write_shift(2, ref.r); O.write_shift(2, ref.r);\n\tO.write_shift(2, ref.c); O.write_shift(2, ref.c);\n\tvar clsid = \"d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b\".split(\" \");\n\tfor(var i = 0; i < 16; ++i) O.write_shift(1, parseInt(clsid[i], 16));\n\treturn bconcat([O, write_Hyperlink(hl[1])]);\n}\n\n\n/* [MS-XLS] 2.4.141 */\nfunction parse_HLinkTooltip(blob, length) {\n\tblob.read_shift(2);\n\tvar ref = parse_Ref8U(blob, 8);\n\tvar wzTooltip = blob.read_shift((length-10)/2, 'dbcs-cont');\n\twzTooltip = wzTooltip.replace(chr0,\"\");\n\treturn [ref, wzTooltip];\n}\nfunction write_HLinkTooltip(hl) {\n\tvar TT = hl[1].Tooltip;\n\tvar O = new_buf(10 + 2 * (TT.length + 1));\n\tO.write_shift(2, 0x0800);\n\tvar ref = decode_cell(hl[0]);\n\tO.write_shift(2, ref.r); O.write_shift(2, ref.r);\n\tO.write_shift(2, ref.c); O.write_shift(2, ref.c);\n\tfor(var i = 0; i < TT.length; ++i) O.write_shift(2, TT.charCodeAt(i));\n\tO.write_shift(2, 0);\n\treturn O;\n}\n\n/* [MS-XLS] 2.4.63 */\nfunction parse_Country(blob)/*:[string|number, string|number]*/ {\n\tvar o = [0,0], d;\n\td = blob.read_shift(2); o[0] = CountryEnum[d] || d;\n\td = blob.read_shift(2); o[1] = CountryEnum[d] || d;\n\treturn o;\n}\nfunction write_Country(o) {\n\tif(!o) o = new_buf(4);\n\to.write_shift(2, 0x01);\n\to.write_shift(2, 0x01);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.50 ClrtClient */\nfunction parse_ClrtClient(blob) {\n\tvar ccv = blob.read_shift(2);\n\tvar o = [];\n\twhile(ccv-->0) o.push(parse_LongRGB(blob, 8));\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.188 */\nfunction parse_Palette(blob) {\n\tvar ccv = blob.read_shift(2);\n\tvar o = [];\n\twhile(ccv-->0) o.push(parse_LongRGB(blob, 8));\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.354 */\nfunction parse_XFCRC(blob) {\n\tblob.l += 2;\n\tvar o = {cxfs:0, crc:0};\n\to.cxfs = blob.read_shift(2);\n\to.crc = blob.read_shift(4);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.53 TODO: parse flags */\n/* [MS-XLSB] 2.4.323 TODO: parse flags */\nfunction parse_ColInfo(blob, length, opts) {\n\tif(!opts.cellStyles) return parsenoop(blob, length);\n\tvar w = opts && opts.biff >= 12 ? 4 : 2;\n\tvar colFirst = blob.read_shift(w);\n\tvar colLast = blob.read_shift(w);\n\tvar coldx = blob.read_shift(w);\n\tvar ixfe = blob.read_shift(w);\n\tvar flags = blob.read_shift(2);\n\tif(w == 2) blob.l += 2;\n\tvar o = ({s:colFirst, e:colLast, w:coldx, ixfe:ixfe, flags:flags}/*:any*/);\n\tif(opts.biff >= 5 || !opts.biff) o.level = (flags >> 8) & 0x7;\n\treturn o;\n}\nfunction write_ColInfo(col, idx) {\n\tvar o = new_buf(12);\n\to.write_shift(2, idx);\n\to.write_shift(2, idx);\n\to.write_shift(2, col.width * 256);\n\to.write_shift(2, 0);\n\tvar f = 0;\n\tif(col.hidden) f |= 1;\n\to.write_shift(1, f);\n\tf = col.level || 0;\n\to.write_shift(1, f);\n\to.write_shift(2, 0);\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.257 */\nfunction parse_Setup(blob, length) {\n\tvar o = {};\n\tif(length < 32) return o;\n\tblob.l += 16;\n\to.header = parse_Xnum(blob, 8);\n\to.footer = parse_Xnum(blob, 8);\n\tblob.l += 2;\n\treturn o;\n}\n\n/* [MS-XLS] 2.4.261 */\nfunction parse_ShtProps(blob, length, opts) {\n\tvar def = {area:false};\n\tif(opts.biff != 5) { blob.l += length; return def; }\n\tvar d = blob.read_shift(1); blob.l += 3;\n\tif((d & 0x10)) def.area = true;\n\treturn def;\n}\n\n/* [MS-XLS] 2.4.241 */\nfunction write_RRTabId(n/*:number*/) {\n\tvar out = new_buf(2 * n);\n\tfor(var i = 0; i < n; ++i) out.write_shift(2, i+1);\n\treturn out;\n}\n\nvar parse_Blank = parse_XLSCell; /* [MS-XLS] 2.4.20 Just the cell */\nvar parse_Scl = parseuint16a; /* [MS-XLS] 2.4.247 num, den */\nvar parse_String = parse_XLUnicodeString; /* [MS-XLS] 2.4.268 */\n\n/* --- Specific to versions before BIFF8 --- */\nfunction parse_ImData(blob) {\n\tvar cf = blob.read_shift(2);\n\tvar env = blob.read_shift(2);\n\tvar lcb = blob.read_shift(4);\n\tvar o = {fmt:cf, env:env, len:lcb, data:blob.slice(blob.l,blob.l+lcb)};\n\tblob.l += lcb;\n\treturn o;\n}\n\n/* BIFF2_??? where ??? is the name from [XLS] */\nfunction parse_BIFF2STR(blob, length, opts) {\n\tif(opts.biffguess && opts.biff == 5) opts.biff = 2;\n\tvar cell = parse_XLSCell(blob, 6);\n\t++blob.l;\n\tvar str = parse_XLUnicodeString2(blob, length-7, opts);\n\tcell.t = 'str';\n\tcell.val = str;\n\treturn cell;\n}\n\nfunction parse_BIFF2NUM(blob/*::, length*/) {\n\tvar cell = parse_XLSCell(blob, 6);\n\t++blob.l;\n\tvar num = parse_Xnum(blob, 8);\n\tcell.t = 'n';\n\tcell.val = num;\n\treturn cell;\n}\nfunction write_BIFF2NUM(r/*:number*/, c/*:number*/, val/*:number*/) {\n\tvar out = new_buf(15);\n\twrite_BIFF2Cell(out, r, c);\n\tout.write_shift(8, val, 'f');\n\treturn out;\n}\n\nfunction parse_BIFF2INT(blob) {\n\tvar cell = parse_XLSCell(blob, 6);\n\t++blob.l;\n\tvar num = blob.read_shift(2);\n\tcell.t = 'n';\n\tcell.val = num;\n\treturn cell;\n}\nfunction write_BIFF2INT(r/*:number*/, c/*:number*/, val/*:number*/) {\n\tvar out = new_buf(9);\n\twrite_BIFF2Cell(out, r, c);\n\tout.write_shift(2, val);\n\treturn out;\n}\n\nfunction parse_BIFF2STRING(blob) {\n\tvar cch = blob.read_shift(1);\n\tif(cch === 0) { blob.l++; return \"\"; }\n\treturn blob.read_shift(cch, 'sbcs-cont');\n}\n\n/* TODO: convert to BIFF8 font struct */\nfunction parse_BIFF2FONTXTRA(blob, length) {\n\tblob.l += 6; // unknown\n\tblob.l += 2; // font weight \"bls\"\n\tblob.l += 1; // charset\n\tblob.l += 3; // unknown\n\tblob.l += 1; // font family\n\tblob.l += length - 13;\n}\n\n/* TODO: parse rich text runs */\nfunction parse_RString(blob, length, opts) {\n\tvar end = blob.l + length;\n\tvar cell = parse_XLSCell(blob, 6);\n\tvar cch = blob.read_shift(2);\n\tvar str = parse_XLUnicodeStringNoCch(blob, cch, opts);\n\tblob.l = end;\n\tcell.t = 'str';\n\tcell.val = str;\n\treturn cell;\n}\n/* from js-harb (C) 2014-present  SheetJS */\nvar DBF_SUPPORTED_VERSIONS = [0x02, 0x03, 0x30, 0x31, 0x83, 0x8B, 0x8C, 0xF5];\nvar DBF = /*#__PURE__*/(function() {\nvar dbf_codepage_map = {\n\t/* Code Pages Supported by Visual FoxPro */\n\t/*::[*/0x01/*::]*/:   437,           /*::[*/0x02/*::]*/:   850,\n\t/*::[*/0x03/*::]*/:  1252,           /*::[*/0x04/*::]*/: 10000,\n\t/*::[*/0x64/*::]*/:   852,           /*::[*/0x65/*::]*/:   866,\n\t/*::[*/0x66/*::]*/:   865,           /*::[*/0x67/*::]*/:   861,\n\t/*::[*/0x68/*::]*/:   895,           /*::[*/0x69/*::]*/:   620,\n\t/*::[*/0x6A/*::]*/:   737,           /*::[*/0x6B/*::]*/:   857,\n\t/*::[*/0x78/*::]*/:   950,           /*::[*/0x79/*::]*/:   949,\n\t/*::[*/0x7A/*::]*/:   936,           /*::[*/0x7B/*::]*/:   932,\n\t/*::[*/0x7C/*::]*/:   874,           /*::[*/0x7D/*::]*/:  1255,\n\t/*::[*/0x7E/*::]*/:  1256,           /*::[*/0x96/*::]*/: 10007,\n\t/*::[*/0x97/*::]*/: 10029,           /*::[*/0x98/*::]*/: 10006,\n\t/*::[*/0xC8/*::]*/:  1250,           /*::[*/0xC9/*::]*/:  1251,\n\t/*::[*/0xCA/*::]*/:  1254,           /*::[*/0xCB/*::]*/:  1253,\n\n\t/* shapefile DBF extension */\n\t/*::[*/0x00/*::]*/: 20127,           /*::[*/0x08/*::]*/:   865,\n\t/*::[*/0x09/*::]*/:   437,           /*::[*/0x0A/*::]*/:   850,\n\t/*::[*/0x0B/*::]*/:   437,           /*::[*/0x0D/*::]*/:   437,\n\t/*::[*/0x0E/*::]*/:   850,           /*::[*/0x0F/*::]*/:   437,\n\t/*::[*/0x10/*::]*/:   850,           /*::[*/0x11/*::]*/:   437,\n\t/*::[*/0x12/*::]*/:   850,           /*::[*/0x13/*::]*/:   932,\n\t/*::[*/0x14/*::]*/:   850,           /*::[*/0x15/*::]*/:   437,\n\t/*::[*/0x16/*::]*/:   850,           /*::[*/0x17/*::]*/:   865,\n\t/*::[*/0x18/*::]*/:   437,           /*::[*/0x19/*::]*/:   437,\n\t/*::[*/0x1A/*::]*/:   850,           /*::[*/0x1B/*::]*/:   437,\n\t/*::[*/0x1C/*::]*/:   863,           /*::[*/0x1D/*::]*/:   850,\n\t/*::[*/0x1F/*::]*/:   852,           /*::[*/0x22/*::]*/:   852,\n\t/*::[*/0x23/*::]*/:   852,           /*::[*/0x24/*::]*/:   860,\n\t/*::[*/0x25/*::]*/:   850,           /*::[*/0x26/*::]*/:   866,\n\t/*::[*/0x37/*::]*/:   850,           /*::[*/0x40/*::]*/:   852,\n\t/*::[*/0x4D/*::]*/:   936,           /*::[*/0x4E/*::]*/:   949,\n\t/*::[*/0x4F/*::]*/:   950,           /*::[*/0x50/*::]*/:   874,\n\t/*::[*/0x57/*::]*/:  1252,           /*::[*/0x58/*::]*/:  1252,\n\t/*::[*/0x59/*::]*/:  1252,           /*::[*/0x6C/*::]*/:   863,\n\t/*::[*/0x86/*::]*/:   737,           /*::[*/0x87/*::]*/:   852,\n\t/*::[*/0x88/*::]*/:   857,           /*::[*/0xCC/*::]*/:  1257,\n\n\t/*::[*/0xFF/*::]*/: 16969\n};\nvar dbf_reverse_map = evert({\n\t/*::[*/0x01/*::]*/:   437,           /*::[*/0x02/*::]*/:   850,\n\t/*::[*/0x03/*::]*/:  1252,           /*::[*/0x04/*::]*/: 10000,\n\t/*::[*/0x64/*::]*/:   852,           /*::[*/0x65/*::]*/:   866,\n\t/*::[*/0x66/*::]*/:   865,           /*::[*/0x67/*::]*/:   861,\n\t/*::[*/0x68/*::]*/:   895,           /*::[*/0x69/*::]*/:   620,\n\t/*::[*/0x6A/*::]*/:   737,           /*::[*/0x6B/*::]*/:   857,\n\t/*::[*/0x78/*::]*/:   950,           /*::[*/0x79/*::]*/:   949,\n\t/*::[*/0x7A/*::]*/:   936,           /*::[*/0x7B/*::]*/:   932,\n\t/*::[*/0x7C/*::]*/:   874,           /*::[*/0x7D/*::]*/:  1255,\n\t/*::[*/0x7E/*::]*/:  1256,           /*::[*/0x96/*::]*/: 10007,\n\t/*::[*/0x97/*::]*/: 10029,           /*::[*/0x98/*::]*/: 10006,\n\t/*::[*/0xC8/*::]*/:  1250,           /*::[*/0xC9/*::]*/:  1251,\n\t/*::[*/0xCA/*::]*/:  1254,           /*::[*/0xCB/*::]*/:  1253,\n\t/*::[*/0x00/*::]*/: 20127\n});\n/* TODO: find an actual specification */\nfunction dbf_to_aoa(buf, opts)/*:AOA*/ {\n\tvar out/*:AOA*/ = [];\n\tvar d/*:Block*/ = (new_raw_buf(1)/*:any*/);\n\tswitch(opts.type) {\n\t\tcase 'base64': d = s2a(Base64_decode(buf)); break;\n\t\tcase 'binary': d = s2a(buf); break;\n\t\tcase 'buffer':\n\t\tcase 'array': d = buf; break;\n\t}\n\tprep_blob(d, 0);\n\n\t/* header */\n\tvar ft = d.read_shift(1);\n\tvar memo = !!(ft & 0x88);\n\tvar vfp = false, l7 = false;\n\tswitch(ft) {\n\t\tcase 0x02: break; // dBASE II\n\t\tcase 0x03: break; // dBASE III\n\t\tcase 0x30: vfp = true; memo = true; break; // VFP\n\t\tcase 0x31: vfp = true; memo = true; break; // VFP with autoincrement\n\t\t// 0x43 dBASE IV SQL table files\n\t\t// 0x63 dBASE IV SQL system files\n\t\tcase 0x83: break; // dBASE III with memo\n\t\tcase 0x8B: break; // dBASE IV with memo\n\t\tcase 0x8C: l7 = true; break; // dBASE Level 7 with memo\n\t\t// case 0xCB dBASE IV SQL table files with memo\n\t\tcase 0xF5: break; // FoxPro 2.x with memo\n\t\t// case 0xFB FoxBASE\n\t\tdefault: throw new Error(\"DBF Unsupported Version: \" + ft.toString(16));\n\t}\n\n\tvar nrow = 0, fpos = 0x0209;\n\tif(ft == 0x02) nrow = d.read_shift(2);\n\td.l += 3; // dBASE II stores DDMMYY date, others use YYMMDD\n\tif(ft != 0x02) nrow = d.read_shift(4);\n\tif(nrow > 1048576) nrow = 1e6;\n\n\tif(ft != 0x02) fpos = d.read_shift(2); // header length\n\tvar rlen = d.read_shift(2); // record length\n\n\tvar /*flags = 0,*/ current_cp = opts.codepage || 1252;\n\tif(ft != 0x02) { // 20 reserved bytes\n\t\td.l+=16;\n\t\t/*flags = */d.read_shift(1);\n\t\t//if(memo && ((flags & 0x02) === 0)) throw new Error(\"DBF Flags \" + flags.toString(16) + \" ft \" + ft.toString(16));\n\n\t\t/* codepage present in FoxPro and dBASE Level 7 */\n\t\tif(d[d.l] !== 0) current_cp = dbf_codepage_map[d[d.l]];\n\t\td.l+=1;\n\n\t\td.l+=2;\n\t}\n\tif(l7) d.l += 36; // Level 7: 32 byte \"Language driver name\", 4 byte reserved\n\n/*:: type DBFField = { name:string; len:number; type:string; } */\n\tvar fields/*:Array<DBFField>*/ = [], field/*:DBFField*/ = ({}/*:any*/);\n\tvar hend = Math.min(d.length, (ft == 0x02 ? 0x209 : (fpos - 10 - (vfp ? 264 : 0))));\n\tvar ww = l7 ? 32 : 11;\n\twhile(d.l < hend && d[d.l] != 0x0d) {\n\t\tfield = ({}/*:any*/);\n\t\tfield.name = $cptable.utils.decode(current_cp, d.slice(d.l, d.l+ww)).replace(/[\\u0000\\r\\n].*$/g,\"\");\n\t\td.l += ww;\n\t\tfield.type = String.fromCharCode(d.read_shift(1));\n\t\tif(ft != 0x02 && !l7) field.offset = d.read_shift(4);\n\t\tfield.len = d.read_shift(1);\n\t\tif(ft == 0x02) field.offset = d.read_shift(2);\n\t\tfield.dec = d.read_shift(1);\n\t\tif(field.name.length) fields.push(field);\n\t\tif(ft != 0x02) d.l += l7 ? 13 : 14;\n\t\tswitch(field.type) {\n\t\t\tcase 'B': // Double (VFP) / Binary (dBASE L7)\n\t\t\t\tif((!vfp || field.len != 8) && opts.WTF) console.log('Skipping ' + field.name + ':' + field.type);\n\t\t\t\tbreak;\n\t\t\tcase 'G': // General (FoxPro and dBASE L7)\n\t\t\tcase 'P': // Picture (FoxPro and dBASE L7)\n\t\t\t\tif(opts.WTF) console.log('Skipping ' + field.name + ':' + field.type);\n\t\t\t\tbreak;\n\t\t\tcase '+': // Autoincrement (dBASE L7 only)\n\t\t\tcase '0': // _NullFlags (VFP only)\n\t\t\tcase '@': // Timestamp (dBASE L7 only)\n\t\t\tcase 'C': // Character (dBASE II)\n\t\t\tcase 'D': // Date (dBASE III)\n\t\t\tcase 'F': // Float (dBASE IV)\n\t\t\tcase 'I': // Long (VFP and dBASE L7)\n\t\t\tcase 'L': // Logical (dBASE II)\n\t\t\tcase 'M': // Memo (dBASE III)\n\t\t\tcase 'N': // Number (dBASE II)\n\t\t\tcase 'O': // Double (dBASE L7 only)\n\t\t\tcase 'T': // Datetime (VFP only)\n\t\t\tcase 'Y': // Currency (VFP only)\n\t\t\t\tbreak;\n\t\t\tdefault: throw new Error('Unknown Field Type: ' + field.type);\n\t\t}\n\t}\n\n\tif(d[d.l] !== 0x0D) d.l = fpos-1;\n\tif(d.read_shift(1) !== 0x0D) throw new Error(\"DBF Terminator not found \" + d.l + \" \" + d[d.l]);\n\td.l = fpos;\n\n\t/* data */\n\tvar R = 0, C = 0;\n\tout[0] = [];\n\tfor(C = 0; C != fields.length; ++C) out[0][C] = fields[C].name;\n\twhile(nrow-- > 0) {\n\t\tif(d[d.l] === 0x2A) {\n\t\t\t// TODO: record marked as deleted -- create a hidden row?\n\t\t\td.l+=rlen;\n\t\t\tcontinue;\n\t\t}\n\t\t++d.l;\n\t\tout[++R] = []; C = 0;\n\t\tfor(C = 0; C != fields.length; ++C) {\n\t\t\tvar dd = d.slice(d.l, d.l+fields[C].len); d.l+=fields[C].len;\n\t\t\tprep_blob(dd, 0);\n\t\t\tvar s = $cptable.utils.decode(current_cp, dd);\n\t\t\tswitch(fields[C].type) {\n\t\t\t\tcase 'C':\n\t\t\t\t\t// NOTE: it is conventional to write '  /  /  ' for empty dates\n\t\t\t\t\tif(s.trim().length) out[R][C] = s.replace(/\\s+$/,\"\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'D':\n\t\t\t\t\tif(s.length === 8) out[R][C] = new Date(+s.slice(0,4), +s.slice(4,6)-1, +s.slice(6,8));\n\t\t\t\t\telse out[R][C] = s;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'F': out[R][C] = parseFloat(s.trim()); break;\n\t\t\t\tcase '+': case 'I': out[R][C] = l7 ? dd.read_shift(-4, 'i') ^ 0x80000000 : dd.read_shift(4, 'i'); break;\n\t\t\t\tcase 'L': switch(s.trim().toUpperCase()) {\n\t\t\t\t\tcase 'Y': case 'T': out[R][C] = true; break;\n\t\t\t\t\tcase 'N': case 'F': out[R][C] = false; break;\n\t\t\t\t\tcase '': case '?': break;\n\t\t\t\t\tdefault: throw new Error(\"DBF Unrecognized L:|\" + s + \"|\");\n\t\t\t\t\t} break;\n\t\t\t\tcase 'M': /* TODO: handle memo files */\n\t\t\t\t\tif(!memo) throw new Error(\"DBF Unexpected MEMO for type \" + ft.toString(16));\n\t\t\t\t\tout[R][C] = \"##MEMO##\" + (l7 ? parseInt(s.trim(), 10): dd.read_shift(4));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'N':\n\t\t\t\t\ts = s.replace(/\\u0000/g,\"\").trim();\n\t\t\t\t\t// NOTE: dBASE II interprets \"  .  \" as 0\n\t\t\t\t\tif(s && s != \".\") out[R][C] = +s || 0; break;\n\t\t\t\tcase '@':\n\t\t\t\t\t// NOTE: dBASE specs appear to be incorrect\n\t\t\t\t\tout[R][C] = new Date(dd.read_shift(-8, 'f') - 0x388317533400);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'T': out[R][C] = new Date((dd.read_shift(4) - 0x253D8C) * 0x5265C00 + dd.read_shift(4)); break;\n\t\t\t\tcase 'Y': out[R][C] = dd.read_shift(4,'i')/1e4 + (dd.read_shift(4, 'i')/1e4)*Math.pow(2,32); break;\n\t\t\t\tcase 'O': out[R][C] = -dd.read_shift(-8, 'f'); break;\n\t\t\t\tcase 'B': if(vfp && fields[C].len == 8) { out[R][C] = dd.read_shift(8,'f'); break; }\n\t\t\t\t\t/* falls through */\n\t\t\t\tcase 'G': case 'P': dd.l += fields[C].len; break;\n\t\t\t\tcase '0':\n\t\t\t\t\tif(fields[C].name === '_NullFlags') break;\n\t\t\t\t\t/* falls through */\n\t\t\t\tdefault: throw new Error(\"DBF Unsupported data type \" + fields[C].type);\n\t\t\t}\n\t\t}\n\t}\n\tif(ft != 0x02) if(d.l < d.length && d[d.l++] != 0x1A) throw new Error(\"DBF EOF Marker missing \" + (d.l-1) + \" of \" + d.length + \" \" + d[d.l-1].toString(16));\n\tif(opts && opts.sheetRows) out = out.slice(0, opts.sheetRows);\n\topts.DBF = fields;\n\treturn out;\n}\n\nfunction dbf_to_sheet(buf, opts)/*:Worksheet*/ {\n\tvar o = opts || {};\n\tif(!o.dateNF) o.dateNF = \"yyyymmdd\";\n\tvar ws = aoa_to_sheet(dbf_to_aoa(buf, o), o);\n\tws[\"!cols\"] = o.DBF.map(function(field) { return {\n\t\twch: field.len,\n\t\tDBF: field\n\t};});\n\tdelete o.DBF;\n\treturn ws;\n}\n\nfunction dbf_to_workbook(buf, opts)/*:Workbook*/ {\n\ttry { return sheet_to_workbook(dbf_to_sheet(buf, opts), opts); }\n\tcatch(e) { if(opts && opts.WTF) throw e; }\n\treturn ({SheetNames:[],Sheets:{}});\n}\n\nvar _RLEN = { 'B': 8, 'C': 250, 'L': 1, 'D': 8, '?': 0, '': 0 };\nfunction sheet_to_dbf(ws/*:Worksheet*/, opts/*:WriteOpts*/) {\n\tvar o = opts || {};\n\tif(+o.codepage >= 0) set_cp(+o.codepage);\n\tif(o.type == \"string\") throw new Error(\"Cannot write DBF to JS string\");\n\tvar ba = buf_array();\n\tvar aoa/*:AOA*/ = sheet_to_json(ws, {header:1, raw:true, cellDates:true});\n\tvar headers = aoa[0], data = aoa.slice(1), cols = ws[\"!cols\"] || [];\n\tvar i = 0, j = 0, hcnt = 0, rlen = 1;\n\tfor(i = 0; i < headers.length; ++i) {\n\t\tif(((cols[i]||{}).DBF||{}).name) { headers[i] = cols[i].DBF.name; ++hcnt; continue; }\n\t\tif(headers[i] == null) continue;\n\t\t++hcnt;\n\t\tif(typeof headers[i] === 'number') headers[i] = headers[i].toString(10);\n\t\tif(typeof headers[i] !== 'string') throw new Error(\"DBF Invalid column name \" + headers[i] + \" |\" + (typeof headers[i]) + \"|\");\n\t\tif(headers.indexOf(headers[i]) !== i) for(j=0; j<1024;++j)\n\t\t\tif(headers.indexOf(headers[i] + \"_\" + j) == -1) { headers[i] += \"_\" + j; break; }\n\t}\n\tvar range = safe_decode_range(ws['!ref']);\n\tvar coltypes/*:Array<string>*/ = [];\n\tvar colwidths/*:Array<number>*/ = [];\n\tvar coldecimals/*:Array<number>*/ = [];\n\tfor(i = 0; i <= range.e.c - range.s.c; ++i) {\n\t\tvar guess = '', _guess = '', maxlen = 0;\n\t\tvar col/*:Array<any>*/ = [];\n\t\tfor(j=0; j < data.length; ++j) {\n\t\t\tif(data[j][i] != null) col.push(data[j][i]);\n\t\t}\n\t\tif(col.length == 0 || headers[i] == null) { coltypes[i] = '?'; continue; }\n\t\tfor(j = 0; j < col.length; ++j) {\n\t\t\tswitch(typeof col[j]) {\n\t\t\t\t/* TODO: check if L2 compat is desired */\n\t\t\t\tcase 'number': _guess = 'B'; break;\n\t\t\t\tcase 'string': _guess = 'C'; break;\n\t\t\t\tcase 'boolean': _guess = 'L'; break;\n\t\t\t\tcase 'object': _guess = col[j] instanceof Date ? 'D' : 'C'; break;\n\t\t\t\tdefault: _guess = 'C';\n\t\t\t}\n\t\t\tmaxlen = Math.max(maxlen, String(col[j]).length);\n\t\t\tguess = guess && guess != _guess ? 'C' : _guess;\n\t\t\t//if(guess == 'C') break;\n\t\t}\n\t\tif(maxlen > 250) maxlen = 250;\n\t\t_guess = ((cols[i]||{}).DBF||{}).type;\n\t\t/* TODO: more fine grained control over DBF type resolution */\n\t\tif(_guess == 'C') {\n\t\t\tif(cols[i].DBF.len > maxlen) maxlen = cols[i].DBF.len;\n\t\t}\n\t\tif(guess == 'B' && _guess == 'N') {\n\t\t\tguess = 'N';\n\t\t\tcoldecimals[i] = cols[i].DBF.dec;\n\t\t\tmaxlen = cols[i].DBF.len;\n\t\t}\n\t\tcolwidths[i] = guess == 'C' || _guess == 'N' ? maxlen : (_RLEN[guess] || 0);\n\t\trlen += colwidths[i];\n\t\tcoltypes[i] = guess;\n\t}\n\n\tvar h = ba.next(32);\n\th.write_shift(4, 0x13021130);\n\th.write_shift(4, data.length);\n\th.write_shift(2, 296 + 32 * hcnt);\n\th.write_shift(2, rlen);\n\tfor(i=0; i < 4; ++i) h.write_shift(4, 0);\n\th.write_shift(4, 0x00000000 | ((+dbf_reverse_map[/*::String(*/current_ansi/*::)*/] || 0x03)<<8));\n\n\tfor(i = 0, j = 0; i < headers.length; ++i) {\n\t\tif(headers[i] == null) continue;\n\t\tvar hf = ba.next(32);\n\t\tvar _f = (headers[i].slice(-10) + \"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\").slice(0, 11);\n\t\thf.write_shift(1, _f, \"sbcs\");\n\t\thf.write_shift(1, coltypes[i] == '?' ? 'C' : coltypes[i], \"sbcs\");\n\t\thf.write_shift(4, j);\n\t\thf.write_shift(1, colwidths[i] || _RLEN[coltypes[i]] || 0);\n\t\thf.write_shift(1, coldecimals[i] || 0);\n\t\thf.write_shift(1, 0x02);\n\t\thf.write_shift(4, 0);\n\t\thf.write_shift(1, 0);\n\t\thf.write_shift(4, 0);\n\t\thf.write_shift(4, 0);\n\t\tj += (colwidths[i] || _RLEN[coltypes[i]] || 0);\n\t}\n\n\tvar hb = ba.next(264);\n\thb.write_shift(4, 0x0000000D);\n\tfor(i=0; i < 65;++i) hb.write_shift(4, 0x00000000);\n\tfor(i=0; i < data.length; ++i) {\n\t\tvar rout = ba.next(rlen);\n\t\trout.write_shift(1, 0);\n\t\tfor(j=0; j<headers.length; ++j) {\n\t\t\tif(headers[j] == null) continue;\n\t\t\tswitch(coltypes[j]) {\n\t\t\t\tcase 'L': rout.write_shift(1, data[i][j] == null ? 0x3F : data[i][j] ? 0x54 : 0x46); break;\n\t\t\t\tcase 'B': rout.write_shift(8, data[i][j]||0, 'f'); break;\n\t\t\t\tcase 'N':\n\t\t\t\t\tvar _n = \"0\";\n\t\t\t\t\tif(typeof data[i][j] == \"number\") _n = data[i][j].toFixed(coldecimals[j]||0);\n\t\t\t\t\tfor(hcnt=0; hcnt < colwidths[j]-_n.length; ++hcnt) rout.write_shift(1, 0x20);\n\t\t\t\t\trout.write_shift(1, _n, \"sbcs\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'D':\n\t\t\t\t\tif(!data[i][j]) rout.write_shift(8, \"00000000\", \"sbcs\");\n\t\t\t\t\telse {\n\t\t\t\t\t\trout.write_shift(4, (\"0000\"+data[i][j].getFullYear()).slice(-4), \"sbcs\");\n\t\t\t\t\t\trout.write_shift(2, (\"00\"+(data[i][j].getMonth()+1)).slice(-2), \"sbcs\");\n\t\t\t\t\t\trout.write_shift(2, (\"00\"+data[i][j].getDate()).slice(-2), \"sbcs\");\n\t\t\t\t\t} break;\n\t\t\t\tcase 'C':\n\t\t\t\t\tvar _s = String(data[i][j] != null ? data[i][j] : \"\").slice(0, colwidths[j]);\n\t\t\t\t\trout.write_shift(1, _s, \"sbcs\");\n\t\t\t\t\tfor(hcnt=0; hcnt < colwidths[j]-_s.length; ++hcnt) rout.write_shift(1, 0x20); break;\n\t\t\t}\n\t\t}\n\t\t// data\n\t}\n\tba.next(1).write_shift(1, 0x1A);\n\treturn ba.end();\n}\n\treturn {\n\t\tto_workbook: dbf_to_workbook,\n\t\tto_sheet: dbf_to_sheet,\n\t\tfrom_sheet: sheet_to_dbf\n\t};\n})();\n\nvar SYLK = /*#__PURE__*/(function() {\n\t/* TODO: stress test sequences */\n\tvar sylk_escapes = ({\n\t\tAA:'', BA:'', CA:'', DA:195, HA:'', JA:197,\n\t\tAE:'', BE:'', CE:'',         HE:'',\n\t\tAI:'', BI:'', CI:'',         HI:'',\n\t\tAO:'', BO:'', CO:'', DO:213, HO:'',\n\t\tAU:'', BU:'', CU:'',         HU:'',\n\t\tAa:'', Ba:'', Ca:'', Da:227, Ha:'', Ja:229,\n\t\tAe:'', Be:'', Ce:'',         He:'',\n\t\tAi:'', Bi:'', Ci:'',         Hi:'',\n\t\tAo:'', Bo:'', Co:'', Do:245, Ho:'',\n\t\tAu:'', Bu:'', Cu:'',         Hu:'',\n\t\tKC:'', Kc:'', q:'',  z:'',  a:'',  j:'',\n\t\tDN:209, Dn:241, Hy:255,\n\t\tS:169,  c:170,  R:174,  \"B \":180,\n\t\t/*::[*/0/*::]*/:176,    /*::[*/1/*::]*/:177,  /*::[*/2/*::]*/:178,\n\t\t/*::[*/3/*::]*/:179,    /*::[*/5/*::]*/:181,  /*::[*/6/*::]*/:182,\n\t\t/*::[*/7/*::]*/:183,    Q:185,  k:186,  b:208,  i:216,  l:222,  s:240,  y:248,\n\t\t\"!\":161, '\"':162, \"#\":163, \"(\":164, \"%\":165, \"'\":167, \"H \":168,\n\t\t\"+\":171, \";\":187, \"<\":188, \"=\":189, \">\":190, \"?\":191, \"{\":223\n\t}/*:any*/);\n\tvar sylk_char_regex = new RegExp(\"\\u001BN(\" + keys(sylk_escapes).join(\"|\").replace(/\\|\\|\\|/, \"|\\\\||\").replace(/([?()+])/g,\"\\\\$1\") + \"|\\\\|)\", \"gm\");\n\tvar sylk_char_fn = function(_, $1){ var o = sylk_escapes[$1]; return typeof o == \"number\" ? _getansi(o) : o; };\n\tvar decode_sylk_char = function($$, $1, $2) { var newcc = (($1.charCodeAt(0) - 0x20)<<4) | ($2.charCodeAt(0) - 0x30); return newcc == 59 ? $$ : _getansi(newcc); };\n\tsylk_escapes[\"|\"] = 254;\n\t/* TODO: find an actual specification */\n\tfunction sylk_to_aoa(d/*:RawData*/, opts)/*:[AOA, Worksheet]*/ {\n\t\tswitch(opts.type) {\n\t\t\tcase 'base64': return sylk_to_aoa_str(Base64_decode(d), opts);\n\t\t\tcase 'binary': return sylk_to_aoa_str(d, opts);\n\t\t\tcase 'buffer': return sylk_to_aoa_str(has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d), opts);\n\t\t\tcase 'array': return sylk_to_aoa_str(cc2str(d), opts);\n\t\t}\n\t\tthrow new Error(\"Unrecognized type \" + opts.type);\n\t}\n\tfunction sylk_to_aoa_str(str/*:string*/, opts)/*:[AOA, Worksheet]*/ {\n\t\tvar records = str.split(/[\\n\\r]+/), R = -1, C = -1, ri = 0, rj = 0, arr/*:AOA*/ = [];\n\t\tvar formats/*:Array<string>*/ = [];\n\t\tvar next_cell_format/*:string|null*/ = null;\n\t\tvar sht = {}, rowinfo/*:Array<RowInfo>*/ = [], colinfo/*:Array<ColInfo>*/ = [], cw/*:Array<string>*/ = [];\n\t\tvar Mval = 0, j;\n\t\tif(+opts.codepage >= 0) set_cp(+opts.codepage);\n\t\tfor (; ri !== records.length; ++ri) {\n\t\t\tMval = 0;\n\t\t\tvar rstr=records[ri].trim().replace(/\\x1B([\\x20-\\x2F])([\\x30-\\x3F])/g, decode_sylk_char).replace(sylk_char_regex, sylk_char_fn);\n\t\t\tvar record=rstr.replace(/;;/g, \"\\u0000\").split(\";\").map(function(x) { return x.replace(/\\u0000/g, \";\"); });\n\t\t\tvar RT=record[0], val;\n\t\t\tif(rstr.length > 0) switch(RT) {\n\t\t\tcase 'ID': break; /* header */\n\t\t\tcase 'E': break; /* EOF */\n\t\t\tcase 'B': break; /* dimensions */\n\t\t\tcase 'O': break; /* options? */\n\t\t\tcase 'W': break; /* window? */\n\t\t\tcase 'P':\n\t\t\t\tif(record[1].charAt(0) == 'P')\n\t\t\t\t\tformats.push(rstr.slice(3).replace(/;;/g, \";\"));\n\t\t\t\tbreak;\n\t\t\tcase 'C':\n\t\t\tvar C_seen_K = false, C_seen_X = false, C_seen_S = false, C_seen_E = false, _R = -1, _C = -1;\n\t\t\tfor(rj=1; rj<record.length; ++rj) switch(record[rj].charAt(0)) {\n\t\t\t\tcase 'A': break; // TODO: comment\n\t\t\t\tcase 'X': C = parseInt(record[rj].slice(1))-1; C_seen_X = true; break;\n\t\t\t\tcase 'Y':\n\t\t\t\t\tR = parseInt(record[rj].slice(1))-1; if(!C_seen_X) C = 0;\n\t\t\t\t\tfor(j = arr.length; j <= R; ++j) arr[j] = [];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'K':\n\t\t\t\t\tval = record[rj].slice(1);\n\t\t\t\t\tif(val.charAt(0) === '\"') val = val.slice(1,val.length - 1);\n\t\t\t\t\telse if(val === 'TRUE') val = true;\n\t\t\t\t\telse if(val === 'FALSE') val = false;\n\t\t\t\t\telse if(!isNaN(fuzzynum(val))) {\n\t\t\t\t\t\tval = fuzzynum(val);\n\t\t\t\t\t\tif(next_cell_format !== null && fmt_is_date(next_cell_format)) val = numdate(val);\n\t\t\t\t\t} else if(!isNaN(fuzzydate(val).getDate())) {\n\t\t\t\t\t\tval = parseDate(val);\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof $cptable !== 'undefined' && typeof val == \"string\" && ((opts||{}).type != \"string\") && (opts||{}).codepage) val = $cptable.utils.decode(opts.codepage, val);\n\t\t\t\t\tC_seen_K = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'E':\n\t\t\t\t\tC_seen_E = true;\n\t\t\t\t\tvar formula = rc_to_a1(record[rj].slice(1), {r:R,c:C});\n\t\t\t\t\tarr[R][C] = [arr[R][C], formula];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'S':\n\t\t\t\t\tC_seen_S = true;\n\t\t\t\t\tarr[R][C] = [arr[R][C], \"S5S\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'G': break; // unknown\n\t\t\t\tcase 'R': _R = parseInt(record[rj].slice(1))-1; break;\n\t\t\t\tcase 'C': _C = parseInt(record[rj].slice(1))-1; break;\n\t\t\t\tdefault: if(opts && opts.WTF) throw new Error(\"SYLK bad record \" + rstr);\n\t\t\t}\n\t\t\tif(C_seen_K) {\n\t\t\t\tif(arr[R][C] && arr[R][C].length == 2) arr[R][C][0] = val;\n\t\t\t\telse arr[R][C] = val;\n\t\t\t\tnext_cell_format = null;\n\t\t\t}\n\t\t\tif(C_seen_S) {\n\t\t\t\tif(C_seen_E) throw new Error(\"SYLK shared formula cannot have own formula\");\n\t\t\t\tvar shrbase = _R > -1 && arr[_R][_C];\n\t\t\t\tif(!shrbase || !shrbase[1]) throw new Error(\"SYLK shared formula cannot find base\");\n\t\t\t\tarr[R][C][1] = shift_formula_str(shrbase[1], {r: R - _R, c: C - _C});\n\t\t\t}\n\t\t\tbreak;\n\t\t\tcase 'F':\n\t\t\tvar F_seen = 0;\n\t\t\tfor(rj=1; rj<record.length; ++rj) switch(record[rj].charAt(0)) {\n\t\t\t\tcase 'X': C = parseInt(record[rj].slice(1))-1; ++F_seen; break;\n\t\t\t\tcase 'Y':\n\t\t\t\t\tR = parseInt(record[rj].slice(1))-1; /*C = 0;*/\n\t\t\t\t\tfor(j = arr.length; j <= R; ++j) arr[j] = [];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'M': Mval = parseInt(record[rj].slice(1)) / 20; break;\n\t\t\t\tcase 'F': break; /* ??? */\n\t\t\t\tcase 'G': break; /* hide grid */\n\t\t\t\tcase 'P':\n\t\t\t\t\tnext_cell_format = formats[parseInt(record[rj].slice(1))];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'S': break; /* cell style */\n\t\t\t\tcase 'D': break; /* column */\n\t\t\t\tcase 'N': break; /* font */\n\t\t\t\tcase 'W':\n\t\t\t\t\tcw = record[rj].slice(1).split(\" \");\n\t\t\t\t\tfor(j = parseInt(cw[0], 10); j <= parseInt(cw[1], 10); ++j) {\n\t\t\t\t\t\tMval = parseInt(cw[2], 10);\n\t\t\t\t\t\tcolinfo[j-1] = Mval === 0 ? {hidden:true}: {wch:Mval}; process_col(colinfo[j-1]);\n\t\t\t\t\t} break;\n\t\t\t\tcase 'C': /* default column format */\n\t\t\t\t\tC = parseInt(record[rj].slice(1))-1;\n\t\t\t\t\tif(!colinfo[C]) colinfo[C] = {};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'R': /* row properties */\n\t\t\t\t\tR = parseInt(record[rj].slice(1))-1;\n\t\t\t\t\tif(!rowinfo[R]) rowinfo[R] = {};\n\t\t\t\t\tif(Mval > 0) { rowinfo[R].hpt = Mval; rowinfo[R].hpx = pt2px(Mval); }\n\t\t\t\t\telse if(Mval === 0) rowinfo[R].hidden = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: if(opts && opts.WTF) throw new Error(\"SYLK bad record \" + rstr);\n\t\t\t}\n\t\t\tif(F_seen < 1) next_cell_format = null; break;\n\t\t\tdefault: if(opts && opts.WTF) throw new Error(\"SYLK bad record \" + rstr);\n\t\t\t}\n\t\t}\n\t\tif(rowinfo.length > 0) sht['!rows'] = rowinfo;\n\t\tif(colinfo.length > 0) sht['!cols'] = colinfo;\n\t\tif(opts && opts.sheetRows) arr = arr.slice(0, opts.sheetRows);\n\t\treturn [arr, sht];\n\t}\n\n\tfunction sylk_to_sheet(d/*:RawData*/, opts)/*:Worksheet*/ {\n\t\tvar aoasht = sylk_to_aoa(d, opts);\n\t\tvar aoa = aoasht[0], ws = aoasht[1];\n\t\tvar o = aoa_to_sheet(aoa, opts);\n\t\tkeys(ws).forEach(function(k) { o[k] = ws[k]; });\n\t\treturn o;\n\t}\n\n\tfunction sylk_to_workbook(d/*:RawData*/, opts)/*:Workbook*/ { return sheet_to_workbook(sylk_to_sheet(d, opts), opts); }\n\n\tfunction write_ws_cell_sylk(cell/*:Cell*/, ws/*:Worksheet*/, R/*:number*/, C/*:number*//*::, opts*/)/*:string*/ {\n\t\tvar o = \"C;Y\" + (R+1) + \";X\" + (C+1) + \";K\";\n\t\tswitch(cell.t) {\n\t\t\tcase 'n':\n\t\t\t\to += (cell.v||0);\n\t\t\t\tif(cell.f && !cell.F) o += \";E\" + a1_to_rc(cell.f, {r:R, c:C}); break;\n\t\t\tcase 'b': o += cell.v ? \"TRUE\" : \"FALSE\"; break;\n\t\t\tcase 'e': o += cell.w || cell.v; break;\n\t\t\tcase 'd': o += '\"' + (cell.w || cell.v) + '\"'; break;\n\t\t\tcase 's': o += '\"' + cell.v.replace(/\"/g,\"\").replace(/;/g, \";;\") + '\"'; break;\n\t\t}\n\t\treturn o;\n\t}\n\n\tfunction write_ws_cols_sylk(out, cols) {\n\t\tcols.forEach(function(col, i) {\n\t\t\tvar rec = \"F;W\" + (i+1) + \" \" + (i+1) + \" \";\n\t\t\tif(col.hidden) rec += \"0\";\n\t\t\telse {\n\t\t\t\tif(typeof col.width == 'number' && !col.wpx) col.wpx = width2px(col.width);\n\t\t\t\tif(typeof col.wpx == 'number' && !col.wch) col.wch = px2char(col.wpx);\n\t\t\t\tif(typeof col.wch == 'number') rec += Math.round(col.wch);\n\t\t\t}\n\t\t\tif(rec.charAt(rec.length - 1) != \" \") out.push(rec);\n\t\t});\n\t}\n\n\tfunction write_ws_rows_sylk(out/*:Array<string>*/, rows/*:Array<RowInfo>*/) {\n\t\trows.forEach(function(row, i) {\n\t\t\tvar rec = \"F;\";\n\t\t\tif(row.hidden) rec += \"M0;\";\n\t\t\telse if(row.hpt) rec += \"M\" + 20 * row.hpt + \";\";\n\t\t\telse if(row.hpx) rec += \"M\" + 20 * px2pt(row.hpx) + \";\";\n\t\t\tif(rec.length > 2) out.push(rec + \"R\" + (i+1));\n\t\t});\n\t}\n\n\tfunction sheet_to_sylk(ws/*:Worksheet*/, opts/*:?any*/)/*:string*/ {\n\t\tvar preamble/*:Array<string>*/ = [\"ID;PWXL;N;E\"], o/*:Array<string>*/ = [];\n\t\tvar r = safe_decode_range(ws['!ref']), cell/*:Cell*/;\n\t\tvar dense = Array.isArray(ws);\n\t\tvar RS = \"\\r\\n\";\n\n\t\tpreamble.push(\"P;PGeneral\");\n\t\tpreamble.push(\"F;P0;DG0G8;M255\");\n\t\tif(ws['!cols']) write_ws_cols_sylk(preamble, ws['!cols']);\n\t\tif(ws['!rows']) write_ws_rows_sylk(preamble, ws['!rows']);\n\n\t\tpreamble.push(\"B;Y\" + (r.e.r - r.s.r + 1) + \";X\" + (r.e.c - r.s.c + 1) + \";D\" + [r.s.c,r.s.r,r.e.c,r.e.r].join(\" \"));\n\t\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\t\tfor(var C = r.s.c; C <= r.e.c; ++C) {\n\t\t\t\tvar coord = encode_cell({r:R,c:C});\n\t\t\t\tcell = dense ? (ws[R]||[])[C]: ws[coord];\n\t\t\t\tif(!cell || (cell.v == null && (!cell.f || cell.F))) continue;\n\t\t\t\to.push(write_ws_cell_sylk(cell, ws, R, C, opts));\n\t\t\t}\n\t\t}\n\t\treturn preamble.join(RS) + RS + o.join(RS) + RS + \"E\" + RS;\n\t}\n\n\treturn {\n\t\tto_workbook: sylk_to_workbook,\n\t\tto_sheet: sylk_to_sheet,\n\t\tfrom_sheet: sheet_to_sylk\n\t};\n})();\n\nvar DIF = /*#__PURE__*/(function() {\n\tfunction dif_to_aoa(d/*:RawData*/, opts)/*:AOA*/ {\n\t\tswitch(opts.type) {\n\t\t\tcase 'base64': return dif_to_aoa_str(Base64_decode(d), opts);\n\t\t\tcase 'binary': return dif_to_aoa_str(d, opts);\n\t\t\tcase 'buffer': return dif_to_aoa_str(has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d), opts);\n\t\t\tcase 'array': return dif_to_aoa_str(cc2str(d), opts);\n\t\t}\n\t\tthrow new Error(\"Unrecognized type \" + opts.type);\n\t}\n\tfunction dif_to_aoa_str(str/*:string*/, opts)/*:AOA*/ {\n\t\tvar records = str.split('\\n'), R = -1, C = -1, ri = 0, arr/*:AOA*/ = [];\n\t\tfor (; ri !== records.length; ++ri) {\n\t\t\tif (records[ri].trim() === 'BOT') { arr[++R] = []; C = 0; continue; }\n\t\t\tif (R < 0) continue;\n\t\t\tvar metadata = records[ri].trim().split(\",\");\n\t\t\tvar type = metadata[0], value = metadata[1];\n\t\t\t++ri;\n\t\t\tvar data = records[ri] || \"\";\n\t\t\twhile(((data.match(/[\"]/g)||[]).length & 1) && ri < records.length - 1) data += \"\\n\" + records[++ri];\n\t\t\tdata = data.trim();\n\t\t\tswitch (+type) {\n\t\t\t\tcase -1:\n\t\t\t\t\tif (data === 'BOT') { arr[++R] = []; C = 0; continue; }\n\t\t\t\t\telse if (data !== 'EOD') throw new Error(\"Unrecognized DIF special command \" + data);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0:\n\t\t\t\t\tif(data === 'TRUE') arr[R][C] = true;\n\t\t\t\t\telse if(data === 'FALSE') arr[R][C] = false;\n\t\t\t\t\telse if(!isNaN(fuzzynum(value))) arr[R][C] = fuzzynum(value);\n\t\t\t\t\telse if(!isNaN(fuzzydate(value).getDate())) arr[R][C] = parseDate(value);\n\t\t\t\t\telse arr[R][C] = value;\n\t\t\t\t\t++C; break;\n\t\t\t\tcase 1:\n\t\t\t\t\tdata = data.slice(1,data.length-1);\n\t\t\t\t\tdata = data.replace(/\"\"/g, '\"');\n\t\t\t\t\tif(DIF_XL && data && data.match(/^=\".*\"$/)) data = data.slice(2, -1);\n\t\t\t\t\tarr[R][C++] = data !== '' ? data : null;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (data === 'EOD') break;\n\t\t}\n\t\tif(opts && opts.sheetRows) arr = arr.slice(0, opts.sheetRows);\n\t\treturn arr;\n\t}\n\n\tfunction dif_to_sheet(str/*:string*/, opts)/*:Worksheet*/ { return aoa_to_sheet(dif_to_aoa(str, opts), opts); }\n\tfunction dif_to_workbook(str/*:string*/, opts)/*:Workbook*/ { return sheet_to_workbook(dif_to_sheet(str, opts), opts); }\n\n\tvar sheet_to_dif = /*#__PURE__*/(function() {\n\t\tvar push_field = function pf(o/*:Array<string>*/, topic/*:string*/, v/*:number*/, n/*:number*/, s/*:string*/) {\n\t\t\to.push(topic);\n\t\t\to.push(v + \",\" + n);\n\t\t\to.push('\"' + s.replace(/\"/g,'\"\"') + '\"');\n\t\t};\n\t\tvar push_value = function po(o/*:Array<string>*/, type/*:number*/, v/*:any*/, s/*:string*/) {\n\t\t\to.push(type + \",\" + v);\n\t\t\to.push(type == 1 ? '\"' + s.replace(/\"/g,'\"\"') + '\"' : s);\n\t\t};\n\t\treturn function sheet_to_dif(ws/*:Worksheet*//*::, opts:?any*/)/*:string*/ {\n\t\t\tvar o/*:Array<string>*/ = [];\n\t\t\tvar r = safe_decode_range(ws['!ref']), cell/*:Cell*/;\n\t\t\tvar dense = Array.isArray(ws);\n\t\t\tpush_field(o, \"TABLE\", 0, 1, \"sheetjs\");\n\t\t\tpush_field(o, \"VECTORS\", 0, r.e.r - r.s.r + 1,\"\");\n\t\t\tpush_field(o, \"TUPLES\", 0, r.e.c - r.s.c + 1,\"\");\n\t\t\tpush_field(o, \"DATA\", 0, 0,\"\");\n\t\t\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\t\t\tpush_value(o, -1, 0, \"BOT\");\n\t\t\t\tfor(var C = r.s.c; C <= r.e.c; ++C) {\n\t\t\t\t\tvar coord = encode_cell({r:R,c:C});\n\t\t\t\t\tcell = dense ? (ws[R]||[])[C] : ws[coord];\n\t\t\t\t\tif(!cell) { push_value(o, 1, 0, \"\"); continue;}\n\t\t\t\t\tswitch(cell.t) {\n\t\t\t\t\t\tcase 'n':\n\t\t\t\t\t\t\tvar val = DIF_XL ? cell.w : cell.v;\n\t\t\t\t\t\t\tif(!val && cell.v != null) val = cell.v;\n\t\t\t\t\t\t\tif(val == null) {\n\t\t\t\t\t\t\t\tif(DIF_XL && cell.f && !cell.F) push_value(o, 1, 0, \"=\" + cell.f);\n\t\t\t\t\t\t\t\telse push_value(o, 1, 0, \"\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse push_value(o, 0, val, \"V\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tpush_value(o, 0, cell.v ? 1 : 0, cell.v ? \"TRUE\" : \"FALSE\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\tpush_value(o, 1, 0, (!DIF_XL || isNaN(cell.v)) ? cell.v : '=\"' + cell.v + '\"');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\tif(!cell.w) cell.w = SSF_format(cell.z || table_fmt[14], datenum(parseDate(cell.v)));\n\t\t\t\t\t\t\tif(DIF_XL) push_value(o, 0, cell.w, \"V\");\n\t\t\t\t\t\t\telse push_value(o, 1, 0, cell.w);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault: push_value(o, 1, 0, \"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tpush_value(o, -1, 0, \"EOD\");\n\t\t\tvar RS = \"\\r\\n\";\n\t\t\tvar oo = o.join(RS);\n\t\t\t//while((oo.length & 0x7F) != 0) oo += \"\\0\";\n\t\t\treturn oo;\n\t\t};\n\t})();\n\treturn {\n\t\tto_workbook: dif_to_workbook,\n\t\tto_sheet: dif_to_sheet,\n\t\tfrom_sheet: sheet_to_dif\n\t};\n})();\n\nvar ETH = /*#__PURE__*/(function() {\n\tfunction decode(s/*:string*/)/*:string*/ { return s.replace(/\\\\b/g,\"\\\\\").replace(/\\\\c/g,\":\").replace(/\\\\n/g,\"\\n\"); }\n\tfunction encode(s/*:string*/)/*:string*/ { return s.replace(/\\\\/g, \"\\\\b\").replace(/:/g, \"\\\\c\").replace(/\\n/g,\"\\\\n\"); }\n\n\tfunction eth_to_aoa(str/*:string*/, opts)/*:AOA*/ {\n\t\tvar records = str.split('\\n'), R = -1, C = -1, ri = 0, arr/*:AOA*/ = [];\n\t\tfor (; ri !== records.length; ++ri) {\n\t\t\tvar record = records[ri].trim().split(\":\");\n\t\t\tif(record[0] !== 'cell') continue;\n\t\t\tvar addr = decode_cell(record[1]);\n\t\t\tif(arr.length <= addr.r) for(R = arr.length; R <= addr.r; ++R) if(!arr[R]) arr[R] = [];\n\t\t\tR = addr.r; C = addr.c;\n\t\t\tswitch(record[2]) {\n\t\t\t\tcase 't': arr[R][C] = decode(record[3]); break;\n\t\t\t\tcase 'v': arr[R][C] = +record[3]; break;\n\t\t\t\tcase 'vtf': var _f = record[record.length - 1];\n\t\t\t\t\t/* falls through */\n\t\t\t\tcase 'vtc':\n\t\t\t\t\tswitch(record[3]) {\n\t\t\t\t\t\tcase 'nl': arr[R][C] = +record[4] ? true : false; break;\n\t\t\t\t\t\tdefault: arr[R][C] = +record[4]; break;\n\t\t\t\t\t}\n\t\t\t\t\tif(record[2] == 'vtf') arr[R][C] = [arr[R][C], _f];\n\t\t\t}\n\t\t}\n\t\tif(opts && opts.sheetRows) arr = arr.slice(0, opts.sheetRows);\n\t\treturn arr;\n\t}\n\n\tfunction eth_to_sheet(d/*:string*/, opts)/*:Worksheet*/ { return aoa_to_sheet(eth_to_aoa(d, opts), opts); }\n\tfunction eth_to_workbook(d/*:string*/, opts)/*:Workbook*/ { return sheet_to_workbook(eth_to_sheet(d, opts), opts); }\n\n\tvar header = [\n\t\t\"socialcalc:version:1.5\",\n\t\t\"MIME-Version: 1.0\",\n\t\t\"Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave\"\n\t].join(\"\\n\");\n\n\tvar sep = [\n\t\t\"--SocialCalcSpreadsheetControlSave\",\n\t\t\"Content-type: text/plain; charset=UTF-8\"\n\t].join(\"\\n\") + \"\\n\";\n\n\t/* TODO: the other parts */\n\tvar meta = [\n\t\t\"# SocialCalc Spreadsheet Control Save\",\n\t\t\"part:sheet\"\n\t].join(\"\\n\");\n\n\tvar end = \"--SocialCalcSpreadsheetControlSave--\";\n\n\tfunction sheet_to_eth_data(ws/*:Worksheet*/)/*:string*/ {\n\t\tif(!ws || !ws['!ref']) return \"\";\n\t\tvar o/*:Array<string>*/ = [], oo/*:Array<string>*/ = [], cell, coord = \"\";\n\t\tvar r = decode_range(ws['!ref']);\n\t\tvar dense = Array.isArray(ws);\n\t\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\t\tfor(var C = r.s.c; C <= r.e.c; ++C) {\n\t\t\t\tcoord = encode_cell({r:R,c:C});\n\t\t\t\tcell = dense ? (ws[R]||[])[C] : ws[coord];\n\t\t\t\tif(!cell || cell.v == null || cell.t === 'z') continue;\n\t\t\t\too = [\"cell\", coord, 't'];\n\t\t\t\tswitch(cell.t) {\n\t\t\t\t\tcase 's': case 'str': oo.push(encode(cell.v)); break;\n\t\t\t\t\tcase 'n':\n\t\t\t\t\t\tif(!cell.f) { oo[2]='v'; oo[3]=cell.v; }\n\t\t\t\t\t\telse { oo[2]='vtf'; oo[3]='n'; oo[4]=cell.v; oo[5]=encode(cell.f); }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'b':\n\t\t\t\t\t\too[2] = 'vt'+(cell.f?'f':'c'); oo[3]='nl'; oo[4]=cell.v?\"1\":\"0\";\n\t\t\t\t\t\too[5] = encode(cell.f||(cell.v?'TRUE':'FALSE'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\tvar t = datenum(parseDate(cell.v));\n\t\t\t\t\t\too[2] = 'vtc'; oo[3] = 'nd'; oo[4] = \"\"+t;\n\t\t\t\t\t\too[5] = cell.w || SSF_format(cell.z || table_fmt[14], t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'e': continue;\n\t\t\t\t}\n\t\t\t\to.push(oo.join(\":\"));\n\t\t\t}\n\t\t}\n\t\to.push(\"sheet:c:\" + (r.e.c-r.s.c+1) + \":r:\" + (r.e.r-r.s.r+1) + \":tvf:1\");\n\t\to.push(\"valueformat:1:text-wiki\");\n\t\t//o.push(\"copiedfrom:\" + ws['!ref']); // clipboard only\n\t\treturn o.join(\"\\n\");\n\t}\n\n\tfunction sheet_to_eth(ws/*:Worksheet*//*::, opts:?any*/)/*:string*/ {\n\t\treturn [header, sep, meta, sep, sheet_to_eth_data(ws), end].join(\"\\n\");\n\t\t// return [\"version:1.5\", sheet_to_eth_data(ws)].join(\"\\n\"); // clipboard form\n\t}\n\n\treturn {\n\t\tto_workbook: eth_to_workbook,\n\t\tto_sheet: eth_to_sheet,\n\t\tfrom_sheet: sheet_to_eth\n\t};\n})();\n\nvar PRN = /*#__PURE__*/(function() {\n\tfunction set_text_arr(data/*:string*/, arr/*:AOA*/, R/*:number*/, C/*:number*/, o/*:any*/) {\n\t\tif(o.raw) arr[R][C] = data;\n\t\telse if(data === \"\"){/* empty */}\n\t\telse if(data === 'TRUE') arr[R][C] = true;\n\t\telse if(data === 'FALSE') arr[R][C] = false;\n\t\telse if(!isNaN(fuzzynum(data))) arr[R][C] = fuzzynum(data);\n\t\telse if(!isNaN(fuzzydate(data).getDate())) arr[R][C] = parseDate(data);\n\t\telse arr[R][C] = data;\n\t}\n\n\tfunction prn_to_aoa_str(f/*:string*/, opts)/*:AOA*/ {\n\t\tvar o = opts || {};\n\t\tvar arr/*:AOA*/ = ([]/*:any*/);\n\t\tif(!f || f.length === 0) return arr;\n\t\tvar lines = f.split(/[\\r\\n]/);\n\t\tvar L = lines.length - 1;\n\t\twhile(L >= 0 && lines[L].length === 0) --L;\n\t\tvar start = 10, idx = 0;\n\t\tvar R = 0;\n\t\tfor(; R <= L; ++R) {\n\t\t\tidx = lines[R].indexOf(\" \");\n\t\t\tif(idx == -1) idx = lines[R].length; else idx++;\n\t\t\tstart = Math.max(start, idx);\n\t\t}\n\t\tfor(R = 0; R <= L; ++R) {\n\t\t\tarr[R] = [];\n\t\t\t/* TODO: confirm that widths are always 10 */\n\t\t\tvar C = 0;\n\t\t\tset_text_arr(lines[R].slice(0, start).trim(), arr, R, C, o);\n\t\t\tfor(C = 1; C <= (lines[R].length - start)/10 + 1; ++C)\n\t\t\t\tset_text_arr(lines[R].slice(start+(C-1)*10,start+C*10).trim(),arr,R,C,o);\n\t\t}\n\t\tif(o.sheetRows) arr = arr.slice(0, o.sheetRows);\n\t\treturn arr;\n\t}\n\n\t// List of accepted CSV separators\n\tvar guess_seps = {\n\t\t/*::[*/0x2C/*::]*/: ',',\n\t\t/*::[*/0x09/*::]*/: \"\\t\",\n\t\t/*::[*/0x3B/*::]*/: ';',\n\t\t/*::[*/0x7C/*::]*/: '|'\n\t};\n\n\t// CSV separator weights to be used in case of equal numbers\n\tvar guess_sep_weights = {\n\t\t/*::[*/0x2C/*::]*/: 3,\n\t\t/*::[*/0x09/*::]*/: 2,\n\t\t/*::[*/0x3B/*::]*/: 1,\n\t\t/*::[*/0x7C/*::]*/: 0\n\t};\n\n\tfunction guess_sep(str) {\n\t\tvar cnt = {}, instr = false, end = 0, cc = 0;\n\t\tfor(;end < str.length;++end) {\n\t\t\tif((cc=str.charCodeAt(end)) == 0x22) instr = !instr;\n\t\t\telse if(!instr && cc in guess_seps) cnt[cc] = (cnt[cc]||0)+1;\n\t\t}\n\n\t\tcc = [];\n\t\tfor(end in cnt) if ( Object.prototype.hasOwnProperty.call(cnt, end) ) {\n\t\t\tcc.push([ cnt[end], end ]);\n\t\t}\n\n\t\tif ( !cc.length ) {\n\t\t\tcnt = guess_sep_weights;\n\t\t\tfor(end in cnt) if ( Object.prototype.hasOwnProperty.call(cnt, end) ) {\n\t\t\t\tcc.push([ cnt[end], end ]);\n\t\t\t}\n\t\t}\n\n\t\tcc.sort(function(a, b) { return a[0] - b[0] || guess_sep_weights[a[1]] - guess_sep_weights[b[1]]; });\n\n\t\treturn guess_seps[cc.pop()[1]] || 0x2C;\n\t}\n\n\tfunction dsv_to_sheet_str(str/*:string*/, opts)/*:Worksheet*/ {\n\t\tvar o = opts || {};\n\t\tvar sep = \"\";\n\t\tif(DENSE != null && o.dense == null) o.dense = DENSE;\n\t\tvar ws/*:Worksheet*/ = o.dense ? ([]/*:any*/) : ({}/*:any*/);\n\t\tvar range/*:Range*/ = ({s: {c:0, r:0}, e: {c:0, r:0}}/*:any*/);\n\n\t\tif(str.slice(0,4) == \"sep=\") {\n\t\t\t// If the line ends in \\r\\n\n\t\t\tif(str.charCodeAt(5) == 13 && str.charCodeAt(6) == 10 ) {\n\t\t\t\tsep = str.charAt(4); str = str.slice(7);\n\t\t\t}\n\t\t\t// If line ends in \\r OR \\n\n\t\t\telse if(str.charCodeAt(5) == 13 || str.charCodeAt(5) == 10 ) {\n\t\t\t\tsep = str.charAt(4); str = str.slice(6);\n\t\t\t}\n\t\t\telse sep = guess_sep(str.slice(0,1024));\n\t\t}\n\t\telse if(o && o.FS) sep = o.FS;\n\t\telse sep = guess_sep(str.slice(0,1024));\n\t\tvar R = 0, C = 0, v = 0;\n\t\tvar start = 0, end = 0, sepcc = sep.charCodeAt(0), instr = false, cc=0, startcc=str.charCodeAt(0);\n\t\tstr = str.replace(/\\r\\n/mg, \"\\n\");\n\t\tvar _re/*:?RegExp*/ = o.dateNF != null ? dateNF_regex(o.dateNF) : null;\n\t\tfunction finish_cell() {\n\t\t\tvar s = str.slice(start, end);\n\t\t\tvar cell = ({}/*:any*/);\n\t\t\tif(s.charAt(0) == '\"' && s.charAt(s.length - 1) == '\"') s = s.slice(1,-1).replace(/\"\"/g,'\"');\n\t\t\tif(s.length === 0) cell.t = 'z';\n\t\t\telse if(o.raw) { cell.t = 's'; cell.v = s; }\n\t\t\telse if(s.trim().length === 0) { cell.t = 's'; cell.v = s; }\n\t\t\telse if(s.charCodeAt(0) == 0x3D) {\n\t\t\t\tif(s.charCodeAt(1) == 0x22 && s.charCodeAt(s.length - 1) == 0x22) { cell.t = 's'; cell.v = s.slice(2,-1).replace(/\"\"/g,'\"'); }\n\t\t\t\telse if(fuzzyfmla(s)) { cell.t = 'n'; cell.f = s.slice(1); }\n\t\t\t\telse { cell.t = 's'; cell.v = s; } }\n\t\t\telse if(s == \"TRUE\") { cell.t = 'b'; cell.v = true; }\n\t\t\telse if(s == \"FALSE\") { cell.t = 'b'; cell.v = false; }\n\t\t\telse if(!isNaN(v = fuzzynum(s))) { cell.t = 'n'; if(o.cellText !== false) cell.w = s; cell.v = v; }\n\t\t\telse if(!isNaN(fuzzydate(s).getDate()) || _re && s.match(_re)) {\n\t\t\t\tcell.z = o.dateNF || table_fmt[14];\n\t\t\t\tvar k = 0;\n\t\t\t\tif(_re && s.match(_re)){ s=dateNF_fix(s, o.dateNF, (s.match(_re)||[])); k=1; }\n\t\t\t\tif(o.cellDates) { cell.t = 'd'; cell.v = parseDate(s, k); }\n\t\t\t\telse { cell.t = 'n'; cell.v = datenum(parseDate(s, k)); }\n\t\t\t\tif(o.cellText !== false) cell.w = SSF_format(cell.z, cell.v instanceof Date ? datenum(cell.v):cell.v);\n\t\t\t\tif(!o.cellNF) delete cell.z;\n\t\t\t} else {\n\t\t\t\tcell.t = 's';\n\t\t\t\tcell.v = s;\n\t\t\t}\n\t\t\tif(cell.t == 'z'){}\n\t\t\telse if(o.dense) { if(!ws[R]) ws[R] = []; ws[R][C] = cell; }\n\t\t\telse ws[encode_cell({c:C,r:R})] = cell;\n\t\t\tstart = end+1; startcc = str.charCodeAt(start);\n\t\t\tif(range.e.c < C) range.e.c = C;\n\t\t\tif(range.e.r < R) range.e.r = R;\n\t\t\tif(cc == sepcc) ++C; else { C = 0; ++R; if(o.sheetRows && o.sheetRows <= R) return true; }\n\t\t}\n\t\touter: for(;end < str.length;++end) switch((cc=str.charCodeAt(end))) {\n\t\t\tcase 0x22: if(startcc === 0x22) instr = !instr; break;\n\t\t\tcase sepcc: case 0x0a: case 0x0d: if(!instr && finish_cell()) break outer; break;\n\t\t\tdefault: break;\n\t\t}\n\t\tif(end - start > 0) finish_cell();\n\n\t\tws['!ref'] = encode_range(range);\n\t\treturn ws;\n\t}\n\n\tfunction prn_to_sheet_str(str/*:string*/, opts)/*:Worksheet*/ {\n\t\tif(!(opts && opts.PRN)) return dsv_to_sheet_str(str, opts);\n\t\tif(opts.FS) return dsv_to_sheet_str(str, opts);\n\t\tif(str.slice(0,4) == \"sep=\") return dsv_to_sheet_str(str, opts);\n\t\tif(str.indexOf(\"\\t\") >= 0 || str.indexOf(\",\") >= 0 || str.indexOf(\";\") >= 0) return dsv_to_sheet_str(str, opts);\n\t\treturn aoa_to_sheet(prn_to_aoa_str(str, opts), opts);\n\t}\n\n\tfunction prn_to_sheet(d/*:RawData*/, opts)/*:Worksheet*/ {\n\t\tvar str = \"\", bytes = opts.type == 'string' ? [0,0,0,0] : firstbyte(d, opts);\n\t\tswitch(opts.type) {\n\t\t\tcase 'base64': str = Base64_decode(d); break;\n\t\t\tcase 'binary': str = d; break;\n\t\t\tcase 'buffer':\n\t\t\t\tif(opts.codepage == 65001) str = d.toString('utf8'); // TODO: test if buf\n\t\t\t\telse if(opts.codepage && typeof $cptable !== 'undefined') str = $cptable.utils.decode(opts.codepage, d);\n\t\t\t\telse str = has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d);\n\t\t\t\tbreak;\n\t\t\tcase 'array': str = cc2str(d); break;\n\t\t\tcase 'string': str = d; break;\n\t\t\tdefault: throw new Error(\"Unrecognized type \" + opts.type);\n\t\t}\n\t\tif(bytes[0] == 0xEF && bytes[1] == 0xBB && bytes[2] == 0xBF) str = utf8read(str.slice(3));\n\t\telse if(opts.type != 'string' && opts.type != 'buffer' && opts.codepage == 65001) str = utf8read(str);\n\t\telse if((opts.type == 'binary') && typeof $cptable !== 'undefined' && opts.codepage)  str = $cptable.utils.decode(opts.codepage, $cptable.utils.encode(28591,str));\n\t\tif(str.slice(0,19) == \"socialcalc:version:\") return ETH.to_sheet(opts.type == 'string' ? str : utf8read(str), opts);\n\t\treturn prn_to_sheet_str(str, opts);\n\t}\n\n\tfunction prn_to_workbook(d/*:RawData*/, opts)/*:Workbook*/ { return sheet_to_workbook(prn_to_sheet(d, opts), opts); }\n\n\tfunction sheet_to_prn(ws/*:Worksheet*//*::, opts:?any*/)/*:string*/ {\n\t\tvar o/*:Array<string>*/ = [];\n\t\tvar r = safe_decode_range(ws['!ref']), cell/*:Cell*/;\n\t\tvar dense = Array.isArray(ws);\n\t\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\t\tvar oo/*:Array<string>*/ = [];\n\t\t\tfor(var C = r.s.c; C <= r.e.c; ++C) {\n\t\t\t\tvar coord = encode_cell({r:R,c:C});\n\t\t\t\tcell = dense ? (ws[R]||[])[C] : ws[coord];\n\t\t\t\tif(!cell || cell.v == null) { oo.push(\"          \"); continue; }\n\t\t\t\tvar w = (cell.w || (format_cell(cell), cell.w) || \"\").slice(0,10);\n\t\t\t\twhile(w.length < 10) w += \" \";\n\t\t\t\too.push(w + (C === 0 ? \" \" : \"\"));\n\t\t\t}\n\t\t\to.push(oo.join(\"\"));\n\t\t}\n\t\treturn o.join(\"\\n\");\n\t}\n\n\treturn {\n\t\tto_workbook: prn_to_workbook,\n\t\tto_sheet: prn_to_sheet,\n\t\tfrom_sheet: sheet_to_prn\n\t};\n})();\n\n/* Excel defaults to SYLK but warns if data is not valid */\nfunction read_wb_ID(d, opts) {\n\tvar o = opts || {}, OLD_WTF = !!o.WTF; o.WTF = true;\n\ttry {\n\t\tvar out = SYLK.to_workbook(d, o);\n\t\to.WTF = OLD_WTF;\n\t\treturn out;\n\t} catch(e) {\n\t\to.WTF = OLD_WTF;\n\t\tif(!e.message.match(/SYLK bad record ID/) && OLD_WTF) throw e;\n\t\treturn PRN.to_workbook(d, opts);\n\t}\n}\n\nvar WK_ = /*#__PURE__*/(function() {\n\tfunction lotushopper(data, cb/*:RecordHopperCB*/, opts/*:any*/) {\n\t\tif(!data) return;\n\t\tprep_blob(data, data.l || 0);\n\t\tvar Enum = opts.Enum || WK1Enum;\n\t\twhile(data.l < data.length) {\n\t\t\tvar RT = data.read_shift(2);\n\t\t\tvar R = Enum[RT] || Enum[0xFFFF];\n\t\t\tvar length = data.read_shift(2);\n\t\t\tvar tgt = data.l + length;\n\t\t\tvar d = R.f && R.f(data, length, opts);\n\t\t\tdata.l = tgt;\n\t\t\tif(cb(d, R, RT)) return;\n\t\t}\n\t}\n\n\tfunction lotus_to_workbook(d/*:RawData*/, opts) {\n\t\tswitch(opts.type) {\n\t\t\tcase 'base64': return lotus_to_workbook_buf(s2a(Base64_decode(d)), opts);\n\t\t\tcase 'binary': return lotus_to_workbook_buf(s2a(d), opts);\n\t\t\tcase 'buffer':\n\t\t\tcase 'array': return lotus_to_workbook_buf(d, opts);\n\t\t}\n\t\tthrow \"Unsupported type \" + opts.type;\n\t}\n\n\tfunction lotus_to_workbook_buf(d, opts)/*:Workbook*/ {\n\t\tif(!d) return d;\n\t\tvar o = opts || {};\n\t\tif(DENSE != null && o.dense == null) o.dense = DENSE;\n\t\tvar s/*:Worksheet*/ = ((o.dense ? [] : {})/*:any*/), n = \"Sheet1\", next_n = \"\", sidx = 0;\n\t\tvar sheets = {}, snames = [], realnames = [];\n\n\t\tvar refguess = {s: {r:0, c:0}, e: {r:0, c:0} };\n\t\tvar sheetRows = o.sheetRows || 0;\n\n\t\tif(d[2] == 0x00) {\n\t\t\tif(d[3] == 0x08 || d[3] == 0x09) {\n\t\t\t\tif(d.length >= 16 && d[14] == 0x05 && d[15] === 0x6c) throw new Error(\"Unsupported Works 3 for Mac file\");\n\t\t\t}\n\t\t}\n\n\t\tif(d[2] == 0x02) {\n\t\t\to.Enum = WK1Enum;\n\t\t\tlotushopper(d, function(val, R, RT) { switch(RT) {\n\t\t\t\tcase 0x00: /* BOF */\n\t\t\t\t\to.vers = val;\n\t\t\t\t\tif(val >= 0x1000) o.qpro = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06: refguess = val; break; /* RANGE */\n\t\t\t\tcase 0xCC: if(val) next_n = val; break; /* SHEETNAMECS */\n\t\t\t\tcase 0xDE: next_n = val; break; /* SHEETNAMELP */\n\t\t\t\tcase 0x0F: /* LABEL */\n\t\t\t\tcase 0x33: /* STRING */\n\t\t\t\t\tif(!o.qpro) val[1].v = val[1].v.slice(1);\n\t\t\t\t\t/* falls through */\n\t\t\t\tcase 0x0D: /* INTEGER */\n\t\t\t\tcase 0x0E: /* NUMBER */\n\t\t\t\tcase 0x10: /* FORMULA */\n\t\t\t\t\t/* TODO: actual translation of the format code */\n\t\t\t\t\tif(RT == 0x0E && (val[2] & 0x70) == 0x70 && (val[2] & 0x0F) > 1 && (val[2] & 0x0F) < 15) {\n\t\t\t\t\t\tval[1].z = o.dateNF || table_fmt[14];\n\t\t\t\t\t\tif(o.cellDates) { val[1].t = 'd'; val[1].v = numdate(val[1].v); }\n\t\t\t\t\t}\n\n\t\t\t\t\tif(o.qpro) {\n\t\t\t\t\t\tif(val[3] > sidx) {\n\t\t\t\t\t\t\ts[\"!ref\"] = encode_range(refguess);\n\t\t\t\t\t\t\tsheets[n] = s;\n\t\t\t\t\t\t\tsnames.push(n);\n\t\t\t\t\t\t\ts = (o.dense ? [] : {});\n\t\t\t\t\t\t\trefguess = {s: {r:0, c:0}, e: {r:0, c:0} };\n\t\t\t\t\t\t\tsidx = val[3]; n = next_n || \"Sheet\" + (sidx + 1); next_n = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar tmpcell = o.dense ? (s[val[0].r]||[])[val[0].c] : s[encode_cell(val[0])];\n\t\t\t\t\tif(tmpcell) {\n\t\t\t\t\t\ttmpcell.t = val[1].t; tmpcell.v = val[1].v;\n\t\t\t\t\t\tif(val[1].z != null) tmpcell.z = val[1].z;\n\t\t\t\t\t\tif(val[1].f != null) tmpcell.f = val[1].f;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif(o.dense) {\n\t\t\t\t\t\tif(!s[val[0].r]) s[val[0].r] = [];\n\t\t\t\t\t\ts[val[0].r][val[0].c] = val[1];\n\t\t\t\t\t} else s[encode_cell(val[0])] = val[1];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}}, o);\n\t\t} else if(d[2] == 0x1A || d[2] == 0x0E) {\n\t\t\to.Enum = WK3Enum;\n\t\t\tif(d[2] == 0x0E) { o.qpro = true; d.l = 0; }\n\t\t\tlotushopper(d, function(val, R, RT) { switch(RT) {\n\t\t\t\tcase 0xCC: n = val; break; /* SHEETNAMECS */\n\t\t\t\tcase 0x16: /* LABEL16 */\n\t\t\t\t\tval[1].v = val[1].v.slice(1);\n\t\t\t\t\t/* falls through */\n\t\t\t\tcase 0x17: /* NUMBER17 */\n\t\t\t\tcase 0x18: /* NUMBER18 */\n\t\t\t\tcase 0x19: /* FORMULA19 */\n\t\t\t\tcase 0x25: /* NUMBER25 */\n\t\t\t\tcase 0x27: /* NUMBER27 */\n\t\t\t\tcase 0x28: /* FORMULA28 */\n\t\t\t\t\tif(val[3] > sidx) {\n\t\t\t\t\t\ts[\"!ref\"] = encode_range(refguess);\n\t\t\t\t\t\tsheets[n] = s;\n\t\t\t\t\t\tsnames.push(n);\n\t\t\t\t\t\ts = (o.dense ? [] : {});\n\t\t\t\t\t\trefguess = {s: {r:0, c:0}, e: {r:0, c:0} };\n\t\t\t\t\t\tsidx = val[3]; n = \"Sheet\" + (sidx + 1);\n\t\t\t\t\t}\n\t\t\t\t\tif(sheetRows > 0 && val[0].r >= sheetRows) break;\n\t\t\t\t\tif(o.dense) {\n\t\t\t\t\t\tif(!s[val[0].r]) s[val[0].r] = [];\n\t\t\t\t\t\ts[val[0].r][val[0].c] = val[1];\n\t\t\t\t\t} else s[encode_cell(val[0])] = val[1];\n\t\t\t\t\tif(refguess.e.c < val[0].c) refguess.e.c = val[0].c;\n\t\t\t\t\tif(refguess.e.r < val[0].r) refguess.e.r = val[0].r;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x1B: /* XFORMAT */\n\t\t\t\t\tif(val[0x36b0]) realnames[val[0x36b0][0]] = val[0x36b0][1];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0601: /* SHEETINFOQP */\n\t\t\t\t\trealnames[val[0]] = val[1]; if(val[0] == sidx) n = val[1]; break;\n\t\t\t\tdefault: break;\n\t\t\t}}, o);\n\t\t} else throw new Error(\"Unrecognized LOTUS BOF \" + d[2]);\n\t\ts[\"!ref\"] = encode_range(refguess);\n\t\tsheets[next_n || n] = s;\n\t\tsnames.push(next_n || n);\n\t\tif(!realnames.length) return { SheetNames: snames, Sheets: sheets };\n\t\tvar osheets = {}, rnames = [];\n\t\t/* TODO: verify no collisions */\n\t\tfor(var i = 0; i < realnames.length; ++i) if(sheets[snames[i]]) {\n\t\t\trnames.push(realnames[i] || snames[i]);\n\t\t\tosheets[realnames[i]] = sheets[realnames[i]] || sheets[snames[i]];\n\t\t} else {\n\t\t\trnames.push(realnames[i]);\n\t\t\tosheets[realnames[i]] = ({ \"!ref\": \"A1\" });\n\t\t}\n\t\treturn { SheetNames: rnames, Sheets: osheets };\n\t}\n\n\tfunction sheet_to_wk1(ws/*:Worksheet*/, opts/*:WriteOpts*/) {\n\t\tvar o = opts || {};\n\t\tif(+o.codepage >= 0) set_cp(+o.codepage);\n\t\tif(o.type == \"string\") throw new Error(\"Cannot write WK1 to JS string\");\n\t\tvar ba = buf_array();\n\t\tvar range = safe_decode_range(ws[\"!ref\"]);\n\t\tvar dense = Array.isArray(ws);\n\t\tvar cols = [];\n\n\t\twrite_biff_rec(ba, 0x00, write_BOF_WK1(0x0406));\n\t\twrite_biff_rec(ba, 0x06, write_RANGE(range));\n\t\tvar max_R = Math.min(range.e.r, 8191);\n\t\tfor(var R = range.s.r; R <= max_R; ++R) {\n\t\t\tvar rr = encode_row(R);\n\t\t\tfor(var C = range.s.c; C <= range.e.c; ++C) {\n\t\t\t\tif(R === range.s.r) cols[C] = encode_col(C);\n\t\t\t\tvar ref = cols[C] + rr;\n\t\t\t\tvar cell = dense ? (ws[R]||[])[C] : ws[ref];\n\t\t\t\tif(!cell || cell.t == \"z\") continue;\n\t\t\t\t/* TODO: formula records */\n\t\t\t\tif(cell.t == \"n\") {\n\t\t\t\t\tif((cell.v|0)==cell.v && cell.v >= -32768 && cell.v <= 32767) write_biff_rec(ba, 0x0d, write_INTEGER(R, C, cell.v));\n\t\t\t\t\telse write_biff_rec(ba, 0x0e, write_NUMBER(R, C, cell.v));\n\t\t\t\t} else {\n\t\t\t\t\tvar str = format_cell(cell);\n\t\t\t\t\twrite_biff_rec(ba, 0x0F, write_LABEL(R, C, str.slice(0, 239)));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twrite_biff_rec(ba, 0x01);\n\t\treturn ba.end();\n\t}\n\n\tfunction book_to_wk3(wb/*:Workbook*/, opts/*:WriteOpts*/) {\n\t\tvar o = opts || {};\n\t\tif(+o.codepage >= 0) set_cp(+o.codepage);\n\t\tif(o.type == \"string\") throw new Error(\"Cannot write WK3 to JS string\");\n\t\tvar ba = buf_array();\n\n\t\twrite_biff_rec(ba, 0x00, write_BOF_WK3(wb));\n\n\t\tfor(var i = 0, cnt = 0; i < wb.SheetNames.length; ++i) if((wb.Sheets[wb.SheetNames[i]] || {})[\"!ref\"]) write_biff_rec(ba, 0x1b, write_XFORMAT_SHEETNAME(wb.SheetNames[i], cnt++));\n\n\t\tvar wsidx = 0;\n\t\tfor(i = 0; i < wb.SheetNames.length; ++i) {\n\t\t\tvar ws = wb.Sheets[wb.SheetNames[i]];\n\t\t\tif(!ws || !ws[\"!ref\"]) continue;\n\t\t\tvar range = safe_decode_range(ws[\"!ref\"]);\n\t\t\tvar dense = Array.isArray(ws);\n\t\t\tvar cols = [];\n\t\t\tvar max_R = Math.min(range.e.r, 8191);\n\t\t\tfor(var R = range.s.r; R <= max_R; ++R) {\n\t\t\t\tvar rr = encode_row(R);\n\t\t\t\tfor(var C = range.s.c; C <= range.e.c; ++C) {\n\t\t\t\t\tif(R === range.s.r) cols[C] = encode_col(C);\n\t\t\t\t\tvar ref = cols[C] + rr;\n\t\t\t\t\tvar cell = dense ? (ws[R]||[])[C] : ws[ref];\n\t\t\t\t\tif(!cell || cell.t == \"z\") continue;\n\t\t\t\t\t/* TODO: FORMULA19 NUMBER18 records */\n\t\t\t\t\tif(cell.t == \"n\") {\n\t\t\t\t\t\twrite_biff_rec(ba, 0x17, write_NUMBER_17(R, C, wsidx, cell.v));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar str = format_cell(cell);\n\t\t\t\t\t\t/* TODO: max len? */\n\t\t\t\t\t\twrite_biff_rec(ba, 0x16, write_LABEL_16(R, C, wsidx, str.slice(0, 239)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t++wsidx;\n\t\t}\n\n\t\twrite_biff_rec(ba, 0x01);\n\t\treturn ba.end();\n\t}\n\n\n\tfunction write_BOF_WK1(v/*:number*/) {\n\t\tvar out = new_buf(2);\n\t\tout.write_shift(2, v);\n\t\treturn out;\n\t}\n\n\tfunction write_BOF_WK3(wb/*:Workbook*/) {\n\t\tvar out = new_buf(26);\n\t\tout.write_shift(2, 0x1000);\n\t\tout.write_shift(2, 0x0004);\n\t\tout.write_shift(4, 0x0000);\n\t\tvar rows = 0, cols = 0, wscnt = 0;\n\t\tfor(var i = 0; i < wb.SheetNames.length; ++i) {\n\t\t\tvar name = wb.SheetNames[i];\n\t\t\tvar ws = wb.Sheets[name];\n\t\t\tif(!ws || !ws[\"!ref\"]) continue;\n\t\t\t++wscnt;\n\t\t\tvar range = decode_range(ws[\"!ref\"]);\n\t\t\tif(rows < range.e.r) rows = range.e.r;\n\t\t\tif(cols < range.e.c) cols = range.e.c;\n\t\t}\n\t\tif(rows > 8191) rows = 8191;\n\t\tout.write_shift(2, rows);\n\t\tout.write_shift(1, wscnt);\n\t\tout.write_shift(1, cols);\n\t\tout.write_shift(2, 0x00);\n\t\tout.write_shift(2, 0x00);\n\t\tout.write_shift(1, 0x01);\n\t\tout.write_shift(1, 0x02);\n\t\tout.write_shift(4, 0);\n\t\tout.write_shift(4, 0);\n\t\treturn out;\n\t}\n\n\tfunction parse_RANGE(blob, length, opts) {\n\t\tvar o = {s:{c:0,r:0},e:{c:0,r:0}};\n\t\tif(length == 8 && opts.qpro) {\n\t\t\to.s.c = blob.read_shift(1);\n\t\t\tblob.l++;\n\t\t\to.s.r = blob.read_shift(2);\n\t\t\to.e.c = blob.read_shift(1);\n\t\t\tblob.l++;\n\t\t\to.e.r = blob.read_shift(2);\n\t\t\treturn o;\n\t\t}\n\t\to.s.c = blob.read_shift(2);\n\t\to.s.r = blob.read_shift(2);\n\t\tif(length == 12 && opts.qpro) blob.l += 2;\n\t\to.e.c = blob.read_shift(2);\n\t\to.e.r = blob.read_shift(2);\n\t\tif(length == 12 && opts.qpro) blob.l += 2;\n\t\tif(o.s.c == 0xFFFF) o.s.c = o.e.c = o.s.r = o.e.r = 0;\n\t\treturn o;\n\t}\n\tfunction write_RANGE(range) {\n\t\tvar out = new_buf(8);\n\t\tout.write_shift(2, range.s.c);\n\t\tout.write_shift(2, range.s.r);\n\t\tout.write_shift(2, range.e.c);\n\t\tout.write_shift(2, range.e.r);\n\t\treturn out;\n\t}\n\n\tfunction parse_cell(blob, length, opts) {\n\t\tvar o = [{c:0,r:0}, {t:'n',v:0}, 0, 0];\n\t\tif(opts.qpro && opts.vers != 0x5120) {\n\t\t\to[0].c = blob.read_shift(1);\n\t\t\to[3] = blob.read_shift(1);\n\t\t\to[0].r = blob.read_shift(2);\n\t\t\tblob.l+=2;\n\t\t} else {\n\t\t\to[2] = blob.read_shift(1);\n\t\t\to[0].c = blob.read_shift(2); o[0].r = blob.read_shift(2);\n\t\t}\n\t\treturn o;\n\t}\n\n\tfunction parse_LABEL(blob, length, opts) {\n\t\tvar tgt = blob.l + length;\n\t\tvar o = parse_cell(blob, length, opts);\n\t\to[1].t = 's';\n\t\tif(opts.vers == 0x5120) {\n\t\t\tblob.l++;\n\t\t\tvar len = blob.read_shift(1);\n\t\t\to[1].v = blob.read_shift(len, 'utf8');\n\t\t\treturn o;\n\t\t}\n\t\tif(opts.qpro) blob.l++;\n\t\to[1].v = blob.read_shift(tgt - blob.l, 'cstr');\n\t\treturn o;\n\t}\n\tfunction write_LABEL(R, C, s) {\n\t\t/* TODO: encoding */\n\t\tvar o = new_buf(7 + s.length);\n\t\to.write_shift(1, 0xFF);\n\t\to.write_shift(2, C);\n\t\to.write_shift(2, R);\n\t\to.write_shift(1, 0x27); // ??\n\t\tfor(var i = 0; i < o.length; ++i) {\n\t\t\tvar cc = s.charCodeAt(i);\n\t\t\to.write_shift(1, cc >= 0x80 ? 0x5F : cc);\n\t\t}\n\t\to.write_shift(1, 0);\n\t\treturn o;\n\t}\n\n\tfunction parse_INTEGER(blob, length, opts) {\n\t\tvar o = parse_cell(blob, length, opts);\n\t\to[1].v = blob.read_shift(2, 'i');\n\t\treturn o;\n\t}\n\tfunction write_INTEGER(R, C, v) {\n\t\tvar o = new_buf(7);\n\t\to.write_shift(1, 0xFF);\n\t\to.write_shift(2, C);\n\t\to.write_shift(2, R);\n\t\to.write_shift(2, v, 'i');\n\t\treturn o;\n\t}\n\n\tfunction parse_NUMBER(blob, length, opts) {\n\t\tvar o = parse_cell(blob, length, opts);\n\t\to[1].v = blob.read_shift(8, 'f');\n\t\treturn o;\n\t}\n\tfunction write_NUMBER(R, C, v) {\n\t\tvar o = new_buf(13);\n\t\to.write_shift(1, 0xFF);\n\t\to.write_shift(2, C);\n\t\to.write_shift(2, R);\n\t\to.write_shift(8, v, 'f');\n\t\treturn o;\n\t}\n\n\tfunction parse_FORMULA(blob, length, opts) {\n\t\tvar tgt = blob.l + length;\n\t\tvar o = parse_cell(blob, length, opts);\n\t\t/* TODO: formula */\n\t\to[1].v = blob.read_shift(8, 'f');\n\t\tif(opts.qpro) blob.l = tgt;\n\t\telse {\n\t\t\tvar flen = blob.read_shift(2);\n\t\t\twk1_fmla_to_csf(blob.slice(blob.l, blob.l + flen), o);\n\t\t\tblob.l += flen;\n\t\t}\n\t\treturn o;\n\t}\n\n\tfunction wk1_parse_rc(B, V, col) {\n\t\tvar rel = V & 0x8000;\n\t\tV &= ~0x8000;\n\t\tV = (rel ? B : 0) + ((V >= 0x2000) ? V - 0x4000 : V);\n\t\treturn (rel ? \"\" : \"$\") + (col ? encode_col(V) : encode_row(V));\n\t}\n\t/* var oprec = [\n\t\t8, 8, 8, 8, 8, 8, 8, 8, 6, 4, 4, 5, 5, 7, 3, 3,\n\t\t3, 3, 3, 3, 1, 1, 2, 6, 8, 8, 8, 8, 8, 8, 8, 8\n\t]; */\n\t/* TODO: flesh out */\n\tvar FuncTab = {\n\t\t0x33: [\"FALSE\", 0],\n\t\t0x34: [\"TRUE\", 0],\n\t\t0x46: [\"LEN\", 1],\n\t\t0x50: [\"SUM\", 69],\n\t\t0x51: [\"AVERAGEA\", 69],\n\t\t0x52: [\"COUNTA\", 69],\n\t\t0x53: [\"MINA\", 69],\n\t\t0x54: [\"MAXA\", 69],\n\t\t0x6F: [\"T\", 1]\n\t};\n\tvar BinOpTab = [\n\t\t  \"\",   \"\",   \"\",   \"\",   \"\",   \"\",   \"\",   \"\", // eslint-disable-line no-mixed-spaces-and-tabs\n\t\t  \"\",  \"+\",  \"-\",  \"*\",  \"/\",  \"^\",  \"=\", \"<>\", // eslint-disable-line no-mixed-spaces-and-tabs\n\t\t\"<=\", \">=\",  \"<\",  \">\",   \"\",   \"\",   \"\",   \"\", // eslint-disable-line no-mixed-spaces-and-tabs\n\t\t \"&\",   \"\",   \"\",   \"\",   \"\",   \"\",   \"\",   \"\"  // eslint-disable-line no-mixed-spaces-and-tabs\n\t];\n\n\tfunction wk1_fmla_to_csf(blob, o) {\n\t\tprep_blob(blob, 0);\n\t\tvar out = [], argc = 0, R = \"\", C = \"\", argL = \"\", argR = \"\";\n\t\twhile(blob.l < blob.length) {\n\t\t\tvar cc = blob[blob.l++];\n\t\t\tswitch(cc) {\n\t\t\t\tcase 0x00: out.push(blob.read_shift(8, 'f')); break;\n\t\t\t\tcase 0x01: {\n\t\t\t\t\tC = wk1_parse_rc(o[0].c, blob.read_shift(2), true);\n\t\t\t\t\tR = wk1_parse_rc(o[0].r, blob.read_shift(2), false);\n\t\t\t\t\tout.push(C + R);\n\t\t\t\t} break;\n\t\t\t\tcase 0x02: {\n\t\t\t\t\tvar c = wk1_parse_rc(o[0].c, blob.read_shift(2), true);\n\t\t\t\t\tvar r = wk1_parse_rc(o[0].r, blob.read_shift(2), false);\n\t\t\t\t\tC = wk1_parse_rc(o[0].c, blob.read_shift(2), true);\n\t\t\t\t\tR = wk1_parse_rc(o[0].r, blob.read_shift(2), false);\n\t\t\t\t\tout.push(c + r + \":\" + C + R);\n\t\t\t\t} break;\n\t\t\t\tcase 0x03:\n\t\t\t\t\tif(blob.l < blob.length) { console.error(\"WK1 premature formula end\"); return; }\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x04: out.push(\"(\" + out.pop() + \")\"); break;\n\t\t\t\tcase 0x05: out.push(blob.read_shift(2)); break;\n\t\t\t\tcase 0x06: {\n\t\t\t\t\t/* TODO: text encoding */\n\t\t\t\t\tvar Z = \"\"; while((cc = blob[blob.l++])) Z += String.fromCharCode(cc);\n\t\t\t\t\tout.push('\"' + Z.replace(/\"/g, '\"\"') + '\"');\n\t\t\t\t} break;\n\n\t\t\t\tcase 0x08: out.push(\"-\" + out.pop()); break;\n\t\t\t\tcase 0x17: out.push(\"+\" + out.pop()); break;\n\t\t\t\tcase 0x16: out.push(\"NOT(\" + out.pop() + \")\"); break;\n\n\t\t\t\tcase 0x14: case 0x15: {\n\t\t\t\t\targR = out.pop(); argL = out.pop();\n\t\t\t\t\tout.push([\"AND\", \"OR\"][cc - 0x14] + \"(\" + argL + \",\" + argR + \")\");\n\t\t\t\t} break;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif(cc < 0x20 && BinOpTab[cc]) {\n\t\t\t\t\t\targR = out.pop(); argL = out.pop();\n\t\t\t\t\t\tout.push(argL + BinOpTab[cc] + argR);\n\t\t\t\t\t} else if(FuncTab[cc]) {\n\t\t\t\t\t\targc = FuncTab[cc][1];\n\t\t\t\t\t\tif(argc == 69) argc = blob[blob.l++];\n\t\t\t\t\t\tif(argc > out.length) { console.error(\"WK1 bad formula parse 0x\" + cc.toString(16) + \":|\" + out.join(\"|\") + \"|\"); return; }\n\t\t\t\t\t\tvar args = out.slice(-argc);\n\t\t\t\t\t\tout.length -= argc;\n\t\t\t\t\t\tout.push(FuncTab[cc][0] + \"(\" + args.join(\",\") + \")\");\n\t\t\t\t\t}\n\t\t\t\t\telse if(cc <= 0x07) return console.error(\"WK1 invalid opcode \" + cc.toString(16));\n\t\t\t\t\telse if(cc <= 0x18) return console.error(\"WK1 unsupported op \" + cc.toString(16));\n\t\t\t\t\telse if(cc <= 0x1E) return console.error(\"WK1 invalid opcode \" + cc.toString(16));\n\t\t\t\t\telse if(cc <= 0x73) return console.error(\"WK1 unsupported function opcode \" + cc.toString(16));\n\t\t\t\t\t// possible future functions ??\n\t\t\t\t\telse return console.error(\"WK1 unrecognized opcode \" + cc.toString(16));\n\t\t\t}\n\t\t}\n\t\tif(out.length == 1) o[1].f = \"\" + out[0];\n\t\telse console.error(\"WK1 bad formula parse |\" + out.join(\"|\") + \"|\");\n\t}\n\n\n\tfunction parse_cell_3(blob/*::, length*/) {\n\t\tvar o = [{c:0,r:0}, {t:'n',v:0}, 0];\n\t\to[0].r = blob.read_shift(2); o[3] = blob[blob.l++]; o[0].c = blob[blob.l++];\n\t\treturn o;\n\t}\n\n\tfunction parse_LABEL_16(blob, length) {\n\t\tvar o = parse_cell_3(blob, length);\n\t\to[1].t = 's';\n\t\to[1].v = blob.read_shift(length - 4, 'cstr');\n\t\treturn o;\n\t}\n\tfunction write_LABEL_16(R, C, wsidx, s) {\n\t\t/* TODO: encoding */\n\t\tvar o = new_buf(6 + s.length);\n\t\to.write_shift(2, R);\n\t\to.write_shift(1, wsidx);\n\t\to.write_shift(1, C);\n\t\to.write_shift(1, 0x27);\n\t\tfor(var i = 0; i < s.length; ++i) {\n\t\t\tvar cc = s.charCodeAt(i);\n\t\t\to.write_shift(1, cc >= 0x80 ? 0x5F : cc);\n\t\t}\n\t\to.write_shift(1, 0);\n\t\treturn o;\n\t}\n\n\tfunction parse_NUMBER_18(blob, length) {\n\t\tvar o = parse_cell_3(blob, length);\n\t\to[1].v = blob.read_shift(2);\n\t\tvar v = o[1].v >> 1;\n\t\tif(o[1].v & 0x1) {\n\t\t\tswitch(v & 0x07) {\n\t\t\t\tcase 0: v = (v >> 3) * 5000; break;\n\t\t\t\tcase 1: v = (v >> 3) * 500; break;\n\t\t\t\tcase 2: v = (v >> 3) / 20; break;\n\t\t\t\tcase 3: v = (v >> 3) / 200; break;\n\t\t\t\tcase 4: v = (v >> 3) / 2000; break;\n\t\t\t\tcase 5: v = (v >> 3) / 20000; break;\n\t\t\t\tcase 6: v = (v >> 3) / 16; break;\n\t\t\t\tcase 7: v = (v >> 3) / 64; break;\n\t\t\t}\n\t\t}\n\t\to[1].v = v;\n\t\treturn o;\n\t}\n\n\tfunction parse_NUMBER_17(blob, length) {\n\t\tvar o = parse_cell_3(blob, length);\n\t\tvar v1 = blob.read_shift(4);\n\t\tvar v2 = blob.read_shift(4);\n\t\tvar e = blob.read_shift(2);\n\t\tif(e == 0xFFFF) {\n\t\t\tif(v1 === 0 && v2 === 0xC0000000) { o[1].t = \"e\"; o[1].v = 0x0F; } // ERR -> #VALUE!\n\t\t\telse if(v1 === 0 && v2 === 0xD0000000) { o[1].t = \"e\"; o[1].v = 0x2A; } // NA -> #N/A\n\t\t\telse o[1].v = 0;\n\t\t\treturn o;\n\t\t}\n\t\tvar s = e & 0x8000; e = (e&0x7FFF) - 16446;\n\t\to[1].v = (1 - s*2) * (v2 * Math.pow(2, e+32) + v1 * Math.pow(2, e));\n\t\treturn o;\n\t}\n\tfunction write_NUMBER_17(R, C, wsidx, v) {\n\t\tvar o = new_buf(14);\n\t\to.write_shift(2, R);\n\t\to.write_shift(1, wsidx);\n\t\to.write_shift(1, C);\n\t\tif(v == 0) {\n\t\t\to.write_shift(4, 0);\n\t\t\to.write_shift(4, 0);\n\t\t\to.write_shift(2, 0xFFFF);\n\t\t\treturn o;\n\t\t}\n\t\tvar s = 0, e = 0, v1 = 0, v2 = 0;\n\t\tif(v < 0) { s = 1; v = -v; }\n\t\te = Math.log2(v) | 0;\n\t\tv /= Math.pow(2, e-31);\n\t\tv2 = (v)>>>0;\n\t\tif((v2&0x80000000) == 0) { v/=2; ++e; v2 = v >>> 0; }\n\t\tv -= v2;\n\t\tv2 |= 0x80000000;\n\t\tv2 >>>= 0;\n\t\tv *= Math.pow(2, 32);\n\t\tv1 = v>>>0;\n\t\to.write_shift(4, v1);\n\t\to.write_shift(4, v2);\n\t\te += 0x3FFF + (s ? 0x8000 : 0);\n\t\to.write_shift(2, e);\n\t\treturn o;\n\t}\n\n\tfunction parse_FORMULA_19(blob, length) {\n\t\tvar o = parse_NUMBER_17(blob, 14);\n\t\tblob.l += length - 14; /* TODO: WK3 formula */\n\t\treturn o;\n\t}\n\n\tfunction parse_NUMBER_25(blob, length) {\n\t\tvar o = parse_cell_3(blob, length);\n\t\tvar v1 = blob.read_shift(4);\n\t\to[1].v = v1 >> 6;\n\t\treturn o;\n\t}\n\n\tfunction parse_NUMBER_27(blob, length) {\n\t\tvar o = parse_cell_3(blob, length);\n\t\tvar v1 = blob.read_shift(8,'f');\n\t\to[1].v = v1;\n\t\treturn o;\n\t}\n\n\tfunction parse_FORMULA_28(blob, length) {\n\t\tvar o = parse_NUMBER_27(blob, 14);\n\t\tblob.l += length - 10; /* TODO: formula */\n\t\treturn o;\n\t}\n\n\tfunction parse_SHEETNAMECS(blob, length) {\n\t\treturn blob[blob.l + length - 1] == 0 ? blob.read_shift(length, 'cstr') : \"\";\n\t}\n\n\tfunction parse_SHEETNAMELP(blob, length) {\n\t\tvar len = blob[blob.l++];\n\t\tif(len > length - 1) len = length - 1;\n\t\tvar o = \"\"; while(o.length < len) o += String.fromCharCode(blob[blob.l++]);\n\t\treturn o;\n\t}\n\n\tfunction parse_SHEETINFOQP(blob, length, opts) {\n\t\tif(!opts.qpro || length < 21) return;\n\t\tvar id = blob.read_shift(1);\n\t\tblob.l += 17;\n\t\tblob.l += 1; //var len = blob.read_shift(1);\n\t\tblob.l += 2;\n\t\tvar nm = blob.read_shift(length - 21, 'cstr');\n\t\treturn [id, nm];\n\t}\n\n\tfunction parse_XFORMAT(blob, length) {\n\t\tvar o = {}, tgt = blob.l + length;\n\t\twhile(blob.l < tgt) {\n\t\t\tvar dt = blob.read_shift(2);\n\t\t\tif(dt == 0x36b0) {\n\t\t\t\to[dt] = [0, \"\"];\n\t\t\t\to[dt][0] = blob.read_shift(2);\n\t\t\t\twhile(blob[blob.l]) { o[dt][1] += String.fromCharCode(blob[blob.l]); blob.l++; } blob.l++;\n\t\t\t}\n\t\t\t// TODO: 0x3a99 ??\n\t\t}\n\t\treturn o;\n\t}\n\tfunction write_XFORMAT_SHEETNAME(name, wsidx) {\n\t\tvar out = new_buf(5 + name.length);\n\t\tout.write_shift(2, 0x36b0);\n\t\tout.write_shift(2, wsidx);\n\t\tfor(var i = 0; i < name.length; ++i) {\n\t\t\tvar cc = name.charCodeAt(i);\n\t\t\tout[out.l++] = cc > 0x7F ? 0x5F : cc;\n\t\t}\n\t\tout[out.l++] = 0;\n\t\treturn out;\n\t}\n\n\tvar WK1Enum = {\n\t\t/*::[*/0x0000/*::]*/: { n:\"BOF\", f:parseuint16 },\n\t\t/*::[*/0x0001/*::]*/: { n:\"EOF\" },\n\t\t/*::[*/0x0002/*::]*/: { n:\"CALCMODE\" },\n\t\t/*::[*/0x0003/*::]*/: { n:\"CALCORDER\" },\n\t\t/*::[*/0x0004/*::]*/: { n:\"SPLIT\" },\n\t\t/*::[*/0x0005/*::]*/: { n:\"SYNC\" },\n\t\t/*::[*/0x0006/*::]*/: { n:\"RANGE\", f:parse_RANGE },\n\t\t/*::[*/0x0007/*::]*/: { n:\"WINDOW1\" },\n\t\t/*::[*/0x0008/*::]*/: { n:\"COLW1\" },\n\t\t/*::[*/0x0009/*::]*/: { n:\"WINTWO\" },\n\t\t/*::[*/0x000A/*::]*/: { n:\"COLW2\" },\n\t\t/*::[*/0x000B/*::]*/: { n:\"NAME\" },\n\t\t/*::[*/0x000C/*::]*/: { n:\"BLANK\" },\n\t\t/*::[*/0x000D/*::]*/: { n:\"INTEGER\", f:parse_INTEGER },\n\t\t/*::[*/0x000E/*::]*/: { n:\"NUMBER\", f:parse_NUMBER },\n\t\t/*::[*/0x000F/*::]*/: { n:\"LABEL\", f:parse_LABEL },\n\t\t/*::[*/0x0010/*::]*/: { n:\"FORMULA\", f:parse_FORMULA },\n\t\t/*::[*/0x0018/*::]*/: { n:\"TABLE\" },\n\t\t/*::[*/0x0019/*::]*/: { n:\"ORANGE\" },\n\t\t/*::[*/0x001A/*::]*/: { n:\"PRANGE\" },\n\t\t/*::[*/0x001B/*::]*/: { n:\"SRANGE\" },\n\t\t/*::[*/0x001C/*::]*/: { n:\"FRANGE\" },\n\t\t/*::[*/0x001D/*::]*/: { n:\"KRANGE1\" },\n\t\t/*::[*/0x0020/*::]*/: { n:\"HRANGE\" },\n\t\t/*::[*/0x0023/*::]*/: { n:\"KRANGE2\" },\n\t\t/*::[*/0x0024/*::]*/: { n:\"PROTEC\" },\n\t\t/*::[*/0x0025/*::]*/: { n:\"FOOTER\" },\n\t\t/*::[*/0x0026/*::]*/: { n:\"HEADER\" },\n\t\t/*::[*/0x0027/*::]*/: { n:\"SETUP\" },\n\t\t/*::[*/0x0028/*::]*/: { n:\"MARGINS\" },\n\t\t/*::[*/0x0029/*::]*/: { n:\"LABELFMT\" },\n\t\t/*::[*/0x002A/*::]*/: { n:\"TITLES\" },\n\t\t/*::[*/0x002B/*::]*/: { n:\"SHEETJS\" },\n\t\t/*::[*/0x002D/*::]*/: { n:\"GRAPH\" },\n\t\t/*::[*/0x002E/*::]*/: { n:\"NGRAPH\" },\n\t\t/*::[*/0x002F/*::]*/: { n:\"CALCCOUNT\" },\n\t\t/*::[*/0x0030/*::]*/: { n:\"UNFORMATTED\" },\n\t\t/*::[*/0x0031/*::]*/: { n:\"CURSORW12\" },\n\t\t/*::[*/0x0032/*::]*/: { n:\"WINDOW\" },\n\t\t/*::[*/0x0033/*::]*/: { n:\"STRING\", f:parse_LABEL },\n\t\t/*::[*/0x0037/*::]*/: { n:\"PASSWORD\" },\n\t\t/*::[*/0x0038/*::]*/: { n:\"LOCKED\" },\n\t\t/*::[*/0x003C/*::]*/: { n:\"QUERY\" },\n\t\t/*::[*/0x003D/*::]*/: { n:\"QUERYNAME\" },\n\t\t/*::[*/0x003E/*::]*/: { n:\"PRINT\" },\n\t\t/*::[*/0x003F/*::]*/: { n:\"PRINTNAME\" },\n\t\t/*::[*/0x0040/*::]*/: { n:\"GRAPH2\" },\n\t\t/*::[*/0x0041/*::]*/: { n:\"GRAPHNAME\" },\n\t\t/*::[*/0x0042/*::]*/: { n:\"ZOOM\" },\n\t\t/*::[*/0x0043/*::]*/: { n:\"SYMSPLIT\" },\n\t\t/*::[*/0x0044/*::]*/: { n:\"NSROWS\" },\n\t\t/*::[*/0x0045/*::]*/: { n:\"NSCOLS\" },\n\t\t/*::[*/0x0046/*::]*/: { n:\"RULER\" },\n\t\t/*::[*/0x0047/*::]*/: { n:\"NNAME\" },\n\t\t/*::[*/0x0048/*::]*/: { n:\"ACOMM\" },\n\t\t/*::[*/0x0049/*::]*/: { n:\"AMACRO\" },\n\t\t/*::[*/0x004A/*::]*/: { n:\"PARSE\" },\n\t\t/*::[*/0x0066/*::]*/: { n:\"PRANGES??\" },\n\t\t/*::[*/0x0067/*::]*/: { n:\"RRANGES??\" },\n\t\t/*::[*/0x0068/*::]*/: { n:\"FNAME??\" },\n\t\t/*::[*/0x0069/*::]*/: { n:\"MRANGES??\" },\n\t\t/*::[*/0x00CC/*::]*/: { n:\"SHEETNAMECS\", f:parse_SHEETNAMECS },\n\t\t/*::[*/0x00DE/*::]*/: { n:\"SHEETNAMELP\", f:parse_SHEETNAMELP },\n\t\t/*::[*/0xFFFF/*::]*/: { n:\"\" }\n\t};\n\n\tvar WK3Enum = {\n\t\t/*::[*/0x0000/*::]*/: { n:\"BOF\" },\n\t\t/*::[*/0x0001/*::]*/: { n:\"EOF\" },\n\t\t/*::[*/0x0002/*::]*/: { n:\"PASSWORD\" },\n\t\t/*::[*/0x0003/*::]*/: { n:\"CALCSET\" },\n\t\t/*::[*/0x0004/*::]*/: { n:\"WINDOWSET\" },\n\t\t/*::[*/0x0005/*::]*/: { n:\"SHEETCELLPTR\" },\n\t\t/*::[*/0x0006/*::]*/: { n:\"SHEETLAYOUT\" },\n\t\t/*::[*/0x0007/*::]*/: { n:\"COLUMNWIDTH\" },\n\t\t/*::[*/0x0008/*::]*/: { n:\"HIDDENCOLUMN\" },\n\t\t/*::[*/0x0009/*::]*/: { n:\"USERRANGE\" },\n\t\t/*::[*/0x000A/*::]*/: { n:\"SYSTEMRANGE\" },\n\t\t/*::[*/0x000B/*::]*/: { n:\"ZEROFORCE\" },\n\t\t/*::[*/0x000C/*::]*/: { n:\"SORTKEYDIR\" },\n\t\t/*::[*/0x000D/*::]*/: { n:\"FILESEAL\" },\n\t\t/*::[*/0x000E/*::]*/: { n:\"DATAFILLNUMS\" },\n\t\t/*::[*/0x000F/*::]*/: { n:\"PRINTMAIN\" },\n\t\t/*::[*/0x0010/*::]*/: { n:\"PRINTSTRING\" },\n\t\t/*::[*/0x0011/*::]*/: { n:\"GRAPHMAIN\" },\n\t\t/*::[*/0x0012/*::]*/: { n:\"GRAPHSTRING\" },\n\t\t/*::[*/0x0013/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0014/*::]*/: { n:\"ERRCELL\" },\n\t\t/*::[*/0x0015/*::]*/: { n:\"NACELL\" },\n\t\t/*::[*/0x0016/*::]*/: { n:\"LABEL16\", f:parse_LABEL_16},\n\t\t/*::[*/0x0017/*::]*/: { n:\"NUMBER17\", f:parse_NUMBER_17 },\n\t\t/*::[*/0x0018/*::]*/: { n:\"NUMBER18\", f:parse_NUMBER_18 },\n\t\t/*::[*/0x0019/*::]*/: { n:\"FORMULA19\", f:parse_FORMULA_19},\n\t\t/*::[*/0x001A/*::]*/: { n:\"FORMULA1A\" },\n\t\t/*::[*/0x001B/*::]*/: { n:\"XFORMAT\", f:parse_XFORMAT },\n\t\t/*::[*/0x001C/*::]*/: { n:\"DTLABELMISC\" },\n\t\t/*::[*/0x001D/*::]*/: { n:\"DTLABELCELL\" },\n\t\t/*::[*/0x001E/*::]*/: { n:\"GRAPHWINDOW\" },\n\t\t/*::[*/0x001F/*::]*/: { n:\"CPA\" },\n\t\t/*::[*/0x0020/*::]*/: { n:\"LPLAUTO\" },\n\t\t/*::[*/0x0021/*::]*/: { n:\"QUERY\" },\n\t\t/*::[*/0x0022/*::]*/: { n:\"HIDDENSHEET\" },\n\t\t/*::[*/0x0023/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0025/*::]*/: { n:\"NUMBER25\", f:parse_NUMBER_25 },\n\t\t/*::[*/0x0026/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0027/*::]*/: { n:\"NUMBER27\", f:parse_NUMBER_27 },\n\t\t/*::[*/0x0028/*::]*/: { n:\"FORMULA28\", f:parse_FORMULA_28 },\n\t\t/*::[*/0x008E/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0093/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0096/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0097/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0098/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0099/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x009A/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x009B/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x009C/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00A3/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00AE/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00AF/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00B0/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00B1/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00B8/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00B9/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00BA/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00BB/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00BC/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00C3/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00C9/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00CC/*::]*/: { n:\"SHEETNAMECS\", f:parse_SHEETNAMECS },\n\t\t/*::[*/0x00CD/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00CE/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00CF/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x00D0/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0100/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0103/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0104/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0105/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0106/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0107/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0109/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x010A/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x010B/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x010C/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x010E/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x010F/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0180/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0185/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0186/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0189/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x018C/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0200/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0202/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0201/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0204/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0205/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0280/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0281/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0282/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0283/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0284/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0285/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0286/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0287/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0288/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0292/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0293/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0294/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0295/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0296/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0299/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x029A/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0300/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0304/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0601/*::]*/: { n:\"SHEETINFOQP\", f:parse_SHEETINFOQP },\n\t\t/*::[*/0x0640/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0642/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0701/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0702/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0703/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0704/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0780/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0800/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0801/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0804/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x0A80/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x2AF6/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x3231/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x6E49/*::]*/: { n:\"??\" },\n\t\t/*::[*/0x6F44/*::]*/: { n:\"??\" },\n\t\t/*::[*/0xFFFF/*::]*/: { n:\"\" }\n\t};\n\treturn {\n\t\tsheet_to_wk1: sheet_to_wk1,\n\t\tbook_to_wk3: book_to_wk3,\n\t\tto_workbook: lotus_to_workbook\n\t};\n})();\n/* 18.4.7 rPr CT_RPrElt */\nfunction parse_rpr(rpr) {\n\tvar font = {}, m = rpr.match(tagregex), i = 0;\n\tvar pass = false;\n\tif(m) for(;i!=m.length; ++i) {\n\t\tvar y = parsexmltag(m[i]);\n\t\tswitch(y[0].replace(/\\w*:/g,\"\")) {\n\t\t\t/* 18.8.12 condense CT_BooleanProperty */\n\t\t\t/* ** not required . */\n\t\t\tcase '<condense': break;\n\t\t\t/* 18.8.17 extend CT_BooleanProperty */\n\t\t\t/* ** not required . */\n\t\t\tcase '<extend': break;\n\t\t\t/* 18.8.36 shadow CT_BooleanProperty */\n\t\t\t/* ** not required . */\n\t\t\tcase '<shadow':\n\t\t\t\tif(!y.val) break;\n\t\t\t\t/* falls through */\n\t\t\tcase '<shadow>':\n\t\t\tcase '<shadow/>': font.shadow = 1; break;\n\t\t\tcase '</shadow>': break;\n\n\t\t\t/* 18.4.1 charset CT_IntProperty TODO */\n\t\t\tcase '<charset':\n\t\t\t\tif(y.val == '1') break;\n\t\t\t\tfont.cp = CS2CP[parseInt(y.val, 10)];\n\t\t\t\tbreak;\n\n\t\t\t/* 18.4.2 outline CT_BooleanProperty TODO */\n\t\t\tcase '<outline':\n\t\t\t\tif(!y.val) break;\n\t\t\t\t/* falls through */\n\t\t\tcase '<outline>':\n\t\t\tcase '<outline/>': font.outline = 1; break;\n\t\t\tcase '</outline>': break;\n\n\t\t\t/* 18.4.5 rFont CT_FontName */\n\t\t\tcase '<rFont': font.name = y.val; break;\n\n\t\t\t/* 18.4.11 sz CT_FontSize */\n\t\t\tcase '<sz': font.sz = y.val; break;\n\n\t\t\t/* 18.4.10 strike CT_BooleanProperty */\n\t\t\tcase '<strike':\n\t\t\t\tif(!y.val) break;\n\t\t\t\t/* falls through */\n\t\t\tcase '<strike>':\n\t\t\tcase '<strike/>': font.strike = 1; break;\n\t\t\tcase '</strike>': break;\n\n\t\t\t/* 18.4.13 u CT_UnderlineProperty */\n\t\t\tcase '<u':\n\t\t\t\tif(!y.val) break;\n\t\t\t\tswitch(y.val) {\n\t\t\t\t\tcase 'double': font.uval = \"double\"; break;\n\t\t\t\t\tcase 'singleAccounting': font.uval = \"single-accounting\"; break;\n\t\t\t\t\tcase 'doubleAccounting': font.uval = \"double-accounting\"; break;\n\t\t\t\t}\n\t\t\t\t/* falls through */\n\t\t\tcase '<u>':\n\t\t\tcase '<u/>': font.u = 1; break;\n\t\t\tcase '</u>': break;\n\n\t\t\t/* 18.8.2 b */\n\t\t\tcase '<b':\n\t\t\t\tif(y.val == '0') break;\n\t\t\t\t/* falls through */\n\t\t\tcase '<b>':\n\t\t\tcase '<b/>': font.b = 1; break;\n\t\t\tcase '</b>': break;\n\n\t\t\t/* 18.8.26 i */\n\t\t\tcase '<i':\n\t\t\t\tif(y.val == '0') break;\n\t\t\t\t/* falls through */\n\t\t\tcase '<i>':\n\t\t\tcase '<i/>': font.i = 1; break;\n\t\t\tcase '</i>': break;\n\n\t\t\t/* 18.3.1.15 color CT_Color TODO: tint, theme, auto, indexed */\n\t\t\tcase '<color':\n\t\t\t\tif(y.rgb) font.color = y.rgb.slice(2,8);\n\t\t\t\tbreak;\n\t\t\tcase '<color>': case '<color/>': case '</color>': break;\n\n\t\t\t/* 18.8.18 family ST_FontFamily */\n\t\t\tcase '<family': font.family = y.val; break;\n\t\t\tcase '<family>': case '<family/>': case '</family>': break;\n\n\t\t\t/* 18.4.14 vertAlign CT_VerticalAlignFontProperty TODO */\n\t\t\tcase '<vertAlign': font.valign = y.val; break;\n\t\t\tcase '<vertAlign>': case '<vertAlign/>': case '</vertAlign>': break;\n\n\t\t\t/* 18.8.35 scheme CT_FontScheme TODO */\n\t\t\tcase '<scheme': break;\n\t\t\tcase '<scheme>': case '<scheme/>': case '</scheme>': break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': break;\n\t\t\tcase '<ext': pass = true; break;\n\t\t\tcase '</ext>': pass = false; break;\n\t\t\tdefault:\n\t\t\t\tif(y[0].charCodeAt(1) !== 47 && !pass) throw new Error('Unrecognized rich format ' + y[0]);\n\t\t}\n\t}\n\treturn font;\n}\n\nvar parse_rs = /*#__PURE__*/(function() {\n\tvar tregex = matchtag(\"t\"), rpregex = matchtag(\"rPr\");\n\t/* 18.4.4 r CT_RElt */\n\tfunction parse_r(r) {\n\t\t/* 18.4.12 t ST_Xstring */\n\t\tvar t = r.match(tregex)/*, cp = 65001*/;\n\t\tif(!t) return {t:\"s\", v:\"\"};\n\n\t\tvar o/*:Cell*/ = ({t:'s', v:unescapexml(t[1])}/*:any*/);\n\t\tvar rpr = r.match(rpregex);\n\t\tif(rpr) o.s = parse_rpr(rpr[1]);\n\t\treturn o;\n\t}\n\tvar rregex = /<(?:\\w+:)?r>/g, rend = /<\\/(?:\\w+:)?r>/;\n\treturn function parse_rs(rs) {\n\t\treturn rs.replace(rregex,\"\").split(rend).map(parse_r).filter(function(r) { return r.v; });\n\t};\n})();\n\n\n/* Parse a list of <r> tags */\nvar rs_to_html = /*#__PURE__*/(function parse_rs_factory() {\n\tvar nlregex = /(\\r\\n|\\n)/g;\n\tfunction parse_rpr2(font, intro, outro) {\n\t\tvar style/*:Array<string>*/ = [];\n\n\t\tif(font.u) style.push(\"text-decoration: underline;\");\n\t\tif(font.uval) style.push(\"text-underline-style:\" + font.uval + \";\");\n\t\tif(font.sz) style.push(\"font-size:\" + font.sz + \"pt;\");\n\t\tif(font.outline) style.push(\"text-effect: outline;\");\n\t\tif(font.shadow) style.push(\"text-shadow: auto;\");\n\t\tintro.push('<span style=\"' + style.join(\"\") + '\">');\n\n\t\tif(font.b) { intro.push(\"<b>\"); outro.push(\"</b>\"); }\n\t\tif(font.i) { intro.push(\"<i>\"); outro.push(\"</i>\"); }\n\t\tif(font.strike) { intro.push(\"<s>\"); outro.push(\"</s>\"); }\n\n\t\tvar align = font.valign || \"\";\n\t\tif(align == \"superscript\" || align == \"super\") align = \"sup\";\n\t\telse if(align == \"subscript\") align = \"sub\";\n\t\tif(align != \"\") { intro.push(\"<\" + align + \">\"); outro.push(\"</\" + align + \">\"); }\n\n\t\toutro.push(\"</span>\");\n\t\treturn font;\n\t}\n\n\t/* 18.4.4 r CT_RElt */\n\tfunction r_to_html(r) {\n\t\tvar terms/*:[Array<string>, string, Array<string>]*/ = [[],r.v,[]];\n\t\tif(!r.v) return \"\";\n\n\t\tif(r.s) parse_rpr2(r.s, terms[0], terms[2]);\n\n\t\treturn terms[0].join(\"\") + terms[1].replace(nlregex,'<br/>') + terms[2].join(\"\");\n\t}\n\n\treturn function parse_rs(rs) {\n\t\treturn rs.map(r_to_html).join(\"\");\n\t};\n})();\n\n/* 18.4.8 si CT_Rst */\nvar sitregex = /<(?:\\w+:)?t[^>]*>([^<]*)<\\/(?:\\w+:)?t>/g, sirregex = /<(?:\\w+:)?r>/;\nvar sirphregex = /<(?:\\w+:)?rPh.*?>([\\s\\S]*?)<\\/(?:\\w+:)?rPh>/g;\nfunction parse_si(x, opts) {\n\tvar html = opts ? opts.cellHTML : true;\n\tvar z = {};\n\tif(!x) return { t: \"\" };\n\t//var y;\n\t/* 18.4.12 t ST_Xstring (Plaintext String) */\n\t// TODO: is whitespace actually valid here?\n\tif(x.match(/^\\s*<(?:\\w+:)?t[^>]*>/)) {\n\t\tz.t = unescapexml(utf8read(x.slice(x.indexOf(\">\")+1).split(/<\\/(?:\\w+:)?t>/)[0]||\"\"));\n\t\tz.r = utf8read(x);\n\t\tif(html) z.h = escapehtml(z.t);\n\t}\n\t/* 18.4.4 r CT_RElt (Rich Text Run) */\n\telse if((/*y = */x.match(sirregex))) {\n\t\tz.r = utf8read(x);\n\t\tz.t = unescapexml(utf8read((x.replace(sirphregex, '').match(sitregex)||[]).join(\"\").replace(tagregex,\"\")));\n\t\tif(html) z.h = rs_to_html(parse_rs(z.r));\n\t}\n\t/* 18.4.3 phoneticPr CT_PhoneticPr (TODO: needed for Asian support) */\n\t/* 18.4.6 rPh CT_PhoneticRun (TODO: needed for Asian support) */\n\treturn z;\n}\n\n/* 18.4 Shared String Table */\nvar sstr0 = /<(?:\\w+:)?sst([^>]*)>([\\s\\S]*)<\\/(?:\\w+:)?sst>/;\nvar sstr1 = /<(?:\\w+:)?(?:si|sstItem)>/g;\nvar sstr2 = /<\\/(?:\\w+:)?(?:si|sstItem)>/;\nfunction parse_sst_xml(data/*:string*/, opts)/*:SST*/ {\n\tvar s/*:SST*/ = ([]/*:any*/), ss = \"\";\n\tif(!data) return s;\n\t/* 18.4.9 sst CT_Sst */\n\tvar sst = data.match(sstr0);\n\tif(sst) {\n\t\tss = sst[2].replace(sstr1,\"\").split(sstr2);\n\t\tfor(var i = 0; i != ss.length; ++i) {\n\t\t\tvar o = parse_si(ss[i].trim(), opts);\n\t\t\tif(o != null) s[s.length] = o;\n\t\t}\n\t\tsst = parsexmltag(sst[1]); s.Count = sst.count; s.Unique = sst.uniqueCount;\n\t}\n\treturn s;\n}\n\nvar straywsregex = /^\\s|\\s$|[\\t\\n\\r]/;\nfunction write_sst_xml(sst/*:SST*/, opts)/*:string*/ {\n\tif(!opts.bookSST) return \"\";\n\tvar o = [XML_HEADER];\n\to[o.length] = (writextag('sst', null, {\n\t\txmlns: XMLNS_main[0],\n\t\tcount: sst.Count,\n\t\tuniqueCount: sst.Unique\n\t}));\n\tfor(var i = 0; i != sst.length; ++i) { if(sst[i] == null) continue;\n\t\tvar s/*:XLString*/ = sst[i];\n\t\tvar sitag = \"<si>\";\n\t\tif(s.r) sitag += s.r;\n\t\telse {\n\t\t\tsitag += \"<t\";\n\t\t\tif(!s.t) s.t = \"\";\n\t\t\tif(s.t.match(straywsregex)) sitag += ' xml:space=\"preserve\"';\n\t\t\tsitag += \">\" + escapexml(s.t) + \"</t>\";\n\t\t}\n\t\tsitag += \"</si>\";\n\t\to[o.length] = (sitag);\n\t}\n\tif(o.length>2){ o[o.length] = ('</sst>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* [MS-XLSB] 2.4.221 BrtBeginSst */\nfunction parse_BrtBeginSst(data) {\n\treturn [data.read_shift(4), data.read_shift(4)];\n}\n\n/* [MS-XLSB] 2.1.7.45 Shared Strings */\nfunction parse_sst_bin(data, opts)/*:SST*/ {\n\tvar s/*:SST*/ = ([]/*:any*/);\n\tvar pass = false;\n\trecordhopper(data, function hopper_sst(val, R, RT) {\n\t\tswitch(RT) {\n\t\t\tcase 0x009F: /* BrtBeginSst */\n\t\t\t\ts.Count = val[0]; s.Unique = val[1]; break;\n\t\t\tcase 0x0013: /* BrtSSTItem */\n\t\t\t\ts.push(val); break;\n\t\t\tcase 0x00A0: /* BrtEndSst */\n\t\t\t\treturn true;\n\n\t\t\tcase 0x0023: /* BrtFRTBegin */\n\t\t\t\tpass = true; break;\n\t\t\tcase 0x0024: /* BrtFRTEnd */\n\t\t\t\tpass = false; break;\n\n\t\t\tdefault:\n\t\t\t\tif(R.T){}\n\t\t\t\tif(!pass || opts.WTF) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t});\n\treturn s;\n}\n\nfunction write_BrtBeginSst(sst, o) {\n\tif(!o) o = new_buf(8);\n\to.write_shift(4, sst.Count);\n\to.write_shift(4, sst.Unique);\n\treturn o;\n}\n\nvar write_BrtSSTItem = write_RichStr;\n\nfunction write_sst_bin(sst/*::, opts*/) {\n\tvar ba = buf_array();\n\twrite_record(ba, 0x009F /* BrtBeginSst */, write_BrtBeginSst(sst));\n\tfor(var i = 0; i < sst.length; ++i) write_record(ba, 0x0013 /* BrtSSTItem */, write_BrtSSTItem(sst[i]));\n\t/* FRTSST */\n\twrite_record(ba, 0x00A0 /* BrtEndSst */);\n\treturn ba.end();\n}\nfunction _JS2ANSI(str/*:string*/)/*:Array<number>*/ {\n\tif(typeof $cptable !== 'undefined') return $cptable.utils.encode(current_ansi, str);\n\tvar o/*:Array<number>*/ = [], oo = str.split(\"\");\n\tfor(var i = 0; i < oo.length; ++i) o[i] = oo[i].charCodeAt(0);\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.1.4 Version */\nfunction parse_CRYPTOVersion(blob, length/*:?number*/) {\n\tvar o/*:any*/ = {};\n\to.Major = blob.read_shift(2);\n\to.Minor = blob.read_shift(2);\n\t/*:: if(length == null) return o; */\n\tif(length >= 4) blob.l += length - 4;\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.1.5 DataSpaceVersionInfo */\nfunction parse_DataSpaceVersionInfo(blob) {\n\tvar o = {};\n\to.id = blob.read_shift(0, 'lpp4');\n\to.R = parse_CRYPTOVersion(blob, 4);\n\to.U = parse_CRYPTOVersion(blob, 4);\n\to.W = parse_CRYPTOVersion(blob, 4);\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.1.6.1 DataSpaceMapEntry Structure */\nfunction parse_DataSpaceMapEntry(blob) {\n\tvar len = blob.read_shift(4);\n\tvar end = blob.l + len - 4;\n\tvar o = {};\n\tvar cnt = blob.read_shift(4);\n\tvar comps/*:Array<{t:number, v:string}>*/ = [];\n\t/* [MS-OFFCRYPTO] 2.1.6.2 DataSpaceReferenceComponent Structure */\n\twhile(cnt-- > 0) comps.push({ t: blob.read_shift(4), v: blob.read_shift(0, 'lpp4') });\n\to.name = blob.read_shift(0, 'lpp4');\n\to.comps = comps;\n\tif(blob.l != end) throw new Error(\"Bad DataSpaceMapEntry: \" + blob.l + \" != \" + end);\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.1.6 DataSpaceMap */\nfunction parse_DataSpaceMap(blob) {\n\tvar o = [];\n\tblob.l += 4; // must be 0x8\n\tvar cnt = blob.read_shift(4);\n\twhile(cnt-- > 0) o.push(parse_DataSpaceMapEntry(blob));\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.1.7 DataSpaceDefinition */\nfunction parse_DataSpaceDefinition(blob)/*:Array<string>*/ {\n\tvar o/*:Array<string>*/ = [];\n\tblob.l += 4; // must be 0x8\n\tvar cnt = blob.read_shift(4);\n\twhile(cnt-- > 0) o.push(blob.read_shift(0, 'lpp4'));\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.1.8 DataSpaceDefinition */\nfunction parse_TransformInfoHeader(blob) {\n\tvar o = {};\n\t/*var len = */blob.read_shift(4);\n\tblob.l += 4; // must be 0x1\n\to.id = blob.read_shift(0, 'lpp4');\n\to.name = blob.read_shift(0, 'lpp4');\n\to.R = parse_CRYPTOVersion(blob, 4);\n\to.U = parse_CRYPTOVersion(blob, 4);\n\to.W = parse_CRYPTOVersion(blob, 4);\n\treturn o;\n}\n\nfunction parse_Primary(blob) {\n\t/* [MS-OFFCRYPTO] 2.2.6 IRMDSTransformInfo */\n\tvar hdr = parse_TransformInfoHeader(blob);\n\t/* [MS-OFFCRYPTO] 2.1.9 EncryptionTransformInfo */\n\thdr.ename = blob.read_shift(0, '8lpp4');\n\thdr.blksz = blob.read_shift(4);\n\thdr.cmode = blob.read_shift(4);\n\tif(blob.read_shift(4) != 0x04) throw new Error(\"Bad !Primary record\");\n\treturn hdr;\n}\n\n/* [MS-OFFCRYPTO] 2.3.2 Encryption Header */\nfunction parse_EncryptionHeader(blob, length/*:number*/) {\n\tvar tgt = blob.l + length;\n\tvar o = {};\n\to.Flags = (blob.read_shift(4) & 0x3F);\n\tblob.l += 4;\n\to.AlgID = blob.read_shift(4);\n\tvar valid = false;\n\tswitch(o.AlgID) {\n\t\tcase 0x660E: case 0x660F: case 0x6610: valid = (o.Flags == 0x24); break;\n\t\tcase 0x6801: valid = (o.Flags == 0x04); break;\n\t\tcase 0: valid = (o.Flags == 0x10 || o.Flags == 0x04 || o.Flags == 0x24); break;\n\t\tdefault: throw 'Unrecognized encryption algorithm: ' + o.AlgID;\n\t}\n\tif(!valid) throw new Error(\"Encryption Flags/AlgID mismatch\");\n\to.AlgIDHash = blob.read_shift(4);\n\to.KeySize = blob.read_shift(4);\n\to.ProviderType = blob.read_shift(4);\n\tblob.l += 8;\n\to.CSPName = blob.read_shift((tgt-blob.l)>>1, 'utf16le');\n\tblob.l = tgt;\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.3.3 Encryption Verifier */\nfunction parse_EncryptionVerifier(blob, length/*:number*/) {\n\tvar o = {}, tgt = blob.l + length;\n\tblob.l += 4; // SaltSize must be 0x10\n\to.Salt = blob.slice(blob.l, blob.l+16); blob.l += 16;\n\to.Verifier = blob.slice(blob.l, blob.l+16); blob.l += 16;\n\t/*var sz = */blob.read_shift(4);\n\to.VerifierHash = blob.slice(blob.l, tgt); blob.l = tgt;\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.3.4.* EncryptionInfo Stream */\nfunction parse_EncryptionInfo(blob) {\n\tvar vers = parse_CRYPTOVersion(blob);\n\tswitch(vers.Minor) {\n\t\tcase 0x02: return [vers.Minor, parse_EncInfoStd(blob, vers)];\n\t\tcase 0x03: return [vers.Minor, parse_EncInfoExt(blob, vers)];\n\t\tcase 0x04: return [vers.Minor, parse_EncInfoAgl(blob, vers)];\n\t}\n\tthrow new Error(\"ECMA-376 Encrypted file unrecognized Version: \" + vers.Minor);\n}\n\n/* [MS-OFFCRYPTO] 2.3.4.5  EncryptionInfo Stream (Standard Encryption) */\nfunction parse_EncInfoStd(blob/*::, vers*/) {\n\tvar flags = blob.read_shift(4);\n\tif((flags & 0x3F) != 0x24) throw new Error(\"EncryptionInfo mismatch\");\n\tvar sz = blob.read_shift(4);\n\t//var tgt = blob.l + sz;\n\tvar hdr = parse_EncryptionHeader(blob, sz);\n\tvar verifier = parse_EncryptionVerifier(blob, blob.length - blob.l);\n\treturn { t:\"Std\", h:hdr, v:verifier };\n}\n/* [MS-OFFCRYPTO] 2.3.4.6  EncryptionInfo Stream (Extensible Encryption) */\nfunction parse_EncInfoExt(/*::blob, vers*/) { throw new Error(\"File is password-protected: ECMA-376 Extensible\"); }\n/* [MS-OFFCRYPTO] 2.3.4.10 EncryptionInfo Stream (Agile Encryption) */\nfunction parse_EncInfoAgl(blob/*::, vers*/) {\n\tvar KeyData = [\"saltSize\",\"blockSize\",\"keyBits\",\"hashSize\",\"cipherAlgorithm\",\"cipherChaining\",\"hashAlgorithm\",\"saltValue\"];\n\tblob.l+=4;\n\tvar xml = blob.read_shift(blob.length - blob.l, 'utf8');\n\tvar o = {};\n\txml.replace(tagregex, function xml_agile(x) {\n\t\tvar y/*:any*/ = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<?xml': break;\n\t\t\tcase '<encryption': case '</encryption>': break;\n\t\t\tcase '<keyData': KeyData.forEach(function(k) { o[k] = y[k]; }); break;\n\t\t\tcase '<dataIntegrity': o.encryptedHmacKey = y.encryptedHmacKey; o.encryptedHmacValue = y.encryptedHmacValue; break;\n\t\t\tcase '<keyEncryptors>': case '<keyEncryptors': o.encs = []; break;\n\t\t\tcase '</keyEncryptors>': break;\n\n\t\t\tcase '<keyEncryptor': o.uri = y.uri; break;\n\t\t\tcase '</keyEncryptor>': break;\n\t\t\tcase '<encryptedKey': o.encs.push(y); break;\n\t\t\tdefault: throw y[0];\n\t\t}\n\t});\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.3.5.1 RC4 CryptoAPI Encryption Header */\nfunction parse_RC4CryptoHeader(blob, length/*:number*/) {\n\tvar o = {};\n\tvar vers = o.EncryptionVersionInfo = parse_CRYPTOVersion(blob, 4); length -= 4;\n\tif(vers.Minor != 2) throw new Error('unrecognized minor version code: ' + vers.Minor);\n\tif(vers.Major > 4 || vers.Major < 2) throw new Error('unrecognized major version code: ' + vers.Major);\n\to.Flags = blob.read_shift(4); length -= 4;\n\tvar sz = blob.read_shift(4); length -= 4;\n\to.EncryptionHeader = parse_EncryptionHeader(blob, sz); length -= sz;\n\to.EncryptionVerifier = parse_EncryptionVerifier(blob, length);\n\treturn o;\n}\n/* [MS-OFFCRYPTO] 2.3.6.1 RC4 Encryption Header */\nfunction parse_RC4Header(blob/*::, length*/) {\n\tvar o = {};\n\tvar vers = o.EncryptionVersionInfo = parse_CRYPTOVersion(blob, 4);\n\tif(vers.Major != 1 || vers.Minor != 1) throw 'unrecognized version code ' + vers.Major + ' : ' + vers.Minor;\n\to.Salt = blob.read_shift(16);\n\to.EncryptedVerifier = blob.read_shift(16);\n\to.EncryptedVerifierHash = blob.read_shift(16);\n\treturn o;\n}\n\n/* [MS-OFFCRYPTO] 2.3.7.1 Binary Document Password Verifier Derivation */\nfunction crypto_CreatePasswordVerifier_Method1(Password/*:string*/) {\n\tvar Verifier = 0x0000, PasswordArray;\n\tvar PasswordDecoded = _JS2ANSI(Password);\n\tvar len = PasswordDecoded.length + 1, i, PasswordByte;\n\tvar Intermediate1, Intermediate2, Intermediate3;\n\tPasswordArray = new_raw_buf(len);\n\tPasswordArray[0] = PasswordDecoded.length;\n\tfor(i = 1; i != len; ++i) PasswordArray[i] = PasswordDecoded[i-1];\n\tfor(i = len-1; i >= 0; --i) {\n\t\tPasswordByte = PasswordArray[i];\n\t\tIntermediate1 = ((Verifier & 0x4000) === 0x0000) ? 0 : 1;\n\t\tIntermediate2 = (Verifier << 1) & 0x7FFF;\n\t\tIntermediate3 = Intermediate1 | Intermediate2;\n\t\tVerifier = Intermediate3 ^ PasswordByte;\n\t}\n\treturn Verifier ^ 0xCE4B;\n}\n\n/* [MS-OFFCRYPTO] 2.3.7.2 Binary Document XOR Array Initialization */\nvar crypto_CreateXorArray_Method1 = /*#__PURE__*/(function() {\n\tvar PadArray = [0xBB, 0xFF, 0xFF, 0xBA, 0xFF, 0xFF, 0xB9, 0x80, 0x00, 0xBE, 0x0F, 0x00, 0xBF, 0x0F, 0x00];\n\tvar InitialCode = [0xE1F0, 0x1D0F, 0xCC9C, 0x84C0, 0x110C, 0x0E10, 0xF1CE, 0x313E, 0x1872, 0xE139, 0xD40F, 0x84F9, 0x280C, 0xA96A, 0x4EC3];\n\tvar XorMatrix = [0xAEFC, 0x4DD9, 0x9BB2, 0x2745, 0x4E8A, 0x9D14, 0x2A09, 0x7B61, 0xF6C2, 0xFDA5, 0xEB6B, 0xC6F7, 0x9DCF, 0x2BBF, 0x4563, 0x8AC6, 0x05AD, 0x0B5A, 0x16B4, 0x2D68, 0x5AD0, 0x0375, 0x06EA, 0x0DD4, 0x1BA8, 0x3750, 0x6EA0, 0xDD40, 0xD849, 0xA0B3, 0x5147, 0xA28E, 0x553D, 0xAA7A, 0x44D5, 0x6F45, 0xDE8A, 0xAD35, 0x4A4B, 0x9496, 0x390D, 0x721A, 0xEB23, 0xC667, 0x9CEF, 0x29FF, 0x53FE, 0xA7FC, 0x5FD9, 0x47D3, 0x8FA6, 0x0F6D, 0x1EDA, 0x3DB4, 0x7B68, 0xF6D0, 0xB861, 0x60E3, 0xC1C6, 0x93AD, 0x377B, 0x6EF6, 0xDDEC, 0x45A0, 0x8B40, 0x06A1, 0x0D42, 0x1A84, 0x3508, 0x6A10, 0xAA51, 0x4483, 0x8906, 0x022D, 0x045A, 0x08B4, 0x1168, 0x76B4, 0xED68, 0xCAF1, 0x85C3, 0x1BA7, 0x374E, 0x6E9C, 0x3730, 0x6E60, 0xDCC0, 0xA9A1, 0x4363, 0x86C6, 0x1DAD, 0x3331, 0x6662, 0xCCC4, 0x89A9, 0x0373, 0x06E6, 0x0DCC, 0x1021, 0x2042, 0x4084, 0x8108, 0x1231, 0x2462, 0x48C4];\n\tvar Ror = function(Byte) { return ((Byte/2) | (Byte*128)) & 0xFF; };\n\tvar XorRor = function(byte1, byte2) { return Ror(byte1 ^ byte2); };\n\tvar CreateXorKey_Method1 = function(Password) {\n\t\tvar XorKey = InitialCode[Password.length - 1];\n\t\tvar CurrentElement = 0x68;\n\t\tfor(var i = Password.length-1; i >= 0; --i) {\n\t\t\tvar Char = Password[i];\n\t\t\tfor(var j = 0; j != 7; ++j) {\n\t\t\t\tif(Char & 0x40) XorKey ^= XorMatrix[CurrentElement];\n\t\t\t\tChar *= 2; --CurrentElement;\n\t\t\t}\n\t\t}\n\t\treturn XorKey;\n\t};\n\treturn function(password/*:string*/) {\n\t\tvar Password = _JS2ANSI(password);\n\t\tvar XorKey = CreateXorKey_Method1(Password);\n\t\tvar Index = Password.length;\n\t\tvar ObfuscationArray = new_raw_buf(16);\n\t\tfor(var i = 0; i != 16; ++i) ObfuscationArray[i] = 0x00;\n\t\tvar Temp, PasswordLastChar, PadIndex;\n\t\tif((Index & 1) === 1) {\n\t\t\tTemp = XorKey >> 8;\n\t\t\tObfuscationArray[Index] = XorRor(PadArray[0], Temp);\n\t\t\t--Index;\n\t\t\tTemp = XorKey & 0xFF;\n\t\t\tPasswordLastChar = Password[Password.length - 1];\n\t\t\tObfuscationArray[Index] = XorRor(PasswordLastChar, Temp);\n\t\t}\n\t\twhile(Index > 0) {\n\t\t\t--Index;\n\t\t\tTemp = XorKey >> 8;\n\t\t\tObfuscationArray[Index] = XorRor(Password[Index], Temp);\n\t\t\t--Index;\n\t\t\tTemp = XorKey & 0xFF;\n\t\t\tObfuscationArray[Index] = XorRor(Password[Index], Temp);\n\t\t}\n\t\tIndex = 15;\n\t\tPadIndex = 15 - Password.length;\n\t\twhile(PadIndex > 0) {\n\t\t\tTemp = XorKey >> 8;\n\t\t\tObfuscationArray[Index] = XorRor(PadArray[PadIndex], Temp);\n\t\t\t--Index;\n\t\t\t--PadIndex;\n\t\t\tTemp = XorKey & 0xFF;\n\t\t\tObfuscationArray[Index] = XorRor(Password[Index], Temp);\n\t\t\t--Index;\n\t\t\t--PadIndex;\n\t\t}\n\t\treturn ObfuscationArray;\n\t};\n})();\n\n/* [MS-OFFCRYPTO] 2.3.7.3 Binary Document XOR Data Transformation Method 1 */\nvar crypto_DecryptData_Method1 = function(password/*:string*/, Data, XorArrayIndex, XorArray, O) {\n\t/* If XorArray is set, use it; if O is not set, make changes in-place */\n\tif(!O) O = Data;\n\tif(!XorArray) XorArray = crypto_CreateXorArray_Method1(password);\n\tvar Index, Value;\n\tfor(Index = 0; Index != Data.length; ++Index) {\n\t\tValue = Data[Index];\n\t\tValue ^= XorArray[XorArrayIndex];\n\t\tValue = ((Value>>5) | (Value<<3)) & 0xFF;\n\t\tO[Index] = Value;\n\t\t++XorArrayIndex;\n\t}\n\treturn [O, XorArrayIndex, XorArray];\n};\n\nvar crypto_MakeXorDecryptor = function(password/*:string*/) {\n\tvar XorArrayIndex = 0, XorArray = crypto_CreateXorArray_Method1(password);\n\treturn function(Data) {\n\t\tvar O = crypto_DecryptData_Method1(\"\", Data, XorArrayIndex, XorArray);\n\t\tXorArrayIndex = O[1];\n\t\treturn O[0];\n\t};\n};\n\n/* 2.5.343 */\nfunction parse_XORObfuscation(blob, length, opts, out) {\n\tvar o = ({ key: parseuint16(blob), verificationBytes: parseuint16(blob) }/*:any*/);\n\tif(opts.password) o.verifier = crypto_CreatePasswordVerifier_Method1(opts.password);\n\tout.valid = o.verificationBytes === o.verifier;\n\tif(out.valid) out.insitu = crypto_MakeXorDecryptor(opts.password);\n\treturn o;\n}\n\n/* 2.4.117 */\nfunction parse_FilePassHeader(blob, length/*:number*/, oo) {\n\tvar o = oo || {}; o.Info = blob.read_shift(2); blob.l -= 2;\n\tif(o.Info === 1) o.Data = parse_RC4Header(blob, length);\n\telse o.Data = parse_RC4CryptoHeader(blob, length);\n\treturn o;\n}\nfunction parse_FilePass(blob, length/*:number*/, opts) {\n\tvar o = ({ Type: opts.biff >= 8 ? blob.read_shift(2) : 0 }/*:any*/); /* wEncryptionType */\n\tif(o.Type) parse_FilePassHeader(blob, length-2, o);\n\telse parse_XORObfuscation(blob, opts.biff >= 8 ? length : length - 2, opts, o);\n\treturn o;\n}\n\n\nvar RTF = /*#__PURE__*/(function() {\n\tfunction rtf_to_sheet(d/*:RawData*/, opts)/*:Worksheet*/ {\n\t\tswitch(opts.type) {\n\t\t\tcase 'base64': return rtf_to_sheet_str(Base64_decode(d), opts);\n\t\t\tcase 'binary': return rtf_to_sheet_str(d, opts);\n\t\t\tcase 'buffer': return rtf_to_sheet_str(has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d), opts);\n\t\t\tcase 'array':  return rtf_to_sheet_str(cc2str(d), opts);\n\t\t}\n\t\tthrow new Error(\"Unrecognized type \" + opts.type);\n\t}\n\n\t/* TODO: this is a stub */\n\tfunction rtf_to_sheet_str(str/*:string*/, opts)/*:Worksheet*/ {\n\t\tvar o = opts || {};\n\t\tvar ws/*:Worksheet*/ = o.dense ? ([]/*:any*/) : ({}/*:any*/);\n\n\t\tvar rows = str.match(/\\\\trowd.*?\\\\row\\b/g);\n\t\tif(!rows.length) throw new Error(\"RTF missing table\");\n\t\tvar range/*:Range*/ = ({s: {c:0, r:0}, e: {c:0, r:rows.length - 1}}/*:any*/);\n\t\trows.forEach(function(rowtf, R) {\n\t\t\tif(Array.isArray(ws)) ws[R] = [];\n\t\t\tvar rtfre = /\\\\\\w+\\b/g;\n\t\t\tvar last_index = 0;\n\t\t\tvar res;\n\t\t\tvar C = -1;\n\t\t\twhile((res = rtfre.exec(rowtf))) {\n\t\t\t\tswitch(res[0]) {\n\t\t\t\t\tcase \"\\\\cell\":\n\t\t\t\t\t\tvar data = rowtf.slice(last_index, rtfre.lastIndex - res[0].length);\n\t\t\t\t\t\tif(data[0] == \" \") data = data.slice(1);\n\t\t\t\t\t\t++C;\n\t\t\t\t\t\tif(data.length) {\n\t\t\t\t\t\t\t// TODO: value parsing, including codepage adjustments\n\t\t\t\t\t\t\tvar cell = {v: data, t:\"s\"};\n\t\t\t\t\t\t\tif(Array.isArray(ws)) ws[R][C] = cell;\n\t\t\t\t\t\t\telse ws[encode_cell({r:R, c:C})] = cell;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast_index = rtfre.lastIndex;\n\t\t\t}\n\t\t\tif(C > range.e.c) range.e.c = C;\n\t\t});\n\t\tws['!ref'] = encode_range(range);\n\t\treturn ws;\n\t}\n\n\tfunction rtf_to_workbook(d/*:RawData*/, opts)/*:Workbook*/ { return sheet_to_workbook(rtf_to_sheet(d, opts), opts); }\n\n\t/* TODO: this is a stub */\n\tfunction sheet_to_rtf(ws/*:Worksheet*//*::, opts*/)/*:string*/ {\n\t\tvar o = [\"{\\\\rtf1\\\\ansi\"];\n\t\tvar r = safe_decode_range(ws['!ref']), cell/*:Cell*/;\n\t\tvar dense = Array.isArray(ws);\n\t\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\t\to.push(\"\\\\trowd\\\\trautofit1\");\n\t\t\tfor(var C = r.s.c; C <= r.e.c; ++C) o.push(\"\\\\cellx\" + (C+1));\n\t\t\to.push(\"\\\\pard\\\\intbl\");\n\t\t\tfor(C = r.s.c; C <= r.e.c; ++C) {\n\t\t\t\tvar coord = encode_cell({r:R,c:C});\n\t\t\t\tcell = dense ? (ws[R]||[])[C]: ws[coord];\n\t\t\t\tif(!cell || cell.v == null && (!cell.f || cell.F)) continue;\n\t\t\t\to.push(\" \" + (cell.w || (format_cell(cell), cell.w)));\n\t\t\t\to.push(\"\\\\cell\");\n\t\t\t}\n\t\t\to.push(\"\\\\pard\\\\intbl\\\\row\");\n\t\t}\n\t\treturn o.join(\"\") + \"}\";\n\t}\n\n\treturn {\n\t\tto_workbook: rtf_to_workbook,\n\t\tto_sheet: rtf_to_sheet,\n\t\tfrom_sheet: sheet_to_rtf\n\t};\n})();\nfunction hex2RGB(h) {\n\tvar o = h.slice(h[0]===\"#\"?1:0).slice(0,6);\n\treturn [parseInt(o.slice(0,2),16),parseInt(o.slice(2,4),16),parseInt(o.slice(4,6),16)];\n}\nfunction rgb2Hex(rgb) {\n\tfor(var i=0,o=1; i!=3; ++i) o = o*256 + (rgb[i]>255?255:rgb[i]<0?0:rgb[i]);\n\treturn o.toString(16).toUpperCase().slice(1);\n}\n\nfunction rgb2HSL(rgb) {\n\tvar R = rgb[0]/255, G = rgb[1]/255, B=rgb[2]/255;\n\tvar M = Math.max(R, G, B), m = Math.min(R, G, B), C = M - m;\n\tif(C === 0) return [0, 0, R];\n\n\tvar H6 = 0, S = 0, L2 = (M + m);\n\tS = C / (L2 > 1 ? 2 - L2 : L2);\n\tswitch(M){\n\t\tcase R: H6 = ((G - B) / C + 6)%6; break;\n\t\tcase G: H6 = ((B - R) / C + 2); break;\n\t\tcase B: H6 = ((R - G) / C + 4); break;\n\t}\n\treturn [H6 / 6, S, L2 / 2];\n}\n\nfunction hsl2RGB(hsl){\n\tvar H = hsl[0], S = hsl[1], L = hsl[2];\n\tvar C = S * 2 * (L < 0.5 ? L : 1 - L), m = L - C/2;\n\tvar rgb = [m,m,m], h6 = 6*H;\n\n\tvar X;\n\tif(S !== 0) switch(h6|0) {\n\t\tcase 0: case 6: X = C * h6; rgb[0] += C; rgb[1] += X; break;\n\t\tcase 1: X = C * (2 - h6);   rgb[0] += X; rgb[1] += C; break;\n\t\tcase 2: X = C * (h6 - 2);   rgb[1] += C; rgb[2] += X; break;\n\t\tcase 3: X = C * (4 - h6);   rgb[1] += X; rgb[2] += C; break;\n\t\tcase 4: X = C * (h6 - 4);   rgb[2] += C; rgb[0] += X; break;\n\t\tcase 5: X = C * (6 - h6);   rgb[2] += X; rgb[0] += C; break;\n\t}\n\tfor(var i = 0; i != 3; ++i) rgb[i] = Math.round(rgb[i]*255);\n\treturn rgb;\n}\n\n/* 18.8.3 bgColor tint algorithm */\nfunction rgb_tint(hex, tint) {\n\tif(tint === 0) return hex;\n\tvar hsl = rgb2HSL(hex2RGB(hex));\n\tif (tint < 0) hsl[2] = hsl[2] * (1 + tint);\n\telse hsl[2] = 1 - (1 - hsl[2]) * (1 - tint);\n\treturn rgb2Hex(hsl2RGB(hsl));\n}\n\n/* 18.3.1.13 width calculations */\n/* [MS-OI29500] 2.1.595 Column Width & Formatting */\nvar DEF_MDW = 6, MAX_MDW = 15, MIN_MDW = 1, MDW = DEF_MDW;\nfunction width2px(width) { return Math.floor(( width + (Math.round(128/MDW))/256 )* MDW ); }\nfunction px2char(px) { return (Math.floor((px - 5)/MDW * 100 + 0.5))/100; }\nfunction char2width(chr) { return (Math.round((chr * MDW + 5)/MDW*256))/256; }\n//function px2char_(px) { return (((px - 5)/MDW * 100 + 0.5))/100; }\n//function char2width_(chr) { return (((chr * MDW + 5)/MDW*256))/256; }\nfunction cycle_width(collw) { return char2width(px2char(width2px(collw))); }\n/* XLSX/XLSB/XLS specify width in units of MDW */\nfunction find_mdw_colw(collw) {\n\tvar delta = Math.abs(collw - cycle_width(collw)), _MDW = MDW;\n\tif(delta > 0.005) for(MDW=MIN_MDW; MDW<MAX_MDW; ++MDW) if(Math.abs(collw - cycle_width(collw)) <= delta) { delta = Math.abs(collw - cycle_width(collw)); _MDW = MDW; }\n\tMDW = _MDW;\n}\n/* XLML specifies width in terms of pixels */\n/*function find_mdw_wpx(wpx) {\n\tvar delta = Infinity, guess = 0, _MDW = MIN_MDW;\n\tfor(MDW=MIN_MDW; MDW<MAX_MDW; ++MDW) {\n\t\tguess = char2width_(px2char_(wpx))*256;\n\t\tguess = (guess) % 1;\n\t\tif(guess > 0.5) guess--;\n\t\tif(Math.abs(guess) < delta) { delta = Math.abs(guess); _MDW = MDW; }\n\t}\n\tMDW = _MDW;\n}*/\n\nfunction process_col(coll/*:ColInfo*/) {\n\tif(coll.width) {\n\t\tcoll.wpx = width2px(coll.width);\n\t\tcoll.wch = px2char(coll.wpx);\n\t\tcoll.MDW = MDW;\n\t} else if(coll.wpx) {\n\t\tcoll.wch = px2char(coll.wpx);\n\t\tcoll.width = char2width(coll.wch);\n\t\tcoll.MDW = MDW;\n\t} else if(typeof coll.wch == 'number') {\n\t\tcoll.width = char2width(coll.wch);\n\t\tcoll.wpx = width2px(coll.width);\n\t\tcoll.MDW = MDW;\n\t}\n\tif(coll.customWidth) delete coll.customWidth;\n}\n\nvar DEF_PPI = 96, PPI = DEF_PPI;\nfunction px2pt(px) { return px * 96 / PPI; }\nfunction pt2px(pt) { return pt * PPI / 96; }\n\n/* [MS-EXSPXML3] 2.4.54 ST_enmPattern */\nvar XLMLPatternTypeMap = {\n\t\"None\": \"none\",\n\t\"Solid\": \"solid\",\n\t\"Gray50\": \"mediumGray\",\n\t\"Gray75\": \"darkGray\",\n\t\"Gray25\": \"lightGray\",\n\t\"HorzStripe\": \"darkHorizontal\",\n\t\"VertStripe\": \"darkVertical\",\n\t\"ReverseDiagStripe\": \"darkDown\",\n\t\"DiagStripe\": \"darkUp\",\n\t\"DiagCross\": \"darkGrid\",\n\t\"ThickDiagCross\": \"darkTrellis\",\n\t\"ThinHorzStripe\": \"lightHorizontal\",\n\t\"ThinVertStripe\": \"lightVertical\",\n\t\"ThinReverseDiagStripe\": \"lightDown\",\n\t\"ThinHorzCross\": \"lightGrid\"\n};\n\n/* 18.8.5 borders CT_Borders */\nfunction parse_borders(t, styles, themes, opts) {\n\tstyles.Borders = [];\n\tvar border = {};\n\tvar pass = false;\n\t(t[0].match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<borders': case '<borders>': case '</borders>': break;\n\n\t\t\t/* 18.8.4 border CT_Border */\n\t\t\tcase '<border': case '<border>': case '<border/>':\n\t\t\t\tborder = /*::(*/{}/*:: :any)*/;\n\t\t\t\tif(y.diagonalUp) border.diagonalUp = parsexmlbool(y.diagonalUp);\n\t\t\t\tif(y.diagonalDown) border.diagonalDown = parsexmlbool(y.diagonalDown);\n\t\t\t\tstyles.Borders.push(border);\n\t\t\t\tbreak;\n\t\t\tcase '</border>': break;\n\n\t\t\t/* note: not in spec, appears to be CT_BorderPr */\n\t\t\tcase '<left/>': break;\n\t\t\tcase '<left': case '<left>': break;\n\t\t\tcase '</left>': break;\n\n\t\t\t/* note: not in spec, appears to be CT_BorderPr */\n\t\t\tcase '<right/>': break;\n\t\t\tcase '<right': case '<right>': break;\n\t\t\tcase '</right>': break;\n\n\t\t\t/* 18.8.43 top CT_BorderPr */\n\t\t\tcase '<top/>': break;\n\t\t\tcase '<top': case '<top>': break;\n\t\t\tcase '</top>': break;\n\n\t\t\t/* 18.8.6 bottom CT_BorderPr */\n\t\t\tcase '<bottom/>': break;\n\t\t\tcase '<bottom': case '<bottom>': break;\n\t\t\tcase '</bottom>': break;\n\n\t\t\t/* 18.8.13 diagonal CT_BorderPr */\n\t\t\tcase '<diagonal': case '<diagonal>': case '<diagonal/>': break;\n\t\t\tcase '</diagonal>': break;\n\n\t\t\t/* 18.8.25 horizontal CT_BorderPr */\n\t\t\tcase '<horizontal': case '<horizontal>': case '<horizontal/>': break;\n\t\t\tcase '</horizontal>': break;\n\n\t\t\t/* 18.8.44 vertical CT_BorderPr */\n\t\t\tcase '<vertical': case '<vertical>': case '<vertical/>': break;\n\t\t\tcase '</vertical>': break;\n\n\t\t\t/* 18.8.37 start CT_BorderPr */\n\t\t\tcase '<start': case '<start>': case '<start/>': break;\n\t\t\tcase '</start>': break;\n\n\t\t\t/* 18.8.16 end CT_BorderPr */\n\t\t\tcase '<end': case '<end>': case '<end/>': break;\n\t\t\tcase '</end>': break;\n\n\t\t\t/* 18.8.? color CT_Color */\n\t\t\tcase '<color': case '<color>':\n\t\t\t\tbreak;\n\t\t\tcase '<color/>': case '</color>': break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': break;\n\t\t\tcase '<ext': pass = true; break;\n\t\t\tcase '</ext>': pass = false; break;\n\t\t\tdefault: if(opts && opts.WTF) {\n\t\t\t\tif(!pass) throw new Error('unrecognized ' + y[0] + ' in borders');\n\t\t\t}\n\t\t}\n\t});\n}\n\n/* 18.8.21 fills CT_Fills */\nfunction parse_fills(t, styles, themes, opts) {\n\tstyles.Fills = [];\n\tvar fill = {};\n\tvar pass = false;\n\t(t[0].match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<fills': case '<fills>': case '</fills>': break;\n\n\t\t\t/* 18.8.20 fill CT_Fill */\n\t\t\tcase '<fill>': case '<fill': case '<fill/>':\n\t\t\t\tfill = {}; styles.Fills.push(fill); break;\n\t\t\tcase '</fill>': break;\n\n\t\t\t/* 18.8.24 gradientFill CT_GradientFill */\n\t\t\tcase '<gradientFill>': break;\n\t\t\tcase '<gradientFill':\n\t\t\tcase '</gradientFill>': styles.Fills.push(fill); fill = {}; break;\n\n\t\t\t/* 18.8.32 patternFill CT_PatternFill */\n\t\t\tcase '<patternFill': case '<patternFill>':\n\t\t\t\tif(y.patternType) fill.patternType = y.patternType;\n\t\t\t\tbreak;\n\t\t\tcase '<patternFill/>': case '</patternFill>': break;\n\n\t\t\t/* 18.8.3 bgColor CT_Color */\n\t\t\tcase '<bgColor':\n\t\t\t\tif(!fill.bgColor) fill.bgColor = {};\n\t\t\t\tif(y.indexed) fill.bgColor.indexed = parseInt(y.indexed, 10);\n\t\t\t\tif(y.theme) fill.bgColor.theme = parseInt(y.theme, 10);\n\t\t\t\tif(y.tint) fill.bgColor.tint = parseFloat(y.tint);\n\t\t\t\t/* Excel uses ARGB strings */\n\t\t\t\tif(y.rgb) fill.bgColor.rgb = y.rgb.slice(-6);\n\t\t\t\tbreak;\n\t\t\tcase '<bgColor/>': case '</bgColor>': break;\n\n\t\t\t/* 18.8.19 fgColor CT_Color */\n\t\t\tcase '<fgColor':\n\t\t\t\tif(!fill.fgColor) fill.fgColor = {};\n\t\t\t\tif(y.theme) fill.fgColor.theme = parseInt(y.theme, 10);\n\t\t\t\tif(y.tint) fill.fgColor.tint = parseFloat(y.tint);\n\t\t\t\t/* Excel uses ARGB strings */\n\t\t\t\tif(y.rgb != null) fill.fgColor.rgb = y.rgb.slice(-6);\n\t\t\t\tbreak;\n\t\t\tcase '<fgColor/>': case '</fgColor>': break;\n\n\t\t\t/* 18.8.38 stop CT_GradientStop */\n\t\t\tcase '<stop': case '<stop/>': break;\n\t\t\tcase '</stop>': break;\n\n\t\t\t/* 18.8.? color CT_Color */\n\t\t\tcase '<color': case '<color/>': break;\n\t\t\tcase '</color>': break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': break;\n\t\t\tcase '<ext': pass = true; break;\n\t\t\tcase '</ext>': pass = false; break;\n\t\t\tdefault: if(opts && opts.WTF) {\n\t\t\t\tif(!pass) throw new Error('unrecognized ' + y[0] + ' in fills');\n\t\t\t}\n\t\t}\n\t});\n}\n\n/* 18.8.23 fonts CT_Fonts */\nfunction parse_fonts(t, styles, themes, opts) {\n\tstyles.Fonts = [];\n\tvar font = {};\n\tvar pass = false;\n\t(t[0].match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<fonts': case '<fonts>': case '</fonts>': break;\n\n\t\t\t/* 18.8.22 font CT_Font */\n\t\t\tcase '<font': case '<font>': break;\n\t\t\tcase '</font>': case '<font/>':\n\t\t\t\tstyles.Fonts.push(font);\n\t\t\t\tfont = {};\n\t\t\t\tbreak;\n\n\t\t\t/* 18.8.29 name CT_FontName */\n\t\t\tcase '<name': if(y.val) font.name = utf8read(y.val); break;\n\t\t\tcase '<name/>': case '</name>': break;\n\n\t\t\t/* 18.8.2  b CT_BooleanProperty */\n\t\t\tcase '<b': font.bold = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<b/>': font.bold = 1; break;\n\n\t\t\t/* 18.8.26 i CT_BooleanProperty */\n\t\t\tcase '<i': font.italic = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<i/>': font.italic = 1; break;\n\n\t\t\t/* 18.4.13 u CT_UnderlineProperty */\n\t\t\tcase '<u':\n\t\t\t\tswitch(y.val) {\n\t\t\t\t\tcase \"none\": font.underline = 0x00; break;\n\t\t\t\t\tcase \"single\": font.underline = 0x01; break;\n\t\t\t\t\tcase \"double\": font.underline = 0x02; break;\n\t\t\t\t\tcase \"singleAccounting\": font.underline = 0x21; break;\n\t\t\t\t\tcase \"doubleAccounting\": font.underline = 0x22; break;\n\t\t\t\t} break;\n\t\t\tcase '<u/>': font.underline = 1; break;\n\n\t\t\t/* 18.4.10 strike CT_BooleanProperty */\n\t\t\tcase '<strike': font.strike = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<strike/>': font.strike = 1; break;\n\n\t\t\t/* 18.4.2  outline CT_BooleanProperty */\n\t\t\tcase '<outline': font.outline = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<outline/>': font.outline = 1; break;\n\n\t\t\t/* 18.8.36 shadow CT_BooleanProperty */\n\t\t\tcase '<shadow': font.shadow = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<shadow/>': font.shadow = 1; break;\n\n\t\t\t/* 18.8.12 condense CT_BooleanProperty */\n\t\t\tcase '<condense': font.condense = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<condense/>': font.condense = 1; break;\n\n\t\t\t/* 18.8.17 extend CT_BooleanProperty */\n\t\t\tcase '<extend': font.extend = y.val ? parsexmlbool(y.val) : 1; break;\n\t\t\tcase '<extend/>': font.extend = 1; break;\n\n\t\t\t/* 18.4.11 sz CT_FontSize */\n\t\t\tcase '<sz': if(y.val) font.sz = +y.val; break;\n\t\t\tcase '<sz/>': case '</sz>': break;\n\n\t\t\t/* 18.4.14 vertAlign CT_VerticalAlignFontProperty */\n\t\t\tcase '<vertAlign': if(y.val) font.vertAlign = y.val; break;\n\t\t\tcase '<vertAlign/>': case '</vertAlign>': break;\n\n\t\t\t/* 18.8.18 family CT_FontFamily */\n\t\t\tcase '<family': if(y.val) font.family = parseInt(y.val,10); break;\n\t\t\tcase '<family/>': case '</family>': break;\n\n\t\t\t/* 18.8.35 scheme CT_FontScheme */\n\t\t\tcase '<scheme': if(y.val) font.scheme = y.val; break;\n\t\t\tcase '<scheme/>': case '</scheme>': break;\n\n\t\t\t/* 18.4.1 charset CT_IntProperty */\n\t\t\tcase '<charset':\n\t\t\t\tif(y.val == '1') break;\n\t\t\t\ty.codepage = CS2CP[parseInt(y.val, 10)];\n\t\t\t\tbreak;\n\n\t\t\t/* 18.?.? color CT_Color */\n\t\t\tcase '<color':\n\t\t\t\tif(!font.color) font.color = {};\n\t\t\t\tif(y.auto) font.color.auto = parsexmlbool(y.auto);\n\n\t\t\t\tif(y.rgb) font.color.rgb = y.rgb.slice(-6);\n\t\t\t\telse if(y.indexed) {\n\t\t\t\t\tfont.color.index = parseInt(y.indexed, 10);\n\t\t\t\t\tvar icv = XLSIcv[font.color.index];\n\t\t\t\t\tif(font.color.index == 81) icv = XLSIcv[1];\n\t\t\t\t\tif(!icv) icv = XLSIcv[1]; //throw new Error(x); // note: 206 is valid\n\t\t\t\t\tfont.color.rgb = icv[0].toString(16) + icv[1].toString(16) + icv[2].toString(16);\n\t\t\t\t} else if(y.theme) {\n\t\t\t\t\tfont.color.theme = parseInt(y.theme, 10);\n\t\t\t\t\tif(y.tint) font.color.tint = parseFloat(y.tint);\n\t\t\t\t\tif(y.theme && themes.themeElements && themes.themeElements.clrScheme) {\n\t\t\t\t\t\tfont.color.rgb = rgb_tint(themes.themeElements.clrScheme[font.color.theme].rgb, font.color.tint || 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase '<color/>': case '</color>': break;\n\n\t\t\t/* note: sometimes mc:AlternateContent appears bare */\n\t\t\tcase '<AlternateContent': pass = true; break;\n\t\t\tcase '</AlternateContent>': pass = false; break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': break;\n\t\t\tcase '<ext': pass = true; break;\n\t\t\tcase '</ext>': pass = false; break;\n\t\t\tdefault: if(opts && opts.WTF) {\n\t\t\t\tif(!pass) throw new Error('unrecognized ' + y[0] + ' in fonts');\n\t\t\t}\n\t\t}\n\t});\n}\n\n/* 18.8.31 numFmts CT_NumFmts */\nfunction parse_numFmts(t, styles, opts) {\n\tstyles.NumberFmt = [];\n\tvar k/*Array<number>*/ = (keys(table_fmt)/*:any*/);\n\tfor(var i=0; i < k.length; ++i) styles.NumberFmt[k[i]] = table_fmt[k[i]];\n\tvar m = t[0].match(tagregex);\n\tif(!m) return;\n\tfor(i=0; i < m.length; ++i) {\n\t\tvar y = parsexmltag(m[i]);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<numFmts': case '</numFmts>': case '<numFmts/>': case '<numFmts>': break;\n\t\t\tcase '<numFmt': {\n\t\t\t\tvar f=unescapexml(utf8read(y.formatCode)), j=parseInt(y.numFmtId,10);\n\t\t\t\tstyles.NumberFmt[j] = f;\n\t\t\t\tif(j>0) {\n\t\t\t\t\tif(j > 0x188) {\n\t\t\t\t\t\tfor(j = 0x188; j > 0x3c; --j) if(styles.NumberFmt[j] == null) break;\n\t\t\t\t\t\tstyles.NumberFmt[j] = f;\n\t\t\t\t\t}\n\t\t\t\t\tSSF_load(f,j);\n\t\t\t\t}\n\t\t\t} break;\n\t\t\tcase '</numFmt>': break;\n\t\t\tdefault: if(opts.WTF) throw new Error('unrecognized ' + y[0] + ' in numFmts');\n\t\t}\n\t}\n}\n\nfunction write_numFmts(NF/*:{[n:number|string]:string}*//*::, opts*/) {\n\tvar o = [\"<numFmts>\"];\n\t[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {\n\t\tfor(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) o[o.length] = (writextag('numFmt',null,{numFmtId:i,formatCode:escapexml(NF[i])}));\n\t});\n\tif(o.length === 1) return \"\";\n\to[o.length] = (\"</numFmts>\");\n\to[0] = writextag('numFmts', null, { count:o.length-2 }).replace(\"/>\", \">\");\n\treturn o.join(\"\");\n}\n\n/* 18.8.10 cellXfs CT_CellXfs */\nvar cellXF_uint = [ \"numFmtId\", \"fillId\", \"fontId\", \"borderId\", \"xfId\" ];\nvar cellXF_bool = [ \"applyAlignment\", \"applyBorder\", \"applyFill\", \"applyFont\", \"applyNumberFormat\", \"applyProtection\", \"pivotButton\", \"quotePrefix\" ];\nfunction parse_cellXfs(t, styles, opts) {\n\tstyles.CellXf = [];\n\tvar xf;\n\tvar pass = false;\n\t(t[0].match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x), i = 0;\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<cellXfs': case '<cellXfs>': case '<cellXfs/>': case '</cellXfs>': break;\n\n\t\t\t/* 18.8.45 xf CT_Xf */\n\t\t\tcase '<xf': case '<xf/>':\n\t\t\t\txf = y;\n\t\t\t\tdelete xf[0];\n\t\t\t\tfor(i = 0; i < cellXF_uint.length; ++i) if(xf[cellXF_uint[i]])\n\t\t\t\t\txf[cellXF_uint[i]] = parseInt(xf[cellXF_uint[i]], 10);\n\t\t\t\tfor(i = 0; i < cellXF_bool.length; ++i) if(xf[cellXF_bool[i]])\n\t\t\t\t\txf[cellXF_bool[i]] = parsexmlbool(xf[cellXF_bool[i]]);\n\t\t\t\tif(styles.NumberFmt && xf.numFmtId > 0x188) {\n\t\t\t\t\tfor(i = 0x188; i > 0x3c; --i) if(styles.NumberFmt[xf.numFmtId] == styles.NumberFmt[i]) { xf.numFmtId = i; break; }\n\t\t\t\t}\n\t\t\t\tstyles.CellXf.push(xf); break;\n\t\t\tcase '</xf>': break;\n\n\t\t\t/* 18.8.1 alignment CT_CellAlignment */\n\t\t\tcase '<alignment': case '<alignment/>':\n\t\t\t\tvar alignment = {};\n\t\t\t\tif(y.vertical) alignment.vertical = y.vertical;\n\t\t\t\tif(y.horizontal) alignment.horizontal = y.horizontal;\n\t\t\t\tif(y.textRotation != null) alignment.textRotation = y.textRotation;\n\t\t\t\tif(y.indent) alignment.indent = y.indent;\n\t\t\t\tif(y.wrapText) alignment.wrapText = parsexmlbool(y.wrapText);\n\t\t\t\txf.alignment = alignment;\n\t\t\t\tbreak;\n\t\t\tcase '</alignment>': break;\n\n\t\t\t/* 18.8.33 protection CT_CellProtection */\n\t\t\tcase '<protection':\n\t\t\t\tbreak;\n\t\t\tcase '</protection>': case '<protection/>': break;\n\n\t\t\t/* note: sometimes mc:AlternateContent appears bare */\n\t\t\tcase '<AlternateContent': pass = true; break;\n\t\t\tcase '</AlternateContent>': pass = false; break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': break;\n\t\t\tcase '<ext': pass = true; break;\n\t\t\tcase '</ext>': pass = false; break;\n\t\t\tdefault: if(opts && opts.WTF) {\n\t\t\t\tif(!pass) throw new Error('unrecognized ' + y[0] + ' in cellXfs');\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction write_cellXfs(cellXfs)/*:string*/ {\n\tvar o/*:Array<string>*/ = [];\n\to[o.length] = (writextag('cellXfs',null));\n\tcellXfs.forEach(function(c) {\n\t\to[o.length] = (writextag('xf', null, c));\n\t});\n\to[o.length] = (\"</cellXfs>\");\n\tif(o.length === 2) return \"\";\n\to[0] = writextag('cellXfs',null, {count:o.length-2}).replace(\"/>\",\">\");\n\treturn o.join(\"\");\n}\n\n/* 18.8 Styles CT_Stylesheet*/\nvar parse_sty_xml= /*#__PURE__*/(function make_pstyx() {\nvar numFmtRegex = /<(?:\\w+:)?numFmts([^>]*)>[\\S\\s]*?<\\/(?:\\w+:)?numFmts>/;\nvar cellXfRegex = /<(?:\\w+:)?cellXfs([^>]*)>[\\S\\s]*?<\\/(?:\\w+:)?cellXfs>/;\nvar fillsRegex = /<(?:\\w+:)?fills([^>]*)>[\\S\\s]*?<\\/(?:\\w+:)?fills>/;\nvar fontsRegex = /<(?:\\w+:)?fonts([^>]*)>[\\S\\s]*?<\\/(?:\\w+:)?fonts>/;\nvar bordersRegex = /<(?:\\w+:)?borders([^>]*)>[\\S\\s]*?<\\/(?:\\w+:)?borders>/;\n\nreturn function parse_sty_xml(data, themes, opts) {\n\tvar styles = {};\n\tif(!data) return styles;\n\tdata = data.replace(/<!--([\\s\\S]*?)-->/mg,\"\").replace(/<!DOCTYPE[^\\[]*\\[[^\\]]*\\]>/gm,\"\");\n\t/* 18.8.39 styleSheet CT_Stylesheet */\n\tvar t;\n\n\t/* 18.8.31 numFmts CT_NumFmts ? */\n\tif((t=data.match(numFmtRegex))) parse_numFmts(t, styles, opts);\n\n\t/* 18.8.23 fonts CT_Fonts ? */\n\tif((t=data.match(fontsRegex))) parse_fonts(t, styles, themes, opts);\n\n\t/* 18.8.21 fills CT_Fills ? */\n\tif((t=data.match(fillsRegex))) parse_fills(t, styles, themes, opts);\n\n\t/* 18.8.5  borders CT_Borders ? */\n\tif((t=data.match(bordersRegex))) parse_borders(t, styles, themes, opts);\n\n\t/* 18.8.9  cellStyleXfs CT_CellStyleXfs ? */\n\t/* 18.8.8  cellStyles CT_CellStyles ? */\n\n\t/* 18.8.10 cellXfs CT_CellXfs ? */\n\tif((t=data.match(cellXfRegex))) parse_cellXfs(t, styles, opts);\n\n\t/* 18.8.15 dxfs CT_Dxfs ? */\n\t/* 18.8.42 tableStyles CT_TableStyles ? */\n\t/* 18.8.11 colors CT_Colors ? */\n\t/* 18.2.10 extLst CT_ExtensionList ? */\n\n\treturn styles;\n};\n})();\n\nfunction write_sty_xml(wb/*:Workbook*/, opts)/*:string*/ {\n\tvar o = [XML_HEADER, writextag('styleSheet', null, {\n\t\t'xmlns': XMLNS_main[0],\n\t\t'xmlns:vt': XMLNS.vt\n\t})], w;\n\tif(wb.SSF && (w = write_numFmts(wb.SSF)) != null) o[o.length] = w;\n\to[o.length] = ('<fonts count=\"1\"><font><sz val=\"12\"/><color theme=\"1\"/><name val=\"Calibri\"/><family val=\"2\"/><scheme val=\"minor\"/></font></fonts>');\n\to[o.length] = ('<fills count=\"2\"><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill></fills>');\n\to[o.length] = ('<borders count=\"1\"><border><left/><right/><top/><bottom/><diagonal/></border></borders>');\n\to[o.length] = ('<cellStyleXfs count=\"1\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs>');\n\tif((w = write_cellXfs(opts.cellXfs))) o[o.length] = (w);\n\to[o.length] = ('<cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles>');\n\to[o.length] = ('<dxfs count=\"0\"/>');\n\to[o.length] = ('<tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium9\" defaultPivotStyle=\"PivotStyleMedium4\"/>');\n\n\tif(o.length>2){ o[o.length] = ('</styleSheet>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* [MS-XLSB] 2.4.657 BrtFmt */\nfunction parse_BrtFmt(data, length/*:number*/) {\n\tvar numFmtId = data.read_shift(2);\n\tvar stFmtCode = parse_XLWideString(data,length-2);\n\treturn [numFmtId, stFmtCode];\n}\nfunction write_BrtFmt(i/*:number*/, f/*:string*/, o) {\n\tif(!o) o = new_buf(6 + 4 * f.length);\n\to.write_shift(2, i);\n\twrite_XLWideString(f, o);\n\tvar out = (o.length > o.l) ? o.slice(0, o.l) : o;\n\tif(o.l == null) o.l = o.length;\n\treturn out;\n}\n\n/* [MS-XLSB] 2.4.659 BrtFont TODO */\nfunction parse_BrtFont(data, length/*:number*/, opts) {\n\tvar out = ({}/*:any*/);\n\n\tout.sz = data.read_shift(2) / 20;\n\n\tvar grbit = parse_FontFlags(data, 2, opts);\n\tif(grbit.fItalic) out.italic = 1;\n\tif(grbit.fCondense) out.condense = 1;\n\tif(grbit.fExtend) out.extend = 1;\n\tif(grbit.fShadow) out.shadow = 1;\n\tif(grbit.fOutline) out.outline = 1;\n\tif(grbit.fStrikeout) out.strike = 1;\n\n\tvar bls = data.read_shift(2);\n\tif(bls === 0x02BC) out.bold = 1;\n\n\tswitch(data.read_shift(2)) {\n\t\t/* case 0: out.vertAlign = \"baseline\"; break; */\n\t\tcase 1: out.vertAlign = \"superscript\"; break;\n\t\tcase 2: out.vertAlign = \"subscript\"; break;\n\t}\n\n\tvar underline = data.read_shift(1);\n\tif(underline != 0) out.underline = underline;\n\n\tvar family = data.read_shift(1);\n\tif(family > 0) out.family = family;\n\n\tvar bCharSet = data.read_shift(1);\n\tif(bCharSet > 0) out.charset = bCharSet;\n\n\tdata.l++;\n\tout.color = parse_BrtColor(data, 8);\n\n\tswitch(data.read_shift(1)) {\n\t\t/* case 0: out.scheme = \"none\": break; */\n\t\tcase 1: out.scheme = \"major\"; break;\n\t\tcase 2: out.scheme = \"minor\"; break;\n\t}\n\n\tout.name = parse_XLWideString(data, length - 21);\n\n\treturn out;\n}\nfunction write_BrtFont(font/*:any*/, o) {\n\tif(!o) o = new_buf(25+4*32);\n\to.write_shift(2, font.sz * 20);\n\twrite_FontFlags(font, o);\n\to.write_shift(2, font.bold ? 0x02BC : 0x0190);\n\tvar sss = 0;\n\tif(font.vertAlign == \"superscript\") sss = 1;\n\telse if(font.vertAlign == \"subscript\") sss = 2;\n\to.write_shift(2, sss);\n\to.write_shift(1, font.underline || 0);\n\to.write_shift(1, font.family || 0);\n\to.write_shift(1, font.charset || 0);\n\to.write_shift(1, 0);\n\twrite_BrtColor(font.color, o);\n\tvar scheme = 0;\n\tif(font.scheme == \"major\") scheme = 1;\n\tif(font.scheme == \"minor\") scheme = 2;\n\to.write_shift(1, scheme);\n\twrite_XLWideString(font.name, o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.650 BrtFill */\nvar XLSBFillPTNames = [\n\t\"none\",\n\t\"solid\",\n\t\"mediumGray\",\n\t\"darkGray\",\n\t\"lightGray\",\n\t\"darkHorizontal\",\n\t\"darkVertical\",\n\t\"darkDown\",\n\t\"darkUp\",\n\t\"darkGrid\",\n\t\"darkTrellis\",\n\t\"lightHorizontal\",\n\t\"lightVertical\",\n\t\"lightDown\",\n\t\"lightUp\",\n\t\"lightGrid\",\n\t\"lightTrellis\",\n\t\"gray125\",\n\t\"gray0625\"\n];\nvar rev_XLSBFillPTNames/*:EvertNumType*/;\n/* TODO: gradient fill representation */\nvar parse_BrtFill = parsenoop;\nfunction write_BrtFill(fill, o) {\n\tif(!o) o = new_buf(4*3 + 8*7 + 16*1);\n\tif(!rev_XLSBFillPTNames) rev_XLSBFillPTNames = (evert(XLSBFillPTNames)/*:any*/);\n\tvar fls/*:number*/ = rev_XLSBFillPTNames[fill.patternType];\n\tif(fls == null) fls = 0x28;\n\to.write_shift(4, fls);\n\tvar j = 0;\n\tif(fls != 0x28) {\n\t\t/* TODO: custom FG Color */\n\t\twrite_BrtColor({auto:1}, o);\n\t\t/* TODO: custom BG Color */\n\t\twrite_BrtColor({auto:1}, o);\n\n\t\tfor(; j < 12; ++j) o.write_shift(4, 0);\n\t} else {\n\t\tfor(; j < 4; ++j) o.write_shift(4, 0);\n\n\t\tfor(; j < 12; ++j) o.write_shift(4, 0); /* TODO */\n\t\t/* iGradientType */\n\t\t/* xnumDegree */\n\t\t/* xnumFillToLeft */\n\t\t/* xnumFillToRight */\n\t\t/* xnumFillToTop */\n\t\t/* xnumFillToBottom */\n\t\t/* cNumStop */\n\t\t/* xfillGradientStop */\n\t}\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.824 BrtXF */\nfunction parse_BrtXF(data, length/*:number*/) {\n\tvar tgt = data.l + length;\n\tvar ixfeParent = data.read_shift(2);\n\tvar ifmt = data.read_shift(2);\n\tdata.l = tgt;\n\treturn {ixfe:ixfeParent, numFmtId:ifmt };\n}\nfunction write_BrtXF(data, ixfeP, o) {\n\tif(!o) o = new_buf(16);\n\to.write_shift(2, ixfeP||0);\n\to.write_shift(2, data.numFmtId||0);\n\to.write_shift(2, 0); /* iFont */\n\to.write_shift(2, 0); /* iFill */\n\to.write_shift(2, 0); /* ixBorder */\n\to.write_shift(1, 0); /* trot */\n\to.write_shift(1, 0); /* indent */\n\tvar flow = 0;\n\to.write_shift(1, flow); /* flags */\n\to.write_shift(1, 0); /* flags */\n\to.write_shift(1, 0); /* xfGrbitAtr */\n\to.write_shift(1, 0);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.5.4 Blxf TODO */\nfunction write_Blxf(data, o) {\n\tif(!o) o = new_buf(10);\n\to.write_shift(1, 0); /* dg */\n\to.write_shift(1, 0);\n\to.write_shift(4, 0); /* color */\n\to.write_shift(4, 0); /* color */\n\treturn o;\n}\n/* [MS-XLSB] 2.4.302 BrtBorder TODO */\nvar parse_BrtBorder = parsenoop;\nfunction write_BrtBorder(border, o) {\n\tif(!o) o = new_buf(51);\n\to.write_shift(1, 0); /* diagonal */\n\twrite_Blxf(null, o); /* top */\n\twrite_Blxf(null, o); /* bottom */\n\twrite_Blxf(null, o); /* left */\n\twrite_Blxf(null, o); /* right */\n\twrite_Blxf(null, o); /* diag */\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.763 BrtStyle TODO */\nfunction write_BrtStyle(style, o) {\n\tif(!o) o = new_buf(12+4*10);\n\to.write_shift(4, style.xfId);\n\to.write_shift(2, 1);\n\to.write_shift(1, +style.builtinId);\n\to.write_shift(1, 0); /* iLevel */\n\twrite_XLNullableWideString(style.name || \"\", o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.272 BrtBeginTableStyles */\nfunction write_BrtBeginTableStyles(cnt, defTableStyle, defPivotStyle) {\n\tvar o = new_buf(4+256*2*4);\n\to.write_shift(4, cnt);\n\twrite_XLNullableWideString(defTableStyle, o);\n\twrite_XLNullableWideString(defPivotStyle, o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.1.7.50 Styles */\nfunction parse_sty_bin(data, themes, opts) {\n\tvar styles = {};\n\tstyles.NumberFmt = ([]/*:any*/);\n\tfor(var y in table_fmt) styles.NumberFmt[y] = table_fmt[y];\n\n\tstyles.CellXf = [];\n\tstyles.Fonts = [];\n\tvar state/*:Array<string>*/ = [];\n\tvar pass = false;\n\trecordhopper(data, function hopper_sty(val, R, RT) {\n\t\tswitch(RT) {\n\t\t\tcase 0x002C: /* BrtFmt */\n\t\t\t\tstyles.NumberFmt[val[0]] = val[1]; SSF_load(val[1], val[0]);\n\t\t\t\tbreak;\n\t\t\tcase 0x002B: /* BrtFont */\n\t\t\t\tstyles.Fonts.push(val);\n\t\t\t\tif(val.color.theme != null && themes && themes.themeElements && themes.themeElements.clrScheme) {\n\t\t\t\t\tval.color.rgb = rgb_tint(themes.themeElements.clrScheme[val.color.theme].rgb, val.color.tint || 0);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x0401: /* BrtKnownFonts */ break;\n\t\t\tcase 0x002D: /* BrtFill */\n\t\t\t\tbreak;\n\t\t\tcase 0x002E: /* BrtBorder */\n\t\t\t\tbreak;\n\t\t\tcase 0x002F: /* BrtXF */\n\t\t\t\tif(state[state.length - 1] == 0x0269 /* BrtBeginCellXFs */) {\n\t\t\t\t\tstyles.CellXf.push(val);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x0030: /* BrtStyle */\n\t\t\tcase 0x01FB: /* BrtDXF */\n\t\t\tcase 0x023C: /* BrtMRUColor */\n\t\t\tcase 0x01DB: /* BrtIndexedColor */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0493: /* BrtDXF14 */\n\t\t\tcase 0x0836: /* BrtDXF15 */\n\t\t\tcase 0x046A: /* BrtSlicerStyleElement */\n\t\t\tcase 0x0200: /* BrtTableStyleElement */\n\t\t\tcase 0x082F: /* BrtTimelineStyleElement */\n\t\t\tcase 0x0C00: /* BrtUid */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0023: /* BrtFRTBegin */\n\t\t\t\tpass = true; break;\n\t\t\tcase 0x0024: /* BrtFRTEnd */\n\t\t\t\tpass = false; break;\n\t\t\tcase 0x0025: /* BrtACBegin */\n\t\t\t\tstate.push(RT); pass = true; break;\n\t\t\tcase 0x0026: /* BrtACEnd */\n\t\t\t\tstate.pop(); pass = false; break;\n\n\t\t\tdefault:\n\t\t\t\tif(R.T > 0) state.push(RT);\n\t\t\t\telse if(R.T < 0) state.pop();\n\t\t\t\telse if(!pass || (opts.WTF && state[state.length-1] != 0x0025 /* BrtACBegin */)) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t});\n\treturn styles;\n}\n\nfunction write_FMTS_bin(ba, NF/*:?SSFTable*/) {\n\tif(!NF) return;\n\tvar cnt = 0;\n\t[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {\n\t\t/*:: if(!NF) return; */\n\t\tfor(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) ++cnt;\n\t});\n\n\tif(cnt == 0) return;\n\twrite_record(ba, 0x0267 /* BrtBeginFmts */, write_UInt32LE(cnt));\n\t[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {\n\t\t/*:: if(!NF) return; */\n\t\tfor(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) write_record(ba, 0x002C /* BrtFmt */, write_BrtFmt(i, NF[i]));\n\t});\n\twrite_record(ba, 0x0268 /* BrtEndFmts */);\n}\n\nfunction write_FONTS_bin(ba/*::, data*/) {\n\tvar cnt = 1;\n\n\tif(cnt == 0) return;\n\twrite_record(ba, 0x0263 /* BrtBeginFonts */, write_UInt32LE(cnt));\n\twrite_record(ba, 0x002B /* BrtFont */, write_BrtFont({\n\t\tsz:12,\n\t\tcolor: {theme:1},\n\t\tname: \"Calibri\",\n\t\tfamily: 2,\n\t\tscheme: \"minor\"\n\t}));\n\t/* 1*65491BrtFont [ACFONTS] */\n\twrite_record(ba, 0x0264 /* BrtEndFonts */);\n}\n\nfunction write_FILLS_bin(ba/*::, data*/) {\n\tvar cnt = 2;\n\n\tif(cnt == 0) return;\n\twrite_record(ba, 0x025B /* BrtBeginFills */, write_UInt32LE(cnt));\n\twrite_record(ba, 0x002D /* BrtFill */, write_BrtFill({patternType:\"none\"}));\n\twrite_record(ba, 0x002D /* BrtFill */, write_BrtFill({patternType:\"gray125\"}));\n\t/* 1*65431BrtFill */\n\twrite_record(ba, 0x025C /* BrtEndFills */);\n}\n\nfunction write_BORDERS_bin(ba/*::, data*/) {\n\tvar cnt = 1;\n\n\tif(cnt == 0) return;\n\twrite_record(ba, 0x0265 /* BrtBeginBorders */, write_UInt32LE(cnt));\n\twrite_record(ba, 0x002E /* BrtBorder */, write_BrtBorder({}));\n\t/* 1*65430BrtBorder */\n\twrite_record(ba, 0x0266 /* BrtEndBorders */);\n}\n\nfunction write_CELLSTYLEXFS_bin(ba/*::, data*/) {\n\tvar cnt = 1;\n\twrite_record(ba, 0x0272 /* BrtBeginCellStyleXFs */, write_UInt32LE(cnt));\n\twrite_record(ba, 0x002F /* BrtXF */, write_BrtXF({\n\t\tnumFmtId: 0,\n\t\tfontId:   0,\n\t\tfillId:   0,\n\t\tborderId: 0\n\t}, 0xFFFF));\n\t/* 1*65430(BrtXF *FRT) */\n\twrite_record(ba, 0x0273 /* BrtEndCellStyleXFs */);\n}\n\nfunction write_CELLXFS_bin(ba, data) {\n\twrite_record(ba, 0x0269 /* BrtBeginCellXFs */, write_UInt32LE(data.length));\n\tdata.forEach(function(c) { write_record(ba, 0x002F /* BrtXF */, write_BrtXF(c,0)); });\n\t/* 1*65430(BrtXF *FRT) */\n\twrite_record(ba, 0x026A /* BrtEndCellXFs */);\n}\n\nfunction write_STYLES_bin(ba/*::, data*/) {\n\tvar cnt = 1;\n\n\twrite_record(ba, 0x026B /* BrtBeginStyles */, write_UInt32LE(cnt));\n\twrite_record(ba, 0x0030 /* BrtStyle */, write_BrtStyle({\n\t\txfId:0,\n\t\tbuiltinId:0,\n\t\tname:\"Normal\"\n\t}));\n\t/* 1*65430(BrtStyle *FRT) */\n\twrite_record(ba, 0x026C /* BrtEndStyles */);\n}\n\nfunction write_DXFS_bin(ba/*::, data*/) {\n\tvar cnt = 0;\n\n\twrite_record(ba, 0x01F9 /* BrtBeginDXFs */, write_UInt32LE(cnt));\n\t/* *2147483647(BrtDXF *FRT) */\n\twrite_record(ba, 0x01FA /* BrtEndDXFs */);\n}\n\nfunction write_TABLESTYLES_bin(ba/*::, data*/) {\n\tvar cnt = 0;\n\n\twrite_record(ba, 0x01FC /* BrtBeginTableStyles */, write_BrtBeginTableStyles(cnt, \"TableStyleMedium9\", \"PivotStyleMedium4\"));\n\t/* *TABLESTYLE */\n\twrite_record(ba, 0x01FD /* BrtEndTableStyles */);\n}\n\nfunction write_COLORPALETTE_bin(/*::ba, data*/) {\n\treturn;\n\t/* BrtBeginColorPalette [INDEXEDCOLORS] [MRUCOLORS] BrtEndColorPalette */\n}\n\n/* [MS-XLSB] 2.1.7.50 Styles */\nfunction write_sty_bin(wb, opts) {\n\tvar ba = buf_array();\n\twrite_record(ba, 0x0116 /* BrtBeginStyleSheet */);\n\twrite_FMTS_bin(ba, wb.SSF);\n\twrite_FONTS_bin(ba, wb);\n\twrite_FILLS_bin(ba, wb);\n\twrite_BORDERS_bin(ba, wb);\n\twrite_CELLSTYLEXFS_bin(ba, wb);\n\twrite_CELLXFS_bin(ba, opts.cellXfs);\n\twrite_STYLES_bin(ba, wb);\n\twrite_DXFS_bin(ba, wb);\n\twrite_TABLESTYLES_bin(ba, wb);\n\twrite_COLORPALETTE_bin(ba, wb);\n\t/* FRTSTYLESHEET*/\n\twrite_record(ba, 0x0117 /* BrtEndStyleSheet */);\n\treturn ba.end();\n}\n/* Even though theme layout is dk1 lt1 dk2 lt2, true order is lt1 dk1 lt2 dk2 */\nvar XLSXThemeClrScheme = [\n\t'</a:lt1>', '</a:dk1>', '</a:lt2>', '</a:dk2>',\n\t'</a:accent1>', '</a:accent2>', '</a:accent3>',\n\t'</a:accent4>', '</a:accent5>', '</a:accent6>',\n\t'</a:hlink>', '</a:folHlink>'\n];\n/* 20.1.6.2 clrScheme CT_ColorScheme */\nfunction parse_clrScheme(t, themes, opts) {\n\tthemes.themeElements.clrScheme = [];\n\tvar color = {};\n\t(t[0].match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\tswitch(y[0]) {\n\t\t\t/* 20.1.6.2 clrScheme (Color Scheme) CT_ColorScheme */\n\t\t\tcase '<a:clrScheme': case '</a:clrScheme>': break;\n\n\t\t\t/* 20.1.2.3.32 srgbClr CT_SRgbColor */\n\t\t\tcase '<a:srgbClr':\n\t\t\t\tcolor.rgb = y.val; break;\n\n\t\t\t/* 20.1.2.3.33 sysClr CT_SystemColor */\n\t\t\tcase '<a:sysClr':\n\t\t\t\tcolor.rgb = y.lastClr; break;\n\n\t\t\t/* 20.1.4.1.1 accent1 (Accent 1) */\n\t\t\t/* 20.1.4.1.2 accent2 (Accent 2) */\n\t\t\t/* 20.1.4.1.3 accent3 (Accent 3) */\n\t\t\t/* 20.1.4.1.4 accent4 (Accent 4) */\n\t\t\t/* 20.1.4.1.5 accent5 (Accent 5) */\n\t\t\t/* 20.1.4.1.6 accent6 (Accent 6) */\n\t\t\t/* 20.1.4.1.9 dk1 (Dark 1) */\n\t\t\t/* 20.1.4.1.10 dk2 (Dark 2) */\n\t\t\t/* 20.1.4.1.15 folHlink (Followed Hyperlink) */\n\t\t\t/* 20.1.4.1.19 hlink (Hyperlink) */\n\t\t\t/* 20.1.4.1.22 lt1 (Light 1) */\n\t\t\t/* 20.1.4.1.23 lt2 (Light 2) */\n\t\t\tcase '<a:dk1>': case '</a:dk1>':\n\t\t\tcase '<a:lt1>': case '</a:lt1>':\n\t\t\tcase '<a:dk2>': case '</a:dk2>':\n\t\t\tcase '<a:lt2>': case '</a:lt2>':\n\t\t\tcase '<a:accent1>': case '</a:accent1>':\n\t\t\tcase '<a:accent2>': case '</a:accent2>':\n\t\t\tcase '<a:accent3>': case '</a:accent3>':\n\t\t\tcase '<a:accent4>': case '</a:accent4>':\n\t\t\tcase '<a:accent5>': case '</a:accent5>':\n\t\t\tcase '<a:accent6>': case '</a:accent6>':\n\t\t\tcase '<a:hlink>': case '</a:hlink>':\n\t\t\tcase '<a:folHlink>': case '</a:folHlink>':\n\t\t\t\tif (y[0].charAt(1) === '/') {\n\t\t\t\t\tthemes.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(y[0])] = color;\n\t\t\t\t\tcolor = {};\n\t\t\t\t} else {\n\t\t\t\t\tcolor.name = y[0].slice(3, y[0].length - 1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault: if(opts && opts.WTF) throw new Error('Unrecognized ' + y[0] + ' in clrScheme');\n\t\t}\n\t});\n}\n\n/* 20.1.4.1.18 fontScheme CT_FontScheme */\nfunction parse_fontScheme(/*::t, themes, opts*/) { }\n\n/* 20.1.4.1.15 fmtScheme CT_StyleMatrix */\nfunction parse_fmtScheme(/*::t, themes, opts*/) { }\n\nvar clrsregex = /<a:clrScheme([^>]*)>[\\s\\S]*<\\/a:clrScheme>/;\nvar fntsregex = /<a:fontScheme([^>]*)>[\\s\\S]*<\\/a:fontScheme>/;\nvar fmtsregex = /<a:fmtScheme([^>]*)>[\\s\\S]*<\\/a:fmtScheme>/;\n\n/* 20.1.6.10 themeElements CT_BaseStyles */\nfunction parse_themeElements(data, themes, opts) {\n\tthemes.themeElements = {};\n\n\tvar t;\n\n\t[\n\t\t/* clrScheme CT_ColorScheme */\n\t\t['clrScheme', clrsregex, parse_clrScheme],\n\t\t/* fontScheme CT_FontScheme */\n\t\t['fontScheme', fntsregex, parse_fontScheme],\n\t\t/* fmtScheme CT_StyleMatrix */\n\t\t['fmtScheme', fmtsregex, parse_fmtScheme]\n\t].forEach(function(m) {\n\t\tif(!(t=data.match(m[1]))) throw new Error(m[0] + ' not found in themeElements');\n\t\tm[2](t, themes, opts);\n\t});\n}\n\nvar themeltregex = /<a:themeElements([^>]*)>[\\s\\S]*<\\/a:themeElements>/;\n\n/* 14.2.7 Theme Part */\nfunction parse_theme_xml(data/*:string*/, opts) {\n\t/* 20.1.6.9 theme CT_OfficeStyleSheet */\n\tif(!data || data.length === 0) data = write_theme();\n\n\tvar t;\n\tvar themes = {};\n\n\t/* themeElements CT_BaseStyles */\n\tif(!(t=data.match(themeltregex))) throw new Error('themeElements not found in theme');\n\tparse_themeElements(t[0], themes, opts);\n\tthemes.raw = data;\n\treturn themes;\n}\n\nfunction write_theme(Themes, opts)/*:string*/ {\n\tif(opts && opts.themeXLSX) return opts.themeXLSX;\n\tif(Themes && typeof Themes.raw == \"string\") return Themes.raw;\n\tvar o = [XML_HEADER];\n\to[o.length] = '<a:theme xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" name=\"Office Theme\">';\n\to[o.length] =  '<a:themeElements>';\n\n\to[o.length] =   '<a:clrScheme name=\"Office\">';\n\to[o.length] =    '<a:dk1><a:sysClr val=\"windowText\" lastClr=\"000000\"/></a:dk1>';\n\to[o.length] =    '<a:lt1><a:sysClr val=\"window\" lastClr=\"FFFFFF\"/></a:lt1>';\n\to[o.length] =    '<a:dk2><a:srgbClr val=\"1F497D\"/></a:dk2>';\n\to[o.length] =    '<a:lt2><a:srgbClr val=\"EEECE1\"/></a:lt2>';\n\to[o.length] =    '<a:accent1><a:srgbClr val=\"4F81BD\"/></a:accent1>';\n\to[o.length] =    '<a:accent2><a:srgbClr val=\"C0504D\"/></a:accent2>';\n\to[o.length] =    '<a:accent3><a:srgbClr val=\"9BBB59\"/></a:accent3>';\n\to[o.length] =    '<a:accent4><a:srgbClr val=\"8064A2\"/></a:accent4>';\n\to[o.length] =    '<a:accent5><a:srgbClr val=\"4BACC6\"/></a:accent5>';\n\to[o.length] =    '<a:accent6><a:srgbClr val=\"F79646\"/></a:accent6>';\n\to[o.length] =    '<a:hlink><a:srgbClr val=\"0000FF\"/></a:hlink>';\n\to[o.length] =    '<a:folHlink><a:srgbClr val=\"800080\"/></a:folHlink>';\n\to[o.length] =   '</a:clrScheme>';\n\n\to[o.length] =   '<a:fontScheme name=\"Office\">';\n\to[o.length] =    '<a:majorFont>';\n\to[o.length] =     '<a:latin typeface=\"Cambria\"/>';\n\to[o.length] =     '<a:ea typeface=\"\"/>';\n\to[o.length] =     '<a:cs typeface=\"\"/>';\n\to[o.length] =     '<a:font script=\"Jpan\" typeface=\" \"/>';\n\to[o.length] =     '<a:font script=\"Hang\" typeface=\" \"/>';\n\to[o.length] =     '<a:font script=\"Hans\" typeface=\"\"/>';\n\to[o.length] =     '<a:font script=\"Hant\" typeface=\"\"/>';\n\to[o.length] =     '<a:font script=\"Arab\" typeface=\"Times New Roman\"/>';\n\to[o.length] =     '<a:font script=\"Hebr\" typeface=\"Times New Roman\"/>';\n\to[o.length] =     '<a:font script=\"Thai\" typeface=\"Tahoma\"/>';\n\to[o.length] =     '<a:font script=\"Ethi\" typeface=\"Nyala\"/>';\n\to[o.length] =     '<a:font script=\"Beng\" typeface=\"Vrinda\"/>';\n\to[o.length] =     '<a:font script=\"Gujr\" typeface=\"Shruti\"/>';\n\to[o.length] =     '<a:font script=\"Khmr\" typeface=\"MoolBoran\"/>';\n\to[o.length] =     '<a:font script=\"Knda\" typeface=\"Tunga\"/>';\n\to[o.length] =     '<a:font script=\"Guru\" typeface=\"Raavi\"/>';\n\to[o.length] =     '<a:font script=\"Cans\" typeface=\"Euphemia\"/>';\n\to[o.length] =     '<a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/>';\n\to[o.length] =     '<a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/>';\n\to[o.length] =     '<a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/>';\n\to[o.length] =     '<a:font script=\"Thaa\" typeface=\"MV Boli\"/>';\n\to[o.length] =     '<a:font script=\"Deva\" typeface=\"Mangal\"/>';\n\to[o.length] =     '<a:font script=\"Telu\" typeface=\"Gautami\"/>';\n\to[o.length] =     '<a:font script=\"Taml\" typeface=\"Latha\"/>';\n\to[o.length] =     '<a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/>';\n\to[o.length] =     '<a:font script=\"Orya\" typeface=\"Kalinga\"/>';\n\to[o.length] =     '<a:font script=\"Mlym\" typeface=\"Kartika\"/>';\n\to[o.length] =     '<a:font script=\"Laoo\" typeface=\"DokChampa\"/>';\n\to[o.length] =     '<a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/>';\n\to[o.length] =     '<a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/>';\n\to[o.length] =     '<a:font script=\"Viet\" typeface=\"Times New Roman\"/>';\n\to[o.length] =     '<a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/>';\n\to[o.length] =     '<a:font script=\"Geor\" typeface=\"Sylfaen\"/>';\n\to[o.length] =    '</a:majorFont>';\n\to[o.length] =    '<a:minorFont>';\n\to[o.length] =     '<a:latin typeface=\"Calibri\"/>';\n\to[o.length] =     '<a:ea typeface=\"\"/>';\n\to[o.length] =     '<a:cs typeface=\"\"/>';\n\to[o.length] =     '<a:font script=\"Jpan\" typeface=\" \"/>';\n\to[o.length] =     '<a:font script=\"Hang\" typeface=\" \"/>';\n\to[o.length] =     '<a:font script=\"Hans\" typeface=\"\"/>';\n\to[o.length] =     '<a:font script=\"Hant\" typeface=\"\"/>';\n\to[o.length] =     '<a:font script=\"Arab\" typeface=\"Arial\"/>';\n\to[o.length] =     '<a:font script=\"Hebr\" typeface=\"Arial\"/>';\n\to[o.length] =     '<a:font script=\"Thai\" typeface=\"Tahoma\"/>';\n\to[o.length] =     '<a:font script=\"Ethi\" typeface=\"Nyala\"/>';\n\to[o.length] =     '<a:font script=\"Beng\" typeface=\"Vrinda\"/>';\n\to[o.length] =     '<a:font script=\"Gujr\" typeface=\"Shruti\"/>';\n\to[o.length] =     '<a:font script=\"Khmr\" typeface=\"DaunPenh\"/>';\n\to[o.length] =     '<a:font script=\"Knda\" typeface=\"Tunga\"/>';\n\to[o.length] =     '<a:font script=\"Guru\" typeface=\"Raavi\"/>';\n\to[o.length] =     '<a:font script=\"Cans\" typeface=\"Euphemia\"/>';\n\to[o.length] =     '<a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/>';\n\to[o.length] =     '<a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/>';\n\to[o.length] =     '<a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/>';\n\to[o.length] =     '<a:font script=\"Thaa\" typeface=\"MV Boli\"/>';\n\to[o.length] =     '<a:font script=\"Deva\" typeface=\"Mangal\"/>';\n\to[o.length] =     '<a:font script=\"Telu\" typeface=\"Gautami\"/>';\n\to[o.length] =     '<a:font script=\"Taml\" typeface=\"Latha\"/>';\n\to[o.length] =     '<a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/>';\n\to[o.length] =     '<a:font script=\"Orya\" typeface=\"Kalinga\"/>';\n\to[o.length] =     '<a:font script=\"Mlym\" typeface=\"Kartika\"/>';\n\to[o.length] =     '<a:font script=\"Laoo\" typeface=\"DokChampa\"/>';\n\to[o.length] =     '<a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/>';\n\to[o.length] =     '<a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/>';\n\to[o.length] =     '<a:font script=\"Viet\" typeface=\"Arial\"/>';\n\to[o.length] =     '<a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/>';\n\to[o.length] =     '<a:font script=\"Geor\" typeface=\"Sylfaen\"/>';\n\to[o.length] =    '</a:minorFont>';\n\to[o.length] =   '</a:fontScheme>';\n\n\to[o.length] =   '<a:fmtScheme name=\"Office\">';\n\to[o.length] =    '<a:fillStyleLst>';\n\to[o.length] =     '<a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill>';\n\to[o.length] =     '<a:gradFill rotWithShape=\"1\">';\n\to[o.length] =      '<a:gsLst>';\n\to[o.length] =       '<a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"50000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs>';\n\to[o.length] =       '<a:gs pos=\"35000\"><a:schemeClr val=\"phClr\"><a:tint val=\"37000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs>';\n\to[o.length] =       '<a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:tint val=\"15000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs>';\n\to[o.length] =      '</a:gsLst>';\n\to[o.length] =      '<a:lin ang=\"16200000\" scaled=\"1\"/>';\n\to[o.length] =     '</a:gradFill>';\n\to[o.length] =     '<a:gradFill rotWithShape=\"1\">';\n\to[o.length] =      '<a:gsLst>';\n\to[o.length] =       '<a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"100000\"/><a:shade val=\"100000\"/><a:satMod val=\"130000\"/></a:schemeClr></a:gs>';\n\to[o.length] =       '<a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:tint val=\"50000\"/><a:shade val=\"100000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs>';\n\to[o.length] =      '</a:gsLst>';\n\to[o.length] =      '<a:lin ang=\"16200000\" scaled=\"0\"/>';\n\to[o.length] =     '</a:gradFill>';\n\to[o.length] =    '</a:fillStyleLst>';\n\to[o.length] =    '<a:lnStyleLst>';\n\to[o.length] =     '<a:ln w=\"9525\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"><a:shade val=\"95000\"/><a:satMod val=\"105000\"/></a:schemeClr></a:solidFill><a:prstDash val=\"solid\"/></a:ln>';\n\to[o.length] =     '<a:ln w=\"25400\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/></a:ln>';\n\to[o.length] =     '<a:ln w=\"38100\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/></a:ln>';\n\to[o.length] =    '</a:lnStyleLst>';\n\to[o.length] =    '<a:effectStyleLst>';\n\to[o.length] =     '<a:effectStyle>';\n\to[o.length] =      '<a:effectLst>';\n\to[o.length] =       '<a:outerShdw blurRad=\"40000\" dist=\"20000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"38000\"/></a:srgbClr></a:outerShdw>';\n\to[o.length] =      '</a:effectLst>';\n\to[o.length] =     '</a:effectStyle>';\n\to[o.length] =     '<a:effectStyle>';\n\to[o.length] =      '<a:effectLst>';\n\to[o.length] =       '<a:outerShdw blurRad=\"40000\" dist=\"23000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"35000\"/></a:srgbClr></a:outerShdw>';\n\to[o.length] =      '</a:effectLst>';\n\to[o.length] =     '</a:effectStyle>';\n\to[o.length] =     '<a:effectStyle>';\n\to[o.length] =      '<a:effectLst>';\n\to[o.length] =       '<a:outerShdw blurRad=\"40000\" dist=\"23000\" dir=\"5400000\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"35000\"/></a:srgbClr></a:outerShdw>';\n\to[o.length] =      '</a:effectLst>';\n\to[o.length] =      '<a:scene3d><a:camera prst=\"orthographicFront\"><a:rot lat=\"0\" lon=\"0\" rev=\"0\"/></a:camera><a:lightRig rig=\"threePt\" dir=\"t\"><a:rot lat=\"0\" lon=\"0\" rev=\"1200000\"/></a:lightRig></a:scene3d>';\n\to[o.length] =      '<a:sp3d><a:bevelT w=\"63500\" h=\"25400\"/></a:sp3d>';\n\to[o.length] =     '</a:effectStyle>';\n\to[o.length] =    '</a:effectStyleLst>';\n\to[o.length] =    '<a:bgFillStyleLst>';\n\to[o.length] =     '<a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill>';\n\to[o.length] =     '<a:gradFill rotWithShape=\"1\">';\n\to[o.length] =      '<a:gsLst>';\n\to[o.length] =       '<a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"40000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs>';\n\to[o.length] =       '<a:gs pos=\"40000\"><a:schemeClr val=\"phClr\"><a:tint val=\"45000\"/><a:shade val=\"99000\"/><a:satMod val=\"350000\"/></a:schemeClr></a:gs>';\n\to[o.length] =       '<a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"20000\"/><a:satMod val=\"255000\"/></a:schemeClr></a:gs>';\n\to[o.length] =      '</a:gsLst>';\n\to[o.length] =      '<a:path path=\"circle\"><a:fillToRect l=\"50000\" t=\"-80000\" r=\"50000\" b=\"180000\"/></a:path>';\n\to[o.length] =     '</a:gradFill>';\n\to[o.length] =     '<a:gradFill rotWithShape=\"1\">';\n\to[o.length] =      '<a:gsLst>';\n\to[o.length] =       '<a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"80000\"/><a:satMod val=\"300000\"/></a:schemeClr></a:gs>';\n\to[o.length] =       '<a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"30000\"/><a:satMod val=\"200000\"/></a:schemeClr></a:gs>';\n\to[o.length] =      '</a:gsLst>';\n\to[o.length] =      '<a:path path=\"circle\"><a:fillToRect l=\"50000\" t=\"50000\" r=\"50000\" b=\"50000\"/></a:path>';\n\to[o.length] =     '</a:gradFill>';\n\to[o.length] =    '</a:bgFillStyleLst>';\n\to[o.length] =   '</a:fmtScheme>';\n\to[o.length] =  '</a:themeElements>';\n\n\to[o.length] =  '<a:objectDefaults>';\n\to[o.length] =   '<a:spDef>';\n\to[o.length] =    '<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx=\"1\"><a:schemeClr val=\"accent1\"/></a:lnRef><a:fillRef idx=\"3\"><a:schemeClr val=\"accent1\"/></a:fillRef><a:effectRef idx=\"2\"><a:schemeClr val=\"accent1\"/></a:effectRef><a:fontRef idx=\"minor\"><a:schemeClr val=\"lt1\"/></a:fontRef></a:style>';\n\to[o.length] =   '</a:spDef>';\n\to[o.length] =   '<a:lnDef>';\n\to[o.length] =    '<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx=\"2\"><a:schemeClr val=\"accent1\"/></a:lnRef><a:fillRef idx=\"0\"><a:schemeClr val=\"accent1\"/></a:fillRef><a:effectRef idx=\"1\"><a:schemeClr val=\"accent1\"/></a:effectRef><a:fontRef idx=\"minor\"><a:schemeClr val=\"tx1\"/></a:fontRef></a:style>';\n\to[o.length] =   '</a:lnDef>';\n\to[o.length] =  '</a:objectDefaults>';\n\to[o.length] =  '<a:extraClrSchemeLst/>';\n\to[o.length] = '</a:theme>';\n\treturn o.join(\"\");\n}\n/* [MS-XLS] 2.4.326 TODO: payload is a zip file */\nfunction parse_Theme(blob, length, opts) {\n\tvar end = blob.l + length;\n\tvar dwThemeVersion = blob.read_shift(4);\n\tif(dwThemeVersion === 124226) return;\n\tif(!opts.cellStyles) { blob.l = end; return; }\n\tvar data = blob.slice(blob.l);\n\tblob.l = end;\n\tvar zip; try { zip = zip_read(data, {type: \"array\"}); } catch(e) { return; }\n\tvar themeXML = getzipstr(zip, \"theme/theme/theme1.xml\", true);\n\tif(!themeXML) return;\n\treturn parse_theme_xml(themeXML, opts);\n}\n\n/* 2.5.49 */\nfunction parse_ColorTheme(blob/*::, length*/) { return blob.read_shift(4); }\n\n/* 2.5.155 */\nfunction parse_FullColorExt(blob/*::, length*/) {\n\tvar o = {};\n\to.xclrType = blob.read_shift(2);\n\to.nTintShade = blob.read_shift(2);\n\tswitch(o.xclrType) {\n\t\tcase 0: blob.l += 4; break;\n\t\tcase 1: o.xclrValue = parse_IcvXF(blob, 4); break;\n\t\tcase 2: o.xclrValue = parse_LongRGBA(blob, 4); break;\n\t\tcase 3: o.xclrValue = parse_ColorTheme(blob, 4); break;\n\t\tcase 4: blob.l += 4; break;\n\t}\n\tblob.l += 8;\n\treturn o;\n}\n\n/* 2.5.164 TODO: read 7 bits*/\nfunction parse_IcvXF(blob, length) {\n\treturn parsenoop(blob, length);\n}\n\n/* 2.5.280 */\nfunction parse_XFExtGradient(blob, length) {\n\treturn parsenoop(blob, length);\n}\n\n/* [MS-XLS] 2.5.108 */\nfunction parse_ExtProp(blob/*::, length*/)/*:Array<any>*/ {\n\tvar extType = blob.read_shift(2);\n\tvar cb = blob.read_shift(2) - 4;\n\tvar o = [extType];\n\tswitch(extType) {\n\t\tcase 0x04: case 0x05: case 0x07: case 0x08:\n\t\tcase 0x09: case 0x0A: case 0x0B: case 0x0D:\n\t\t\to[1] = parse_FullColorExt(blob, cb); break;\n\t\tcase 0x06: o[1] = parse_XFExtGradient(blob, cb); break;\n\t\tcase 0x0E: case 0x0F: o[1] = blob.read_shift(cb === 1 ? 1 : 2); break;\n\t\tdefault: throw new Error(\"Unrecognized ExtProp type: \" + extType + \" \" + cb);\n\t}\n\treturn o;\n}\n\n/* 2.4.355 */\nfunction parse_XFExt(blob, length) {\n\tvar end = blob.l + length;\n\tblob.l += 2;\n\tvar ixfe = blob.read_shift(2);\n\tblob.l += 2;\n\tvar cexts = blob.read_shift(2);\n\tvar ext/*:AOA*/ = [];\n\twhile(cexts-- > 0) ext.push(parse_ExtProp(blob, end-blob.l));\n\treturn {ixfe:ixfe, ext:ext};\n}\n\n/* xf is an XF, see parse_XFExt for xfext */\nfunction update_xfext(xf, xfext) {\n\txfext.forEach(function(xfe) {\n\t\tswitch(xfe[0]) { /* 2.5.108 extPropData */\n\t\t\tcase 0x04: break; /* foreground color */\n\t\t\tcase 0x05: break; /* background color */\n\t\t\tcase 0x06: break; /* gradient fill */\n\t\t\tcase 0x07: break; /* top cell border color */\n\t\t\tcase 0x08: break; /* bottom cell border color */\n\t\t\tcase 0x09: break; /* left cell border color */\n\t\t\tcase 0x0a: break; /* right cell border color */\n\t\t\tcase 0x0b: break; /* diagonal cell border color */\n\t\t\tcase 0x0d: /* text color */\n\t\t\t\tbreak;\n\t\t\tcase 0x0e: break; /* font scheme */\n\t\t\tcase 0x0f: break; /* indentation level */\n\t\t}\n\t});\n}\n\nfunction parse_BrtMdtinfo(data, length) {\n  return {\n    flags: data.read_shift(4),\n    version: data.read_shift(4),\n    name: parse_XLWideString(data, length - 8)\n  };\n}\nfunction write_BrtMdtinfo(data) {\n  var o = new_buf(12 + 2 * data.name.length);\n  o.write_shift(4, data.flags);\n  o.write_shift(4, data.version);\n  write_XLWideString(data.name, o);\n  return o.slice(0, o.l);\n}\nfunction parse_BrtMdb(data) {\n  var out = [];\n  var cnt = data.read_shift(4);\n  while (cnt-- > 0)\n    out.push([data.read_shift(4), data.read_shift(4)]);\n  return out;\n}\nfunction write_BrtMdb(mdb) {\n  var o = new_buf(4 + 8 * mdb.length);\n  o.write_shift(4, mdb.length);\n  for (var i = 0; i < mdb.length; ++i) {\n    o.write_shift(4, mdb[i][0]);\n    o.write_shift(4, mdb[i][1]);\n  }\n  return o;\n}\nfunction write_BrtBeginEsfmd(cnt, name) {\n  var o = new_buf(8 + 2 * name.length);\n  o.write_shift(4, cnt);\n  write_XLWideString(name, o);\n  return o.slice(0, o.l);\n}\nfunction parse_BrtBeginEsmdb(data) {\n  data.l += 4;\n  return data.read_shift(4) != 0;\n}\nfunction write_BrtBeginEsmdb(cnt, cm) {\n  var o = new_buf(8);\n  o.write_shift(4, cnt);\n  o.write_shift(4, cm ? 1 : 0);\n  return o;\n}\nfunction parse_xlmeta_bin(data, name, _opts) {\n  var out = { Types: [], Cell: [], Value: [] };\n  var opts = _opts || {};\n  var state = [];\n  var pass = false;\n  var metatype = 2;\n  recordhopper(data, function(val, R, RT) {\n    switch (RT) {\n      case 335:\n        out.Types.push({ name: val.name });\n        break;\n      case 51:\n        val.forEach(function(r) {\n          if (metatype == 1)\n            out.Cell.push({ type: out.Types[r[0] - 1].name, index: r[1] });\n          else if (metatype == 0)\n            out.Value.push({ type: out.Types[r[0] - 1].name, index: r[1] });\n        });\n        break;\n      case 337:\n        metatype = val ? 1 : 0;\n        break;\n      case 338:\n        metatype = 2;\n        break;\n      case 35:\n        state.push(RT);\n        pass = true;\n        break;\n      case 36:\n        state.pop();\n        pass = false;\n        break;\n      default:\n        if (R.T) {\n        } else if (!pass || opts.WTF && state[state.length - 1] != 35)\n          throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n    }\n  });\n  return out;\n}\nfunction write_xlmeta_bin() {\n  var ba = buf_array();\n  write_record(ba, 332);\n  write_record(ba, 334, write_UInt32LE(1));\n  write_record(ba, 335, write_BrtMdtinfo({\n    name: \"XLDAPR\",\n    version: 12e4,\n    flags: 3496657072\n  }));\n  write_record(ba, 336);\n  write_record(ba, 339, write_BrtBeginEsfmd(1, \"XLDAPR\"));\n  write_record(ba, 52);\n  write_record(ba, 35, write_UInt32LE(514));\n  write_record(ba, 4096, write_UInt32LE(0));\n  write_record(ba, 4097, writeuint16(1));\n  write_record(ba, 36);\n  write_record(ba, 53);\n  write_record(ba, 340);\n  write_record(ba, 337, write_BrtBeginEsmdb(1, true));\n  write_record(ba, 51, write_BrtMdb([[1, 0]]));\n  write_record(ba, 338);\n  write_record(ba, 333);\n  return ba.end();\n}\nfunction parse_xlmeta_xml(data, name, opts) {\n  var out = { Types: [], Cell: [], Value: [] };\n  if (!data)\n    return out;\n  var pass = false;\n  var metatype = 2;\n  var lastmeta;\n  data.replace(tagregex, function(x) {\n    var y = parsexmltag(x);\n    switch (strip_ns(y[0])) {\n      case \"<?xml\":\n        break;\n      case \"<metadata\":\n      case \"</metadata>\":\n        break;\n      case \"<metadataTypes\":\n      case \"</metadataTypes>\":\n        break;\n      case \"<metadataType\":\n        out.Types.push({ name: y.name });\n        break;\n      case \"</metadataType>\":\n        break;\n      case \"<futureMetadata\":\n        for (var j = 0; j < out.Types.length; ++j)\n          if (out.Types[j].name == y.name)\n            lastmeta = out.Types[j];\n        break;\n      case \"</futureMetadata>\":\n        break;\n      case \"<bk>\":\n        break;\n      case \"</bk>\":\n        break;\n      case \"<rc\":\n        if (metatype == 1)\n          out.Cell.push({ type: out.Types[y.t - 1].name, index: +y.v });\n        else if (metatype == 0)\n          out.Value.push({ type: out.Types[y.t - 1].name, index: +y.v });\n        break;\n      case \"</rc>\":\n        break;\n      case \"<cellMetadata\":\n        metatype = 1;\n        break;\n      case \"</cellMetadata>\":\n        metatype = 2;\n        break;\n      case \"<valueMetadata\":\n        metatype = 0;\n        break;\n      case \"</valueMetadata>\":\n        metatype = 2;\n        break;\n      case \"<extLst\":\n      case \"<extLst>\":\n      case \"</extLst>\":\n      case \"<extLst/>\":\n        break;\n      case \"<ext\":\n        pass = true;\n        break;\n      case \"</ext>\":\n        pass = false;\n        break;\n      case \"<rvb\":\n        if (!lastmeta)\n          break;\n        if (!lastmeta.offsets)\n          lastmeta.offsets = [];\n        lastmeta.offsets.push(+y.i);\n        break;\n      default:\n        if (!pass && opts.WTF)\n          throw new Error(\"unrecognized \" + y[0] + \" in metadata\");\n    }\n    return x;\n  });\n  return out;\n}\nfunction write_xlmeta_xml() {\n  var o = [XML_HEADER];\n  o.push('<metadata xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:xlrd=\"http://schemas.microsoft.com/office/spreadsheetml/2017/richdata\" xmlns:xda=\"http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray\">\\n  <metadataTypes count=\"1\">\\n    <metadataType name=\"XLDAPR\" minSupportedVersion=\"120000\" copy=\"1\" pasteAll=\"1\" pasteValues=\"1\" merge=\"1\" splitFirst=\"1\" rowColShift=\"1\" clearFormats=\"1\" clearComments=\"1\" assign=\"1\" coerce=\"1\" cellMeta=\"1\"/>\\n  </metadataTypes>\\n  <futureMetadata name=\"XLDAPR\" count=\"1\">\\n    <bk>\\n      <extLst>\\n        <ext uri=\"{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}\">\\n          <xda:dynamicArrayProperties fDynamic=\"1\" fCollapsed=\"0\"/>\\n        </ext>\\n      </extLst>\\n    </bk>\\n  </futureMetadata>\\n  <cellMetadata count=\"1\">\\n    <bk>\\n      <rc t=\"1\" v=\"0\"/>\\n    </bk>\\n  </cellMetadata>\\n</metadata>');\n  return o.join(\"\");\n}\n/* 18.6 Calculation Chain */\nfunction parse_cc_xml(data/*::, name, opts*/)/*:Array<any>*/ {\n\tvar d = [];\n\tif(!data) return d;\n\tvar i = 1;\n\t(data.match(tagregex)||[]).forEach(function(x) {\n\t\tvar y = parsexmltag(x);\n\t\tswitch(y[0]) {\n\t\t\tcase '<?xml': break;\n\t\t\t/* 18.6.2  calcChain CT_CalcChain 1 */\n\t\t\tcase '<calcChain': case '<calcChain>': case '</calcChain>': break;\n\t\t\t/* 18.6.1  c CT_CalcCell 1 */\n\t\t\tcase '<c': delete y[0]; if(y.i) i = y.i; else y.i = i; d.push(y); break;\n\t\t}\n\t});\n\treturn d;\n}\n\n//function write_cc_xml(data, opts) { }\n\n/* [MS-XLSB] 2.6.4.1 */\nfunction parse_BrtCalcChainItem$(data) {\n\tvar out = {};\n\tout.i = data.read_shift(4);\n\tvar cell = {};\n\tcell.r = data.read_shift(4);\n\tcell.c = data.read_shift(4);\n\tout.r = encode_cell(cell);\n\tvar flags = data.read_shift(1);\n\tif(flags & 0x2) out.l = '1';\n\tif(flags & 0x8) out.a = '1';\n\treturn out;\n}\n\n/* 18.6 Calculation Chain */\nfunction parse_cc_bin(data, name, opts) {\n\tvar out = [];\n\tvar pass = false;\n\trecordhopper(data, function hopper_cc(val, R, RT) {\n\t\tswitch(RT) {\n\t\t\tcase 0x003F: /* 'BrtCalcChainItem$' */\n\t\t\t\tout.push(val); break;\n\n\t\t\tdefault:\n\t\t\t\tif(R.T){/* empty */}\n\t\t\t\telse if(!pass || opts.WTF) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t});\n\treturn out;\n}\n\n//function write_cc_bin(data, opts) { }\n/* 18.14 Supplementary Workbook Data */\nfunction parse_xlink_xml(/*::data, rel, name:string, _opts*/) {\n\t//var opts = _opts || {};\n\t//if(opts.WTF) throw \"XLSX External Link\";\n}\n\n/* [MS-XLSB] 2.1.7.25 External Link */\nfunction parse_xlink_bin(data, rel, name/*:string*/, _opts) {\n\tif(!data) return data;\n\tvar opts = _opts || {};\n\n\tvar pass = false, end = false;\n\n\trecordhopper(data, function xlink_parse(val, R, RT) {\n\t\tif(end) return;\n\t\tswitch(RT) {\n\t\t\tcase 0x0167: /* 'BrtSupTabs' */\n\t\t\tcase 0x016B: /* 'BrtExternTableStart' */\n\t\t\tcase 0x016C: /* 'BrtExternTableEnd' */\n\t\t\tcase 0x016E: /* 'BrtExternRowHdr' */\n\t\t\tcase 0x016F: /* 'BrtExternCellBlank' */\n\t\t\tcase 0x0170: /* 'BrtExternCellReal' */\n\t\t\tcase 0x0171: /* 'BrtExternCellBool' */\n\t\t\tcase 0x0172: /* 'BrtExternCellError' */\n\t\t\tcase 0x0173: /* 'BrtExternCellString' */\n\t\t\tcase 0x01D8: /* 'BrtExternValueMeta' */\n\t\t\tcase 0x0241: /* 'BrtSupNameStart' */\n\t\t\tcase 0x0242: /* 'BrtSupNameValueStart' */\n\t\t\tcase 0x0243: /* 'BrtSupNameValueEnd' */\n\t\t\tcase 0x0244: /* 'BrtSupNameNum' */\n\t\t\tcase 0x0245: /* 'BrtSupNameErr' */\n\t\t\tcase 0x0246: /* 'BrtSupNameSt' */\n\t\t\tcase 0x0247: /* 'BrtSupNameNil' */\n\t\t\tcase 0x0248: /* 'BrtSupNameBool' */\n\t\t\tcase 0x0249: /* 'BrtSupNameFmla' */\n\t\t\tcase 0x024A: /* 'BrtSupNameBits' */\n\t\t\tcase 0x024B: /* 'BrtSupNameEnd' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0023: /* 'BrtFRTBegin' */\n\t\t\t\tpass = true; break;\n\t\t\tcase 0x0024: /* 'BrtFRTEnd' */\n\t\t\t\tpass = false; break;\n\n\t\t\tdefault:\n\t\t\t\tif(R.T){/* empty */}\n\t\t\t\telse if(!pass || opts.WTF) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t}, opts);\n}\n/* 20.5 DrawingML - SpreadsheetML Drawing */\n/* 20.5.2.35 wsDr CT_Drawing */\nfunction parse_drawing(data, rels/*:any*/) {\n\tif(!data) return \"??\";\n\t/*\n\t  Chartsheet Drawing:\n\t   - 20.5.2.35 wsDr CT_Drawing\n\t    - 20.5.2.1  absoluteAnchor CT_AbsoluteAnchor\n\t     - 20.5.2.16 graphicFrame CT_GraphicalObjectFrame\n\t      - 20.1.2.2.16 graphic CT_GraphicalObject\n\t       - 20.1.2.2.17 graphicData CT_GraphicalObjectData\n          - chart reference\n\t   the actual type is based on the URI of the graphicData\n\t\tTODO: handle embedded charts and other types of graphics\n\t*/\n\tvar id = (data.match(/<c:chart [^>]*r:id=\"([^\"]*)\"/)||[\"\",\"\"])[1];\n\n\treturn rels['!id'][id].Target;\n}\n\n/* L.5.5.2 SpreadsheetML Comments + VML Schema */\nvar _shapeid = 1024;\nfunction write_comments_vml(rId/*:number*/, comments) {\n\tvar csize = [21600, 21600];\n\t/* L.5.2.1.2 Path Attribute */\n\tvar bbox = [\"m0,0l0\",csize[1],csize[0],csize[1],csize[0],\"0xe\"].join(\",\");\n\tvar o = [\n\t\twritextag(\"xml\", null, { 'xmlns:v': XLMLNS.v, 'xmlns:o': XLMLNS.o, 'xmlns:x': XLMLNS.x, 'xmlns:mv': XLMLNS.mv }).replace(/\\/>/,\">\"),\n\t\twritextag(\"o:shapelayout\", writextag(\"o:idmap\", null, {'v:ext':\"edit\", 'data':rId}), {'v:ext':\"edit\"}),\n\t\twritextag(\"v:shapetype\", [\n\t\t\twritextag(\"v:stroke\", null, {joinstyle:\"miter\"}),\n\t\t\twritextag(\"v:path\", null, {gradientshapeok:\"t\", 'o:connecttype':\"rect\"})\n\t\t].join(\"\"), {id:\"_x0000_t202\", 'o:spt':202, coordsize:csize.join(\",\"),path:bbox})\n\t];\n\twhile(_shapeid < rId * 1000) _shapeid += 1000;\n\n\tcomments.forEach(function(x) {\n\tvar c = decode_cell(x[0]);\n\tvar fillopts = /*::(*/{'color2':\"#BEFF82\", 'type':\"gradient\"}/*:: :any)*/;\n\tif(fillopts.type == \"gradient\") fillopts.angle = \"-180\";\n\tvar fillparm = fillopts.type == \"gradient\" ? writextag(\"o:fill\", null, {type:\"gradientUnscaled\", 'v:ext':\"view\"}) : null;\n\tvar fillxml = writextag('v:fill', fillparm, fillopts);\n\n\tvar shadata = ({on:\"t\", 'obscured':\"t\"}/*:any*/);\n\t++_shapeid;\n\n\to = o.concat([\n\t'<v:shape' + wxt_helper({\n\t\tid:'_x0000_s' + _shapeid,\n\t\ttype:\"#_x0000_t202\",\n\t\tstyle:\"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10\" + (x[1].hidden ? \";visibility:hidden\" : \"\") ,\n\t\tfillcolor:\"#ECFAD4\",\n\t\tstrokecolor:\"#edeaa1\"\n\t}) + '>',\n\t\tfillxml,\n\t\twritextag(\"v:shadow\", null, shadata),\n\t\twritextag(\"v:path\", null, {'o:connecttype':\"none\"}),\n\t\t'<v:textbox><div style=\"text-align:left\"></div></v:textbox>',\n\t\t'<x:ClientData ObjectType=\"Note\">',\n\t\t\t'<x:MoveWithCells/>',\n\t\t\t'<x:SizeWithCells/>',\n\t\t\t/* Part 4 19.4.2.3 Anchor (Anchor) */\n\t\t\twritetag('x:Anchor', [c.c+1, 0, c.r+1, 0, c.c+3, 20, c.r+5, 20].join(\",\")),\n\t\t\twritetag('x:AutoFill', \"False\"),\n\t\t\twritetag('x:Row', String(c.r)),\n\t\t\twritetag('x:Column', String(c.c)),\n\t\t\tx[1].hidden ? '' : '<x:Visible/>',\n\t\t'</x:ClientData>',\n\t'</v:shape>'\n\t]); });\n\to.push('</xml>');\n\treturn o.join(\"\");\n}\nfunction sheet_insert_comments(sheet, comments/*:Array<RawComment>*/, threaded/*:boolean*/, people/*:?Array<any>*/) {\n\tvar dense = Array.isArray(sheet);\n\tvar cell/*:Cell*/;\n\tcomments.forEach(function(comment) {\n\t\tvar r = decode_cell(comment.ref);\n\t\tif(dense) {\n\t\t\tif(!sheet[r.r]) sheet[r.r] = [];\n\t\t\tcell = sheet[r.r][r.c];\n\t\t} else cell = sheet[comment.ref];\n\t\tif (!cell) {\n\t\t\tcell = ({t:\"z\"}/*:any*/);\n\t\t\tif(dense) sheet[r.r][r.c] = cell;\n\t\t\telse sheet[comment.ref] = cell;\n\t\t\tvar range = safe_decode_range(sheet[\"!ref\"]||\"BDWGO1000001:A1\");\n\t\t\tif(range.s.r > r.r) range.s.r = r.r;\n\t\t\tif(range.e.r < r.r) range.e.r = r.r;\n\t\t\tif(range.s.c > r.c) range.s.c = r.c;\n\t\t\tif(range.e.c < r.c) range.e.c = r.c;\n\t\t\tvar encoded = encode_range(range);\n\t\t\tif (encoded !== sheet[\"!ref\"]) sheet[\"!ref\"] = encoded;\n\t\t}\n\n\t\tif (!cell.c) cell.c = [];\n\t\tvar o/*:Comment*/ = ({a: comment.author, t: comment.t, r: comment.r, T: threaded});\n\t\tif(comment.h) o.h = comment.h;\n\n\t\t/* threaded comments always override */\n\t\tfor(var i = cell.c.length - 1; i >= 0; --i) {\n\t\t\tif(!threaded && cell.c[i].T) return;\n\t\t\tif(threaded && !cell.c[i].T) cell.c.splice(i, 1);\n\t\t}\n\t\tif(threaded && people) for(i = 0; i < people.length; ++i) {\n\t\t\tif(o.a == people[i].id) { o.a = people[i].name || o.a; break; }\n\t\t}\n\t\tcell.c.push(o);\n\t});\n}\n\n/* 18.7 Comments */\nfunction parse_comments_xml(data/*:string*/, opts)/*:Array<RawComment>*/ {\n\t/* 18.7.6 CT_Comments */\n\tif(data.match(/<(?:\\w+:)?comments *\\/>/)) return [];\n\tvar authors/*:Array<string>*/ = [];\n\tvar commentList/*:Array<RawComment>*/ = [];\n\tvar authtag = data.match(/<(?:\\w+:)?authors>([\\s\\S]*)<\\/(?:\\w+:)?authors>/);\n\tif(authtag && authtag[1]) authtag[1].split(/<\\/\\w*:?author>/).forEach(function(x) {\n\t\tif(x === \"\" || x.trim() === \"\") return;\n\t\tvar a = x.match(/<(?:\\w+:)?author[^>]*>(.*)/);\n\t\tif(a) authors.push(a[1]);\n\t});\n\tvar cmnttag = data.match(/<(?:\\w+:)?commentList>([\\s\\S]*)<\\/(?:\\w+:)?commentList>/);\n\tif(cmnttag && cmnttag[1]) cmnttag[1].split(/<\\/\\w*:?comment>/).forEach(function(x) {\n\t\tif(x === \"\" || x.trim() === \"\") return;\n\t\tvar cm = x.match(/<(?:\\w+:)?comment[^>]*>/);\n\t\tif(!cm) return;\n\t\tvar y = parsexmltag(cm[0]);\n\t\tvar comment/*:RawComment*/ = ({ author: y.authorId && authors[y.authorId] || \"sheetjsghost\", ref: y.ref, guid: y.guid }/*:any*/);\n\t\tvar cell = decode_cell(y.ref);\n\t\tif(opts.sheetRows && opts.sheetRows <= cell.r) return;\n\t\tvar textMatch = x.match(/<(?:\\w+:)?text>([\\s\\S]*)<\\/(?:\\w+:)?text>/);\n\t\tvar rt = !!textMatch && !!textMatch[1] && parse_si(textMatch[1]) || {r:\"\",t:\"\",h:\"\"};\n\t\tcomment.r = rt.r;\n\t\tif(rt.r == \"<t></t>\") rt.t = rt.h = \"\";\n\t\tcomment.t = (rt.t||\"\").replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\");\n\t\tif(opts.cellHTML) comment.h = rt.h;\n\t\tcommentList.push(comment);\n\t});\n\treturn commentList;\n}\n\nfunction write_comments_xml(data/*::, opts*/) {\n\tvar o = [XML_HEADER, writextag('comments', null, { 'xmlns': XMLNS_main[0] })];\n\n\tvar iauthor/*:Array<string>*/ = [];\n\to.push(\"<authors>\");\n\tdata.forEach(function(x) { x[1].forEach(function(w) { var a = escapexml(w.a);\n\t\tif(iauthor.indexOf(a) == -1) {\n\t\t\tiauthor.push(a);\n\t\t\to.push(\"<author>\" + a + \"</author>\");\n\t\t}\n\t\tif(w.T && w.ID && iauthor.indexOf(\"tc=\" + w.ID) == -1) {\n\t\t\tiauthor.push(\"tc=\" + w.ID);\n\t\t\to.push(\"<author>\" + \"tc=\" + w.ID + \"</author>\");\n\t\t}\n\t}); });\n\tif(iauthor.length == 0) { iauthor.push(\"SheetJ5\"); o.push(\"<author>SheetJ5</author>\"); }\n\to.push(\"</authors>\");\n\to.push(\"<commentList>\");\n\tdata.forEach(function(d) {\n\t\t/* 18.7.3 CT_Comment */\n\t\tvar lastauthor = 0, ts = [];\n\t\tif(d[1][0] && d[1][0].T && d[1][0].ID) lastauthor = iauthor.indexOf(\"tc=\" + d[1][0].ID);\n\t\telse d[1].forEach(function(c) {\n\t\t\tif(c.a) lastauthor = iauthor.indexOf(escapexml(c.a));\n\t\t\tts.push(c.t||\"\");\n\t\t});\n\t\to.push('<comment ref=\"' + d[0] + '\" authorId=\"' + lastauthor + '\"><text>');\n\t\tif(ts.length <= 1) o.push(writetag(\"t\", escapexml(ts[0]||\"\")));\n\t\telse {\n\t\t\t/* based on Threaded Comments -> Comments projection */\n\t\t\tvar t = \"Comment:\\n    \" + (ts[0]) + \"\\n\";\n\t\t\tfor(var i = 1; i < ts.length; ++i) t += \"Reply:\\n    \" + ts[i] + \"\\n\";\n\t\t\to.push(writetag(\"t\", escapexml(t)));\n\t\t}\n\t\to.push('</text></comment>');\n\t});\n\to.push(\"</commentList>\");\n\tif(o.length>2) { o[o.length] = ('</comments>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n\n/* [MS-XLSX] 2.1.17 */\nfunction parse_tcmnt_xml(data/*:string*/, opts)/*:Array<RawComment>*/ {\n\tvar out = [];\n\tvar pass = false, comment = {}, tidx = 0;\n\tdata.replace(tagregex, function xml_tcmnt(x, idx) {\n\t\tvar y/*:any*/ = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<?xml': break;\n\n\t\t\t/* 2.6.207 ThreadedComments CT_ThreadedComments */\n\t\t\tcase '<ThreadedComments': break;\n\t\t\tcase '</ThreadedComments>': break;\n\n\t\t\t/* 2.6.205 threadedComment CT_ThreadedComment */\n\t\t\tcase '<threadedComment': comment = {author: y.personId, guid: y.id, ref: y.ref, T: 1}; break;\n\t\t\tcase '</threadedComment>': if(comment.t != null) out.push(comment); break;\n\n\t\t\tcase '<text>': case '<text': tidx = idx + x.length; break;\n\t\t\tcase '</text>': comment.t = data.slice(tidx, idx).replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\"); break;\n\n\t\t\t/* 2.6.206 mentions CT_ThreadedCommentMentions TODO */\n\t\t\tcase '<mentions': case '<mentions>': pass = true; break;\n\t\t\tcase '</mentions>': pass = false; break;\n\n\t\t\t/* 2.6.202 mention CT_Mention TODO */\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': case '<extLst/>': break;\n\t\t\t/* 18.2.7  ext CT_Extension + */\n\t\t\tcase '<ext': pass=true; break;\n\t\t\tcase '</ext>': pass=false; break;\n\n\t\t\tdefault: if(!pass && opts.WTF) throw new Error('unrecognized ' + y[0] + ' in threaded comments');\n\t\t}\n\t\treturn x;\n\t});\n\treturn out;\n}\n\nfunction write_tcmnt_xml(comments, people, opts) {\n\tvar o = [XML_HEADER, writextag('ThreadedComments', null, { 'xmlns': XMLNS.TCMNT }).replace(/[\\/]>/, \">\")];\n\tcomments.forEach(function(carr) {\n\t\tvar rootid = \"\";\n\t\t(carr[1] || []).forEach(function(c, idx) {\n\t\t\tif(!c.T) { delete c.ID; return; }\n\t\t\tif(c.a && people.indexOf(c.a) == -1) people.push(c.a);\n\t\t\tvar tcopts = {\n\t\t\t\tref: carr[0],\n\t\t\t\tid: \"{54EE7951-7262-4200-6969-\" + (\"000000000000\" + opts.tcid++).slice(-12) + \"}\"\n\t\t\t};\n\t\t\tif(idx == 0) rootid = tcopts.id;\n\t\t\telse tcopts.parentId = rootid;\n\t\t\tc.ID = tcopts.id;\n\t\t\tif(c.a) tcopts.personId = \"{54EE7950-7262-4200-6969-\" + (\"000000000000\" + people.indexOf(c.a)).slice(-12) + \"}\";\n\t\t\to.push(writextag('threadedComment', writetag('text', c.t||\"\"), tcopts));\n\t\t});\n\t});\n\to.push('</ThreadedComments>');\n\treturn o.join(\"\");\n}\n\n/* [MS-XLSX] 2.1.18 */\nfunction parse_people_xml(data/*:string*/, opts) {\n\tvar out = [];\n\tvar pass = false;\n\tdata.replace(tagregex, function xml_tcmnt(x) {\n\t\tvar y/*:any*/ = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<?xml': break;\n\n\t\t\t/* 2.4.85 personList CT_PersonList */\n\t\t\tcase '<personList': break;\n\t\t\tcase '</personList>': break;\n\n\t\t\t/* 2.6.203 person CT_Person TODO: providers */\n\t\t\tcase '<person': out.push({name: y.displayname, id: y.id }); break;\n\t\t\tcase '</person>': break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': case '<extLst/>': break;\n\t\t\t/* 18.2.7  ext CT_Extension + */\n\t\t\tcase '<ext': pass=true; break;\n\t\t\tcase '</ext>': pass=false; break;\n\n\t\t\tdefault: if(!pass && opts.WTF) throw new Error('unrecognized ' + y[0] + ' in threaded comments');\n\t\t}\n\t\treturn x;\n\t});\n\treturn out;\n}\nfunction write_people_xml(people/*, opts*/) {\n\tvar o = [XML_HEADER, writextag('personList', null, {\n\t\t'xmlns': XMLNS.TCMNT,\n\t\t'xmlns:x': XMLNS_main[0]\n\t}).replace(/[\\/]>/, \">\")];\n\tpeople.forEach(function(person, idx) {\n\t\to.push(writextag('person', null, {\n\t\t\tdisplayName: person,\n\t\t\tid: \"{54EE7950-7262-4200-6969-\" + (\"000000000000\" + idx).slice(-12) + \"}\",\n\t\t\tuserId: person,\n\t\t\tproviderId: \"None\"\n\t\t}));\n\t});\n\to.push(\"</personList>\");\n\treturn o.join(\"\");\n}\n/* [MS-XLSB] 2.4.28 BrtBeginComment */\nfunction parse_BrtBeginComment(data) {\n\tvar out = {};\n\tout.iauthor = data.read_shift(4);\n\tvar rfx = parse_UncheckedRfX(data, 16);\n\tout.rfx = rfx.s;\n\tout.ref = encode_cell(rfx.s);\n\tdata.l += 16; /*var guid = parse_GUID(data); */\n\treturn out;\n}\nfunction write_BrtBeginComment(data, o) {\n\tif(o == null) o = new_buf(36);\n\to.write_shift(4, data[1].iauthor);\n\twrite_UncheckedRfX((data[0]/*:any*/), o);\n\to.write_shift(4, 0);\n\to.write_shift(4, 0);\n\to.write_shift(4, 0);\n\to.write_shift(4, 0);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.327 BrtCommentAuthor */\nvar parse_BrtCommentAuthor = parse_XLWideString;\nfunction write_BrtCommentAuthor(data) { return write_XLWideString(data.slice(0, 54)); }\n\n/* [MS-XLSB] 2.1.7.8 Comments */\nfunction parse_comments_bin(data, opts)/*:Array<RawComment>*/ {\n\tvar out/*:Array<RawComment>*/ = [];\n\tvar authors/*:Array<string>*/ = [];\n\tvar c = {};\n\tvar pass = false;\n\trecordhopper(data, function hopper_cmnt(val, R, RT) {\n\t\tswitch(RT) {\n\t\t\tcase 0x0278: /* 'BrtCommentAuthor' */\n\t\t\t\tauthors.push(val); break;\n\t\t\tcase 0x027B: /* 'BrtBeginComment' */\n\t\t\t\tc = val; break;\n\t\t\tcase 0x027D: /* 'BrtCommentText' */\n\t\t\t\tc.t = val.t; c.h = val.h; c.r = val.r; break;\n\t\t\tcase 0x027C: /* 'BrtEndComment' */\n\t\t\t\tc.author = authors[c.iauthor];\n\t\t\t\tdelete (c/*:any*/).iauthor;\n\t\t\t\tif(opts.sheetRows && c.rfx && opts.sheetRows <= c.rfx.r) break;\n\t\t\t\tif(!c.t) c.t = \"\";\n\t\t\t\tdelete c.rfx; out.push(c); break;\n\n\t\t\tcase 0x0C00: /* 'BrtUid' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0023: /* 'BrtFRTBegin' */\n\t\t\t\tpass = true; break;\n\t\t\tcase 0x0024: /* 'BrtFRTEnd' */\n\t\t\t\tpass = false; break;\n\t\t\tcase 0x0025: /* 'BrtACBegin' */ break;\n\t\t\tcase 0x0026: /* 'BrtACEnd' */ break;\n\n\n\t\t\tdefault:\n\t\t\t\tif(R.T){/* empty */}\n\t\t\t\telse if(!pass || opts.WTF) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t});\n\treturn out;\n}\n\nfunction write_comments_bin(data/*::, opts*/) {\n\tvar ba = buf_array();\n\tvar iauthor/*:Array<string>*/ = [];\n\twrite_record(ba, 0x0274 /* BrtBeginComments */);\n\n\twrite_record(ba, 0x0276 /* BrtBeginCommentAuthors */);\n\tdata.forEach(function(comment) {\n\t\tcomment[1].forEach(function(c) {\n\t\t\tif(iauthor.indexOf(c.a) > -1) return;\n\t\t\tiauthor.push(c.a.slice(0,54));\n\t\t\twrite_record(ba, 0x0278 /* BrtCommentAuthor */, write_BrtCommentAuthor(c.a));\n\t\t});\n\t});\n\twrite_record(ba, 0x0277 /* BrtEndCommentAuthors */);\n\n\twrite_record(ba, 0x0279 /* BrtBeginCommentList */);\n\tdata.forEach(function(comment) {\n\t\tcomment[1].forEach(function(c) {\n\t\t\tc.iauthor = iauthor.indexOf(c.a);\n\t\t\tvar range = {s:decode_cell(comment[0]),e:decode_cell(comment[0])};\n\t\t\twrite_record(ba, 0x027B /* BrtBeginComment */, write_BrtBeginComment([range, c]));\n\t\t\tif(c.t && c.t.length > 0) write_record(ba, 0x027D /* BrtCommentText */, write_BrtCommentText(c));\n\t\t\twrite_record(ba, 0x027C /* BrtEndComment */);\n\t\t\tdelete c.iauthor;\n\t\t});\n\t});\n\twrite_record(ba, 0x027A /* BrtEndCommentList */);\n\n\twrite_record(ba, 0x0275 /* BrtEndComments */);\n\treturn ba.end();\n}\nvar CT_VBA = \"application/vnd.ms-office.vbaProject\";\nfunction make_vba_xls(cfb) {\n  var newcfb = CFB.utils.cfb_new({ root: \"R\" });\n  cfb.FullPaths.forEach(function(p, i) {\n    if (p.slice(-1) === \"/\" || !p.match(/_VBA_PROJECT_CUR/))\n      return;\n    var newpath = p.replace(/^[^\\/]*/, \"R\").replace(/\\/_VBA_PROJECT_CUR\\u0000*/, \"\");\n    CFB.utils.cfb_add(newcfb, newpath, cfb.FileIndex[i].content);\n  });\n  return CFB.write(newcfb);\n}\nfunction fill_vba_xls(cfb, vba) {\n  vba.FullPaths.forEach(function(p, i) {\n    if (i == 0)\n      return;\n    var newpath = p.replace(/[^\\/]*[\\/]/, \"/_VBA_PROJECT_CUR/\");\n    if (newpath.slice(-1) !== \"/\")\n      CFB.utils.cfb_add(cfb, newpath, vba.FileIndex[i].content);\n  });\n}\nvar VBAFMTS = [\"xlsb\", \"xlsm\", \"xlam\", \"biff8\", \"xla\"];\n/* macro and dialog sheet stubs */\nfunction parse_ds_bin(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'dialog'}; }\nfunction parse_ds_xml(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'dialog'}; }\nfunction parse_ms_bin(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'macro'}; }\nfunction parse_ms_xml(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'macro'}; }\n/* TODO: it will be useful to parse the function str */\nvar rc_to_a1 = /*#__PURE__*/(function(){\n\tvar rcregex = /(^|[^A-Za-z_])R(\\[?-?\\d+\\]|[1-9]\\d*|)C(\\[?-?\\d+\\]|[1-9]\\d*|)(?![A-Za-z0-9_])/g;\n\tvar rcbase/*:Cell*/ = ({r:0,c:0}/*:any*/);\n\tfunction rcfunc($$,$1,$2,$3) {\n\t\tvar cRel = false, rRel = false;\n\n\t\tif($2.length == 0) rRel = true;\n\t\telse if($2.charAt(0) == \"[\") { rRel = true; $2 = $2.slice(1, -1); }\n\n\t\tif($3.length == 0) cRel = true;\n\t\telse if($3.charAt(0) == \"[\") { cRel = true; $3 = $3.slice(1, -1); }\n\n\t\tvar R = $2.length>0?parseInt($2,10)|0:0, C = $3.length>0?parseInt($3,10)|0:0;\n\n\t\tif(cRel) C += rcbase.c; else --C;\n\t\tif(rRel) R += rcbase.r; else --R;\n\t\treturn $1 + (cRel ? \"\" : \"$\") + encode_col(C) + (rRel ? \"\" : \"$\") + encode_row(R);\n\t}\n\treturn function rc_to_a1(fstr/*:string*/, base/*:Cell*/)/*:string*/ {\n\t\trcbase = base;\n\t\treturn fstr.replace(rcregex, rcfunc);\n\t};\n})();\n\nvar crefregex = /(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\\d{4}|104[0-7]\\d{3}|1048[0-4]\\d{2}|10485[0-6]\\d|104857[0-6]|[1-9]\\d{0,5})(?![_.\\(A-Za-z0-9])/g;\nvar a1_to_rc = /*#__PURE__*/(function(){\n\treturn function a1_to_rc(fstr/*:string*/, base/*:CellAddress*/) {\n\t\treturn fstr.replace(crefregex, function($0, $1, $2, $3, $4, $5) {\n\t\t\tvar c = decode_col($3) - ($2 ? 0 : base.c);\n\t\t\tvar r = decode_row($5) - ($4 ? 0 : base.r);\n\t\t\tvar R = (r == 0 ? \"\" : !$4 ? \"[\" + r + \"]\" : (r+1));\n\t\t\tvar C = (c == 0 ? \"\" : !$2 ? \"[\" + c + \"]\" : (c+1));\n\t\t\treturn $1 + \"R\" + R + \"C\" + C;\n\t\t});\n\t};\n})();\n\n/* no defined name can collide with a valid cell address A1:XFD1048576 ... except LOG10! */\nfunction shift_formula_str(f/*:string*/, delta/*:Cell*/)/*:string*/ {\n\treturn f.replace(crefregex, function($0, $1, $2, $3, $4, $5) {\n\t\treturn $1+($2==\"$\" ? $2+$3 : encode_col(decode_col($3)+delta.c))+($4==\"$\" ? $4+$5 : encode_row(decode_row($5) + delta.r));\n\t});\n}\n\nfunction shift_formula_xlsx(f/*:string*/, range/*:string*/, cell/*:string*/)/*:string*/ {\n\tvar r = decode_range(range), s = r.s, c = decode_cell(cell);\n\tvar delta = {r:c.r - s.r, c:c.c - s.c};\n\treturn shift_formula_str(f, delta);\n}\n\n/* TODO: parse formula */\nfunction fuzzyfmla(f/*:string*/)/*:boolean*/ {\n\tif(f.length == 1) return false;\n\treturn true;\n}\n\nfunction _xlfn(f/*:string*/)/*:string*/ {\n\treturn f.replace(/_xlfn\\./g,\"\");\n}\nfunction parseread1(blob) { blob.l+=1; return; }\n\n/* [MS-XLS] 2.5.51 */\nfunction parse_ColRelU(blob, length) {\n\tvar c = blob.read_shift(length == 1 ? 1 : 2);\n\treturn [c & 0x3FFF, (c >> 14) & 1, (c >> 15) & 1];\n}\n\n/* [MS-XLS] 2.5.198.105 ; [MS-XLSB] 2.5.97.89 */\nfunction parse_RgceArea(blob, length, opts) {\n\tvar w = 2;\n\tif(opts) {\n\t\tif(opts.biff >= 2 && opts.biff <= 5) return parse_RgceArea_BIFF2(blob, length, opts);\n\t\telse if(opts.biff == 12) w = 4;\n\t}\n\tvar r=blob.read_shift(w), R=blob.read_shift(w);\n\tvar c=parse_ColRelU(blob, 2);\n\tvar C=parse_ColRelU(blob, 2);\n\treturn { s:{r:r, c:c[0], cRel:c[1], rRel:c[2]}, e:{r:R, c:C[0], cRel:C[1], rRel:C[2]} };\n}\n/* BIFF 2-5 encodes flags in the row field */\nfunction parse_RgceArea_BIFF2(blob/*::, length, opts*/) {\n\tvar r=parse_ColRelU(blob, 2), R=parse_ColRelU(blob, 2);\n\tvar c=blob.read_shift(1);\n\tvar C=blob.read_shift(1);\n\treturn { s:{r:r[0], c:c, cRel:r[1], rRel:r[2]}, e:{r:R[0], c:C, cRel:R[1], rRel:R[2]} };\n}\n\n/* [MS-XLS] 2.5.198.105 ; [MS-XLSB] 2.5.97.90 */\nfunction parse_RgceAreaRel(blob, length, opts) {\n\tif(opts.biff < 8) return parse_RgceArea_BIFF2(blob, length, opts);\n\tvar r=blob.read_shift(opts.biff == 12 ? 4 : 2), R=blob.read_shift(opts.biff == 12 ? 4 : 2);\n\tvar c=parse_ColRelU(blob, 2);\n\tvar C=parse_ColRelU(blob, 2);\n\treturn { s:{r:r, c:c[0], cRel:c[1], rRel:c[2]}, e:{r:R, c:C[0], cRel:C[1], rRel:C[2]} };\n}\n\n/* [MS-XLS] 2.5.198.109 ; [MS-XLSB] 2.5.97.91 */\nfunction parse_RgceLoc(blob, length, opts) {\n\tif(opts && opts.biff >= 2 && opts.biff <= 5) return parse_RgceLoc_BIFF2(blob, length, opts);\n\tvar r = blob.read_shift(opts && opts.biff == 12 ? 4 : 2);\n\tvar c = parse_ColRelU(blob, 2);\n\treturn {r:r, c:c[0], cRel:c[1], rRel:c[2]};\n}\nfunction parse_RgceLoc_BIFF2(blob/*::, length, opts*/) {\n\tvar r = parse_ColRelU(blob, 2);\n\tvar c = blob.read_shift(1);\n\treturn {r:r[0], c:c, cRel:r[1], rRel:r[2]};\n}\n\n/* [MS-XLS] 2.5.198.107, 2.5.47 */\nfunction parse_RgceElfLoc(blob/*::, length, opts*/) {\n\tvar r = blob.read_shift(2);\n\tvar c = blob.read_shift(2);\n\treturn {r:r, c:c & 0xFF, fQuoted:!!(c & 0x4000), cRel:c>>15, rRel:c>>15 };\n}\n\n/* [MS-XLS] 2.5.198.111 ; [MS-XLSB] 2.5.97.92 TODO */\nfunction parse_RgceLocRel(blob, length, opts) {\n\tvar biff = opts && opts.biff ? opts.biff : 8;\n\tif(biff >= 2 && biff <= 5) return parse_RgceLocRel_BIFF2(blob, length, opts);\n\tvar r = blob.read_shift(biff >= 12 ? 4 : 2);\n\tvar cl = blob.read_shift(2);\n\tvar cRel = (cl & 0x4000) >> 14, rRel = (cl & 0x8000) >> 15;\n\tcl &= 0x3FFF;\n\tif(rRel == 1) while(r > 0x7FFFF) r -= 0x100000;\n\tif(cRel == 1) while(cl > 0x1FFF) cl = cl - 0x4000;\n\treturn {r:r,c:cl,cRel:cRel,rRel:rRel};\n}\nfunction parse_RgceLocRel_BIFF2(blob/*::, length:number, opts*/) {\n\tvar rl = blob.read_shift(2);\n\tvar c = blob.read_shift(1);\n\tvar rRel = (rl & 0x8000) >> 15, cRel = (rl & 0x4000) >> 14;\n\trl &= 0x3FFF;\n\tif(rRel == 1 && rl >= 0x2000) rl = rl - 0x4000;\n\tif(cRel == 1 && c >= 0x80) c = c - 0x100;\n\treturn {r:rl,c:c,cRel:cRel,rRel:rRel};\n}\n\n/* [MS-XLS] 2.5.198.27 ; [MS-XLSB] 2.5.97.18 */\nfunction parse_PtgArea(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tvar area = parse_RgceArea(blob, opts.biff >= 2 && opts.biff <= 5 ? 6 : 8, opts);\n\treturn [type, area];\n}\n\n/* [MS-XLS] 2.5.198.28 ; [MS-XLSB] 2.5.97.19 */\nfunction parse_PtgArea3d(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tvar ixti = blob.read_shift(2, 'i');\n\tvar w = 8;\n\tif(opts) switch(opts.biff) {\n\t\tcase 5: blob.l += 12; w = 6; break;\n\t\tcase 12: w = 12; break;\n\t}\n\tvar area = parse_RgceArea(blob, w, opts);\n\treturn [type, ixti, area];\n}\n\n/* [MS-XLS] 2.5.198.29 ; [MS-XLSB] 2.5.97.20 */\nfunction parse_PtgAreaErr(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tblob.l += opts && (opts.biff > 8) ? 12 : (opts.biff < 8 ? 6 : 8);\n\treturn [type];\n}\n/* [MS-XLS] 2.5.198.30 ; [MS-XLSB] 2.5.97.21 */\nfunction parse_PtgAreaErr3d(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tvar ixti = blob.read_shift(2);\n\tvar w = 8;\n\tif(opts) switch(opts.biff) {\n\t\tcase 5: blob.l += 12; w = 6; break;\n\t\tcase 12: w = 12; break;\n\t}\n\tblob.l += w;\n\treturn [type, ixti];\n}\n\n/* [MS-XLS] 2.5.198.31 ; [MS-XLSB] 2.5.97.22 */\nfunction parse_PtgAreaN(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tvar area = parse_RgceAreaRel(blob, length - 1, opts);\n\treturn [type, area];\n}\n\n/* [MS-XLS] 2.5.198.32 ; [MS-XLSB] 2.5.97.23 */\nfunction parse_PtgArray(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tblob.l += opts.biff == 2 ? 6 : opts.biff == 12 ? 14 : 7;\n\treturn [type];\n}\n\n/* [MS-XLS] 2.5.198.33 ; [MS-XLSB] 2.5.97.24 */\nfunction parse_PtgAttrBaxcel(blob) {\n\tvar bitSemi = blob[blob.l+1] & 0x01; /* 1 = volatile */\n\tvar bitBaxcel = 1;\n\tblob.l += 4;\n\treturn [bitSemi, bitBaxcel];\n}\n\n/* [MS-XLS] 2.5.198.34 ; [MS-XLSB] 2.5.97.25 */\nfunction parse_PtgAttrChoose(blob, length, opts)/*:Array<number>*/ {\n\tblob.l +=2;\n\tvar offset = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);\n\tvar o/*:Array<number>*/ = [];\n\t/* offset is 1 less than the number of elements */\n\tfor(var i = 0; i <= offset; ++i) o.push(blob.read_shift(opts && opts.biff == 2 ? 1 : 2));\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.198.35 ; [MS-XLSB] 2.5.97.26 */\nfunction parse_PtgAttrGoto(blob, length, opts) {\n\tvar bitGoto = (blob[blob.l+1] & 0xFF) ? 1 : 0;\n\tblob.l += 2;\n\treturn [bitGoto, blob.read_shift(opts && opts.biff == 2 ? 1 : 2)];\n}\n\n/* [MS-XLS] 2.5.198.36 ; [MS-XLSB] 2.5.97.27 */\nfunction parse_PtgAttrIf(blob, length, opts) {\n\tvar bitIf = (blob[blob.l+1] & 0xFF) ? 1 : 0;\n\tblob.l += 2;\n\treturn [bitIf, blob.read_shift(opts && opts.biff == 2 ? 1 : 2)];\n}\n\n/* [MS-XLSB] 2.5.97.28 */\nfunction parse_PtgAttrIfError(blob) {\n\tvar bitIf = (blob[blob.l+1] & 0xFF) ? 1 : 0;\n\tblob.l += 2;\n\treturn [bitIf, blob.read_shift(2)];\n}\n\n/* [MS-XLS] 2.5.198.37 ; [MS-XLSB] 2.5.97.29 */\nfunction parse_PtgAttrSemi(blob, length, opts) {\n\tvar bitSemi = (blob[blob.l+1] & 0xFF) ? 1 : 0;\n\tblob.l += opts && opts.biff == 2 ? 3 : 4;\n\treturn [bitSemi];\n}\n\n/* [MS-XLS] 2.5.198.40 ; [MS-XLSB] 2.5.97.32 */\nfunction parse_PtgAttrSpaceType(blob/*::, length*/) {\n\tvar type = blob.read_shift(1), cch = blob.read_shift(1);\n\treturn [type, cch];\n}\n\n/* [MS-XLS] 2.5.198.38 ; [MS-XLSB] 2.5.97.30 */\nfunction parse_PtgAttrSpace(blob) {\n\tblob.read_shift(2);\n\treturn parse_PtgAttrSpaceType(blob, 2);\n}\n\n/* [MS-XLS] 2.5.198.39 ; [MS-XLSB] 2.5.97.31 */\nfunction parse_PtgAttrSpaceSemi(blob) {\n\tblob.read_shift(2);\n\treturn parse_PtgAttrSpaceType(blob, 2);\n}\n\n/* [MS-XLS] 2.5.198.84 ; [MS-XLSB] 2.5.97.68 TODO */\nfunction parse_PtgRef(blob, length, opts) {\n\t//var ptg = blob[blob.l] & 0x1F;\n\tvar type = (blob[blob.l] & 0x60)>>5;\n\tblob.l += 1;\n\tvar loc = parse_RgceLoc(blob, 0, opts);\n\treturn [type, loc];\n}\n\n/* [MS-XLS] 2.5.198.88 ; [MS-XLSB] 2.5.97.72 TODO */\nfunction parse_PtgRefN(blob, length, opts) {\n\tvar type = (blob[blob.l] & 0x60)>>5;\n\tblob.l += 1;\n\tvar loc = parse_RgceLocRel(blob, 0, opts);\n\treturn [type, loc];\n}\n\n/* [MS-XLS] 2.5.198.85 ; [MS-XLSB] 2.5.97.69 TODO */\nfunction parse_PtgRef3d(blob, length, opts) {\n\tvar type = (blob[blob.l] & 0x60)>>5;\n\tblob.l += 1;\n\tvar ixti = blob.read_shift(2); // XtiIndex\n\tif(opts && opts.biff == 5) blob.l += 12;\n\tvar loc = parse_RgceLoc(blob, 0, opts); // TODO: or RgceLocRel\n\treturn [type, ixti, loc];\n}\n\n\n/* [MS-XLS] 2.5.198.62 ; [MS-XLSB] 2.5.97.45 TODO */\nfunction parse_PtgFunc(blob, length, opts) {\n\t//var ptg = blob[blob.l] & 0x1F;\n\tvar type = (blob[blob.l] & 0x60)>>5;\n\tblob.l += 1;\n\tvar iftab = blob.read_shift(opts && opts.biff <= 3 ? 1 : 2);\n\treturn [FtabArgc[iftab], Ftab[iftab], type];\n}\n/* [MS-XLS] 2.5.198.63 ; [MS-XLSB] 2.5.97.46 TODO */\nfunction parse_PtgFuncVar(blob, length, opts) {\n\tvar type = blob[blob.l++];\n\tvar cparams = blob.read_shift(1), tab = opts && opts.biff <= 3 ? [(type == 0x58 ? -1 : 0), blob.read_shift(1)]: parsetab(blob);\n\treturn [cparams, (tab[0] === 0 ? Ftab : Cetab)[tab[1]]];\n}\n\nfunction parsetab(blob) {\n\treturn [blob[blob.l+1]>>7, blob.read_shift(2) & 0x7FFF];\n}\n\n/* [MS-XLS] 2.5.198.41 ; [MS-XLSB] 2.5.97.33 */\nfunction parse_PtgAttrSum(blob, length, opts) {\n\tblob.l += opts && opts.biff == 2 ? 3 : 4; return;\n}\n\n/* [MS-XLS] 2.5.198.58 ; [MS-XLSB] 2.5.97.40 */\nfunction parse_PtgExp(blob, length, opts) {\n\tblob.l++;\n\tif(opts && opts.biff == 12) return [blob.read_shift(4, 'i'), 0];\n\tvar row = blob.read_shift(2);\n\tvar col = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);\n\treturn [row, col];\n}\n\n/* [MS-XLS] 2.5.198.57 ; [MS-XLSB] 2.5.97.39 */\nfunction parse_PtgErr(blob) { blob.l++; return BErr[blob.read_shift(1)]; }\n\n/* [MS-XLS] 2.5.198.66 ; [MS-XLSB] 2.5.97.49 */\nfunction parse_PtgInt(blob) { blob.l++; return blob.read_shift(2); }\n\n/* [MS-XLS] 2.5.198.42 ; [MS-XLSB] 2.5.97.34 */\nfunction parse_PtgBool(blob) { blob.l++; return blob.read_shift(1)!==0;}\n\n/* [MS-XLS] 2.5.198.79 ; [MS-XLSB] 2.5.97.63 */\nfunction parse_PtgNum(blob) { blob.l++; return parse_Xnum(blob, 8); }\n\n/* [MS-XLS] 2.5.198.89 ; [MS-XLSB] 2.5.97.74 */\nfunction parse_PtgStr(blob, length, opts) { blob.l++; return parse_ShortXLUnicodeString(blob, length-1, opts); }\n\n/* [MS-XLS] 2.5.192.112 + 2.5.192.11{3,4,5,6,7} */\n/* [MS-XLSB] 2.5.97.93 + 2.5.97.9{4,5,6,7} */\nfunction parse_SerAr(blob, biff/*:number*/) {\n\tvar val = [blob.read_shift(1)];\n\tif(biff == 12) switch(val[0]) {\n\t\tcase 0x02: val[0] = 0x04; break; /* SerBool */\n\t\tcase 0x04: val[0] = 0x10; break; /* SerErr */\n\t\tcase 0x00: val[0] = 0x01; break; /* SerNum */\n\t\tcase 0x01: val[0] = 0x02; break; /* SerStr */\n\t}\n\tswitch(val[0]) {\n\t\tcase 0x04: /* SerBool -- boolean */\n\t\t\tval[1] = parsebool(blob, 1) ? 'TRUE' : 'FALSE';\n\t\t\tif(biff != 12) blob.l += 7; break;\n\t\tcase 0x25: /* appears to be an alias */\n\t\tcase 0x10: /* SerErr -- error */\n\t\t\tval[1] = BErr[blob[blob.l]];\n\t\t\tblob.l += ((biff == 12) ? 4 : 8); break;\n\t\tcase 0x00: /* SerNil -- honestly, I'm not sure how to reproduce this */\n\t\t\tblob.l += 8; break;\n\t\tcase 0x01: /* SerNum -- Xnum */\n\t\t\tval[1] = parse_Xnum(blob, 8); break;\n\t\tcase 0x02: /* SerStr -- XLUnicodeString (<256 chars) */\n\t\t\tval[1] = parse_XLUnicodeString2(blob, 0, {biff:biff > 0 && biff < 8 ? 2 : biff}); break;\n\t\tdefault: throw new Error(\"Bad SerAr: \" + val[0]); /* Unreachable */\n\t}\n\treturn val;\n}\n\n/* [MS-XLS] 2.5.198.61 ; [MS-XLSB] 2.5.97.44 */\nfunction parse_PtgExtraMem(blob, cce, opts) {\n\tvar count = blob.read_shift((opts.biff == 12) ? 4 : 2);\n\tvar out/*:Array<Range>*/ = [];\n\tfor(var i = 0; i != count; ++i) out.push(((opts.biff == 12) ? parse_UncheckedRfX : parse_Ref8U)(blob, 8));\n\treturn out;\n}\n\n/* [MS-XLS] 2.5.198.59 ; [MS-XLSB] 2.5.97.41 */\nfunction parse_PtgExtraArray(blob, length, opts) {\n\tvar rows = 0, cols = 0;\n\tif(opts.biff == 12) {\n\t\trows = blob.read_shift(4); // DRw\n\t\tcols = blob.read_shift(4); // DCol\n\t} else {\n\t\tcols = 1 + blob.read_shift(1); //DColByteU\n\t\trows = 1 + blob.read_shift(2); //DRw\n\t}\n\tif(opts.biff >= 2 && opts.biff < 8) { --rows; if(--cols == 0) cols = 0x100; }\n\t// $FlowIgnore\n\tfor(var i = 0, o/*:Array<Array<any>>*/ = []; i != rows && (o[i] = []); ++i)\n\t\tfor(var j = 0; j != cols; ++j) o[i][j] = parse_SerAr(blob, opts.biff);\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.198.76 ; [MS-XLSB] 2.5.97.60 */\nfunction parse_PtgName(blob, length, opts) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tvar w = (!opts || (opts.biff >= 8)) ? 4 : 2;\n\tvar nameindex = blob.read_shift(w);\n\tswitch(opts.biff) {\n\t\tcase 2: blob.l += 5; break;\n\t\tcase 3: case 4: blob.l += 8; break;\n\t\tcase 5: blob.l += 12; break;\n\t}\n\treturn [type, 0, nameindex];\n}\n\n/* [MS-XLS] 2.5.198.77 ; [MS-XLSB] 2.5.97.61 */\nfunction parse_PtgNameX(blob, length, opts) {\n\tif(opts.biff == 5) return parse_PtgNameX_BIFF5(blob, length, opts);\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tvar ixti = blob.read_shift(2); // XtiIndex\n\tvar nameindex = blob.read_shift(4);\n\treturn [type, ixti, nameindex];\n}\nfunction parse_PtgNameX_BIFF5(blob/*::, length, opts*/) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tvar ixti = blob.read_shift(2, 'i'); // XtiIndex\n\tblob.l += 8;\n\tvar nameindex = blob.read_shift(2);\n\tblob.l += 12;\n\treturn [type, ixti, nameindex];\n}\n\n/* [MS-XLS] 2.5.198.70 ; [MS-XLSB] 2.5.97.54 */\nfunction parse_PtgMemArea(blob, length, opts) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tblob.l += (opts && opts.biff == 2 ? 3 : 4);\n\tvar cce = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);\n\treturn [type, cce];\n}\n\n/* [MS-XLS] 2.5.198.72 ; [MS-XLSB] 2.5.97.56 */\nfunction parse_PtgMemFunc(blob, length, opts) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tvar cce = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);\n\treturn [type, cce];\n}\n\n\n/* [MS-XLS] 2.5.198.86 ; [MS-XLSB] 2.5.97.69 */\nfunction parse_PtgRefErr(blob, length, opts) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tblob.l += 4;\n\tif(opts.biff < 8) blob.l--;\n\tif(opts.biff == 12) blob.l += 2;\n\treturn [type];\n}\n\n/* [MS-XLS] 2.5.198.87 ; [MS-XLSB] 2.5.97.71 */\nfunction parse_PtgRefErr3d(blob, length, opts) {\n\tvar type = (blob[blob.l++] & 0x60) >> 5;\n\tvar ixti = blob.read_shift(2);\n\tvar w = 4;\n\tif(opts) switch(opts.biff) {\n\t\tcase 5: w = 15; break;\n\t\tcase 12: w = 6; break;\n\t}\n\tblob.l += w;\n\treturn [type, ixti];\n}\n\n/* [MS-XLS] 2.5.198.71 ; [MS-XLSB] 2.5.97.55 */\nvar parse_PtgMemErr = parsenoop;\n/* [MS-XLS] 2.5.198.73  ; [MS-XLSB] 2.5.97.57 */\nvar parse_PtgMemNoMem = parsenoop;\n/* [MS-XLS] 2.5.198.92 */\nvar parse_PtgTbl = parsenoop;\n\nfunction parse_PtgElfLoc(blob, length, opts) {\n\tblob.l += 2;\n\treturn [parse_RgceElfLoc(blob, 4, opts)];\n}\nfunction parse_PtgElfNoop(blob/*::, length, opts*/) {\n\tblob.l += 6;\n\treturn [];\n}\n/* [MS-XLS] 2.5.198.46 */\nvar parse_PtgElfCol = parse_PtgElfLoc;\n/* [MS-XLS] 2.5.198.47 */\nvar parse_PtgElfColS = parse_PtgElfNoop;\n/* [MS-XLS] 2.5.198.48 */\nvar parse_PtgElfColSV = parse_PtgElfNoop;\n/* [MS-XLS] 2.5.198.49 */\nvar parse_PtgElfColV = parse_PtgElfLoc;\n/* [MS-XLS] 2.5.198.50 */\nfunction parse_PtgElfLel(blob/*::, length, opts*/) {\n\tblob.l += 2;\n\treturn [parseuint16(blob), blob.read_shift(2) & 0x01];\n}\n/* [MS-XLS] 2.5.198.51 */\nvar parse_PtgElfRadical = parse_PtgElfLoc;\n/* [MS-XLS] 2.5.198.52 */\nvar parse_PtgElfRadicalLel = parse_PtgElfLel;\n/* [MS-XLS] 2.5.198.53 */\nvar parse_PtgElfRadicalS = parse_PtgElfNoop;\n/* [MS-XLS] 2.5.198.54 */\nvar parse_PtgElfRw = parse_PtgElfLoc;\n/* [MS-XLS] 2.5.198.55 */\nvar parse_PtgElfRwV = parse_PtgElfLoc;\n\n/* [MS-XLSB] 2.5.97.52 TODO */\nvar PtgListRT = [\n\t\"Data\",\n\t\"All\",\n\t\"Headers\",\n\t\"??\",\n\t\"?Data2\",\n\t\"??\",\n\t\"?DataHeaders\",\n\t\"??\",\n\t\"Totals\",\n\t\"??\",\n\t\"??\",\n\t\"??\",\n\t\"?DataTotals\",\n\t\"??\",\n\t\"??\",\n\t\"??\",\n\t\"?Current\"\n];\nfunction parse_PtgList(blob/*::, length, opts*/) {\n\tblob.l += 2;\n\tvar ixti = blob.read_shift(2);\n\tvar flags = blob.read_shift(2);\n\tvar idx = blob.read_shift(4);\n\tvar c = blob.read_shift(2);\n\tvar C = blob.read_shift(2);\n\tvar rt = PtgListRT[(flags >> 2) & 0x1F];\n\treturn {ixti: ixti, coltype:(flags&0x3), rt:rt, idx:idx, c:c, C:C};\n}\n/* [MS-XLS] 2.5.198.91 ; [MS-XLSB] 2.5.97.76 */\nfunction parse_PtgSxName(blob/*::, length, opts*/) {\n\tblob.l += 2;\n\treturn [blob.read_shift(4)];\n}\n\n/* [XLS] old spec */\nfunction parse_PtgSheet(blob, length, opts) {\n\tblob.l += 5;\n\tblob.l += 2;\n\tblob.l += (opts.biff == 2 ? 1 : 4);\n\treturn [\"PTGSHEET\"];\n}\nfunction parse_PtgEndSheet(blob, length, opts) {\n\tblob.l += (opts.biff == 2 ? 4 : 5);\n\treturn [\"PTGENDSHEET\"];\n}\nfunction parse_PtgMemAreaN(blob/*::, length, opts*/) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tvar cce = blob.read_shift(2);\n\treturn [type, cce];\n}\nfunction parse_PtgMemNoMemN(blob/*::, length, opts*/) {\n\tvar type = (blob.read_shift(1) >>> 5) & 0x03;\n\tvar cce = blob.read_shift(2);\n\treturn [type, cce];\n}\nfunction parse_PtgAttrNoop(blob/*::, length, opts*/) {\n\tblob.l += 4;\n\treturn [0, 0];\n}\n\n/* [MS-XLS] 2.5.198.25 ; [MS-XLSB] 2.5.97.16 */\nvar PtgTypes = {\n\t/*::[*/0x01/*::]*/: { n:'PtgExp', f:parse_PtgExp },\n\t/*::[*/0x02/*::]*/: { n:'PtgTbl', f:parse_PtgTbl },\n\t/*::[*/0x03/*::]*/: { n:'PtgAdd', f:parseread1 },\n\t/*::[*/0x04/*::]*/: { n:'PtgSub', f:parseread1 },\n\t/*::[*/0x05/*::]*/: { n:'PtgMul', f:parseread1 },\n\t/*::[*/0x06/*::]*/: { n:'PtgDiv', f:parseread1 },\n\t/*::[*/0x07/*::]*/: { n:'PtgPower', f:parseread1 },\n\t/*::[*/0x08/*::]*/: { n:'PtgConcat', f:parseread1 },\n\t/*::[*/0x09/*::]*/: { n:'PtgLt', f:parseread1 },\n\t/*::[*/0x0A/*::]*/: { n:'PtgLe', f:parseread1 },\n\t/*::[*/0x0B/*::]*/: { n:'PtgEq', f:parseread1 },\n\t/*::[*/0x0C/*::]*/: { n:'PtgGe', f:parseread1 },\n\t/*::[*/0x0D/*::]*/: { n:'PtgGt', f:parseread1 },\n\t/*::[*/0x0E/*::]*/: { n:'PtgNe', f:parseread1 },\n\t/*::[*/0x0F/*::]*/: { n:'PtgIsect', f:parseread1 },\n\t/*::[*/0x10/*::]*/: { n:'PtgUnion', f:parseread1 },\n\t/*::[*/0x11/*::]*/: { n:'PtgRange', f:parseread1 },\n\t/*::[*/0x12/*::]*/: { n:'PtgUplus', f:parseread1 },\n\t/*::[*/0x13/*::]*/: { n:'PtgUminus', f:parseread1 },\n\t/*::[*/0x14/*::]*/: { n:'PtgPercent', f:parseread1 },\n\t/*::[*/0x15/*::]*/: { n:'PtgParen', f:parseread1 },\n\t/*::[*/0x16/*::]*/: { n:'PtgMissArg', f:parseread1 },\n\t/*::[*/0x17/*::]*/: { n:'PtgStr', f:parse_PtgStr },\n\t/*::[*/0x1A/*::]*/: { n:'PtgSheet', f:parse_PtgSheet },\n\t/*::[*/0x1B/*::]*/: { n:'PtgEndSheet', f:parse_PtgEndSheet },\n\t/*::[*/0x1C/*::]*/: { n:'PtgErr', f:parse_PtgErr },\n\t/*::[*/0x1D/*::]*/: { n:'PtgBool', f:parse_PtgBool },\n\t/*::[*/0x1E/*::]*/: { n:'PtgInt', f:parse_PtgInt },\n\t/*::[*/0x1F/*::]*/: { n:'PtgNum', f:parse_PtgNum },\n\t/*::[*/0x20/*::]*/: { n:'PtgArray', f:parse_PtgArray },\n\t/*::[*/0x21/*::]*/: { n:'PtgFunc', f:parse_PtgFunc },\n\t/*::[*/0x22/*::]*/: { n:'PtgFuncVar', f:parse_PtgFuncVar },\n\t/*::[*/0x23/*::]*/: { n:'PtgName', f:parse_PtgName },\n\t/*::[*/0x24/*::]*/: { n:'PtgRef', f:parse_PtgRef },\n\t/*::[*/0x25/*::]*/: { n:'PtgArea', f:parse_PtgArea },\n\t/*::[*/0x26/*::]*/: { n:'PtgMemArea', f:parse_PtgMemArea },\n\t/*::[*/0x27/*::]*/: { n:'PtgMemErr', f:parse_PtgMemErr },\n\t/*::[*/0x28/*::]*/: { n:'PtgMemNoMem', f:parse_PtgMemNoMem },\n\t/*::[*/0x29/*::]*/: { n:'PtgMemFunc', f:parse_PtgMemFunc },\n\t/*::[*/0x2A/*::]*/: { n:'PtgRefErr', f:parse_PtgRefErr },\n\t/*::[*/0x2B/*::]*/: { n:'PtgAreaErr', f:parse_PtgAreaErr },\n\t/*::[*/0x2C/*::]*/: { n:'PtgRefN', f:parse_PtgRefN },\n\t/*::[*/0x2D/*::]*/: { n:'PtgAreaN', f:parse_PtgAreaN },\n\t/*::[*/0x2E/*::]*/: { n:'PtgMemAreaN', f:parse_PtgMemAreaN },\n\t/*::[*/0x2F/*::]*/: { n:'PtgMemNoMemN', f:parse_PtgMemNoMemN },\n\t/*::[*/0x39/*::]*/: { n:'PtgNameX', f:parse_PtgNameX },\n\t/*::[*/0x3A/*::]*/: { n:'PtgRef3d', f:parse_PtgRef3d },\n\t/*::[*/0x3B/*::]*/: { n:'PtgArea3d', f:parse_PtgArea3d },\n\t/*::[*/0x3C/*::]*/: { n:'PtgRefErr3d', f:parse_PtgRefErr3d },\n\t/*::[*/0x3D/*::]*/: { n:'PtgAreaErr3d', f:parse_PtgAreaErr3d },\n\t/*::[*/0xFF/*::]*/: {}\n};\n/* These are duplicated in the PtgTypes table */\nvar PtgDupes = {\n\t/*::[*/0x40/*::]*/: 0x20, /*::[*/0x60/*::]*/: 0x20,\n\t/*::[*/0x41/*::]*/: 0x21, /*::[*/0x61/*::]*/: 0x21,\n\t/*::[*/0x42/*::]*/: 0x22, /*::[*/0x62/*::]*/: 0x22,\n\t/*::[*/0x43/*::]*/: 0x23, /*::[*/0x63/*::]*/: 0x23,\n\t/*::[*/0x44/*::]*/: 0x24, /*::[*/0x64/*::]*/: 0x24,\n\t/*::[*/0x45/*::]*/: 0x25, /*::[*/0x65/*::]*/: 0x25,\n\t/*::[*/0x46/*::]*/: 0x26, /*::[*/0x66/*::]*/: 0x26,\n\t/*::[*/0x47/*::]*/: 0x27, /*::[*/0x67/*::]*/: 0x27,\n\t/*::[*/0x48/*::]*/: 0x28, /*::[*/0x68/*::]*/: 0x28,\n\t/*::[*/0x49/*::]*/: 0x29, /*::[*/0x69/*::]*/: 0x29,\n\t/*::[*/0x4A/*::]*/: 0x2A, /*::[*/0x6A/*::]*/: 0x2A,\n\t/*::[*/0x4B/*::]*/: 0x2B, /*::[*/0x6B/*::]*/: 0x2B,\n\t/*::[*/0x4C/*::]*/: 0x2C, /*::[*/0x6C/*::]*/: 0x2C,\n\t/*::[*/0x4D/*::]*/: 0x2D, /*::[*/0x6D/*::]*/: 0x2D,\n\t/*::[*/0x4E/*::]*/: 0x2E, /*::[*/0x6E/*::]*/: 0x2E,\n\t/*::[*/0x4F/*::]*/: 0x2F, /*::[*/0x6F/*::]*/: 0x2F,\n\t/*::[*/0x58/*::]*/: 0x22, /*::[*/0x78/*::]*/: 0x22,\n\t/*::[*/0x59/*::]*/: 0x39, /*::[*/0x79/*::]*/: 0x39,\n\t/*::[*/0x5A/*::]*/: 0x3A, /*::[*/0x7A/*::]*/: 0x3A,\n\t/*::[*/0x5B/*::]*/: 0x3B, /*::[*/0x7B/*::]*/: 0x3B,\n\t/*::[*/0x5C/*::]*/: 0x3C, /*::[*/0x7C/*::]*/: 0x3C,\n\t/*::[*/0x5D/*::]*/: 0x3D, /*::[*/0x7D/*::]*/: 0x3D\n};\n\nvar Ptg18 = {\n\t/*::[*/0x01/*::]*/: { n:'PtgElfLel', f:parse_PtgElfLel },\n\t/*::[*/0x02/*::]*/: { n:'PtgElfRw', f:parse_PtgElfRw },\n\t/*::[*/0x03/*::]*/: { n:'PtgElfCol', f:parse_PtgElfCol },\n\t/*::[*/0x06/*::]*/: { n:'PtgElfRwV', f:parse_PtgElfRwV },\n\t/*::[*/0x07/*::]*/: { n:'PtgElfColV', f:parse_PtgElfColV },\n\t/*::[*/0x0A/*::]*/: { n:'PtgElfRadical', f:parse_PtgElfRadical },\n\t/*::[*/0x0B/*::]*/: { n:'PtgElfRadicalS', f:parse_PtgElfRadicalS },\n\t/*::[*/0x0D/*::]*/: { n:'PtgElfColS', f:parse_PtgElfColS },\n\t/*::[*/0x0F/*::]*/: { n:'PtgElfColSV', f:parse_PtgElfColSV },\n\t/*::[*/0x10/*::]*/: { n:'PtgElfRadicalLel', f:parse_PtgElfRadicalLel },\n\t/*::[*/0x19/*::]*/: { n:'PtgList', f:parse_PtgList },\n\t/*::[*/0x1D/*::]*/: { n:'PtgSxName', f:parse_PtgSxName },\n\t/*::[*/0xFF/*::]*/: {}\n};\nvar Ptg19 = {\n\t/*::[*/0x00/*::]*/: { n:'PtgAttrNoop', f:parse_PtgAttrNoop },\n\t/*::[*/0x01/*::]*/: { n:'PtgAttrSemi', f:parse_PtgAttrSemi },\n\t/*::[*/0x02/*::]*/: { n:'PtgAttrIf', f:parse_PtgAttrIf },\n\t/*::[*/0x04/*::]*/: { n:'PtgAttrChoose', f:parse_PtgAttrChoose },\n\t/*::[*/0x08/*::]*/: { n:'PtgAttrGoto', f:parse_PtgAttrGoto },\n\t/*::[*/0x10/*::]*/: { n:'PtgAttrSum', f:parse_PtgAttrSum },\n\t/*::[*/0x20/*::]*/: { n:'PtgAttrBaxcel', f:parse_PtgAttrBaxcel },\n\t/*::[*/0x21/*::]*/: { n:'PtgAttrBaxcel', f:parse_PtgAttrBaxcel },\n\t/*::[*/0x40/*::]*/: { n:'PtgAttrSpace', f:parse_PtgAttrSpace },\n\t/*::[*/0x41/*::]*/: { n:'PtgAttrSpaceSemi', f:parse_PtgAttrSpaceSemi },\n\t/*::[*/0x80/*::]*/: { n:'PtgAttrIfError', f:parse_PtgAttrIfError },\n\t/*::[*/0xFF/*::]*/: {}\n};\n\n/* [MS-XLS] 2.5.198.103 ; [MS-XLSB] 2.5.97.87 */\nfunction parse_RgbExtra(blob, length, rgce, opts) {\n\tif(opts.biff < 8) return parsenoop(blob, length);\n\tvar target = blob.l + length;\n\tvar o = [];\n\tfor(var i = 0; i !== rgce.length; ++i) {\n\t\tswitch(rgce[i][0]) {\n\t\t\tcase 'PtgArray': /* PtgArray -> PtgExtraArray */\n\t\t\t\trgce[i][1] = parse_PtgExtraArray(blob, 0, opts);\n\t\t\t\to.push(rgce[i][1]);\n\t\t\t\tbreak;\n\t\t\tcase 'PtgMemArea': /* PtgMemArea -> PtgExtraMem */\n\t\t\t\trgce[i][2] = parse_PtgExtraMem(blob, rgce[i][1], opts);\n\t\t\t\to.push(rgce[i][2]);\n\t\t\t\tbreak;\n\t\t\tcase 'PtgExp': /* PtgExp -> PtgExtraCol */\n\t\t\t\tif(opts && opts.biff == 12) {\n\t\t\t\t\trgce[i][1][1] = blob.read_shift(4);\n\t\t\t\t\to.push(rgce[i][1]);\n\t\t\t\t} break;\n\t\t\tcase 'PtgList': /* TODO: PtgList -> PtgExtraList */\n\t\t\tcase 'PtgElfRadicalS': /* TODO: PtgElfRadicalS -> PtgExtraElf */\n\t\t\tcase 'PtgElfColS': /* TODO: PtgElfColS -> PtgExtraElf */\n\t\t\tcase 'PtgElfColSV': /* TODO: PtgElfColSV -> PtgExtraElf */\n\t\t\t\tthrow \"Unsupported \" + rgce[i][0];\n\t\t\tdefault: break;\n\t\t}\n\t}\n\tlength = target - blob.l;\n\t/* note: this is technically an error but Excel disregards */\n\t//if(target !== blob.l && blob.l !== target - length) throw new Error(target + \" != \" + blob.l);\n\tif(length !== 0) o.push(parsenoop(blob, length));\n\treturn o;\n}\n\n/* [MS-XLS] 2.5.198.104 ; [MS-XLSB] 2.5.97.88 */\nfunction parse_Rgce(blob, length, opts) {\n\tvar target = blob.l + length;\n\tvar R, id, ptgs = [];\n\twhile(target != blob.l) {\n\t\tlength = target - blob.l;\n\t\tid = blob[blob.l];\n\t\tR = PtgTypes[id] || PtgTypes[PtgDupes[id]];\n\t\tif(id === 0x18 || id === 0x19) R = (id === 0x18 ? Ptg18 : Ptg19)[blob[blob.l + 1]];\n\t\tif(!R || !R.f) { /*ptgs.push*/(parsenoop(blob, length)); }\n\t\telse { ptgs.push([R.n, R.f(blob, length, opts)]); }\n\t}\n\treturn ptgs;\n}\n\nfunction stringify_array(f/*:Array<Array<string>>*/)/*:string*/ {\n\tvar o/*:Array<string>*/ = [];\n\tfor(var i = 0; i < f.length; ++i) {\n\t\tvar x = f[i], r/*:Array<string>*/ = [];\n\t\tfor(var j = 0; j < x.length; ++j) {\n\t\t\tvar y = x[j];\n\t\t\tif(y) switch(y[0]) {\n\t\t\t\t// TODO: handle embedded quotes\n\t\t\t\tcase 0x02:\n\t\t\t\t\t/*:: if(typeof y[1] != 'string') throw \"unreachable\"; */\n\t\t\t\t\tr.push('\"' + y[1].replace(/\"/g,'\"\"') + '\"'); break;\n\t\t\t\tdefault: r.push(y[1]);\n\t\t\t} else r.push(\"\");\n\t\t}\n\t\to.push(r.join(\",\"));\n\t}\n\treturn o.join(\";\");\n}\n\n/* [MS-XLS] 2.2.2 ; [MS-XLSB] 2.2.2 TODO */\nvar PtgBinOp = {\n\tPtgAdd: \"+\",\n\tPtgConcat: \"&\",\n\tPtgDiv: \"/\",\n\tPtgEq: \"=\",\n\tPtgGe: \">=\",\n\tPtgGt: \">\",\n\tPtgLe: \"<=\",\n\tPtgLt: \"<\",\n\tPtgMul: \"*\",\n\tPtgNe: \"<>\",\n\tPtgPower: \"^\",\n\tPtgSub: \"-\"\n};\n\n// List of invalid characters needs to be tested further\nfunction formula_quote_sheet_name(sname/*:string*/, opts)/*:string*/ {\n\tif(!sname && !(opts && opts.biff <= 5 && opts.biff >= 2)) throw new Error(\"empty sheet name\");\n\tif (/[^\\w\\u4E00-\\u9FFF\\u3040-\\u30FF]/.test(sname)) return \"'\" + sname + \"'\";\n\treturn sname;\n}\nfunction get_ixti_raw(supbooks, ixti/*:number*/, opts)/*:string*/ {\n\tif(!supbooks) return \"SH33TJSERR0\";\n\tif(opts.biff > 8 && (!supbooks.XTI || !supbooks.XTI[ixti])) return supbooks.SheetNames[ixti];\n\tif(!supbooks.XTI) return \"SH33TJSERR6\";\n\tvar XTI = supbooks.XTI[ixti];\n\tif(opts.biff < 8) {\n\t\tif(ixti > 10000) ixti-= 65536;\n\t\tif(ixti < 0) ixti = -ixti;\n\t\treturn ixti == 0 ? \"\" : supbooks.XTI[ixti - 1];\n\t}\n\tif(!XTI) return \"SH33TJSERR1\";\n\tvar o = \"\";\n\tif(opts.biff > 8) switch(supbooks[XTI[0]][0]) {\n\t\tcase 0x0165: /* 'BrtSupSelf' */\n\t\t\to = XTI[1] == -1 ? \"#REF\" : supbooks.SheetNames[XTI[1]];\n\t\t\treturn XTI[1] == XTI[2] ? o : o + \":\" + supbooks.SheetNames[XTI[2]];\n\t\tcase 0x0166: /* 'BrtSupSame' */\n\t\t\tif(opts.SID != null) return supbooks.SheetNames[opts.SID];\n\t\t\treturn \"SH33TJSSAME\" + supbooks[XTI[0]][0];\n\t\tcase 0x0163: /* 'BrtSupBookSrc' */\n\t\t\t/* falls through */\n\t\tdefault: return \"SH33TJSSRC\" + supbooks[XTI[0]][0];\n\t}\n\tswitch(supbooks[XTI[0]][0][0]) {\n\t\tcase 0x0401:\n\t\t\to = XTI[1] == -1 ? \"#REF\" : (supbooks.SheetNames[XTI[1]] || \"SH33TJSERR3\");\n\t\t\treturn XTI[1] == XTI[2] ? o : o + \":\" + supbooks.SheetNames[XTI[2]];\n\t\tcase 0x3A01: return supbooks[XTI[0]].slice(1).map(function(name) { return name.Name; }).join(\";;\"); //return \"SH33TJSERR8\";\n\t\tdefault:\n\t\t\tif(!supbooks[XTI[0]][0][3]) return \"SH33TJSERR2\";\n\t\t\to = XTI[1] == -1 ? \"#REF\" : (supbooks[XTI[0]][0][3][XTI[1]] || \"SH33TJSERR4\");\n\t\t\treturn XTI[1] == XTI[2] ? o : o + \":\" + supbooks[XTI[0]][0][3][XTI[2]];\n\t}\n}\nfunction get_ixti(supbooks, ixti/*:number*/, opts)/*:string*/ {\n\tvar ixtiraw = get_ixti_raw(supbooks, ixti, opts);\n\treturn ixtiraw == \"#REF\" ? ixtiraw : formula_quote_sheet_name(ixtiraw, opts);\n}\nfunction stringify_formula(formula/*Array<any>*/, range, cell/*:any*/, supbooks, opts)/*:string*/ {\n\tvar biff = (opts && opts.biff) || 8;\n\tvar _range = /*range != null ? range :*/ {s:{c:0, r:0},e:{c:0, r:0}};\n\tvar stack/*:Array<string>*/ = [], e1, e2, /*::type,*/ c/*:CellAddress*/, ixti=0, nameidx=0, r, sname=\"\";\n\tif(!formula[0] || !formula[0][0]) return \"\";\n\tvar last_sp = -1, sp = \"\";\n\tfor(var ff = 0, fflen = formula[0].length; ff < fflen; ++ff) {\n\t\tvar f = formula[0][ff];\n\t\tswitch(f[0]) {\n\t\t\tcase 'PtgUminus': /* [MS-XLS] 2.5.198.93 */\n\t\t\t\tstack.push(\"-\" + stack.pop()); break;\n\t\t\tcase 'PtgUplus': /* [MS-XLS] 2.5.198.95 */\n\t\t\t\tstack.push(\"+\" + stack.pop()); break;\n\t\t\tcase 'PtgPercent': /* [MS-XLS] 2.5.198.81 */\n\t\t\t\tstack.push(stack.pop() + \"%\"); break;\n\n\t\t\tcase 'PtgAdd':    /* [MS-XLS] 2.5.198.26 */\n\t\t\tcase 'PtgConcat': /* [MS-XLS] 2.5.198.43 */\n\t\t\tcase 'PtgDiv':    /* [MS-XLS] 2.5.198.45 */\n\t\t\tcase 'PtgEq':     /* [MS-XLS] 2.5.198.56 */\n\t\t\tcase 'PtgGe':     /* [MS-XLS] 2.5.198.64 */\n\t\t\tcase 'PtgGt':     /* [MS-XLS] 2.5.198.65 */\n\t\t\tcase 'PtgLe':     /* [MS-XLS] 2.5.198.68 */\n\t\t\tcase 'PtgLt':     /* [MS-XLS] 2.5.198.69 */\n\t\t\tcase 'PtgMul':    /* [MS-XLS] 2.5.198.75 */\n\t\t\tcase 'PtgNe':     /* [MS-XLS] 2.5.198.78 */\n\t\t\tcase 'PtgPower':  /* [MS-XLS] 2.5.198.82 */\n\t\t\tcase 'PtgSub':    /* [MS-XLS] 2.5.198.90 */\n\t\t\t\te1 = stack.pop(); e2 = stack.pop();\n\t\t\t\tif(last_sp >= 0) {\n\t\t\t\t\tswitch(formula[0][last_sp][1][0]) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\t\tsp = fill(\" \", formula[0][last_sp][1][1]); break;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\t\tsp = fill(\"\\r\", formula[0][last_sp][1][1]); break;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tsp = \"\";\n\t\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\t\tif(opts.WTF) throw new Error(\"Unexpected PtgAttrSpaceType \" + formula[0][last_sp][1][0]);\n\t\t\t\t\t}\n\t\t\t\t\te2 = e2 + sp;\n\t\t\t\t\tlast_sp = -1;\n\t\t\t\t}\n\t\t\t\tstack.push(e2+PtgBinOp[f[0]]+e1);\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgIsect': /* [MS-XLS] 2.5.198.67 */\n\t\t\t\te1 = stack.pop(); e2 = stack.pop();\n\t\t\t\tstack.push(e2+\" \"+e1);\n\t\t\t\tbreak;\n\t\t\tcase 'PtgUnion': /* [MS-XLS] 2.5.198.94 */\n\t\t\t\te1 = stack.pop(); e2 = stack.pop();\n\t\t\t\tstack.push(e2+\",\"+e1);\n\t\t\t\tbreak;\n\t\t\tcase 'PtgRange': /* [MS-XLS] 2.5.198.83 */\n\t\t\t\te1 = stack.pop(); e2 = stack.pop();\n\t\t\t\tstack.push(e2+\":\"+e1);\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgAttrChoose': /* [MS-XLS] 2.5.198.34 */\n\t\t\t\tbreak;\n\t\t\tcase 'PtgAttrGoto': /* [MS-XLS] 2.5.198.35 */\n\t\t\t\tbreak;\n\t\t\tcase 'PtgAttrIf': /* [MS-XLS] 2.5.198.36 */\n\t\t\t\tbreak;\n\t\t\tcase 'PtgAttrIfError': /* [MS-XLSB] 2.5.97.28 */\n\t\t\t\tbreak;\n\n\n\t\t\tcase 'PtgRef': /* [MS-XLS] 2.5.198.84 */\n\t\t\t\t/*::type = f[1][0]; */c = shift_cell_xls((f[1][1]/*:any*/), _range, opts);\n\t\t\t\tstack.push(encode_cell_xls(c, biff));\n\t\t\t\tbreak;\n\t\t\tcase 'PtgRefN': /* [MS-XLS] 2.5.198.88 */\n\t\t\t\t/*::type = f[1][0]; */c = cell ? shift_cell_xls((f[1][1]/*:any*/), cell, opts) : (f[1][1]/*:any*/);\n\t\t\t\tstack.push(encode_cell_xls(c, biff));\n\t\t\t\tbreak;\n\t\t\tcase 'PtgRef3d': /* [MS-XLS] 2.5.198.85 */\n\t\t\t\t/*::type = f[1][0]; */ixti = /*::Number(*/f[1][1]/*::)*/; c = shift_cell_xls((f[1][2]/*:any*/), _range, opts);\n\t\t\t\tsname = get_ixti(supbooks, ixti, opts);\n\t\t\t\tvar w = sname; /* IE9 fails on defined names */ // eslint-disable-line no-unused-vars\n\t\t\t\tstack.push(sname + \"!\" + encode_cell_xls(c, biff));\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgFunc': /* [MS-XLS] 2.5.198.62 */\n\t\t\tcase 'PtgFuncVar': /* [MS-XLS] 2.5.198.63 */\n\t\t\t\t/* f[1] = [argc, func, type] */\n\t\t\t\tvar argc/*:number*/ = (f[1][0]/*:any*/), func/*:string*/ = (f[1][1]/*:any*/);\n\t\t\t\tif(!argc) argc = 0;\n\t\t\t\targc &= 0x7F;\n\t\t\t\tvar args = argc == 0 ? [] : stack.slice(-argc);\n\t\t\t\tstack.length -= argc;\n\t\t\t\tif(func === 'User') func = args.shift();\n\t\t\t\tstack.push(func + \"(\" + args.join(\",\") + \")\");\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgBool': /* [MS-XLS] 2.5.198.42 */\n\t\t\t\tstack.push(f[1] ? \"TRUE\" : \"FALSE\"); break;\n\t\t\tcase 'PtgInt': /* [MS-XLS] 2.5.198.66 */\n\t\t\t\tstack.push(/*::String(*/f[1]/*::)*/); break;\n\t\t\tcase 'PtgNum': /* [MS-XLS] 2.5.198.79 TODO: precision? */\n\t\t\t\tstack.push(String(f[1])); break;\n\t\t\tcase 'PtgStr': /* [MS-XLS] 2.5.198.89 */\n\t\t\t\t// $FlowIgnore\n\t\t\t\tstack.push('\"' + f[1].replace(/\"/g, '\"\"') + '\"'); break;\n\t\t\tcase 'PtgErr': /* [MS-XLS] 2.5.198.57 */\n\t\t\t\tstack.push(/*::String(*/f[1]/*::)*/); break;\n\t\t\tcase 'PtgAreaN': /* [MS-XLS] 2.5.198.31 TODO */\n\t\t\t\t/*::type = f[1][0]; */r = shift_range_xls(f[1][1], cell ? {s:cell} : _range, opts);\n\t\t\t\tstack.push(encode_range_xls((r/*:any*/), opts));\n\t\t\t\tbreak;\n\t\t\tcase 'PtgArea': /* [MS-XLS] 2.5.198.27 TODO: fixed points */\n\t\t\t\t/*::type = f[1][0]; */r = shift_range_xls(f[1][1], _range, opts);\n\t\t\t\tstack.push(encode_range_xls((r/*:any*/), opts));\n\t\t\t\tbreak;\n\t\t\tcase 'PtgArea3d': /* [MS-XLS] 2.5.198.28 TODO */\n\t\t\t\t/*::type = f[1][0]; */ixti = /*::Number(*/f[1][1]/*::)*/; r = f[1][2];\n\t\t\t\tsname = get_ixti(supbooks, ixti, opts);\n\t\t\t\tstack.push(sname + \"!\" + encode_range_xls((r/*:any*/), opts));\n\t\t\t\tbreak;\n\t\t\tcase 'PtgAttrSum': /* [MS-XLS] 2.5.198.41 */\n\t\t\t\tstack.push(\"SUM(\" + stack.pop() + \")\");\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgAttrBaxcel': /* [MS-XLS] 2.5.198.33 */\n\t\t\tcase 'PtgAttrSemi': /* [MS-XLS] 2.5.198.37 */\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgName': /* [MS-XLS] 2.5.198.76 ; [MS-XLSB] 2.5.97.60 TODO: revisions */\n\t\t\t\t/* f[1] = type, 0, nameindex */\n\t\t\t\tnameidx = (f[1][2]/*:any*/);\n\t\t\t\tvar lbl = (supbooks.names||[])[nameidx-1] || (supbooks[0]||[])[nameidx];\n\t\t\t\tvar name = lbl ? lbl.Name : \"SH33TJSNAME\" + String(nameidx);\n\t\t\t\t/* [MS-XLSB] 2.5.97.10 Ftab -- last verified 20220204 */\n\t\t\t\tif(name && name.slice(0,6) == \"_xlfn.\" && !opts.xlfn) name = name.slice(6);\n\t\t\t\tstack.push(name);\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgNameX': /* [MS-XLS] 2.5.198.77 ; [MS-XLSB] 2.5.97.61 TODO: revisions */\n\t\t\t\t/* f[1] = type, ixti, nameindex */\n\t\t\t\tvar bookidx/*:number*/ = (f[1][1]/*:any*/); nameidx = (f[1][2]/*:any*/); var externbook;\n\t\t\t\t/* TODO: Properly handle missing values -- this should be using get_ixti_raw primarily */\n\t\t\t\tif(opts.biff <= 5) {\n\t\t\t\t\tif(bookidx < 0) bookidx = -bookidx;\n\t\t\t\t\tif(supbooks[bookidx]) externbook = supbooks[bookidx][nameidx];\n\t\t\t\t} else {\n\t\t\t\t\tvar o = \"\";\n\t\t\t\t\tif(((supbooks[bookidx]||[])[0]||[])[0] == 0x3A01){/* empty */}\n\t\t\t\t\telse if(((supbooks[bookidx]||[])[0]||[])[0] == 0x0401){\n\t\t\t\t\t\tif(supbooks[bookidx][nameidx] && supbooks[bookidx][nameidx].itab > 0) {\n\t\t\t\t\t\t\to = supbooks.SheetNames[supbooks[bookidx][nameidx].itab-1] + \"!\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse o = supbooks.SheetNames[nameidx-1]+ \"!\";\n\t\t\t\t\tif(supbooks[bookidx] && supbooks[bookidx][nameidx]) o += supbooks[bookidx][nameidx].Name;\n\t\t\t\t\telse if(supbooks[0] && supbooks[0][nameidx]) o += supbooks[0][nameidx].Name;\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar ixtidata = (get_ixti_raw(supbooks, bookidx, opts)||\"\").split(\";;\");\n\t\t\t\t\t\tif(ixtidata[nameidx - 1]) o = ixtidata[nameidx - 1]; // TODO: confirm this is correct\n\t\t\t\t\t\telse o += \"SH33TJSERRX\";\n\t\t\t\t\t}\n\t\t\t\t\tstack.push(o);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(!externbook) externbook = {Name: \"SH33TJSERRY\"};\n\t\t\t\tstack.push(externbook.Name);\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgParen': /* [MS-XLS] 2.5.198.80 */\n\t\t\t\tvar lp = '(', rp = ')';\n\t\t\t\tif(last_sp >= 0) {\n\t\t\t\t\tsp = \"\";\n\t\t\t\t\tswitch(formula[0][last_sp][1][0]) {\n\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\tcase 2: lp = fill(\" \", formula[0][last_sp][1][1]) + lp; break;\n\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\tcase 3: lp = fill(\"\\r\", formula[0][last_sp][1][1]) + lp; break;\n\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\tcase 4: rp = fill(\" \", formula[0][last_sp][1][1]) + rp; break;\n\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\tcase 5: rp = fill(\"\\r\", formula[0][last_sp][1][1]) + rp; break;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\t\t\tif(opts.WTF) throw new Error(\"Unexpected PtgAttrSpaceType \" + formula[0][last_sp][1][0]);\n\t\t\t\t\t}\n\t\t\t\t\tlast_sp = -1;\n\t\t\t\t}\n\t\t\t\tstack.push(lp + stack.pop() + rp); break;\n\n\t\t\tcase 'PtgRefErr': /* [MS-XLS] 2.5.198.86 */\n\t\t\t\tstack.push('#REF!'); break;\n\n\t\t\tcase 'PtgRefErr3d': /* [MS-XLS] 2.5.198.87 */\n\t\t\t\tstack.push('#REF!'); break;\n\n\t\t\tcase 'PtgExp': /* [MS-XLS] 2.5.198.58 TODO */\n\t\t\t\tc = {c:(f[1][1]/*:any*/),r:(f[1][0]/*:any*/)};\n\t\t\t\tvar q = ({c: cell.c, r:cell.r}/*:any*/);\n\t\t\t\tif(supbooks.sharedf[encode_cell(c)]) {\n\t\t\t\t\tvar parsedf = (supbooks.sharedf[encode_cell(c)]);\n\t\t\t\t\tstack.push(stringify_formula(parsedf, _range, q, supbooks, opts));\n\t\t\t\t} else {\n\t\t\t\t\tvar fnd = false;\n\t\t\t\t\tfor(e1=0;e1!=supbooks.arrayf.length; ++e1) {\n\t\t\t\t\t\t/* TODO: should be something like range_has */\n\t\t\t\t\t\te2 = supbooks.arrayf[e1];\n\t\t\t\t\t\tif(c.c < e2[0].s.c || c.c > e2[0].e.c) continue;\n\t\t\t\t\t\tif(c.r < e2[0].s.r || c.r > e2[0].e.r) continue;\n\t\t\t\t\t\tstack.push(stringify_formula(e2[1], _range, q, supbooks, opts));\n\t\t\t\t\t\tfnd = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif(!fnd) stack.push(/*::String(*/f[1]/*::)*/);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgArray': /* [MS-XLS] 2.5.198.32 TODO */\n\t\t\t\tstack.push(\"{\" + stringify_array(/*::(*/f[1]/*:: :any)*/) + \"}\");\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgMemArea': /* [MS-XLS] 2.5.198.70 TODO: confirm this is a non-display */\n\t\t\t\t//stack.push(\"(\" + f[2].map(encode_range).join(\",\") + \")\");\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgAttrSpace': /* [MS-XLS] 2.5.198.38 */\n\t\t\tcase 'PtgAttrSpaceSemi': /* [MS-XLS] 2.5.198.39 */\n\t\t\t\tlast_sp = ff;\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgTbl': /* [MS-XLS] 2.5.198.92 TODO */\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgMemErr': /* [MS-XLS] 2.5.198.71 */\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgMissArg': /* [MS-XLS] 2.5.198.74 */\n\t\t\t\tstack.push(\"\");\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgAreaErr': /* [MS-XLS] 2.5.198.29 */\n\t\t\t\tstack.push(\"#REF!\"); break;\n\n\t\t\tcase 'PtgAreaErr3d': /* [MS-XLS] 2.5.198.30 */\n\t\t\t\tstack.push(\"#REF!\"); break;\n\n\t\t\tcase 'PtgList': /* [MS-XLSB] 2.5.97.52 */\n\t\t\t\t// $FlowIgnore\n\t\t\t\tstack.push(\"Table\" + f[1].idx + \"[#\" + f[1].rt + \"]\");\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgMemAreaN':\n\t\t\tcase 'PtgMemNoMemN':\n\t\t\tcase 'PtgAttrNoop':\n\t\t\tcase 'PtgSheet':\n\t\t\tcase 'PtgEndSheet':\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgMemFunc': /* [MS-XLS] 2.5.198.72 TODO */\n\t\t\t\tbreak;\n\t\t\tcase 'PtgMemNoMem': /* [MS-XLS] 2.5.198.73 TODO */\n\t\t\t\tbreak;\n\n\t\t\tcase 'PtgElfCol': /* [MS-XLS] 2.5.198.46 */\n\t\t\tcase 'PtgElfColS': /* [MS-XLS] 2.5.198.47 */\n\t\t\tcase 'PtgElfColSV': /* [MS-XLS] 2.5.198.48 */\n\t\t\tcase 'PtgElfColV': /* [MS-XLS] 2.5.198.49 */\n\t\t\tcase 'PtgElfLel': /* [MS-XLS] 2.5.198.50 */\n\t\t\tcase 'PtgElfRadical': /* [MS-XLS] 2.5.198.51 */\n\t\t\tcase 'PtgElfRadicalLel': /* [MS-XLS] 2.5.198.52 */\n\t\t\tcase 'PtgElfRadicalS': /* [MS-XLS] 2.5.198.53 */\n\t\t\tcase 'PtgElfRw': /* [MS-XLS] 2.5.198.54 */\n\t\t\tcase 'PtgElfRwV': /* [MS-XLS] 2.5.198.55 */\n\t\t\t\tthrow new Error(\"Unsupported ELFs\");\n\n\t\t\tcase 'PtgSxName': /* [MS-XLS] 2.5.198.91 TODO -- find a test case */\n\t\t\t\tthrow new Error('Unrecognized Formula Token: ' + String(f));\n\t\t\tdefault: throw new Error('Unrecognized Formula Token: ' + String(f));\n\t\t}\n\t\tvar PtgNonDisp = ['PtgAttrSpace', 'PtgAttrSpaceSemi', 'PtgAttrGoto'];\n\t\tif(opts.biff != 3) if(last_sp >= 0 && PtgNonDisp.indexOf(formula[0][ff][0]) == -1) {\n\t\t\tf = formula[0][last_sp];\n\t\t\tvar _left = true;\n\t\t\tswitch(f[1][0]) {\n\t\t\t\t/* note: some bad XLSB files omit the PtgParen */\n\t\t\t\tcase 4: _left = false;\n\t\t\t\t/* falls through */\n\t\t\t\tcase 0:\n\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\tsp = fill(\" \", f[1][1]); break;\n\t\t\t\tcase 5: _left = false;\n\t\t\t\t/* falls through */\n\t\t\t\tcase 1:\n\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\tsp = fill(\"\\r\", f[1][1]); break;\n\t\t\t\tdefault:\n\t\t\t\t\tsp = \"\";\n\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\tif(opts.WTF) throw new Error(\"Unexpected PtgAttrSpaceType \" + f[1][0]);\n\t\t\t}\n\t\t\tstack.push((_left ? sp : \"\") + stack.pop() + (_left ? \"\" : sp));\n\t\t\tlast_sp = -1;\n\t\t}\n\t}\n\tif(stack.length > 1 && opts.WTF) throw new Error(\"bad formula stack\");\n\treturn stack[0];\n}\n\n/* [MS-XLS] 2.5.198.1 TODO */\nfunction parse_ArrayParsedFormula(blob, length, opts/*::, ref*/) {\n\tvar target = blob.l + length, len = opts.biff == 2 ? 1 : 2;\n\tvar rgcb, cce = blob.read_shift(len); // length of rgce\n\tif(cce == 0xFFFF) return [[],parsenoop(blob, length-2)];\n\tvar rgce = parse_Rgce(blob, cce, opts);\n\tif(length !== cce + len) rgcb = parse_RgbExtra(blob, length - cce - len, rgce, opts);\n\tblob.l = target;\n\treturn [rgce, rgcb];\n}\n\n/* [MS-XLS] 2.5.198.3 TODO */\nfunction parse_XLSCellParsedFormula(blob, length, opts) {\n\tvar target = blob.l + length, len = opts.biff == 2 ? 1 : 2;\n\tvar rgcb, cce = blob.read_shift(len); // length of rgce\n\tif(cce == 0xFFFF) return [[],parsenoop(blob, length-2)];\n\tvar rgce = parse_Rgce(blob, cce, opts);\n\tif(length !== cce + len) rgcb = parse_RgbExtra(blob, length - cce - len, rgce, opts);\n\tblob.l = target;\n\treturn [rgce, rgcb];\n}\n\n/* [MS-XLS] 2.5.198.21 */\nfunction parse_NameParsedFormula(blob, length, opts, cce) {\n\tvar target = blob.l + length;\n\tvar rgce = parse_Rgce(blob, cce, opts);\n\tvar rgcb;\n\tif(target !== blob.l) rgcb = parse_RgbExtra(blob, target - blob.l, rgce, opts);\n\treturn [rgce, rgcb];\n}\n\n/* [MS-XLS] 2.5.198.118 TODO */\nfunction parse_SharedParsedFormula(blob, length, opts) {\n\tvar target = blob.l + length;\n\tvar rgcb, cce = blob.read_shift(2); // length of rgce\n\tvar rgce = parse_Rgce(blob, cce, opts);\n\tif(cce == 0xFFFF) return [[],parsenoop(blob, length-2)];\n\tif(length !== cce + 2) rgcb = parse_RgbExtra(blob, target - cce - 2, rgce, opts);\n\treturn [rgce, rgcb];\n}\n\n/* [MS-XLS] 2.5.133 TODO: how to emit empty strings? */\nfunction parse_FormulaValue(blob/*::, length*/) {\n\tvar b;\n\tif(__readUInt16LE(blob,blob.l + 6) !== 0xFFFF) return [parse_Xnum(blob),'n'];\n\tswitch(blob[blob.l]) {\n\t\tcase 0x00: blob.l += 8; return [\"String\", 's'];\n\t\tcase 0x01: b = blob[blob.l+2] === 0x1; blob.l += 8; return [b,'b'];\n\t\tcase 0x02: b = blob[blob.l+2]; blob.l += 8; return [b,'e'];\n\t\tcase 0x03: blob.l += 8; return [\"\",'s'];\n\t}\n\treturn [];\n}\nfunction write_FormulaValue(value) {\n\tif(value == null) {\n\t\t// Blank String Value\n\t\tvar o = new_buf(8);\n\t\to.write_shift(1, 0x03);\n\t\to.write_shift(1, 0);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(2, 0);\n\t\to.write_shift(2, 0xFFFF);\n\t\treturn o;\n\t} else if(typeof value == \"number\") return write_Xnum(value);\n\treturn write_Xnum(0);\n}\n\n/* [MS-XLS] 2.4.127 TODO */\nfunction parse_Formula(blob, length, opts) {\n\tvar end = blob.l + length;\n\tvar cell = parse_XLSCell(blob, 6);\n\tif(opts.biff == 2) ++blob.l;\n\tvar val = parse_FormulaValue(blob,8);\n\tvar flags = blob.read_shift(1);\n\tif(opts.biff != 2) {\n\t\tblob.read_shift(1);\n\t\tif(opts.biff >= 5) {\n\t\t\t/*var chn = */blob.read_shift(4);\n\t\t}\n\t}\n\tvar cbf = parse_XLSCellParsedFormula(blob, end - blob.l, opts);\n\treturn {cell:cell, val:val[0], formula:cbf, shared: (flags >> 3) & 1, tt:val[1]};\n}\nfunction write_Formula(cell/*:Cell*/, R/*:number*/, C/*:number*/, opts, os/*:number*/) {\n\t// Cell\n\tvar o1 = write_XLSCell(R, C, os);\n\n\t// FormulaValue\n\tvar o2 = write_FormulaValue(cell.v);\n\n\t// flags + cache\n\tvar o3 = new_buf(6);\n\tvar flags = 0x01 | 0x20;\n\to3.write_shift(2, flags);\n\to3.write_shift(4, 0);\n\n\t// CellParsedFormula\n\tvar bf = new_buf(cell.bf.length);\n\tfor(var i = 0; i < cell.bf.length; ++i) bf[i] = cell.bf[i];\n\n\tvar out = bconcat([o1, o2, o3, bf]);\n\treturn out;\n}\n\n\n/* XLSB Parsed Formula records have the same shape */\nfunction parse_XLSBParsedFormula(data, length, opts) {\n\tvar cce = data.read_shift(4);\n\tvar rgce = parse_Rgce(data, cce, opts);\n\tvar cb = data.read_shift(4);\n\tvar rgcb = cb > 0 ? parse_RgbExtra(data, cb, rgce, opts) : null;\n\treturn [rgce, rgcb];\n}\n\n/* [MS-XLSB] 2.5.97.1 ArrayParsedFormula */\nvar parse_XLSBArrayParsedFormula = parse_XLSBParsedFormula;\n/* [MS-XLSB] 2.5.97.4 CellParsedFormula */\nvar parse_XLSBCellParsedFormula = parse_XLSBParsedFormula;\n/* [MS-XLSB] 2.5.97.8 DVParsedFormula */\n//var parse_XLSBDVParsedFormula = parse_XLSBParsedFormula;\n/* [MS-XLSB] 2.5.97.9 FRTParsedFormula */\n//var parse_XLSBFRTParsedFormula = parse_XLSBParsedFormula2;\n/* [MS-XLSB] 2.5.97.12 NameParsedFormula */\nvar parse_XLSBNameParsedFormula = parse_XLSBParsedFormula;\n/* [MS-XLSB] 2.5.97.98 SharedParsedFormula */\nvar parse_XLSBSharedParsedFormula = parse_XLSBParsedFormula;\nvar Cetab = {\n  0: \"BEEP\",\n  1: \"OPEN\",\n  2: \"OPEN.LINKS\",\n  3: \"CLOSE.ALL\",\n  4: \"SAVE\",\n  5: \"SAVE.AS\",\n  6: \"FILE.DELETE\",\n  7: \"PAGE.SETUP\",\n  8: \"PRINT\",\n  9: \"PRINTER.SETUP\",\n  10: \"QUIT\",\n  11: \"NEW.WINDOW\",\n  12: \"ARRANGE.ALL\",\n  13: \"WINDOW.SIZE\",\n  14: \"WINDOW.MOVE\",\n  15: \"FULL\",\n  16: \"CLOSE\",\n  17: \"RUN\",\n  22: \"SET.PRINT.AREA\",\n  23: \"SET.PRINT.TITLES\",\n  24: \"SET.PAGE.BREAK\",\n  25: \"REMOVE.PAGE.BREAK\",\n  26: \"FONT\",\n  27: \"DISPLAY\",\n  28: \"PROTECT.DOCUMENT\",\n  29: \"PRECISION\",\n  30: \"A1.R1C1\",\n  31: \"CALCULATE.NOW\",\n  32: \"CALCULATION\",\n  34: \"DATA.FIND\",\n  35: \"EXTRACT\",\n  36: \"DATA.DELETE\",\n  37: \"SET.DATABASE\",\n  38: \"SET.CRITERIA\",\n  39: \"SORT\",\n  40: \"DATA.SERIES\",\n  41: \"TABLE\",\n  42: \"FORMAT.NUMBER\",\n  43: \"ALIGNMENT\",\n  44: \"STYLE\",\n  45: \"BORDER\",\n  46: \"CELL.PROTECTION\",\n  47: \"COLUMN.WIDTH\",\n  48: \"UNDO\",\n  49: \"CUT\",\n  50: \"COPY\",\n  51: \"PASTE\",\n  52: \"CLEAR\",\n  53: \"PASTE.SPECIAL\",\n  54: \"EDIT.DELETE\",\n  55: \"INSERT\",\n  56: \"FILL.RIGHT\",\n  57: \"FILL.DOWN\",\n  61: \"DEFINE.NAME\",\n  62: \"CREATE.NAMES\",\n  63: \"FORMULA.GOTO\",\n  64: \"FORMULA.FIND\",\n  65: \"SELECT.LAST.CELL\",\n  66: \"SHOW.ACTIVE.CELL\",\n  67: \"GALLERY.AREA\",\n  68: \"GALLERY.BAR\",\n  69: \"GALLERY.COLUMN\",\n  70: \"GALLERY.LINE\",\n  71: \"GALLERY.PIE\",\n  72: \"GALLERY.SCATTER\",\n  73: \"COMBINATION\",\n  74: \"PREFERRED\",\n  75: \"ADD.OVERLAY\",\n  76: \"GRIDLINES\",\n  77: \"SET.PREFERRED\",\n  78: \"AXES\",\n  79: \"LEGEND\",\n  80: \"ATTACH.TEXT\",\n  81: \"ADD.ARROW\",\n  82: \"SELECT.CHART\",\n  83: \"SELECT.PLOT.AREA\",\n  84: \"PATTERNS\",\n  85: \"MAIN.CHART\",\n  86: \"OVERLAY\",\n  87: \"SCALE\",\n  88: \"FORMAT.LEGEND\",\n  89: \"FORMAT.TEXT\",\n  90: \"EDIT.REPEAT\",\n  91: \"PARSE\",\n  92: \"JUSTIFY\",\n  93: \"HIDE\",\n  94: \"UNHIDE\",\n  95: \"WORKSPACE\",\n  96: \"FORMULA\",\n  97: \"FORMULA.FILL\",\n  98: \"FORMULA.ARRAY\",\n  99: \"DATA.FIND.NEXT\",\n  100: \"DATA.FIND.PREV\",\n  101: \"FORMULA.FIND.NEXT\",\n  102: \"FORMULA.FIND.PREV\",\n  103: \"ACTIVATE\",\n  104: \"ACTIVATE.NEXT\",\n  105: \"ACTIVATE.PREV\",\n  106: \"UNLOCKED.NEXT\",\n  107: \"UNLOCKED.PREV\",\n  108: \"COPY.PICTURE\",\n  109: \"SELECT\",\n  110: \"DELETE.NAME\",\n  111: \"DELETE.FORMAT\",\n  112: \"VLINE\",\n  113: \"HLINE\",\n  114: \"VPAGE\",\n  115: \"HPAGE\",\n  116: \"VSCROLL\",\n  117: \"HSCROLL\",\n  118: \"ALERT\",\n  119: \"NEW\",\n  120: \"CANCEL.COPY\",\n  121: \"SHOW.CLIPBOARD\",\n  122: \"MESSAGE\",\n  124: \"PASTE.LINK\",\n  125: \"APP.ACTIVATE\",\n  126: \"DELETE.ARROW\",\n  127: \"ROW.HEIGHT\",\n  128: \"FORMAT.MOVE\",\n  129: \"FORMAT.SIZE\",\n  130: \"FORMULA.REPLACE\",\n  131: \"SEND.KEYS\",\n  132: \"SELECT.SPECIAL\",\n  133: \"APPLY.NAMES\",\n  134: \"REPLACE.FONT\",\n  135: \"FREEZE.PANES\",\n  136: \"SHOW.INFO\",\n  137: \"SPLIT\",\n  138: \"ON.WINDOW\",\n  139: \"ON.DATA\",\n  140: \"DISABLE.INPUT\",\n  142: \"OUTLINE\",\n  143: \"LIST.NAMES\",\n  144: \"FILE.CLOSE\",\n  145: \"SAVE.WORKBOOK\",\n  146: \"DATA.FORM\",\n  147: \"COPY.CHART\",\n  148: \"ON.TIME\",\n  149: \"WAIT\",\n  150: \"FORMAT.FONT\",\n  151: \"FILL.UP\",\n  152: \"FILL.LEFT\",\n  153: \"DELETE.OVERLAY\",\n  155: \"SHORT.MENUS\",\n  159: \"SET.UPDATE.STATUS\",\n  161: \"COLOR.PALETTE\",\n  162: \"DELETE.STYLE\",\n  163: \"WINDOW.RESTORE\",\n  164: \"WINDOW.MAXIMIZE\",\n  166: \"CHANGE.LINK\",\n  167: \"CALCULATE.DOCUMENT\",\n  168: \"ON.KEY\",\n  169: \"APP.RESTORE\",\n  170: \"APP.MOVE\",\n  171: \"APP.SIZE\",\n  172: \"APP.MINIMIZE\",\n  173: \"APP.MAXIMIZE\",\n  174: \"BRING.TO.FRONT\",\n  175: \"SEND.TO.BACK\",\n  185: \"MAIN.CHART.TYPE\",\n  186: \"OVERLAY.CHART.TYPE\",\n  187: \"SELECT.END\",\n  188: \"OPEN.MAIL\",\n  189: \"SEND.MAIL\",\n  190: \"STANDARD.FONT\",\n  191: \"CONSOLIDATE\",\n  192: \"SORT.SPECIAL\",\n  193: \"GALLERY.3D.AREA\",\n  194: \"GALLERY.3D.COLUMN\",\n  195: \"GALLERY.3D.LINE\",\n  196: \"GALLERY.3D.PIE\",\n  197: \"VIEW.3D\",\n  198: \"GOAL.SEEK\",\n  199: \"WORKGROUP\",\n  200: \"FILL.GROUP\",\n  201: \"UPDATE.LINK\",\n  202: \"PROMOTE\",\n  203: \"DEMOTE\",\n  204: \"SHOW.DETAIL\",\n  206: \"UNGROUP\",\n  207: \"OBJECT.PROPERTIES\",\n  208: \"SAVE.NEW.OBJECT\",\n  209: \"SHARE\",\n  210: \"SHARE.NAME\",\n  211: \"DUPLICATE\",\n  212: \"APPLY.STYLE\",\n  213: \"ASSIGN.TO.OBJECT\",\n  214: \"OBJECT.PROTECTION\",\n  215: \"HIDE.OBJECT\",\n  216: \"SET.EXTRACT\",\n  217: \"CREATE.PUBLISHER\",\n  218: \"SUBSCRIBE.TO\",\n  219: \"ATTRIBUTES\",\n  220: \"SHOW.TOOLBAR\",\n  222: \"PRINT.PREVIEW\",\n  223: \"EDIT.COLOR\",\n  224: \"SHOW.LEVELS\",\n  225: \"FORMAT.MAIN\",\n  226: \"FORMAT.OVERLAY\",\n  227: \"ON.RECALC\",\n  228: \"EDIT.SERIES\",\n  229: \"DEFINE.STYLE\",\n  240: \"LINE.PRINT\",\n  243: \"ENTER.DATA\",\n  249: \"GALLERY.RADAR\",\n  250: \"MERGE.STYLES\",\n  251: \"EDITION.OPTIONS\",\n  252: \"PASTE.PICTURE\",\n  253: \"PASTE.PICTURE.LINK\",\n  254: \"SPELLING\",\n  256: \"ZOOM\",\n  259: \"INSERT.OBJECT\",\n  260: \"WINDOW.MINIMIZE\",\n  265: \"SOUND.NOTE\",\n  266: \"SOUND.PLAY\",\n  267: \"FORMAT.SHAPE\",\n  268: \"EXTEND.POLYGON\",\n  269: \"FORMAT.AUTO\",\n  272: \"GALLERY.3D.BAR\",\n  273: \"GALLERY.3D.SURFACE\",\n  274: \"FILL.AUTO\",\n  276: \"CUSTOMIZE.TOOLBAR\",\n  277: \"ADD.TOOL\",\n  278: \"EDIT.OBJECT\",\n  279: \"ON.DOUBLECLICK\",\n  280: \"ON.ENTRY\",\n  281: \"WORKBOOK.ADD\",\n  282: \"WORKBOOK.MOVE\",\n  283: \"WORKBOOK.COPY\",\n  284: \"WORKBOOK.OPTIONS\",\n  285: \"SAVE.WORKSPACE\",\n  288: \"CHART.WIZARD\",\n  289: \"DELETE.TOOL\",\n  290: \"MOVE.TOOL\",\n  291: \"WORKBOOK.SELECT\",\n  292: \"WORKBOOK.ACTIVATE\",\n  293: \"ASSIGN.TO.TOOL\",\n  295: \"COPY.TOOL\",\n  296: \"RESET.TOOL\",\n  297: \"CONSTRAIN.NUMERIC\",\n  298: \"PASTE.TOOL\",\n  302: \"WORKBOOK.NEW\",\n  305: \"SCENARIO.CELLS\",\n  306: \"SCENARIO.DELETE\",\n  307: \"SCENARIO.ADD\",\n  308: \"SCENARIO.EDIT\",\n  309: \"SCENARIO.SHOW\",\n  310: \"SCENARIO.SHOW.NEXT\",\n  311: \"SCENARIO.SUMMARY\",\n  312: \"PIVOT.TABLE.WIZARD\",\n  313: \"PIVOT.FIELD.PROPERTIES\",\n  314: \"PIVOT.FIELD\",\n  315: \"PIVOT.ITEM\",\n  316: \"PIVOT.ADD.FIELDS\",\n  318: \"OPTIONS.CALCULATION\",\n  319: \"OPTIONS.EDIT\",\n  320: \"OPTIONS.VIEW\",\n  321: \"ADDIN.MANAGER\",\n  322: \"MENU.EDITOR\",\n  323: \"ATTACH.TOOLBARS\",\n  324: \"VBAActivate\",\n  325: \"OPTIONS.CHART\",\n  328: \"VBA.INSERT.FILE\",\n  330: \"VBA.PROCEDURE.DEFINITION\",\n  336: \"ROUTING.SLIP\",\n  338: \"ROUTE.DOCUMENT\",\n  339: \"MAIL.LOGON\",\n  342: \"INSERT.PICTURE\",\n  343: \"EDIT.TOOL\",\n  344: \"GALLERY.DOUGHNUT\",\n  350: \"CHART.TREND\",\n  352: \"PIVOT.ITEM.PROPERTIES\",\n  354: \"WORKBOOK.INSERT\",\n  355: \"OPTIONS.TRANSITION\",\n  356: \"OPTIONS.GENERAL\",\n  370: \"FILTER.ADVANCED\",\n  373: \"MAIL.ADD.MAILER\",\n  374: \"MAIL.DELETE.MAILER\",\n  375: \"MAIL.REPLY\",\n  376: \"MAIL.REPLY.ALL\",\n  377: \"MAIL.FORWARD\",\n  378: \"MAIL.NEXT.LETTER\",\n  379: \"DATA.LABEL\",\n  380: \"INSERT.TITLE\",\n  381: \"FONT.PROPERTIES\",\n  382: \"MACRO.OPTIONS\",\n  383: \"WORKBOOK.HIDE\",\n  384: \"WORKBOOK.UNHIDE\",\n  385: \"WORKBOOK.DELETE\",\n  386: \"WORKBOOK.NAME\",\n  388: \"GALLERY.CUSTOM\",\n  390: \"ADD.CHART.AUTOFORMAT\",\n  391: \"DELETE.CHART.AUTOFORMAT\",\n  392: \"CHART.ADD.DATA\",\n  393: \"AUTO.OUTLINE\",\n  394: \"TAB.ORDER\",\n  395: \"SHOW.DIALOG\",\n  396: \"SELECT.ALL\",\n  397: \"UNGROUP.SHEETS\",\n  398: \"SUBTOTAL.CREATE\",\n  399: \"SUBTOTAL.REMOVE\",\n  400: \"RENAME.OBJECT\",\n  412: \"WORKBOOK.SCROLL\",\n  413: \"WORKBOOK.NEXT\",\n  414: \"WORKBOOK.PREV\",\n  415: \"WORKBOOK.TAB.SPLIT\",\n  416: \"FULL.SCREEN\",\n  417: \"WORKBOOK.PROTECT\",\n  420: \"SCROLLBAR.PROPERTIES\",\n  421: \"PIVOT.SHOW.PAGES\",\n  422: \"TEXT.TO.COLUMNS\",\n  423: \"FORMAT.CHARTTYPE\",\n  424: \"LINK.FORMAT\",\n  425: \"TRACER.DISPLAY\",\n  430: \"TRACER.NAVIGATE\",\n  431: \"TRACER.CLEAR\",\n  432: \"TRACER.ERROR\",\n  433: \"PIVOT.FIELD.GROUP\",\n  434: \"PIVOT.FIELD.UNGROUP\",\n  435: \"CHECKBOX.PROPERTIES\",\n  436: \"LABEL.PROPERTIES\",\n  437: \"LISTBOX.PROPERTIES\",\n  438: \"EDITBOX.PROPERTIES\",\n  439: \"PIVOT.REFRESH\",\n  440: \"LINK.COMBO\",\n  441: \"OPEN.TEXT\",\n  442: \"HIDE.DIALOG\",\n  443: \"SET.DIALOG.FOCUS\",\n  444: \"ENABLE.OBJECT\",\n  445: \"PUSHBUTTON.PROPERTIES\",\n  446: \"SET.DIALOG.DEFAULT\",\n  447: \"FILTER\",\n  448: \"FILTER.SHOW.ALL\",\n  449: \"CLEAR.OUTLINE\",\n  450: \"FUNCTION.WIZARD\",\n  451: \"ADD.LIST.ITEM\",\n  452: \"SET.LIST.ITEM\",\n  453: \"REMOVE.LIST.ITEM\",\n  454: \"SELECT.LIST.ITEM\",\n  455: \"SET.CONTROL.VALUE\",\n  456: \"SAVE.COPY.AS\",\n  458: \"OPTIONS.LISTS.ADD\",\n  459: \"OPTIONS.LISTS.DELETE\",\n  460: \"SERIES.AXES\",\n  461: \"SERIES.X\",\n  462: \"SERIES.Y\",\n  463: \"ERRORBAR.X\",\n  464: \"ERRORBAR.Y\",\n  465: \"FORMAT.CHART\",\n  466: \"SERIES.ORDER\",\n  467: \"MAIL.LOGOFF\",\n  468: \"CLEAR.ROUTING.SLIP\",\n  469: \"APP.ACTIVATE.MICROSOFT\",\n  470: \"MAIL.EDIT.MAILER\",\n  471: \"ON.SHEET\",\n  472: \"STANDARD.WIDTH\",\n  473: \"SCENARIO.MERGE\",\n  474: \"SUMMARY.INFO\",\n  475: \"FIND.FILE\",\n  476: \"ACTIVE.CELL.FONT\",\n  477: \"ENABLE.TIPWIZARD\",\n  478: \"VBA.MAKE.ADDIN\",\n  480: \"INSERTDATATABLE\",\n  481: \"WORKGROUP.OPTIONS\",\n  482: \"MAIL.SEND.MAILER\",\n  485: \"AUTOCORRECT\",\n  489: \"POST.DOCUMENT\",\n  491: \"PICKLIST\",\n  493: \"VIEW.SHOW\",\n  494: \"VIEW.DEFINE\",\n  495: \"VIEW.DELETE\",\n  509: \"SHEET.BACKGROUND\",\n  510: \"INSERT.MAP.OBJECT\",\n  511: \"OPTIONS.MENONO\",\n  517: \"MSOCHECKS\",\n  518: \"NORMAL\",\n  519: \"LAYOUT\",\n  520: \"RM.PRINT.AREA\",\n  521: \"CLEAR.PRINT.AREA\",\n  522: \"ADD.PRINT.AREA\",\n  523: \"MOVE.BRK\",\n  545: \"HIDECURR.NOTE\",\n  546: \"HIDEALL.NOTES\",\n  547: \"DELETE.NOTE\",\n  548: \"TRAVERSE.NOTES\",\n  549: \"ACTIVATE.NOTES\",\n  620: \"PROTECT.REVISIONS\",\n  621: \"UNPROTECT.REVISIONS\",\n  647: \"OPTIONS.ME\",\n  653: \"WEB.PUBLISH\",\n  667: \"NEWWEBQUERY\",\n  673: \"PIVOT.TABLE.CHART\",\n  753: \"OPTIONS.SAVE\",\n  755: \"OPTIONS.SPELL\",\n  808: \"HIDEALL.INKANNOTS\"\n};\nvar Ftab = {\n  0: \"COUNT\",\n  1: \"IF\",\n  2: \"ISNA\",\n  3: \"ISERROR\",\n  4: \"SUM\",\n  5: \"AVERAGE\",\n  6: \"MIN\",\n  7: \"MAX\",\n  8: \"ROW\",\n  9: \"COLUMN\",\n  10: \"NA\",\n  11: \"NPV\",\n  12: \"STDEV\",\n  13: \"DOLLAR\",\n  14: \"FIXED\",\n  15: \"SIN\",\n  16: \"COS\",\n  17: \"TAN\",\n  18: \"ATAN\",\n  19: \"PI\",\n  20: \"SQRT\",\n  21: \"EXP\",\n  22: \"LN\",\n  23: \"LOG10\",\n  24: \"ABS\",\n  25: \"INT\",\n  26: \"SIGN\",\n  27: \"ROUND\",\n  28: \"LOOKUP\",\n  29: \"INDEX\",\n  30: \"REPT\",\n  31: \"MID\",\n  32: \"LEN\",\n  33: \"VALUE\",\n  34: \"TRUE\",\n  35: \"FALSE\",\n  36: \"AND\",\n  37: \"OR\",\n  38: \"NOT\",\n  39: \"MOD\",\n  40: \"DCOUNT\",\n  41: \"DSUM\",\n  42: \"DAVERAGE\",\n  43: \"DMIN\",\n  44: \"DMAX\",\n  45: \"DSTDEV\",\n  46: \"VAR\",\n  47: \"DVAR\",\n  48: \"TEXT\",\n  49: \"LINEST\",\n  50: \"TREND\",\n  51: \"LOGEST\",\n  52: \"GROWTH\",\n  53: \"GOTO\",\n  54: \"HALT\",\n  55: \"RETURN\",\n  56: \"PV\",\n  57: \"FV\",\n  58: \"NPER\",\n  59: \"PMT\",\n  60: \"RATE\",\n  61: \"MIRR\",\n  62: \"IRR\",\n  63: \"RAND\",\n  64: \"MATCH\",\n  65: \"DATE\",\n  66: \"TIME\",\n  67: \"DAY\",\n  68: \"MONTH\",\n  69: \"YEAR\",\n  70: \"WEEKDAY\",\n  71: \"HOUR\",\n  72: \"MINUTE\",\n  73: \"SECOND\",\n  74: \"NOW\",\n  75: \"AREAS\",\n  76: \"ROWS\",\n  77: \"COLUMNS\",\n  78: \"OFFSET\",\n  79: \"ABSREF\",\n  80: \"RELREF\",\n  81: \"ARGUMENT\",\n  82: \"SEARCH\",\n  83: \"TRANSPOSE\",\n  84: \"ERROR\",\n  85: \"STEP\",\n  86: \"TYPE\",\n  87: \"ECHO\",\n  88: \"SET.NAME\",\n  89: \"CALLER\",\n  90: \"DEREF\",\n  91: \"WINDOWS\",\n  92: \"SERIES\",\n  93: \"DOCUMENTS\",\n  94: \"ACTIVE.CELL\",\n  95: \"SELECTION\",\n  96: \"RESULT\",\n  97: \"ATAN2\",\n  98: \"ASIN\",\n  99: \"ACOS\",\n  100: \"CHOOSE\",\n  101: \"HLOOKUP\",\n  102: \"VLOOKUP\",\n  103: \"LINKS\",\n  104: \"INPUT\",\n  105: \"ISREF\",\n  106: \"GET.FORMULA\",\n  107: \"GET.NAME\",\n  108: \"SET.VALUE\",\n  109: \"LOG\",\n  110: \"EXEC\",\n  111: \"CHAR\",\n  112: \"LOWER\",\n  113: \"UPPER\",\n  114: \"PROPER\",\n  115: \"LEFT\",\n  116: \"RIGHT\",\n  117: \"EXACT\",\n  118: \"TRIM\",\n  119: \"REPLACE\",\n  120: \"SUBSTITUTE\",\n  121: \"CODE\",\n  122: \"NAMES\",\n  123: \"DIRECTORY\",\n  124: \"FIND\",\n  125: \"CELL\",\n  126: \"ISERR\",\n  127: \"ISTEXT\",\n  128: \"ISNUMBER\",\n  129: \"ISBLANK\",\n  130: \"T\",\n  131: \"N\",\n  132: \"FOPEN\",\n  133: \"FCLOSE\",\n  134: \"FSIZE\",\n  135: \"FREADLN\",\n  136: \"FREAD\",\n  137: \"FWRITELN\",\n  138: \"FWRITE\",\n  139: \"FPOS\",\n  140: \"DATEVALUE\",\n  141: \"TIMEVALUE\",\n  142: \"SLN\",\n  143: \"SYD\",\n  144: \"DDB\",\n  145: \"GET.DEF\",\n  146: \"REFTEXT\",\n  147: \"TEXTREF\",\n  148: \"INDIRECT\",\n  149: \"REGISTER\",\n  150: \"CALL\",\n  151: \"ADD.BAR\",\n  152: \"ADD.MENU\",\n  153: \"ADD.COMMAND\",\n  154: \"ENABLE.COMMAND\",\n  155: \"CHECK.COMMAND\",\n  156: \"RENAME.COMMAND\",\n  157: \"SHOW.BAR\",\n  158: \"DELETE.MENU\",\n  159: \"DELETE.COMMAND\",\n  160: \"GET.CHART.ITEM\",\n  161: \"DIALOG.BOX\",\n  162: \"CLEAN\",\n  163: \"MDETERM\",\n  164: \"MINVERSE\",\n  165: \"MMULT\",\n  166: \"FILES\",\n  167: \"IPMT\",\n  168: \"PPMT\",\n  169: \"COUNTA\",\n  170: \"CANCEL.KEY\",\n  171: \"FOR\",\n  172: \"WHILE\",\n  173: \"BREAK\",\n  174: \"NEXT\",\n  175: \"INITIATE\",\n  176: \"REQUEST\",\n  177: \"POKE\",\n  178: \"EXECUTE\",\n  179: \"TERMINATE\",\n  180: \"RESTART\",\n  181: \"HELP\",\n  182: \"GET.BAR\",\n  183: \"PRODUCT\",\n  184: \"FACT\",\n  185: \"GET.CELL\",\n  186: \"GET.WORKSPACE\",\n  187: \"GET.WINDOW\",\n  188: \"GET.DOCUMENT\",\n  189: \"DPRODUCT\",\n  190: \"ISNONTEXT\",\n  191: \"GET.NOTE\",\n  192: \"NOTE\",\n  193: \"STDEVP\",\n  194: \"VARP\",\n  195: \"DSTDEVP\",\n  196: \"DVARP\",\n  197: \"TRUNC\",\n  198: \"ISLOGICAL\",\n  199: \"DCOUNTA\",\n  200: \"DELETE.BAR\",\n  201: \"UNREGISTER\",\n  204: \"USDOLLAR\",\n  205: \"FINDB\",\n  206: \"SEARCHB\",\n  207: \"REPLACEB\",\n  208: \"LEFTB\",\n  209: \"RIGHTB\",\n  210: \"MIDB\",\n  211: \"LENB\",\n  212: \"ROUNDUP\",\n  213: \"ROUNDDOWN\",\n  214: \"ASC\",\n  215: \"DBCS\",\n  216: \"RANK\",\n  219: \"ADDRESS\",\n  220: \"DAYS360\",\n  221: \"TODAY\",\n  222: \"VDB\",\n  223: \"ELSE\",\n  224: \"ELSE.IF\",\n  225: \"END.IF\",\n  226: \"FOR.CELL\",\n  227: \"MEDIAN\",\n  228: \"SUMPRODUCT\",\n  229: \"SINH\",\n  230: \"COSH\",\n  231: \"TANH\",\n  232: \"ASINH\",\n  233: \"ACOSH\",\n  234: \"ATANH\",\n  235: \"DGET\",\n  236: \"CREATE.OBJECT\",\n  237: \"VOLATILE\",\n  238: \"LAST.ERROR\",\n  239: \"CUSTOM.UNDO\",\n  240: \"CUSTOM.REPEAT\",\n  241: \"FORMULA.CONVERT\",\n  242: \"GET.LINK.INFO\",\n  243: \"TEXT.BOX\",\n  244: \"INFO\",\n  245: \"GROUP\",\n  246: \"GET.OBJECT\",\n  247: \"DB\",\n  248: \"PAUSE\",\n  251: \"RESUME\",\n  252: \"FREQUENCY\",\n  253: \"ADD.TOOLBAR\",\n  254: \"DELETE.TOOLBAR\",\n  255: \"User\",\n  256: \"RESET.TOOLBAR\",\n  257: \"EVALUATE\",\n  258: \"GET.TOOLBAR\",\n  259: \"GET.TOOL\",\n  260: \"SPELLING.CHECK\",\n  261: \"ERROR.TYPE\",\n  262: \"APP.TITLE\",\n  263: \"WINDOW.TITLE\",\n  264: \"SAVE.TOOLBAR\",\n  265: \"ENABLE.TOOL\",\n  266: \"PRESS.TOOL\",\n  267: \"REGISTER.ID\",\n  268: \"GET.WORKBOOK\",\n  269: \"AVEDEV\",\n  270: \"BETADIST\",\n  271: \"GAMMALN\",\n  272: \"BETAINV\",\n  273: \"BINOMDIST\",\n  274: \"CHIDIST\",\n  275: \"CHIINV\",\n  276: \"COMBIN\",\n  277: \"CONFIDENCE\",\n  278: \"CRITBINOM\",\n  279: \"EVEN\",\n  280: \"EXPONDIST\",\n  281: \"FDIST\",\n  282: \"FINV\",\n  283: \"FISHER\",\n  284: \"FISHERINV\",\n  285: \"FLOOR\",\n  286: \"GAMMADIST\",\n  287: \"GAMMAINV\",\n  288: \"CEILING\",\n  289: \"HYPGEOMDIST\",\n  290: \"LOGNORMDIST\",\n  291: \"LOGINV\",\n  292: \"NEGBINOMDIST\",\n  293: \"NORMDIST\",\n  294: \"NORMSDIST\",\n  295: \"NORMINV\",\n  296: \"NORMSINV\",\n  297: \"STANDARDIZE\",\n  298: \"ODD\",\n  299: \"PERMUT\",\n  300: \"POISSON\",\n  301: \"TDIST\",\n  302: \"WEIBULL\",\n  303: \"SUMXMY2\",\n  304: \"SUMX2MY2\",\n  305: \"SUMX2PY2\",\n  306: \"CHITEST\",\n  307: \"CORREL\",\n  308: \"COVAR\",\n  309: \"FORECAST\",\n  310: \"FTEST\",\n  311: \"INTERCEPT\",\n  312: \"PEARSON\",\n  313: \"RSQ\",\n  314: \"STEYX\",\n  315: \"SLOPE\",\n  316: \"TTEST\",\n  317: \"PROB\",\n  318: \"DEVSQ\",\n  319: \"GEOMEAN\",\n  320: \"HARMEAN\",\n  321: \"SUMSQ\",\n  322: \"KURT\",\n  323: \"SKEW\",\n  324: \"ZTEST\",\n  325: \"LARGE\",\n  326: \"SMALL\",\n  327: \"QUARTILE\",\n  328: \"PERCENTILE\",\n  329: \"PERCENTRANK\",\n  330: \"MODE\",\n  331: \"TRIMMEAN\",\n  332: \"TINV\",\n  334: \"MOVIE.COMMAND\",\n  335: \"GET.MOVIE\",\n  336: \"CONCATENATE\",\n  337: \"POWER\",\n  338: \"PIVOT.ADD.DATA\",\n  339: \"GET.PIVOT.TABLE\",\n  340: \"GET.PIVOT.FIELD\",\n  341: \"GET.PIVOT.ITEM\",\n  342: \"RADIANS\",\n  343: \"DEGREES\",\n  344: \"SUBTOTAL\",\n  345: \"SUMIF\",\n  346: \"COUNTIF\",\n  347: \"COUNTBLANK\",\n  348: \"SCENARIO.GET\",\n  349: \"OPTIONS.LISTS.GET\",\n  350: \"ISPMT\",\n  351: \"DATEDIF\",\n  352: \"DATESTRING\",\n  353: \"NUMBERSTRING\",\n  354: \"ROMAN\",\n  355: \"OPEN.DIALOG\",\n  356: \"SAVE.DIALOG\",\n  357: \"VIEW.GET\",\n  358: \"GETPIVOTDATA\",\n  359: \"HYPERLINK\",\n  360: \"PHONETIC\",\n  361: \"AVERAGEA\",\n  362: \"MAXA\",\n  363: \"MINA\",\n  364: \"STDEVPA\",\n  365: \"VARPA\",\n  366: \"STDEVA\",\n  367: \"VARA\",\n  368: \"BAHTTEXT\",\n  369: \"THAIDAYOFWEEK\",\n  370: \"THAIDIGIT\",\n  371: \"THAIMONTHOFYEAR\",\n  372: \"THAINUMSOUND\",\n  373: \"THAINUMSTRING\",\n  374: \"THAISTRINGLENGTH\",\n  375: \"ISTHAIDIGIT\",\n  376: \"ROUNDBAHTDOWN\",\n  377: \"ROUNDBAHTUP\",\n  378: \"THAIYEAR\",\n  379: \"RTD\",\n  380: \"CUBEVALUE\",\n  381: \"CUBEMEMBER\",\n  382: \"CUBEMEMBERPROPERTY\",\n  383: \"CUBERANKEDMEMBER\",\n  384: \"HEX2BIN\",\n  385: \"HEX2DEC\",\n  386: \"HEX2OCT\",\n  387: \"DEC2BIN\",\n  388: \"DEC2HEX\",\n  389: \"DEC2OCT\",\n  390: \"OCT2BIN\",\n  391: \"OCT2HEX\",\n  392: \"OCT2DEC\",\n  393: \"BIN2DEC\",\n  394: \"BIN2OCT\",\n  395: \"BIN2HEX\",\n  396: \"IMSUB\",\n  397: \"IMDIV\",\n  398: \"IMPOWER\",\n  399: \"IMABS\",\n  400: \"IMSQRT\",\n  401: \"IMLN\",\n  402: \"IMLOG2\",\n  403: \"IMLOG10\",\n  404: \"IMSIN\",\n  405: \"IMCOS\",\n  406: \"IMEXP\",\n  407: \"IMARGUMENT\",\n  408: \"IMCONJUGATE\",\n  409: \"IMAGINARY\",\n  410: \"IMREAL\",\n  411: \"COMPLEX\",\n  412: \"IMSUM\",\n  413: \"IMPRODUCT\",\n  414: \"SERIESSUM\",\n  415: \"FACTDOUBLE\",\n  416: \"SQRTPI\",\n  417: \"QUOTIENT\",\n  418: \"DELTA\",\n  419: \"GESTEP\",\n  420: \"ISEVEN\",\n  421: \"ISODD\",\n  422: \"MROUND\",\n  423: \"ERF\",\n  424: \"ERFC\",\n  425: \"BESSELJ\",\n  426: \"BESSELK\",\n  427: \"BESSELY\",\n  428: \"BESSELI\",\n  429: \"XIRR\",\n  430: \"XNPV\",\n  431: \"PRICEMAT\",\n  432: \"YIELDMAT\",\n  433: \"INTRATE\",\n  434: \"RECEIVED\",\n  435: \"DISC\",\n  436: \"PRICEDISC\",\n  437: \"YIELDDISC\",\n  438: \"TBILLEQ\",\n  439: \"TBILLPRICE\",\n  440: \"TBILLYIELD\",\n  441: \"PRICE\",\n  442: \"YIELD\",\n  443: \"DOLLARDE\",\n  444: \"DOLLARFR\",\n  445: \"NOMINAL\",\n  446: \"EFFECT\",\n  447: \"CUMPRINC\",\n  448: \"CUMIPMT\",\n  449: \"EDATE\",\n  450: \"EOMONTH\",\n  451: \"YEARFRAC\",\n  452: \"COUPDAYBS\",\n  453: \"COUPDAYS\",\n  454: \"COUPDAYSNC\",\n  455: \"COUPNCD\",\n  456: \"COUPNUM\",\n  457: \"COUPPCD\",\n  458: \"DURATION\",\n  459: \"MDURATION\",\n  460: \"ODDLPRICE\",\n  461: \"ODDLYIELD\",\n  462: \"ODDFPRICE\",\n  463: \"ODDFYIELD\",\n  464: \"RANDBETWEEN\",\n  465: \"WEEKNUM\",\n  466: \"AMORDEGRC\",\n  467: \"AMORLINC\",\n  468: \"CONVERT\",\n  724: \"SHEETJS\",\n  469: \"ACCRINT\",\n  470: \"ACCRINTM\",\n  471: \"WORKDAY\",\n  472: \"NETWORKDAYS\",\n  473: \"GCD\",\n  474: \"MULTINOMIAL\",\n  475: \"LCM\",\n  476: \"FVSCHEDULE\",\n  477: \"CUBEKPIMEMBER\",\n  478: \"CUBESET\",\n  479: \"CUBESETCOUNT\",\n  480: \"IFERROR\",\n  481: \"COUNTIFS\",\n  482: \"SUMIFS\",\n  483: \"AVERAGEIF\",\n  484: \"AVERAGEIFS\"\n};\nvar FtabArgc = {\n  2: 1,\n  3: 1,\n  10: 0,\n  15: 1,\n  16: 1,\n  17: 1,\n  18: 1,\n  19: 0,\n  20: 1,\n  21: 1,\n  22: 1,\n  23: 1,\n  24: 1,\n  25: 1,\n  26: 1,\n  27: 2,\n  30: 2,\n  31: 3,\n  32: 1,\n  33: 1,\n  34: 0,\n  35: 0,\n  38: 1,\n  39: 2,\n  40: 3,\n  41: 3,\n  42: 3,\n  43: 3,\n  44: 3,\n  45: 3,\n  47: 3,\n  48: 2,\n  53: 1,\n  61: 3,\n  63: 0,\n  65: 3,\n  66: 3,\n  67: 1,\n  68: 1,\n  69: 1,\n  70: 1,\n  71: 1,\n  72: 1,\n  73: 1,\n  74: 0,\n  75: 1,\n  76: 1,\n  77: 1,\n  79: 2,\n  80: 2,\n  83: 1,\n  85: 0,\n  86: 1,\n  89: 0,\n  90: 1,\n  94: 0,\n  95: 0,\n  97: 2,\n  98: 1,\n  99: 1,\n  101: 3,\n  102: 3,\n  105: 1,\n  106: 1,\n  108: 2,\n  111: 1,\n  112: 1,\n  113: 1,\n  114: 1,\n  117: 2,\n  118: 1,\n  119: 4,\n  121: 1,\n  126: 1,\n  127: 1,\n  128: 1,\n  129: 1,\n  130: 1,\n  131: 1,\n  133: 1,\n  134: 1,\n  135: 1,\n  136: 2,\n  137: 2,\n  138: 2,\n  140: 1,\n  141: 1,\n  142: 3,\n  143: 4,\n  144: 4,\n  161: 1,\n  162: 1,\n  163: 1,\n  164: 1,\n  165: 2,\n  172: 1,\n  175: 2,\n  176: 2,\n  177: 3,\n  178: 2,\n  179: 1,\n  184: 1,\n  186: 1,\n  189: 3,\n  190: 1,\n  195: 3,\n  196: 3,\n  197: 1,\n  198: 1,\n  199: 3,\n  201: 1,\n  207: 4,\n  210: 3,\n  211: 1,\n  212: 2,\n  213: 2,\n  214: 1,\n  215: 1,\n  225: 0,\n  229: 1,\n  230: 1,\n  231: 1,\n  232: 1,\n  233: 1,\n  234: 1,\n  235: 3,\n  244: 1,\n  247: 4,\n  252: 2,\n  257: 1,\n  261: 1,\n  271: 1,\n  273: 4,\n  274: 2,\n  275: 2,\n  276: 2,\n  277: 3,\n  278: 3,\n  279: 1,\n  280: 3,\n  281: 3,\n  282: 3,\n  283: 1,\n  284: 1,\n  285: 2,\n  286: 4,\n  287: 3,\n  288: 2,\n  289: 4,\n  290: 3,\n  291: 3,\n  292: 3,\n  293: 4,\n  294: 1,\n  295: 3,\n  296: 1,\n  297: 3,\n  298: 1,\n  299: 2,\n  300: 3,\n  301: 3,\n  302: 4,\n  303: 2,\n  304: 2,\n  305: 2,\n  306: 2,\n  307: 2,\n  308: 2,\n  309: 3,\n  310: 2,\n  311: 2,\n  312: 2,\n  313: 2,\n  314: 2,\n  315: 2,\n  316: 4,\n  325: 2,\n  326: 2,\n  327: 2,\n  328: 2,\n  331: 2,\n  332: 2,\n  337: 2,\n  342: 1,\n  343: 1,\n  346: 2,\n  347: 1,\n  350: 4,\n  351: 3,\n  352: 1,\n  353: 2,\n  360: 1,\n  368: 1,\n  369: 1,\n  370: 1,\n  371: 1,\n  372: 1,\n  373: 1,\n  374: 1,\n  375: 1,\n  376: 1,\n  377: 1,\n  378: 1,\n  382: 3,\n  385: 1,\n  392: 1,\n  393: 1,\n  396: 2,\n  397: 2,\n  398: 2,\n  399: 1,\n  400: 1,\n  401: 1,\n  402: 1,\n  403: 1,\n  404: 1,\n  405: 1,\n  406: 1,\n  407: 1,\n  408: 1,\n  409: 1,\n  410: 1,\n  414: 4,\n  415: 1,\n  416: 1,\n  417: 2,\n  420: 1,\n  421: 1,\n  422: 2,\n  424: 1,\n  425: 2,\n  426: 2,\n  427: 2,\n  428: 2,\n  430: 3,\n  438: 3,\n  439: 3,\n  440: 3,\n  443: 2,\n  444: 2,\n  445: 2,\n  446: 2,\n  447: 6,\n  448: 6,\n  449: 2,\n  450: 2,\n  464: 2,\n  468: 3,\n  476: 2,\n  479: 1,\n  480: 2,\n  65535: 0\n};\n/* Part 3 TODO: actually parse formulae */\nfunction ods_to_csf_formula(f/*:string*/)/*:string*/ {\n\tif(f.slice(0,3) == \"of:\") f = f.slice(3);\n\t/* 5.2 Basic Expressions */\n\tif(f.charCodeAt(0) == 61) {\n\t\tf = f.slice(1);\n\t\tif(f.charCodeAt(0) == 61) f = f.slice(1);\n\t}\n\tf = f.replace(/COM\\.MICROSOFT\\./g, \"\");\n\t/* Part 3 Section 5.8 References */\n\tf = f.replace(/\\[((?:\\.[A-Z]+[0-9]+)(?::\\.[A-Z]+[0-9]+)?)\\]/g, function($$, $1) { return $1.replace(/\\./g,\"\"); });\n\t/* TODO: something other than this */\n\tf = f.replace(/\\[.(#[A-Z]*[?!])\\]/g, \"$1\");\n\treturn f.replace(/[;~]/g,\",\").replace(/\\|/g,\";\");\n}\n\nfunction csf_to_ods_formula(f/*:string*/)/*:string*/ {\n\tvar o = \"of:=\" + f.replace(crefregex, \"$1[.$2$3$4$5]\").replace(/\\]:\\[/g,\":\");\n\t/* TODO: something other than this */\n\treturn o.replace(/;/g, \"|\").replace(/,/g,\";\");\n}\n\nfunction ods_to_csf_3D(r/*:string*/)/*:[string, string]*/ {\n\tvar a = r.split(\":\");\n\tvar s = a[0].split(\".\")[0];\n\treturn [s, a[0].split(\".\")[1] + (a.length > 1 ? (\":\" + (a[1].split(\".\")[1] || a[1].split(\".\")[0])) : \"\")];\n}\n\nfunction csf_to_ods_3D(r/*:string*/)/*:string*/ {\n\treturn r.replace(/\\./,\"!\");\n}\n\nvar strs = {}; // shared strings\nvar _ssfopts = {}; // spreadsheet formatting options\n\n\n/*global Map */\nvar browser_has_Map = typeof Map !== 'undefined';\n\nfunction get_sst_id(sst/*:SST*/, str/*:string*/, rev)/*:number*/ {\n\tvar i = 0, len = sst.length;\n\tif(rev) {\n\t\tif(browser_has_Map ? rev.has(str) : Object.prototype.hasOwnProperty.call(rev, str)) {\n\t\t\tvar revarr = browser_has_Map ? rev.get(str) : rev[str];\n\t\t\tfor(; i < revarr.length; ++i) {\n\t\t\t\tif(sst[revarr[i]].t === str) { sst.Count ++; return revarr[i]; }\n\t\t\t}\n\t\t}\n\t} else for(; i < len; ++i) {\n\t\tif(sst[i].t === str) { sst.Count ++; return i; }\n\t}\n\tsst[len] = ({t:str}/*:any*/); sst.Count ++; sst.Unique ++;\n\tif(rev) {\n\t\tif(browser_has_Map) {\n\t\t\tif(!rev.has(str)) rev.set(str, []);\n\t\t\trev.get(str).push(len);\n\t\t} else {\n\t\t\tif(!Object.prototype.hasOwnProperty.call(rev, str)) rev[str] = [];\n\t\t\trev[str].push(len);\n\t\t}\n\t}\n\treturn len;\n}\n\nfunction col_obj_w(C/*:number*/, col) {\n\tvar p = ({min:C+1,max:C+1}/*:any*/);\n\t/* wch (chars), wpx (pixels) */\n\tvar wch = -1;\n\tif(col.MDW) MDW = col.MDW;\n\tif(col.width != null) p.customWidth = 1;\n\telse if(col.wpx != null) wch = px2char(col.wpx);\n\telse if(col.wch != null) wch = col.wch;\n\tif(wch > -1) { p.width = char2width(wch); p.customWidth = 1; }\n\telse if(col.width != null) p.width = col.width;\n\tif(col.hidden) p.hidden = true;\n\tif(col.level != null) { p.outlineLevel = p.level = col.level; }\n\treturn p;\n}\n\nfunction default_margins(margins/*:Margins*/, mode/*:?string*/) {\n\tif(!margins) return;\n\tvar defs = [0.7, 0.7, 0.75, 0.75, 0.3, 0.3];\n\tif(mode == 'xlml') defs = [1, 1, 1, 1, 0.5, 0.5];\n\tif(margins.left   == null) margins.left   = defs[0];\n\tif(margins.right  == null) margins.right  = defs[1];\n\tif(margins.top    == null) margins.top    = defs[2];\n\tif(margins.bottom == null) margins.bottom = defs[3];\n\tif(margins.header == null) margins.header = defs[4];\n\tif(margins.footer == null) margins.footer = defs[5];\n}\n\nfunction get_cell_style(styles/*:Array<any>*/, cell/*:Cell*/, opts) {\n\tvar z = opts.revssf[cell.z != null ? cell.z : \"General\"];\n\tvar i = 0x3c, len = styles.length;\n\tif(z == null && opts.ssf) {\n\t\tfor(; i < 0x188; ++i) if(opts.ssf[i] == null) {\n\t\t\tSSF_load(cell.z, i);\n\t\t\t// $FlowIgnore\n\t\t\topts.ssf[i] = cell.z;\n\t\t\topts.revssf[cell.z] = z = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(i = 0; i != len; ++i) if(styles[i].numFmtId === z) return i;\n\tstyles[len] = {\n\t\tnumFmtId:z,\n\t\tfontId:0,\n\t\tfillId:0,\n\t\tborderId:0,\n\t\txfId:0,\n\t\tapplyNumberFormat:1\n\t};\n\treturn len;\n}\n\nfunction safe_format(p/*:Cell*/, fmtid/*:number*/, fillid/*:?number*/, opts, themes, styles) {\n\ttry {\n\t\tif(opts.cellNF) p.z = table_fmt[fmtid];\n\t} catch(e) { if(opts.WTF) throw e; }\n\tif(p.t === 'z' && !opts.cellStyles) return;\n\tif(p.t === 'd' && typeof p.v === 'string') p.v = parseDate(p.v);\n\tif((!opts || opts.cellText !== false) && p.t !== 'z') try {\n\t\tif(table_fmt[fmtid] == null) SSF_load(SSFImplicit[fmtid] || \"General\", fmtid);\n\t\tif(p.t === 'e') p.w = p.w || BErr[p.v];\n\t\telse if(fmtid === 0) {\n\t\t\tif(p.t === 'n') {\n\t\t\t\tif((p.v|0) === p.v) p.w = p.v.toString(10);\n\t\t\t\telse p.w = SSF_general_num(p.v);\n\t\t\t}\n\t\t\telse if(p.t === 'd') {\n\t\t\t\tvar dd = datenum(p.v);\n\t\t\t\tif((dd|0) === dd) p.w = dd.toString(10);\n\t\t\t\telse p.w = SSF_general_num(dd);\n\t\t\t}\n\t\t\telse if(p.v === undefined) return \"\";\n\t\t\telse p.w = SSF_general(p.v,_ssfopts);\n\t\t}\n\t\telse if(p.t === 'd') p.w = SSF_format(fmtid,datenum(p.v),_ssfopts);\n\t\telse p.w = SSF_format(fmtid,p.v,_ssfopts);\n\t} catch(e) { if(opts.WTF) throw e; }\n\tif(!opts.cellStyles) return;\n\tif(fillid != null) try {\n\t\tp.s = styles.Fills[fillid];\n\t\tif (p.s.fgColor && p.s.fgColor.theme && !p.s.fgColor.rgb) {\n\t\t\tp.s.fgColor.rgb = rgb_tint(themes.themeElements.clrScheme[p.s.fgColor.theme].rgb, p.s.fgColor.tint || 0);\n\t\t\tif(opts.WTF) p.s.fgColor.raw_rgb = themes.themeElements.clrScheme[p.s.fgColor.theme].rgb;\n\t\t}\n\t\tif (p.s.bgColor && p.s.bgColor.theme) {\n\t\t\tp.s.bgColor.rgb = rgb_tint(themes.themeElements.clrScheme[p.s.bgColor.theme].rgb, p.s.bgColor.tint || 0);\n\t\t\tif(opts.WTF) p.s.bgColor.raw_rgb = themes.themeElements.clrScheme[p.s.bgColor.theme].rgb;\n\t\t}\n\t} catch(e) { if(opts.WTF && styles.Fills) throw e; }\n}\n\nfunction check_ws(ws/*:Worksheet*/, sname/*:string*/, i/*:number*/) {\n\tif(ws && ws['!ref']) {\n\t\tvar range = safe_decode_range(ws['!ref']);\n\t\tif(range.e.c < range.s.c || range.e.r < range.s.r) throw new Error(\"Bad range (\" + i + \"): \" + ws['!ref']);\n\t}\n}\nfunction parse_ws_xml_dim(ws/*:Worksheet*/, s/*:string*/) {\n\tvar d = safe_decode_range(s);\n\tif(d.s.r<=d.e.r && d.s.c<=d.e.c && d.s.r>=0 && d.s.c>=0) ws[\"!ref\"] = encode_range(d);\n}\nvar mergecregex = /<(?:\\w:)?mergeCell ref=\"[A-Z0-9:]+\"\\s*[\\/]?>/g;\nvar sheetdataregex = /<(?:\\w+:)?sheetData[^>]*>([\\s\\S]*)<\\/(?:\\w+:)?sheetData>/;\nvar hlinkregex = /<(?:\\w:)?hyperlink [^>]*>/mg;\nvar dimregex = /\"(\\w*:\\w*)\"/;\nvar colregex = /<(?:\\w:)?col\\b[^>]*[\\/]?>/g;\nvar afregex = /<(?:\\w:)?autoFilter[^>]*([\\/]|>([\\s\\S]*)<\\/(?:\\w:)?autoFilter)>/g;\nvar marginregex= /<(?:\\w:)?pageMargins[^>]*\\/>/g;\nvar sheetprregex = /<(?:\\w:)?sheetPr\\b(?:[^>a-z][^>]*)?\\/>/;\nvar sheetprregex2= /<(?:\\w:)?sheetPr[^>]*(?:[\\/]|>([\\s\\S]*)<\\/(?:\\w:)?sheetPr)>/;\nvar svsregex = /<(?:\\w:)?sheetViews[^>]*(?:[\\/]|>([\\s\\S]*)<\\/(?:\\w:)?sheetViews)>/;\n\n/* 18.3 Worksheets */\nfunction parse_ws_xml(data/*:?string*/, opts, idx/*:number*/, rels, wb/*:WBWBProps*/, themes, styles)/*:Worksheet*/ {\n\tif(!data) return data;\n\tif(!rels) rels = {'!id':{}};\n\tif(DENSE != null && opts.dense == null) opts.dense = DENSE;\n\n\t/* 18.3.1.99 worksheet CT_Worksheet */\n\tvar s = opts.dense ? ([]/*:any*/) : ({}/*:any*/);\n\tvar refguess/*:Range*/ = ({s: {r:2000000, c:2000000}, e: {r:0, c:0} }/*:any*/);\n\n\tvar data1 = \"\", data2 = \"\";\n\tvar mtch/*:?any*/ = data.match(sheetdataregex);\n\tif(mtch) {\n\t\tdata1 = data.slice(0, mtch.index);\n\t\tdata2 = data.slice(mtch.index + mtch[0].length);\n\t} else data1 = data2 = data;\n\n\t/* 18.3.1.82 sheetPr CT_SheetPr */\n\tvar sheetPr = data1.match(sheetprregex);\n\tif(sheetPr) parse_ws_xml_sheetpr(sheetPr[0], s, wb, idx);\n\telse if((sheetPr = data1.match(sheetprregex2))) parse_ws_xml_sheetpr2(sheetPr[0], sheetPr[1]||\"\", s, wb, idx, styles, themes);\n\n\t/* 18.3.1.35 dimension CT_SheetDimension */\n\tvar ridx = (data1.match(/<(?:\\w*:)?dimension/)||{index:-1}).index;\n\tif(ridx > 0) {\n\t\tvar ref = data1.slice(ridx,ridx+50).match(dimregex);\n\t\tif(ref) parse_ws_xml_dim(s, ref[1]);\n\t}\n\n\t/* 18.3.1.88 sheetViews CT_SheetViews */\n\tvar svs = data1.match(svsregex);\n\tif(svs && svs[1]) parse_ws_xml_sheetviews(svs[1], wb);\n\n\t/* 18.3.1.17 cols CT_Cols */\n\tvar columns/*:Array<ColInfo>*/ = [];\n\tif(opts.cellStyles) {\n\t\t/* 18.3.1.13 col CT_Col */\n\t\tvar cols = data1.match(colregex);\n\t\tif(cols) parse_ws_xml_cols(columns, cols);\n\t}\n\n\t/* 18.3.1.80 sheetData CT_SheetData ? */\n\tif(mtch) parse_ws_xml_data(mtch[1], s, opts, refguess, themes, styles);\n\n\t/* 18.3.1.2  autoFilter CT_AutoFilter */\n\tvar afilter = data2.match(afregex);\n\tif(afilter) s['!autofilter'] = parse_ws_xml_autofilter(afilter[0]);\n\n\t/* 18.3.1.55 mergeCells CT_MergeCells */\n\tvar merges/*:Array<Range>*/ = [];\n\tvar _merge = data2.match(mergecregex);\n\tif(_merge) for(ridx = 0; ridx != _merge.length; ++ridx)\n\t\tmerges[ridx] = safe_decode_range(_merge[ridx].slice(_merge[ridx].indexOf(\"\\\"\")+1));\n\n\t/* 18.3.1.48 hyperlinks CT_Hyperlinks */\n\tvar hlink = data2.match(hlinkregex);\n\tif(hlink) parse_ws_xml_hlinks(s, hlink, rels);\n\n\t/* 18.3.1.62 pageMargins CT_PageMargins */\n\tvar margins = data2.match(marginregex);\n\tif(margins) s['!margins'] = parse_ws_xml_margins(parsexmltag(margins[0]));\n\n\tif(!s[\"!ref\"] && refguess.e.c >= refguess.s.c && refguess.e.r >= refguess.s.r) s[\"!ref\"] = encode_range(refguess);\n\tif(opts.sheetRows > 0 && s[\"!ref\"]) {\n\t\tvar tmpref = safe_decode_range(s[\"!ref\"]);\n\t\tif(opts.sheetRows <= +tmpref.e.r) {\n\t\t\ttmpref.e.r = opts.sheetRows - 1;\n\t\t\tif(tmpref.e.r > refguess.e.r) tmpref.e.r = refguess.e.r;\n\t\t\tif(tmpref.e.r < tmpref.s.r) tmpref.s.r = tmpref.e.r;\n\t\t\tif(tmpref.e.c > refguess.e.c) tmpref.e.c = refguess.e.c;\n\t\t\tif(tmpref.e.c < tmpref.s.c) tmpref.s.c = tmpref.e.c;\n\t\t\ts[\"!fullref\"] = s[\"!ref\"];\n\t\t\ts[\"!ref\"] = encode_range(tmpref);\n\t\t}\n\t}\n\tif(columns.length > 0) s[\"!cols\"] = columns;\n\tif(merges.length > 0) s[\"!merges\"] = merges;\n\treturn s;\n}\n\nfunction write_ws_xml_merges(merges/*:Array<Range>*/)/*:string*/ {\n\tif(merges.length === 0) return \"\";\n\tvar o = '<mergeCells count=\"' + merges.length + '\">';\n\tfor(var i = 0; i != merges.length; ++i) o += '<mergeCell ref=\"' + encode_range(merges[i]) + '\"/>';\n\treturn o + '</mergeCells>';\n}\n\n/* 18.3.1.82-3 sheetPr CT_ChartsheetPr / CT_SheetPr */\nfunction parse_ws_xml_sheetpr(sheetPr/*:string*/, s, wb/*:WBWBProps*/, idx/*:number*/) {\n\tvar data = parsexmltag(sheetPr);\n\tif(!wb.Sheets[idx]) wb.Sheets[idx] = {};\n\tif(data.codeName) wb.Sheets[idx].CodeName = unescapexml(utf8read(data.codeName));\n}\nfunction parse_ws_xml_sheetpr2(sheetPr/*:string*/, body/*:string*/, s, wb/*:WBWBProps*/, idx/*:number*/) {\n\tparse_ws_xml_sheetpr(sheetPr.slice(0, sheetPr.indexOf(\">\")), s, wb, idx);\n}\nfunction write_ws_xml_sheetpr(ws, wb, idx, opts, o) {\n\tvar needed = false;\n\tvar props = {}, payload = null;\n\tif(opts.bookType !== 'xlsx' && wb.vbaraw) {\n\t\tvar cname = wb.SheetNames[idx];\n\t\ttry { if(wb.Workbook) cname = wb.Workbook.Sheets[idx].CodeName || cname; } catch(e) {}\n\t\tneeded = true;\n\t\tprops.codeName = utf8write(escapexml(cname));\n\t}\n\n\tif(ws && ws[\"!outline\"]) {\n\t\tvar outlineprops = {summaryBelow:1, summaryRight:1};\n\t\tif(ws[\"!outline\"].above) outlineprops.summaryBelow = 0;\n\t\tif(ws[\"!outline\"].left) outlineprops.summaryRight = 0;\n\t\tpayload = (payload||\"\") + writextag('outlinePr', null, outlineprops);\n\t}\n\n\tif(!needed && !payload) return;\n\to[o.length] = (writextag('sheetPr', payload, props));\n}\n\n/* 18.3.1.85 sheetProtection CT_SheetProtection */\nvar sheetprot_deffalse = [\"objects\", \"scenarios\", \"selectLockedCells\", \"selectUnlockedCells\"];\nvar sheetprot_deftrue = [\n\t\"formatColumns\", \"formatRows\", \"formatCells\",\n\t\"insertColumns\", \"insertRows\", \"insertHyperlinks\",\n\t\"deleteColumns\", \"deleteRows\",\n\t\"sort\", \"autoFilter\", \"pivotTables\"\n];\nfunction write_ws_xml_protection(sp)/*:string*/ {\n\t// algorithmName, hashValue, saltValue, spinCount\n\tvar o = ({sheet:1}/*:any*/);\n\tsheetprot_deffalse.forEach(function(n) { if(sp[n] != null && sp[n]) o[n] = \"1\"; });\n\tsheetprot_deftrue.forEach(function(n) { if(sp[n] != null && !sp[n]) o[n] = \"0\"; });\n\t/* TODO: algorithm */\n\tif(sp.password) o.password = crypto_CreatePasswordVerifier_Method1(sp.password).toString(16).toUpperCase();\n\treturn writextag('sheetProtection', null, o);\n}\n\nfunction parse_ws_xml_hlinks(s, data/*:Array<string>*/, rels) {\n\tvar dense = Array.isArray(s);\n\tfor(var i = 0; i != data.length; ++i) {\n\t\tvar val = parsexmltag(utf8read(data[i]), true);\n\t\tif(!val.ref) return;\n\t\tvar rel = ((rels || {})['!id']||[])[val.id];\n\t\tif(rel) {\n\t\t\tval.Target = rel.Target;\n\t\t\tif(val.location) val.Target += \"#\"+unescapexml(val.location);\n\t\t} else {\n\t\t\tval.Target = \"#\" + unescapexml(val.location);\n\t\t\trel = {Target: val.Target, TargetMode: 'Internal'};\n\t\t}\n\t\tval.Rel = rel;\n\t\tif(val.tooltip) { val.Tooltip = val.tooltip; delete val.tooltip; }\n\t\tvar rng = safe_decode_range(val.ref);\n\t\tfor(var R=rng.s.r;R<=rng.e.r;++R) for(var C=rng.s.c;C<=rng.e.c;++C) {\n\t\t\tvar addr = encode_cell({c:C,r:R});\n\t\t\tif(dense) {\n\t\t\t\tif(!s[R]) s[R] = [];\n\t\t\t\tif(!s[R][C]) s[R][C] = {t:\"z\",v:undefined};\n\t\t\t\ts[R][C].l = val;\n\t\t\t} else {\n\t\t\t\tif(!s[addr]) s[addr] = {t:\"z\",v:undefined};\n\t\t\t\ts[addr].l = val;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction parse_ws_xml_margins(margin) {\n\tvar o = {};\n\t[\"left\", \"right\", \"top\", \"bottom\", \"header\", \"footer\"].forEach(function(k) {\n\t\tif(margin[k]) o[k] = parseFloat(margin[k]);\n\t});\n\treturn o;\n}\nfunction write_ws_xml_margins(margin)/*:string*/ {\n\tdefault_margins(margin);\n\treturn writextag('pageMargins', null, margin);\n}\n\nfunction parse_ws_xml_cols(columns, cols) {\n\tvar seencol = false;\n\tfor(var coli = 0; coli != cols.length; ++coli) {\n\t\tvar coll = parsexmltag(cols[coli], true);\n\t\tif(coll.hidden) coll.hidden = parsexmlbool(coll.hidden);\n\t\tvar colm=parseInt(coll.min, 10)-1, colM=parseInt(coll.max,10)-1;\n\t\tif(coll.outlineLevel) coll.level = (+coll.outlineLevel || 0);\n\t\tdelete coll.min; delete coll.max; coll.width = +coll.width;\n\t\tif(!seencol && coll.width) { seencol = true; find_mdw_colw(coll.width); }\n\t\tprocess_col(coll);\n\t\twhile(colm <= colM) columns[colm++] = dup(coll);\n\t}\n}\nfunction write_ws_xml_cols(ws, cols)/*:string*/ {\n\tvar o = [\"<cols>\"], col;\n\tfor(var i = 0; i != cols.length; ++i) {\n\t\tif(!(col = cols[i])) continue;\n\t\to[o.length] = (writextag('col', null, col_obj_w(i, col)));\n\t}\n\to[o.length] = \"</cols>\";\n\treturn o.join(\"\");\n}\n\nfunction parse_ws_xml_autofilter(data/*:string*/) {\n\tvar o = { ref: (data.match(/ref=\"([^\"]*)\"/)||[])[1]};\n\treturn o;\n}\nfunction write_ws_xml_autofilter(data, ws, wb, idx)/*:string*/ {\n\tvar ref = typeof data.ref == \"string\" ? data.ref : encode_range(data.ref);\n\tif(!wb.Workbook) wb.Workbook = ({Sheets:[]}/*:any*/);\n\tif(!wb.Workbook.Names) wb.Workbook.Names = [];\n\tvar names/*: Array<any> */ = wb.Workbook.Names;\n\tvar range = decode_range(ref);\n\tif(range.s.r == range.e.r) { range.e.r = decode_range(ws[\"!ref\"]).e.r; ref = encode_range(range); }\n\tfor(var i = 0; i < names.length; ++i) {\n\t\tvar name = names[i];\n\t\tif(name.Name != '_xlnm._FilterDatabase') continue;\n\t\tif(name.Sheet != idx) continue;\n\t\tname.Ref = \"'\" + wb.SheetNames[idx] + \"'!\" + ref; break;\n\t}\n\tif(i == names.length) names.push({ Name: '_xlnm._FilterDatabase', Sheet: idx, Ref: \"'\" + wb.SheetNames[idx] + \"'!\" + ref  });\n\treturn writextag(\"autoFilter\", null, {ref:ref});\n}\n\n/* 18.3.1.88 sheetViews CT_SheetViews */\n/* 18.3.1.87 sheetView CT_SheetView */\nvar sviewregex = /<(?:\\w:)?sheetView(?:[^>a-z][^>]*)?\\/?>/;\nfunction parse_ws_xml_sheetviews(data, wb/*:WBWBProps*/) {\n\tif(!wb.Views) wb.Views = [{}];\n\t(data.match(sviewregex)||[]).forEach(function(r/*:string*/, i/*:number*/) {\n\t\tvar tag = parsexmltag(r);\n\t\t// $FlowIgnore\n\t\tif(!wb.Views[i]) wb.Views[i] = {};\n\t\t// $FlowIgnore\n\t\tif(+tag.zoomScale) wb.Views[i].zoom = +tag.zoomScale;\n\t\t// $FlowIgnore\n\t\tif(parsexmlbool(tag.rightToLeft)) wb.Views[i].RTL = true;\n\t});\n}\nfunction write_ws_xml_sheetviews(ws, opts, idx, wb)/*:string*/ {\n\tvar sview = ({workbookViewId:\"0\"}/*:any*/);\n\t// $FlowIgnore\n\tif((((wb||{}).Workbook||{}).Views||[])[0]) sview.rightToLeft = wb.Workbook.Views[0].RTL ? \"1\" : \"0\";\n\treturn writextag(\"sheetViews\", writextag(\"sheetView\", null, sview), {});\n}\n\nfunction write_ws_xml_cell(cell/*:Cell*/, ref, ws, opts/*::, idx, wb*/)/*:string*/ {\n\tif(cell.c) ws['!comments'].push([ref, cell.c]);\n\tif(cell.v === undefined && typeof cell.f !== \"string\" || cell.t === 'z' && !cell.f) return \"\";\n\tvar vv = \"\";\n\tvar oldt = cell.t, oldv = cell.v;\n\tif(cell.t !== \"z\") switch(cell.t) {\n\t\tcase 'b': vv = cell.v ? \"1\" : \"0\"; break;\n\t\tcase 'n': vv = ''+cell.v; break;\n\t\tcase 'e': vv = BErr[cell.v]; break;\n\t\tcase 'd':\n\t\t\tif(opts && opts.cellDates) vv = parseDate(cell.v, -1).toISOString();\n\t\t\telse {\n\t\t\t\tcell = dup(cell);\n\t\t\t\tcell.t = 'n';\n\t\t\t\tvv = ''+(cell.v = datenum(parseDate(cell.v)));\n\t\t\t}\n\t\t\tif(typeof cell.z === 'undefined') cell.z = table_fmt[14];\n\t\t\tbreak;\n\t\tdefault: vv = cell.v; break;\n\t}\n\tvar v = writetag('v', escapexml(vv)), o = ({r:ref}/*:any*/);\n\t/* TODO: cell style */\n\tvar os = get_cell_style(opts.cellXfs, cell, opts);\n\tif(os !== 0) o.s = os;\n\tswitch(cell.t) {\n\t\tcase 'n': break;\n\t\tcase 'd': o.t = \"d\"; break;\n\t\tcase 'b': o.t = \"b\"; break;\n\t\tcase 'e': o.t = \"e\"; break;\n\t\tcase 'z': break;\n\t\tdefault: if(cell.v == null) { delete cell.t; break; }\n\t\t\tif(cell.v.length > 32767) throw new Error(\"Text length must not exceed 32767 characters\");\n\t\t\tif(opts && opts.bookSST) {\n\t\t\t\tv = writetag('v', ''+get_sst_id(opts.Strings, cell.v, opts.revStrings));\n\t\t\t\to.t = \"s\"; break;\n\t\t\t}\n\t\t\to.t = \"str\"; break;\n\t}\n\tif(cell.t != oldt) { cell.t = oldt; cell.v = oldv; }\n\tif(typeof cell.f == \"string\" && cell.f) {\n\t\tvar ff = cell.F && cell.F.slice(0, ref.length) == ref ? {t:\"array\", ref:cell.F} : null;\n\t\tv = writextag('f', escapexml(cell.f), ff) + (cell.v != null ? v : \"\");\n\t}\n\tif(cell.l) ws['!links'].push([ref, cell.l]);\n\tif(cell.D) o.cm = 1;\n\treturn writextag('c', v, o);\n}\n\nvar parse_ws_xml_data = /*#__PURE__*/(function() {\n\tvar cellregex = /<(?:\\w+:)?c[ \\/>]/, rowregex = /<\\/(?:\\w+:)?row>/;\n\tvar rregex = /r=[\"']([^\"']*)[\"']/, isregex = /<(?:\\w+:)?is>([\\S\\s]*?)<\\/(?:\\w+:)?is>/;\n\tvar refregex = /ref=[\"']([^\"']*)[\"']/;\n\tvar match_v = matchtag(\"v\"), match_f = matchtag(\"f\");\n\nreturn function parse_ws_xml_data(sdata/*:string*/, s, opts, guess/*:Range*/, themes, styles) {\n\tvar ri = 0, x = \"\", cells/*:Array<string>*/ = [], cref/*:?Array<string>*/ = [], idx=0, i=0, cc=0, d=\"\", p/*:any*/;\n\tvar tag, tagr = 0, tagc = 0;\n\tvar sstr, ftag;\n\tvar fmtid = 0, fillid = 0;\n\tvar do_format = Array.isArray(styles.CellXf), cf;\n\tvar arrayf/*:Array<[Range, string]>*/ = [];\n\tvar sharedf = [];\n\tvar dense = Array.isArray(s);\n\tvar rows/*:Array<RowInfo>*/ = [], rowobj = {}, rowrite = false;\n\tvar sheetStubs = !!opts.sheetStubs;\n\tfor(var marr = sdata.split(rowregex), mt = 0, marrlen = marr.length; mt != marrlen; ++mt) {\n\t\tx = marr[mt].trim();\n\t\tvar xlen = x.length;\n\t\tif(xlen === 0) continue;\n\n\t\t/* 18.3.1.73 row CT_Row */\n\t\tvar rstarti = 0;\n\t\touta: for(ri = 0; ri < xlen; ++ri) switch(/*x.charCodeAt(ri)*/x[ri]) {\n\t\t\tcase \">\" /*62*/:\n\t\t\t\tif(/*x.charCodeAt(ri-1) != 47*/x[ri-1] != \"/\") { ++ri; break outa; }\n\t\t\t\tif(opts && opts.cellStyles) {\n\t\t\t\t\t// TODO: avoid duplication\n\t\t\t\t\ttag = parsexmltag(x.slice(rstarti,ri), true);\n\t\t\t\t\ttagr = tag.r != null ? parseInt(tag.r, 10) : tagr+1; tagc = -1;\n\t\t\t\t\tif(opts.sheetRows && opts.sheetRows < tagr) continue;\n\t\t\t\t\trowobj = {}; rowrite = false;\n\t\t\t\t\tif(tag.ht) { rowrite = true; rowobj.hpt = parseFloat(tag.ht); rowobj.hpx = pt2px(rowobj.hpt); }\n\t\t\t\t\tif(tag.hidden == \"1\") { rowrite = true; rowobj.hidden = true; }\n\t\t\t\t\tif(tag.outlineLevel != null) { rowrite = true; rowobj.level = +tag.outlineLevel; }\n\t\t\t\t\tif(rowrite) rows[tagr-1] = rowobj;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"<\" /*60*/: rstarti = ri; break;\n\t\t}\n\t\tif(rstarti >= ri) break;\n\t\ttag = parsexmltag(x.slice(rstarti,ri), true);\n\t\ttagr = tag.r != null ? parseInt(tag.r, 10) : tagr+1; tagc = -1;\n\t\tif(opts.sheetRows && opts.sheetRows < tagr) continue;\n\t\tif(guess.s.r > tagr - 1) guess.s.r = tagr - 1;\n\t\tif(guess.e.r < tagr - 1) guess.e.r = tagr - 1;\n\n\t\tif(opts && opts.cellStyles) {\n\t\t\trowobj = {}; rowrite = false;\n\t\t\tif(tag.ht) { rowrite = true; rowobj.hpt = parseFloat(tag.ht); rowobj.hpx = pt2px(rowobj.hpt); }\n\t\t\tif(tag.hidden == \"1\") { rowrite = true; rowobj.hidden = true; }\n\t\t\tif(tag.outlineLevel != null) { rowrite = true; rowobj.level = +tag.outlineLevel; }\n\t\t\tif(rowrite) rows[tagr-1] = rowobj;\n\t\t}\n\n\t\t/* 18.3.1.4 c CT_Cell */\n\t\tcells = x.slice(ri).split(cellregex);\n\t\tfor(var rslice = 0; rslice != cells.length; ++rslice) if(cells[rslice].trim().charAt(0) != \"<\") break;\n\t\tcells = cells.slice(rslice);\n\t\tfor(ri = 0; ri != cells.length; ++ri) {\n\t\t\tx = cells[ri].trim();\n\t\t\tif(x.length === 0) continue;\n\t\t\tcref = x.match(rregex); idx = ri; i=0; cc=0;\n\t\t\tx = \"<c \" + (x.slice(0,1)==\"<\"?\">\":\"\") + x;\n\t\t\tif(cref != null && cref.length === 2) {\n\t\t\t\tidx = 0; d=cref[1];\n\t\t\t\tfor(i=0; i != d.length; ++i) {\n\t\t\t\t\tif((cc=d.charCodeAt(i)-64) < 1 || cc > 26) break;\n\t\t\t\t\tidx = 26*idx + cc;\n\t\t\t\t}\n\t\t\t\t--idx;\n\t\t\t\ttagc = idx;\n\t\t\t} else ++tagc;\n\t\t\tfor(i = 0; i != x.length; ++i) if(x.charCodeAt(i) === 62) break; ++i;\n\t\t\ttag = parsexmltag(x.slice(0,i), true);\n\t\t\tif(!tag.r) tag.r = encode_cell({r:tagr-1, c:tagc});\n\t\t\td = x.slice(i);\n\t\t\tp = ({t:\"\"}/*:any*/);\n\n\t\t\tif((cref=d.match(match_v))!= null && /*::cref != null && */cref[1] !== '') p.v=unescapexml(cref[1]);\n\t\t\tif(opts.cellFormula) {\n\t\t\t\tif((cref=d.match(match_f))!= null && /*::cref != null && */cref[1] !== '') {\n\t\t\t\t\t/* TODO: match against XLSXFutureFunctions */\n\t\t\t\t\tp.f=unescapexml(utf8read(cref[1])).replace(/\\r\\n/g, \"\\n\");\n\t\t\t\t\tif(!opts.xlfn) p.f = _xlfn(p.f);\n\t\t\t\t\tif(/*::cref != null && cref[0] != null && */cref[0].indexOf('t=\"array\"') > -1) {\n\t\t\t\t\t\tp.F = (d.match(refregex)||[])[1];\n\t\t\t\t\t\tif(p.F.indexOf(\":\") > -1) arrayf.push([safe_decode_range(p.F), p.F]);\n\t\t\t\t\t} else if(/*::cref != null && cref[0] != null && */cref[0].indexOf('t=\"shared\"') > -1) {\n\t\t\t\t\t\t// TODO: parse formula\n\t\t\t\t\t\tftag = parsexmltag(cref[0]);\n\t\t\t\t\t\tvar ___f = unescapexml(utf8read(cref[1]));\n\t\t\t\t\t\tif(!opts.xlfn) ___f = _xlfn(___f);\n\t\t\t\t\t\tsharedf[parseInt(ftag.si, 10)] = [ftag, ___f, tag.r];\n\t\t\t\t\t}\n\t\t\t\t} else if((cref=d.match(/<f[^>]*\\/>/))) {\n\t\t\t\t\tftag = parsexmltag(cref[0]);\n\t\t\t\t\tif(sharedf[ftag.si]) p.f = shift_formula_xlsx(sharedf[ftag.si][1], sharedf[ftag.si][2]/*[0].ref*/, tag.r);\n\t\t\t\t}\n\t\t\t\t/* TODO: factor out contains logic */\n\t\t\t\tvar _tag = decode_cell(tag.r);\n\t\t\t\tfor(i = 0; i < arrayf.length; ++i)\n\t\t\t\t\tif(_tag.r >= arrayf[i][0].s.r && _tag.r <= arrayf[i][0].e.r)\n\t\t\t\t\t\tif(_tag.c >= arrayf[i][0].s.c && _tag.c <= arrayf[i][0].e.c)\n\t\t\t\t\t\t\tp.F = arrayf[i][1];\n\t\t\t}\n\n\t\t\tif(tag.t == null && p.v === undefined) {\n\t\t\t\tif(p.f || p.F) {\n\t\t\t\t\tp.v = 0; p.t = \"n\";\n\t\t\t\t} else if(!sheetStubs) continue;\n\t\t\t\telse p.t = \"z\";\n\t\t\t}\n\t\t\telse p.t = tag.t || \"n\";\n\t\t\tif(guess.s.c > tagc) guess.s.c = tagc;\n\t\t\tif(guess.e.c < tagc) guess.e.c = tagc;\n\t\t\t/* 18.18.11 t ST_CellType */\n\t\t\tswitch(p.t) {\n\t\t\t\tcase 'n':\n\t\t\t\t\tif(p.v == \"\" || p.v == null) {\n\t\t\t\t\t\tif(!sheetStubs) continue;\n\t\t\t\t\t\tp.t = 'z';\n\t\t\t\t\t} else p.v = parseFloat(p.v);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 's':\n\t\t\t\t\tif(typeof p.v == 'undefined') {\n\t\t\t\t\t\tif(!sheetStubs) continue;\n\t\t\t\t\t\tp.t = 'z';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsstr = strs[parseInt(p.v, 10)];\n\t\t\t\t\t\tp.v = sstr.t;\n\t\t\t\t\t\tp.r = sstr.r;\n\t\t\t\t\t\tif(opts.cellHTML) p.h = sstr.h;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'str':\n\t\t\t\t\tp.t = \"s\";\n\t\t\t\t\tp.v = (p.v!=null) ? utf8read(p.v) : '';\n\t\t\t\t\tif(opts.cellHTML) p.h = escapehtml(p.v);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inlineStr':\n\t\t\t\t\tcref = d.match(isregex);\n\t\t\t\t\tp.t = 's';\n\t\t\t\t\tif(cref != null && (sstr = parse_si(cref[1]))) {\n\t\t\t\t\t\tp.v = sstr.t;\n\t\t\t\t\t\tif(opts.cellHTML) p.h = sstr.h;\n\t\t\t\t\t} else p.v = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'b': p.v = parsexmlbool(p.v); break;\n\t\t\t\tcase 'd':\n\t\t\t\t\tif(opts.cellDates) p.v = parseDate(p.v, 1);\n\t\t\t\t\telse { p.v = datenum(parseDate(p.v, 1)); p.t = 'n'; }\n\t\t\t\t\tbreak;\n\t\t\t\t/* error string in .w, number in .v */\n\t\t\t\tcase 'e':\n\t\t\t\t\tif(!opts || opts.cellText !== false) p.w = p.v;\n\t\t\t\t\tp.v = RBErr[p.v]; break;\n\t\t\t}\n\t\t\t/* formatting */\n\t\t\tfmtid = fillid = 0;\n\t\t\tcf = null;\n\t\t\tif(do_format && tag.s !== undefined) {\n\t\t\t\tcf = styles.CellXf[tag.s];\n\t\t\t\tif(cf != null) {\n\t\t\t\t\tif(cf.numFmtId != null) fmtid = cf.numFmtId;\n\t\t\t\t\tif(opts.cellStyles) {\n\t\t\t\t\t\tif(cf.fillId != null) fillid = cf.fillId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsafe_format(p, fmtid, fillid, opts, themes, styles);\n\t\t\tif(opts.cellDates && do_format && p.t == 'n' && fmt_is_date(table_fmt[fmtid])) { p.t = 'd'; p.v = numdate(p.v); }\n\t\t\tif(tag.cm && opts.xlmeta) {\n\t\t\t\tvar cm = (opts.xlmeta.Cell||[])[+tag.cm-1];\n\t\t\t\tif(cm && cm.type == 'XLDAPR') p.D = true;\n\t\t\t}\n\t\t\tif(dense) {\n\t\t\t\tvar _r = decode_cell(tag.r);\n\t\t\t\tif(!s[_r.r]) s[_r.r] = [];\n\t\t\t\ts[_r.r][_r.c] = p;\n\t\t\t} else s[tag.r] = p;\n\t\t}\n\t}\n\tif(rows.length > 0) s['!rows'] = rows;\n}; })();\n\nfunction write_ws_xml_data(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*//*::, rels*/)/*:string*/ {\n\tvar o/*:Array<string>*/ = [], r/*:Array<string>*/ = [], range = safe_decode_range(ws['!ref']), cell=\"\", ref, rr = \"\", cols/*:Array<string>*/ = [], R=0, C=0, rows = ws['!rows'];\n\tvar dense = Array.isArray(ws);\n\tvar params = ({r:rr}/*:any*/), row/*:RowInfo*/, height = -1;\n\tfor(C = range.s.c; C <= range.e.c; ++C) cols[C] = encode_col(C);\n\tfor(R = range.s.r; R <= range.e.r; ++R) {\n\t\tr = [];\n\t\trr = encode_row(R);\n\t\tfor(C = range.s.c; C <= range.e.c; ++C) {\n\t\t\tref = cols[C] + rr;\n\t\t\tvar _cell = dense ? (ws[R]||[])[C]: ws[ref];\n\t\t\tif(_cell === undefined) continue;\n\t\t\tif((cell = write_ws_xml_cell(_cell, ref, ws, opts, idx, wb)) != null) r.push(cell);\n\t\t}\n\t\tif(r.length > 0 || (rows && rows[R])) {\n\t\t\tparams = ({r:rr}/*:any*/);\n\t\t\tif(rows && rows[R]) {\n\t\t\t\trow = rows[R];\n\t\t\t\tif(row.hidden) params.hidden = 1;\n\t\t\t\theight = -1;\n\t\t\t\tif(row.hpx) height = px2pt(row.hpx);\n\t\t\t\telse if(row.hpt) height = row.hpt;\n\t\t\t\tif(height > -1) { params.ht = height; params.customHeight = 1; }\n\t\t\t\tif(row.level) { params.outlineLevel = row.level; }\n\t\t\t}\n\t\t\to[o.length] = (writextag('row', r.join(\"\"), params));\n\t\t}\n\t}\n\tif(rows) for(; R < rows.length; ++R) {\n\t\tif(rows && rows[R]) {\n\t\t\tparams = ({r:R+1}/*:any*/);\n\t\t\trow = rows[R];\n\t\t\tif(row.hidden) params.hidden = 1;\n\t\t\theight = -1;\n\t\t\tif (row.hpx) height = px2pt(row.hpx);\n\t\t\telse if (row.hpt) height = row.hpt;\n\t\t\tif (height > -1) { params.ht = height; params.customHeight = 1; }\n\t\t\tif (row.level) { params.outlineLevel = row.level; }\n\t\t\to[o.length] = (writextag('row', \"\", params));\n\t\t}\n\t}\n\treturn o.join(\"\");\n}\n\nfunction write_ws_xml(idx/*:number*/, opts, wb/*:Workbook*/, rels)/*:string*/ {\n\tvar o = [XML_HEADER, writextag('worksheet', null, {\n\t\t'xmlns': XMLNS_main[0],\n\t\t'xmlns:r': XMLNS.r\n\t})];\n\tvar s = wb.SheetNames[idx], sidx = 0, rdata = \"\";\n\tvar ws = wb.Sheets[s];\n\tif(ws == null) ws = {};\n\tvar ref = ws['!ref'] || 'A1';\n\tvar range = safe_decode_range(ref);\n\tif(range.e.c > 0x3FFF || range.e.r > 0xFFFFF) {\n\t\tif(opts.WTF) throw new Error(\"Range \" + ref + \" exceeds format limit A1:XFD1048576\");\n\t\trange.e.c = Math.min(range.e.c, 0x3FFF);\n\t\trange.e.r = Math.min(range.e.c, 0xFFFFF);\n\t\tref = encode_range(range);\n\t}\n\tif(!rels) rels = {};\n\tws['!comments'] = [];\n\tvar _drawing = [];\n\n\twrite_ws_xml_sheetpr(ws, wb, idx, opts, o);\n\n\to[o.length] = (writextag('dimension', null, {'ref': ref}));\n\n\to[o.length] = write_ws_xml_sheetviews(ws, opts, idx, wb);\n\n\t/* TODO: store in WB, process styles */\n\tif(opts.sheetFormat) o[o.length] = (writextag('sheetFormatPr', null, {\n\t\tdefaultRowHeight:opts.sheetFormat.defaultRowHeight||'16',\n\t\tbaseColWidth:opts.sheetFormat.baseColWidth||'10',\n\t\toutlineLevelRow:opts.sheetFormat.outlineLevelRow||'7'\n\t}));\n\n\tif(ws['!cols'] != null && ws['!cols'].length > 0) o[o.length] = (write_ws_xml_cols(ws, ws['!cols']));\n\n\to[sidx = o.length] = '<sheetData/>';\n\tws['!links'] = [];\n\tif(ws['!ref'] != null) {\n\t\trdata = write_ws_xml_data(ws, opts, idx, wb, rels);\n\t\tif(rdata.length > 0) o[o.length] = (rdata);\n\t}\n\tif(o.length>sidx+1) { o[o.length] = ('</sheetData>'); o[sidx]=o[sidx].replace(\"/>\",\">\"); }\n\n\t/* sheetCalcPr */\n\n\tif(ws['!protect']) o[o.length] = write_ws_xml_protection(ws['!protect']);\n\n\t/* protectedRanges */\n\t/* scenarios */\n\n\tif(ws['!autofilter'] != null) o[o.length] = write_ws_xml_autofilter(ws['!autofilter'], ws, wb, idx);\n\n\t/* sortState */\n\t/* dataConsolidate */\n\t/* customSheetViews */\n\n\tif(ws['!merges'] != null && ws['!merges'].length > 0) o[o.length] = (write_ws_xml_merges(ws['!merges']));\n\n\t/* phoneticPr */\n\t/* conditionalFormatting */\n\t/* dataValidations */\n\n\tvar relc = -1, rel, rId = -1;\n\tif(/*::(*/ws['!links']/*::||[])*/.length > 0) {\n\t\to[o.length] = \"<hyperlinks>\";\n\t\t/*::(*/ws['!links']/*::||[])*/.forEach(function(l) {\n\t\t\tif(!l[1].Target) return;\n\t\t\trel = ({\"ref\":l[0]}/*:any*/);\n\t\t\tif(l[1].Target.charAt(0) != \"#\") {\n\t\t\t\trId = add_rels(rels, -1, escapexml(l[1].Target).replace(/#.*$/, \"\"), RELS.HLINK);\n\t\t\t\trel[\"r:id\"] = \"rId\"+rId;\n\t\t\t}\n\t\t\tif((relc = l[1].Target.indexOf(\"#\")) > -1) rel.location = escapexml(l[1].Target.slice(relc+1));\n\t\t\tif(l[1].Tooltip) rel.tooltip = escapexml(l[1].Tooltip);\n\t\t\to[o.length] = writextag(\"hyperlink\",null,rel);\n\t\t});\n\t\to[o.length] = \"</hyperlinks>\";\n\t}\n\tdelete ws['!links'];\n\n\t/* printOptions */\n\n\tif(ws['!margins'] != null) o[o.length] =  write_ws_xml_margins(ws['!margins']);\n\n\t/* pageSetup */\n\t/* headerFooter */\n\t/* rowBreaks */\n\t/* colBreaks */\n\t/* customProperties */\n\t/* cellWatches */\n\n\tif(!opts || opts.ignoreEC || (opts.ignoreEC == (void 0))) o[o.length] = writetag(\"ignoredErrors\", writextag(\"ignoredError\", null, {numberStoredAsText:1, sqref:ref}));\n\n\t/* smartTags */\n\n\tif(_drawing.length > 0) {\n\t\trId = add_rels(rels, -1, \"../drawings/drawing\" + (idx+1) + \".xml\", RELS.DRAW);\n\t\to[o.length] = writextag(\"drawing\", null, {\"r:id\":\"rId\" + rId});\n\t\tws['!drawing'] = _drawing;\n\t}\n\n\tif(ws['!comments'].length > 0) {\n\t\trId = add_rels(rels, -1, \"../drawings/vmlDrawing\" + (idx+1) + \".vml\", RELS.VML);\n\t\to[o.length] = writextag(\"legacyDrawing\", null, {\"r:id\":\"rId\" + rId});\n\t\tws['!legacy'] = rId;\n\t}\n\n\t/* legacyDrawingHF */\n\t/* picture */\n\t/* oleObjects */\n\t/* controls */\n\t/* webPublishItems */\n\t/* tableParts */\n\t/* extLst */\n\n\tif(o.length>1) { o[o.length] = ('</worksheet>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n\n/* [MS-XLSB] 2.4.726 BrtRowHdr */\nfunction parse_BrtRowHdr(data, length) {\n\tvar z = ({}/*:any*/);\n\tvar tgt = data.l + length;\n\tz.r = data.read_shift(4);\n\tdata.l += 4; // TODO: ixfe\n\tvar miyRw = data.read_shift(2);\n\tdata.l += 1; // TODO: top/bot padding\n\tvar flags = data.read_shift(1);\n\tdata.l = tgt;\n\tif(flags & 0x07) z.level = flags & 0x07;\n\tif(flags & 0x10) z.hidden = true;\n\tif(flags & 0x20) z.hpt = miyRw / 20;\n\treturn z;\n}\nfunction write_BrtRowHdr(R/*:number*/, range, ws) {\n\tvar o = new_buf(17+8*16);\n\tvar row = (ws['!rows']||[])[R]||{};\n\to.write_shift(4, R);\n\n\to.write_shift(4, 0); /* TODO: ixfe */\n\n\tvar miyRw = 0x0140;\n\tif(row.hpx) miyRw = px2pt(row.hpx) * 20;\n\telse if(row.hpt) miyRw = row.hpt * 20;\n\to.write_shift(2, miyRw);\n\n\to.write_shift(1, 0); /* top/bot padding */\n\n\tvar flags = 0x0;\n\tif(row.level) flags |= row.level;\n\tif(row.hidden) flags |= 0x10;\n\tif(row.hpx || row.hpt) flags |= 0x20;\n\to.write_shift(1, flags);\n\n\to.write_shift(1, 0); /* phonetic guide */\n\n\t/* [MS-XLSB] 2.5.8 BrtColSpan explains the mechanism */\n\tvar ncolspan = 0, lcs = o.l;\n\to.l += 4;\n\n\tvar caddr = {r:R, c:0};\n\tfor(var i = 0; i < 16; ++i) {\n\t\tif((range.s.c > ((i+1) << 10)) || (range.e.c < (i << 10))) continue;\n\t\tvar first = -1, last = -1;\n\t\tfor(var j = (i<<10); j < ((i+1)<<10); ++j) {\n\t\t\tcaddr.c = j;\n\t\t\tvar cell = Array.isArray(ws) ? (ws[caddr.r]||[])[caddr.c] : ws[encode_cell(caddr)];\n\t\t\tif(cell) { if(first < 0) first = j; last = j; }\n\t\t}\n\t\tif(first < 0) continue;\n\t\t++ncolspan;\n\t\to.write_shift(4, first);\n\t\to.write_shift(4, last);\n\t}\n\n\tvar l = o.l;\n\to.l = lcs;\n\to.write_shift(4, ncolspan);\n\to.l = l;\n\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\nfunction write_row_header(ba, ws, range, R) {\n\tvar o = write_BrtRowHdr(R, range, ws);\n\tif((o.length > 17) || (ws['!rows']||[])[R]) write_record(ba, 0x0000 /* BrtRowHdr */, o);\n}\n\n/* [MS-XLSB] 2.4.820 BrtWsDim */\nvar parse_BrtWsDim = parse_UncheckedRfX;\nvar write_BrtWsDim = write_UncheckedRfX;\n\n/* [MS-XLSB] 2.4.821 BrtWsFmtInfo */\nfunction parse_BrtWsFmtInfo(/*::data, length*/) {\n}\n//function write_BrtWsFmtInfo(ws, o) { }\n\n/* [MS-XLSB] 2.4.823 BrtWsProp */\nfunction parse_BrtWsProp(data, length) {\n\tvar z = {};\n\tvar f = data[data.l]; ++data.l;\n\tz.above = !(f & 0x40);\n\tz.left  = !(f & 0x80);\n\t/* TODO: pull flags */\n\tdata.l += 18;\n\tz.name = parse_XLSBCodeName(data, length - 19);\n\treturn z;\n}\nfunction write_BrtWsProp(str, outl, o) {\n\tif(o == null) o = new_buf(84+4*str.length);\n\tvar f = 0xC0;\n\tif(outl) {\n\t\tif(outl.above) f &= ~0x40;\n\t\tif(outl.left)  f &= ~0x80;\n\t}\n\to.write_shift(1, f);\n\tfor(var i = 1; i < 3; ++i) o.write_shift(1,0);\n\twrite_BrtColor({auto:1}, o);\n\to.write_shift(-4,-1);\n\to.write_shift(-4,-1);\n\twrite_XLSBCodeName(str, o);\n\treturn o.slice(0, o.l);\n}\n\n/* [MS-XLSB] 2.4.306 BrtCellBlank */\nfunction parse_BrtCellBlank(data) {\n\tvar cell = parse_XLSBCell(data);\n\treturn [cell];\n}\nfunction write_BrtCellBlank(cell, ncell, o) {\n\tif(o == null) o = new_buf(8);\n\treturn write_XLSBCell(ncell, o);\n}\nfunction parse_BrtShortBlank(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\treturn [cell];\n}\nfunction write_BrtShortBlank(cell, ncell, o) {\n\tif(o == null) o = new_buf(4);\n\treturn write_XLSBShortCell(ncell, o);\n}\n\n/* [MS-XLSB] 2.4.307 BrtCellBool */\nfunction parse_BrtCellBool(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar fBool = data.read_shift(1);\n\treturn [cell, fBool, 'b'];\n}\nfunction write_BrtCellBool(cell, ncell, o) {\n\tif(o == null) o = new_buf(9);\n\twrite_XLSBCell(ncell, o);\n\to.write_shift(1, cell.v ? 1 : 0);\n\treturn o;\n}\nfunction parse_BrtShortBool(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\tvar fBool = data.read_shift(1);\n\treturn [cell, fBool, 'b'];\n}\nfunction write_BrtShortBool(cell, ncell, o) {\n\tif(o == null) o = new_buf(5);\n\twrite_XLSBShortCell(ncell, o);\n\to.write_shift(1, cell.v ? 1 : 0);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.308 BrtCellError */\nfunction parse_BrtCellError(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar bError = data.read_shift(1);\n\treturn [cell, bError, 'e'];\n}\nfunction write_BrtCellError(cell, ncell, o) {\n\tif(o == null) o = new_buf(9);\n\twrite_XLSBCell(ncell, o);\n\to.write_shift(1, cell.v);\n\treturn o;\n}\nfunction parse_BrtShortError(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\tvar bError = data.read_shift(1);\n\treturn [cell, bError, 'e'];\n}\nfunction write_BrtShortError(cell, ncell, o) {\n\tif(o == null) o = new_buf(8);\n\twrite_XLSBShortCell(ncell, o);\n\to.write_shift(1, cell.v);\n\to.write_shift(2, 0);\n\to.write_shift(1, 0);\n\treturn o;\n}\n\n\n/* [MS-XLSB] 2.4.311 BrtCellIsst */\nfunction parse_BrtCellIsst(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar isst = data.read_shift(4);\n\treturn [cell, isst, 's'];\n}\nfunction write_BrtCellIsst(cell, ncell, o) {\n\tif(o == null) o = new_buf(12);\n\twrite_XLSBCell(ncell, o);\n\to.write_shift(4, ncell.v);\n\treturn o;\n}\nfunction parse_BrtShortIsst(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\tvar isst = data.read_shift(4);\n\treturn [cell, isst, 's'];\n}\nfunction write_BrtShortIsst(cell, ncell, o) {\n\tif(o == null) o = new_buf(8);\n\twrite_XLSBShortCell(ncell, o);\n\to.write_shift(4, ncell.v);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.313 BrtCellReal */\nfunction parse_BrtCellReal(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar value = parse_Xnum(data);\n\treturn [cell, value, 'n'];\n}\nfunction write_BrtCellReal(cell, ncell, o) {\n\tif(o == null) o = new_buf(16);\n\twrite_XLSBCell(ncell, o);\n\twrite_Xnum(cell.v, o);\n\treturn o;\n}\nfunction parse_BrtShortReal(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\tvar value = parse_Xnum(data);\n\treturn [cell, value, 'n'];\n}\nfunction write_BrtShortReal(cell, ncell, o) {\n\tif(o == null) o = new_buf(12);\n\twrite_XLSBShortCell(ncell, o);\n\twrite_Xnum(cell.v, o);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.314 BrtCellRk */\nfunction parse_BrtCellRk(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar value = parse_RkNumber(data);\n\treturn [cell, value, 'n'];\n}\nfunction write_BrtCellRk(cell, ncell, o) {\n\tif(o == null) o = new_buf(12);\n\twrite_XLSBCell(ncell, o);\n\twrite_RkNumber(cell.v, o);\n\treturn o;\n}\nfunction parse_BrtShortRk(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\tvar value = parse_RkNumber(data);\n\treturn [cell, value, 'n'];\n}\nfunction write_BrtShortRk(cell, ncell, o) {\n\tif(o == null) o = new_buf(8);\n\twrite_XLSBShortCell(ncell, o);\n\twrite_RkNumber(cell.v, o);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.323 BrtCellRString */\nfunction parse_BrtCellRString(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar value = parse_RichStr(data);\n\treturn [cell, value, 'is'];\n}\n\n/* [MS-XLSB] 2.4.317 BrtCellSt */\nfunction parse_BrtCellSt(data) {\n\tvar cell = parse_XLSBCell(data);\n\tvar value = parse_XLWideString(data);\n\treturn [cell, value, 'str'];\n}\nfunction write_BrtCellSt(cell, ncell, o) {\n\tif(o == null) o = new_buf(12 + 4 * cell.v.length);\n\twrite_XLSBCell(ncell, o);\n\twrite_XLWideString(cell.v, o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\nfunction parse_BrtShortSt(data) {\n\tvar cell = parse_XLSBShortCell(data);\n\tvar value = parse_XLWideString(data);\n\treturn [cell, value, 'str'];\n}\nfunction write_BrtShortSt(cell, ncell, o) {\n\tif(o == null) o = new_buf(8 + 4 * cell.v.length);\n\twrite_XLSBShortCell(ncell, o);\n\twrite_XLWideString(cell.v, o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.653 BrtFmlaBool */\nfunction parse_BrtFmlaBool(data, length, opts) {\n\tvar end = data.l + length;\n\tvar cell = parse_XLSBCell(data);\n\tcell.r = opts['!row'];\n\tvar value = data.read_shift(1);\n\tvar o = [cell, value, 'b'];\n\tif(opts.cellFormula) {\n\t\tdata.l += 2;\n\t\tvar formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);\n\t\to[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */\n\t}\n\telse data.l = end;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.654 BrtFmlaError */\nfunction parse_BrtFmlaError(data, length, opts) {\n\tvar end = data.l + length;\n\tvar cell = parse_XLSBCell(data);\n\tcell.r = opts['!row'];\n\tvar value = data.read_shift(1);\n\tvar o = [cell, value, 'e'];\n\tif(opts.cellFormula) {\n\t\tdata.l += 2;\n\t\tvar formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);\n\t\to[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */\n\t}\n\telse data.l = end;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.655 BrtFmlaNum */\nfunction parse_BrtFmlaNum(data, length, opts) {\n\tvar end = data.l + length;\n\tvar cell = parse_XLSBCell(data);\n\tcell.r = opts['!row'];\n\tvar value = parse_Xnum(data);\n\tvar o = [cell, value, 'n'];\n\tif(opts.cellFormula) {\n\t\tdata.l += 2;\n\t\tvar formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);\n\t\to[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */\n\t}\n\telse data.l = end;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.656 BrtFmlaString */\nfunction parse_BrtFmlaString(data, length, opts) {\n\tvar end = data.l + length;\n\tvar cell = parse_XLSBCell(data);\n\tcell.r = opts['!row'];\n\tvar value = parse_XLWideString(data);\n\tvar o = [cell, value, 'str'];\n\tif(opts.cellFormula) {\n\t\tdata.l += 2;\n\t\tvar formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);\n\t\to[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */\n\t}\n\telse data.l = end;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.682 BrtMergeCell */\nvar parse_BrtMergeCell = parse_UncheckedRfX;\nvar write_BrtMergeCell = write_UncheckedRfX;\n/* [MS-XLSB] 2.4.107 BrtBeginMergeCells */\nfunction write_BrtBeginMergeCells(cnt, o) {\n\tif(o == null) o = new_buf(4);\n\to.write_shift(4, cnt);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.662 BrtHLink */\nfunction parse_BrtHLink(data, length/*::, opts*/) {\n\tvar end = data.l + length;\n\tvar rfx = parse_UncheckedRfX(data, 16);\n\tvar relId = parse_XLNullableWideString(data);\n\tvar loc = parse_XLWideString(data);\n\tvar tooltip = parse_XLWideString(data);\n\tvar display = parse_XLWideString(data);\n\tdata.l = end;\n\tvar o = ({rfx:rfx, relId:relId, loc:loc, display:display}/*:any*/);\n\tif(tooltip) o.Tooltip = tooltip;\n\treturn o;\n}\nfunction write_BrtHLink(l, rId) {\n\tvar o = new_buf(50+4*(l[1].Target.length + (l[1].Tooltip || \"\").length));\n\twrite_UncheckedRfX({s:decode_cell(l[0]), e:decode_cell(l[0])}, o);\n\twrite_RelID(\"rId\" + rId, o);\n\tvar locidx = l[1].Target.indexOf(\"#\");\n\tvar loc = locidx == -1 ? \"\" : l[1].Target.slice(locidx+1);\n\twrite_XLWideString(loc || \"\", o);\n\twrite_XLWideString(l[1].Tooltip || \"\", o);\n\twrite_XLWideString(\"\", o);\n\treturn o.slice(0, o.l);\n}\n\n/* [MS-XLSB] 2.4.692 BrtPane */\nfunction parse_BrtPane(/*data, length, opts*/) {\n}\n\n/* [MS-XLSB] 2.4.6 BrtArrFmla */\nfunction parse_BrtArrFmla(data, length, opts) {\n\tvar end = data.l + length;\n\tvar rfx = parse_RfX(data, 16);\n\tvar fAlwaysCalc = data.read_shift(1);\n\tvar o = [rfx]; o[2] = fAlwaysCalc;\n\tif(opts.cellFormula) {\n\t\tvar formula = parse_XLSBArrayParsedFormula(data, end - data.l, opts);\n\t\to[1] = formula;\n\t} else data.l = end;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.750 BrtShrFmla */\nfunction parse_BrtShrFmla(data, length, opts) {\n\tvar end = data.l + length;\n\tvar rfx = parse_UncheckedRfX(data, 16);\n\tvar o = [rfx];\n\tif(opts.cellFormula) {\n\t\tvar formula = parse_XLSBSharedParsedFormula(data, end - data.l, opts);\n\t\to[1] = formula;\n\t\tdata.l = end;\n\t} else data.l = end;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.323 BrtColInfo */\n/* TODO: once XLS ColInfo is set, combine the functions */\nfunction write_BrtColInfo(C/*:number*/, col, o) {\n\tif(o == null) o = new_buf(18);\n\tvar p = col_obj_w(C, col);\n\to.write_shift(-4, C);\n\to.write_shift(-4, C);\n\to.write_shift(4, (p.width || 10) * 256);\n\to.write_shift(4, 0/*ixfe*/); // style\n\tvar flags = 0;\n\tif(col.hidden) flags |= 0x01;\n\tif(typeof p.width == 'number') flags |= 0x02;\n\tif(col.level) flags |= (col.level << 8);\n\to.write_shift(2, flags); // bit flag\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.678 BrtMargins */\nvar BrtMarginKeys = [\"left\",\"right\",\"top\",\"bottom\",\"header\",\"footer\"];\nfunction parse_BrtMargins(data/*::, length, opts*/)/*:Margins*/ {\n\tvar margins = ({}/*:any*/);\n\tBrtMarginKeys.forEach(function(k) { margins[k] = parse_Xnum(data, 8); });\n\treturn margins;\n}\nfunction write_BrtMargins(margins/*:Margins*/, o) {\n\tif(o == null) o = new_buf(6*8);\n\tdefault_margins(margins);\n\tBrtMarginKeys.forEach(function(k) { write_Xnum((margins/*:any*/)[k], o); });\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.299 BrtBeginWsView */\nfunction parse_BrtBeginWsView(data/*::, length, opts*/) {\n\tvar f = data.read_shift(2);\n\tdata.l += 28;\n\treturn { RTL: f & 0x20 };\n}\nfunction write_BrtBeginWsView(ws, Workbook, o) {\n\tif(o == null) o = new_buf(30);\n\tvar f = 0x39c;\n\tif((((Workbook||{}).Views||[])[0]||{}).RTL) f |= 0x20;\n\to.write_shift(2, f); // bit flag\n\to.write_shift(4, 0);\n\to.write_shift(4, 0); // view first row\n\to.write_shift(4, 0); // view first col\n\to.write_shift(1, 0); // gridline color ICV\n\to.write_shift(1, 0);\n\to.write_shift(2, 0);\n\to.write_shift(2, 100); // zoom scale\n\to.write_shift(2, 0);\n\to.write_shift(2, 0);\n\to.write_shift(2, 0);\n\to.write_shift(4, 0); // workbook view id\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.309 BrtCellIgnoreEC */\nfunction write_BrtCellIgnoreEC(ref) {\n\tvar o = new_buf(24);\n\to.write_shift(4, 4);\n\to.write_shift(4, 1);\n\twrite_UncheckedRfX(ref, o);\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.748 BrtSheetProtection */\nfunction write_BrtSheetProtection(sp, o) {\n\tif(o == null) o = new_buf(16*4+2);\n\to.write_shift(2, sp.password ? crypto_CreatePasswordVerifier_Method1(sp.password) : 0);\n\to.write_shift(4, 1); // this record should not be written if no protection\n\t[\n\t\t[\"objects\",             false], // fObjects\n\t\t[\"scenarios\",           false], // fScenarios\n\t\t[\"formatCells\",          true], // fFormatCells\n\t\t[\"formatColumns\",        true], // fFormatColumns\n\t\t[\"formatRows\",           true], // fFormatRows\n\t\t[\"insertColumns\",        true], // fInsertColumns\n\t\t[\"insertRows\",           true], // fInsertRows\n\t\t[\"insertHyperlinks\",     true], // fInsertHyperlinks\n\t\t[\"deleteColumns\",        true], // fDeleteColumns\n\t\t[\"deleteRows\",           true], // fDeleteRows\n\t\t[\"selectLockedCells\",   false], // fSelLockedCells\n\t\t[\"sort\",                 true], // fSort\n\t\t[\"autoFilter\",           true], // fAutoFilter\n\t\t[\"pivotTables\",          true], // fPivotTables\n\t\t[\"selectUnlockedCells\", false]  // fSelUnlockedCells\n\t].forEach(function(n) {\n\t\t/*:: if(o == null) throw \"unreachable\"; */\n\t\tif(n[1]) o.write_shift(4, sp[n[0]] != null && !sp[n[0]] ? 1 : 0);\n\t\telse      o.write_shift(4, sp[n[0]] != null && sp[n[0]] ? 0 : 1);\n\t});\n\treturn o;\n}\n\nfunction parse_BrtDVal(/*data, length, opts*/) {\n}\nfunction parse_BrtDVal14(/*data, length, opts*/) {\n}\n/* [MS-XLSB] 2.1.7.61 Worksheet */\nfunction parse_ws_bin(data, _opts, idx, rels, wb/*:WBWBProps*/, themes, styles)/*:Worksheet*/ {\n\tif(!data) return data;\n\tvar opts = _opts || {};\n\tif(!rels) rels = {'!id':{}};\n\tif(DENSE != null && opts.dense == null) opts.dense = DENSE;\n\tvar s/*:Worksheet*/ = (opts.dense ? [] : {});\n\n\tvar ref;\n\tvar refguess = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };\n\n\tvar state/*:Array<string>*/ = [];\n\tvar pass = false, end = false;\n\tvar row, p, cf, R, C, addr, sstr, rr, cell/*:Cell*/;\n\tvar merges/*:Array<Range>*/ = [];\n\topts.biff = 12;\n\topts['!row'] = 0;\n\n\tvar ai = 0, af = false;\n\n\tvar arrayf/*:Array<[Range, string]>*/ = [];\n\tvar sharedf = {};\n\tvar supbooks = opts.supbooks || /*::(*/wb/*:: :any)*/.supbooks || ([[]]/*:any*/);\n\tsupbooks.sharedf = sharedf;\n\tsupbooks.arrayf = arrayf;\n\tsupbooks.SheetNames = wb.SheetNames || wb.Sheets.map(function(x) { return x.name; });\n\tif(!opts.supbooks) {\n\t\topts.supbooks = supbooks;\n\t\tif(wb.Names) for(var i = 0; i < wb.Names.length; ++i) supbooks[0][i+1] = wb.Names[i];\n\t}\n\n\tvar colinfo/*:Array<ColInfo>*/ = [], rowinfo/*:Array<RowInfo>*/ = [];\n\tvar seencol = false;\n\n\tXLSBRecordEnum[0x0010] = { n:\"BrtShortReal\", f:parse_BrtShortReal };\n\n\tvar cm, vm;\n\n\trecordhopper(data, function ws_parse(val, RR, RT) {\n\t\tif(end) return;\n\t\tswitch(RT) {\n\t\t\tcase 0x0094: /* 'BrtWsDim' */\n\t\t\t\tref = val; break;\n\t\t\tcase 0x0000: /* 'BrtRowHdr' */\n\t\t\t\trow = val;\n\t\t\t\tif(opts.sheetRows && opts.sheetRows <= row.r) end=true;\n\t\t\t\trr = encode_row(R = row.r);\n\t\t\t\topts['!row'] = row.r;\n\t\t\t\tif(val.hidden || val.hpt || val.level != null) {\n\t\t\t\t\tif(val.hpt) val.hpx = pt2px(val.hpt);\n\t\t\t\t\trowinfo[val.r] = val;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0002: /* 'BrtCellRk' */\n\t\t\tcase 0x0003: /* 'BrtCellError' */\n\t\t\tcase 0x0004: /* 'BrtCellBool' */\n\t\t\tcase 0x0005: /* 'BrtCellReal' */\n\t\t\tcase 0x0006: /* 'BrtCellSt' */\n\t\t\tcase 0x0007: /* 'BrtCellIsst' */\n\t\t\tcase 0x0008: /* 'BrtFmlaString' */\n\t\t\tcase 0x0009: /* 'BrtFmlaNum' */\n\t\t\tcase 0x000A: /* 'BrtFmlaBool' */\n\t\t\tcase 0x000B: /* 'BrtFmlaError' */\n\t\t\tcase 0x000D: /* 'BrtShortRk' */\n\t\t\tcase 0x000E: /* 'BrtShortError' */\n\t\t\tcase 0x000F: /* 'BrtShortBool' */\n\t\t\tcase 0x0010: /* 'BrtShortReal' */\n\t\t\tcase 0x0011: /* 'BrtShortSt' */\n\t\t\tcase 0x0012: /* 'BrtShortIsst' */\n\t\t\tcase 0x003E: /* 'BrtCellRString' */\n\t\t\t\tp = ({t:val[2]}/*:any*/);\n\t\t\t\tswitch(val[2]) {\n\t\t\t\t\tcase 'n': p.v = val[1]; break;\n\t\t\t\t\tcase 's': sstr = strs[val[1]]; p.v = sstr.t; p.r = sstr.r; break;\n\t\t\t\t\tcase 'b': p.v = val[1] ? true : false; break;\n\t\t\t\t\tcase 'e': p.v = val[1]; if(opts.cellText !== false) p.w = BErr[p.v]; break;\n\t\t\t\t\tcase 'str': p.t = 's'; p.v = val[1]; break;\n\t\t\t\t\tcase 'is': p.t = 's'; p.v = val[1].t; break;\n\t\t\t\t}\n\t\t\t\tif((cf = styles.CellXf[val[0].iStyleRef])) safe_format(p,cf.numFmtId,null,opts, themes, styles);\n\t\t\t\tC = val[0].c == -1 ? C + 1 : val[0].c;\n\t\t\t\tif(opts.dense) { if(!s[R]) s[R] = []; s[R][C] = p; }\n\t\t\t\telse s[encode_col(C) + rr] = p;\n\t\t\t\tif(opts.cellFormula) {\n\t\t\t\t\taf = false;\n\t\t\t\t\tfor(ai = 0; ai < arrayf.length; ++ai) {\n\t\t\t\t\t\tvar aii = arrayf[ai];\n\t\t\t\t\t\tif(row.r >= aii[0].s.r && row.r <= aii[0].e.r)\n\t\t\t\t\t\t\tif(C >= aii[0].s.c && C <= aii[0].e.c) {\n\t\t\t\t\t\t\t\tp.F = encode_range(aii[0]); af = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!af && val.length > 3) p.f = val[3];\n\t\t\t\t}\n\n\t\t\t\tif(refguess.s.r > row.r) refguess.s.r = row.r;\n\t\t\t\tif(refguess.s.c > C) refguess.s.c = C;\n\t\t\t\tif(refguess.e.r < row.r) refguess.e.r = row.r;\n\t\t\t\tif(refguess.e.c < C) refguess.e.c = C;\n\t\t\t\tif(opts.cellDates && cf && p.t == 'n' && fmt_is_date(table_fmt[cf.numFmtId])) {\n\t\t\t\t\tvar _d = SSF_parse_date_code(p.v); if(_d) { p.t = 'd'; p.v = new Date(_d.y, _d.m-1,_d.d,_d.H,_d.M,_d.S,_d.u); }\n\t\t\t\t}\n\t\t\t\tif(cm) {\n\t\t\t\t\tif(cm.type == 'XLDAPR') p.D = true;\n\t\t\t\t\tcm = void 0;\n\t\t\t\t}\n\t\t\t\tif(vm) vm = void 0;\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0001: /* 'BrtCellBlank' */\n\t\t\tcase 0x000C: /* 'BrtShortBlank' */\n\t\t\t\tif(!opts.sheetStubs || pass) break;\n\t\t\t\tp = ({t:'z',v:void 0}/*:any*/);\n\t\t\t\tC = val[0].c == -1 ? C + 1 : val[0].c;\n\t\t\t\tif(opts.dense) { if(!s[R]) s[R] = []; s[R][C] = p; }\n\t\t\t\telse s[encode_col(C) + rr] = p;\n\t\t\t\tif(refguess.s.r > row.r) refguess.s.r = row.r;\n\t\t\t\tif(refguess.s.c > C) refguess.s.c = C;\n\t\t\t\tif(refguess.e.r < row.r) refguess.e.r = row.r;\n\t\t\t\tif(refguess.e.c < C) refguess.e.c = C;\n\t\t\t\tif(cm) {\n\t\t\t\t\tif(cm.type == 'XLDAPR') p.D = true;\n\t\t\t\t\tcm = void 0;\n\t\t\t\t}\n\t\t\t\tif(vm) vm = void 0;\n\t\t\t\tbreak;\n\n\t\t\tcase 0x00B0: /* 'BrtMergeCell' */\n\t\t\t\tmerges.push(val); break;\n\n\t\t\tcase 0x0031: { /* 'BrtCellMeta' */\n\t\t\t\tcm = ((opts.xlmeta||{}).Cell||[])[val-1];\n\t\t\t} break;\n\n\t\t\tcase 0x01EE: /* 'BrtHLink' */\n\t\t\t\tvar rel = rels['!id'][val.relId];\n\t\t\t\tif(rel) {\n\t\t\t\t\tval.Target = rel.Target;\n\t\t\t\t\tif(val.loc) val.Target += \"#\"+val.loc;\n\t\t\t\t\tval.Rel = rel;\n\t\t\t\t} else if(val.relId == '') {\n\t\t\t\t\tval.Target = \"#\" + val.loc;\n\t\t\t\t}\n\t\t\t\tfor(R=val.rfx.s.r;R<=val.rfx.e.r;++R) for(C=val.rfx.s.c;C<=val.rfx.e.c;++C) {\n\t\t\t\t\tif(opts.dense) {\n\t\t\t\t\t\tif(!s[R]) s[R] = [];\n\t\t\t\t\t\tif(!s[R][C]) s[R][C] = {t:'z',v:undefined};\n\t\t\t\t\t\ts[R][C].l = val;\n\t\t\t\t\t} else {\n\t\t\t\t\t\taddr = encode_cell({c:C,r:R});\n\t\t\t\t\t\tif(!s[addr]) s[addr] = {t:'z',v:undefined};\n\t\t\t\t\t\ts[addr].l = val;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 0x01AA: /* 'BrtArrFmla' */\n\t\t\t\tif(!opts.cellFormula) break;\n\t\t\t\tarrayf.push(val);\n\t\t\t\tcell = ((opts.dense ? s[R][C] : s[encode_col(C) + rr])/*:any*/);\n\t\t\t\tcell.f = stringify_formula(val[1], refguess, {r:row.r, c:C}, supbooks, opts);\n\t\t\t\tcell.F = encode_range(val[0]);\n\t\t\t\tbreak;\n\t\t\tcase 0x01AB: /* 'BrtShrFmla' */\n\t\t\t\tif(!opts.cellFormula) break;\n\t\t\t\tsharedf[encode_cell(val[0].s)] = val[1];\n\t\t\t\tcell = (opts.dense ? s[R][C] : s[encode_col(C) + rr]);\n\t\t\t\tcell.f = stringify_formula(val[1], refguess, {r:row.r, c:C}, supbooks, opts);\n\t\t\t\tbreak;\n\n\t\t\t/* identical to 'ColInfo' in XLS */\n\t\t\tcase 0x003C: /* 'BrtColInfo' */\n\t\t\t\tif(!opts.cellStyles) break;\n\t\t\t\twhile(val.e >= val.s) {\n\t\t\t\t\tcolinfo[val.e--] = { width: val.w/256, hidden: !!(val.flags & 0x01), level: val.level };\n\t\t\t\t\tif(!seencol) { seencol = true; find_mdw_colw(val.w/256); }\n\t\t\t\t\tprocess_col(colinfo[val.e+1]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 0x00A1: /* 'BrtBeginAFilter' */\n\t\t\t\ts['!autofilter'] = { ref:encode_range(val) };\n\t\t\t\tbreak;\n\n\t\t\tcase 0x01DC: /* 'BrtMargins' */\n\t\t\t\ts['!margins'] = val;\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0093: /* 'BrtWsProp' */\n\t\t\t\tif(!wb.Sheets[idx]) wb.Sheets[idx] = {};\n\t\t\t\tif(val.name) wb.Sheets[idx].CodeName = val.name;\n\t\t\t\tif(val.above || val.left) s['!outline'] = { above: val.above, left: val.left };\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0089: /* 'BrtBeginWsView' */\n\t\t\t\tif(!wb.Views) wb.Views = [{}];\n\t\t\t\tif(!wb.Views[0]) wb.Views[0] = {};\n\t\t\t\tif(val.RTL) wb.Views[0].RTL = true;\n\t\t\t\tbreak;\n\n\t\t\tcase 0x01E5: /* 'BrtWsFmtInfo' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0040: /* 'BrtDVal' */\n\t\t\tcase 0x041D: /* 'BrtDVal14' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0097: /* 'BrtPane' */\n\t\t\t\tbreak;\n\t\t\tcase 0x0098: /* 'BrtSel' */\n\t\t\tcase 0x00AF: /* 'BrtAFilterDateGroupItem' */\n\t\t\tcase 0x0284: /* 'BrtActiveX' */\n\t\t\tcase 0x0271: /* 'BrtBigName' */\n\t\t\tcase 0x0232: /* 'BrtBkHim' */\n\t\t\tcase 0x018C: /* 'BrtBrk' */\n\t\t\tcase 0x0458: /* 'BrtCFIcon' */\n\t\t\tcase 0x047A: /* 'BrtCFRuleExt' */\n\t\t\tcase 0x01D7: /* 'BrtCFVO' */\n\t\t\tcase 0x041A: /* 'BrtCFVO14' */\n\t\t\tcase 0x0289: /* 'BrtCellIgnoreEC' */\n\t\t\tcase 0x0451: /* 'BrtCellIgnoreEC14' */\n\t\t\tcase 0x024D: /* 'BrtCellSmartTagProperty' */\n\t\t\tcase 0x025F: /* 'BrtCellWatch' */\n\t\t\tcase 0x0234: /* 'BrtColor' */\n\t\t\tcase 0x041F: /* 'BrtColor14' */\n\t\t\tcase 0x00A8: /* 'BrtColorFilter' */\n\t\t\tcase 0x00AE: /* 'BrtCustomFilter' */\n\t\t\tcase 0x049C: /* 'BrtCustomFilter14' */\n\t\t\tcase 0x01F3: /* 'BrtDRef' */\n\t\t\tcase 0x01FB: /* 'BrtDXF' */\n\t\t\tcase 0x0226: /* 'BrtDrawing' */\n\t\t\tcase 0x00AB: /* 'BrtDynamicFilter' */\n\t\t\tcase 0x00A7: /* 'BrtFilter' */\n\t\t\tcase 0x0499: /* 'BrtFilter14' */\n\t\t\tcase 0x00A9: /* 'BrtIconFilter' */\n\t\t\tcase 0x049D: /* 'BrtIconFilter14' */\n\t\t\tcase 0x0227: /* 'BrtLegacyDrawing' */\n\t\t\tcase 0x0228: /* 'BrtLegacyDrawingHF' */\n\t\t\tcase 0x0295: /* 'BrtListPart' */\n\t\t\tcase 0x027F: /* 'BrtOleObject' */\n\t\t\tcase 0x01DE: /* 'BrtPageSetup' */\n\t\t\tcase 0x0219: /* 'BrtPhoneticInfo' */\n\t\t\tcase 0x01DD: /* 'BrtPrintOptions' */\n\t\t\tcase 0x0218: /* 'BrtRangeProtection' */\n\t\t\tcase 0x044F: /* 'BrtRangeProtection14' */\n\t\t\tcase 0x02A8: /* 'BrtRangeProtectionIso' */\n\t\t\tcase 0x0450: /* 'BrtRangeProtectionIso14' */\n\t\t\tcase 0x0400: /* 'BrtRwDescent' */\n\t\t\tcase 0x0297: /* 'BrtSheetCalcProp' */\n\t\t\tcase 0x0217: /* 'BrtSheetProtection' */\n\t\t\tcase 0x02A6: /* 'BrtSheetProtectionIso' */\n\t\t\tcase 0x01F8: /* 'BrtSlc' */\n\t\t\tcase 0x0413: /* 'BrtSparkline' */\n\t\t\tcase 0x01AC: /* 'BrtTable' */\n\t\t\tcase 0x00AA: /* 'BrtTop10Filter' */\n\t\t\tcase 0x0C00: /* 'BrtUid' */\n\t\t\tcase 0x0032: /* 'BrtValueMeta' */\n\t\t\tcase 0x0816: /* 'BrtWebExtension' */\n\t\t\tcase 0x0415: /* 'BrtWsFmtInfoEx14' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0023: /* 'BrtFRTBegin' */\n\t\t\t\tpass = true; break;\n\t\t\tcase 0x0024: /* 'BrtFRTEnd' */\n\t\t\t\tpass = false; break;\n\t\t\tcase 0x0025: /* 'BrtACBegin' */\n\t\t\t\tstate.push(RT); pass = true; break;\n\t\t\tcase 0x0026: /* 'BrtACEnd' */\n\t\t\t\tstate.pop(); pass = false; break;\n\n\t\t\tdefault:\n\t\t\t\tif(RR.T){/* empty */}\n\t\t\t\telse if(!pass || opts.WTF) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t}, opts);\n\n\tdelete opts.supbooks;\n\tdelete opts['!row'];\n\n\tif(!s[\"!ref\"] && (refguess.s.r < 2000000 || ref && (ref.e.r > 0 || ref.e.c > 0 || ref.s.r > 0 || ref.s.c > 0))) s[\"!ref\"] = encode_range(ref || refguess);\n\tif(opts.sheetRows && s[\"!ref\"]) {\n\t\tvar tmpref = safe_decode_range(s[\"!ref\"]);\n\t\tif(opts.sheetRows <= +tmpref.e.r) {\n\t\t\ttmpref.e.r = opts.sheetRows - 1;\n\t\t\tif(tmpref.e.r > refguess.e.r) tmpref.e.r = refguess.e.r;\n\t\t\tif(tmpref.e.r < tmpref.s.r) tmpref.s.r = tmpref.e.r;\n\t\t\tif(tmpref.e.c > refguess.e.c) tmpref.e.c = refguess.e.c;\n\t\t\tif(tmpref.e.c < tmpref.s.c) tmpref.s.c = tmpref.e.c;\n\t\t\ts[\"!fullref\"] = s[\"!ref\"];\n\t\t\ts[\"!ref\"] = encode_range(tmpref);\n\t\t}\n\t}\n\tif(merges.length > 0) s[\"!merges\"] = merges;\n\tif(colinfo.length > 0) s[\"!cols\"] = colinfo;\n\tif(rowinfo.length > 0) s[\"!rows\"] = rowinfo;\n\treturn s;\n}\n\n/* TODO: something useful -- this is a stub */\nfunction write_ws_bin_cell(ba/*:BufArray*/, cell/*:Cell*/, R/*:number*/, C/*:number*/, opts, ws/*:Worksheet*/, last_seen/*:boolean*/)/*:boolean*/ {\n\tif(cell.v === undefined) return false;\n\tvar vv = \"\";\n\tswitch(cell.t) {\n\t\tcase 'b': vv = cell.v ? \"1\" : \"0\"; break;\n\t\tcase 'd': // no BrtCellDate :(\n\t\t\tcell = dup(cell);\n\t\t\tcell.z = cell.z || table_fmt[14];\n\t\t\tcell.v = datenum(parseDate(cell.v)); cell.t = 'n';\n\t\t\tbreak;\n\t\t/* falls through */\n\t\tcase 'n': case 'e': vv = ''+cell.v; break;\n\t\tdefault: vv = cell.v; break;\n\t}\n\tvar o/*:any*/ = ({r:R, c:C}/*:any*/);\n\t/* TODO: cell style */\n\to.s = get_cell_style(opts.cellXfs, cell, opts);\n\tif(cell.l) ws['!links'].push([encode_cell(o), cell.l]);\n\tif(cell.c) ws['!comments'].push([encode_cell(o), cell.c]);\n\tswitch(cell.t) {\n\t\tcase 's': case 'str':\n\t\t\tif(opts.bookSST) {\n\t\t\t\tvv = get_sst_id(opts.Strings, (cell.v/*:any*/), opts.revStrings);\n\t\t\t\to.t = \"s\"; o.v = vv;\n\t\t\t\tif(last_seen) write_record(ba, 0x0012 /* BrtShortIsst */, write_BrtShortIsst(cell, o));\n\t\t\t\telse write_record(ba, 0x0007 /* BrtCellIsst */, write_BrtCellIsst(cell, o));\n\t\t\t} else {\n\t\t\t\to.t = \"str\";\n\t\t\t\tif(last_seen) write_record(ba, 0x0011 /* BrtShortSt */, write_BrtShortSt(cell, o));\n\t\t\t\telse write_record(ba, 0x0006 /* BrtCellSt */, write_BrtCellSt(cell, o));\n\t\t\t}\n\t\t\treturn true;\n\t\tcase 'n':\n\t\t\t/* TODO: determine threshold for Real vs RK */\n\t\t\tif(cell.v == (cell.v | 0) && cell.v > -1000 && cell.v < 1000) {\n\t\t\t\tif(last_seen) write_record(ba, 0x000D /* BrtShortRk */, write_BrtShortRk(cell, o));\n\t\t\t\telse write_record(ba, 0x0002 /* BrtCellRk */, write_BrtCellRk(cell, o));\n\t\t\t} else {\n\t\t\t\tif(last_seen) write_record(ba, 0x0010 /* BrtShortReal */, write_BrtShortReal(cell, o));\n\t\t\t\telse write_record(ba, 0x0005 /* BrtCellReal */, write_BrtCellReal(cell, o));\n\t\t\t} return true;\n\t\tcase 'b':\n\t\t\to.t = \"b\";\n\t\t\tif(last_seen) write_record(ba, 0x000F /* BrtShortBool */, write_BrtShortBool(cell, o));\n\t\t\telse write_record(ba, 0x0004 /* BrtCellBool */, write_BrtCellBool(cell, o));\n\t\t\treturn true;\n\t\tcase 'e':\n\t\t\to.t = \"e\";\n\t\t\tif(last_seen) write_record(ba, 0x000E /* BrtShortError */, write_BrtShortError(cell, o));\n\t\t\telse write_record(ba, 0x0003 /* BrtCellError */, write_BrtCellError(cell, o));\n\t\t\treturn true;\n\t}\n\tif(last_seen) write_record(ba, 0x000C /* BrtShortBlank */, write_BrtShortBlank(cell, o));\n\telse write_record(ba, 0x0001 /* BrtCellBlank */, write_BrtCellBlank(cell, o));\n\treturn true;\n}\n\nfunction write_CELLTABLE(ba, ws/*:Worksheet*/, idx/*:number*/, opts/*::, wb:Workbook*/) {\n\tvar range = safe_decode_range(ws['!ref'] || \"A1\"), ref, rr = \"\", cols/*:Array<string>*/ = [];\n\twrite_record(ba, 0x0091 /* BrtBeginSheetData */);\n\tvar dense = Array.isArray(ws);\n\tvar cap = range.e.r;\n\tif(ws['!rows']) cap = Math.max(range.e.r, ws['!rows'].length - 1);\n\tfor(var R = range.s.r; R <= cap; ++R) {\n\t\trr = encode_row(R);\n\t\t/* [ACCELLTABLE] */\n\t\t/* BrtRowHdr */\n\t\twrite_row_header(ba, ws, range, R);\n\t\tvar last_seen = false;\n\t\tif(R <= range.e.r) for(var C = range.s.c; C <= range.e.c; ++C) {\n\t\t\t/* *16384CELL */\n\t\t\tif(R === range.s.r) cols[C] = encode_col(C);\n\t\t\tref = cols[C] + rr;\n\t\t\tvar cell = dense ? (ws[R]||[])[C] : ws[ref];\n\t\t\tif(!cell) { last_seen = false; continue; }\n\t\t\t/* write cell */\n\t\t\tlast_seen = write_ws_bin_cell(ba, cell, R, C, opts, ws, last_seen);\n\t\t}\n\t}\n\twrite_record(ba, 0x0092 /* BrtEndSheetData */);\n}\n\nfunction write_MERGECELLS(ba, ws/*:Worksheet*/) {\n\tif(!ws || !ws['!merges']) return;\n\twrite_record(ba, 0x00B1 /* BrtBeginMergeCells */, write_BrtBeginMergeCells(ws['!merges'].length));\n\tws['!merges'].forEach(function(m) { write_record(ba, 0x00B0 /* BrtMergeCell */, write_BrtMergeCell(m)); });\n\twrite_record(ba, 0x00B2 /* BrtEndMergeCells */);\n}\n\nfunction write_COLINFOS(ba, ws/*:Worksheet*//*::, idx:number, opts, wb:Workbook*/) {\n\tif(!ws || !ws['!cols']) return;\n\twrite_record(ba, 0x0186 /* BrtBeginColInfos */);\n\tws['!cols'].forEach(function(m, i) { if(m) write_record(ba, 0x003C /* 'BrtColInfo' */, write_BrtColInfo(i, m)); });\n\twrite_record(ba, 0x0187 /* BrtEndColInfos */);\n}\n\nfunction write_IGNOREECS(ba, ws/*:Worksheet*/) {\n\tif(!ws || !ws['!ref']) return;\n\twrite_record(ba, 0x0288 /* BrtBeginCellIgnoreECs */);\n\twrite_record(ba, 0x0289 /* BrtCellIgnoreEC */, write_BrtCellIgnoreEC(safe_decode_range(ws['!ref'])));\n\twrite_record(ba, 0x028A /* BrtEndCellIgnoreECs */);\n}\n\nfunction write_HLINKS(ba, ws/*:Worksheet*/, rels) {\n\t/* *BrtHLink */\n\tws['!links'].forEach(function(l) {\n\t\tif(!l[1].Target) return;\n\t\tvar rId = add_rels(rels, -1, l[1].Target.replace(/#.*$/, \"\"), RELS.HLINK);\n\t\twrite_record(ba, 0x01EE /* BrtHLink */, write_BrtHLink(l, rId));\n\t});\n\tdelete ws['!links'];\n}\nfunction write_LEGACYDRAWING(ba, ws/*:Worksheet*/, idx/*:number*/, rels) {\n\t/* [BrtLegacyDrawing] */\n\tif(ws['!comments'].length > 0) {\n\t\tvar rId = add_rels(rels, -1, \"../drawings/vmlDrawing\" + (idx+1) + \".vml\", RELS.VML);\n\t\twrite_record(ba, 0x0227 /* BrtLegacyDrawing */, write_RelID(\"rId\" + rId));\n\t\tws['!legacy'] = rId;\n\t}\n}\n\nfunction write_AUTOFILTER(ba, ws, wb, idx) {\n\tif(!ws['!autofilter']) return;\n\tvar data = ws['!autofilter'];\n\tvar ref = typeof data.ref === \"string\" ? data.ref : encode_range(data.ref);\n\n\t/* Update FilterDatabase defined name for the worksheet */\n\tif(!wb.Workbook) wb.Workbook = ({Sheets:[]}/*:any*/);\n\tif(!wb.Workbook.Names) wb.Workbook.Names = [];\n\tvar names/*: Array<any> */ = wb.Workbook.Names;\n\tvar range = decode_range(ref);\n\tif(range.s.r == range.e.r) { range.e.r = decode_range(ws[\"!ref\"]).e.r; ref = encode_range(range); }\n\tfor(var i = 0; i < names.length; ++i) {\n\t\tvar name = names[i];\n\t\tif(name.Name != '_xlnm._FilterDatabase') continue;\n\t\tif(name.Sheet != idx) continue;\n\t\tname.Ref = \"'\" + wb.SheetNames[idx] + \"'!\" + ref; break;\n\t}\n\tif(i == names.length) names.push({ Name: '_xlnm._FilterDatabase', Sheet: idx, Ref: \"'\" + wb.SheetNames[idx] + \"'!\" + ref  });\n\n\twrite_record(ba, 0x00A1 /* BrtBeginAFilter */, write_UncheckedRfX(safe_decode_range(ref)));\n\t/* *FILTERCOLUMN */\n\t/* [SORTSTATE] */\n\t/* BrtEndAFilter */\n\twrite_record(ba, 0x00A2 /* BrtEndAFilter */);\n}\n\nfunction write_WSVIEWS2(ba, ws, Workbook) {\n\twrite_record(ba, 0x0085 /* BrtBeginWsViews */);\n\t{ /* 1*WSVIEW2 */\n\t\t/* [ACUID] */\n\t\twrite_record(ba, 0x0089 /* BrtBeginWsView */, write_BrtBeginWsView(ws, Workbook));\n\t\t/* [BrtPane] */\n\t\t/* *4BrtSel */\n\t\t/* *4SXSELECT */\n\t\t/* *FRT */\n\t\twrite_record(ba, 0x008A /* BrtEndWsView */);\n\t}\n\t/* *FRT */\n\twrite_record(ba, 0x0086 /* BrtEndWsViews */);\n}\n\nfunction write_WSFMTINFO(/*::ba, ws*/) {\n\t/* [ACWSFMTINFO] */\n\t// write_record(ba, 0x01E5 /* BrtWsFmtInfo */, write_BrtWsFmtInfo(ws));\n}\n\nfunction write_SHEETPROTECT(ba, ws) {\n\tif(!ws['!protect']) return;\n\t/* [BrtSheetProtectionIso] */\n\twrite_record(ba, 0x0217 /* BrtSheetProtection */, write_BrtSheetProtection(ws['!protect']));\n}\n\nfunction write_ws_bin(idx/*:number*/, opts, wb/*:Workbook*/, rels) {\n\tvar ba = buf_array();\n\tvar s = wb.SheetNames[idx], ws = wb.Sheets[s] || {};\n\tvar c/*:string*/ = s; try { if(wb && wb.Workbook) c = wb.Workbook.Sheets[idx].CodeName || c; } catch(e) {}\n\tvar r = safe_decode_range(ws['!ref'] || \"A1\");\n\tif(r.e.c > 0x3FFF || r.e.r > 0xFFFFF) {\n\t\tif(opts.WTF) throw new Error(\"Range \" + (ws['!ref'] || \"A1\") + \" exceeds format limit A1:XFD1048576\");\n\t\tr.e.c = Math.min(r.e.c, 0x3FFF);\n\t\tr.e.r = Math.min(r.e.c, 0xFFFFF);\n\t}\n\tws['!links'] = [];\n\t/* passed back to write_zip and removed there */\n\tws['!comments'] = [];\n\twrite_record(ba, 0x0081 /* BrtBeginSheet */);\n\tif(wb.vbaraw || ws['!outline']) write_record(ba, 0x0093 /* BrtWsProp */, write_BrtWsProp(c, ws['!outline']));\n\twrite_record(ba, 0x0094 /* BrtWsDim */, write_BrtWsDim(r));\n\twrite_WSVIEWS2(ba, ws, wb.Workbook);\n\twrite_WSFMTINFO(ba, ws);\n\twrite_COLINFOS(ba, ws, idx, opts, wb);\n\twrite_CELLTABLE(ba, ws, idx, opts, wb);\n\t/* [BrtSheetCalcProp] */\n\twrite_SHEETPROTECT(ba, ws);\n\t/* *([BrtRangeProtectionIso] BrtRangeProtection) */\n\t/* [SCENMAN] */\n\twrite_AUTOFILTER(ba, ws, wb, idx);\n\t/* [SORTSTATE] */\n\t/* [DCON] */\n\t/* [USERSHVIEWS] */\n\twrite_MERGECELLS(ba, ws);\n\t/* [BrtPhoneticInfo] */\n\t/* *CONDITIONALFORMATTING */\n\t/* [DVALS] */\n\twrite_HLINKS(ba, ws, rels);\n\t/* [BrtPrintOptions] */\n\tif(ws['!margins']) write_record(ba, 0x01DC /* BrtMargins */, write_BrtMargins(ws['!margins']));\n\t/* [BrtPageSetup] */\n\t/* [HEADERFOOTER] */\n\t/* [RWBRK] */\n\t/* [COLBRK] */\n\t/* *BrtBigName */\n\t/* [CELLWATCHES] */\n\tif(!opts || opts.ignoreEC || (opts.ignoreEC == (void 0))) write_IGNOREECS(ba, ws);\n\t/* [SMARTTAGS] */\n\t/* [BrtDrawing] */\n\twrite_LEGACYDRAWING(ba, ws, idx, rels);\n\t/* [BrtLegacyDrawingHF] */\n\t/* [BrtBkHim] */\n\t/* [OLEOBJECTS] */\n\t/* [ACTIVEXCONTROLS] */\n\t/* [WEBPUBITEMS] */\n\t/* [LISTPARTS] */\n\t/* FRTWORKSHEET */\n\twrite_record(ba, 0x0082 /* BrtEndSheet */);\n\treturn ba.end();\n}\nfunction parse_Cache(data/*:string*/)/*:[Array<number|string>, string, ?string]*/ {\n\tvar col/*:Array<number|string>*/ = [];\n\tvar num = data.match(/^<c:numCache>/);\n\tvar f;\n\n\t/* 21.2.2.150 pt CT_NumVal */\n\t(data.match(/<c:pt idx=\"(\\d*)\">(.*?)<\\/c:pt>/mg)||[]).forEach(function(pt) {\n\t\tvar q = pt.match(/<c:pt idx=\"(\\d*?)\"><c:v>(.*)<\\/c:v><\\/c:pt>/);\n\t\tif(!q) return;\n\t\tcol[+q[1]] = num ? +q[2] : q[2];\n\t});\n\n\t/* 21.2.2.71 formatCode CT_Xstring */\n\tvar nf = unescapexml((data.match(/<c:formatCode>([\\s\\S]*?)<\\/c:formatCode>/) || [\"\",\"General\"])[1]);\n\n\t(data.match(/<c:f>(.*?)<\\/c:f>/mg)||[]).forEach(function(F) { f = F.replace(/<.*?>/g,\"\"); });\n\n\treturn [col, nf, f];\n}\n\n/* 21.2 DrawingML - Charts */\nfunction parse_chart(data/*:?string*/, name/*:string*/, opts, rels, wb, csheet) {\n\tvar cs/*:Worksheet*/ = ((csheet || {\"!type\":\"chart\"})/*:any*/);\n\tif(!data) return csheet;\n\t/* 21.2.2.27 chart CT_Chart */\n\n\tvar C = 0, R = 0, col = \"A\";\n\tvar refguess = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };\n\n\t/* 21.2.2.120 numCache CT_NumData */\n\t(data.match(/<c:numCache>[\\s\\S]*?<\\/c:numCache>/gm)||[]).forEach(function(nc) {\n\t\tvar cache = parse_Cache(nc);\n\t\trefguess.s.r = refguess.s.c = 0;\n\t\trefguess.e.c = C;\n\t\tcol = encode_col(C);\n\t\tcache[0].forEach(function(n,i) {\n\t\t\tcs[col + encode_row(i)] = {t:'n', v:n, z:cache[1] };\n\t\t\tR = i;\n\t\t});\n\t\tif(refguess.e.r < R) refguess.e.r = R;\n\t\t++C;\n\t});\n\tif(C > 0) cs[\"!ref\"] = encode_range(refguess);\n\treturn cs;\n}\n/* 18.3 Worksheets also covers Chartsheets */\nfunction parse_cs_xml(data/*:?string*/, opts, idx/*:number*/, rels, wb/*::, themes, styles*/)/*:Worksheet*/ {\n\tif(!data) return data;\n\t/* 18.3.1.12 chartsheet CT_ChartSheet */\n\tif(!rels) rels = {'!id':{}};\n\tvar s = ({'!type':\"chart\", '!drawel':null, '!rel':\"\"}/*:any*/);\n\tvar m;\n\n\t/* 18.3.1.83 sheetPr CT_ChartsheetPr */\n\tvar sheetPr = data.match(sheetprregex);\n\tif(sheetPr) parse_ws_xml_sheetpr(sheetPr[0], s, wb, idx);\n\n\t/* 18.3.1.36 drawing CT_Drawing */\n\tif((m = data.match(/drawing r:id=\"(.*?)\"/))) s['!rel'] = m[1];\n\n\tif(rels['!id'][s['!rel']]) s['!drawel'] = rels['!id'][s['!rel']];\n\treturn s;\n}\nfunction write_cs_xml(idx/*:number*/, opts, wb/*:Workbook*/, rels)/*:string*/ {\n\tvar o = [XML_HEADER, writextag('chartsheet', null, {\n\t\t'xmlns': XMLNS_main[0],\n\t\t'xmlns:r': XMLNS.r\n\t})];\n\to[o.length] = writextag(\"drawing\", null, {\"r:id\": \"rId1\"});\n\tadd_rels(rels, -1, \"../drawings/drawing\" + (idx+1) + \".xml\", RELS.DRAW);\n\tif(o.length>2) { o[o.length] = ('</chartsheet>'); o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n\n/* [MS-XLSB] 2.4.331 BrtCsProp */\nfunction parse_BrtCsProp(data, length/*:number*/) {\n\tdata.l += 10;\n\tvar name = parse_XLWideString(data, length - 10);\n\treturn { name: name };\n}\n\n/* [MS-XLSB] 2.1.7.7 Chart Sheet */\nfunction parse_cs_bin(data, opts, idx/*:number*/, rels, wb/*::, themes, styles*/)/*:Worksheet*/ {\n\tif(!data) return data;\n\tif(!rels) rels = {'!id':{}};\n\tvar s = {'!type':\"chart\", '!drawel':null, '!rel':\"\"};\n\tvar state/*:Array<string>*/ = [];\n\tvar pass = false;\n\trecordhopper(data, function cs_parse(val, R, RT) {\n\t\tswitch(RT) {\n\n\t\t\tcase 0x0226: /* 'BrtDrawing' */\n\t\t\t\ts['!rel'] = val; break;\n\n\t\t\tcase 0x028B: /* 'BrtCsProp' */\n\t\t\t\tif(!wb.Sheets[idx]) wb.Sheets[idx] = {};\n\t\t\t\tif(val.name) wb.Sheets[idx].CodeName = val.name;\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0232: /* 'BrtBkHim' */\n\t\t\tcase 0x028C: /* 'BrtCsPageSetup' */\n\t\t\tcase 0x029D: /* 'BrtCsProtection' */\n\t\t\tcase 0x02A7: /* 'BrtCsProtectionIso' */\n\t\t\tcase 0x0227: /* 'BrtLegacyDrawing' */\n\t\t\tcase 0x0228: /* 'BrtLegacyDrawingHF' */\n\t\t\tcase 0x01DC: /* 'BrtMargins' */\n\t\t\tcase 0x0C00: /* 'BrtUid' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0023: /* 'BrtFRTBegin' */\n\t\t\t\tpass = true; break;\n\t\t\tcase 0x0024: /* 'BrtFRTEnd' */\n\t\t\t\tpass = false; break;\n\t\t\tcase 0x0025: /* 'BrtACBegin' */\n\t\t\t\tstate.push(RT); break;\n\t\t\tcase 0x0026: /* 'BrtACEnd' */\n\t\t\t\tstate.pop(); break;\n\n\t\t\tdefault:\n\t\t\t\tif(R.T > 0) state.push(RT);\n\t\t\t\telse if(R.T < 0) state.pop();\n\t\t\t\telse if(!pass || opts.WTF) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t}, opts);\n\n\tif(rels['!id'][s['!rel']]) s['!drawel'] = rels['!id'][s['!rel']];\n\treturn s;\n}\nfunction write_cs_bin(/*::idx:number, opts, wb:Workbook, rels*/) {\n\tvar ba = buf_array();\n\twrite_record(ba, 0x0081 /* BrtBeginSheet */);\n\t/* [BrtCsProp] */\n\t/* CSVIEWS */\n\t/* [[BrtCsProtectionIso] BrtCsProtection] */\n\t/* [USERCSVIEWS] */\n\t/* [BrtMargins] */\n\t/* [BrtCsPageSetup] */\n\t/* [HEADERFOOTER] */\n\t/* BrtDrawing */\n\t/* [BrtLegacyDrawing] */\n\t/* [BrtLegacyDrawingHF] */\n\t/* [BrtBkHim] */\n\t/* [WEBPUBITEMS] */\n\t/* FRTCHARTSHEET */\n\twrite_record(ba, 0x0082 /* BrtEndSheet */);\n\treturn ba.end();\n}\n/* 18.2.28 (CT_WorkbookProtection) Defaults */\nvar WBPropsDef = [\n\t['allowRefreshQuery',           false, \"bool\"],\n\t['autoCompressPictures',        true,  \"bool\"],\n\t['backupFile',                  false, \"bool\"],\n\t['checkCompatibility',          false, \"bool\"],\n\t['CodeName',                    ''],\n\t['date1904',                    false, \"bool\"],\n\t['defaultThemeVersion',         0,      \"int\"],\n\t['filterPrivacy',               false, \"bool\"],\n\t['hidePivotFieldList',          false, \"bool\"],\n\t['promptedSolutions',           false, \"bool\"],\n\t['publishItems',                false, \"bool\"],\n\t['refreshAllConnections',       false, \"bool\"],\n\t['saveExternalLinkValues',      true,  \"bool\"],\n\t['showBorderUnselectedTables',  true,  \"bool\"],\n\t['showInkAnnotation',           true,  \"bool\"],\n\t['showObjects',                 'all'],\n\t['showPivotChartFilter',        false, \"bool\"],\n\t['updateLinks', 'userSet']\n];\n\n/* 18.2.30 (CT_BookView) Defaults */\nvar WBViewDef = [\n\t['activeTab',                   0,      \"int\"],\n\t['autoFilterDateGrouping',      true,  \"bool\"],\n\t['firstSheet',                  0,      \"int\"],\n\t['minimized',                   false, \"bool\"],\n\t['showHorizontalScroll',        true,  \"bool\"],\n\t['showSheetTabs',               true,  \"bool\"],\n\t['showVerticalScroll',          true,  \"bool\"],\n\t['tabRatio',                    600,    \"int\"],\n\t['visibility',                  'visible']\n\t//window{Height,Width}, {x,y}Window\n];\n\n/* 18.2.19 (CT_Sheet) Defaults */\nvar SheetDef = [\n\t//['state', 'visible']\n];\n\n/* 18.2.2  (CT_CalcPr) Defaults */\nvar CalcPrDef = [\n\t['calcCompleted', 'true'],\n\t['calcMode', 'auto'],\n\t['calcOnSave', 'true'],\n\t['concurrentCalc', 'true'],\n\t['fullCalcOnLoad', 'false'],\n\t['fullPrecision', 'true'],\n\t['iterate', 'false'],\n\t['iterateCount', '100'],\n\t['iterateDelta', '0.001'],\n\t['refMode', 'A1']\n];\n\n/* 18.2.3 (CT_CustomWorkbookView) Defaults */\n/*var CustomWBViewDef = [\n\t['autoUpdate', 'false'],\n\t['changesSavedWin', 'false'],\n\t['includeHiddenRowCol', 'true'],\n\t['includePrintSettings', 'true'],\n\t['maximized', 'false'],\n\t['minimized', 'false'],\n\t['onlySync', 'false'],\n\t['personalView', 'false'],\n\t['showComments', 'commIndicator'],\n\t['showFormulaBar', 'true'],\n\t['showHorizontalScroll', 'true'],\n\t['showObjects', 'all'],\n\t['showSheetTabs', 'true'],\n\t['showStatusbar', 'true'],\n\t['showVerticalScroll', 'true'],\n\t['tabRatio', '600'],\n\t['xWindow', '0'],\n\t['yWindow', '0']\n];*/\n\nfunction push_defaults_array(target, defaults) {\n\tfor(var j = 0; j != target.length; ++j) { var w = target[j];\n\t\tfor(var i=0; i != defaults.length; ++i) { var z = defaults[i];\n\t\t\tif(w[z[0]] == null) w[z[0]] = z[1];\n\t\t\telse switch(z[2]) {\n\t\t\tcase \"bool\": if(typeof w[z[0]] == \"string\") w[z[0]] = parsexmlbool(w[z[0]]); break;\n\t\t\tcase \"int\": if(typeof w[z[0]] == \"string\") w[z[0]] = parseInt(w[z[0]], 10); break;\n\t\t\t}\n\t\t}\n\t}\n}\nfunction push_defaults(target, defaults) {\n\tfor(var i = 0; i != defaults.length; ++i) { var z = defaults[i];\n\t\tif(target[z[0]] == null) target[z[0]] = z[1];\n\t\telse switch(z[2]) {\n\t\t\tcase \"bool\": if(typeof target[z[0]] == \"string\") target[z[0]] = parsexmlbool(target[z[0]]); break;\n\t\t\tcase \"int\": if(typeof target[z[0]] == \"string\") target[z[0]] = parseInt(target[z[0]], 10); break;\n\t\t}\n\t}\n}\n\nfunction parse_wb_defaults(wb) {\n\tpush_defaults(wb.WBProps, WBPropsDef);\n\tpush_defaults(wb.CalcPr, CalcPrDef);\n\n\tpush_defaults_array(wb.WBView, WBViewDef);\n\tpush_defaults_array(wb.Sheets, SheetDef);\n\n\t_ssfopts.date1904 = parsexmlbool(wb.WBProps.date1904);\n}\n\nfunction safe1904(wb/*:Workbook*/)/*:string*/ {\n\t/* TODO: store date1904 somewhere else */\n\tif(!wb.Workbook) return \"false\";\n\tif(!wb.Workbook.WBProps) return \"false\";\n\treturn parsexmlbool(wb.Workbook.WBProps.date1904) ? \"true\" : \"false\";\n}\n\nvar badchars = /*#__PURE__*/\"][*?\\/\\\\\".split(\"\");\nfunction check_ws_name(n/*:string*/, safe/*:?boolean*/)/*:boolean*/ {\n\tif(n.length > 31) { if(safe) return false; throw new Error(\"Sheet names cannot exceed 31 chars\"); }\n\tvar _good = true;\n\tbadchars.forEach(function(c) {\n\t\tif(n.indexOf(c) == -1) return;\n\t\tif(!safe) throw new Error(\"Sheet name cannot contain : \\\\ / ? * [ ]\");\n\t\t_good = false;\n\t});\n\treturn _good;\n}\nfunction check_wb_names(N, S, codes) {\n\tN.forEach(function(n,i) {\n\t\tcheck_ws_name(n);\n\t\tfor(var j = 0; j < i; ++j) if(n == N[j]) throw new Error(\"Duplicate Sheet Name: \" + n);\n\t\tif(codes) {\n\t\t\tvar cn = (S && S[i] && S[i].CodeName) || n;\n\t\t\tif(cn.charCodeAt(0) == 95 && cn.length > 22) throw new Error(\"Bad Code Name: Worksheet\" + cn);\n\t\t}\n\t});\n}\nfunction check_wb(wb) {\n\tif(!wb || !wb.SheetNames || !wb.Sheets) throw new Error(\"Invalid Workbook\");\n\tif(!wb.SheetNames.length) throw new Error(\"Workbook is empty\");\n\tvar Sheets = (wb.Workbook && wb.Workbook.Sheets) || [];\n\tcheck_wb_names(wb.SheetNames, Sheets, !!wb.vbaraw);\n\tfor(var i = 0; i < wb.SheetNames.length; ++i) check_ws(wb.Sheets[wb.SheetNames[i]], wb.SheetNames[i], i);\n\t/* TODO: validate workbook */\n}\n/* 18.2 Workbook */\nvar wbnsregex = /<\\w+:workbook/;\nfunction parse_wb_xml(data, opts)/*:WorkbookFile*/ {\n\tif(!data) throw new Error(\"Could not find file\");\n\tvar wb = /*::(*/{ AppVersion:{}, WBProps:{}, WBView:[], Sheets:[], CalcPr:{}, Names:[], xmlns: \"\" }/*::)*/;\n\tvar pass = false, xmlns = \"xmlns\";\n\tvar dname = {}, dnstart = 0;\n\tdata.replace(tagregex, function xml_wb(x, idx) {\n\t\tvar y/*:any*/ = parsexmltag(x);\n\t\tswitch(strip_ns(y[0])) {\n\t\t\tcase '<?xml': break;\n\n\t\t\t/* 18.2.27 workbook CT_Workbook 1 */\n\t\t\tcase '<workbook':\n\t\t\t\tif(x.match(wbnsregex)) xmlns = \"xmlns\" + x.match(/<(\\w+):/)[1];\n\t\t\t\twb.xmlns = y[xmlns];\n\t\t\t\tbreak;\n\t\t\tcase '</workbook>': break;\n\n\t\t\t/* 18.2.13 fileVersion CT_FileVersion ? */\n\t\t\tcase '<fileVersion': delete y[0]; wb.AppVersion = y; break;\n\t\t\tcase '<fileVersion/>': case '</fileVersion>': break;\n\n\t\t\t/* 18.2.12 fileSharing CT_FileSharing ? */\n\t\t\tcase '<fileSharing':\n\t\t\t\tbreak;\n\t\t\tcase '<fileSharing/>': break;\n\n\t\t\t/* 18.2.28 workbookPr CT_WorkbookPr ? */\n\t\t\tcase '<workbookPr':\n\t\t\tcase '<workbookPr/>':\n\t\t\t\tWBPropsDef.forEach(function(w) {\n\t\t\t\t\tif(y[w[0]] == null) return;\n\t\t\t\t\tswitch(w[2]) {\n\t\t\t\t\t\tcase \"bool\": wb.WBProps[w[0]] = parsexmlbool(y[w[0]]); break;\n\t\t\t\t\t\tcase \"int\": wb.WBProps[w[0]] = parseInt(y[w[0]], 10); break;\n\t\t\t\t\t\tdefault: wb.WBProps[w[0]] = y[w[0]];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(y.codeName) wb.WBProps.CodeName = utf8read(y.codeName);\n\t\t\t\tbreak;\n\t\t\tcase '</workbookPr>': break;\n\n\t\t\t/* 18.2.29 workbookProtection CT_WorkbookProtection ? */\n\t\t\tcase '<workbookProtection':\n\t\t\t\tbreak;\n\t\t\tcase '<workbookProtection/>': break;\n\n\t\t\t/* 18.2.1  bookViews CT_BookViews ? */\n\t\t\tcase '<bookViews': case '<bookViews>': case '</bookViews>': break;\n\t\t\t/* 18.2.30   workbookView CT_BookView + */\n\t\t\tcase '<workbookView': case '<workbookView/>': delete y[0]; wb.WBView.push(y); break;\n\t\t\tcase '</workbookView>': break;\n\n\t\t\t/* 18.2.20 sheets CT_Sheets 1 */\n\t\t\tcase '<sheets': case '<sheets>': case '</sheets>': break; // aggregate sheet\n\t\t\t/* 18.2.19   sheet CT_Sheet + */\n\t\t\tcase '<sheet':\n\t\t\t\tswitch(y.state) {\n\t\t\t\t\tcase \"hidden\": y.Hidden = 1; break;\n\t\t\t\t\tcase \"veryHidden\": y.Hidden = 2; break;\n\t\t\t\t\tdefault: y.Hidden = 0;\n\t\t\t\t}\n\t\t\t\tdelete y.state;\n\t\t\t\ty.name = unescapexml(utf8read(y.name));\n\t\t\t\tdelete y[0]; wb.Sheets.push(y); break;\n\t\t\tcase '</sheet>': break;\n\n\t\t\t/* 18.2.15 functionGroups CT_FunctionGroups ? */\n\t\t\tcase '<functionGroups': case '<functionGroups/>': break;\n\t\t\t/* 18.2.14   functionGroup CT_FunctionGroup + */\n\t\t\tcase '<functionGroup': break;\n\n\t\t\t/* 18.2.9  externalReferences CT_ExternalReferences ? */\n\t\t\tcase '<externalReferences': case '</externalReferences>': case '<externalReferences>': break;\n\t\t\t/* 18.2.8    externalReference CT_ExternalReference + */\n\t\t\tcase '<externalReference': break;\n\n\t\t\t/* 18.2.6  definedNames CT_DefinedNames ? */\n\t\t\tcase '<definedNames/>': break;\n\t\t\tcase '<definedNames>': case '<definedNames': pass=true; break;\n\t\t\tcase '</definedNames>': pass=false; break;\n\t\t\t/* 18.2.5    definedName CT_DefinedName + */\n\t\t\tcase '<definedName': {\n\t\t\t\tdname = {};\n\t\t\t\tdname.Name = utf8read(y.name);\n\t\t\t\tif(y.comment) dname.Comment = y.comment;\n\t\t\t\tif(y.localSheetId) dname.Sheet = +y.localSheetId;\n\t\t\t\tif(parsexmlbool(y.hidden||\"0\")) dname.Hidden = true;\n\t\t\t\tdnstart = idx + x.length;\n\t\t\t}\tbreak;\n\t\t\tcase '</definedName>': {\n\t\t\t\tdname.Ref = unescapexml(utf8read(data.slice(dnstart, idx)));\n\t\t\t\twb.Names.push(dname);\n\t\t\t} break;\n\t\t\tcase '<definedName/>': break;\n\n\t\t\t/* 18.2.2  calcPr CT_CalcPr ? */\n\t\t\tcase '<calcPr': delete y[0]; wb.CalcPr = y; break;\n\t\t\tcase '<calcPr/>': delete y[0]; wb.CalcPr = y; break;\n\t\t\tcase '</calcPr>': break;\n\n\t\t\t/* 18.2.16 oleSize CT_OleSize ? (ref required) */\n\t\t\tcase '<oleSize': break;\n\n\t\t\t/* 18.2.4  customWorkbookViews CT_CustomWorkbookViews ? */\n\t\t\tcase '<customWorkbookViews>': case '</customWorkbookViews>': case '<customWorkbookViews': break;\n\t\t\t/* 18.2.3  customWorkbookView CT_CustomWorkbookView + */\n\t\t\tcase '<customWorkbookView': case '</customWorkbookView>': break;\n\n\t\t\t/* 18.2.18 pivotCaches CT_PivotCaches ? */\n\t\t\tcase '<pivotCaches>': case '</pivotCaches>': case '<pivotCaches': break;\n\t\t\t/* 18.2.17 pivotCache CT_PivotCache ? */\n\t\t\tcase '<pivotCache': break;\n\n\t\t\t/* 18.2.21 smartTagPr CT_SmartTagPr ? */\n\t\t\tcase '<smartTagPr': case '<smartTagPr/>': break;\n\n\t\t\t/* 18.2.23 smartTagTypes CT_SmartTagTypes ? */\n\t\t\tcase '<smartTagTypes': case '<smartTagTypes>': case '</smartTagTypes>': break;\n\t\t\t/* 18.2.22 smartTagType CT_SmartTagType ? */\n\t\t\tcase '<smartTagType': break;\n\n\t\t\t/* 18.2.24 webPublishing CT_WebPublishing ? */\n\t\t\tcase '<webPublishing': case '<webPublishing/>': break;\n\n\t\t\t/* 18.2.11 fileRecoveryPr CT_FileRecoveryPr ? */\n\t\t\tcase '<fileRecoveryPr': case '<fileRecoveryPr/>': break;\n\n\t\t\t/* 18.2.26 webPublishObjects CT_WebPublishObjects ? */\n\t\t\tcase '<webPublishObjects>': case '<webPublishObjects': case '</webPublishObjects>': break;\n\t\t\t/* 18.2.25 webPublishObject CT_WebPublishObject ? */\n\t\t\tcase '<webPublishObject': break;\n\n\t\t\t/* 18.2.10 extLst CT_ExtensionList ? */\n\t\t\tcase '<extLst': case '<extLst>': case '</extLst>': case '<extLst/>': break;\n\t\t\t/* 18.2.7  ext CT_Extension + */\n\t\t\tcase '<ext': pass=true; break; //TODO: check with versions of excel\n\t\t\tcase '</ext>': pass=false; break;\n\n\t\t\t/* Others */\n\t\t\tcase '<ArchID': break;\n\t\t\tcase '<AlternateContent':\n\t\t\tcase '<AlternateContent>': pass=true; break;\n\t\t\tcase '</AlternateContent>': pass=false; break;\n\n\t\t\t/* TODO */\n\t\t\tcase '<revisionPtr': break;\n\n\t\t\tdefault: if(!pass && opts.WTF) throw new Error('unrecognized ' + y[0] + ' in workbook');\n\t\t}\n\t\treturn x;\n\t});\n\tif(XMLNS_main.indexOf(wb.xmlns) === -1) throw new Error(\"Unknown Namespace: \" + wb.xmlns);\n\n\tparse_wb_defaults(wb);\n\n\treturn wb;\n}\n\nfunction write_wb_xml(wb/*:Workbook*//*::, opts:?WriteOpts*/)/*:string*/ {\n\tvar o = [XML_HEADER];\n\to[o.length] = writextag('workbook', null, {\n\t\t'xmlns': XMLNS_main[0],\n\t\t//'xmlns:mx': XMLNS.mx,\n\t\t//'xmlns:s': XMLNS_main[0],\n\t\t'xmlns:r': XMLNS.r\n\t});\n\n\tvar write_names = (wb.Workbook && (wb.Workbook.Names||[]).length > 0);\n\n\t/* fileVersion */\n\t/* fileSharing */\n\n\tvar workbookPr/*:any*/ = ({codeName:\"ThisWorkbook\"}/*:any*/);\n\tif(wb.Workbook && wb.Workbook.WBProps) {\n\t\tWBPropsDef.forEach(function(x) {\n\t\t\t/*:: if(!wb.Workbook || !wb.Workbook.WBProps) throw \"unreachable\"; */\n\t\t\tif((wb.Workbook.WBProps[x[0]]/*:any*/) == null) return;\n\t\t\tif((wb.Workbook.WBProps[x[0]]/*:any*/) == x[1]) return;\n\t\t\tworkbookPr[x[0]] = (wb.Workbook.WBProps[x[0]]/*:any*/);\n\t\t});\n\t\t/*:: if(!wb.Workbook || !wb.Workbook.WBProps) throw \"unreachable\"; */\n\t\tif(wb.Workbook.WBProps.CodeName) { workbookPr.codeName = wb.Workbook.WBProps.CodeName; delete workbookPr.CodeName; }\n\t}\n\to[o.length] = (writextag('workbookPr', null, workbookPr));\n\n\t/* workbookProtection */\n\n\tvar sheets = wb.Workbook && wb.Workbook.Sheets || [];\n\tvar i = 0;\n\n\t/* bookViews only written if first worksheet is hidden */\n\tif(sheets && sheets[0] && !!sheets[0].Hidden) {\n\t\to[o.length] = \"<bookViews>\";\n\t\tfor(i = 0; i != wb.SheetNames.length; ++i) {\n\t\t\tif(!sheets[i]) break;\n\t\t\tif(!sheets[i].Hidden) break;\n\t\t}\n\t\tif(i == wb.SheetNames.length) i = 0;\n\t\to[o.length] = '<workbookView firstSheet=\"' + i + '\" activeTab=\"' + i + '\"/>';\n\t\to[o.length] = \"</bookViews>\";\n\t}\n\n\to[o.length] = \"<sheets>\";\n\tfor(i = 0; i != wb.SheetNames.length; ++i) {\n\t\tvar sht = ({name:escapexml(wb.SheetNames[i].slice(0,31))}/*:any*/);\n\t\tsht.sheetId = \"\"+(i+1);\n\t\tsht[\"r:id\"] = \"rId\"+(i+1);\n\t\tif(sheets[i]) switch(sheets[i].Hidden) {\n\t\t\tcase 1: sht.state = \"hidden\"; break;\n\t\t\tcase 2: sht.state = \"veryHidden\"; break;\n\t\t}\n\t\to[o.length] = (writextag('sheet',null,sht));\n\t}\n\to[o.length] = \"</sheets>\";\n\n\t/* functionGroups */\n\t/* externalReferences */\n\n\tif(write_names) {\n\t\to[o.length] = \"<definedNames>\";\n\t\tif(wb.Workbook && wb.Workbook.Names) wb.Workbook.Names.forEach(function(n) {\n\t\t\tvar d/*:any*/ = {name:n.Name};\n\t\t\tif(n.Comment) d.comment = n.Comment;\n\t\t\tif(n.Sheet != null) d.localSheetId = \"\"+n.Sheet;\n\t\t\tif(n.Hidden) d.hidden = \"1\";\n\t\t\tif(!n.Ref) return;\n\t\t\to[o.length] = writextag('definedName', escapexml(n.Ref), d);\n\t\t});\n\t\to[o.length] = \"</definedNames>\";\n\t}\n\n\t/* calcPr */\n\t/* oleSize */\n\t/* customWorkbookViews */\n\t/* pivotCaches */\n\t/* smartTagPr */\n\t/* smartTagTypes */\n\t/* webPublishing */\n\t/* fileRecoveryPr */\n\t/* webPublishObjects */\n\t/* extLst */\n\n\tif(o.length>2){ o[o.length] = '</workbook>'; o[1]=o[1].replace(\"/>\",\">\"); }\n\treturn o.join(\"\");\n}\n/* [MS-XLSB] 2.4.304 BrtBundleSh */\nfunction parse_BrtBundleSh(data, length/*:number*/) {\n\tvar z = {};\n\tz.Hidden = data.read_shift(4); //hsState ST_SheetState\n\tz.iTabID = data.read_shift(4);\n\tz.strRelID = parse_RelID(data,length-8);\n\tz.name = parse_XLWideString(data);\n\treturn z;\n}\nfunction write_BrtBundleSh(data, o) {\n\tif(!o) o = new_buf(127);\n\to.write_shift(4, data.Hidden);\n\to.write_shift(4, data.iTabID);\n\twrite_RelID(data.strRelID, o);\n\twrite_XLWideString(data.name.slice(0,31), o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.815 BrtWbProp */\nfunction parse_BrtWbProp(data, length)/*:WBProps*/ {\n\tvar o/*:WBProps*/ = ({}/*:any*/);\n\tvar flags = data.read_shift(4);\n\to.defaultThemeVersion = data.read_shift(4);\n\tvar strName = (length > 8) ? parse_XLWideString(data) : \"\";\n\tif(strName.length > 0) o.CodeName = strName;\n\to.autoCompressPictures = !!(flags & 0x10000);\n\to.backupFile = !!(flags & 0x40);\n\to.checkCompatibility = !!(flags & 0x1000);\n\to.date1904 = !!(flags & 0x01);\n\to.filterPrivacy = !!(flags & 0x08);\n\to.hidePivotFieldList = !!(flags & 0x400);\n\to.promptedSolutions = !!(flags & 0x10);\n\to.publishItems = !!(flags & 0x800);\n\to.refreshAllConnections = !!(flags & 0x40000);\n\to.saveExternalLinkValues = !!(flags & 0x80);\n\to.showBorderUnselectedTables = !!(flags & 0x04);\n\to.showInkAnnotation = !!(flags & 0x20);\n\to.showObjects = [\"all\", \"placeholders\", \"none\"][(flags >> 13) & 0x03];\n\to.showPivotChartFilter = !!(flags & 0x8000);\n\to.updateLinks = [\"userSet\", \"never\", \"always\"][(flags >> 8) & 0x03];\n\treturn o;\n}\nfunction write_BrtWbProp(data/*:?WBProps*/, o) {\n\tif(!o) o = new_buf(72);\n\tvar flags = 0;\n\tif(data) {\n\t\t/* TODO: mirror parse_BrtWbProp fields */\n\t\tif(data.filterPrivacy) flags |= 0x08;\n\t}\n\to.write_shift(4, flags);\n\to.write_shift(4, 0);\n\twrite_XLSBCodeName(data && data.CodeName || \"ThisWorkbook\", o);\n\treturn o.slice(0, o.l);\n}\n\nfunction parse_BrtFRTArchID$(data, length) {\n\tvar o = {};\n\tdata.read_shift(4);\n\to.ArchID = data.read_shift(4);\n\tdata.l += length - 8;\n\treturn o;\n}\n\n/* [MS-XLSB] 2.4.687 BrtName */\nfunction parse_BrtName(data, length, opts) {\n\tvar end = data.l + length;\n\tdata.l += 4; //var flags = data.read_shift(4);\n\tdata.l += 1; //var chKey = data.read_shift(1);\n\tvar itab = data.read_shift(4);\n\tvar name = parse_XLNameWideString(data);\n\tvar formula = parse_XLSBNameParsedFormula(data, 0, opts);\n\tvar comment = parse_XLNullableWideString(data);\n\t//if(0 /* fProc */) {\n\t\t// unusedstring1: XLNullableWideString\n\t\t// description: XLNullableWideString\n\t\t// helpTopic: XLNullableWideString\n\t\t// unusedstring2: XLNullableWideString\n\t//}\n\tdata.l = end;\n\tvar out = ({Name:name, Ptg:formula}/*:any*/);\n\tif(itab < 0xFFFFFFF) out.Sheet = itab;\n\tif(comment) out.Comment = comment;\n\treturn out;\n}\n\n/* [MS-XLSB] 2.1.7.61 Workbook */\nfunction parse_wb_bin(data, opts)/*:WorkbookFile*/ {\n\tvar wb = { AppVersion:{}, WBProps:{}, WBView:[], Sheets:[], CalcPr:{}, xmlns: \"\" };\n\tvar state/*:Array<string>*/ = [];\n\tvar pass = false;\n\n\tif(!opts) opts = {};\n\topts.biff = 12;\n\n\tvar Names = [];\n\tvar supbooks = ([[]]/*:any*/);\n\tsupbooks.SheetNames = [];\n\tsupbooks.XTI = [];\n\n\tXLSBRecordEnum[0x0010] = { n:\"BrtFRTArchID$\", f:parse_BrtFRTArchID$ };\n\n\trecordhopper(data, function hopper_wb(val, R, RT) {\n\t\tswitch(RT) {\n\t\t\tcase 0x009C: /* 'BrtBundleSh' */\n\t\t\t\tsupbooks.SheetNames.push(val.name);\n\t\t\t\twb.Sheets.push(val); break;\n\n\t\t\tcase 0x0099: /* 'BrtWbProp' */\n\t\t\t\twb.WBProps = val; break;\n\n\t\t\tcase 0x0027: /* 'BrtName' */\n\t\t\t\tif(val.Sheet != null) opts.SID = val.Sheet;\n\t\t\t\tval.Ref = stringify_formula(val.Ptg, null, null, supbooks, opts);\n\t\t\t\tdelete opts.SID;\n\t\t\t\tdelete val.Ptg;\n\t\t\t\tNames.push(val);\n\t\t\t\tbreak;\n\t\t\tcase 0x040C: /* 'BrtNameExt' */ break;\n\n\t\t\tcase 0x0165: /* 'BrtSupSelf' */\n\t\t\tcase 0x0166: /* 'BrtSupSame' */\n\t\t\tcase 0x0163: /* 'BrtSupBookSrc' */\n\t\t\tcase 0x029B: /* 'BrtSupAddin' */\n\t\t\t\tif(!supbooks[0].length) supbooks[0] = [RT, val];\n\t\t\t\telse supbooks.push([RT, val]);\n\t\t\t\tsupbooks[supbooks.length - 1].XTI = [];\n\t\t\t\tbreak;\n\t\t\tcase 0x016A: /* 'BrtExternSheet' */\n\t\t\t\tif(supbooks.length === 0) { supbooks[0] = []; supbooks[0].XTI = []; }\n\t\t\t\tsupbooks[supbooks.length - 1].XTI = supbooks[supbooks.length - 1].XTI.concat(val);\n\t\t\t\tsupbooks.XTI = supbooks.XTI.concat(val);\n\t\t\t\tbreak;\n\t\t\tcase 0x0169: /* 'BrtPlaceholderName' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0817: /* 'BrtAbsPath15' */\n\t\t\tcase 0x009E: /* 'BrtBookView' */\n\t\t\tcase 0x008F: /* 'BrtBeginBundleShs' */\n\t\t\tcase 0x0298: /* 'BrtBeginFnGroup' */\n\t\t\tcase 0x0161: /* 'BrtBeginExternals' */\n\t\t\t\tbreak;\n\n\t\t\t/* case 'BrtModelTimeGroupingCalcCol' */\n\t\t\tcase 0x0C00: /* 'BrtUid' */\n\t\t\tcase 0x0C01: /* 'BrtRevisionPtr' */\n\t\t\tcase 0x0216: /* 'BrtBookProtection' */\n\t\t\tcase 0x02A5: /* 'BrtBookProtectionIso' */\n\t\t\tcase 0x009D: /* 'BrtCalcProp' */\n\t\t\tcase 0x0262: /* 'BrtCrashRecErr' */\n\t\t\tcase 0x0802: /* 'BrtDecoupledPivotCacheID' */\n\t\t\tcase 0x009B: /* 'BrtFileRecover' */\n\t\t\tcase 0x0224: /* 'BrtFileSharing' */\n\t\t\tcase 0x02A4: /* 'BrtFileSharingIso' */\n\t\t\tcase 0x0080: /* 'BrtFileVersion' */\n\t\t\tcase 0x0299: /* 'BrtFnGroup' */\n\t\t\tcase 0x0850: /* 'BrtModelRelationship' */\n\t\t\tcase 0x084D: /* 'BrtModelTable' */\n\t\t\tcase 0x0225: /* 'BrtOleSize' */\n\t\t\tcase 0x0805: /* 'BrtPivotTableRef' */\n\t\t\tcase 0x0254: /* 'BrtSmartTagType' */\n\t\t\tcase 0x081C: /* 'BrtTableSlicerCacheID' */\n\t\t\tcase 0x081B: /* 'BrtTableSlicerCacheIDs' */\n\t\t\tcase 0x0822: /* 'BrtTimelineCachePivotCacheID' */\n\t\t\tcase 0x018D: /* 'BrtUserBookView' */\n\t\t\tcase 0x009A: /* 'BrtWbFactoid' */\n\t\t\tcase 0x045D: /* 'BrtWbProp14' */\n\t\t\tcase 0x0229: /* 'BrtWebOpt' */\n\t\t\tcase 0x082B: /* 'BrtWorkBookPr15' */\n\t\t\t\tbreak;\n\n\t\t\tcase 0x0023: /* 'BrtFRTBegin' */\n\t\t\t\tstate.push(RT); pass = true; break;\n\t\t\tcase 0x0024: /* 'BrtFRTEnd' */\n\t\t\t\tstate.pop(); pass = false; break;\n\t\t\tcase 0x0025: /* 'BrtACBegin' */\n\t\t\t\tstate.push(RT); pass = true; break;\n\t\t\tcase 0x0026: /* 'BrtACEnd' */\n\t\t\t\tstate.pop(); pass = false; break;\n\n\t\t\tcase 0x0010: /* 'BrtFRTArchID$' */ break;\n\n\t\t\tdefault:\n\t\t\t\tif(R.T){/* empty */}\n\t\t\t\telse if(!pass || (opts.WTF && state[state.length-1] != 0x0025 /* BrtACBegin */ && state[state.length-1] != 0x0023 /* BrtFRTBegin */)) throw new Error(\"Unexpected record 0x\" + RT.toString(16));\n\t\t}\n\t}, opts);\n\n\tparse_wb_defaults(wb);\n\n\t// $FlowIgnore\n\twb.Names = Names;\n\n\t(wb/*:any*/).supbooks = supbooks;\n\treturn wb;\n}\n\nfunction write_BUNDLESHS(ba, wb/*::, opts*/) {\n\twrite_record(ba, 0x008F /* BrtBeginBundleShs */);\n\tfor(var idx = 0; idx != wb.SheetNames.length; ++idx) {\n\t\tvar viz = wb.Workbook && wb.Workbook.Sheets && wb.Workbook.Sheets[idx] && wb.Workbook.Sheets[idx].Hidden || 0;\n\t\tvar d = { Hidden: viz, iTabID: idx+1, strRelID: 'rId' + (idx+1), name: wb.SheetNames[idx] };\n\t\twrite_record(ba, 0x009C /* BrtBundleSh */, write_BrtBundleSh(d));\n\t}\n\twrite_record(ba, 0x0090 /* BrtEndBundleShs */);\n}\n\n/* [MS-XLSB] 2.4.649 BrtFileVersion */\nfunction write_BrtFileVersion(data, o) {\n\tif(!o) o = new_buf(127);\n\tfor(var i = 0; i != 4; ++i) o.write_shift(4, 0);\n\twrite_XLWideString(\"SheetJS\", o);\n\twrite_XLWideString(XLSX.version, o);\n\twrite_XLWideString(XLSX.version, o);\n\twrite_XLWideString(\"7262\", o);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\n/* [MS-XLSB] 2.4.301 BrtBookView */\nfunction write_BrtBookView(idx, o) {\n\tif(!o) o = new_buf(29);\n\to.write_shift(-4, 0);\n\to.write_shift(-4, 460);\n\to.write_shift(4,  28800);\n\to.write_shift(4,  17600);\n\to.write_shift(4,  500);\n\to.write_shift(4,  idx);\n\to.write_shift(4,  idx);\n\tvar flags = 0x78;\n\to.write_shift(1,  flags);\n\treturn o.length > o.l ? o.slice(0, o.l) : o;\n}\n\nfunction write_BOOKVIEWS(ba, wb/*::, opts*/) {\n\t/* required if hidden tab appears before visible tab */\n\tif(!wb.Workbook || !wb.Workbook.Sheets) return;\n\tvar sheets = wb.Workbook.Sheets;\n\tvar i = 0, vistab = -1, hidden = -1;\n\tfor(; i < sheets.length; ++i) {\n\t\tif(!sheets[i] || !sheets[i].Hidden && vistab == -1) vistab = i;\n\t\telse if(sheets[i].Hidden == 1 && hidden == -1) hidden = i;\n\t}\n\tif(hidden > vistab) return;\n\twrite_record(ba, 0x0087 /* BrtBeginBookViews */);\n\twrite_record(ba, 0x009E /* BrtBookView */, write_BrtBookView(vistab));\n\t/* 1*(BrtBookView *FRT) */\n\twrite_record(ba, 0x0088 /* BrtEndBookViews */);\n}\n\n/* [MS-XLSB] 2.4.305 BrtCalcProp */\n/*function write_BrtCalcProp(data, o) {\n\tif(!o) o = new_buf(26);\n\to.write_shift(4,0); // force recalc\n\to.write_shift(4,1);\n\to.write_shift(4,0);\n\twrite_Xnum(0, o);\n\to.write_shift(-4, 1023);\n\to.write_shift(1, 0x33);\n\to.write_shift(1, 0x00);\n\treturn o;\n}*/\n\n/* [MS-XLSB] 2.4.646 BrtFileRecover */\n/*function write_BrtFileRecover(data, o) {\n\tif(!o) o = new_buf(1);\n\to.write_shift(1,0);\n\treturn o;\n}*/\n\n/* [MS-XLSB] 2.1.7.61 Workbook */\nfunction write_wb_bin(wb, opts) {\n\tvar ba = buf_array();\n\twrite_record(ba, 0x0083 /* BrtBeginBook */);\n\twrite_record(ba, 0x0080 /* BrtFileVersion */, write_BrtFileVersion());\n\t/* [[BrtFileSharingIso] BrtFileSharing] */\n\twrite_record(ba, 0x0099 /* BrtWbProp */, write_BrtWbProp(wb.Workbook && wb.Workbook.WBProps || null));\n\t/* [ACABSPATH] */\n\t/* [[BrtBookProtectionIso] BrtBookProtection] */\n\twrite_BOOKVIEWS(ba, wb, opts);\n\twrite_BUNDLESHS(ba, wb, opts);\n\t/* [FNGROUP] */\n\t/* [EXTERNALS] */\n\t/* *BrtName */\n\t/* write_record(ba, 0x009D BrtCalcProp, write_BrtCalcProp()); */\n\t/* [BrtOleSize] */\n\t/* *(BrtUserBookView *FRT) */\n\t/* [PIVOTCACHEIDS] */\n\t/* [BrtWbFactoid] */\n\t/* [SMARTTAGTYPES] */\n\t/* [BrtWebOpt] */\n\t/* write_record(ba, 0x009B BrtFileRecover, write_BrtFileRecover()); */\n\t/* [WEBPUBITEMS] */\n\t/* [CRERRS] */\n\t/* FRTWORKBOOK */\n\twrite_record(ba, 0x0084 /* BrtEndBook */);\n\n\treturn ba.end();\n}\nfunction parse_wb(data, name/*:string*/, opts)/*:WorkbookFile*/ {\n\tif(name.slice(-4)===\".bin\") return parse_wb_bin((data/*:any*/), opts);\n\treturn parse_wb_xml((data/*:any*/), opts);\n}\n\nfunction parse_ws(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {\n\tif(name.slice(-4)===\".bin\") return parse_ws_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);\n\treturn parse_ws_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);\n}\n\nfunction parse_cs(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {\n\tif(name.slice(-4)===\".bin\") return parse_cs_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);\n\treturn parse_cs_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);\n}\n\nfunction parse_ms(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {\n\tif(name.slice(-4)===\".bin\") return parse_ms_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);\n\treturn parse_ms_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);\n}\n\nfunction parse_ds(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {\n\tif(name.slice(-4)===\".bin\") return parse_ds_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);\n\treturn parse_ds_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);\n}\n\nfunction parse_sty(data, name/*:string*/, themes, opts) {\n\tif(name.slice(-4)===\".bin\") return parse_sty_bin((data/*:any*/), themes, opts);\n\treturn parse_sty_xml((data/*:any*/), themes, opts);\n}\n\nfunction parse_theme(data/*:string*/, name/*:string*/, opts) {\n\treturn parse_theme_xml(data, opts);\n}\n\nfunction parse_sst(data, name/*:string*/, opts)/*:SST*/ {\n\tif(name.slice(-4)===\".bin\") return parse_sst_bin((data/*:any*/), opts);\n\treturn parse_sst_xml((data/*:any*/), opts);\n}\n\nfunction parse_cmnt(data, name/*:string*/, opts)/*:Array<RawComment>*/ {\n\tif(name.slice(-4)===\".bin\") return parse_comments_bin((data/*:any*/), opts);\n\treturn parse_comments_xml((data/*:any*/), opts);\n}\n\nfunction parse_cc(data, name/*:string*/, opts) {\n\tif(name.slice(-4)===\".bin\") return parse_cc_bin((data/*:any*/), name, opts);\n\treturn parse_cc_xml((data/*:any*/), name, opts);\n}\n\nfunction parse_xlink(data, rel, name/*:string*/, opts) {\n\tif(name.slice(-4)===\".bin\") return parse_xlink_bin((data/*:any*/), rel, name, opts);\n\treturn parse_xlink_xml((data/*:any*/), rel, name, opts);\n}\n\nfunction parse_xlmeta(data, name/*:string*/, opts) {\n\tif(name.slice(-4)===\".bin\") return parse_xlmeta_bin((data/*:any*/), name, opts);\n\treturn parse_xlmeta_xml((data/*:any*/), name, opts);\n}\n\nfunction write_wb(wb, name/*:string*/, opts) {\n\treturn (name.slice(-4)===\".bin\" ? write_wb_bin : write_wb_xml)(wb, opts);\n}\n\nfunction write_ws(data/*:number*/, name/*:string*/, opts, wb/*:Workbook*/, rels) {\n\treturn (name.slice(-4)===\".bin\" ? write_ws_bin : write_ws_xml)(data, opts, wb, rels);\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction write_cs(data/*:number*/, name/*:string*/, opts, wb/*:Workbook*/, rels) {\n\treturn (name.slice(-4)===\".bin\" ? write_cs_bin : write_cs_xml)(data, opts, wb, rels);\n}\n\nfunction write_sty(data, name/*:string*/, opts) {\n\treturn (name.slice(-4)===\".bin\" ? write_sty_bin : write_sty_xml)(data, opts);\n}\n\nfunction write_sst(data/*:SST*/, name/*:string*/, opts) {\n\treturn (name.slice(-4)===\".bin\" ? write_sst_bin : write_sst_xml)(data, opts);\n}\n\nfunction write_cmnt(data/*:Array<any>*/, name/*:string*/, opts) {\n\treturn (name.slice(-4)===\".bin\" ? write_comments_bin : write_comments_xml)(data, opts);\n}\n/*\nfunction write_cc(data, name:string, opts) {\n\treturn (name.slice(-4)===\".bin\" ? write_cc_bin : write_cc_xml)(data, opts);\n}\n*/\n\nfunction write_xlmeta(name/*:string*/) {\n\treturn (name.slice(-4)===\".bin\" ? write_xlmeta_bin : write_xlmeta_xml)();\n}\nvar attregexg2=/([\\w:]+)=((?:\")([^\"]*)(?:\")|(?:')([^']*)(?:'))/g;\nvar attregex2=/([\\w:]+)=((?:\")(?:[^\"]*)(?:\")|(?:')(?:[^']*)(?:'))/;\nfunction xlml_parsexmltag(tag/*:string*/, skip_root/*:?boolean*/) {\n\tvar words = tag.split(/\\s+/);\n\tvar z/*:any*/ = ([]/*:any*/); if(!skip_root) z[0] = words[0];\n\tif(words.length === 1) return z;\n\tvar m = tag.match(attregexg2), y, j, w, i;\n\tif(m) for(i = 0; i != m.length; ++i) {\n\t\ty = m[i].match(attregex2);\n/*:: if(!y || !y[2]) continue; */\n\t\tif((j=y[1].indexOf(\":\")) === -1) z[y[1]] = y[2].slice(1,y[2].length-1);\n\t\telse {\n\t\t\tif(y[1].slice(0,6) === \"xmlns:\") w = \"xmlns\"+y[1].slice(6);\n\t\t\telse w = y[1].slice(j+1);\n\t\t\tz[w] = y[2].slice(1,y[2].length-1);\n\t\t}\n\t}\n\treturn z;\n}\nfunction xlml_parsexmltagobj(tag/*:string*/) {\n\tvar words = tag.split(/\\s+/);\n\tvar z = {};\n\tif(words.length === 1) return z;\n\tvar m = tag.match(attregexg2), y, j, w, i;\n\tif(m) for(i = 0; i != m.length; ++i) {\n\t\ty = m[i].match(attregex2);\n/*:: if(!y || !y[2]) continue; */\n\t\tif((j=y[1].indexOf(\":\")) === -1) z[y[1]] = y[2].slice(1,y[2].length-1);\n\t\telse {\n\t\t\tif(y[1].slice(0,6) === \"xmlns:\") w = \"xmlns\"+y[1].slice(6);\n\t\t\telse w = y[1].slice(j+1);\n\t\t\tz[w] = y[2].slice(1,y[2].length-1);\n\t\t}\n\t}\n\treturn z;\n}\n\n// ----\n\n/* map from xlml named formats to SSF TODO: localize */\nvar XLMLFormatMap/*: {[string]:string}*/;\n\nfunction xlml_format(format, value)/*:string*/ {\n\tvar fmt = XLMLFormatMap[format] || unescapexml(format);\n\tif(fmt === \"General\") return SSF_general(value);\n\treturn SSF_format(fmt, value);\n}\n\nfunction xlml_set_custprop(Custprops, key, cp, val/*:string*/) {\n\tvar oval/*:any*/ = val;\n\tswitch((cp[0].match(/dt:dt=\"([\\w.]+)\"/)||[\"\",\"\"])[1]) {\n\t\tcase \"boolean\": oval = parsexmlbool(val); break;\n\t\tcase \"i2\": case \"int\": oval = parseInt(val, 10); break;\n\t\tcase \"r4\": case \"float\": oval = parseFloat(val); break;\n\t\tcase \"date\": case \"dateTime.tz\": oval = parseDate(val); break;\n\t\tcase \"i8\": case \"string\": case \"fixed\": case \"uuid\": case \"bin.base64\": break;\n\t\tdefault: throw new Error(\"bad custprop:\" + cp[0]);\n\t}\n\tCustprops[unescapexml(key)] = oval;\n}\n\nfunction safe_format_xlml(cell/*:Cell*/, nf, o) {\n\tif(cell.t === 'z') return;\n\tif(!o || o.cellText !== false) try {\n\t\tif(cell.t === 'e') { cell.w = cell.w || BErr[cell.v]; }\n\t\telse if(nf === \"General\") {\n\t\t\tif(cell.t === 'n') {\n\t\t\t\tif((cell.v|0) === cell.v) cell.w = cell.v.toString(10);\n\t\t\t\telse cell.w = SSF_general_num(cell.v);\n\t\t\t}\n\t\t\telse cell.w = SSF_general(cell.v);\n\t\t}\n\t\telse cell.w = xlml_format(nf||\"General\", cell.v);\n\t} catch(e) { if(o.WTF) throw e; }\n\ttry {\n\t\tvar z = XLMLFormatMap[nf]||nf||\"General\";\n\t\tif(o.cellNF) cell.z = z;\n\t\tif(o.cellDates && cell.t == 'n' && fmt_is_date(z)) {\n\t\t\tvar _d = SSF_parse_date_code(cell.v); if(_d) { cell.t = 'd'; cell.v = new Date(_d.y, _d.m-1,_d.d,_d.H,_d.M,_d.S,_d.u); }\n\t\t}\n\t} catch(e) { if(o.WTF) throw e; }\n}\n\nfunction process_style_xlml(styles, stag, opts) {\n\tif(opts.cellStyles) {\n\t\tif(stag.Interior) {\n\t\t\tvar I = stag.Interior;\n\t\t\tif(I.Pattern) I.patternType = XLMLPatternTypeMap[I.Pattern] || I.Pattern;\n\t\t}\n\t}\n\tstyles[stag.ID] = stag;\n}\n\n/* TODO: there must exist some form of OSP-blessed spec */\nfunction parse_xlml_data(xml, ss, data, cell/*:any*/, base, styles, csty, row, arrayf, o) {\n\tvar nf = \"General\", sid = cell.StyleID, S = {}; o = o || {};\n\tvar interiors = [];\n\tvar i = 0;\n\tif(sid === undefined && row) sid = row.StyleID;\n\tif(sid === undefined && csty) sid = csty.StyleID;\n\twhile(styles[sid] !== undefined) {\n\t\tif(styles[sid].nf) nf = styles[sid].nf;\n\t\tif(styles[sid].Interior) interiors.push(styles[sid].Interior);\n\t\tif(!styles[sid].Parent) break;\n\t\tsid = styles[sid].Parent;\n\t}\n\tswitch(data.Type) {\n\t\tcase 'Boolean':\n\t\t\tcell.t = 'b';\n\t\t\tcell.v = parsexmlbool(xml);\n\t\t\tbreak;\n\t\tcase 'String':\n\t\t\tcell.t = 's'; cell.r = xlml_fixstr(unescapexml(xml));\n\t\t\tcell.v = (xml.indexOf(\"<\") > -1 ? unescapexml(ss||xml).replace(/<.*?>/g, \"\") : cell.r); // todo: BR etc\n\t\t\tbreak;\n\t\tcase 'DateTime':\n\t\t\tif(xml.slice(-1) != \"Z\") xml += \"Z\";\n\t\t\tcell.v = (parseDate(xml) - new Date(Date.UTC(1899, 11, 30))) / (24 * 60 * 60 * 1000);\n\t\t\tif(cell.v !== cell.v) cell.v = unescapexml(xml);\n\t\t\telse if(cell.v<60) cell.v = cell.v -1;\n\t\t\tif(!nf || nf == \"General\") nf = \"yyyy-mm-dd\";\n\t\t\t/* falls through */\n\t\tcase 'Number':\n\t\t\tif(cell.v === undefined) cell.v=+xml;\n\t\t\tif(!cell.t) cell.t = 'n';\n\t\t\tbreak;\n\t\tcase 'Error': cell.t = 'e'; cell.v = RBErr[xml]; if(o.cellText !== false) cell.w = xml; break;\n\t\tdefault:\n\t\t\tif(xml == \"\" && ss == \"\") { cell.t = 'z'; }\n\t\t\telse { cell.t = 's'; cell.v = xlml_fixstr(ss||xml); }\n\t\t\tbreak;\n\t}\n\tsafe_format_xlml(cell, nf, o);\n\tif(o.cellFormula !== false) {\n\t\tif(cell.Formula) {\n\t\t\tvar fstr = unescapexml(cell.Formula);\n\t\t\t/* strictly speaking, the leading = is required but some writers omit */\n\t\t\tif(fstr.charCodeAt(0) == 61 /* = */) fstr = fstr.slice(1);\n\t\t\tcell.f = rc_to_a1(fstr, base);\n\t\t\tdelete cell.Formula;\n\t\t\tif(cell.ArrayRange == \"RC\") cell.F = rc_to_a1(\"RC:RC\", base);\n\t\t\telse if(cell.ArrayRange) {\n\t\t\t\tcell.F = rc_to_a1(cell.ArrayRange, base);\n\t\t\t\tarrayf.push([safe_decode_range(cell.F), cell.F]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor(i = 0; i < arrayf.length; ++i)\n\t\t\t\tif(base.r >= arrayf[i][0].s.r && base.r <= arrayf[i][0].e.r)\n\t\t\t\t\tif(base.c >= arrayf[i][0].s.c && base.c <= arrayf[i][0].e.c)\n\t\t\t\t\t\tcell.F = arrayf[i][1];\n\t\t}\n\t}\n\tif(o.cellStyles) {\n\t\tinteriors.forEach(function(x) {\n\t\t\tif(!S.patternType && x.patternType) S.patternType = x.patternType;\n\t\t});\n\t\tcell.s = S;\n\t}\n\tif(cell.StyleID !== undefined) cell.ixfe = cell.StyleID;\n}\n\nfunction xlml_clean_comment(comment/*:any*/) {\n\tcomment.t = comment.v || \"\";\n\tcomment.t = comment.t.replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\");\n\tcomment.v = comment.w = comment.ixfe = undefined;\n}\n\n/* TODO: Everything */\nfunction parse_xlml_xml(d, _opts)/*:Workbook*/ {\n\tvar opts = _opts || {};\n\tmake_ssf();\n\tvar str = debom(xlml_normalize(d));\n\tif(opts.type == 'binary' || opts.type == 'array' || opts.type == 'base64') {\n\t\tif(typeof $cptable !== 'undefined') str = $cptable.utils.decode(65001, char_codes(str));\n\t\telse str = utf8read(str);\n\t}\n\tvar opening = str.slice(0, 1024).toLowerCase(), ishtml = false;\n\topening = opening.replace(/\".*?\"/g, \"\");\n\tif((opening.indexOf(\">\") & 1023) > Math.min((opening.indexOf(\",\") & 1023), (opening.indexOf(\";\")&1023))) { var _o = dup(opts); _o.type = \"string\"; return PRN.to_workbook(str, _o); }\n\tif(opening.indexOf(\"<?xml\") == -1) [\"html\", \"table\", \"head\", \"meta\", \"script\", \"style\", \"div\"].forEach(function(tag) { if(opening.indexOf(\"<\" + tag) >= 0) ishtml = true; });\n\tif(ishtml) return html_to_workbook(str, opts);\n\n\tXLMLFormatMap = ({\n\t\t\"General Number\": \"General\",\n\t\t\"General Date\": table_fmt[22],\n\t\t\"Long Date\": \"dddd, mmmm dd, yyyy\",\n\t\t\"Medium Date\": table_fmt[15],\n\t\t\"Short Date\": table_fmt[14],\n\t\t\"Long Time\": table_fmt[19],\n\t\t\"Medium Time\": table_fmt[18],\n\t\t\"Short Time\": table_fmt[20],\n\t\t\"Currency\": '\"$\"#,##0.00_);[Red]\\\\(\"$\"#,##0.00\\\\)',\n\t\t\"Fixed\": table_fmt[2],\n\t\t\"Standard\": table_fmt[4],\n\t\t\"Percent\": table_fmt[10],\n\t\t\"Scientific\": table_fmt[11],\n\t\t\"Yes/No\": '\"Yes\";\"Yes\";\"No\";@',\n\t\t\"True/False\": '\"True\";\"True\";\"False\";@',\n\t\t\"On/Off\": '\"Yes\";\"Yes\";\"No\";@'\n\t}/*:any*/);\n\n\n\tvar Rn;\n\tvar state = [], tmp;\n\tif(DENSE != null && opts.dense == null) opts.dense = DENSE;\n\tvar sheets = {}, sheetnames/*:Array<string>*/ = [], cursheet/*:Worksheet*/ = (opts.dense ? [] : {}), sheetname = \"\";\n\tvar cell = ({}/*:any*/), row = {};// eslint-disable-line no-unused-vars\n\tvar dtag = xlml_parsexmltag('<Data ss:Type=\"String\">'), didx = 0;\n\tvar c = 0, r = 0;\n\tvar refguess/*:Range*/ = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };\n\tvar styles = {}, stag = {};\n\tvar ss = \"\", fidx = 0;\n\tvar merges/*:Array<Range>*/ = [];\n\tvar Props = {}, Custprops = {}, pidx = 0, cp = [];\n\tvar comments/*:Array<Comment>*/ = [], comment/*:Comment*/ = ({}/*:any*/);\n\tvar cstys = [], csty, seencol = false;\n\tvar arrayf/*:Array<[Range, string]>*/ = [];\n\tvar rowinfo/*:Array<RowInfo>*/ = [], rowobj = {}, cc = 0, rr = 0;\n\tvar Workbook/*:WBWBProps*/ = ({ Sheets:[], WBProps:{date1904:false} }/*:any*/), wsprops = {};\n\txlmlregex.lastIndex = 0;\n\tstr = str.replace(/<!--([\\s\\S]*?)-->/mg,\"\");\n\tvar raw_Rn3 = \"\";\n\twhile((Rn = xlmlregex.exec(str))) switch((Rn[3] = (raw_Rn3 = Rn[3]).toLowerCase())) {\n\t\tcase 'data' /*case 'Data'*/:\n\t\t\tif(raw_Rn3 == \"data\") {\n\t\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));}\n\t\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(state[state.length-1][1]) break;\n\t\t\tif(Rn[1]==='/') parse_xlml_data(str.slice(didx, Rn.index), ss, dtag, state[state.length-1][0]==/*\"Comment\"*/\"comment\"?comment:cell, {c:c,r:r}, styles, cstys[c], row, arrayf, opts);\n\t\t\telse { ss = \"\"; dtag = xlml_parsexmltag(Rn[0]); didx = Rn.index + Rn[0].length; }\n\t\t\tbreak;\n\t\tcase 'cell' /*case 'Cell'*/:\n\t\t\tif(Rn[1]==='/'){\n\t\t\t\tif(comments.length > 0) cell.c = comments;\n\t\t\t\tif((!opts.sheetRows || opts.sheetRows > r) && cell.v !== undefined) {\n\t\t\t\t\tif(opts.dense) {\n\t\t\t\t\t\tif(!cursheet[r]) cursheet[r] = [];\n\t\t\t\t\t\tcursheet[r][c] = cell;\n\t\t\t\t\t} else cursheet[encode_col(c) + encode_row(r)] = cell;\n\t\t\t\t}\n\t\t\t\tif(cell.HRef) {\n\t\t\t\t\tcell.l = ({Target:unescapexml(cell.HRef)}/*:any*/);\n\t\t\t\t\tif(cell.HRefScreenTip) cell.l.Tooltip = cell.HRefScreenTip;\n\t\t\t\t\tdelete cell.HRef; delete cell.HRefScreenTip;\n\t\t\t\t}\n\t\t\t\tif(cell.MergeAcross || cell.MergeDown) {\n\t\t\t\t\tcc = c + (parseInt(cell.MergeAcross,10)|0);\n\t\t\t\t\trr = r + (parseInt(cell.MergeDown,10)|0);\n\t\t\t\t\tmerges.push({s:{c:c,r:r},e:{c:cc,r:rr}});\n\t\t\t\t}\n\t\t\t\tif(!opts.sheetStubs) { if(cell.MergeAcross) c = cc + 1; else ++c; }\n\t\t\t\telse if(cell.MergeAcross || cell.MergeDown) {\n\t\t\t\t\t/*:: if(!cc) cc = 0; if(!rr) rr = 0; */\n\t\t\t\t\tfor(var cma = c; cma <= cc; ++cma) {\n\t\t\t\t\t\tfor(var cmd = r; cmd <= rr; ++cmd) {\n\t\t\t\t\t\t\tif(cma > c || cmd > r) {\n\t\t\t\t\t\t\t\tif(opts.dense) {\n\t\t\t\t\t\t\t\t\tif(!cursheet[cmd]) cursheet[cmd] = [];\n\t\t\t\t\t\t\t\t\tcursheet[cmd][cma] = {t:'z'};\n\t\t\t\t\t\t\t\t} else cursheet[encode_col(cma) + encode_row(cmd)] = {t:'z'};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tc = cc + 1;\n\t\t\t\t}\n\t\t\t\telse ++c;\n\t\t\t} else {\n\t\t\t\tcell = xlml_parsexmltagobj(Rn[0]);\n\t\t\t\tif(cell.Index) c = +cell.Index - 1;\n\t\t\t\tif(c < refguess.s.c) refguess.s.c = c;\n\t\t\t\tif(c > refguess.e.c) refguess.e.c = c;\n\t\t\t\tif(Rn[0].slice(-2) === \"/>\") ++c;\n\t\t\t\tcomments = [];\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'row' /*case 'Row'*/:\n\t\t\tif(Rn[1]==='/' || Rn[0].slice(-2) === \"/>\") {\n\t\t\t\tif(r < refguess.s.r) refguess.s.r = r;\n\t\t\t\tif(r > refguess.e.r) refguess.e.r = r;\n\t\t\t\tif(Rn[0].slice(-2) === \"/>\") {\n\t\t\t\t\trow = xlml_parsexmltag(Rn[0]);\n\t\t\t\t\tif(row.Index) r = +row.Index - 1;\n\t\t\t\t}\n\t\t\t\tc = 0; ++r;\n\t\t\t} else {\n\t\t\t\trow = xlml_parsexmltag(Rn[0]);\n\t\t\t\tif(row.Index) r = +row.Index - 1;\n\t\t\t\trowobj = {};\n\t\t\t\tif(row.AutoFitHeight == \"0\" || row.Height) {\n\t\t\t\t\trowobj.hpx = parseInt(row.Height, 10); rowobj.hpt = px2pt(rowobj.hpx);\n\t\t\t\t\trowinfo[r] = rowobj;\n\t\t\t\t}\n\t\t\t\tif(row.Hidden == \"1\") { rowobj.hidden = true; rowinfo[r] = rowobj; }\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'worksheet' /*case 'Worksheet'*/: /* TODO: read range from FullRows/FullColumns */\n\t\t\tif(Rn[1]==='/'){\n\t\t\t\tif((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));\n\t\t\t\tsheetnames.push(sheetname);\n\t\t\t\tif(refguess.s.r <= refguess.e.r && refguess.s.c <= refguess.e.c) {\n\t\t\t\t\tcursheet[\"!ref\"] = encode_range(refguess);\n\t\t\t\t\tif(opts.sheetRows && opts.sheetRows <= refguess.e.r) {\n\t\t\t\t\t\tcursheet[\"!fullref\"] = cursheet[\"!ref\"];\n\t\t\t\t\t\trefguess.e.r = opts.sheetRows - 1;\n\t\t\t\t\t\tcursheet[\"!ref\"] = encode_range(refguess);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(merges.length) cursheet[\"!merges\"] = merges;\n\t\t\t\tif(cstys.length > 0) cursheet[\"!cols\"] = cstys;\n\t\t\t\tif(rowinfo.length > 0) cursheet[\"!rows\"] = rowinfo;\n\t\t\t\tsheets[sheetname] = cursheet;\n\t\t\t} else {\n\t\t\t\trefguess = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };\n\t\t\t\tr = c = 0;\n\t\t\t\tstate.push([Rn[3], false]);\n\t\t\t\ttmp = xlml_parsexmltag(Rn[0]);\n\t\t\t\tsheetname = unescapexml(tmp.Name);\n\t\t\t\tcursheet = (opts.dense ? [] : {});\n\t\t\t\tmerges = [];\n\t\t\t\tarrayf = [];\n\t\t\t\trowinfo = [];\n\t\t\t\twsprops = {name:sheetname, Hidden:0};\n\t\t\t\tWorkbook.Sheets.push(wsprops);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'table' /*case 'Table'*/:\n\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));}\n\t\t\telse if(Rn[0].slice(-2) == \"/>\") break;\n\t\t\telse {\n\t\t\t\tstate.push([Rn[3], false]);\n\t\t\t\tcstys = []; seencol = false;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'style' /*case 'Style'*/:\n\t\t\tif(Rn[1]==='/') process_style_xlml(styles, stag, opts);\n\t\t\telse stag = xlml_parsexmltag(Rn[0]);\n\t\t\tbreak;\n\n\t\tcase 'numberformat' /*case 'NumberFormat'*/:\n\t\t\tstag.nf = unescapexml(xlml_parsexmltag(Rn[0]).Format || \"General\");\n\t\t\tif(XLMLFormatMap[stag.nf]) stag.nf = XLMLFormatMap[stag.nf];\n\t\t\tfor(var ssfidx = 0; ssfidx != 0x188; ++ssfidx) if(table_fmt[ssfidx] == stag.nf) break;\n\t\t\tif(ssfidx == 0x188) for(ssfidx = 0x39; ssfidx != 0x188; ++ssfidx) if(table_fmt[ssfidx] == null) { SSF_load(stag.nf, ssfidx); break; }\n\t\t\tbreak;\n\n\t\tcase 'column' /*case 'Column'*/:\n\t\t\tif(state[state.length-1][0] !== /*'Table'*/'table') break;\n\t\t\tcsty = xlml_parsexmltag(Rn[0]);\n\t\t\tif(csty.Hidden) { csty.hidden = true; delete csty.Hidden; }\n\t\t\tif(csty.Width) csty.wpx = parseInt(csty.Width, 10);\n\t\t\tif(!seencol && csty.wpx > 10) {\n\t\t\t\tseencol = true; MDW = DEF_MDW; //find_mdw_wpx(csty.wpx);\n\t\t\t\tfor(var _col = 0; _col < cstys.length; ++_col) if(cstys[_col]) process_col(cstys[_col]);\n\t\t\t}\n\t\t\tif(seencol) process_col(csty);\n\t\t\tcstys[(csty.Index-1||cstys.length)] = csty;\n\t\t\tfor(var i = 0; i < +csty.Span; ++i) cstys[cstys.length] = dup(csty);\n\t\t\tbreak;\n\n\t\tcase 'namedrange' /*case 'NamedRange'*/:\n\t\t\tif(Rn[1]==='/') break;\n\t\t\tif(!Workbook.Names) Workbook.Names = [];\n\t\t\tvar _NamedRange = parsexmltag(Rn[0]);\n\t\t\tvar _DefinedName/*:DefinedName*/ = ({\n\t\t\t\tName: _NamedRange.Name,\n\t\t\t\tRef: rc_to_a1(_NamedRange.RefersTo.slice(1), {r:0, c:0})\n\t\t\t}/*:any*/);\n\t\t\tif(Workbook.Sheets.length>0) _DefinedName.Sheet=Workbook.Sheets.length-1;\n\t\t\t/*:: if(Workbook.Names) */Workbook.Names.push(_DefinedName);\n\t\t\tbreak;\n\n\t\tcase 'namedcell' /*case 'NamedCell'*/: break;\n\t\tcase 'b' /*case 'B'*/: break;\n\t\tcase 'i' /*case 'I'*/: break;\n\t\tcase 'u' /*case 'U'*/: break;\n\t\tcase 's' /*case 'S'*/: break;\n\t\tcase 'em' /*case 'EM'*/: break;\n\t\tcase 'h2' /*case 'H2'*/: break;\n\t\tcase 'h3' /*case 'H3'*/: break;\n\t\tcase 'sub' /*case 'Sub'*/: break;\n\t\tcase 'sup' /*case 'Sup'*/: break;\n\t\tcase 'span' /*case 'Span'*/: break;\n\t\tcase 'alignment' /*case 'Alignment'*/:\n\t\t\tbreak;\n\t\tcase 'borders' /*case 'Borders'*/: break;\n\t\tcase 'border' /*case 'Border'*/: break;\n\t\tcase 'font' /*case 'Font'*/:\n\t\t\tif(Rn[0].slice(-2) === \"/>\") break;\n\t\t\telse if(Rn[1]===\"/\") ss += str.slice(fidx, Rn.index);\n\t\t\telse fidx = Rn.index + Rn[0].length;\n\t\t\tbreak;\n\t\tcase 'interior' /*case 'Interior'*/:\n\t\t\tif(!opts.cellStyles) break;\n\t\t\tstag.Interior = xlml_parsexmltag(Rn[0]);\n\t\t\tbreak;\n\t\tcase 'protection' /*case 'Protection'*/: break;\n\n\t\tcase 'author' /*case 'Author'*/:\n\t\tcase 'title' /*case 'Title'*/:\n\t\tcase 'description' /*case 'Description'*/:\n\t\tcase 'created' /*case 'Created'*/:\n\t\tcase 'keywords' /*case 'Keywords'*/:\n\t\tcase 'subject' /*case 'Subject'*/:\n\t\tcase 'category' /*case 'Category'*/:\n\t\tcase 'company' /*case 'Company'*/:\n\t\tcase 'lastauthor' /*case 'LastAuthor'*/:\n\t\tcase 'lastsaved' /*case 'LastSaved'*/:\n\t\tcase 'lastprinted' /*case 'LastPrinted'*/:\n\t\tcase 'version' /*case 'Version'*/:\n\t\tcase 'revision' /*case 'Revision'*/:\n\t\tcase 'totaltime' /*case 'TotalTime'*/:\n\t\tcase 'hyperlinkbase' /*case 'HyperlinkBase'*/:\n\t\tcase 'manager' /*case 'Manager'*/:\n\t\tcase 'contentstatus' /*case 'ContentStatus'*/:\n\t\tcase 'identifier' /*case 'Identifier'*/:\n\t\tcase 'language' /*case 'Language'*/:\n\t\tcase 'appname' /*case 'AppName'*/:\n\t\t\tif(Rn[0].slice(-2) === \"/>\") break;\n\t\t\telse if(Rn[1]===\"/\") xlml_set_prop(Props, raw_Rn3, str.slice(pidx, Rn.index));\n\t\t\telse pidx = Rn.index + Rn[0].length;\n\t\t\tbreak;\n\t\tcase 'paragraphs' /*case 'Paragraphs'*/: break;\n\n\t\tcase 'styles' /*case 'Styles'*/:\n\t\tcase 'workbook' /*case 'Workbook'*/:\n\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));}\n\t\t\telse state.push([Rn[3], false]);\n\t\t\tbreak;\n\n\t\tcase 'comment' /*case 'Comment'*/:\n\t\t\tif(Rn[1]==='/'){\n\t\t\t\tif((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));\n\t\t\t\txlml_clean_comment(comment);\n\t\t\t\tcomments.push(comment);\n\t\t\t} else {\n\t\t\t\tstate.push([Rn[3], false]);\n\t\t\t\ttmp = xlml_parsexmltag(Rn[0]);\n\t\t\t\tcomment = ({a:tmp.Author}/*:any*/);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'autofilter' /*case 'AutoFilter'*/:\n\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));}\n\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') {\n\t\t\t\tvar AutoFilter = xlml_parsexmltag(Rn[0]);\n\t\t\t\tcursheet['!autofilter'] = { ref:rc_to_a1(AutoFilter.Range).replace(/\\$/g,\"\") };\n\t\t\t\tstate.push([Rn[3], true]);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'name' /*case 'Name'*/: break;\n\n\t\tcase 'datavalidation' /*case 'DataValidation'*/:\n\t\t\tif(Rn[1]==='/'){\n\t\t\t\tif((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));\n\t\t\t} else {\n\t\t\t\tif(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'pixelsperinch' /*case 'PixelsPerInch'*/:\n\t\t\tbreak;\n\t\tcase 'componentoptions' /*case 'ComponentOptions'*/:\n\t\tcase 'documentproperties' /*case 'DocumentProperties'*/:\n\t\tcase 'customdocumentproperties' /*case 'CustomDocumentProperties'*/:\n\t\tcase 'officedocumentsettings' /*case 'OfficeDocumentSettings'*/:\n\t\tcase 'pivottable' /*case 'PivotTable'*/:\n\t\tcase 'pivotcache' /*case 'PivotCache'*/:\n\t\tcase 'names' /*case 'Names'*/:\n\t\tcase 'mapinfo' /*case 'MapInfo'*/:\n\t\tcase 'pagebreaks' /*case 'PageBreaks'*/:\n\t\tcase 'querytable' /*case 'QueryTable'*/:\n\t\tcase 'sorting' /*case 'Sorting'*/:\n\t\tcase 'schema' /*case 'Schema'*/: //case 'data' /*case 'data'*/:\n\t\tcase 'conditionalformatting' /*case 'ConditionalFormatting'*/:\n\t\tcase 'smarttagtype' /*case 'SmartTagType'*/:\n\t\tcase 'smarttags' /*case 'SmartTags'*/:\n\t\tcase 'excelworkbook' /*case 'ExcelWorkbook'*/:\n\t\tcase 'workbookoptions' /*case 'WorkbookOptions'*/:\n\t\tcase 'worksheetoptions' /*case 'WorksheetOptions'*/:\n\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error(\"Bad state: \"+tmp.join(\"|\"));}\n\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);\n\t\t\tbreak;\n\n\t\tcase 'null' /*case 'Null'*/: break;\n\n\t\tdefault:\n\t\t\t/* FODS file root is <office:document> */\n\t\t\tif(state.length == 0 && Rn[3] == \"document\") return parse_fods(str, opts);\n\t\t\t/* UOS file root is <uof:UOF> */\n\t\t\tif(state.length == 0 && Rn[3] == \"uof\"/*\"UOF\"*/) return parse_fods(str, opts);\n\n\t\t\tvar seen = true;\n\t\t\tswitch(state[state.length-1][0]) {\n\t\t\t\t/* OfficeDocumentSettings */\n\t\t\t\tcase 'officedocumentsettings' /*case 'OfficeDocumentSettings'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'allowpng' /*case 'AllowPNG'*/: break;\n\t\t\t\t\tcase 'removepersonalinformation' /*case 'RemovePersonalInformation'*/: break;\n\t\t\t\t\tcase 'downloadcomponents' /*case 'DownloadComponents'*/: break;\n\t\t\t\t\tcase 'locationofcomponents' /*case 'LocationOfComponents'*/: break;\n\t\t\t\t\tcase 'colors' /*case 'Colors'*/: break;\n\t\t\t\t\tcase 'color' /*case 'Color'*/: break;\n\t\t\t\t\tcase 'index' /*case 'Index'*/: break;\n\t\t\t\t\tcase 'rgb' /*case 'RGB'*/: break;\n\t\t\t\t\tcase 'targetscreensize' /*case 'TargetScreenSize'*/: break;\n\t\t\t\t\tcase 'readonlyrecommended' /*case 'ReadOnlyRecommended'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* ComponentOptions */\n\t\t\t\tcase 'componentoptions' /*case 'ComponentOptions'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'toolbar' /*case 'Toolbar'*/: break;\n\t\t\t\t\tcase 'hideofficelogo' /*case 'HideOfficeLogo'*/: break;\n\t\t\t\t\tcase 'spreadsheetautofit' /*case 'SpreadsheetAutoFit'*/: break;\n\t\t\t\t\tcase 'label' /*case 'Label'*/: break;\n\t\t\t\t\tcase 'caption' /*case 'Caption'*/: break;\n\t\t\t\t\tcase 'maxheight' /*case 'MaxHeight'*/: break;\n\t\t\t\t\tcase 'maxwidth' /*case 'MaxWidth'*/: break;\n\t\t\t\t\tcase 'nextsheetnumber' /*case 'NextSheetNumber'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* ExcelWorkbook */\n\t\t\t\tcase 'excelworkbook' /*case 'ExcelWorkbook'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'date1904' /*case 'Date1904'*/:\n\t\t\t\t\t\t/*:: if(!Workbook.WBProps) Workbook.WBProps = {}; */\n\t\t\t\t\t\tWorkbook.WBProps.date1904 = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'windowheight' /*case 'WindowHeight'*/: break;\n\t\t\t\t\tcase 'windowwidth' /*case 'WindowWidth'*/: break;\n\t\t\t\t\tcase 'windowtopx' /*case 'WindowTopX'*/: break;\n\t\t\t\t\tcase 'windowtopy' /*case 'WindowTopY'*/: break;\n\t\t\t\t\tcase 'tabratio' /*case 'TabRatio'*/: break;\n\t\t\t\t\tcase 'protectstructure' /*case 'ProtectStructure'*/: break;\n\t\t\t\t\tcase 'protectwindow' /*case 'ProtectWindow'*/: break;\n\t\t\t\t\tcase 'protectwindows' /*case 'ProtectWindows'*/: break;\n\t\t\t\t\tcase 'activesheet' /*case 'ActiveSheet'*/: break;\n\t\t\t\t\tcase 'displayinknotes' /*case 'DisplayInkNotes'*/: break;\n\t\t\t\t\tcase 'firstvisiblesheet' /*case 'FirstVisibleSheet'*/: break;\n\t\t\t\t\tcase 'supbook' /*case 'SupBook'*/: break;\n\t\t\t\t\tcase 'sheetname' /*case 'SheetName'*/: break;\n\t\t\t\t\tcase 'sheetindex' /*case 'SheetIndex'*/: break;\n\t\t\t\t\tcase 'sheetindexfirst' /*case 'SheetIndexFirst'*/: break;\n\t\t\t\t\tcase 'sheetindexlast' /*case 'SheetIndexLast'*/: break;\n\t\t\t\t\tcase 'dll' /*case 'Dll'*/: break;\n\t\t\t\t\tcase 'acceptlabelsinformulas' /*case 'AcceptLabelsInFormulas'*/: break;\n\t\t\t\t\tcase 'donotsavelinkvalues' /*case 'DoNotSaveLinkValues'*/: break;\n\t\t\t\t\tcase 'iteration' /*case 'Iteration'*/: break;\n\t\t\t\t\tcase 'maxiterations' /*case 'MaxIterations'*/: break;\n\t\t\t\t\tcase 'maxchange' /*case 'MaxChange'*/: break;\n\t\t\t\t\tcase 'path' /*case 'Path'*/: break;\n\t\t\t\t\tcase 'xct' /*case 'Xct'*/: break;\n\t\t\t\t\tcase 'count' /*case 'Count'*/: break;\n\t\t\t\t\tcase 'selectedsheets' /*case 'SelectedSheets'*/: break;\n\t\t\t\t\tcase 'calculation' /*case 'Calculation'*/: break;\n\t\t\t\t\tcase 'uncalced' /*case 'Uncalced'*/: break;\n\t\t\t\t\tcase 'startupprompt' /*case 'StartupPrompt'*/: break;\n\t\t\t\t\tcase 'crn' /*case 'Crn'*/: break;\n\t\t\t\t\tcase 'externname' /*case 'ExternName'*/: break;\n\t\t\t\t\tcase 'formula' /*case 'Formula'*/: break;\n\t\t\t\t\tcase 'colfirst' /*case 'ColFirst'*/: break;\n\t\t\t\t\tcase 'collast' /*case 'ColLast'*/: break;\n\t\t\t\t\tcase 'wantadvise' /*case 'WantAdvise'*/: break;\n\t\t\t\t\tcase 'boolean' /*case 'Boolean'*/: break;\n\t\t\t\t\tcase 'error' /*case 'Error'*/: break;\n\t\t\t\t\tcase 'text' /*case 'Text'*/: break;\n\t\t\t\t\tcase 'ole' /*case 'OLE'*/: break;\n\t\t\t\t\tcase 'noautorecover' /*case 'NoAutoRecover'*/: break;\n\t\t\t\t\tcase 'publishobjects' /*case 'PublishObjects'*/: break;\n\t\t\t\t\tcase 'donotcalculatebeforesave' /*case 'DoNotCalculateBeforeSave'*/: break;\n\t\t\t\t\tcase 'number' /*case 'Number'*/: break;\n\t\t\t\t\tcase 'refmoder1c1' /*case 'RefModeR1C1'*/: break;\n\t\t\t\t\tcase 'embedsavesmarttags' /*case 'EmbedSaveSmartTags'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* WorkbookOptions */\n\t\t\t\tcase 'workbookoptions' /*case 'WorkbookOptions'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'owcversion' /*case 'OWCVersion'*/: break;\n\t\t\t\t\tcase 'height' /*case 'Height'*/: break;\n\t\t\t\t\tcase 'width' /*case 'Width'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* WorksheetOptions */\n\t\t\t\tcase 'worksheetoptions' /*case 'WorksheetOptions'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'visible' /*case 'Visible'*/:\n\t\t\t\t\t\tif(Rn[0].slice(-2) === \"/>\"){/* empty */}\n\t\t\t\t\t\telse if(Rn[1]===\"/\") switch(str.slice(pidx, Rn.index)) {\n\t\t\t\t\t\t\tcase \"SheetHidden\": wsprops.Hidden = 1; break;\n\t\t\t\t\t\t\tcase \"SheetVeryHidden\": wsprops.Hidden = 2; break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse pidx = Rn.index + Rn[0].length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'header' /*case 'Header'*/:\n\t\t\t\t\t\tif(!cursheet['!margins']) default_margins(cursheet['!margins']={}, 'xlml');\n\t\t\t\t\t\tif(!isNaN(+parsexmltag(Rn[0]).Margin)) cursheet['!margins'].header = +parsexmltag(Rn[0]).Margin;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'footer' /*case 'Footer'*/:\n\t\t\t\t\t\tif(!cursheet['!margins']) default_margins(cursheet['!margins']={}, 'xlml');\n\t\t\t\t\t\tif(!isNaN(+parsexmltag(Rn[0]).Margin)) cursheet['!margins'].footer = +parsexmltag(Rn[0]).Margin;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'pagemargins' /*case 'PageMargins'*/:\n\t\t\t\t\t\tvar pagemargins = parsexmltag(Rn[0]);\n\t\t\t\t\t\tif(!cursheet['!margins']) default_margins(cursheet['!margins']={},'xlml');\n\t\t\t\t\t\tif(!isNaN(+pagemargins.Top)) cursheet['!margins'].top = +pagemargins.Top;\n\t\t\t\t\t\tif(!isNaN(+pagemargins.Left)) cursheet['!margins'].left = +pagemargins.Left;\n\t\t\t\t\t\tif(!isNaN(+pagemargins.Right)) cursheet['!margins'].right = +pagemargins.Right;\n\t\t\t\t\t\tif(!isNaN(+pagemargins.Bottom)) cursheet['!margins'].bottom = +pagemargins.Bottom;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'displayrighttoleft' /*case 'DisplayRightToLeft'*/:\n\t\t\t\t\t\tif(!Workbook.Views) Workbook.Views = [];\n\t\t\t\t\t\tif(!Workbook.Views[0]) Workbook.Views[0] = {};\n\t\t\t\t\t\tWorkbook.Views[0].RTL = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'freezepanes' /*case 'FreezePanes'*/: break;\n\t\t\t\t\tcase 'frozennosplit' /*case 'FrozenNoSplit'*/: break;\n\n\t\t\t\t\tcase 'splithorizontal' /*case 'SplitHorizontal'*/:\n\t\t\t\t\tcase 'splitvertical' /*case 'SplitVertical'*/:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'donotdisplaygridlines' /*case 'DoNotDisplayGridlines'*/:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'activerow' /*case 'ActiveRow'*/: break;\n\t\t\t\t\tcase 'activecol' /*case 'ActiveCol'*/: break;\n\t\t\t\t\tcase 'toprowbottompane' /*case 'TopRowBottomPane'*/: break;\n\t\t\t\t\tcase 'leftcolumnrightpane' /*case 'LeftColumnRightPane'*/: break;\n\n\t\t\t\t\tcase 'unsynced' /*case 'Unsynced'*/: break;\n\t\t\t\t\tcase 'print' /*case 'Print'*/: break;\n\t\t\t\t\tcase 'printerrors' /*case 'PrintErrors'*/: break;\n\t\t\t\t\tcase 'panes' /*case 'Panes'*/: break;\n\t\t\t\t\tcase 'scale' /*case 'Scale'*/: break;\n\t\t\t\t\tcase 'pane' /*case 'Pane'*/: break;\n\t\t\t\t\tcase 'number' /*case 'Number'*/: break;\n\t\t\t\t\tcase 'layout' /*case 'Layout'*/: break;\n\t\t\t\t\tcase 'pagesetup' /*case 'PageSetup'*/: break;\n\t\t\t\t\tcase 'selected' /*case 'Selected'*/: break;\n\t\t\t\t\tcase 'protectobjects' /*case 'ProtectObjects'*/: break;\n\t\t\t\t\tcase 'enableselection' /*case 'EnableSelection'*/: break;\n\t\t\t\t\tcase 'protectscenarios' /*case 'ProtectScenarios'*/: break;\n\t\t\t\t\tcase 'validprinterinfo' /*case 'ValidPrinterInfo'*/: break;\n\t\t\t\t\tcase 'horizontalresolution' /*case 'HorizontalResolution'*/: break;\n\t\t\t\t\tcase 'verticalresolution' /*case 'VerticalResolution'*/: break;\n\t\t\t\t\tcase 'numberofcopies' /*case 'NumberofCopies'*/: break;\n\t\t\t\t\tcase 'activepane' /*case 'ActivePane'*/: break;\n\t\t\t\t\tcase 'toprowvisible' /*case 'TopRowVisible'*/: break;\n\t\t\t\t\tcase 'leftcolumnvisible' /*case 'LeftColumnVisible'*/: break;\n\t\t\t\t\tcase 'fittopage' /*case 'FitToPage'*/: break;\n\t\t\t\t\tcase 'rangeselection' /*case 'RangeSelection'*/: break;\n\t\t\t\t\tcase 'papersizeindex' /*case 'PaperSizeIndex'*/: break;\n\t\t\t\t\tcase 'pagelayoutzoom' /*case 'PageLayoutZoom'*/: break;\n\t\t\t\t\tcase 'pagebreakzoom' /*case 'PageBreakZoom'*/: break;\n\t\t\t\t\tcase 'filteron' /*case 'FilterOn'*/: break;\n\t\t\t\t\tcase 'fitwidth' /*case 'FitWidth'*/: break;\n\t\t\t\t\tcase 'fitheight' /*case 'FitHeight'*/: break;\n\t\t\t\t\tcase 'commentslayout' /*case 'CommentsLayout'*/: break;\n\t\t\t\t\tcase 'zoom' /*case 'Zoom'*/: break;\n\t\t\t\t\tcase 'lefttoright' /*case 'LeftToRight'*/: break;\n\t\t\t\t\tcase 'gridlines' /*case 'Gridlines'*/: break;\n\t\t\t\t\tcase 'allowsort' /*case 'AllowSort'*/: break;\n\t\t\t\t\tcase 'allowfilter' /*case 'AllowFilter'*/: break;\n\t\t\t\t\tcase 'allowinsertrows' /*case 'AllowInsertRows'*/: break;\n\t\t\t\t\tcase 'allowdeleterows' /*case 'AllowDeleteRows'*/: break;\n\t\t\t\t\tcase 'allowinsertcols' /*case 'AllowInsertCols'*/: break;\n\t\t\t\t\tcase 'allowdeletecols' /*case 'AllowDeleteCols'*/: break;\n\t\t\t\t\tcase 'allowinserthyperlinks' /*case 'AllowInsertHyperlinks'*/: break;\n\t\t\t\t\tcase 'allowformatcells' /*case 'AllowFormatCells'*/: break;\n\t\t\t\t\tcase 'allowsizecols' /*case 'AllowSizeCols'*/: break;\n\t\t\t\t\tcase 'allowsizerows' /*case 'AllowSizeRows'*/: break;\n\t\t\t\t\tcase 'nosummaryrowsbelowdetail' /*case 'NoSummaryRowsBelowDetail'*/:\n\t\t\t\t\t\tif(!cursheet[\"!outline\"]) cursheet[\"!outline\"] = {};\n\t\t\t\t\t\tcursheet[\"!outline\"].above = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'tabcolorindex' /*case 'TabColorIndex'*/: break;\n\t\t\t\t\tcase 'donotdisplayheadings' /*case 'DoNotDisplayHeadings'*/: break;\n\t\t\t\t\tcase 'showpagelayoutzoom' /*case 'ShowPageLayoutZoom'*/: break;\n\t\t\t\t\tcase 'nosummarycolumnsrightdetail' /*case 'NoSummaryColumnsRightDetail'*/:\n\t\t\t\t\t\tif(!cursheet[\"!outline\"]) cursheet[\"!outline\"] = {};\n\t\t\t\t\t\tcursheet[\"!outline\"].left = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'blackandwhite' /*case 'BlackAndWhite'*/: break;\n\t\t\t\t\tcase 'donotdisplayzeros' /*case 'DoNotDisplayZeros'*/: break;\n\t\t\t\t\tcase 'displaypagebreak' /*case 'DisplayPageBreak'*/: break;\n\t\t\t\t\tcase 'rowcolheadings' /*case 'RowColHeadings'*/: break;\n\t\t\t\t\tcase 'donotdisplayoutline' /*case 'DoNotDisplayOutline'*/: break;\n\t\t\t\t\tcase 'noorientation' /*case 'NoOrientation'*/: break;\n\t\t\t\t\tcase 'allowusepivottables' /*case 'AllowUsePivotTables'*/: break;\n\t\t\t\t\tcase 'zeroheight' /*case 'ZeroHeight'*/: break;\n\t\t\t\t\tcase 'viewablerange' /*case 'ViewableRange'*/: break;\n\t\t\t\t\tcase 'selection' /*case 'Selection'*/: break;\n\t\t\t\t\tcase 'protectcontents' /*case 'ProtectContents'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* PivotTable */\n\t\t\t\tcase 'pivottable' /*case 'PivotTable'*/: case 'pivotcache' /*case 'PivotCache'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'immediateitemsondrop' /*case 'ImmediateItemsOnDrop'*/: break;\n\t\t\t\t\tcase 'showpagemultipleitemlabel' /*case 'ShowPageMultipleItemLabel'*/: break;\n\t\t\t\t\tcase 'compactrowindent' /*case 'CompactRowIndent'*/: break;\n\t\t\t\t\tcase 'location' /*case 'Location'*/: break;\n\t\t\t\t\tcase 'pivotfield' /*case 'PivotField'*/: break;\n\t\t\t\t\tcase 'orientation' /*case 'Orientation'*/: break;\n\t\t\t\t\tcase 'layoutform' /*case 'LayoutForm'*/: break;\n\t\t\t\t\tcase 'layoutsubtotallocation' /*case 'LayoutSubtotalLocation'*/: break;\n\t\t\t\t\tcase 'layoutcompactrow' /*case 'LayoutCompactRow'*/: break;\n\t\t\t\t\tcase 'position' /*case 'Position'*/: break;\n\t\t\t\t\tcase 'pivotitem' /*case 'PivotItem'*/: break;\n\t\t\t\t\tcase 'datatype' /*case 'DataType'*/: break;\n\t\t\t\t\tcase 'datafield' /*case 'DataField'*/: break;\n\t\t\t\t\tcase 'sourcename' /*case 'SourceName'*/: break;\n\t\t\t\t\tcase 'parentfield' /*case 'ParentField'*/: break;\n\t\t\t\t\tcase 'ptlineitems' /*case 'PTLineItems'*/: break;\n\t\t\t\t\tcase 'ptlineitem' /*case 'PTLineItem'*/: break;\n\t\t\t\t\tcase 'countofsameitems' /*case 'CountOfSameItems'*/: break;\n\t\t\t\t\tcase 'item' /*case 'Item'*/: break;\n\t\t\t\t\tcase 'itemtype' /*case 'ItemType'*/: break;\n\t\t\t\t\tcase 'ptsource' /*case 'PTSource'*/: break;\n\t\t\t\t\tcase 'cacheindex' /*case 'CacheIndex'*/: break;\n\t\t\t\t\tcase 'consolidationreference' /*case 'ConsolidationReference'*/: break;\n\t\t\t\t\tcase 'filename' /*case 'FileName'*/: break;\n\t\t\t\t\tcase 'reference' /*case 'Reference'*/: break;\n\t\t\t\t\tcase 'nocolumngrand' /*case 'NoColumnGrand'*/: break;\n\t\t\t\t\tcase 'norowgrand' /*case 'NoRowGrand'*/: break;\n\t\t\t\t\tcase 'blanklineafteritems' /*case 'BlankLineAfterItems'*/: break;\n\t\t\t\t\tcase 'hidden' /*case 'Hidden'*/: break;\n\t\t\t\t\tcase 'subtotal' /*case 'Subtotal'*/: break;\n\t\t\t\t\tcase 'basefield' /*case 'BaseField'*/: break;\n\t\t\t\t\tcase 'mapchilditems' /*case 'MapChildItems'*/: break;\n\t\t\t\t\tcase 'function' /*case 'Function'*/: break;\n\t\t\t\t\tcase 'refreshonfileopen' /*case 'RefreshOnFileOpen'*/: break;\n\t\t\t\t\tcase 'printsettitles' /*case 'PrintSetTitles'*/: break;\n\t\t\t\t\tcase 'mergelabels' /*case 'MergeLabels'*/: break;\n\t\t\t\t\tcase 'defaultversion' /*case 'DefaultVersion'*/: break;\n\t\t\t\t\tcase 'refreshname' /*case 'RefreshName'*/: break;\n\t\t\t\t\tcase 'refreshdate' /*case 'RefreshDate'*/: break;\n\t\t\t\t\tcase 'refreshdatecopy' /*case 'RefreshDateCopy'*/: break;\n\t\t\t\t\tcase 'versionlastrefresh' /*case 'VersionLastRefresh'*/: break;\n\t\t\t\t\tcase 'versionlastupdate' /*case 'VersionLastUpdate'*/: break;\n\t\t\t\t\tcase 'versionupdateablemin' /*case 'VersionUpdateableMin'*/: break;\n\t\t\t\t\tcase 'versionrefreshablemin' /*case 'VersionRefreshableMin'*/: break;\n\t\t\t\t\tcase 'calculation' /*case 'Calculation'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* PageBreaks */\n\t\t\t\tcase 'pagebreaks' /*case 'PageBreaks'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'colbreaks' /*case 'ColBreaks'*/: break;\n\t\t\t\t\tcase 'colbreak' /*case 'ColBreak'*/: break;\n\t\t\t\t\tcase 'rowbreaks' /*case 'RowBreaks'*/: break;\n\t\t\t\t\tcase 'rowbreak' /*case 'RowBreak'*/: break;\n\t\t\t\t\tcase 'colstart' /*case 'ColStart'*/: break;\n\t\t\t\t\tcase 'colend' /*case 'ColEnd'*/: break;\n\t\t\t\t\tcase 'rowend' /*case 'RowEnd'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* AutoFilter */\n\t\t\t\tcase 'autofilter' /*case 'AutoFilter'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'autofiltercolumn' /*case 'AutoFilterColumn'*/: break;\n\t\t\t\t\tcase 'autofiltercondition' /*case 'AutoFilterCondition'*/: break;\n\t\t\t\t\tcase 'autofilterand' /*case 'AutoFilterAnd'*/: break;\n\t\t\t\t\tcase 'autofilteror' /*case 'AutoFilterOr'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* QueryTable */\n\t\t\t\tcase 'querytable' /*case 'QueryTable'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'id' /*case 'Id'*/: break;\n\t\t\t\t\tcase 'autoformatfont' /*case 'AutoFormatFont'*/: break;\n\t\t\t\t\tcase 'autoformatpattern' /*case 'AutoFormatPattern'*/: break;\n\t\t\t\t\tcase 'querysource' /*case 'QuerySource'*/: break;\n\t\t\t\t\tcase 'querytype' /*case 'QueryType'*/: break;\n\t\t\t\t\tcase 'enableredirections' /*case 'EnableRedirections'*/: break;\n\t\t\t\t\tcase 'refreshedinxl9' /*case 'RefreshedInXl9'*/: break;\n\t\t\t\t\tcase 'urlstring' /*case 'URLString'*/: break;\n\t\t\t\t\tcase 'htmltables' /*case 'HTMLTables'*/: break;\n\t\t\t\t\tcase 'connection' /*case 'Connection'*/: break;\n\t\t\t\t\tcase 'commandtext' /*case 'CommandText'*/: break;\n\t\t\t\t\tcase 'refreshinfo' /*case 'RefreshInfo'*/: break;\n\t\t\t\t\tcase 'notitles' /*case 'NoTitles'*/: break;\n\t\t\t\t\tcase 'nextid' /*case 'NextId'*/: break;\n\t\t\t\t\tcase 'columninfo' /*case 'ColumnInfo'*/: break;\n\t\t\t\t\tcase 'overwritecells' /*case 'OverwriteCells'*/: break;\n\t\t\t\t\tcase 'donotpromptforfile' /*case 'DoNotPromptForFile'*/: break;\n\t\t\t\t\tcase 'textwizardsettings' /*case 'TextWizardSettings'*/: break;\n\t\t\t\t\tcase 'source' /*case 'Source'*/: break;\n\t\t\t\t\tcase 'number' /*case 'Number'*/: break;\n\t\t\t\t\tcase 'decimal' /*case 'Decimal'*/: break;\n\t\t\t\t\tcase 'thousandseparator' /*case 'ThousandSeparator'*/: break;\n\t\t\t\t\tcase 'trailingminusnumbers' /*case 'TrailingMinusNumbers'*/: break;\n\t\t\t\t\tcase 'formatsettings' /*case 'FormatSettings'*/: break;\n\t\t\t\t\tcase 'fieldtype' /*case 'FieldType'*/: break;\n\t\t\t\t\tcase 'delimiters' /*case 'Delimiters'*/: break;\n\t\t\t\t\tcase 'tab' /*case 'Tab'*/: break;\n\t\t\t\t\tcase 'comma' /*case 'Comma'*/: break;\n\t\t\t\t\tcase 'autoformatname' /*case 'AutoFormatName'*/: break;\n\t\t\t\t\tcase 'versionlastedit' /*case 'VersionLastEdit'*/: break;\n\t\t\t\t\tcase 'versionlastrefresh' /*case 'VersionLastRefresh'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\tcase 'datavalidation' /*case 'DataValidation'*/:\n\t\t\t\tswitch(Rn[3]) {\n\t\t\t\t\tcase 'range' /*case 'Range'*/: break;\n\n\t\t\t\t\tcase 'type' /*case 'Type'*/: break;\n\t\t\t\t\tcase 'min' /*case 'Min'*/: break;\n\t\t\t\t\tcase 'max' /*case 'Max'*/: break;\n\t\t\t\t\tcase 'sort' /*case 'Sort'*/: break;\n\t\t\t\t\tcase 'descending' /*case 'Descending'*/: break;\n\t\t\t\t\tcase 'order' /*case 'Order'*/: break;\n\t\t\t\t\tcase 'casesensitive' /*case 'CaseSensitive'*/: break;\n\t\t\t\t\tcase 'value' /*case 'Value'*/: break;\n\t\t\t\t\tcase 'errorstyle' /*case 'ErrorStyle'*/: break;\n\t\t\t\t\tcase 'errormessage' /*case 'ErrorMessage'*/: break;\n\t\t\t\t\tcase 'errortitle' /*case 'ErrorTitle'*/: break;\n\t\t\t\t\tcase 'inputmessage' /*case 'InputMessage'*/: break;\n\t\t\t\t\tcase 'inputtitle' /*case 'InputTitle'*/: break;\n\t\t\t\t\tcase 'combohide' /*case 'ComboHide'*/: break;\n\t\t\t\t\tcase 'inputhide' /*case 'InputHide'*/: break;\n\t\t\t\t\tcase 'condition' /*case 'Condition'*/: break;\n\t\t\t\t\tcase 'qualifier' /*case 'Qualifier'*/: break;\n\t\t\t\t\tcase 'useblank' /*case 'UseBlank'*/: break;\n\t\t\t\t\tcase 'value1' /*case 'Value1'*/: break;\n\t\t\t\t\tcase 'value2' /*case 'Value2'*/: break;\n\t\t\t\t\tcase 'format' /*case 'Format'*/: break;\n\n\t\t\t\t\tcase 'cellrangelist' /*case 'CellRangeList'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\tcase 'sorting' /*case 'Sorting'*/:\n\t\t\t\tcase 'conditionalformatting' /*case 'ConditionalFormatting'*/:\n\t\t\t\tswitch(Rn[3]) {\n\t\t\t\t\tcase 'range' /*case 'Range'*/: break;\n\t\t\t\t\tcase 'type' /*case 'Type'*/: break;\n\t\t\t\t\tcase 'min' /*case 'Min'*/: break;\n\t\t\t\t\tcase 'max' /*case 'Max'*/: break;\n\t\t\t\t\tcase 'sort' /*case 'Sort'*/: break;\n\t\t\t\t\tcase 'descending' /*case 'Descending'*/: break;\n\t\t\t\t\tcase 'order' /*case 'Order'*/: break;\n\t\t\t\t\tcase 'casesensitive' /*case 'CaseSensitive'*/: break;\n\t\t\t\t\tcase 'value' /*case 'Value'*/: break;\n\t\t\t\t\tcase 'errorstyle' /*case 'ErrorStyle'*/: break;\n\t\t\t\t\tcase 'errormessage' /*case 'ErrorMessage'*/: break;\n\t\t\t\t\tcase 'errortitle' /*case 'ErrorTitle'*/: break;\n\t\t\t\t\tcase 'cellrangelist' /*case 'CellRangeList'*/: break;\n\t\t\t\t\tcase 'inputmessage' /*case 'InputMessage'*/: break;\n\t\t\t\t\tcase 'inputtitle' /*case 'InputTitle'*/: break;\n\t\t\t\t\tcase 'combohide' /*case 'ComboHide'*/: break;\n\t\t\t\t\tcase 'inputhide' /*case 'InputHide'*/: break;\n\t\t\t\t\tcase 'condition' /*case 'Condition'*/: break;\n\t\t\t\t\tcase 'qualifier' /*case 'Qualifier'*/: break;\n\t\t\t\t\tcase 'useblank' /*case 'UseBlank'*/: break;\n\t\t\t\t\tcase 'value1' /*case 'Value1'*/: break;\n\t\t\t\t\tcase 'value2' /*case 'Value2'*/: break;\n\t\t\t\t\tcase 'format' /*case 'Format'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* MapInfo (schema) */\n\t\t\t\tcase 'mapinfo' /*case 'MapInfo'*/: case 'schema' /*case 'Schema'*/: case 'data' /*case 'data'*/: switch(Rn[3]) {\n\t\t\t\t\tcase 'map' /*case 'Map'*/: break;\n\t\t\t\t\tcase 'entry' /*case 'Entry'*/: break;\n\t\t\t\t\tcase 'range' /*case 'Range'*/: break;\n\t\t\t\t\tcase 'xpath' /*case 'XPath'*/: break;\n\t\t\t\t\tcase 'field' /*case 'Field'*/: break;\n\t\t\t\t\tcase 'xsdtype' /*case 'XSDType'*/: break;\n\t\t\t\t\tcase 'filteron' /*case 'FilterOn'*/: break;\n\t\t\t\t\tcase 'aggregate' /*case 'Aggregate'*/: break;\n\t\t\t\t\tcase 'elementtype' /*case 'ElementType'*/: break;\n\t\t\t\t\tcase 'attributetype' /*case 'AttributeType'*/: break;\n\t\t\t\t/* These are from xsd (XML Schema Definition) */\n\t\t\t\t\tcase 'schema' /*case 'schema'*/:\n\t\t\t\t\tcase 'element' /*case 'element'*/:\n\t\t\t\t\tcase 'complextype' /*case 'complexType'*/:\n\t\t\t\t\tcase 'datatype' /*case 'datatype'*/:\n\t\t\t\t\tcase 'all' /*case 'all'*/:\n\t\t\t\t\tcase 'attribute' /*case 'attribute'*/:\n\t\t\t\t\tcase 'extends' /*case 'extends'*/: break;\n\n\t\t\t\t\tcase 'row' /*case 'row'*/: break;\n\t\t\t\t\tdefault: seen = false;\n\t\t\t\t} break;\n\n\t\t\t\t/* SmartTags (can be anything) */\n\t\t\t\tcase 'smarttags' /*case 'SmartTags'*/: break;\n\n\t\t\t\tdefault: seen = false; break;\n\t\t\t}\n\t\t\tif(seen) break;\n\t\t\t/* CustomDocumentProperties */\n\t\t\tif(Rn[3].match(/!\\[CDATA/)) break;\n\t\t\tif(!state[state.length-1][1]) throw 'Unrecognized tag: ' + Rn[3] + \"|\" + state.join(\"|\");\n\t\t\tif(state[state.length-1][0]===/*'CustomDocumentProperties'*/'customdocumentproperties') {\n\t\t\t\tif(Rn[0].slice(-2) === \"/>\") break;\n\t\t\t\telse if(Rn[1]===\"/\") xlml_set_custprop(Custprops, raw_Rn3, cp, str.slice(pidx, Rn.index));\n\t\t\t\telse { cp = Rn; pidx = Rn.index + Rn[0].length; }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(opts.WTF) throw 'Unrecognized tag: ' + Rn[3] + \"|\" + state.join(\"|\");\n\t}\n\tvar out = ({}/*:any*/);\n\tif(!opts.bookSheets && !opts.bookProps) out.Sheets = sheets;\n\tout.SheetNames = sheetnames;\n\tout.Workbook = Workbook;\n\tout.SSF = dup(table_fmt);\n\tout.Props = Props;\n\tout.Custprops = Custprops;\n\treturn out;\n}\n\nfunction parse_xlml(data/*:RawBytes|string*/, opts)/*:Workbook*/ {\n\tfix_read_opts(opts=opts||{});\n\tswitch(opts.type||\"base64\") {\n\t\tcase \"base64\": return parse_xlml_xml(Base64_decode(data), opts);\n\t\tcase \"binary\": case \"buffer\": case \"file\": return parse_xlml_xml(data, opts);\n\t\tcase \"array\": return parse_xlml_xml(a2s(data), opts);\n\t}\n\t/*:: throw new Error(\"unsupported type \" + opts.type); */\n}\n\n/* TODO */\nfunction write_props_xlml(wb/*:Workbook*/, opts)/*:string*/ {\n\tvar o/*:Array<string>*/ = [];\n\t/* DocumentProperties */\n\tif(wb.Props) o.push(xlml_write_docprops(wb.Props, opts));\n\t/* CustomDocumentProperties */\n\tif(wb.Custprops) o.push(xlml_write_custprops(wb.Props, wb.Custprops, opts));\n\treturn o.join(\"\");\n}\n/* TODO */\nfunction write_wb_xlml(/*::wb, opts*/)/*:string*/ {\n\t/* OfficeDocumentSettings */\n\t/* ExcelWorkbook */\n\treturn \"\";\n}\n/* TODO */\nfunction write_sty_xlml(wb, opts)/*:string*/ {\n\t/* Styles */\n\tvar styles/*:Array<string>*/ = ['<Style ss:ID=\"Default\" ss:Name=\"Normal\"><NumberFormat/></Style>'];\n\topts.cellXfs.forEach(function(xf, id) {\n\t\tvar payload/*:Array<string>*/ = [];\n\t\tpayload.push(writextag('NumberFormat', null, {\"ss:Format\": escapexml(table_fmt[xf.numFmtId])}));\n\n\t\tvar o = /*::(*/{\"ss:ID\": \"s\" + (21+id)}/*:: :any)*/;\n\t\tstyles.push(writextag('Style', payload.join(\"\"), o));\n\t});\n\treturn writextag(\"Styles\", styles.join(\"\"));\n}\nfunction write_name_xlml(n) { return writextag(\"NamedRange\", null, {\"ss:Name\": n.Name, \"ss:RefersTo\":\"=\" + a1_to_rc(n.Ref, {r:0,c:0})}); }\nfunction write_names_xlml(wb/*::, opts*/)/*:string*/ {\n\tif(!((wb||{}).Workbook||{}).Names) return \"\";\n\t/*:: if(!wb || !wb.Workbook || !wb.Workbook.Names) throw new Error(\"unreachable\"); */\n\tvar names/*:Array<any>*/ = wb.Workbook.Names;\n\tvar out/*:Array<string>*/ = [];\n\tfor(var i = 0; i < names.length; ++i) {\n\t\tvar n = names[i];\n\t\tif(n.Sheet != null) continue;\n\t\tif(n.Name.match(/^_xlfn\\./)) continue;\n\t\tout.push(write_name_xlml(n));\n\t}\n\treturn writextag(\"Names\", out.join(\"\"));\n}\nfunction write_ws_xlml_names(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*/)/*:string*/ {\n\tif(!ws) return \"\";\n\tif(!((wb||{}).Workbook||{}).Names) return \"\";\n\t/*:: if(!wb || !wb.Workbook || !wb.Workbook.Names) throw new Error(\"unreachable\"); */\n\tvar names/*:Array<any>*/ = wb.Workbook.Names;\n\tvar out/*:Array<string>*/ = [];\n\tfor(var i = 0; i < names.length; ++i) {\n\t\tvar n = names[i];\n\t\tif(n.Sheet != idx) continue;\n\t\t/*switch(n.Name) {\n\t\t\tcase \"_\": continue;\n\t\t}*/\n\t\tif(n.Name.match(/^_xlfn\\./)) continue;\n\t\tout.push(write_name_xlml(n));\n\t}\n\treturn out.join(\"\");\n}\n/* WorksheetOptions */\nfunction write_ws_xlml_wsopts(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*/)/*:string*/ {\n\tif(!ws) return \"\";\n\tvar o/*:Array<string>*/ = [];\n\t/* NOTE: spec technically allows any order, but stick with implied order */\n\n\t/* FitToPage */\n\t/* DoNotDisplayColHeaders */\n\t/* DoNotDisplayRowHeaders */\n\t/* ViewableRange */\n\t/* Selection */\n\t/* GridlineColor */\n\t/* Name */\n\t/* ExcelWorksheetType */\n\t/* IntlMacro */\n\t/* Unsynced */\n\t/* Selected */\n\t/* CodeName */\n\n\tif(ws['!margins']) {\n\t\to.push(\"<PageSetup>\");\n\t\tif(ws['!margins'].header) o.push(writextag(\"Header\", null, {'x:Margin':ws['!margins'].header}));\n\t\tif(ws['!margins'].footer) o.push(writextag(\"Footer\", null, {'x:Margin':ws['!margins'].footer}));\n\t\to.push(writextag(\"PageMargins\", null, {\n\t\t\t'x:Bottom': ws['!margins'].bottom || \"0.75\",\n\t\t\t'x:Left': ws['!margins'].left || \"0.7\",\n\t\t\t'x:Right': ws['!margins'].right || \"0.7\",\n\t\t\t'x:Top': ws['!margins'].top || \"0.75\"\n\t\t}));\n\t\to.push(\"</PageSetup>\");\n\t}\n\n\t/* PageSetup */\n\t/* DisplayPageBreak */\n\t/* TransitionExpressionEvaluation */\n\t/* TransitionFormulaEntry */\n\t/* Print */\n\t/* Zoom */\n\t/* PageLayoutZoom */\n\t/* PageBreakZoom */\n\t/* ShowPageBreakZoom */\n\t/* DefaultRowHeight */\n\t/* DefaultColumnWidth */\n\t/* StandardWidth */\n\n\tif(wb && wb.Workbook && wb.Workbook.Sheets && wb.Workbook.Sheets[idx]) {\n\t\t/* Visible */\n\t\tif(wb.Workbook.Sheets[idx].Hidden) o.push(writextag(\"Visible\", (wb.Workbook.Sheets[idx].Hidden == 1 ? \"SheetHidden\" : \"SheetVeryHidden\"), {}));\n\t\telse {\n\t\t\t/* Selected */\n\t\t\tfor(var i = 0; i < idx; ++i) if(wb.Workbook.Sheets[i] && !wb.Workbook.Sheets[i].Hidden) break;\n\t\t\tif(i == idx) o.push(\"<Selected/>\");\n\t\t}\n\t}\n\n\t/* LeftColumnVisible */\n\n\tif(((((wb||{}).Workbook||{}).Views||[])[0]||{}).RTL) o.push(\"<DisplayRightToLeft/>\");\n\n\t/* GridlineColorIndex */\n\t/* DisplayFormulas */\n\t/* DoNotDisplayGridlines */\n\t/* DoNotDisplayHeadings */\n\t/* DoNotDisplayOutline */\n\t/* ApplyAutomaticOutlineStyles */\n\t/* NoSummaryRowsBelowDetail */\n\t/* NoSummaryColumnsRightDetail */\n\t/* DoNotDisplayZeros */\n\t/* ActiveRow */\n\t/* ActiveColumn */\n\t/* FilterOn */\n\t/* RangeSelection */\n\t/* TopRowVisible */\n\t/* TopRowBottomPane */\n\t/* LeftColumnRightPane */\n\t/* ActivePane */\n\t/* SplitHorizontal */\n\t/* SplitVertical */\n\t/* FreezePanes */\n\t/* FrozenNoSplit */\n\t/* TabColorIndex */\n\t/* Panes */\n\n\t/* NOTE: Password not supported in XLML Format */\n\tif(ws['!protect']) {\n\t\to.push(writetag(\"ProtectContents\", \"True\"));\n\t\tif(ws['!protect'].objects) o.push(writetag(\"ProtectObjects\", \"True\"));\n\t\tif(ws['!protect'].scenarios) o.push(writetag(\"ProtectScenarios\", \"True\"));\n\t\tif(ws['!protect'].selectLockedCells != null && !ws['!protect'].selectLockedCells) o.push(writetag(\"EnableSelection\", \"NoSelection\"));\n\t\telse if(ws['!protect'].selectUnlockedCells != null && !ws['!protect'].selectUnlockedCells) o.push(writetag(\"EnableSelection\", \"UnlockedCells\"));\n\t[\n\t\t[ \"formatCells\", \"AllowFormatCells\" ],\n\t\t[ \"formatColumns\", \"AllowSizeCols\" ],\n\t\t[ \"formatRows\", \"AllowSizeRows\" ],\n\t\t[ \"insertColumns\", \"AllowInsertCols\" ],\n\t\t[ \"insertRows\", \"AllowInsertRows\" ],\n\t\t[ \"insertHyperlinks\", \"AllowInsertHyperlinks\" ],\n\t\t[ \"deleteColumns\", \"AllowDeleteCols\" ],\n\t\t[ \"deleteRows\", \"AllowDeleteRows\" ],\n\t\t[ \"sort\", \"AllowSort\" ],\n\t\t[ \"autoFilter\", \"AllowFilter\" ],\n\t\t[ \"pivotTables\", \"AllowUsePivotTables\" ]\n\t].forEach(function(x) { if(ws['!protect'][x[0]]) o.push(\"<\"+x[1]+\"/>\"); });\n\t}\n\n\tif(o.length == 0) return \"\";\n\treturn writextag(\"WorksheetOptions\", o.join(\"\"), {xmlns:XLMLNS.x});\n}\nfunction write_ws_xlml_comment(comments/*:Array<any>*/)/*:string*/ {\n\treturn comments.map(function(c) {\n\t\t// TODO: formatted text\n\t\tvar t = xlml_unfixstr(c.t||\"\");\n\t\tvar d =writextag(\"ss:Data\", t, {\"xmlns\":\"http://www.w3.org/TR/REC-html40\"});\n\t\treturn writextag(\"Comment\", d, {\"ss:Author\":c.a});\n\t}).join(\"\");\n}\nfunction write_ws_xlml_cell(cell, ref/*:string*/, ws, opts, idx/*:number*/, wb, addr)/*:string*/{\n\tif(!cell || (cell.v == undefined && cell.f == undefined)) return \"\";\n\n\tvar attr = {};\n\tif(cell.f) attr[\"ss:Formula\"] = \"=\" + escapexml(a1_to_rc(cell.f, addr));\n\tif(cell.F && cell.F.slice(0, ref.length) == ref) {\n\t\tvar end = decode_cell(cell.F.slice(ref.length + 1));\n\t\tattr[\"ss:ArrayRange\"] = \"RC:R\" + (end.r == addr.r ? \"\" : \"[\" + (end.r - addr.r) + \"]\") + \"C\" + (end.c == addr.c ? \"\" : \"[\" + (end.c - addr.c) + \"]\");\n\t}\n\n\tif(cell.l && cell.l.Target) {\n\t\tattr[\"ss:HRef\"] = escapexml(cell.l.Target);\n\t\tif(cell.l.Tooltip) attr[\"x:HRefScreenTip\"] = escapexml(cell.l.Tooltip);\n\t}\n\n\tif(ws['!merges']) {\n\t\tvar marr = ws['!merges'];\n\t\tfor(var mi = 0; mi != marr.length; ++mi) {\n\t\t\tif(marr[mi].s.c != addr.c || marr[mi].s.r != addr.r) continue;\n\t\t\tif(marr[mi].e.c > marr[mi].s.c) attr['ss:MergeAcross'] = marr[mi].e.c - marr[mi].s.c;\n\t\t\tif(marr[mi].e.r > marr[mi].s.r) attr['ss:MergeDown'] = marr[mi].e.r - marr[mi].s.r;\n\t\t}\n\t}\n\n\tvar t = \"\", p = \"\";\n\tswitch(cell.t) {\n\t\tcase 'z': if(!opts.sheetStubs) return \"\"; break;\n\t\tcase 'n': t = 'Number'; p = String(cell.v); break;\n\t\tcase 'b': t = 'Boolean'; p = (cell.v ? \"1\" : \"0\"); break;\n\t\tcase 'e': t = 'Error'; p = BErr[cell.v]; break;\n\t\tcase 'd': t = 'DateTime'; p = new Date(cell.v).toISOString(); if(cell.z == null) cell.z = cell.z || table_fmt[14]; break;\n\t\tcase 's': t = 'String'; p = escapexlml(cell.v||\"\"); break;\n\t}\n\t/* TODO: cell style */\n\tvar os = get_cell_style(opts.cellXfs, cell, opts);\n\tattr[\"ss:StyleID\"] = \"s\" + (21+os);\n\tattr[\"ss:Index\"] = addr.c + 1;\n\tvar _v = (cell.v != null ? p : \"\");\n\tvar m = cell.t == 'z' ? \"\" : ('<Data ss:Type=\"' + t + '\">' + _v + '</Data>');\n\n\tif((cell.c||[]).length > 0) m += write_ws_xlml_comment(cell.c);\n\n\treturn writextag(\"Cell\", m, attr);\n}\nfunction write_ws_xlml_row(R/*:number*/, row)/*:string*/ {\n\tvar o = '<Row ss:Index=\"' + (R+1) + '\"';\n\tif(row) {\n\t\tif(row.hpt && !row.hpx) row.hpx = pt2px(row.hpt);\n\t\tif(row.hpx) o += ' ss:AutoFitHeight=\"0\" ss:Height=\"' + row.hpx + '\"';\n\t\tif(row.hidden) o += ' ss:Hidden=\"1\"';\n\t}\n\treturn o + '>';\n}\n/* TODO */\nfunction write_ws_xlml_table(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*/)/*:string*/ {\n\tif(!ws['!ref']) return \"\";\n\tvar range/*:Range*/ = safe_decode_range(ws['!ref']);\n\tvar marr/*:Array<Range>*/ = ws['!merges'] || [], mi = 0;\n\tvar o/*:Array<string>*/ = [];\n\tif(ws['!cols']) ws['!cols'].forEach(function(n, i) {\n\t\tprocess_col(n);\n\t\tvar w = !!n.width;\n\t\tvar p = col_obj_w(i, n);\n\t\tvar k/*:any*/ = {\"ss:Index\":i+1};\n\t\tif(w) k['ss:Width'] = width2px(p.width);\n\t\tif(n.hidden) k['ss:Hidden']=\"1\";\n\t\to.push(writextag(\"Column\",null,k));\n\t});\n\tvar dense = Array.isArray(ws);\n\tfor(var R = range.s.r; R <= range.e.r; ++R) {\n\t\tvar row = [write_ws_xlml_row(R, (ws['!rows']||[])[R])];\n\t\tfor(var C = range.s.c; C <= range.e.c; ++C) {\n\t\t\tvar skip = false;\n\t\t\tfor(mi = 0; mi != marr.length; ++mi) {\n\t\t\t\tif(marr[mi].s.c > C) continue;\n\t\t\t\tif(marr[mi].s.r > R) continue;\n\t\t\t\tif(marr[mi].e.c < C) continue;\n\t\t\t\tif(marr[mi].e.r < R) continue;\n\t\t\t\tif(marr[mi].s.c != C || marr[mi].s.r != R) skip = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(skip) continue;\n\t\t\tvar addr = {r:R,c:C};\n\t\t\tvar ref = encode_cell(addr), cell = dense ? (ws[R]||[])[C] : ws[ref];\n\t\t\trow.push(write_ws_xlml_cell(cell, ref, ws, opts, idx, wb, addr));\n\t\t}\n\t\trow.push(\"</Row>\");\n\t\tif(row.length > 2) o.push(row.join(\"\"));\n\t}\n\treturn o.join(\"\");\n}\nfunction write_ws_xlml(idx/*:number*/, opts, wb/*:Workbook*/)/*:string*/ {\n\tvar o/*:Array<string>*/ = [];\n\tvar s = wb.SheetNames[idx];\n\tvar ws = wb.Sheets[s];\n\n\tvar t/*:string*/ = ws ? write_ws_xlml_names(ws, opts, idx, wb) : \"\";\n\tif(t.length > 0) o.push(\"<Names>\" + t + \"</Names>\");\n\n\t/* Table */\n\tt = ws ? write_ws_xlml_table(ws, opts, idx, wb) : \"\";\n\tif(t.length > 0) o.push(\"<Table>\" + t + \"</Table>\");\n\n\t/* WorksheetOptions */\n\to.push(write_ws_xlml_wsopts(ws, opts, idx, wb));\n\n\treturn o.join(\"\");\n}\nfunction write_xlml(wb, opts)/*:string*/ {\n\tif(!opts) opts = {};\n\tif(!wb.SSF) wb.SSF = dup(table_fmt);\n\tif(wb.SSF) {\n\t\tmake_ssf(); SSF_load_table(wb.SSF);\n\t\t// $FlowIgnore\n\t\topts.revssf = evert_num(wb.SSF); opts.revssf[wb.SSF[65535]] = 0;\n\t\topts.ssf = wb.SSF;\n\t\topts.cellXfs = [];\n\t\tget_cell_style(opts.cellXfs, {}, {revssf:{\"General\":0}});\n\t}\n\tvar d/*:Array<string>*/ = [];\n\td.push(write_props_xlml(wb, opts));\n\td.push(write_wb_xlml(wb, opts));\n\td.push(\"\");\n\td.push(\"\");\n\tfor(var i = 0; i < wb.SheetNames.length; ++i)\n\t\td.push(writextag(\"Worksheet\", write_ws_xlml(i, opts, wb), {\"ss:Name\":escapexml(wb.SheetNames[i])}));\n\td[2] = write_sty_xlml(wb, opts);\n\td[3] = write_names_xlml(wb, opts);\n\treturn XML_HEADER + writextag(\"Workbook\", d.join(\"\"), {\n\t\t'xmlns':      XLMLNS.ss,\n\t\t'xmlns:o':    XLMLNS.o,\n\t\t'xmlns:x':    XLMLNS.x,\n\t\t'xmlns:ss':   XLMLNS.ss,\n\t\t'xmlns:dt':   XLMLNS.dt,\n\t\t'xmlns:html': XLMLNS.html\n\t});\n}\n/* [MS-OLEDS] 2.3.8 CompObjStream */\nfunction parse_compobj(obj/*:CFBEntry*/) {\n\tvar v = {};\n\tvar o = obj.content;\n\t/*:: if(o == null) return; */\n\n\t/* [MS-OLEDS] 2.3.7 CompObjHeader -- All fields MUST be ignored */\n\to.l = 28;\n\n\tv.AnsiUserType = o.read_shift(0, \"lpstr-ansi\");\n\tv.AnsiClipboardFormat = parse_ClipboardFormatOrAnsiString(o);\n\n\tif(o.length - o.l <= 4) return v;\n\n\tvar m/*:number*/ = o.read_shift(4);\n\tif(m == 0 || m > 40) return v;\n\to.l-=4; v.Reserved1 = o.read_shift(0, \"lpstr-ansi\");\n\n\tif(o.length - o.l <= 4) return v;\n\tm = o.read_shift(4);\n\tif(m !== 0x71b239f4) return v;\n\tv.UnicodeClipboardFormat = parse_ClipboardFormatOrUnicodeString(o);\n\n\tm = o.read_shift(4);\n\tif(m == 0 || m > 40) return v;\n\to.l-=4; v.Reserved2 = o.read_shift(0, \"lpwstr\");\n}\n\n/*\n\tContinue logic for:\n\t- 2.4.58 Continue          0x003c\n\t- 2.4.59 ContinueBigName   0x043c\n\t- 2.4.60 ContinueFrt       0x0812\n\t- 2.4.61 ContinueFrt11     0x0875\n\t- 2.4.62 ContinueFrt12     0x087f\n*/\nvar CONTINUE_RT = [ 0x003c, 0x043c, 0x0812, 0x0875, 0x087f ];\nfunction slurp(RecordType, R, blob, length/*:number*/, opts)/*:any*/ {\n\tvar l = length;\n\tvar bufs = [];\n\tvar d = blob.slice(blob.l,blob.l+l);\n\tif(opts && opts.enc && opts.enc.insitu && d.length > 0) switch(RecordType) {\n\tcase 0x0009: case 0x0209: case 0x0409: case 0x0809/* BOF */: case 0x002f /* FilePass */: case 0x0195 /* FileLock */: case 0x00e1 /* InterfaceHdr */: case 0x0196 /* RRDInfo */: case 0x0138 /* RRDHead */: case 0x0194 /* UsrExcl */: case 0x000a /* EOF */:\n\t\tbreak;\n\tcase 0x0085 /* BoundSheet8 */:\n\t\tbreak;\n\tdefault:\n\t\topts.enc.insitu(d);\n\t}\n\tbufs.push(d);\n\tblob.l += l;\n\tvar nextrt = __readUInt16LE(blob,blob.l), next = XLSRecordEnum[nextrt];\n\tvar start = 0;\n\twhile(next != null && CONTINUE_RT.indexOf(nextrt) > -1) {\n\t\tl = __readUInt16LE(blob,blob.l+2);\n\t\tstart = blob.l + 4;\n\t\tif(nextrt == 0x0812 /* ContinueFrt */) start += 4;\n\t\telse if(nextrt == 0x0875 || nextrt == 0x087f) {\n\t\t\tstart += 12;\n\t\t}\n\t\td = blob.slice(start,blob.l+4+l);\n\t\tbufs.push(d);\n\t\tblob.l += 4+l;\n\t\tnext = (XLSRecordEnum[nextrt = __readUInt16LE(blob, blob.l)]);\n\t}\n\tvar b = (bconcat(bufs)/*:any*/);\n\tprep_blob(b, 0);\n\tvar ll = 0; b.lens = [];\n\tfor(var j = 0; j < bufs.length; ++j) { b.lens.push(ll); ll += bufs[j].length; }\n\tif(b.length < length) throw \"XLS Record 0x\" + RecordType.toString(16) + \" Truncated: \" + b.length + \" < \" + length;\n\treturn R.f(b, b.length, opts);\n}\n\nfunction safe_format_xf(p/*:any*/, opts/*:ParseOpts*/, date1904/*:?boolean*/) {\n\tif(p.t === 'z') return;\n\tif(!p.XF) return;\n\tvar fmtid = 0;\n\ttry {\n\t\tfmtid = p.z || p.XF.numFmtId || 0;\n\t\tif(opts.cellNF) p.z = table_fmt[fmtid];\n\t} catch(e) { if(opts.WTF) throw e; }\n\tif(!opts || opts.cellText !== false) try {\n\t\tif(p.t === 'e') { p.w = p.w || BErr[p.v]; }\n\t\telse if(fmtid === 0 || fmtid == \"General\") {\n\t\t\tif(p.t === 'n') {\n\t\t\t\tif((p.v|0) === p.v) p.w = p.v.toString(10);\n\t\t\t\telse p.w = SSF_general_num(p.v);\n\t\t\t}\n\t\t\telse p.w = SSF_general(p.v);\n\t\t}\n\t\telse p.w = SSF_format(fmtid,p.v, {date1904:!!date1904, dateNF: opts && opts.dateNF});\n\t} catch(e) { if(opts.WTF) throw e; }\n\tif(opts.cellDates && fmtid && p.t == 'n' && fmt_is_date(table_fmt[fmtid] || String(fmtid))) {\n\t\tvar _d = SSF_parse_date_code(p.v); if(_d) { p.t = 'd'; p.v = new Date(_d.y, _d.m-1,_d.d,_d.H,_d.M,_d.S,_d.u); }\n\t}\n}\n\nfunction make_cell(val, ixfe, t)/*:Cell*/ {\n\treturn ({v:val, ixfe:ixfe, t:t}/*:any*/);\n}\n\n// 2.3.2\nfunction parse_workbook(blob, options/*:ParseOpts*/)/*:Workbook*/ {\n\tvar wb = ({opts:{}}/*:any*/);\n\tvar Sheets = {};\n\tif(DENSE != null && options.dense == null) options.dense = DENSE;\n\tvar out/*:Worksheet*/ = ((options.dense ? [] : {})/*:any*/);\n\tvar Directory = {};\n\tvar range/*:Range*/ = ({}/*:any*/);\n\tvar last_formula = null;\n\tvar sst/*:SST*/ = ([]/*:any*/);\n\tvar cur_sheet = \"\";\n\tvar Preamble = {};\n\tvar lastcell, last_cell = \"\", cc/*:Cell*/, cmnt, rngC, rngR;\n\tvar sharedf = {};\n\tvar arrayf/*:Array<[Range, string]>*/ = [];\n\tvar temp_val/*:Cell*/;\n\tvar country;\n\tvar XFs = []; /* XF records */\n\tvar palette/*:Array<[number, number, number]>*/ = [];\n\tvar Workbook/*:WBWBProps*/ = ({ Sheets:[], WBProps:{date1904:false}, Views:[{}] }/*:any*/), wsprops = {};\n\tvar get_rgb = function getrgb(icv/*:number*/)/*:[number, number, number]*/ {\n\t\tif(icv < 8) return XLSIcv[icv];\n\t\tif(icv < 64) return palette[icv-8] || XLSIcv[icv];\n\t\treturn XLSIcv[icv];\n\t};\n\tvar process_cell_style = function pcs(cell, line/*:any*/, options) {\n\t\tvar xfd = line.XF.data;\n\t\tif(!xfd || !xfd.patternType || !options || !options.cellStyles) return;\n\t\tline.s = ({}/*:any*/);\n\t\tline.s.patternType = xfd.patternType;\n\t\tvar t;\n\t\tif((t = rgb2Hex(get_rgb(xfd.icvFore)))) { line.s.fgColor = {rgb:t}; }\n\t\tif((t = rgb2Hex(get_rgb(xfd.icvBack)))) { line.s.bgColor = {rgb:t}; }\n\t};\n\tvar addcell = function addcell(cell/*:any*/, line/*:any*/, options/*:any*/) {\n\t\tif(file_depth > 1) return;\n\t\tif(options.sheetRows && cell.r >= options.sheetRows) return;\n\t\tif(options.cellStyles && line.XF && line.XF.data) process_cell_style(cell, line, options);\n\t\tdelete line.ixfe; delete line.XF;\n\t\tlastcell = cell;\n\t\tlast_cell = encode_cell(cell);\n\t\tif(!range || !range.s || !range.e) range = {s:{r:0,c:0},e:{r:0,c:0}};\n\t\tif(cell.r < range.s.r) range.s.r = cell.r;\n\t\tif(cell.c < range.s.c) range.s.c = cell.c;\n\t\tif(cell.r + 1 > range.e.r) range.e.r = cell.r + 1;\n\t\tif(cell.c + 1 > range.e.c) range.e.c = cell.c + 1;\n\t\tif(options.cellFormula && line.f) {\n\t\t\tfor(var afi = 0; afi < arrayf.length; ++afi) {\n\t\t\t\tif(arrayf[afi][0].s.c > cell.c || arrayf[afi][0].s.r > cell.r) continue;\n\t\t\t\tif(arrayf[afi][0].e.c < cell.c || arrayf[afi][0].e.r < cell.r) continue;\n\t\t\t\tline.F = encode_range(arrayf[afi][0]);\n\t\t\t\tif(arrayf[afi][0].s.c != cell.c || arrayf[afi][0].s.r != cell.r) delete line.f;\n\t\t\t\tif(line.f) line.f = \"\" + stringify_formula(arrayf[afi][1], range, cell, supbooks, opts);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t{\n\t\t\tif(options.dense) {\n\t\t\t\tif(!out[cell.r]) out[cell.r] = [];\n\t\t\t\tout[cell.r][cell.c] = line;\n\t\t\t} else out[last_cell] = line;\n\t\t}\n\t};\n\tvar opts = ({\n\t\tenc: false, // encrypted\n\t\tsbcch: 0, // cch in the preceding SupBook\n\t\tsnames: [], // sheetnames\n\t\tsharedf: sharedf, // shared formulae by address\n\t\tarrayf: arrayf, // array formulae array\n\t\trrtabid: [], // RRTabId\n\t\tlastuser: \"\", // Last User from WriteAccess\n\t\tbiff: 8, // BIFF version\n\t\tcodepage: 0, // CP from CodePage record\n\t\twinlocked: 0, // fLockWn from WinProtect\n\t\tcellStyles: !!options && !!options.cellStyles,\n\t\tWTF: !!options && !!options.wtf\n\t}/*:any*/);\n\tif(options.password) opts.password = options.password;\n\tvar themes;\n\tvar merges/*:Array<Range>*/ = [];\n\tvar objects = [];\n\tvar colinfo/*:Array<ColInfo>*/ = [], rowinfo/*:Array<RowInfo>*/ = [];\n\tvar seencol = false;\n\tvar supbooks = ([]/*:any*/); // 1-indexed, will hold extern names\n\tsupbooks.SheetNames = opts.snames;\n\tsupbooks.sharedf = opts.sharedf;\n\tsupbooks.arrayf = opts.arrayf;\n\tsupbooks.names = [];\n\tsupbooks.XTI = [];\n\tvar last_RT = 0;\n\tvar file_depth = 0; /* TODO: make a real stack */\n\tvar BIFF2Fmt = 0, BIFF2FmtTable/*:Array<string>*/ = [];\n\tvar FilterDatabases = []; /* TODO: sort out supbooks and process elsewhere */\n\tvar last_lbl/*:?DefinedName*/;\n\n\t/* explicit override for some broken writers */\n\topts.codepage = 1200;\n\tset_cp(1200);\n\tvar seen_codepage = false;\n\twhile(blob.l < blob.length - 1) {\n\t\tvar s = blob.l;\n\t\tvar RecordType = blob.read_shift(2);\n\t\tif(RecordType === 0 && last_RT === 0x000a /* EOF */) break;\n\t\tvar length = (blob.l === blob.length ? 0 : blob.read_shift(2));\n\t\tvar R = XLSRecordEnum[RecordType];\n\t\t//console.log(RecordType.toString(16), RecordType, R, blob.l, length, blob.length);\n\t\t//if(!R) console.log(blob.slice(blob.l, blob.l + length));\n\t\tif(R && R.f) {\n\t\t\tif(options.bookSheets) {\n\t\t\t\tif(last_RT === 0x0085 /* BoundSheet8 */ && RecordType !== 0x0085 /* R.n !== 'BoundSheet8' */) break;\n\t\t\t}\n\t\t\tlast_RT = RecordType;\n\t\t\tif(R.r === 2 || R.r == 12) {\n\t\t\t\tvar rt = blob.read_shift(2); length -= 2;\n\t\t\t\tif(!opts.enc && rt !== RecordType && (((rt&0xFF)<<8)|(rt>>8)) !== RecordType) throw new Error(\"rt mismatch: \" + rt + \"!=\" + RecordType);\n\t\t\t\tif(R.r == 12){\n\t\t\t\t\tblob.l += 10; length -= 10;\n\t\t\t\t} // skip FRT\n\t\t\t}\n\t\t\t//console.error(R,blob.l,length,blob.length);\n\t\t\tvar val/*:any*/ = ({}/*:any*/);\n\t\t\tif(RecordType === 0x000a /* EOF */) val = /*::(*/R.f(blob, length, opts)/*:: :any)*/;\n\t\t\telse val = /*::(*/slurp(RecordType, R, blob, length, opts)/*:: :any)*/;\n\t\t\t/*:: val = (val:any); */\n\t\t\tif(file_depth == 0 && [0x0009, 0x0209, 0x0409, 0x0809].indexOf(last_RT) === -1 /* 'BOF' */) continue;\n\t\t\tswitch(RecordType) {\n\t\t\t\tcase 0x0022 /* Date1904 */:\n\t\t\t\t\t/*:: if(!Workbook.WBProps) Workbook.WBProps = {}; */\n\t\t\t\t\twb.opts.Date1904 = Workbook.WBProps.date1904 = val; break;\n\t\t\t\tcase 0x0086 /* WriteProtect */: wb.opts.WriteProtect = true; break;\n\t\t\t\tcase 0x002f /* FilePass */:\n\t\t\t\t\tif(!opts.enc) blob.l = 0;\n\t\t\t\t\topts.enc = val;\n\t\t\t\t\tif(!options.password) throw new Error(\"File is password-protected\");\n\t\t\t\t\tif(val.valid == null) throw new Error(\"Encryption scheme unsupported\");\n\t\t\t\t\tif(!val.valid) throw new Error(\"Password is incorrect\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x005c /* WriteAccess */: opts.lastuser = val; break;\n\t\t\t\tcase 0x0042 /* CodePage */:\n\t\t\t\t\tvar cpval = Number(val);\n\t\t\t\t\t/* overrides based on test cases */\n\t\t\t\t\tswitch(cpval) {\n\t\t\t\t\t\tcase 0x5212: cpval =  1200; break;\n\t\t\t\t\t\tcase 0x8000: cpval = 10000; break;\n\t\t\t\t\t\tcase 0x8001: cpval =  1252; break;\n\t\t\t\t\t}\n\t\t\t\t\tset_cp(opts.codepage = cpval);\n\t\t\t\t\tseen_codepage = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x013d /* RRTabId */: opts.rrtabid = val; break;\n\t\t\t\tcase 0x0019 /* WinProtect */: opts.winlocked = val; break;\n\t\t\t\tcase 0x01b7 /* RefreshAll */: wb.opts[\"RefreshAll\"] = val; break;\n\t\t\t\tcase 0x000c /* CalcCount */: wb.opts[\"CalcCount\"] = val; break;\n\t\t\t\tcase 0x0010 /* CalcDelta */: wb.opts[\"CalcDelta\"] = val; break;\n\t\t\t\tcase 0x0011 /* CalcIter */: wb.opts[\"CalcIter\"] = val; break;\n\t\t\t\tcase 0x000d /* CalcMode */: wb.opts[\"CalcMode\"] = val; break;\n\t\t\t\tcase 0x000e /* CalcPrecision */: wb.opts[\"CalcPrecision\"] = val; break;\n\t\t\t\tcase 0x005f /* CalcSaveRecalc */: wb.opts[\"CalcSaveRecalc\"] = val; break;\n\t\t\t\tcase 0x000f /* CalcRefMode */: opts.CalcRefMode = val; break; // TODO: implement R1C1\n\t\t\t\tcase 0x08a3 /* ForceFullCalculation */: wb.opts.FullCalc = val; break;\n\t\t\t\tcase 0x0081 /* WsBool */:\n\t\t\t\t\tif(val.fDialog) out[\"!type\"] = \"dialog\";\n\t\t\t\t\tif(!val.fBelow) (out[\"!outline\"] || (out[\"!outline\"] = {})).above = true;\n\t\t\t\t\tif(!val.fRight) (out[\"!outline\"] || (out[\"!outline\"] = {})).left = true;\n\t\t\t\t\tbreak; // TODO\n\t\t\t\tcase 0x00e0 /* XF */:\n\t\t\t\t\tXFs.push(val); break;\n\t\t\t\tcase 0x01ae /* SupBook */:\n\t\t\t\t\tsupbooks.push([val]);\n\t\t\t\t\tsupbooks[supbooks.length-1].XTI = [];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0023: case 0x0223 /* ExternName */:\n\t\t\t\t\tsupbooks[supbooks.length-1].push(val);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0018: case 0x0218 /* Lbl */:\n\t\t\t\t\tlast_lbl = ({\n\t\t\t\t\t\tName: val.Name,\n\t\t\t\t\t\tRef: stringify_formula(val.rgce,range,null,supbooks,opts)\n\t\t\t\t\t}/*:DefinedName*/);\n\t\t\t\t\tif(val.itab > 0) last_lbl.Sheet = val.itab - 1;\n\t\t\t\t\tsupbooks.names.push(last_lbl);\n\t\t\t\t\tif(!supbooks[0]) { supbooks[0] = []; supbooks[0].XTI = []; }\n\t\t\t\t\tsupbooks[supbooks.length-1].push(val);\n\t\t\t\t\tif(val.Name == \"_xlnm._FilterDatabase\" && val.itab > 0)\n\t\t\t\t\t\tif(val.rgce && val.rgce[0] && val.rgce[0][0] && val.rgce[0][0][0] == 'PtgArea3d')\n\t\t\t\t\t\t\tFilterDatabases[val.itab - 1] = { ref: encode_range(val.rgce[0][0][1][2]) };\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0016 /* ExternCount */: opts.ExternCount = val; break;\n\t\t\t\tcase 0x0017 /* ExternSheet */:\n\t\t\t\t\tif(supbooks.length == 0) { supbooks[0] = []; supbooks[0].XTI = []; }\n\t\t\t\t\tsupbooks[supbooks.length - 1].XTI = supbooks[supbooks.length - 1].XTI.concat(val); supbooks.XTI = supbooks.XTI.concat(val); break;\n\t\t\t\tcase 0x0894 /* NameCmt */:\n\t\t\t\t\t/* TODO: search for correct name */\n\t\t\t\t\tif(opts.biff < 8) break;\n\t\t\t\t\tif(last_lbl != null) last_lbl.Comment = val[1];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0012 /* Protect */: out[\"!protect\"] = val; break; /* for sheet or book */\n\t\t\t\tcase 0x0013 /* Password */: if(val !== 0 && opts.WTF) console.error(\"Password verifier: \" + val); break;\n\t\t\t\tcase 0x0085 /* BoundSheet8 */: {\n\t\t\t\t\tDirectory[val.pos] = val;\n\t\t\t\t\topts.snames.push(val.name);\n\t\t\t\t} break;\n\t\t\t\tcase 0x000a /* EOF */: {\n\t\t\t\t\tif(--file_depth) break;\n\t\t\t\t\tif(range.e) {\n\t\t\t\t\t\tif(range.e.r > 0 && range.e.c > 0) {\n\t\t\t\t\t\t\trange.e.r--; range.e.c--;\n\t\t\t\t\t\t\tout[\"!ref\"] = encode_range(range);\n\t\t\t\t\t\t\tif(options.sheetRows && options.sheetRows <= range.e.r) {\n\t\t\t\t\t\t\t\tvar tmpri = range.e.r;\n\t\t\t\t\t\t\t\trange.e.r = options.sheetRows - 1;\n\t\t\t\t\t\t\t\tout[\"!fullref\"] = out[\"!ref\"];\n\t\t\t\t\t\t\t\tout[\"!ref\"] = encode_range(range);\n\t\t\t\t\t\t\t\trange.e.r = tmpri;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trange.e.r++; range.e.c++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(merges.length > 0) out[\"!merges\"] = merges;\n\t\t\t\t\t\tif(objects.length > 0) out[\"!objects\"] = objects;\n\t\t\t\t\t\tif(colinfo.length > 0) out[\"!cols\"] = colinfo;\n\t\t\t\t\t\tif(rowinfo.length > 0) out[\"!rows\"] = rowinfo;\n\t\t\t\t\t\tWorkbook.Sheets.push(wsprops);\n\t\t\t\t\t}\n\t\t\t\t\tif(cur_sheet === \"\") Preamble = out; else Sheets[cur_sheet] = out;\n\t\t\t\t\tout = ((options.dense ? [] : {})/*:any*/);\n\t\t\t\t} break;\n\t\t\t\tcase 0x0009: case 0x0209: case 0x0409: case 0x0809 /* BOF */: {\n\t\t\t\t\tif(opts.biff === 8) opts.biff = {\n\t\t\t\t\t\t/*::[*/0x0009/*::]*/:2,\n\t\t\t\t\t\t/*::[*/0x0209/*::]*/:3,\n\t\t\t\t\t\t/*::[*/0x0409/*::]*/:4\n\t\t\t\t\t}[RecordType] || {\n\t\t\t\t\t\t/*::[*/0x0200/*::]*/:2,\n\t\t\t\t\t\t/*::[*/0x0300/*::]*/:3,\n\t\t\t\t\t\t/*::[*/0x0400/*::]*/:4,\n\t\t\t\t\t\t/*::[*/0x0500/*::]*/:5,\n\t\t\t\t\t\t/*::[*/0x0600/*::]*/:8,\n\t\t\t\t\t\t/*::[*/0x0002/*::]*/:2,\n\t\t\t\t\t\t/*::[*/0x0007/*::]*/:2\n\t\t\t\t\t}[val.BIFFVer] || 8;\n\t\t\t\t\topts.biffguess = val.BIFFVer == 0;\n\t\t\t\t\tif(val.BIFFVer == 0 && val.dt == 0x1000) { opts.biff = 5; seen_codepage = true; set_cp(opts.codepage = 28591); }\n\t\t\t\t\tif(opts.biff == 8 && val.BIFFVer == 0 && val.dt == 16) opts.biff = 2;\n\t\t\t\t\tif(file_depth++) break;\n\t\t\t\t\tout = ((options.dense ? [] : {})/*:any*/);\n\n\t\t\t\t\tif(opts.biff < 8 && !seen_codepage) { seen_codepage = true; set_cp(opts.codepage = options.codepage || 1252); }\n\n\t\t\t\t\tif(opts.biff < 5 || val.BIFFVer == 0 && val.dt == 0x1000) {\n\t\t\t\t\t\tif(cur_sheet === \"\") cur_sheet = \"Sheet1\";\n\t\t\t\t\t\trange = {s:{r:0,c:0},e:{r:0,c:0}};\n\t\t\t\t\t\t/* fake BoundSheet8 */\n\t\t\t\t\t\tvar fakebs8 = {pos: blob.l - length, name:cur_sheet};\n\t\t\t\t\t\tDirectory[fakebs8.pos] = fakebs8;\n\t\t\t\t\t\topts.snames.push(cur_sheet);\n\t\t\t\t\t}\n\t\t\t\t\telse cur_sheet = (Directory[s] || {name:\"\"}).name;\n\t\t\t\t\tif(val.dt == 0x20) out[\"!type\"] = \"chart\";\n\t\t\t\t\tif(val.dt == 0x40) out[\"!type\"] = \"macro\";\n\t\t\t\t\tmerges = [];\n\t\t\t\t\tobjects = [];\n\t\t\t\t\topts.arrayf = arrayf = [];\n\t\t\t\t\tcolinfo = []; rowinfo = [];\n\t\t\t\t\tseencol = false;\n\t\t\t\t\twsprops = {Hidden:(Directory[s]||{hs:0}).hs, name:cur_sheet };\n\t\t\t\t} break;\n\t\t\t\tcase 0x0203 /* Number */: case 0x0003 /* BIFF2NUM */: case 0x0002 /* BIFF2INT */: {\n\t\t\t\t\tif(out[\"!type\"] == \"chart\") if(options.dense ? (out[val.r]||[])[val.c]: out[encode_cell({c:val.c, r:val.r})]) ++val.c;\n\t\t\t\t\ttemp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe]||{}, v:val.val, t:'n'}/*:any*/);\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell({c:val.c, r:val.r}, temp_val, options);\n\t\t\t\t} break;\n\t\t\t\tcase 0x0005: case 0x0205 /* BoolErr */: {\n\t\t\t\t\ttemp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe], v:val.val, t:val.t}/*:any*/);\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell({c:val.c, r:val.r}, temp_val, options);\n\t\t\t\t} break;\n\t\t\t\tcase 0x027e /* RK */: {\n\t\t\t\t\ttemp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe], v:val.rknum, t:'n'}/*:any*/);\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell({c:val.c, r:val.r}, temp_val, options);\n\t\t\t\t} break;\n\t\t\t\tcase 0x00bd /* MulRk */: {\n\t\t\t\t\tfor(var j = val.c; j <= val.C; ++j) {\n\t\t\t\t\t\tvar ixfe = val.rkrec[j-val.c][0];\n\t\t\t\t\t\ttemp_val= ({ixfe:ixfe, XF:XFs[ixfe], v:val.rkrec[j-val.c][1], t:'n'}/*:any*/);\n\t\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\t\taddcell({c:j, r:val.r}, temp_val, options);\n\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x0006: case 0x0206: case 0x0406 /* Formula */: {\n\t\t\t\t\tif(val.val == 'String') { last_formula = val; break; }\n\t\t\t\t\ttemp_val = make_cell(val.val, val.cell.ixfe, val.tt);\n\t\t\t\t\ttemp_val.XF = XFs[temp_val.ixfe];\n\t\t\t\t\tif(options.cellFormula) {\n\t\t\t\t\t\tvar _f = val.formula;\n\t\t\t\t\t\tif(_f && _f[0] && _f[0][0] && _f[0][0][0] == 'PtgExp') {\n\t\t\t\t\t\t\tvar _fr = _f[0][0][1][0], _fc = _f[0][0][1][1];\n\t\t\t\t\t\t\tvar _fe = encode_cell({r:_fr, c:_fc});\n\t\t\t\t\t\t\tif(sharedf[_fe]) temp_val.f = \"\"+stringify_formula(val.formula,range,val.cell,supbooks, opts);\n\t\t\t\t\t\t\telse temp_val.F = ((options.dense ? (out[_fr]||[])[_fc]: out[_fe]) || {}).F;\n\t\t\t\t\t\t} else temp_val.f = \"\"+stringify_formula(val.formula,range,val.cell,supbooks, opts);\n\t\t\t\t\t}\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell(val.cell, temp_val, options);\n\t\t\t\t\tlast_formula = val;\n\t\t\t\t} break;\n\t\t\t\tcase 0x0007: case 0x0207 /* String */: {\n\t\t\t\t\tif(last_formula) { /* technically always true */\n\t\t\t\t\t\tlast_formula.val = val;\n\t\t\t\t\t\ttemp_val = make_cell(val, last_formula.cell.ixfe, 's');\n\t\t\t\t\t\ttemp_val.XF = XFs[temp_val.ixfe];\n\t\t\t\t\t\tif(options.cellFormula) {\n\t\t\t\t\t\t\ttemp_val.f = \"\"+stringify_formula(last_formula.formula, range, last_formula.cell, supbooks, opts);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\t\taddcell(last_formula.cell, temp_val, options);\n\t\t\t\t\t\tlast_formula = null;\n\t\t\t\t\t} else throw new Error(\"String record expects Formula\");\n\t\t\t\t} break;\n\t\t\t\tcase 0x0021: case 0x0221 /* Array */: {\n\t\t\t\t\tarrayf.push(val);\n\t\t\t\t\tvar _arraystart = encode_cell(val[0].s);\n\t\t\t\t\tcc = options.dense ? (out[val[0].s.r]||[])[val[0].s.c] : out[_arraystart];\n\t\t\t\t\tif(options.cellFormula && cc) {\n\t\t\t\t\t\tif(!last_formula) break; /* technically unreachable */\n\t\t\t\t\t\tif(!_arraystart || !cc) break;\n\t\t\t\t\t\tcc.f = \"\"+stringify_formula(val[1], range, val[0], supbooks, opts);\n\t\t\t\t\t\tcc.F = encode_range(val[0]);\n\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x04bc /* ShrFmla */: {\n\t\t\t\t\tif(!options.cellFormula) break;\n\t\t\t\t\tif(last_cell) {\n\t\t\t\t\t\t/* TODO: capture range */\n\t\t\t\t\t\tif(!last_formula) break; /* technically unreachable */\n\t\t\t\t\t\tsharedf[encode_cell(last_formula.cell)]= val[0];\n\t\t\t\t\t\tcc = options.dense ? (out[last_formula.cell.r]||[])[last_formula.cell.c] : out[encode_cell(last_formula.cell)];\n\t\t\t\t\t\t(cc||{}).f = \"\"+stringify_formula(val[0], range, lastcell, supbooks, opts);\n\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x00fd /* LabelSst */:\n\t\t\t\t\ttemp_val=make_cell(sst[val.isst].t, val.ixfe, 's');\n\t\t\t\t\tif(sst[val.isst].h) temp_val.h = sst[val.isst].h;\n\t\t\t\t\ttemp_val.XF = XFs[temp_val.ixfe];\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell({c:val.c, r:val.r}, temp_val, options);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0201 /* Blank */: if(options.sheetStubs) {\n\t\t\t\t\ttemp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe], t:'z'}/*:any*/);\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell({c:val.c, r:val.r}, temp_val, options);\n\t\t\t\t} break;\n\t\t\t\tcase 0x00be /* MulBlank */: if(options.sheetStubs) {\n\t\t\t\t\tfor(var _j = val.c; _j <= val.C; ++_j) {\n\t\t\t\t\t\tvar _ixfe = val.ixfe[_j-val.c];\n\t\t\t\t\t\ttemp_val= ({ixfe:_ixfe, XF:XFs[_ixfe], t:'z'}/*:any*/);\n\t\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\t\taddcell({c:_j, r:val.r}, temp_val, options);\n\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x00d6 /* RString */:\n\t\t\t\tcase 0x0204 /* Label */: case 0x0004 /* BIFF2STR */:\n\t\t\t\t\ttemp_val=make_cell(val.val, val.ixfe, 's');\n\t\t\t\t\ttemp_val.XF = XFs[temp_val.ixfe];\n\t\t\t\t\tif(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];\n\t\t\t\t\tsafe_format_xf(temp_val, options, wb.opts.Date1904);\n\t\t\t\t\taddcell({c:val.c, r:val.r}, temp_val, options);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x0000: case 0x0200 /* Dimensions */: {\n\t\t\t\t\tif(file_depth === 1) range = val; /* TODO: stack */\n\t\t\t\t} break;\n\t\t\t\tcase 0x00fc /* SST */: {\n\t\t\t\t\tsst = val;\n\t\t\t\t} break;\n\t\t\t\tcase 0x041e /* Format */: { /* val = [id, fmt] */\n\t\t\t\t\tif(opts.biff == 4) {\n\t\t\t\t\t\tBIFF2FmtTable[BIFF2Fmt++] = val[1];\n\t\t\t\t\t\tfor(var b4idx = 0; b4idx < BIFF2Fmt + 163; ++b4idx) if(table_fmt[b4idx] == val[1]) break;\n\t\t\t\t\t\tif(b4idx >= 163) SSF_load(val[1], BIFF2Fmt + 163);\n\t\t\t\t\t}\n\t\t\t\t\telse SSF_load(val[1], val[0]);\n\t\t\t\t} break;\n\t\t\t\tcase 0x001e /* BIFF2FORMAT */: {\n\t\t\t\t\tBIFF2FmtTable[BIFF2Fmt++] = val;\n\t\t\t\t\tfor(var b2idx = 0; b2idx < BIFF2Fmt + 163; ++b2idx) if(table_fmt[b2idx] == val) break;\n\t\t\t\t\tif(b2idx >= 163) SSF_load(val, BIFF2Fmt + 163);\n\t\t\t\t} break;\n\n\t\t\t\tcase 0x00e5 /* MergeCells */: merges = merges.concat(val); break;\n\n\t\t\t\tcase 0x005d /* Obj */: objects[val.cmo[0]] = opts.lastobj = val; break;\n\t\t\t\tcase 0x01b6 /* TxO */: opts.lastobj.TxO = val; break;\n\t\t\t\tcase 0x007f /* ImData */: opts.lastobj.ImData = val; break;\n\n\t\t\t\tcase 0x01b8 /* HLink */: {\n\t\t\t\t\tfor(rngR = val[0].s.r; rngR <= val[0].e.r; ++rngR)\n\t\t\t\t\t\tfor(rngC = val[0].s.c; rngC <= val[0].e.c; ++rngC) {\n\t\t\t\t\t\t\tcc = options.dense ? (out[rngR]||[])[rngC] : out[encode_cell({c:rngC,r:rngR})];\n\t\t\t\t\t\t\tif(cc) cc.l = val[1];\n\t\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x0800 /* HLinkTooltip */: {\n\t\t\t\t\tfor(rngR = val[0].s.r; rngR <= val[0].e.r; ++rngR)\n\t\t\t\t\t\tfor(rngC = val[0].s.c; rngC <= val[0].e.c; ++rngC) {\n\t\t\t\t\t\t\tcc = options.dense ? (out[rngR]||[])[rngC] : out[encode_cell({c:rngC,r:rngR})];\n\t\t\t\t\t\t\tif(cc && cc.l) cc.l.Tooltip = val[1];\n\t\t\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x001c /* Note */: {\n\t\t\t\t\tif(opts.biff <= 5 && opts.biff >= 2) break; /* TODO: BIFF5 */\n\t\t\t\t\tcc = options.dense ? (out[val[0].r]||[])[val[0].c] : out[encode_cell(val[0])];\n\t\t\t\t\tvar noteobj = objects[val[2]];\n\t\t\t\t\tif(!cc) {\n\t\t\t\t\t\tif(options.dense) {\n\t\t\t\t\t\t\tif(!out[val[0].r]) out[val[0].r] = [];\n\t\t\t\t\t\t\tcc = out[val[0].r][val[0].c] = ({t:\"z\"}/*:any*/);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcc = out[encode_cell(val[0])] = ({t:\"z\"}/*:any*/);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trange.e.r = Math.max(range.e.r, val[0].r);\n\t\t\t\t\t\trange.s.r = Math.min(range.s.r, val[0].r);\n\t\t\t\t\t\trange.e.c = Math.max(range.e.c, val[0].c);\n\t\t\t\t\t\trange.s.c = Math.min(range.s.c, val[0].c);\n\t\t\t\t\t}\n\t\t\t\t\tif(!cc.c) cc.c = [];\n\t\t\t\t\tcmnt = {a:val[1],t:noteobj.TxO.t};\n\t\t\t\t\tcc.c.push(cmnt);\n\t\t\t\t} break;\n\t\t\t\tcase 0x087d /* XFExt */: update_xfext(XFs[val.ixfe], val.ext); break;\n\t\t\t\tcase 0x007d /* ColInfo */: {\n\t\t\t\t\tif(!opts.cellStyles) break;\n\t\t\t\t\twhile(val.e >= val.s) {\n\t\t\t\t\t\tcolinfo[val.e--] = { width: val.w/256, level: (val.level || 0), hidden: !!(val.flags & 1) };\n\t\t\t\t\t\tif(!seencol) { seencol = true; find_mdw_colw(val.w/256); }\n\t\t\t\t\t\tprocess_col(colinfo[val.e+1]);\n\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x0208 /* Row */: {\n\t\t\t\t\tvar rowobj = {};\n\t\t\t\t\tif(val.level != null) { rowinfo[val.r] = rowobj; rowobj.level = val.level; }\n\t\t\t\t\tif(val.hidden) { rowinfo[val.r] = rowobj; rowobj.hidden = true; }\n\t\t\t\t\tif(val.hpt) {\n\t\t\t\t\t\trowinfo[val.r] = rowobj;\n\t\t\t\t\t\trowobj.hpt = val.hpt; rowobj.hpx = pt2px(val.hpt);\n\t\t\t\t\t}\n\t\t\t\t} break;\n\t\t\t\tcase 0x0026 /* LeftMargin */:\n\t\t\t\tcase 0x0027 /* RightMargin */:\n\t\t\t\tcase 0x0028 /* TopMargin */:\n\t\t\t\tcase 0x0029 /* BottomMargin */:\n\t\t\t\t\tif(!out['!margins']) default_margins(out['!margins'] = {});\n\t\t\t\t\tout['!margins'][({0x26: \"left\", 0x27:\"right\", 0x28:\"top\", 0x29:\"bottom\"})[RecordType]] = val;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00a1 /* Setup */: // TODO\n\t\t\t\t\tif(!out['!margins']) default_margins(out['!margins'] = {});\n\t\t\t\t\tout['!margins'].header = val.header;\n\t\t\t\t\tout['!margins'].footer = val.footer;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x023e /* Window2 */: // TODO\n\t\t\t\t\t// $FlowIgnore\n\t\t\t\t\tif(val.RTL) Workbook.Views[0].RTL = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x0092 /* Palette */: palette = val; break;\n\t\t\t\tcase 0x0896 /* Theme */: themes = val; break;\n\t\t\t\tcase 0x008c /* Country */: country = val; break;\n\t\t\t\tcase 0x01ba /* CodeName */: {\n\t\t\t\t\t/*:: if(!Workbook.WBProps) Workbook.WBProps = {}; */\n\t\t\t\t\tif(!cur_sheet) Workbook.WBProps.CodeName = val || \"ThisWorkbook\";\n\t\t\t\t\telse wsprops.CodeName = val || wsprops.name;\n\t\t\t\t} break;\n\t\t\t}\n\t\t} else {\n\t\t\tif(!R) console.error(\"Missing Info for XLS Record 0x\" + RecordType.toString(16));\n\t\t\tblob.l += length;\n\t\t}\n\t}\n\twb.SheetNames=keys(Directory).sort(function(a,b) { return Number(a) - Number(b); }).map(function(x){return Directory[x].name;});\n\tif(!options.bookSheets) wb.Sheets=Sheets;\n\tif(!wb.SheetNames.length && Preamble[\"!ref\"]) {\n\t\twb.SheetNames.push(\"Sheet1\");\n\t\t/*jshint -W069 */\n\t\tif(wb.Sheets) wb.Sheets[\"Sheet1\"] = Preamble;\n\t\t/*jshint +W069 */\n\t} else wb.Preamble=Preamble;\n\tif(wb.Sheets) FilterDatabases.forEach(function(r,i) { wb.Sheets[wb.SheetNames[i]]['!autofilter'] = r; });\n\twb.Strings = sst;\n\twb.SSF = dup(table_fmt);\n\tif(opts.enc) wb.Encryption = opts.enc;\n\tif(themes) wb.Themes = themes;\n\twb.Metadata = {};\n\tif(country !== undefined) wb.Metadata.Country = country;\n\tif(supbooks.names.length > 0) Workbook.Names = supbooks.names;\n\twb.Workbook = Workbook;\n\treturn wb;\n}\n\n/* TODO: split props*/\nvar PSCLSID = {\n\tSI: \"e0859ff2f94f6810ab9108002b27b3d9\",\n\tDSI: \"02d5cdd59c2e1b10939708002b2cf9ae\",\n\tUDI: \"05d5cdd59c2e1b10939708002b2cf9ae\"\n};\nfunction parse_xls_props(cfb/*:CFBContainer*/, props, o) {\n\t/* [MS-OSHARED] 2.3.3.2.2 Document Summary Information Property Set */\n\tvar DSI = CFB.find(cfb, '/!DocumentSummaryInformation');\n\tif(DSI && DSI.size > 0) try {\n\t\tvar DocSummary = parse_PropertySetStream(DSI, DocSummaryPIDDSI, PSCLSID.DSI);\n\t\tfor(var d in DocSummary) props[d] = DocSummary[d];\n\t} catch(e) {if(o.WTF) throw e;/* empty */}\n\n\t/* [MS-OSHARED] 2.3.3.2.1 Summary Information Property Set*/\n\tvar SI = CFB.find(cfb, '/!SummaryInformation');\n\tif(SI && SI.size > 0) try {\n\t\tvar Summary = parse_PropertySetStream(SI, SummaryPIDSI, PSCLSID.SI);\n\t\tfor(var s in Summary) if(props[s] == null) props[s] = Summary[s];\n\t} catch(e) {if(o.WTF) throw e;/* empty */}\n\n\tif(props.HeadingPairs && props.TitlesOfParts) {\n\t\tload_props_pairs(props.HeadingPairs, props.TitlesOfParts, props, o);\n\t\tdelete props.HeadingPairs; delete props.TitlesOfParts;\n\t}\n}\nfunction write_xls_props(wb/*:Workbook*/, cfb/*:CFBContainer*/) {\n\tvar DSEntries = [], SEntries = [], CEntries = [];\n\tvar i = 0, Keys;\n\tvar DocSummaryRE/*:{[key:string]:string}*/ = evert_key(DocSummaryPIDDSI, \"n\");\n\tvar SummaryRE/*:{[key:string]:string}*/ = evert_key(SummaryPIDSI, \"n\");\n\tif(wb.Props) {\n\t\tKeys = keys(wb.Props);\n\t\t// $FlowIgnore\n\t\tfor(i = 0; i < Keys.length; ++i) (Object.prototype.hasOwnProperty.call(DocSummaryRE, Keys[i]) ? DSEntries : Object.prototype.hasOwnProperty.call(SummaryRE, Keys[i]) ? SEntries : CEntries).push([Keys[i], wb.Props[Keys[i]]]);\n\t}\n\tif(wb.Custprops) {\n\t\tKeys = keys(wb.Custprops);\n\t\t// $FlowIgnore\n\t\tfor(i = 0; i < Keys.length; ++i) if(!Object.prototype.hasOwnProperty.call((wb.Props||{}), Keys[i])) (Object.prototype.hasOwnProperty.call(DocSummaryRE, Keys[i]) ? DSEntries : Object.prototype.hasOwnProperty.call(SummaryRE, Keys[i]) ? SEntries : CEntries).push([Keys[i], wb.Custprops[Keys[i]]]);\n\t}\n\tvar CEntries2 = [];\n\tfor(i = 0; i < CEntries.length; ++i) {\n\t\tif(XLSPSSkip.indexOf(CEntries[i][0]) > -1 || PseudoPropsPairs.indexOf(CEntries[i][0]) > -1) continue;\n\t\tif(CEntries[i][1] == null) continue;\n\t\tCEntries2.push(CEntries[i]);\n\t}\n\tif(SEntries.length) CFB.utils.cfb_add(cfb, \"/\\u0005SummaryInformation\", write_PropertySetStream(SEntries, PSCLSID.SI, SummaryRE, SummaryPIDSI));\n\tif(DSEntries.length || CEntries2.length) CFB.utils.cfb_add(cfb, \"/\\u0005DocumentSummaryInformation\", write_PropertySetStream(DSEntries, PSCLSID.DSI, DocSummaryRE, DocSummaryPIDDSI, CEntries2.length ? CEntries2 : null, PSCLSID.UDI));\n}\n\nfunction parse_xlscfb(cfb/*:any*/, options/*:?ParseOpts*/)/*:Workbook*/ {\nif(!options) options = {};\nfix_read_opts(options);\nreset_cp();\nif(options.codepage) set_ansi(options.codepage);\nvar CompObj/*:?CFBEntry*/, WB/*:?any*/;\nif(cfb.FullPaths) {\n\tif(CFB.find(cfb, '/encryption')) throw new Error(\"File is password-protected\");\n\tCompObj = CFB.find(cfb, '!CompObj');\n\tWB = CFB.find(cfb, '/Workbook') || CFB.find(cfb, '/Book');\n} else {\n\tswitch(options.type) {\n\t\tcase 'base64': cfb = s2a(Base64_decode(cfb)); break;\n\t\tcase 'binary': cfb = s2a(cfb); break;\n\t\tcase 'buffer': break;\n\t\tcase 'array': if(!Array.isArray(cfb)) cfb = Array.prototype.slice.call(cfb); break;\n\t}\n\tprep_blob(cfb, 0);\n\tWB = ({content: cfb}/*:any*/);\n}\nvar /*::CompObjP, */WorkbookP/*:: :Workbook = XLSX.utils.book_new(); */;\n\nvar _data/*:?any*/;\nif(CompObj) /*::CompObjP = */parse_compobj(CompObj);\nif(options.bookProps && !options.bookSheets) WorkbookP = ({}/*:any*/);\nelse/*:: if(cfb instanceof CFBContainer) */ {\n\tvar T = has_buf ? 'buffer' : 'array';\n\tif(WB && WB.content) WorkbookP = parse_workbook(WB.content, options);\n\t/* Quattro Pro 7-8 */\n\telse if((_data=CFB.find(cfb, 'PerfectOffice_MAIN')) && _data.content) WorkbookP = WK_.to_workbook(_data.content, (options.type = T, options));\n\t/* Quattro Pro 9 */\n\telse if((_data=CFB.find(cfb, 'NativeContent_MAIN')) && _data.content) WorkbookP = WK_.to_workbook(_data.content, (options.type = T, options));\n\t/* Works 4 for Mac */\n\telse if((_data=CFB.find(cfb, 'MN0')) && _data.content) throw new Error(\"Unsupported Works 4 for Mac file\");\n\telse throw new Error(\"Cannot find Workbook stream\");\n\tif(options.bookVBA && cfb.FullPaths && CFB.find(cfb, '/_VBA_PROJECT_CUR/VBA/dir')) WorkbookP.vbaraw = make_vba_xls(cfb);\n}\n\nvar props = {};\nif(cfb.FullPaths) parse_xls_props(/*::((*/cfb/*:: :any):CFBContainer)*/, props, options);\n\nWorkbookP.Props = WorkbookP.Custprops = props; /* TODO: split up properties */\nif(options.bookFiles) WorkbookP.cfb = cfb;\n/*WorkbookP.CompObjP = CompObjP; // TODO: storage? */\nreturn WorkbookP;\n}\n\n\nfunction write_xlscfb(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:CFBContainer*/ {\n\tvar o = opts || {};\n\tvar cfb = CFB.utils.cfb_new({root:\"R\"});\n\tvar wbpath = \"/Workbook\";\n\tswitch(o.bookType || \"xls\") {\n\t\tcase \"xls\": o.bookType = \"biff8\";\n\t\t/* falls through */\n\t\tcase \"xla\": if(!o.bookType) o.bookType = \"xla\";\n\t\t/* falls through */\n\t\tcase \"biff8\": wbpath = \"/Workbook\"; o.biff = 8; break;\n\t\tcase \"biff5\": wbpath = \"/Book\"; o.biff = 5; break;\n\t\tdefault: throw new Error(\"invalid type \" + o.bookType + \" for XLS CFB\");\n\t}\n\tCFB.utils.cfb_add(cfb, wbpath, write_biff_buf(wb, o));\n\tif(o.biff == 8 && (wb.Props || wb.Custprops)) write_xls_props(wb, cfb);\n\t// TODO: SI, DSI, CO\n\tif(o.biff == 8 && wb.vbaraw) fill_vba_xls(cfb, CFB.read(wb.vbaraw, {type: typeof wb.vbaraw == \"string\" ? \"binary\" : \"buffer\"}));\n\treturn cfb;\n}\n/* [MS-XLSB] 2.3 Record Enumeration */\nvar XLSBRecordEnum = {\n\t/*::[*/0x0000/*::]*/: { /* n:\"BrtRowHdr\", */ f:parse_BrtRowHdr },\n\t/*::[*/0x0001/*::]*/: { /* n:\"BrtCellBlank\", */ f:parse_BrtCellBlank },\n\t/*::[*/0x0002/*::]*/: { /* n:\"BrtCellRk\", */ f:parse_BrtCellRk },\n\t/*::[*/0x0003/*::]*/: { /* n:\"BrtCellError\", */ f:parse_BrtCellError },\n\t/*::[*/0x0004/*::]*/: { /* n:\"BrtCellBool\", */ f:parse_BrtCellBool },\n\t/*::[*/0x0005/*::]*/: { /* n:\"BrtCellReal\", */ f:parse_BrtCellReal },\n\t/*::[*/0x0006/*::]*/: { /* n:\"BrtCellSt\", */ f:parse_BrtCellSt },\n\t/*::[*/0x0007/*::]*/: { /* n:\"BrtCellIsst\", */ f:parse_BrtCellIsst },\n\t/*::[*/0x0008/*::]*/: { /* n:\"BrtFmlaString\", */ f:parse_BrtFmlaString },\n\t/*::[*/0x0009/*::]*/: { /* n:\"BrtFmlaNum\", */ f:parse_BrtFmlaNum },\n\t/*::[*/0x000A/*::]*/: { /* n:\"BrtFmlaBool\", */ f:parse_BrtFmlaBool },\n\t/*::[*/0x000B/*::]*/: { /* n:\"BrtFmlaError\", */ f:parse_BrtFmlaError },\n\t/*::[*/0x000C/*::]*/: { /* n:\"BrtShortBlank\", */ f:parse_BrtShortBlank },\n\t/*::[*/0x000D/*::]*/: { /* n:\"BrtShortRk\", */ f:parse_BrtShortRk },\n\t/*::[*/0x000E/*::]*/: { /* n:\"BrtShortError\", */ f:parse_BrtShortError },\n\t/*::[*/0x000F/*::]*/: { /* n:\"BrtShortBool\", */ f:parse_BrtShortBool },\n\t/*::[*/0x0010/*::]*/: { /* n:\"BrtShortReal\", */ f:parse_BrtShortReal },\n\t/*::[*/0x0011/*::]*/: { /* n:\"BrtShortSt\", */ f:parse_BrtShortSt },\n\t/*::[*/0x0012/*::]*/: { /* n:\"BrtShortIsst\", */ f:parse_BrtShortIsst },\n\t/*::[*/0x0013/*::]*/: { /* n:\"BrtSSTItem\", */ f:parse_RichStr },\n\t/*::[*/0x0014/*::]*/: { /* n:\"BrtPCDIMissing\" */ },\n\t/*::[*/0x0015/*::]*/: { /* n:\"BrtPCDINumber\" */ },\n\t/*::[*/0x0016/*::]*/: { /* n:\"BrtPCDIBoolean\" */ },\n\t/*::[*/0x0017/*::]*/: { /* n:\"BrtPCDIError\" */ },\n\t/*::[*/0x0018/*::]*/: { /* n:\"BrtPCDIString\" */ },\n\t/*::[*/0x0019/*::]*/: { /* n:\"BrtPCDIDatetime\" */ },\n\t/*::[*/0x001A/*::]*/: { /* n:\"BrtPCDIIndex\" */ },\n\t/*::[*/0x001B/*::]*/: { /* n:\"BrtPCDIAMissing\" */ },\n\t/*::[*/0x001C/*::]*/: { /* n:\"BrtPCDIANumber\" */ },\n\t/*::[*/0x001D/*::]*/: { /* n:\"BrtPCDIABoolean\" */ },\n\t/*::[*/0x001E/*::]*/: { /* n:\"BrtPCDIAError\" */ },\n\t/*::[*/0x001F/*::]*/: { /* n:\"BrtPCDIAString\" */ },\n\t/*::[*/0x0020/*::]*/: { /* n:\"BrtPCDIADatetime\" */ },\n\t/*::[*/0x0021/*::]*/: { /* n:\"BrtPCRRecord\" */ },\n\t/*::[*/0x0022/*::]*/: { /* n:\"BrtPCRRecordDt\" */ },\n\t/*::[*/0x0023/*::]*/: { /* n:\"BrtFRTBegin\", */ T:1 },\n\t/*::[*/0x0024/*::]*/: { /* n:\"BrtFRTEnd\", */ T:-1 },\n\t/*::[*/0x0025/*::]*/: { /* n:\"BrtACBegin\", */ T:1 },\n\t/*::[*/0x0026/*::]*/: { /* n:\"BrtACEnd\", */ T:-1 },\n\t/*::[*/0x0027/*::]*/: { /* n:\"BrtName\", */ f:parse_BrtName },\n\t/*::[*/0x0028/*::]*/: { /* n:\"BrtIndexRowBlock\" */ },\n\t/*::[*/0x002A/*::]*/: { /* n:\"BrtIndexBlock\" */ },\n\t/*::[*/0x002B/*::]*/: { /* n:\"BrtFont\", */ f:parse_BrtFont },\n\t/*::[*/0x002C/*::]*/: { /* n:\"BrtFmt\", */ f:parse_BrtFmt },\n\t/*::[*/0x002D/*::]*/: { /* n:\"BrtFill\", */ f:parse_BrtFill },\n\t/*::[*/0x002E/*::]*/: { /* n:\"BrtBorder\", */ f:parse_BrtBorder },\n\t/*::[*/0x002F/*::]*/: { /* n:\"BrtXF\", */ f:parse_BrtXF },\n\t/*::[*/0x0030/*::]*/: { /* n:\"BrtStyle\" */ },\n\t/*::[*/0x0031/*::]*/: { /* n:\"BrtCellMeta\", */ f:parse_Int32LE },\n\t/*::[*/0x0032/*::]*/: { /* n:\"BrtValueMeta\" */ },\n\t/*::[*/0x0033/*::]*/: { /* n:\"BrtMdb\" */ f:parse_BrtMdb },\n\t/*::[*/0x0034/*::]*/: { /* n:\"BrtBeginFmd\", */ T:1 },\n\t/*::[*/0x0035/*::]*/: { /* n:\"BrtEndFmd\", */ T:-1 },\n\t/*::[*/0x0036/*::]*/: { /* n:\"BrtBeginMdx\", */ T:1 },\n\t/*::[*/0x0037/*::]*/: { /* n:\"BrtEndMdx\", */ T:-1 },\n\t/*::[*/0x0038/*::]*/: { /* n:\"BrtBeginMdxTuple\", */ T:1 },\n\t/*::[*/0x0039/*::]*/: { /* n:\"BrtEndMdxTuple\", */ T:-1 },\n\t/*::[*/0x003A/*::]*/: { /* n:\"BrtMdxMbrIstr\" */ },\n\t/*::[*/0x003B/*::]*/: { /* n:\"BrtStr\" */ },\n\t/*::[*/0x003C/*::]*/: { /* n:\"BrtColInfo\", */ f:parse_ColInfo },\n\t/*::[*/0x003E/*::]*/: { /* n:\"BrtCellRString\", */ f:parse_BrtCellRString },\n\t/*::[*/0x003F/*::]*/: { /* n:\"BrtCalcChainItem$\", */ f:parse_BrtCalcChainItem$ },\n\t/*::[*/0x0040/*::]*/: { /* n:\"BrtDVal\", */ f:parse_BrtDVal },\n\t/*::[*/0x0041/*::]*/: { /* n:\"BrtSxvcellNum\" */ },\n\t/*::[*/0x0042/*::]*/: { /* n:\"BrtSxvcellStr\" */ },\n\t/*::[*/0x0043/*::]*/: { /* n:\"BrtSxvcellBool\" */ },\n\t/*::[*/0x0044/*::]*/: { /* n:\"BrtSxvcellErr\" */ },\n\t/*::[*/0x0045/*::]*/: { /* n:\"BrtSxvcellDate\" */ },\n\t/*::[*/0x0046/*::]*/: { /* n:\"BrtSxvcellNil\" */ },\n\t/*::[*/0x0080/*::]*/: { /* n:\"BrtFileVersion\" */ },\n\t/*::[*/0x0081/*::]*/: { /* n:\"BrtBeginSheet\", */ T:1 },\n\t/*::[*/0x0082/*::]*/: { /* n:\"BrtEndSheet\", */ T:-1 },\n\t/*::[*/0x0083/*::]*/: { /* n:\"BrtBeginBook\", */ T:1, f:parsenoop, p:0 },\n\t/*::[*/0x0084/*::]*/: { /* n:\"BrtEndBook\", */ T:-1 },\n\t/*::[*/0x0085/*::]*/: { /* n:\"BrtBeginWsViews\", */ T:1 },\n\t/*::[*/0x0086/*::]*/: { /* n:\"BrtEndWsViews\", */ T:-1 },\n\t/*::[*/0x0087/*::]*/: { /* n:\"BrtBeginBookViews\", */ T:1 },\n\t/*::[*/0x0088/*::]*/: { /* n:\"BrtEndBookViews\", */ T:-1 },\n\t/*::[*/0x0089/*::]*/: { /* n:\"BrtBeginWsView\", */ T:1, f:parse_BrtBeginWsView },\n\t/*::[*/0x008A/*::]*/: { /* n:\"BrtEndWsView\", */ T:-1 },\n\t/*::[*/0x008B/*::]*/: { /* n:\"BrtBeginCsViews\", */ T:1 },\n\t/*::[*/0x008C/*::]*/: { /* n:\"BrtEndCsViews\", */ T:-1 },\n\t/*::[*/0x008D/*::]*/: { /* n:\"BrtBeginCsView\", */ T:1 },\n\t/*::[*/0x008E/*::]*/: { /* n:\"BrtEndCsView\", */ T:-1 },\n\t/*::[*/0x008F/*::]*/: { /* n:\"BrtBeginBundleShs\", */ T:1 },\n\t/*::[*/0x0090/*::]*/: { /* n:\"BrtEndBundleShs\", */ T:-1 },\n\t/*::[*/0x0091/*::]*/: { /* n:\"BrtBeginSheetData\", */ T:1 },\n\t/*::[*/0x0092/*::]*/: { /* n:\"BrtEndSheetData\", */ T:-1 },\n\t/*::[*/0x0093/*::]*/: { /* n:\"BrtWsProp\", */ f:parse_BrtWsProp },\n\t/*::[*/0x0094/*::]*/: { /* n:\"BrtWsDim\", */ f:parse_BrtWsDim, p:16 },\n\t/*::[*/0x0097/*::]*/: { /* n:\"BrtPane\", */ f:parse_BrtPane },\n\t/*::[*/0x0098/*::]*/: { /* n:\"BrtSel\" */ },\n\t/*::[*/0x0099/*::]*/: { /* n:\"BrtWbProp\", */ f:parse_BrtWbProp },\n\t/*::[*/0x009A/*::]*/: { /* n:\"BrtWbFactoid\" */ },\n\t/*::[*/0x009B/*::]*/: { /* n:\"BrtFileRecover\" */ },\n\t/*::[*/0x009C/*::]*/: { /* n:\"BrtBundleSh\", */ f:parse_BrtBundleSh },\n\t/*::[*/0x009D/*::]*/: { /* n:\"BrtCalcProp\" */ },\n\t/*::[*/0x009E/*::]*/: { /* n:\"BrtBookView\" */ },\n\t/*::[*/0x009F/*::]*/: { /* n:\"BrtBeginSst\", */ T:1, f:parse_BrtBeginSst },\n\t/*::[*/0x00A0/*::]*/: { /* n:\"BrtEndSst\", */ T:-1 },\n\t/*::[*/0x00A1/*::]*/: { /* n:\"BrtBeginAFilter\", */ T:1, f:parse_UncheckedRfX },\n\t/*::[*/0x00A2/*::]*/: { /* n:\"BrtEndAFilter\", */ T:-1 },\n\t/*::[*/0x00A3/*::]*/: { /* n:\"BrtBeginFilterColumn\", */ T:1 },\n\t/*::[*/0x00A4/*::]*/: { /* n:\"BrtEndFilterColumn\", */ T:-1 },\n\t/*::[*/0x00A5/*::]*/: { /* n:\"BrtBeginFilters\", */ T:1 },\n\t/*::[*/0x00A6/*::]*/: { /* n:\"BrtEndFilters\", */ T:-1 },\n\t/*::[*/0x00A7/*::]*/: { /* n:\"BrtFilter\" */ },\n\t/*::[*/0x00A8/*::]*/: { /* n:\"BrtColorFilter\" */ },\n\t/*::[*/0x00A9/*::]*/: { /* n:\"BrtIconFilter\" */ },\n\t/*::[*/0x00AA/*::]*/: { /* n:\"BrtTop10Filter\" */ },\n\t/*::[*/0x00AB/*::]*/: { /* n:\"BrtDynamicFilter\" */ },\n\t/*::[*/0x00AC/*::]*/: { /* n:\"BrtBeginCustomFilters\", */ T:1 },\n\t/*::[*/0x00AD/*::]*/: { /* n:\"BrtEndCustomFilters\", */ T:-1 },\n\t/*::[*/0x00AE/*::]*/: { /* n:\"BrtCustomFilter\" */ },\n\t/*::[*/0x00AF/*::]*/: { /* n:\"BrtAFilterDateGroupItem\" */ },\n\t/*::[*/0x00B0/*::]*/: { /* n:\"BrtMergeCell\", */ f:parse_BrtMergeCell },\n\t/*::[*/0x00B1/*::]*/: { /* n:\"BrtBeginMergeCells\", */ T:1 },\n\t/*::[*/0x00B2/*::]*/: { /* n:\"BrtEndMergeCells\", */ T:-1 },\n\t/*::[*/0x00B3/*::]*/: { /* n:\"BrtBeginPivotCacheDef\", */ T:1 },\n\t/*::[*/0x00B4/*::]*/: { /* n:\"BrtEndPivotCacheDef\", */ T:-1 },\n\t/*::[*/0x00B5/*::]*/: { /* n:\"BrtBeginPCDFields\", */ T:1 },\n\t/*::[*/0x00B6/*::]*/: { /* n:\"BrtEndPCDFields\", */ T:-1 },\n\t/*::[*/0x00B7/*::]*/: { /* n:\"BrtBeginPCDField\", */ T:1 },\n\t/*::[*/0x00B8/*::]*/: { /* n:\"BrtEndPCDField\", */ T:-1 },\n\t/*::[*/0x00B9/*::]*/: { /* n:\"BrtBeginPCDSource\", */ T:1 },\n\t/*::[*/0x00BA/*::]*/: { /* n:\"BrtEndPCDSource\", */ T:-1 },\n\t/*::[*/0x00BB/*::]*/: { /* n:\"BrtBeginPCDSRange\", */ T:1 },\n\t/*::[*/0x00BC/*::]*/: { /* n:\"BrtEndPCDSRange\", */ T:-1 },\n\t/*::[*/0x00BD/*::]*/: { /* n:\"BrtBeginPCDFAtbl\", */ T:1 },\n\t/*::[*/0x00BE/*::]*/: { /* n:\"BrtEndPCDFAtbl\", */ T:-1 },\n\t/*::[*/0x00BF/*::]*/: { /* n:\"BrtBeginPCDIRun\", */ T:1 },\n\t/*::[*/0x00C0/*::]*/: { /* n:\"BrtEndPCDIRun\", */ T:-1 },\n\t/*::[*/0x00C1/*::]*/: { /* n:\"BrtBeginPivotCacheRecords\", */ T:1 },\n\t/*::[*/0x00C2/*::]*/: { /* n:\"BrtEndPivotCacheRecords\", */ T:-1 },\n\t/*::[*/0x00C3/*::]*/: { /* n:\"BrtBeginPCDHierarchies\", */ T:1 },\n\t/*::[*/0x00C4/*::]*/: { /* n:\"BrtEndPCDHierarchies\", */ T:-1 },\n\t/*::[*/0x00C5/*::]*/: { /* n:\"BrtBeginPCDHierarchy\", */ T:1 },\n\t/*::[*/0x00C6/*::]*/: { /* n:\"BrtEndPCDHierarchy\", */ T:-1 },\n\t/*::[*/0x00C7/*::]*/: { /* n:\"BrtBeginPCDHFieldsUsage\", */ T:1 },\n\t/*::[*/0x00C8/*::]*/: { /* n:\"BrtEndPCDHFieldsUsage\", */ T:-1 },\n\t/*::[*/0x00C9/*::]*/: { /* n:\"BrtBeginExtConnection\", */ T:1 },\n\t/*::[*/0x00CA/*::]*/: { /* n:\"BrtEndExtConnection\", */ T:-1 },\n\t/*::[*/0x00CB/*::]*/: { /* n:\"BrtBeginECDbProps\", */ T:1 },\n\t/*::[*/0x00CC/*::]*/: { /* n:\"BrtEndECDbProps\", */ T:-1 },\n\t/*::[*/0x00CD/*::]*/: { /* n:\"BrtBeginECOlapProps\", */ T:1 },\n\t/*::[*/0x00CE/*::]*/: { /* n:\"BrtEndECOlapProps\", */ T:-1 },\n\t/*::[*/0x00CF/*::]*/: { /* n:\"BrtBeginPCDSConsol\", */ T:1 },\n\t/*::[*/0x00D0/*::]*/: { /* n:\"BrtEndPCDSConsol\", */ T:-1 },\n\t/*::[*/0x00D1/*::]*/: { /* n:\"BrtBeginPCDSCPages\", */ T:1 },\n\t/*::[*/0x00D2/*::]*/: { /* n:\"BrtEndPCDSCPages\", */ T:-1 },\n\t/*::[*/0x00D3/*::]*/: { /* n:\"BrtBeginPCDSCPage\", */ T:1 },\n\t/*::[*/0x00D4/*::]*/: { /* n:\"BrtEndPCDSCPage\", */ T:-1 },\n\t/*::[*/0x00D5/*::]*/: { /* n:\"BrtBeginPCDSCPItem\", */ T:1 },\n\t/*::[*/0x00D6/*::]*/: { /* n:\"BrtEndPCDSCPItem\", */ T:-1 },\n\t/*::[*/0x00D7/*::]*/: { /* n:\"BrtBeginPCDSCSets\", */ T:1 },\n\t/*::[*/0x00D8/*::]*/: { /* n:\"BrtEndPCDSCSets\", */ T:-1 },\n\t/*::[*/0x00D9/*::]*/: { /* n:\"BrtBeginPCDSCSet\", */ T:1 },\n\t/*::[*/0x00DA/*::]*/: { /* n:\"BrtEndPCDSCSet\", */ T:-1 },\n\t/*::[*/0x00DB/*::]*/: { /* n:\"BrtBeginPCDFGroup\", */ T:1 },\n\t/*::[*/0x00DC/*::]*/: { /* n:\"BrtEndPCDFGroup\", */ T:-1 },\n\t/*::[*/0x00DD/*::]*/: { /* n:\"BrtBeginPCDFGItems\", */ T:1 },\n\t/*::[*/0x00DE/*::]*/: { /* n:\"BrtEndPCDFGItems\", */ T:-1 },\n\t/*::[*/0x00DF/*::]*/: { /* n:\"BrtBeginPCDFGRange\", */ T:1 },\n\t/*::[*/0x00E0/*::]*/: { /* n:\"BrtEndPCDFGRange\", */ T:-1 },\n\t/*::[*/0x00E1/*::]*/: { /* n:\"BrtBeginPCDFGDiscrete\", */ T:1 },\n\t/*::[*/0x00E2/*::]*/: { /* n:\"BrtEndPCDFGDiscrete\", */ T:-1 },\n\t/*::[*/0x00E3/*::]*/: { /* n:\"BrtBeginPCDSDTupleCache\", */ T:1 },\n\t/*::[*/0x00E4/*::]*/: { /* n:\"BrtEndPCDSDTupleCache\", */ T:-1 },\n\t/*::[*/0x00E5/*::]*/: { /* n:\"BrtBeginPCDSDTCEntries\", */ T:1 },\n\t/*::[*/0x00E6/*::]*/: { /* n:\"BrtEndPCDSDTCEntries\", */ T:-1 },\n\t/*::[*/0x00E7/*::]*/: { /* n:\"BrtBeginPCDSDTCEMembers\", */ T:1 },\n\t/*::[*/0x00E8/*::]*/: { /* n:\"BrtEndPCDSDTCEMembers\", */ T:-1 },\n\t/*::[*/0x00E9/*::]*/: { /* n:\"BrtBeginPCDSDTCEMember\", */ T:1 },\n\t/*::[*/0x00EA/*::]*/: { /* n:\"BrtEndPCDSDTCEMember\", */ T:-1 },\n\t/*::[*/0x00EB/*::]*/: { /* n:\"BrtBeginPCDSDTCQueries\", */ T:1 },\n\t/*::[*/0x00EC/*::]*/: { /* n:\"BrtEndPCDSDTCQueries\", */ T:-1 },\n\t/*::[*/0x00ED/*::]*/: { /* n:\"BrtBeginPCDSDTCQuery\", */ T:1 },\n\t/*::[*/0x00EE/*::]*/: { /* n:\"BrtEndPCDSDTCQuery\", */ T:-1 },\n\t/*::[*/0x00EF/*::]*/: { /* n:\"BrtBeginPCDSDTCSets\", */ T:1 },\n\t/*::[*/0x00F0/*::]*/: { /* n:\"BrtEndPCDSDTCSets\", */ T:-1 },\n\t/*::[*/0x00F1/*::]*/: { /* n:\"BrtBeginPCDSDTCSet\", */ T:1 },\n\t/*::[*/0x00F2/*::]*/: { /* n:\"BrtEndPCDSDTCSet\", */ T:-1 },\n\t/*::[*/0x00F3/*::]*/: { /* n:\"BrtBeginPCDCalcItems\", */ T:1 },\n\t/*::[*/0x00F4/*::]*/: { /* n:\"BrtEndPCDCalcItems\", */ T:-1 },\n\t/*::[*/0x00F5/*::]*/: { /* n:\"BrtBeginPCDCalcItem\", */ T:1 },\n\t/*::[*/0x00F6/*::]*/: { /* n:\"BrtEndPCDCalcItem\", */ T:-1 },\n\t/*::[*/0x00F7/*::]*/: { /* n:\"BrtBeginPRule\", */ T:1 },\n\t/*::[*/0x00F8/*::]*/: { /* n:\"BrtEndPRule\", */ T:-1 },\n\t/*::[*/0x00F9/*::]*/: { /* n:\"BrtBeginPRFilters\", */ T:1 },\n\t/*::[*/0x00FA/*::]*/: { /* n:\"BrtEndPRFilters\", */ T:-1 },\n\t/*::[*/0x00FB/*::]*/: { /* n:\"BrtBeginPRFilter\", */ T:1 },\n\t/*::[*/0x00FC/*::]*/: { /* n:\"BrtEndPRFilter\", */ T:-1 },\n\t/*::[*/0x00FD/*::]*/: { /* n:\"BrtBeginPNames\", */ T:1 },\n\t/*::[*/0x00FE/*::]*/: { /* n:\"BrtEndPNames\", */ T:-1 },\n\t/*::[*/0x00FF/*::]*/: { /* n:\"BrtBeginPName\", */ T:1 },\n\t/*::[*/0x0100/*::]*/: { /* n:\"BrtEndPName\", */ T:-1 },\n\t/*::[*/0x0101/*::]*/: { /* n:\"BrtBeginPNPairs\", */ T:1 },\n\t/*::[*/0x0102/*::]*/: { /* n:\"BrtEndPNPairs\", */ T:-1 },\n\t/*::[*/0x0103/*::]*/: { /* n:\"BrtBeginPNPair\", */ T:1 },\n\t/*::[*/0x0104/*::]*/: { /* n:\"BrtEndPNPair\", */ T:-1 },\n\t/*::[*/0x0105/*::]*/: { /* n:\"BrtBeginECWebProps\", */ T:1 },\n\t/*::[*/0x0106/*::]*/: { /* n:\"BrtEndECWebProps\", */ T:-1 },\n\t/*::[*/0x0107/*::]*/: { /* n:\"BrtBeginEcWpTables\", */ T:1 },\n\t/*::[*/0x0108/*::]*/: { /* n:\"BrtEndECWPTables\", */ T:-1 },\n\t/*::[*/0x0109/*::]*/: { /* n:\"BrtBeginECParams\", */ T:1 },\n\t/*::[*/0x010A/*::]*/: { /* n:\"BrtEndECParams\", */ T:-1 },\n\t/*::[*/0x010B/*::]*/: { /* n:\"BrtBeginECParam\", */ T:1 },\n\t/*::[*/0x010C/*::]*/: { /* n:\"BrtEndECParam\", */ T:-1 },\n\t/*::[*/0x010D/*::]*/: { /* n:\"BrtBeginPCDKPIs\", */ T:1 },\n\t/*::[*/0x010E/*::]*/: { /* n:\"BrtEndPCDKPIs\", */ T:-1 },\n\t/*::[*/0x010F/*::]*/: { /* n:\"BrtBeginPCDKPI\", */ T:1 },\n\t/*::[*/0x0110/*::]*/: { /* n:\"BrtEndPCDKPI\", */ T:-1 },\n\t/*::[*/0x0111/*::]*/: { /* n:\"BrtBeginDims\", */ T:1 },\n\t/*::[*/0x0112/*::]*/: { /* n:\"BrtEndDims\", */ T:-1 },\n\t/*::[*/0x0113/*::]*/: { /* n:\"BrtBeginDim\", */ T:1 },\n\t/*::[*/0x0114/*::]*/: { /* n:\"BrtEndDim\", */ T:-1 },\n\t/*::[*/0x0115/*::]*/: { /* n:\"BrtIndexPartEnd\" */ },\n\t/*::[*/0x0116/*::]*/: { /* n:\"BrtBeginStyleSheet\", */ T:1 },\n\t/*::[*/0x0117/*::]*/: { /* n:\"BrtEndStyleSheet\", */ T:-1 },\n\t/*::[*/0x0118/*::]*/: { /* n:\"BrtBeginSXView\", */ T:1 },\n\t/*::[*/0x0119/*::]*/: { /* n:\"BrtEndSXVI\", */ T:-1 },\n\t/*::[*/0x011A/*::]*/: { /* n:\"BrtBeginSXVI\", */ T:1 },\n\t/*::[*/0x011B/*::]*/: { /* n:\"BrtBeginSXVIs\", */ T:1 },\n\t/*::[*/0x011C/*::]*/: { /* n:\"BrtEndSXVIs\", */ T:-1 },\n\t/*::[*/0x011D/*::]*/: { /* n:\"BrtBeginSXVD\", */ T:1 },\n\t/*::[*/0x011E/*::]*/: { /* n:\"BrtEndSXVD\", */ T:-1 },\n\t/*::[*/0x011F/*::]*/: { /* n:\"BrtBeginSXVDs\", */ T:1 },\n\t/*::[*/0x0120/*::]*/: { /* n:\"BrtEndSXVDs\", */ T:-1 },\n\t/*::[*/0x0121/*::]*/: { /* n:\"BrtBeginSXPI\", */ T:1 },\n\t/*::[*/0x0122/*::]*/: { /* n:\"BrtEndSXPI\", */ T:-1 },\n\t/*::[*/0x0123/*::]*/: { /* n:\"BrtBeginSXPIs\", */ T:1 },\n\t/*::[*/0x0124/*::]*/: { /* n:\"BrtEndSXPIs\", */ T:-1 },\n\t/*::[*/0x0125/*::]*/: { /* n:\"BrtBeginSXDI\", */ T:1 },\n\t/*::[*/0x0126/*::]*/: { /* n:\"BrtEndSXDI\", */ T:-1 },\n\t/*::[*/0x0127/*::]*/: { /* n:\"BrtBeginSXDIs\", */ T:1 },\n\t/*::[*/0x0128/*::]*/: { /* n:\"BrtEndSXDIs\", */ T:-1 },\n\t/*::[*/0x0129/*::]*/: { /* n:\"BrtBeginSXLI\", */ T:1 },\n\t/*::[*/0x012A/*::]*/: { /* n:\"BrtEndSXLI\", */ T:-1 },\n\t/*::[*/0x012B/*::]*/: { /* n:\"BrtBeginSXLIRws\", */ T:1 },\n\t/*::[*/0x012C/*::]*/: { /* n:\"BrtEndSXLIRws\", */ T:-1 },\n\t/*::[*/0x012D/*::]*/: { /* n:\"BrtBeginSXLICols\", */ T:1 },\n\t/*::[*/0x012E/*::]*/: { /* n:\"BrtEndSXLICols\", */ T:-1 },\n\t/*::[*/0x012F/*::]*/: { /* n:\"BrtBeginSXFormat\", */ T:1 },\n\t/*::[*/0x0130/*::]*/: { /* n:\"BrtEndSXFormat\", */ T:-1 },\n\t/*::[*/0x0131/*::]*/: { /* n:\"BrtBeginSXFormats\", */ T:1 },\n\t/*::[*/0x0132/*::]*/: { /* n:\"BrtEndSxFormats\", */ T:-1 },\n\t/*::[*/0x0133/*::]*/: { /* n:\"BrtBeginSxSelect\", */ T:1 },\n\t/*::[*/0x0134/*::]*/: { /* n:\"BrtEndSxSelect\", */ T:-1 },\n\t/*::[*/0x0135/*::]*/: { /* n:\"BrtBeginISXVDRws\", */ T:1 },\n\t/*::[*/0x0136/*::]*/: { /* n:\"BrtEndISXVDRws\", */ T:-1 },\n\t/*::[*/0x0137/*::]*/: { /* n:\"BrtBeginISXVDCols\", */ T:1 },\n\t/*::[*/0x0138/*::]*/: { /* n:\"BrtEndISXVDCols\", */ T:-1 },\n\t/*::[*/0x0139/*::]*/: { /* n:\"BrtEndSXLocation\", */ T:-1 },\n\t/*::[*/0x013A/*::]*/: { /* n:\"BrtBeginSXLocation\", */ T:1 },\n\t/*::[*/0x013B/*::]*/: { /* n:\"BrtEndSXView\", */ T:-1 },\n\t/*::[*/0x013C/*::]*/: { /* n:\"BrtBeginSXTHs\", */ T:1 },\n\t/*::[*/0x013D/*::]*/: { /* n:\"BrtEndSXTHs\", */ T:-1 },\n\t/*::[*/0x013E/*::]*/: { /* n:\"BrtBeginSXTH\", */ T:1 },\n\t/*::[*/0x013F/*::]*/: { /* n:\"BrtEndSXTH\", */ T:-1 },\n\t/*::[*/0x0140/*::]*/: { /* n:\"BrtBeginISXTHRws\", */ T:1 },\n\t/*::[*/0x0141/*::]*/: { /* n:\"BrtEndISXTHRws\", */ T:-1 },\n\t/*::[*/0x0142/*::]*/: { /* n:\"BrtBeginISXTHCols\", */ T:1 },\n\t/*::[*/0x0143/*::]*/: { /* n:\"BrtEndISXTHCols\", */ T:-1 },\n\t/*::[*/0x0144/*::]*/: { /* n:\"BrtBeginSXTDMPS\", */ T:1 },\n\t/*::[*/0x0145/*::]*/: { /* n:\"BrtEndSXTDMPs\", */ T:-1 },\n\t/*::[*/0x0146/*::]*/: { /* n:\"BrtBeginSXTDMP\", */ T:1 },\n\t/*::[*/0x0147/*::]*/: { /* n:\"BrtEndSXTDMP\", */ T:-1 },\n\t/*::[*/0x0148/*::]*/: { /* n:\"BrtBeginSXTHItems\", */ T:1 },\n\t/*::[*/0x0149/*::]*/: { /* n:\"BrtEndSXTHItems\", */ T:-1 },\n\t/*::[*/0x014A/*::]*/: { /* n:\"BrtBeginSXTHItem\", */ T:1 },\n\t/*::[*/0x014B/*::]*/: { /* n:\"BrtEndSXTHItem\", */ T:-1 },\n\t/*::[*/0x014C/*::]*/: { /* n:\"BrtBeginMetadata\", */ T:1 },\n\t/*::[*/0x014D/*::]*/: { /* n:\"BrtEndMetadata\", */ T:-1 },\n\t/*::[*/0x014E/*::]*/: { /* n:\"BrtBeginEsmdtinfo\", */ T:1 },\n\t/*::[*/0x014F/*::]*/: { /* n:\"BrtMdtinfo\", */ f:parse_BrtMdtinfo },\n\t/*::[*/0x0150/*::]*/: { /* n:\"BrtEndEsmdtinfo\", */ T:-1 },\n\t/*::[*/0x0151/*::]*/: { /* n:\"BrtBeginEsmdb\", */ f:parse_BrtBeginEsmdb, T:1 },\n\t/*::[*/0x0152/*::]*/: { /* n:\"BrtEndEsmdb\", */ T:-1 },\n\t/*::[*/0x0153/*::]*/: { /* n:\"BrtBeginEsfmd\", */ T:1 },\n\t/*::[*/0x0154/*::]*/: { /* n:\"BrtEndEsfmd\", */ T:-1 },\n\t/*::[*/0x0155/*::]*/: { /* n:\"BrtBeginSingleCells\", */ T:1 },\n\t/*::[*/0x0156/*::]*/: { /* n:\"BrtEndSingleCells\", */ T:-1 },\n\t/*::[*/0x0157/*::]*/: { /* n:\"BrtBeginList\", */ T:1 },\n\t/*::[*/0x0158/*::]*/: { /* n:\"BrtEndList\", */ T:-1 },\n\t/*::[*/0x0159/*::]*/: { /* n:\"BrtBeginListCols\", */ T:1 },\n\t/*::[*/0x015A/*::]*/: { /* n:\"BrtEndListCols\", */ T:-1 },\n\t/*::[*/0x015B/*::]*/: { /* n:\"BrtBeginListCol\", */ T:1 },\n\t/*::[*/0x015C/*::]*/: { /* n:\"BrtEndListCol\", */ T:-1 },\n\t/*::[*/0x015D/*::]*/: { /* n:\"BrtBeginListXmlCPr\", */ T:1 },\n\t/*::[*/0x015E/*::]*/: { /* n:\"BrtEndListXmlCPr\", */ T:-1 },\n\t/*::[*/0x015F/*::]*/: { /* n:\"BrtListCCFmla\" */ },\n\t/*::[*/0x0160/*::]*/: { /* n:\"BrtListTrFmla\" */ },\n\t/*::[*/0x0161/*::]*/: { /* n:\"BrtBeginExternals\", */ T:1 },\n\t/*::[*/0x0162/*::]*/: { /* n:\"BrtEndExternals\", */ T:-1 },\n\t/*::[*/0x0163/*::]*/: { /* n:\"BrtSupBookSrc\", */ f:parse_RelID},\n\t/*::[*/0x0165/*::]*/: { /* n:\"BrtSupSelf\" */ },\n\t/*::[*/0x0166/*::]*/: { /* n:\"BrtSupSame\" */ },\n\t/*::[*/0x0167/*::]*/: { /* n:\"BrtSupTabs\" */ },\n\t/*::[*/0x0168/*::]*/: { /* n:\"BrtBeginSupBook\", */ T:1 },\n\t/*::[*/0x0169/*::]*/: { /* n:\"BrtPlaceholderName\" */ },\n\t/*::[*/0x016A/*::]*/: { /* n:\"BrtExternSheet\", */ f:parse_ExternSheet },\n\t/*::[*/0x016B/*::]*/: { /* n:\"BrtExternTableStart\" */ },\n\t/*::[*/0x016C/*::]*/: { /* n:\"BrtExternTableEnd\" */ },\n\t/*::[*/0x016E/*::]*/: { /* n:\"BrtExternRowHdr\" */ },\n\t/*::[*/0x016F/*::]*/: { /* n:\"BrtExternCellBlank\" */ },\n\t/*::[*/0x0170/*::]*/: { /* n:\"BrtExternCellReal\" */ },\n\t/*::[*/0x0171/*::]*/: { /* n:\"BrtExternCellBool\" */ },\n\t/*::[*/0x0172/*::]*/: { /* n:\"BrtExternCellError\" */ },\n\t/*::[*/0x0173/*::]*/: { /* n:\"BrtExternCellString\" */ },\n\t/*::[*/0x0174/*::]*/: { /* n:\"BrtBeginEsmdx\", */ T:1 },\n\t/*::[*/0x0175/*::]*/: { /* n:\"BrtEndEsmdx\", */ T:-1 },\n\t/*::[*/0x0176/*::]*/: { /* n:\"BrtBeginMdxSet\", */ T:1 },\n\t/*::[*/0x0177/*::]*/: { /* n:\"BrtEndMdxSet\", */ T:-1 },\n\t/*::[*/0x0178/*::]*/: { /* n:\"BrtBeginMdxMbrProp\", */ T:1 },\n\t/*::[*/0x0179/*::]*/: { /* n:\"BrtEndMdxMbrProp\", */ T:-1 },\n\t/*::[*/0x017A/*::]*/: { /* n:\"BrtBeginMdxKPI\", */ T:1 },\n\t/*::[*/0x017B/*::]*/: { /* n:\"BrtEndMdxKPI\", */ T:-1 },\n\t/*::[*/0x017C/*::]*/: { /* n:\"BrtBeginEsstr\", */ T:1 },\n\t/*::[*/0x017D/*::]*/: { /* n:\"BrtEndEsstr\", */ T:-1 },\n\t/*::[*/0x017E/*::]*/: { /* n:\"BrtBeginPRFItem\", */ T:1 },\n\t/*::[*/0x017F/*::]*/: { /* n:\"BrtEndPRFItem\", */ T:-1 },\n\t/*::[*/0x0180/*::]*/: { /* n:\"BrtBeginPivotCacheIDs\", */ T:1 },\n\t/*::[*/0x0181/*::]*/: { /* n:\"BrtEndPivotCacheIDs\", */ T:-1 },\n\t/*::[*/0x0182/*::]*/: { /* n:\"BrtBeginPivotCacheID\", */ T:1 },\n\t/*::[*/0x0183/*::]*/: { /* n:\"BrtEndPivotCacheID\", */ T:-1 },\n\t/*::[*/0x0184/*::]*/: { /* n:\"BrtBeginISXVIs\", */ T:1 },\n\t/*::[*/0x0185/*::]*/: { /* n:\"BrtEndISXVIs\", */ T:-1 },\n\t/*::[*/0x0186/*::]*/: { /* n:\"BrtBeginColInfos\", */ T:1 },\n\t/*::[*/0x0187/*::]*/: { /* n:\"BrtEndColInfos\", */ T:-1 },\n\t/*::[*/0x0188/*::]*/: { /* n:\"BrtBeginRwBrk\", */ T:1 },\n\t/*::[*/0x0189/*::]*/: { /* n:\"BrtEndRwBrk\", */ T:-1 },\n\t/*::[*/0x018A/*::]*/: { /* n:\"BrtBeginColBrk\", */ T:1 },\n\t/*::[*/0x018B/*::]*/: { /* n:\"BrtEndColBrk\", */ T:-1 },\n\t/*::[*/0x018C/*::]*/: { /* n:\"BrtBrk\" */ },\n\t/*::[*/0x018D/*::]*/: { /* n:\"BrtUserBookView\" */ },\n\t/*::[*/0x018E/*::]*/: { /* n:\"BrtInfo\" */ },\n\t/*::[*/0x018F/*::]*/: { /* n:\"BrtCUsr\" */ },\n\t/*::[*/0x0190/*::]*/: { /* n:\"BrtUsr\" */ },\n\t/*::[*/0x0191/*::]*/: { /* n:\"BrtBeginUsers\", */ T:1 },\n\t/*::[*/0x0193/*::]*/: { /* n:\"BrtEOF\" */ },\n\t/*::[*/0x0194/*::]*/: { /* n:\"BrtUCR\" */ },\n\t/*::[*/0x0195/*::]*/: { /* n:\"BrtRRInsDel\" */ },\n\t/*::[*/0x0196/*::]*/: { /* n:\"BrtRREndInsDel\" */ },\n\t/*::[*/0x0197/*::]*/: { /* n:\"BrtRRMove\" */ },\n\t/*::[*/0x0198/*::]*/: { /* n:\"BrtRREndMove\" */ },\n\t/*::[*/0x0199/*::]*/: { /* n:\"BrtRRChgCell\" */ },\n\t/*::[*/0x019A/*::]*/: { /* n:\"BrtRREndChgCell\" */ },\n\t/*::[*/0x019B/*::]*/: { /* n:\"BrtRRHeader\" */ },\n\t/*::[*/0x019C/*::]*/: { /* n:\"BrtRRUserView\" */ },\n\t/*::[*/0x019D/*::]*/: { /* n:\"BrtRRRenSheet\" */ },\n\t/*::[*/0x019E/*::]*/: { /* n:\"BrtRRInsertSh\" */ },\n\t/*::[*/0x019F/*::]*/: { /* n:\"BrtRRDefName\" */ },\n\t/*::[*/0x01A0/*::]*/: { /* n:\"BrtRRNote\" */ },\n\t/*::[*/0x01A1/*::]*/: { /* n:\"BrtRRConflict\" */ },\n\t/*::[*/0x01A2/*::]*/: { /* n:\"BrtRRTQSIF\" */ },\n\t/*::[*/0x01A3/*::]*/: { /* n:\"BrtRRFormat\" */ },\n\t/*::[*/0x01A4/*::]*/: { /* n:\"BrtRREndFormat\" */ },\n\t/*::[*/0x01A5/*::]*/: { /* n:\"BrtRRAutoFmt\" */ },\n\t/*::[*/0x01A6/*::]*/: { /* n:\"BrtBeginUserShViews\", */ T:1 },\n\t/*::[*/0x01A7/*::]*/: { /* n:\"BrtBeginUserShView\", */ T:1 },\n\t/*::[*/0x01A8/*::]*/: { /* n:\"BrtEndUserShView\", */ T:-1 },\n\t/*::[*/0x01A9/*::]*/: { /* n:\"BrtEndUserShViews\", */ T:-1 },\n\t/*::[*/0x01AA/*::]*/: { /* n:\"BrtArrFmla\", */ f:parse_BrtArrFmla },\n\t/*::[*/0x01AB/*::]*/: { /* n:\"BrtShrFmla\", */ f:parse_BrtShrFmla },\n\t/*::[*/0x01AC/*::]*/: { /* n:\"BrtTable\" */ },\n\t/*::[*/0x01AD/*::]*/: { /* n:\"BrtBeginExtConnections\", */ T:1 },\n\t/*::[*/0x01AE/*::]*/: { /* n:\"BrtEndExtConnections\", */ T:-1 },\n\t/*::[*/0x01AF/*::]*/: { /* n:\"BrtBeginPCDCalcMems\", */ T:1 },\n\t/*::[*/0x01B0/*::]*/: { /* n:\"BrtEndPCDCalcMems\", */ T:-1 },\n\t/*::[*/0x01B1/*::]*/: { /* n:\"BrtBeginPCDCalcMem\", */ T:1 },\n\t/*::[*/0x01B2/*::]*/: { /* n:\"BrtEndPCDCalcMem\", */ T:-1 },\n\t/*::[*/0x01B3/*::]*/: { /* n:\"BrtBeginPCDHGLevels\", */ T:1 },\n\t/*::[*/0x01B4/*::]*/: { /* n:\"BrtEndPCDHGLevels\", */ T:-1 },\n\t/*::[*/0x01B5/*::]*/: { /* n:\"BrtBeginPCDHGLevel\", */ T:1 },\n\t/*::[*/0x01B6/*::]*/: { /* n:\"BrtEndPCDHGLevel\", */ T:-1 },\n\t/*::[*/0x01B7/*::]*/: { /* n:\"BrtBeginPCDHGLGroups\", */ T:1 },\n\t/*::[*/0x01B8/*::]*/: { /* n:\"BrtEndPCDHGLGroups\", */ T:-1 },\n\t/*::[*/0x01B9/*::]*/: { /* n:\"BrtBeginPCDHGLGroup\", */ T:1 },\n\t/*::[*/0x01BA/*::]*/: { /* n:\"BrtEndPCDHGLGroup\", */ T:-1 },\n\t/*::[*/0x01BB/*::]*/: { /* n:\"BrtBeginPCDHGLGMembers\", */ T:1 },\n\t/*::[*/0x01BC/*::]*/: { /* n:\"BrtEndPCDHGLGMembers\", */ T:-1 },\n\t/*::[*/0x01BD/*::]*/: { /* n:\"BrtBeginPCDHGLGMember\", */ T:1 },\n\t/*::[*/0x01BE/*::]*/: { /* n:\"BrtEndPCDHGLGMember\", */ T:-1 },\n\t/*::[*/0x01BF/*::]*/: { /* n:\"BrtBeginQSI\", */ T:1 },\n\t/*::[*/0x01C0/*::]*/: { /* n:\"BrtEndQSI\", */ T:-1 },\n\t/*::[*/0x01C1/*::]*/: { /* n:\"BrtBeginQSIR\", */ T:1 },\n\t/*::[*/0x01C2/*::]*/: { /* n:\"BrtEndQSIR\", */ T:-1 },\n\t/*::[*/0x01C3/*::]*/: { /* n:\"BrtBeginDeletedNames\", */ T:1 },\n\t/*::[*/0x01C4/*::]*/: { /* n:\"BrtEndDeletedNames\", */ T:-1 },\n\t/*::[*/0x01C5/*::]*/: { /* n:\"BrtBeginDeletedName\", */ T:1 },\n\t/*::[*/0x01C6/*::]*/: { /* n:\"BrtEndDeletedName\", */ T:-1 },\n\t/*::[*/0x01C7/*::]*/: { /* n:\"BrtBeginQSIFs\", */ T:1 },\n\t/*::[*/0x01C8/*::]*/: { /* n:\"BrtEndQSIFs\", */ T:-1 },\n\t/*::[*/0x01C9/*::]*/: { /* n:\"BrtBeginQSIF\", */ T:1 },\n\t/*::[*/0x01CA/*::]*/: { /* n:\"BrtEndQSIF\", */ T:-1 },\n\t/*::[*/0x01CB/*::]*/: { /* n:\"BrtBeginAutoSortScope\", */ T:1 },\n\t/*::[*/0x01CC/*::]*/: { /* n:\"BrtEndAutoSortScope\", */ T:-1 },\n\t/*::[*/0x01CD/*::]*/: { /* n:\"BrtBeginConditionalFormatting\", */ T:1 },\n\t/*::[*/0x01CE/*::]*/: { /* n:\"BrtEndConditionalFormatting\", */ T:-1 },\n\t/*::[*/0x01CF/*::]*/: { /* n:\"BrtBeginCFRule\", */ T:1 },\n\t/*::[*/0x01D0/*::]*/: { /* n:\"BrtEndCFRule\", */ T:-1 },\n\t/*::[*/0x01D1/*::]*/: { /* n:\"BrtBeginIconSet\", */ T:1 },\n\t/*::[*/0x01D2/*::]*/: { /* n:\"BrtEndIconSet\", */ T:-1 },\n\t/*::[*/0x01D3/*::]*/: { /* n:\"BrtBeginDatabar\", */ T:1 },\n\t/*::[*/0x01D4/*::]*/: { /* n:\"BrtEndDatabar\", */ T:-1 },\n\t/*::[*/0x01D5/*::]*/: { /* n:\"BrtBeginColorScale\", */ T:1 },\n\t/*::[*/0x01D6/*::]*/: { /* n:\"BrtEndColorScale\", */ T:-1 },\n\t/*::[*/0x01D7/*::]*/: { /* n:\"BrtCFVO\" */ },\n\t/*::[*/0x01D8/*::]*/: { /* n:\"BrtExternValueMeta\" */ },\n\t/*::[*/0x01D9/*::]*/: { /* n:\"BrtBeginColorPalette\", */ T:1 },\n\t/*::[*/0x01DA/*::]*/: { /* n:\"BrtEndColorPalette\", */ T:-1 },\n\t/*::[*/0x01DB/*::]*/: { /* n:\"BrtIndexedColor\" */ },\n\t/*::[*/0x01DC/*::]*/: { /* n:\"BrtMargins\", */ f:parse_BrtMargins },\n\t/*::[*/0x01DD/*::]*/: { /* n:\"BrtPrintOptions\" */ },\n\t/*::[*/0x01DE/*::]*/: { /* n:\"BrtPageSetup\" */ },\n\t/*::[*/0x01DF/*::]*/: { /* n:\"BrtBeginHeaderFooter\", */ T:1 },\n\t/*::[*/0x01E0/*::]*/: { /* n:\"BrtEndHeaderFooter\", */ T:-1 },\n\t/*::[*/0x01E1/*::]*/: { /* n:\"BrtBeginSXCrtFormat\", */ T:1 },\n\t/*::[*/0x01E2/*::]*/: { /* n:\"BrtEndSXCrtFormat\", */ T:-1 },\n\t/*::[*/0x01E3/*::]*/: { /* n:\"BrtBeginSXCrtFormats\", */ T:1 },\n\t/*::[*/0x01E4/*::]*/: { /* n:\"BrtEndSXCrtFormats\", */ T:-1 },\n\t/*::[*/0x01E5/*::]*/: { /* n:\"BrtWsFmtInfo\", */ f:parse_BrtWsFmtInfo },\n\t/*::[*/0x01E6/*::]*/: { /* n:\"BrtBeginMgs\", */ T:1 },\n\t/*::[*/0x01E7/*::]*/: { /* n:\"BrtEndMGs\", */ T:-1 },\n\t/*::[*/0x01E8/*::]*/: { /* n:\"BrtBeginMGMaps\", */ T:1 },\n\t/*::[*/0x01E9/*::]*/: { /* n:\"BrtEndMGMaps\", */ T:-1 },\n\t/*::[*/0x01EA/*::]*/: { /* n:\"BrtBeginMG\", */ T:1 },\n\t/*::[*/0x01EB/*::]*/: { /* n:\"BrtEndMG\", */ T:-1 },\n\t/*::[*/0x01EC/*::]*/: { /* n:\"BrtBeginMap\", */ T:1 },\n\t/*::[*/0x01ED/*::]*/: { /* n:\"BrtEndMap\", */ T:-1 },\n\t/*::[*/0x01EE/*::]*/: { /* n:\"BrtHLink\", */ f:parse_BrtHLink },\n\t/*::[*/0x01EF/*::]*/: { /* n:\"BrtBeginDCon\", */ T:1 },\n\t/*::[*/0x01F0/*::]*/: { /* n:\"BrtEndDCon\", */ T:-1 },\n\t/*::[*/0x01F1/*::]*/: { /* n:\"BrtBeginDRefs\", */ T:1 },\n\t/*::[*/0x01F2/*::]*/: { /* n:\"BrtEndDRefs\", */ T:-1 },\n\t/*::[*/0x01F3/*::]*/: { /* n:\"BrtDRef\" */ },\n\t/*::[*/0x01F4/*::]*/: { /* n:\"BrtBeginScenMan\", */ T:1 },\n\t/*::[*/0x01F5/*::]*/: { /* n:\"BrtEndScenMan\", */ T:-1 },\n\t/*::[*/0x01F6/*::]*/: { /* n:\"BrtBeginSct\", */ T:1 },\n\t/*::[*/0x01F7/*::]*/: { /* n:\"BrtEndSct\", */ T:-1 },\n\t/*::[*/0x01F8/*::]*/: { /* n:\"BrtSlc\" */ },\n\t/*::[*/0x01F9/*::]*/: { /* n:\"BrtBeginDXFs\", */ T:1 },\n\t/*::[*/0x01FA/*::]*/: { /* n:\"BrtEndDXFs\", */ T:-1 },\n\t/*::[*/0x01FB/*::]*/: { /* n:\"BrtDXF\" */ },\n\t/*::[*/0x01FC/*::]*/: { /* n:\"BrtBeginTableStyles\", */ T:1 },\n\t/*::[*/0x01FD/*::]*/: { /* n:\"BrtEndTableStyles\", */ T:-1 },\n\t/*::[*/0x01FE/*::]*/: { /* n:\"BrtBeginTableStyle\", */ T:1 },\n\t/*::[*/0x01FF/*::]*/: { /* n:\"BrtEndTableStyle\", */ T:-1 },\n\t/*::[*/0x0200/*::]*/: { /* n:\"BrtTableStyleElement\" */ },\n\t/*::[*/0x0201/*::]*/: { /* n:\"BrtTableStyleClient\" */ },\n\t/*::[*/0x0202/*::]*/: { /* n:\"BrtBeginVolDeps\", */ T:1 },\n\t/*::[*/0x0203/*::]*/: { /* n:\"BrtEndVolDeps\", */ T:-1 },\n\t/*::[*/0x0204/*::]*/: { /* n:\"BrtBeginVolType\", */ T:1 },\n\t/*::[*/0x0205/*::]*/: { /* n:\"BrtEndVolType\", */ T:-1 },\n\t/*::[*/0x0206/*::]*/: { /* n:\"BrtBeginVolMain\", */ T:1 },\n\t/*::[*/0x0207/*::]*/: { /* n:\"BrtEndVolMain\", */ T:-1 },\n\t/*::[*/0x0208/*::]*/: { /* n:\"BrtBeginVolTopic\", */ T:1 },\n\t/*::[*/0x0209/*::]*/: { /* n:\"BrtEndVolTopic\", */ T:-1 },\n\t/*::[*/0x020A/*::]*/: { /* n:\"BrtVolSubtopic\" */ },\n\t/*::[*/0x020B/*::]*/: { /* n:\"BrtVolRef\" */ },\n\t/*::[*/0x020C/*::]*/: { /* n:\"BrtVolNum\" */ },\n\t/*::[*/0x020D/*::]*/: { /* n:\"BrtVolErr\" */ },\n\t/*::[*/0x020E/*::]*/: { /* n:\"BrtVolStr\" */ },\n\t/*::[*/0x020F/*::]*/: { /* n:\"BrtVolBool\" */ },\n\t/*::[*/0x0210/*::]*/: { /* n:\"BrtBeginCalcChain$\", */ T:1 },\n\t/*::[*/0x0211/*::]*/: { /* n:\"BrtEndCalcChain$\", */ T:-1 },\n\t/*::[*/0x0212/*::]*/: { /* n:\"BrtBeginSortState\", */ T:1 },\n\t/*::[*/0x0213/*::]*/: { /* n:\"BrtEndSortState\", */ T:-1 },\n\t/*::[*/0x0214/*::]*/: { /* n:\"BrtBeginSortCond\", */ T:1 },\n\t/*::[*/0x0215/*::]*/: { /* n:\"BrtEndSortCond\", */ T:-1 },\n\t/*::[*/0x0216/*::]*/: { /* n:\"BrtBookProtection\" */ },\n\t/*::[*/0x0217/*::]*/: { /* n:\"BrtSheetProtection\" */ },\n\t/*::[*/0x0218/*::]*/: { /* n:\"BrtRangeProtection\" */ },\n\t/*::[*/0x0219/*::]*/: { /* n:\"BrtPhoneticInfo\" */ },\n\t/*::[*/0x021A/*::]*/: { /* n:\"BrtBeginECTxtWiz\", */ T:1 },\n\t/*::[*/0x021B/*::]*/: { /* n:\"BrtEndECTxtWiz\", */ T:-1 },\n\t/*::[*/0x021C/*::]*/: { /* n:\"BrtBeginECTWFldInfoLst\", */ T:1 },\n\t/*::[*/0x021D/*::]*/: { /* n:\"BrtEndECTWFldInfoLst\", */ T:-1 },\n\t/*::[*/0x021E/*::]*/: { /* n:\"BrtBeginECTwFldInfo\", */ T:1 },\n\t/*::[*/0x0224/*::]*/: { /* n:\"BrtFileSharing\" */ },\n\t/*::[*/0x0225/*::]*/: { /* n:\"BrtOleSize\" */ },\n\t/*::[*/0x0226/*::]*/: { /* n:\"BrtDrawing\", */ f:parse_RelID },\n\t/*::[*/0x0227/*::]*/: { /* n:\"BrtLegacyDrawing\" */ },\n\t/*::[*/0x0228/*::]*/: { /* n:\"BrtLegacyDrawingHF\" */ },\n\t/*::[*/0x0229/*::]*/: { /* n:\"BrtWebOpt\" */ },\n\t/*::[*/0x022A/*::]*/: { /* n:\"BrtBeginWebPubItems\", */ T:1 },\n\t/*::[*/0x022B/*::]*/: { /* n:\"BrtEndWebPubItems\", */ T:-1 },\n\t/*::[*/0x022C/*::]*/: { /* n:\"BrtBeginWebPubItem\", */ T:1 },\n\t/*::[*/0x022D/*::]*/: { /* n:\"BrtEndWebPubItem\", */ T:-1 },\n\t/*::[*/0x022E/*::]*/: { /* n:\"BrtBeginSXCondFmt\", */ T:1 },\n\t/*::[*/0x022F/*::]*/: { /* n:\"BrtEndSXCondFmt\", */ T:-1 },\n\t/*::[*/0x0230/*::]*/: { /* n:\"BrtBeginSXCondFmts\", */ T:1 },\n\t/*::[*/0x0231/*::]*/: { /* n:\"BrtEndSXCondFmts\", */ T:-1 },\n\t/*::[*/0x0232/*::]*/: { /* n:\"BrtBkHim\" */ },\n\t/*::[*/0x0234/*::]*/: { /* n:\"BrtColor\" */ },\n\t/*::[*/0x0235/*::]*/: { /* n:\"BrtBeginIndexedColors\", */ T:1 },\n\t/*::[*/0x0236/*::]*/: { /* n:\"BrtEndIndexedColors\", */ T:-1 },\n\t/*::[*/0x0239/*::]*/: { /* n:\"BrtBeginMRUColors\", */ T:1 },\n\t/*::[*/0x023A/*::]*/: { /* n:\"BrtEndMRUColors\", */ T:-1 },\n\t/*::[*/0x023C/*::]*/: { /* n:\"BrtMRUColor\" */ },\n\t/*::[*/0x023D/*::]*/: { /* n:\"BrtBeginDVals\", */ T:1 },\n\t/*::[*/0x023E/*::]*/: { /* n:\"BrtEndDVals\", */ T:-1 },\n\t/*::[*/0x0241/*::]*/: { /* n:\"BrtSupNameStart\" */ },\n\t/*::[*/0x0242/*::]*/: { /* n:\"BrtSupNameValueStart\" */ },\n\t/*::[*/0x0243/*::]*/: { /* n:\"BrtSupNameValueEnd\" */ },\n\t/*::[*/0x0244/*::]*/: { /* n:\"BrtSupNameNum\" */ },\n\t/*::[*/0x0245/*::]*/: { /* n:\"BrtSupNameErr\" */ },\n\t/*::[*/0x0246/*::]*/: { /* n:\"BrtSupNameSt\" */ },\n\t/*::[*/0x0247/*::]*/: { /* n:\"BrtSupNameNil\" */ },\n\t/*::[*/0x0248/*::]*/: { /* n:\"BrtSupNameBool\" */ },\n\t/*::[*/0x0249/*::]*/: { /* n:\"BrtSupNameFmla\" */ },\n\t/*::[*/0x024A/*::]*/: { /* n:\"BrtSupNameBits\" */ },\n\t/*::[*/0x024B/*::]*/: { /* n:\"BrtSupNameEnd\" */ },\n\t/*::[*/0x024C/*::]*/: { /* n:\"BrtEndSupBook\", */ T:-1 },\n\t/*::[*/0x024D/*::]*/: { /* n:\"BrtCellSmartTagProperty\" */ },\n\t/*::[*/0x024E/*::]*/: { /* n:\"BrtBeginCellSmartTag\", */ T:1 },\n\t/*::[*/0x024F/*::]*/: { /* n:\"BrtEndCellSmartTag\", */ T:-1 },\n\t/*::[*/0x0250/*::]*/: { /* n:\"BrtBeginCellSmartTags\", */ T:1 },\n\t/*::[*/0x0251/*::]*/: { /* n:\"BrtEndCellSmartTags\", */ T:-1 },\n\t/*::[*/0x0252/*::]*/: { /* n:\"BrtBeginSmartTags\", */ T:1 },\n\t/*::[*/0x0253/*::]*/: { /* n:\"BrtEndSmartTags\", */ T:-1 },\n\t/*::[*/0x0254/*::]*/: { /* n:\"BrtSmartTagType\" */ },\n\t/*::[*/0x0255/*::]*/: { /* n:\"BrtBeginSmartTagTypes\", */ T:1 },\n\t/*::[*/0x0256/*::]*/: { /* n:\"BrtEndSmartTagTypes\", */ T:-1 },\n\t/*::[*/0x0257/*::]*/: { /* n:\"BrtBeginSXFilters\", */ T:1 },\n\t/*::[*/0x0258/*::]*/: { /* n:\"BrtEndSXFilters\", */ T:-1 },\n\t/*::[*/0x0259/*::]*/: { /* n:\"BrtBeginSXFILTER\", */ T:1 },\n\t/*::[*/0x025A/*::]*/: { /* n:\"BrtEndSXFilter\", */ T:-1 },\n\t/*::[*/0x025B/*::]*/: { /* n:\"BrtBeginFills\", */ T:1 },\n\t/*::[*/0x025C/*::]*/: { /* n:\"BrtEndFills\", */ T:-1 },\n\t/*::[*/0x025D/*::]*/: { /* n:\"BrtBeginCellWatches\", */ T:1 },\n\t/*::[*/0x025E/*::]*/: { /* n:\"BrtEndCellWatches\", */ T:-1 },\n\t/*::[*/0x025F/*::]*/: { /* n:\"BrtCellWatch\" */ },\n\t/*::[*/0x0260/*::]*/: { /* n:\"BrtBeginCRErrs\", */ T:1 },\n\t/*::[*/0x0261/*::]*/: { /* n:\"BrtEndCRErrs\", */ T:-1 },\n\t/*::[*/0x0262/*::]*/: { /* n:\"BrtCrashRecErr\" */ },\n\t/*::[*/0x0263/*::]*/: { /* n:\"BrtBeginFonts\", */ T:1 },\n\t/*::[*/0x0264/*::]*/: { /* n:\"BrtEndFonts\", */ T:-1 },\n\t/*::[*/0x0265/*::]*/: { /* n:\"BrtBeginBorders\", */ T:1 },\n\t/*::[*/0x0266/*::]*/: { /* n:\"BrtEndBorders\", */ T:-1 },\n\t/*::[*/0x0267/*::]*/: { /* n:\"BrtBeginFmts\", */ T:1 },\n\t/*::[*/0x0268/*::]*/: { /* n:\"BrtEndFmts\", */ T:-1 },\n\t/*::[*/0x0269/*::]*/: { /* n:\"BrtBeginCellXFs\", */ T:1 },\n\t/*::[*/0x026A/*::]*/: { /* n:\"BrtEndCellXFs\", */ T:-1 },\n\t/*::[*/0x026B/*::]*/: { /* n:\"BrtBeginStyles\", */ T:1 },\n\t/*::[*/0x026C/*::]*/: { /* n:\"BrtEndStyles\", */ T:-1 },\n\t/*::[*/0x0271/*::]*/: { /* n:\"BrtBigName\" */ },\n\t/*::[*/0x0272/*::]*/: { /* n:\"BrtBeginCellStyleXFs\", */ T:1 },\n\t/*::[*/0x0273/*::]*/: { /* n:\"BrtEndCellStyleXFs\", */ T:-1 },\n\t/*::[*/0x0274/*::]*/: { /* n:\"BrtBeginComments\", */ T:1 },\n\t/*::[*/0x0275/*::]*/: { /* n:\"BrtEndComments\", */ T:-1 },\n\t/*::[*/0x0276/*::]*/: { /* n:\"BrtBeginCommentAuthors\", */ T:1 },\n\t/*::[*/0x0277/*::]*/: { /* n:\"BrtEndCommentAuthors\", */ T:-1 },\n\t/*::[*/0x0278/*::]*/: { /* n:\"BrtCommentAuthor\", */ f:parse_BrtCommentAuthor },\n\t/*::[*/0x0279/*::]*/: { /* n:\"BrtBeginCommentList\", */ T:1 },\n\t/*::[*/0x027A/*::]*/: { /* n:\"BrtEndCommentList\", */ T:-1 },\n\t/*::[*/0x027B/*::]*/: { /* n:\"BrtBeginComment\", */ T:1, f:parse_BrtBeginComment},\n\t/*::[*/0x027C/*::]*/: { /* n:\"BrtEndComment\", */ T:-1 },\n\t/*::[*/0x027D/*::]*/: { /* n:\"BrtCommentText\", */ f:parse_BrtCommentText },\n\t/*::[*/0x027E/*::]*/: { /* n:\"BrtBeginOleObjects\", */ T:1 },\n\t/*::[*/0x027F/*::]*/: { /* n:\"BrtOleObject\" */ },\n\t/*::[*/0x0280/*::]*/: { /* n:\"BrtEndOleObjects\", */ T:-1 },\n\t/*::[*/0x0281/*::]*/: { /* n:\"BrtBeginSxrules\", */ T:1 },\n\t/*::[*/0x0282/*::]*/: { /* n:\"BrtEndSxRules\", */ T:-1 },\n\t/*::[*/0x0283/*::]*/: { /* n:\"BrtBeginActiveXControls\", */ T:1 },\n\t/*::[*/0x0284/*::]*/: { /* n:\"BrtActiveX\" */ },\n\t/*::[*/0x0285/*::]*/: { /* n:\"BrtEndActiveXControls\", */ T:-1 },\n\t/*::[*/0x0286/*::]*/: { /* n:\"BrtBeginPCDSDTCEMembersSortBy\", */ T:1 },\n\t/*::[*/0x0288/*::]*/: { /* n:\"BrtBeginCellIgnoreECs\", */ T:1 },\n\t/*::[*/0x0289/*::]*/: { /* n:\"BrtCellIgnoreEC\" */ },\n\t/*::[*/0x028A/*::]*/: { /* n:\"BrtEndCellIgnoreECs\", */ T:-1 },\n\t/*::[*/0x028B/*::]*/: { /* n:\"BrtCsProp\", */ f:parse_BrtCsProp },\n\t/*::[*/0x028C/*::]*/: { /* n:\"BrtCsPageSetup\" */ },\n\t/*::[*/0x028D/*::]*/: { /* n:\"BrtBeginUserCsViews\", */ T:1 },\n\t/*::[*/0x028E/*::]*/: { /* n:\"BrtEndUserCsViews\", */ T:-1 },\n\t/*::[*/0x028F/*::]*/: { /* n:\"BrtBeginUserCsView\", */ T:1 },\n\t/*::[*/0x0290/*::]*/: { /* n:\"BrtEndUserCsView\", */ T:-1 },\n\t/*::[*/0x0291/*::]*/: { /* n:\"BrtBeginPcdSFCIEntries\", */ T:1 },\n\t/*::[*/0x0292/*::]*/: { /* n:\"BrtEndPCDSFCIEntries\", */ T:-1 },\n\t/*::[*/0x0293/*::]*/: { /* n:\"BrtPCDSFCIEntry\" */ },\n\t/*::[*/0x0294/*::]*/: { /* n:\"BrtBeginListParts\", */ T:1 },\n\t/*::[*/0x0295/*::]*/: { /* n:\"BrtListPart\" */ },\n\t/*::[*/0x0296/*::]*/: { /* n:\"BrtEndListParts\", */ T:-1 },\n\t/*::[*/0x0297/*::]*/: { /* n:\"BrtSheetCalcProp\" */ },\n\t/*::[*/0x0298/*::]*/: { /* n:\"BrtBeginFnGroup\", */ T:1 },\n\t/*::[*/0x0299/*::]*/: { /* n:\"BrtFnGroup\" */ },\n\t/*::[*/0x029A/*::]*/: { /* n:\"BrtEndFnGroup\", */ T:-1 },\n\t/*::[*/0x029B/*::]*/: { /* n:\"BrtSupAddin\" */ },\n\t/*::[*/0x029C/*::]*/: { /* n:\"BrtSXTDMPOrder\" */ },\n\t/*::[*/0x029D/*::]*/: { /* n:\"BrtCsProtection\" */ },\n\t/*::[*/0x029F/*::]*/: { /* n:\"BrtBeginWsSortMap\", */ T:1 },\n\t/*::[*/0x02A0/*::]*/: { /* n:\"BrtEndWsSortMap\", */ T:-1 },\n\t/*::[*/0x02A1/*::]*/: { /* n:\"BrtBeginRRSort\", */ T:1 },\n\t/*::[*/0x02A2/*::]*/: { /* n:\"BrtEndRRSort\", */ T:-1 },\n\t/*::[*/0x02A3/*::]*/: { /* n:\"BrtRRSortItem\" */ },\n\t/*::[*/0x02A4/*::]*/: { /* n:\"BrtFileSharingIso\" */ },\n\t/*::[*/0x02A5/*::]*/: { /* n:\"BrtBookProtectionIso\" */ },\n\t/*::[*/0x02A6/*::]*/: { /* n:\"BrtSheetProtectionIso\" */ },\n\t/*::[*/0x02A7/*::]*/: { /* n:\"BrtCsProtectionIso\" */ },\n\t/*::[*/0x02A8/*::]*/: { /* n:\"BrtRangeProtectionIso\" */ },\n\t/*::[*/0x02A9/*::]*/: { /* n:\"BrtDValList\" */ },\n\t/*::[*/0x0400/*::]*/: { /* n:\"BrtRwDescent\" */ },\n\t/*::[*/0x0401/*::]*/: { /* n:\"BrtKnownFonts\" */ },\n\t/*::[*/0x0402/*::]*/: { /* n:\"BrtBeginSXTupleSet\", */ T:1 },\n\t/*::[*/0x0403/*::]*/: { /* n:\"BrtEndSXTupleSet\", */ T:-1 },\n\t/*::[*/0x0404/*::]*/: { /* n:\"BrtBeginSXTupleSetHeader\", */ T:1 },\n\t/*::[*/0x0405/*::]*/: { /* n:\"BrtEndSXTupleSetHeader\", */ T:-1 },\n\t/*::[*/0x0406/*::]*/: { /* n:\"BrtSXTupleSetHeaderItem\" */ },\n\t/*::[*/0x0407/*::]*/: { /* n:\"BrtBeginSXTupleSetData\", */ T:1 },\n\t/*::[*/0x0408/*::]*/: { /* n:\"BrtEndSXTupleSetData\", */ T:-1 },\n\t/*::[*/0x0409/*::]*/: { /* n:\"BrtBeginSXTupleSetRow\", */ T:1 },\n\t/*::[*/0x040A/*::]*/: { /* n:\"BrtEndSXTupleSetRow\", */ T:-1 },\n\t/*::[*/0x040B/*::]*/: { /* n:\"BrtSXTupleSetRowItem\" */ },\n\t/*::[*/0x040C/*::]*/: { /* n:\"BrtNameExt\" */ },\n\t/*::[*/0x040D/*::]*/: { /* n:\"BrtPCDH14\" */ },\n\t/*::[*/0x040E/*::]*/: { /* n:\"BrtBeginPCDCalcMem14\", */ T:1 },\n\t/*::[*/0x040F/*::]*/: { /* n:\"BrtEndPCDCalcMem14\", */ T:-1 },\n\t/*::[*/0x0410/*::]*/: { /* n:\"BrtSXTH14\" */ },\n\t/*::[*/0x0411/*::]*/: { /* n:\"BrtBeginSparklineGroup\", */ T:1 },\n\t/*::[*/0x0412/*::]*/: { /* n:\"BrtEndSparklineGroup\", */ T:-1 },\n\t/*::[*/0x0413/*::]*/: { /* n:\"BrtSparkline\" */ },\n\t/*::[*/0x0414/*::]*/: { /* n:\"BrtSXDI14\" */ },\n\t/*::[*/0x0415/*::]*/: { /* n:\"BrtWsFmtInfoEx14\" */ },\n\t/*::[*/0x0416/*::]*/: { /* n:\"BrtBeginConditionalFormatting14\", */ T:1 },\n\t/*::[*/0x0417/*::]*/: { /* n:\"BrtEndConditionalFormatting14\", */ T:-1 },\n\t/*::[*/0x0418/*::]*/: { /* n:\"BrtBeginCFRule14\", */ T:1 },\n\t/*::[*/0x0419/*::]*/: { /* n:\"BrtEndCFRule14\", */ T:-1 },\n\t/*::[*/0x041A/*::]*/: { /* n:\"BrtCFVO14\" */ },\n\t/*::[*/0x041B/*::]*/: { /* n:\"BrtBeginDatabar14\", */ T:1 },\n\t/*::[*/0x041C/*::]*/: { /* n:\"BrtBeginIconSet14\", */ T:1 },\n\t/*::[*/0x041D/*::]*/: { /* n:\"BrtDVal14\", */ f: parse_BrtDVal14 },\n\t/*::[*/0x041E/*::]*/: { /* n:\"BrtBeginDVals14\", */ T:1 },\n\t/*::[*/0x041F/*::]*/: { /* n:\"BrtColor14\" */ },\n\t/*::[*/0x0420/*::]*/: { /* n:\"BrtBeginSparklines\", */ T:1 },\n\t/*::[*/0x0421/*::]*/: { /* n:\"BrtEndSparklines\", */ T:-1 },\n\t/*::[*/0x0422/*::]*/: { /* n:\"BrtBeginSparklineGroups\", */ T:1 },\n\t/*::[*/0x0423/*::]*/: { /* n:\"BrtEndSparklineGroups\", */ T:-1 },\n\t/*::[*/0x0425/*::]*/: { /* n:\"BrtSXVD14\" */ },\n\t/*::[*/0x0426/*::]*/: { /* n:\"BrtBeginSXView14\", */ T:1 },\n\t/*::[*/0x0427/*::]*/: { /* n:\"BrtEndSXView14\", */ T:-1 },\n\t/*::[*/0x0428/*::]*/: { /* n:\"BrtBeginSXView16\", */ T:1 },\n\t/*::[*/0x0429/*::]*/: { /* n:\"BrtEndSXView16\", */ T:-1 },\n\t/*::[*/0x042A/*::]*/: { /* n:\"BrtBeginPCD14\", */ T:1 },\n\t/*::[*/0x042B/*::]*/: { /* n:\"BrtEndPCD14\", */ T:-1 },\n\t/*::[*/0x042C/*::]*/: { /* n:\"BrtBeginExtConn14\", */ T:1 },\n\t/*::[*/0x042D/*::]*/: { /* n:\"BrtEndExtConn14\", */ T:-1 },\n\t/*::[*/0x042E/*::]*/: { /* n:\"BrtBeginSlicerCacheIDs\", */ T:1 },\n\t/*::[*/0x042F/*::]*/: { /* n:\"BrtEndSlicerCacheIDs\", */ T:-1 },\n\t/*::[*/0x0430/*::]*/: { /* n:\"BrtBeginSlicerCacheID\", */ T:1 },\n\t/*::[*/0x0431/*::]*/: { /* n:\"BrtEndSlicerCacheID\", */ T:-1 },\n\t/*::[*/0x0433/*::]*/: { /* n:\"BrtBeginSlicerCache\", */ T:1 },\n\t/*::[*/0x0434/*::]*/: { /* n:\"BrtEndSlicerCache\", */ T:-1 },\n\t/*::[*/0x0435/*::]*/: { /* n:\"BrtBeginSlicerCacheDef\", */ T:1 },\n\t/*::[*/0x0436/*::]*/: { /* n:\"BrtEndSlicerCacheDef\", */ T:-1 },\n\t/*::[*/0x0437/*::]*/: { /* n:\"BrtBeginSlicersEx\", */ T:1 },\n\t/*::[*/0x0438/*::]*/: { /* n:\"BrtEndSlicersEx\", */ T:-1 },\n\t/*::[*/0x0439/*::]*/: { /* n:\"BrtBeginSlicerEx\", */ T:1 },\n\t/*::[*/0x043A/*::]*/: { /* n:\"BrtEndSlicerEx\", */ T:-1 },\n\t/*::[*/0x043B/*::]*/: { /* n:\"BrtBeginSlicer\", */ T:1 },\n\t/*::[*/0x043C/*::]*/: { /* n:\"BrtEndSlicer\", */ T:-1 },\n\t/*::[*/0x043D/*::]*/: { /* n:\"BrtSlicerCachePivotTables\" */ },\n\t/*::[*/0x043E/*::]*/: { /* n:\"BrtBeginSlicerCacheOlapImpl\", */ T:1 },\n\t/*::[*/0x043F/*::]*/: { /* n:\"BrtEndSlicerCacheOlapImpl\", */ T:-1 },\n\t/*::[*/0x0440/*::]*/: { /* n:\"BrtBeginSlicerCacheLevelsData\", */ T:1 },\n\t/*::[*/0x0441/*::]*/: { /* n:\"BrtEndSlicerCacheLevelsData\", */ T:-1 },\n\t/*::[*/0x0442/*::]*/: { /* n:\"BrtBeginSlicerCacheLevelData\", */ T:1 },\n\t/*::[*/0x0443/*::]*/: { /* n:\"BrtEndSlicerCacheLevelData\", */ T:-1 },\n\t/*::[*/0x0444/*::]*/: { /* n:\"BrtBeginSlicerCacheSiRanges\", */ T:1 },\n\t/*::[*/0x0445/*::]*/: { /* n:\"BrtEndSlicerCacheSiRanges\", */ T:-1 },\n\t/*::[*/0x0446/*::]*/: { /* n:\"BrtBeginSlicerCacheSiRange\", */ T:1 },\n\t/*::[*/0x0447/*::]*/: { /* n:\"BrtEndSlicerCacheSiRange\", */ T:-1 },\n\t/*::[*/0x0448/*::]*/: { /* n:\"BrtSlicerCacheOlapItem\" */ },\n\t/*::[*/0x0449/*::]*/: { /* n:\"BrtBeginSlicerCacheSelections\", */ T:1 },\n\t/*::[*/0x044A/*::]*/: { /* n:\"BrtSlicerCacheSelection\" */ },\n\t/*::[*/0x044B/*::]*/: { /* n:\"BrtEndSlicerCacheSelections\", */ T:-1 },\n\t/*::[*/0x044C/*::]*/: { /* n:\"BrtBeginSlicerCacheNative\", */ T:1 },\n\t/*::[*/0x044D/*::]*/: { /* n:\"BrtEndSlicerCacheNative\", */ T:-1 },\n\t/*::[*/0x044E/*::]*/: { /* n:\"BrtSlicerCacheNativeItem\" */ },\n\t/*::[*/0x044F/*::]*/: { /* n:\"BrtRangeProtection14\" */ },\n\t/*::[*/0x0450/*::]*/: { /* n:\"BrtRangeProtectionIso14\" */ },\n\t/*::[*/0x0451/*::]*/: { /* n:\"BrtCellIgnoreEC14\" */ },\n\t/*::[*/0x0457/*::]*/: { /* n:\"BrtList14\" */ },\n\t/*::[*/0x0458/*::]*/: { /* n:\"BrtCFIcon\" */ },\n\t/*::[*/0x0459/*::]*/: { /* n:\"BrtBeginSlicerCachesPivotCacheIDs\", */ T:1 },\n\t/*::[*/0x045A/*::]*/: { /* n:\"BrtEndSlicerCachesPivotCacheIDs\", */ T:-1 },\n\t/*::[*/0x045B/*::]*/: { /* n:\"BrtBeginSlicers\", */ T:1 },\n\t/*::[*/0x045C/*::]*/: { /* n:\"BrtEndSlicers\", */ T:-1 },\n\t/*::[*/0x045D/*::]*/: { /* n:\"BrtWbProp14\" */ },\n\t/*::[*/0x045E/*::]*/: { /* n:\"BrtBeginSXEdit\", */ T:1 },\n\t/*::[*/0x045F/*::]*/: { /* n:\"BrtEndSXEdit\", */ T:-1 },\n\t/*::[*/0x0460/*::]*/: { /* n:\"BrtBeginSXEdits\", */ T:1 },\n\t/*::[*/0x0461/*::]*/: { /* n:\"BrtEndSXEdits\", */ T:-1 },\n\t/*::[*/0x0462/*::]*/: { /* n:\"BrtBeginSXChange\", */ T:1 },\n\t/*::[*/0x0463/*::]*/: { /* n:\"BrtEndSXChange\", */ T:-1 },\n\t/*::[*/0x0464/*::]*/: { /* n:\"BrtBeginSXChanges\", */ T:1 },\n\t/*::[*/0x0465/*::]*/: { /* n:\"BrtEndSXChanges\", */ T:-1 },\n\t/*::[*/0x0466/*::]*/: { /* n:\"BrtSXTupleItems\" */ },\n\t/*::[*/0x0468/*::]*/: { /* n:\"BrtBeginSlicerStyle\", */ T:1 },\n\t/*::[*/0x0469/*::]*/: { /* n:\"BrtEndSlicerStyle\", */ T:-1 },\n\t/*::[*/0x046A/*::]*/: { /* n:\"BrtSlicerStyleElement\" */ },\n\t/*::[*/0x046B/*::]*/: { /* n:\"BrtBeginStyleSheetExt14\", */ T:1 },\n\t/*::[*/0x046C/*::]*/: { /* n:\"BrtEndStyleSheetExt14\", */ T:-1 },\n\t/*::[*/0x046D/*::]*/: { /* n:\"BrtBeginSlicerCachesPivotCacheID\", */ T:1 },\n\t/*::[*/0x046E/*::]*/: { /* n:\"BrtEndSlicerCachesPivotCacheID\", */ T:-1 },\n\t/*::[*/0x046F/*::]*/: { /* n:\"BrtBeginConditionalFormattings\", */ T:1 },\n\t/*::[*/0x0470/*::]*/: { /* n:\"BrtEndConditionalFormattings\", */ T:-1 },\n\t/*::[*/0x0471/*::]*/: { /* n:\"BrtBeginPCDCalcMemExt\", */ T:1 },\n\t/*::[*/0x0472/*::]*/: { /* n:\"BrtEndPCDCalcMemExt\", */ T:-1 },\n\t/*::[*/0x0473/*::]*/: { /* n:\"BrtBeginPCDCalcMemsExt\", */ T:1 },\n\t/*::[*/0x0474/*::]*/: { /* n:\"BrtEndPCDCalcMemsExt\", */ T:-1 },\n\t/*::[*/0x0475/*::]*/: { /* n:\"BrtPCDField14\" */ },\n\t/*::[*/0x0476/*::]*/: { /* n:\"BrtBeginSlicerStyles\", */ T:1 },\n\t/*::[*/0x0477/*::]*/: { /* n:\"BrtEndSlicerStyles\", */ T:-1 },\n\t/*::[*/0x0478/*::]*/: { /* n:\"BrtBeginSlicerStyleElements\", */ T:1 },\n\t/*::[*/0x0479/*::]*/: { /* n:\"BrtEndSlicerStyleElements\", */ T:-1 },\n\t/*::[*/0x047A/*::]*/: { /* n:\"BrtCFRuleExt\" */ },\n\t/*::[*/0x047B/*::]*/: { /* n:\"BrtBeginSXCondFmt14\", */ T:1 },\n\t/*::[*/0x047C/*::]*/: { /* n:\"BrtEndSXCondFmt14\", */ T:-1 },\n\t/*::[*/0x047D/*::]*/: { /* n:\"BrtBeginSXCondFmts14\", */ T:1 },\n\t/*::[*/0x047E/*::]*/: { /* n:\"BrtEndSXCondFmts14\", */ T:-1 },\n\t/*::[*/0x0480/*::]*/: { /* n:\"BrtBeginSortCond14\", */ T:1 },\n\t/*::[*/0x0481/*::]*/: { /* n:\"BrtEndSortCond14\", */ T:-1 },\n\t/*::[*/0x0482/*::]*/: { /* n:\"BrtEndDVals14\", */ T:-1 },\n\t/*::[*/0x0483/*::]*/: { /* n:\"BrtEndIconSet14\", */ T:-1 },\n\t/*::[*/0x0484/*::]*/: { /* n:\"BrtEndDatabar14\", */ T:-1 },\n\t/*::[*/0x0485/*::]*/: { /* n:\"BrtBeginColorScale14\", */ T:1 },\n\t/*::[*/0x0486/*::]*/: { /* n:\"BrtEndColorScale14\", */ T:-1 },\n\t/*::[*/0x0487/*::]*/: { /* n:\"BrtBeginSxrules14\", */ T:1 },\n\t/*::[*/0x0488/*::]*/: { /* n:\"BrtEndSxrules14\", */ T:-1 },\n\t/*::[*/0x0489/*::]*/: { /* n:\"BrtBeginPRule14\", */ T:1 },\n\t/*::[*/0x048A/*::]*/: { /* n:\"BrtEndPRule14\", */ T:-1 },\n\t/*::[*/0x048B/*::]*/: { /* n:\"BrtBeginPRFilters14\", */ T:1 },\n\t/*::[*/0x048C/*::]*/: { /* n:\"BrtEndPRFilters14\", */ T:-1 },\n\t/*::[*/0x048D/*::]*/: { /* n:\"BrtBeginPRFilter14\", */ T:1 },\n\t/*::[*/0x048E/*::]*/: { /* n:\"BrtEndPRFilter14\", */ T:-1 },\n\t/*::[*/0x048F/*::]*/: { /* n:\"BrtBeginPRFItem14\", */ T:1 },\n\t/*::[*/0x0490/*::]*/: { /* n:\"BrtEndPRFItem14\", */ T:-1 },\n\t/*::[*/0x0491/*::]*/: { /* n:\"BrtBeginCellIgnoreECs14\", */ T:1 },\n\t/*::[*/0x0492/*::]*/: { /* n:\"BrtEndCellIgnoreECs14\", */ T:-1 },\n\t/*::[*/0x0493/*::]*/: { /* n:\"BrtDxf14\" */ },\n\t/*::[*/0x0494/*::]*/: { /* n:\"BrtBeginDxF14s\", */ T:1 },\n\t/*::[*/0x0495/*::]*/: { /* n:\"BrtEndDxf14s\", */ T:-1 },\n\t/*::[*/0x0499/*::]*/: { /* n:\"BrtFilter14\" */ },\n\t/*::[*/0x049A/*::]*/: { /* n:\"BrtBeginCustomFilters14\", */ T:1 },\n\t/*::[*/0x049C/*::]*/: { /* n:\"BrtCustomFilter14\" */ },\n\t/*::[*/0x049D/*::]*/: { /* n:\"BrtIconFilter14\" */ },\n\t/*::[*/0x049E/*::]*/: { /* n:\"BrtPivotCacheConnectionName\" */ },\n\t/*::[*/0x0800/*::]*/: { /* n:\"BrtBeginDecoupledPivotCacheIDs\", */ T:1 },\n\t/*::[*/0x0801/*::]*/: { /* n:\"BrtEndDecoupledPivotCacheIDs\", */ T:-1 },\n\t/*::[*/0x0802/*::]*/: { /* n:\"BrtDecoupledPivotCacheID\" */ },\n\t/*::[*/0x0803/*::]*/: { /* n:\"BrtBeginPivotTableRefs\", */ T:1 },\n\t/*::[*/0x0804/*::]*/: { /* n:\"BrtEndPivotTableRefs\", */ T:-1 },\n\t/*::[*/0x0805/*::]*/: { /* n:\"BrtPivotTableRef\" */ },\n\t/*::[*/0x0806/*::]*/: { /* n:\"BrtSlicerCacheBookPivotTables\" */ },\n\t/*::[*/0x0807/*::]*/: { /* n:\"BrtBeginSxvcells\", */ T:1 },\n\t/*::[*/0x0808/*::]*/: { /* n:\"BrtEndSxvcells\", */ T:-1 },\n\t/*::[*/0x0809/*::]*/: { /* n:\"BrtBeginSxRow\", */ T:1 },\n\t/*::[*/0x080A/*::]*/: { /* n:\"BrtEndSxRow\", */ T:-1 },\n\t/*::[*/0x080C/*::]*/: { /* n:\"BrtPcdCalcMem15\" */ },\n\t/*::[*/0x0813/*::]*/: { /* n:\"BrtQsi15\" */ },\n\t/*::[*/0x0814/*::]*/: { /* n:\"BrtBeginWebExtensions\", */ T:1 },\n\t/*::[*/0x0815/*::]*/: { /* n:\"BrtEndWebExtensions\", */ T:-1 },\n\t/*::[*/0x0816/*::]*/: { /* n:\"BrtWebExtension\" */ },\n\t/*::[*/0x0817/*::]*/: { /* n:\"BrtAbsPath15\" */ },\n\t/*::[*/0x0818/*::]*/: { /* n:\"BrtBeginPivotTableUISettings\", */ T:1 },\n\t/*::[*/0x0819/*::]*/: { /* n:\"BrtEndPivotTableUISettings\", */ T:-1 },\n\t/*::[*/0x081B/*::]*/: { /* n:\"BrtTableSlicerCacheIDs\" */ },\n\t/*::[*/0x081C/*::]*/: { /* n:\"BrtTableSlicerCacheID\" */ },\n\t/*::[*/0x081D/*::]*/: { /* n:\"BrtBeginTableSlicerCache\", */ T:1 },\n\t/*::[*/0x081E/*::]*/: { /* n:\"BrtEndTableSlicerCache\", */ T:-1 },\n\t/*::[*/0x081F/*::]*/: { /* n:\"BrtSxFilter15\" */ },\n\t/*::[*/0x0820/*::]*/: { /* n:\"BrtBeginTimelineCachePivotCacheIDs\", */ T:1 },\n\t/*::[*/0x0821/*::]*/: { /* n:\"BrtEndTimelineCachePivotCacheIDs\", */ T:-1 },\n\t/*::[*/0x0822/*::]*/: { /* n:\"BrtTimelineCachePivotCacheID\" */ },\n\t/*::[*/0x0823/*::]*/: { /* n:\"BrtBeginTimelineCacheIDs\", */ T:1 },\n\t/*::[*/0x0824/*::]*/: { /* n:\"BrtEndTimelineCacheIDs\", */ T:-1 },\n\t/*::[*/0x0825/*::]*/: { /* n:\"BrtBeginTimelineCacheID\", */ T:1 },\n\t/*::[*/0x0826/*::]*/: { /* n:\"BrtEndTimelineCacheID\", */ T:-1 },\n\t/*::[*/0x0827/*::]*/: { /* n:\"BrtBeginTimelinesEx\", */ T:1 },\n\t/*::[*/0x0828/*::]*/: { /* n:\"BrtEndTimelinesEx\", */ T:-1 },\n\t/*::[*/0x0829/*::]*/: { /* n:\"BrtBeginTimelineEx\", */ T:1 },\n\t/*::[*/0x082A/*::]*/: { /* n:\"BrtEndTimelineEx\", */ T:-1 },\n\t/*::[*/0x082B/*::]*/: { /* n:\"BrtWorkBookPr15\" */ },\n\t/*::[*/0x082C/*::]*/: { /* n:\"BrtPCDH15\" */ },\n\t/*::[*/0x082D/*::]*/: { /* n:\"BrtBeginTimelineStyle\", */ T:1 },\n\t/*::[*/0x082E/*::]*/: { /* n:\"BrtEndTimelineStyle\", */ T:-1 },\n\t/*::[*/0x082F/*::]*/: { /* n:\"BrtTimelineStyleElement\" */ },\n\t/*::[*/0x0830/*::]*/: { /* n:\"BrtBeginTimelineStylesheetExt15\", */ T:1 },\n\t/*::[*/0x0831/*::]*/: { /* n:\"BrtEndTimelineStylesheetExt15\", */ T:-1 },\n\t/*::[*/0x0832/*::]*/: { /* n:\"BrtBeginTimelineStyles\", */ T:1 },\n\t/*::[*/0x0833/*::]*/: { /* n:\"BrtEndTimelineStyles\", */ T:-1 },\n\t/*::[*/0x0834/*::]*/: { /* n:\"BrtBeginTimelineStyleElements\", */ T:1 },\n\t/*::[*/0x0835/*::]*/: { /* n:\"BrtEndTimelineStyleElements\", */ T:-1 },\n\t/*::[*/0x0836/*::]*/: { /* n:\"BrtDxf15\" */ },\n\t/*::[*/0x0837/*::]*/: { /* n:\"BrtBeginDxfs15\", */ T:1 },\n\t/*::[*/0x0838/*::]*/: { /* n:\"BrtEndDxfs15\", */ T:-1 },\n\t/*::[*/0x0839/*::]*/: { /* n:\"BrtSlicerCacheHideItemsWithNoData\" */ },\n\t/*::[*/0x083A/*::]*/: { /* n:\"BrtBeginItemUniqueNames\", */ T:1 },\n\t/*::[*/0x083B/*::]*/: { /* n:\"BrtEndItemUniqueNames\", */ T:-1 },\n\t/*::[*/0x083C/*::]*/: { /* n:\"BrtItemUniqueName\" */ },\n\t/*::[*/0x083D/*::]*/: { /* n:\"BrtBeginExtConn15\", */ T:1 },\n\t/*::[*/0x083E/*::]*/: { /* n:\"BrtEndExtConn15\", */ T:-1 },\n\t/*::[*/0x083F/*::]*/: { /* n:\"BrtBeginOledbPr15\", */ T:1 },\n\t/*::[*/0x0840/*::]*/: { /* n:\"BrtEndOledbPr15\", */ T:-1 },\n\t/*::[*/0x0841/*::]*/: { /* n:\"BrtBeginDataFeedPr15\", */ T:1 },\n\t/*::[*/0x0842/*::]*/: { /* n:\"BrtEndDataFeedPr15\", */ T:-1 },\n\t/*::[*/0x0843/*::]*/: { /* n:\"BrtTextPr15\" */ },\n\t/*::[*/0x0844/*::]*/: { /* n:\"BrtRangePr15\" */ },\n\t/*::[*/0x0845/*::]*/: { /* n:\"BrtDbCommand15\" */ },\n\t/*::[*/0x0846/*::]*/: { /* n:\"BrtBeginDbTables15\", */ T:1 },\n\t/*::[*/0x0847/*::]*/: { /* n:\"BrtEndDbTables15\", */ T:-1 },\n\t/*::[*/0x0848/*::]*/: { /* n:\"BrtDbTable15\" */ },\n\t/*::[*/0x0849/*::]*/: { /* n:\"BrtBeginDataModel\", */ T:1 },\n\t/*::[*/0x084A/*::]*/: { /* n:\"BrtEndDataModel\", */ T:-1 },\n\t/*::[*/0x084B/*::]*/: { /* n:\"BrtBeginModelTables\", */ T:1 },\n\t/*::[*/0x084C/*::]*/: { /* n:\"BrtEndModelTables\", */ T:-1 },\n\t/*::[*/0x084D/*::]*/: { /* n:\"BrtModelTable\" */ },\n\t/*::[*/0x084E/*::]*/: { /* n:\"BrtBeginModelRelationships\", */ T:1 },\n\t/*::[*/0x084F/*::]*/: { /* n:\"BrtEndModelRelationships\", */ T:-1 },\n\t/*::[*/0x0850/*::]*/: { /* n:\"BrtModelRelationship\" */ },\n\t/*::[*/0x0851/*::]*/: { /* n:\"BrtBeginECTxtWiz15\", */ T:1 },\n\t/*::[*/0x0852/*::]*/: { /* n:\"BrtEndECTxtWiz15\", */ T:-1 },\n\t/*::[*/0x0853/*::]*/: { /* n:\"BrtBeginECTWFldInfoLst15\", */ T:1 },\n\t/*::[*/0x0854/*::]*/: { /* n:\"BrtEndECTWFldInfoLst15\", */ T:-1 },\n\t/*::[*/0x0855/*::]*/: { /* n:\"BrtBeginECTWFldInfo15\", */ T:1 },\n\t/*::[*/0x0856/*::]*/: { /* n:\"BrtFieldListActiveItem\" */ },\n\t/*::[*/0x0857/*::]*/: { /* n:\"BrtPivotCacheIdVersion\" */ },\n\t/*::[*/0x0858/*::]*/: { /* n:\"BrtSXDI15\" */ },\n\t/*::[*/0x0859/*::]*/: { /* n:\"BrtBeginModelTimeGroupings\", */ T:1 },\n\t/*::[*/0x085A/*::]*/: { /* n:\"BrtEndModelTimeGroupings\", */ T:-1 },\n\t/*::[*/0x085B/*::]*/: { /* n:\"BrtBeginModelTimeGrouping\", */ T:1 },\n\t/*::[*/0x085C/*::]*/: { /* n:\"BrtEndModelTimeGrouping\", */ T:-1 },\n\t/*::[*/0x085D/*::]*/: { /* n:\"BrtModelTimeGroupingCalcCol\" */ },\n\t/*::[*/0x0C00/*::]*/: { /* n:\"BrtUid\" */ },\n\t/*::[*/0x0C01/*::]*/: { /* n:\"BrtRevisionPtr\" */ },\n\t/*::[*/0x1000/*::]*/: { /* n:\"BrtBeginDynamicArrayPr\", */ T:1 },\n\t/*::[*/0x1001/*::]*/: { /* n:\"BrtEndDynamicArrayPr\", */ T:-1 },\n\t/*::[*/0x138A/*::]*/: { /* n:\"BrtBeginRichValueBlock\", */ T:1 },\n\t/*::[*/0x138B/*::]*/: { /* n:\"BrtEndRichValueBlock\", */ T:-1 },\n\t/*::[*/0x13D9/*::]*/: { /* n:\"BrtBeginRichFilters\", */ T:1 },\n\t/*::[*/0x13DA/*::]*/: { /* n:\"BrtEndRichFilters\", */ T:-1 },\n\t/*::[*/0x13DB/*::]*/: { /* n:\"BrtRichFilter\" */ },\n\t/*::[*/0x13DC/*::]*/: { /* n:\"BrtBeginRichFilterColumn\", */ T:1 },\n\t/*::[*/0x13DD/*::]*/: { /* n:\"BrtEndRichFilterColumn\", */ T:-1 },\n\t/*::[*/0x13DE/*::]*/: { /* n:\"BrtBeginCustomRichFilters\", */ T:1 },\n\t/*::[*/0x13DF/*::]*/: { /* n:\"BrtEndCustomRichFilters\", */ T:-1 },\n\t/*::[*/0x13E0/*::]*/: { /* n:\"BrtCustomRichFilter\" */ },\n\t/*::[*/0x13E1/*::]*/: { /* n:\"BrtTop10RichFilter\" */ },\n\t/*::[*/0x13E2/*::]*/: { /* n:\"BrtDynamicRichFilter\" */ },\n\t/*::[*/0x13E4/*::]*/: { /* n:\"BrtBeginRichSortCondition\", */ T:1 },\n\t/*::[*/0x13E5/*::]*/: { /* n:\"BrtEndRichSortCondition\", */ T:-1 },\n\t/*::[*/0x13E6/*::]*/: { /* n:\"BrtRichFilterDateGroupItem\" */ },\n\t/*::[*/0x13E7/*::]*/: { /* n:\"BrtBeginCalcFeatures\", */ T:1 },\n\t/*::[*/0x13E8/*::]*/: { /* n:\"BrtEndCalcFeatures\", */ T:-1 },\n\t/*::[*/0x13E9/*::]*/: { /* n:\"BrtCalcFeature\" */ },\n\t/*::[*/0x13EB/*::]*/: { /* n:\"BrtExternalLinksPr\" */ },\n\t/*::[*/0xFFFF/*::]*/: { n:\"\" }\n};\n\n/* [MS-XLS] 2.3 Record Enumeration (and other sources) */\nvar XLSRecordEnum = {\n\t/* [MS-XLS] 2.3 Record Enumeration 2021-08-17 */\n\t/*::[*/0x0006/*::]*/: { /* n:\"Formula\", */ f:parse_Formula },\n\t/*::[*/0x000a/*::]*/: { /* n:\"EOF\", */ f:parsenoop2 },\n\t/*::[*/0x000c/*::]*/: { /* n:\"CalcCount\", */ f:parseuint16 }, //\n\t/*::[*/0x000d/*::]*/: { /* n:\"CalcMode\", */ f:parseuint16 }, //\n\t/*::[*/0x000e/*::]*/: { /* n:\"CalcPrecision\", */ f:parsebool }, //\n\t/*::[*/0x000f/*::]*/: { /* n:\"CalcRefMode\", */ f:parsebool }, //\n\t/*::[*/0x0010/*::]*/: { /* n:\"CalcDelta\", */ f:parse_Xnum }, //\n\t/*::[*/0x0011/*::]*/: { /* n:\"CalcIter\", */ f:parsebool }, //\n\t/*::[*/0x0012/*::]*/: { /* n:\"Protect\", */ f:parsebool },\n\t/*::[*/0x0013/*::]*/: { /* n:\"Password\", */ f:parseuint16 },\n\t/*::[*/0x0014/*::]*/: { /* n:\"Header\", */ f:parse_XLHeaderFooter },\n\t/*::[*/0x0015/*::]*/: { /* n:\"Footer\", */ f:parse_XLHeaderFooter },\n\t/*::[*/0x0017/*::]*/: { /* n:\"ExternSheet\", */ f:parse_ExternSheet },\n\t/*::[*/0x0018/*::]*/: { /* n:\"Lbl\", */ f:parse_Lbl },\n\t/*::[*/0x0019/*::]*/: { /* n:\"WinProtect\", */ f:parsebool },\n\t/*::[*/0x001a/*::]*/: { /* n:\"VerticalPageBreaks\", */ },\n\t/*::[*/0x001b/*::]*/: { /* n:\"HorizontalPageBreaks\", */ },\n\t/*::[*/0x001c/*::]*/: { /* n:\"Note\", */ f:parse_Note },\n\t/*::[*/0x001d/*::]*/: { /* n:\"Selection\", */ },\n\t/*::[*/0x0022/*::]*/: { /* n:\"Date1904\", */ f:parsebool },\n\t/*::[*/0x0023/*::]*/: { /* n:\"ExternName\", */ f:parse_ExternName },\n\t/*::[*/0x0026/*::]*/: { /* n:\"LeftMargin\", */ f:parse_Xnum }, // *\n\t/*::[*/0x0027/*::]*/: { /* n:\"RightMargin\", */ f:parse_Xnum }, // *\n\t/*::[*/0x0028/*::]*/: { /* n:\"TopMargin\", */ f:parse_Xnum }, // *\n\t/*::[*/0x0029/*::]*/: { /* n:\"BottomMargin\", */ f:parse_Xnum }, // *\n\t/*::[*/0x002a/*::]*/: { /* n:\"PrintRowCol\", */ f:parsebool },\n\t/*::[*/0x002b/*::]*/: { /* n:\"PrintGrid\", */ f:parsebool },\n\t/*::[*/0x002f/*::]*/: { /* n:\"FilePass\", */ f:parse_FilePass },\n\t/*::[*/0x0031/*::]*/: { /* n:\"Font\", */ f:parse_Font },\n\t/*::[*/0x0033/*::]*/: { /* n:\"PrintSize\", */ f:parseuint16 },\n\t/*::[*/0x003c/*::]*/: { /* n:\"Continue\", */ },\n\t/*::[*/0x003d/*::]*/: { /* n:\"Window1\", */ f:parse_Window1 },\n\t/*::[*/0x0040/*::]*/: { /* n:\"Backup\", */ f:parsebool },\n\t/*::[*/0x0041/*::]*/: { /* n:\"Pane\", */ f:parse_Pane },\n\t/*::[*/0x0042/*::]*/: { /* n:\"CodePage\", */ f:parseuint16 },\n\t/*::[*/0x004d/*::]*/: { /* n:\"Pls\", */ },\n\t/*::[*/0x0050/*::]*/: { /* n:\"DCon\", */ },\n\t/*::[*/0x0051/*::]*/: { /* n:\"DConRef\", */ },\n\t/*::[*/0x0052/*::]*/: { /* n:\"DConName\", */ },\n\t/*::[*/0x0055/*::]*/: { /* n:\"DefColWidth\", */ f:parseuint16 },\n\t/*::[*/0x0059/*::]*/: { /* n:\"XCT\", */ },\n\t/*::[*/0x005a/*::]*/: { /* n:\"CRN\", */ },\n\t/*::[*/0x005b/*::]*/: { /* n:\"FileSharing\", */ },\n\t/*::[*/0x005c/*::]*/: { /* n:\"WriteAccess\", */ f:parse_WriteAccess },\n\t/*::[*/0x005d/*::]*/: { /* n:\"Obj\", */ f:parse_Obj },\n\t/*::[*/0x005e/*::]*/: { /* n:\"Uncalced\", */ },\n\t/*::[*/0x005f/*::]*/: { /* n:\"CalcSaveRecalc\", */ f:parsebool }, //\n\t/*::[*/0x0060/*::]*/: { /* n:\"Template\", */ },\n\t/*::[*/0x0061/*::]*/: { /* n:\"Intl\", */ },\n\t/*::[*/0x0063/*::]*/: { /* n:\"ObjProtect\", */ f:parsebool },\n\t/*::[*/0x007d/*::]*/: { /* n:\"ColInfo\", */ f:parse_ColInfo },\n\t/*::[*/0x0080/*::]*/: { /* n:\"Guts\", */ f:parse_Guts },\n\t/*::[*/0x0081/*::]*/: { /* n:\"WsBool\", */ f:parse_WsBool },\n\t/*::[*/0x0082/*::]*/: { /* n:\"GridSet\", */ f:parseuint16 },\n\t/*::[*/0x0083/*::]*/: { /* n:\"HCenter\", */ f:parsebool },\n\t/*::[*/0x0084/*::]*/: { /* n:\"VCenter\", */ f:parsebool },\n\t/*::[*/0x0085/*::]*/: { /* n:\"BoundSheet8\", */ f:parse_BoundSheet8 },\n\t/*::[*/0x0086/*::]*/: { /* n:\"WriteProtect\", */ },\n\t/*::[*/0x008c/*::]*/: { /* n:\"Country\", */ f:parse_Country },\n\t/*::[*/0x008d/*::]*/: { /* n:\"HideObj\", */ f:parseuint16 },\n\t/*::[*/0x0090/*::]*/: { /* n:\"Sort\", */ },\n\t/*::[*/0x0092/*::]*/: { /* n:\"Palette\", */ f:parse_Palette },\n\t/*::[*/0x0097/*::]*/: { /* n:\"Sync\", */ },\n\t/*::[*/0x0098/*::]*/: { /* n:\"LPr\", */ },\n\t/*::[*/0x0099/*::]*/: { /* n:\"DxGCol\", */ },\n\t/*::[*/0x009a/*::]*/: { /* n:\"FnGroupName\", */ },\n\t/*::[*/0x009b/*::]*/: { /* n:\"FilterMode\", */ },\n\t/*::[*/0x009c/*::]*/: { /* n:\"BuiltInFnGroupCount\", */ f:parseuint16 },\n\t/*::[*/0x009d/*::]*/: { /* n:\"AutoFilterInfo\", */ },\n\t/*::[*/0x009e/*::]*/: { /* n:\"AutoFilter\", */ },\n\t/*::[*/0x00a0/*::]*/: { /* n:\"Scl\", */ f:parse_Scl },\n\t/*::[*/0x00a1/*::]*/: { /* n:\"Setup\", */ f:parse_Setup },\n\t/*::[*/0x00ae/*::]*/: { /* n:\"ScenMan\", */ },\n\t/*::[*/0x00af/*::]*/: { /* n:\"SCENARIO\", */ },\n\t/*::[*/0x00b0/*::]*/: { /* n:\"SxView\", */ },\n\t/*::[*/0x00b1/*::]*/: { /* n:\"Sxvd\", */ },\n\t/*::[*/0x00b2/*::]*/: { /* n:\"SXVI\", */ },\n\t/*::[*/0x00b4/*::]*/: { /* n:\"SxIvd\", */ },\n\t/*::[*/0x00b5/*::]*/: { /* n:\"SXLI\", */ },\n\t/*::[*/0x00b6/*::]*/: { /* n:\"SXPI\", */ },\n\t/*::[*/0x00b8/*::]*/: { /* n:\"DocRoute\", */ },\n\t/*::[*/0x00b9/*::]*/: { /* n:\"RecipName\", */ },\n\t/*::[*/0x00bd/*::]*/: { /* n:\"MulRk\", */ f:parse_MulRk },\n\t/*::[*/0x00be/*::]*/: { /* n:\"MulBlank\", */ f:parse_MulBlank },\n\t/*::[*/0x00c1/*::]*/: { /* n:\"Mms\", */ f:parsenoop2 },\n\t/*::[*/0x00c5/*::]*/: { /* n:\"SXDI\", */ },\n\t/*::[*/0x00c6/*::]*/: { /* n:\"SXDB\", */ },\n\t/*::[*/0x00c7/*::]*/: { /* n:\"SXFDB\", */ },\n\t/*::[*/0x00c8/*::]*/: { /* n:\"SXDBB\", */ },\n\t/*::[*/0x00c9/*::]*/: { /* n:\"SXNum\", */ },\n\t/*::[*/0x00ca/*::]*/: { /* n:\"SxBool\", */ f:parsebool },\n\t/*::[*/0x00cb/*::]*/: { /* n:\"SxErr\", */ },\n\t/*::[*/0x00cc/*::]*/: { /* n:\"SXInt\", */ },\n\t/*::[*/0x00cd/*::]*/: { /* n:\"SXString\", */ },\n\t/*::[*/0x00ce/*::]*/: { /* n:\"SXDtr\", */ },\n\t/*::[*/0x00cf/*::]*/: { /* n:\"SxNil\", */ },\n\t/*::[*/0x00d0/*::]*/: { /* n:\"SXTbl\", */ },\n\t/*::[*/0x00d1/*::]*/: { /* n:\"SXTBRGIITM\", */ },\n\t/*::[*/0x00d2/*::]*/: { /* n:\"SxTbpg\", */ },\n\t/*::[*/0x00d3/*::]*/: { /* n:\"ObProj\", */ },\n\t/*::[*/0x00d5/*::]*/: { /* n:\"SXStreamID\", */ },\n\t/*::[*/0x00d7/*::]*/: { /* n:\"DBCell\", */ },\n\t/*::[*/0x00d8/*::]*/: { /* n:\"SXRng\", */ },\n\t/*::[*/0x00d9/*::]*/: { /* n:\"SxIsxoper\", */ },\n\t/*::[*/0x00da/*::]*/: { /* n:\"BookBool\", */ f:parseuint16 },\n\t/*::[*/0x00dc/*::]*/: { /* n:\"DbOrParamQry\", */ },\n\t/*::[*/0x00dd/*::]*/: { /* n:\"ScenarioProtect\", */ f:parsebool },\n\t/*::[*/0x00de/*::]*/: { /* n:\"OleObjectSize\", */ },\n\t/*::[*/0x00e0/*::]*/: { /* n:\"XF\", */ f:parse_XF },\n\t/*::[*/0x00e1/*::]*/: { /* n:\"InterfaceHdr\", */ f:parse_InterfaceHdr },\n\t/*::[*/0x00e2/*::]*/: { /* n:\"InterfaceEnd\", */ f:parsenoop2 },\n\t/*::[*/0x00e3/*::]*/: { /* n:\"SXVS\", */ },\n\t/*::[*/0x00e5/*::]*/: { /* n:\"MergeCells\", */ f:parse_MergeCells },\n\t/*::[*/0x00e9/*::]*/: { /* n:\"BkHim\", */ },\n\t/*::[*/0x00eb/*::]*/: { /* n:\"MsoDrawingGroup\", */ },\n\t/*::[*/0x00ec/*::]*/: { /* n:\"MsoDrawing\", */ },\n\t/*::[*/0x00ed/*::]*/: { /* n:\"MsoDrawingSelection\", */ },\n\t/*::[*/0x00ef/*::]*/: { /* n:\"PhoneticInfo\", */ },\n\t/*::[*/0x00f0/*::]*/: { /* n:\"SxRule\", */ },\n\t/*::[*/0x00f1/*::]*/: { /* n:\"SXEx\", */ },\n\t/*::[*/0x00f2/*::]*/: { /* n:\"SxFilt\", */ },\n\t/*::[*/0x00f4/*::]*/: { /* n:\"SxDXF\", */ },\n\t/*::[*/0x00f5/*::]*/: { /* n:\"SxItm\", */ },\n\t/*::[*/0x00f6/*::]*/: { /* n:\"SxName\", */ },\n\t/*::[*/0x00f7/*::]*/: { /* n:\"SxSelect\", */ },\n\t/*::[*/0x00f8/*::]*/: { /* n:\"SXPair\", */ },\n\t/*::[*/0x00f9/*::]*/: { /* n:\"SxFmla\", */ },\n\t/*::[*/0x00fb/*::]*/: { /* n:\"SxFormat\", */ },\n\t/*::[*/0x00fc/*::]*/: { /* n:\"SST\", */ f:parse_SST },\n\t/*::[*/0x00fd/*::]*/: { /* n:\"LabelSst\", */ f:parse_LabelSst },\n\t/*::[*/0x00ff/*::]*/: { /* n:\"ExtSST\", */ f:parse_ExtSST },\n\t/*::[*/0x0100/*::]*/: { /* n:\"SXVDEx\", */ },\n\t/*::[*/0x0103/*::]*/: { /* n:\"SXFormula\", */ },\n\t/*::[*/0x0122/*::]*/: { /* n:\"SXDBEx\", */ },\n\t/*::[*/0x0137/*::]*/: { /* n:\"RRDInsDel\", */ },\n\t/*::[*/0x0138/*::]*/: { /* n:\"RRDHead\", */ },\n\t/*::[*/0x013b/*::]*/: { /* n:\"RRDChgCell\", */ },\n\t/*::[*/0x013d/*::]*/: { /* n:\"RRTabId\", */ f:parseuint16a },\n\t/*::[*/0x013e/*::]*/: { /* n:\"RRDRenSheet\", */ },\n\t/*::[*/0x013f/*::]*/: { /* n:\"RRSort\", */ },\n\t/*::[*/0x0140/*::]*/: { /* n:\"RRDMove\", */ },\n\t/*::[*/0x014a/*::]*/: { /* n:\"RRFormat\", */ },\n\t/*::[*/0x014b/*::]*/: { /* n:\"RRAutoFmt\", */ },\n\t/*::[*/0x014d/*::]*/: { /* n:\"RRInsertSh\", */ },\n\t/*::[*/0x014e/*::]*/: { /* n:\"RRDMoveBegin\", */ },\n\t/*::[*/0x014f/*::]*/: { /* n:\"RRDMoveEnd\", */ },\n\t/*::[*/0x0150/*::]*/: { /* n:\"RRDInsDelBegin\", */ },\n\t/*::[*/0x0151/*::]*/: { /* n:\"RRDInsDelEnd\", */ },\n\t/*::[*/0x0152/*::]*/: { /* n:\"RRDConflict\", */ },\n\t/*::[*/0x0153/*::]*/: { /* n:\"RRDDefName\", */ },\n\t/*::[*/0x0154/*::]*/: { /* n:\"RRDRstEtxp\", */ },\n\t/*::[*/0x015f/*::]*/: { /* n:\"LRng\", */ },\n\t/*::[*/0x0160/*::]*/: { /* n:\"UsesELFs\", */ f:parsebool },\n\t/*::[*/0x0161/*::]*/: { /* n:\"DSF\", */ f:parsenoop2 },\n\t/*::[*/0x0191/*::]*/: { /* n:\"CUsr\", */ },\n\t/*::[*/0x0192/*::]*/: { /* n:\"CbUsr\", */ },\n\t/*::[*/0x0193/*::]*/: { /* n:\"UsrInfo\", */ },\n\t/*::[*/0x0194/*::]*/: { /* n:\"UsrExcl\", */ },\n\t/*::[*/0x0195/*::]*/: { /* n:\"FileLock\", */ },\n\t/*::[*/0x0196/*::]*/: { /* n:\"RRDInfo\", */ },\n\t/*::[*/0x0197/*::]*/: { /* n:\"BCUsrs\", */ },\n\t/*::[*/0x0198/*::]*/: { /* n:\"UsrChk\", */ },\n\t/*::[*/0x01a9/*::]*/: { /* n:\"UserBView\", */ },\n\t/*::[*/0x01aa/*::]*/: { /* n:\"UserSViewBegin\", */ },\n\t/*::[*/0x01ab/*::]*/: { /* n:\"UserSViewEnd\", */ },\n\t/*::[*/0x01ac/*::]*/: { /* n:\"RRDUserView\", */ },\n\t/*::[*/0x01ad/*::]*/: { /* n:\"Qsi\", */ },\n\t/*::[*/0x01ae/*::]*/: { /* n:\"SupBook\", */ f:parse_SupBook },\n\t/*::[*/0x01af/*::]*/: { /* n:\"Prot4Rev\", */ f:parsebool },\n\t/*::[*/0x01b0/*::]*/: { /* n:\"CondFmt\", */ },\n\t/*::[*/0x01b1/*::]*/: { /* n:\"CF\", */ },\n\t/*::[*/0x01b2/*::]*/: { /* n:\"DVal\", */ },\n\t/*::[*/0x01b5/*::]*/: { /* n:\"DConBin\", */ },\n\t/*::[*/0x01b6/*::]*/: { /* n:\"TxO\", */ f:parse_TxO },\n\t/*::[*/0x01b7/*::]*/: { /* n:\"RefreshAll\", */ f:parsebool }, //\n\t/*::[*/0x01b8/*::]*/: { /* n:\"HLink\", */ f:parse_HLink },\n\t/*::[*/0x01b9/*::]*/: { /* n:\"Lel\", */ },\n\t/*::[*/0x01ba/*::]*/: { /* n:\"CodeName\", */ f:parse_XLUnicodeString },\n\t/*::[*/0x01bb/*::]*/: { /* n:\"SXFDBType\", */ },\n\t/*::[*/0x01bc/*::]*/: { /* n:\"Prot4RevPass\", */ f:parseuint16 },\n\t/*::[*/0x01bd/*::]*/: { /* n:\"ObNoMacros\", */ },\n\t/*::[*/0x01be/*::]*/: { /* n:\"Dv\", */ },\n\t/*::[*/0x01c0/*::]*/: { /* n:\"Excel9File\", */ f:parsenoop2 },\n\t/*::[*/0x01c1/*::]*/: { /* n:\"RecalcId\", */ f:parse_RecalcId, r:2},\n\t/*::[*/0x01c2/*::]*/: { /* n:\"EntExU2\", */ f:parsenoop2 },\n\t/*::[*/0x0200/*::]*/: { /* n:\"Dimensions\", */ f:parse_Dimensions },\n\t/*::[*/0x0201/*::]*/: { /* n:\"Blank\", */ f:parse_Blank },\n\t/*::[*/0x0203/*::]*/: { /* n:\"Number\", */ f:parse_Number },\n\t/*::[*/0x0204/*::]*/: { /* n:\"Label\", */ f:parse_Label },\n\t/*::[*/0x0205/*::]*/: { /* n:\"BoolErr\", */ f:parse_BoolErr },\n\t/*::[*/0x0207/*::]*/: { /* n:\"String\", */ f:parse_String },\n\t/*::[*/0x0208/*::]*/: { /* n:\"Row\", */ f:parse_Row },\n\t/*::[*/0x020b/*::]*/: { /* n:\"Index\", */ },\n\t/*::[*/0x0221/*::]*/: { /* n:\"Array\", */ f:parse_Array },\n\t/*::[*/0x0225/*::]*/: { /* n:\"DefaultRowHeight\", */ f:parse_DefaultRowHeight },\n\t/*::[*/0x0236/*::]*/: { /* n:\"Table\", */ },\n\t/*::[*/0x023e/*::]*/: { /* n:\"Window2\", */ f:parse_Window2 },\n\t/*::[*/0x027e/*::]*/: { /* n:\"RK\", */ f:parse_RK },\n\t/*::[*/0x0293/*::]*/: { /* n:\"Style\", */ },\n\t/*::[*/0x0418/*::]*/: { /* n:\"BigName\", */ },\n\t/*::[*/0x041e/*::]*/: { /* n:\"Format\", */ f:parse_Format },\n\t/*::[*/0x043c/*::]*/: { /* n:\"ContinueBigName\", */ },\n\t/*::[*/0x04bc/*::]*/: { /* n:\"ShrFmla\", */ f:parse_ShrFmla },\n\t/*::[*/0x0800/*::]*/: { /* n:\"HLinkTooltip\", */ f:parse_HLinkTooltip },\n\t/*::[*/0x0801/*::]*/: { /* n:\"WebPub\", */ },\n\t/*::[*/0x0802/*::]*/: { /* n:\"QsiSXTag\", */ },\n\t/*::[*/0x0803/*::]*/: { /* n:\"DBQueryExt\", */ },\n\t/*::[*/0x0804/*::]*/: { /* n:\"ExtString\", */ },\n\t/*::[*/0x0805/*::]*/: { /* n:\"TxtQry\", */ },\n\t/*::[*/0x0806/*::]*/: { /* n:\"Qsir\", */ },\n\t/*::[*/0x0807/*::]*/: { /* n:\"Qsif\", */ },\n\t/*::[*/0x0808/*::]*/: { /* n:\"RRDTQSIF\", */ },\n\t/*::[*/0x0809/*::]*/: { /* n:\"BOF\", */ f:parse_BOF },\n\t/*::[*/0x080a/*::]*/: { /* n:\"OleDbConn\", */ },\n\t/*::[*/0x080b/*::]*/: { /* n:\"WOpt\", */ },\n\t/*::[*/0x080c/*::]*/: { /* n:\"SXViewEx\", */ },\n\t/*::[*/0x080d/*::]*/: { /* n:\"SXTH\", */ },\n\t/*::[*/0x080e/*::]*/: { /* n:\"SXPIEx\", */ },\n\t/*::[*/0x080f/*::]*/: { /* n:\"SXVDTEx\", */ },\n\t/*::[*/0x0810/*::]*/: { /* n:\"SXViewEx9\", */ },\n\t/*::[*/0x0812/*::]*/: { /* n:\"ContinueFrt\", */ },\n\t/*::[*/0x0813/*::]*/: { /* n:\"RealTimeData\", */ },\n\t/*::[*/0x0850/*::]*/: { /* n:\"ChartFrtInfo\", */ },\n\t/*::[*/0x0851/*::]*/: { /* n:\"FrtWrapper\", */ },\n\t/*::[*/0x0852/*::]*/: { /* n:\"StartBlock\", */ },\n\t/*::[*/0x0853/*::]*/: { /* n:\"EndBlock\", */ },\n\t/*::[*/0x0854/*::]*/: { /* n:\"StartObject\", */ },\n\t/*::[*/0x0855/*::]*/: { /* n:\"EndObject\", */ },\n\t/*::[*/0x0856/*::]*/: { /* n:\"CatLab\", */ },\n\t/*::[*/0x0857/*::]*/: { /* n:\"YMult\", */ },\n\t/*::[*/0x0858/*::]*/: { /* n:\"SXViewLink\", */ },\n\t/*::[*/0x0859/*::]*/: { /* n:\"PivotChartBits\", */ },\n\t/*::[*/0x085a/*::]*/: { /* n:\"FrtFontList\", */ },\n\t/*::[*/0x0862/*::]*/: { /* n:\"SheetExt\", */ },\n\t/*::[*/0x0863/*::]*/: { /* n:\"BookExt\", */ r:12},\n\t/*::[*/0x0864/*::]*/: { /* n:\"SXAddl\", */ },\n\t/*::[*/0x0865/*::]*/: { /* n:\"CrErr\", */ },\n\t/*::[*/0x0866/*::]*/: { /* n:\"HFPicture\", */ },\n\t/*::[*/0x0867/*::]*/: { /* n:\"FeatHdr\", */ f:parsenoop2 },\n\t/*::[*/0x0868/*::]*/: { /* n:\"Feat\", */ },\n\t/*::[*/0x086a/*::]*/: { /* n:\"DataLabExt\", */ },\n\t/*::[*/0x086b/*::]*/: { /* n:\"DataLabExtContents\", */ },\n\t/*::[*/0x086c/*::]*/: { /* n:\"CellWatch\", */ },\n\t/*::[*/0x0871/*::]*/: { /* n:\"FeatHdr11\", */ },\n\t/*::[*/0x0872/*::]*/: { /* n:\"Feature11\", */ },\n\t/*::[*/0x0874/*::]*/: { /* n:\"DropDownObjIds\", */ },\n\t/*::[*/0x0875/*::]*/: { /* n:\"ContinueFrt11\", */ },\n\t/*::[*/0x0876/*::]*/: { /* n:\"DConn\", */ },\n\t/*::[*/0x0877/*::]*/: { /* n:\"List12\", */ },\n\t/*::[*/0x0878/*::]*/: { /* n:\"Feature12\", */ },\n\t/*::[*/0x0879/*::]*/: { /* n:\"CondFmt12\", */ },\n\t/*::[*/0x087a/*::]*/: { /* n:\"CF12\", */ },\n\t/*::[*/0x087b/*::]*/: { /* n:\"CFEx\", */ },\n\t/*::[*/0x087c/*::]*/: { /* n:\"XFCRC\", */ f:parse_XFCRC, r:12 },\n\t/*::[*/0x087d/*::]*/: { /* n:\"XFExt\", */ f:parse_XFExt, r:12 },\n\t/*::[*/0x087e/*::]*/: { /* n:\"AutoFilter12\", */ },\n\t/*::[*/0x087f/*::]*/: { /* n:\"ContinueFrt12\", */ },\n\t/*::[*/0x0884/*::]*/: { /* n:\"MDTInfo\", */ },\n\t/*::[*/0x0885/*::]*/: { /* n:\"MDXStr\", */ },\n\t/*::[*/0x0886/*::]*/: { /* n:\"MDXTuple\", */ },\n\t/*::[*/0x0887/*::]*/: { /* n:\"MDXSet\", */ },\n\t/*::[*/0x0888/*::]*/: { /* n:\"MDXProp\", */ },\n\t/*::[*/0x0889/*::]*/: { /* n:\"MDXKPI\", */ },\n\t/*::[*/0x088a/*::]*/: { /* n:\"MDB\", */ },\n\t/*::[*/0x088b/*::]*/: { /* n:\"PLV\", */ },\n\t/*::[*/0x088c/*::]*/: { /* n:\"Compat12\", */ f:parsebool, r:12 },\n\t/*::[*/0x088d/*::]*/: { /* n:\"DXF\", */ },\n\t/*::[*/0x088e/*::]*/: { /* n:\"TableStyles\", */ r:12 },\n\t/*::[*/0x088f/*::]*/: { /* n:\"TableStyle\", */ },\n\t/*::[*/0x0890/*::]*/: { /* n:\"TableStyleElement\", */ },\n\t/*::[*/0x0892/*::]*/: { /* n:\"StyleExt\", */ },\n\t/*::[*/0x0893/*::]*/: { /* n:\"NamePublish\", */ },\n\t/*::[*/0x0894/*::]*/: { /* n:\"NameCmt\", */ f:parse_NameCmt, r:12 },\n\t/*::[*/0x0895/*::]*/: { /* n:\"SortData\", */ },\n\t/*::[*/0x0896/*::]*/: { /* n:\"Theme\", */ f:parse_Theme, r:12 },\n\t/*::[*/0x0897/*::]*/: { /* n:\"GUIDTypeLib\", */ },\n\t/*::[*/0x0898/*::]*/: { /* n:\"FnGrp12\", */ },\n\t/*::[*/0x0899/*::]*/: { /* n:\"NameFnGrp12\", */ },\n\t/*::[*/0x089a/*::]*/: { /* n:\"MTRSettings\", */ f:parse_MTRSettings, r:12 },\n\t/*::[*/0x089b/*::]*/: { /* n:\"CompressPictures\", */ f:parsenoop2 },\n\t/*::[*/0x089c/*::]*/: { /* n:\"HeaderFooter\", */ },\n\t/*::[*/0x089d/*::]*/: { /* n:\"CrtLayout12\", */ },\n\t/*::[*/0x089e/*::]*/: { /* n:\"CrtMlFrt\", */ },\n\t/*::[*/0x089f/*::]*/: { /* n:\"CrtMlFrtContinue\", */ },\n\t/*::[*/0x08a3/*::]*/: { /* n:\"ForceFullCalculation\", */ f:parse_ForceFullCalculation },\n\t/*::[*/0x08a4/*::]*/: { /* n:\"ShapePropsStream\", */ },\n\t/*::[*/0x08a5/*::]*/: { /* n:\"TextPropsStream\", */ },\n\t/*::[*/0x08a6/*::]*/: { /* n:\"RichTextStream\", */ },\n\t/*::[*/0x08a7/*::]*/: { /* n:\"CrtLayout12A\", */ },\n\t/*::[*/0x1001/*::]*/: { /* n:\"Units\", */ },\n\t/*::[*/0x1002/*::]*/: { /* n:\"Chart\", */ },\n\t/*::[*/0x1003/*::]*/: { /* n:\"Series\", */ },\n\t/*::[*/0x1006/*::]*/: { /* n:\"DataFormat\", */ },\n\t/*::[*/0x1007/*::]*/: { /* n:\"LineFormat\", */ },\n\t/*::[*/0x1009/*::]*/: { /* n:\"MarkerFormat\", */ },\n\t/*::[*/0x100a/*::]*/: { /* n:\"AreaFormat\", */ },\n\t/*::[*/0x100b/*::]*/: { /* n:\"PieFormat\", */ },\n\t/*::[*/0x100c/*::]*/: { /* n:\"AttachedLabel\", */ },\n\t/*::[*/0x100d/*::]*/: { /* n:\"SeriesText\", */ },\n\t/*::[*/0x1014/*::]*/: { /* n:\"ChartFormat\", */ },\n\t/*::[*/0x1015/*::]*/: { /* n:\"Legend\", */ },\n\t/*::[*/0x1016/*::]*/: { /* n:\"SeriesList\", */ },\n\t/*::[*/0x1017/*::]*/: { /* n:\"Bar\", */ },\n\t/*::[*/0x1018/*::]*/: { /* n:\"Line\", */ },\n\t/*::[*/0x1019/*::]*/: { /* n:\"Pie\", */ },\n\t/*::[*/0x101a/*::]*/: { /* n:\"Area\", */ },\n\t/*::[*/0x101b/*::]*/: { /* n:\"Scatter\", */ },\n\t/*::[*/0x101c/*::]*/: { /* n:\"CrtLine\", */ },\n\t/*::[*/0x101d/*::]*/: { /* n:\"Axis\", */ },\n\t/*::[*/0x101e/*::]*/: { /* n:\"Tick\", */ },\n\t/*::[*/0x101f/*::]*/: { /* n:\"ValueRange\", */ },\n\t/*::[*/0x1020/*::]*/: { /* n:\"CatSerRange\", */ },\n\t/*::[*/0x1021/*::]*/: { /* n:\"AxisLine\", */ },\n\t/*::[*/0x1022/*::]*/: { /* n:\"CrtLink\", */ },\n\t/*::[*/0x1024/*::]*/: { /* n:\"DefaultText\", */ },\n\t/*::[*/0x1025/*::]*/: { /* n:\"Text\", */ },\n\t/*::[*/0x1026/*::]*/: { /* n:\"FontX\", */ f:parseuint16 },\n\t/*::[*/0x1027/*::]*/: { /* n:\"ObjectLink\", */ },\n\t/*::[*/0x1032/*::]*/: { /* n:\"Frame\", */ },\n\t/*::[*/0x1033/*::]*/: { /* n:\"Begin\", */ },\n\t/*::[*/0x1034/*::]*/: { /* n:\"End\", */ },\n\t/*::[*/0x1035/*::]*/: { /* n:\"PlotArea\", */ },\n\t/*::[*/0x103a/*::]*/: { /* n:\"Chart3d\", */ },\n\t/*::[*/0x103c/*::]*/: { /* n:\"PicF\", */ },\n\t/*::[*/0x103d/*::]*/: { /* n:\"DropBar\", */ },\n\t/*::[*/0x103e/*::]*/: { /* n:\"Radar\", */ },\n\t/*::[*/0x103f/*::]*/: { /* n:\"Surf\", */ },\n\t/*::[*/0x1040/*::]*/: { /* n:\"RadarArea\", */ },\n\t/*::[*/0x1041/*::]*/: { /* n:\"AxisParent\", */ },\n\t/*::[*/0x1043/*::]*/: { /* n:\"LegendException\", */ },\n\t/*::[*/0x1044/*::]*/: { /* n:\"ShtProps\", */ f:parse_ShtProps },\n\t/*::[*/0x1045/*::]*/: { /* n:\"SerToCrt\", */ },\n\t/*::[*/0x1046/*::]*/: { /* n:\"AxesUsed\", */ },\n\t/*::[*/0x1048/*::]*/: { /* n:\"SBaseRef\", */ },\n\t/*::[*/0x104a/*::]*/: { /* n:\"SerParent\", */ },\n\t/*::[*/0x104b/*::]*/: { /* n:\"SerAuxTrend\", */ },\n\t/*::[*/0x104e/*::]*/: { /* n:\"IFmtRecord\", */ },\n\t/*::[*/0x104f/*::]*/: { /* n:\"Pos\", */ },\n\t/*::[*/0x1050/*::]*/: { /* n:\"AlRuns\", */ },\n\t/*::[*/0x1051/*::]*/: { /* n:\"BRAI\", */ },\n\t/*::[*/0x105b/*::]*/: { /* n:\"SerAuxErrBar\", */ },\n\t/*::[*/0x105c/*::]*/: { /* n:\"ClrtClient\", */ f:parse_ClrtClient },\n\t/*::[*/0x105d/*::]*/: { /* n:\"SerFmt\", */ },\n\t/*::[*/0x105f/*::]*/: { /* n:\"Chart3DBarShape\", */ },\n\t/*::[*/0x1060/*::]*/: { /* n:\"Fbi\", */ },\n\t/*::[*/0x1061/*::]*/: { /* n:\"BopPop\", */ },\n\t/*::[*/0x1062/*::]*/: { /* n:\"AxcExt\", */ },\n\t/*::[*/0x1063/*::]*/: { /* n:\"Dat\", */ },\n\t/*::[*/0x1064/*::]*/: { /* n:\"PlotGrowth\", */ },\n\t/*::[*/0x1065/*::]*/: { /* n:\"SIIndex\", */ },\n\t/*::[*/0x1066/*::]*/: { /* n:\"GelFrame\", */ },\n\t/*::[*/0x1067/*::]*/: { /* n:\"BopPopCustom\", */ },\n\t/*::[*/0x1068/*::]*/: { /* n:\"Fbi2\", */ },\n\n\t/*::[*/0x0000/*::]*/: { /* n:\"Dimensions\", */ f:parse_Dimensions },\n\t/*::[*/0x0001/*::]*/: { /* n:\"BIFF2BLANK\", */ },\n\t/*::[*/0x0002/*::]*/: { /* n:\"BIFF2INT\", */ f:parse_BIFF2INT },\n\t/*::[*/0x0003/*::]*/: { /* n:\"BIFF2NUM\", */ f:parse_BIFF2NUM },\n\t/*::[*/0x0004/*::]*/: { /* n:\"BIFF2STR\", */ f:parse_BIFF2STR },\n\t/*::[*/0x0005/*::]*/: { /* n:\"BoolErr\", */ f:parse_BoolErr },\n\t/*::[*/0x0007/*::]*/: { /* n:\"String\", */ f:parse_BIFF2STRING },\n\t/*::[*/0x0008/*::]*/: { /* n:\"BIFF2ROW\", */ },\n\t/*::[*/0x0009/*::]*/: { /* n:\"BOF\", */ f:parse_BOF },\n\t/*::[*/0x000b/*::]*/: { /* n:\"Index\", */ },\n\t/*::[*/0x0016/*::]*/: { /* n:\"ExternCount\", */ f:parseuint16 },\n\t/*::[*/0x001e/*::]*/: { /* n:\"BIFF2FORMAT\", */ f:parse_BIFF2Format },\n\t/*::[*/0x001f/*::]*/: { /* n:\"BIFF2FMTCNT\", */ }, /* 16-bit cnt of BIFF2FORMAT records */\n\t/*::[*/0x0020/*::]*/: { /* n:\"BIFF2COLINFO\", */ },\n\t/*::[*/0x0021/*::]*/: { /* n:\"Array\", */ f:parse_Array },\n\t/*::[*/0x0024/*::]*/: { /* n:\"COLWIDTH\", */ },\n\t/*::[*/0x0025/*::]*/: { /* n:\"DefaultRowHeight\", */ f:parse_DefaultRowHeight },\n\t// 0x2c ??\n\t// 0x2d ??\n\t// 0x2e ??\n\t// 0x30 FONTCOUNT: number of fonts\n\t/*::[*/0x0032/*::]*/: { /* n:\"BIFF2FONTXTRA\", */ f:parse_BIFF2FONTXTRA },\n\t// 0x35: INFOOPTS\n\t// 0x36: TABLE (BIFF2 only)\n\t// 0x37: TABLE2 (BIFF2 only)\n\t// 0x38: WNDESK\n\t// 0x39 ??\n\t// 0x3a: BEGINPREF\n\t// 0x3b: ENDPREF\n\t/*::[*/0x003e/*::]*/: { /* n:\"BIFF2WINDOW2\", */ },\n\t// 0x3f ??\n\t// 0x46: SHOWSCROLL\n\t// 0x47: SHOWFORMULA\n\t// 0x48: STATUSBAR\n\t// 0x49: SHORTMENUS\n\t// 0x4A:\n\t// 0x4B:\n\t// 0x4C:\n\t// 0x4E:\n\t// 0x4F:\n\t// 0x58: TOOLBAR (BIFF3)\n\n\t/* - - - */\n\t/*::[*/0x0034/*::]*/: { /* n:\"DDEObjName\", */ },\n\t/*::[*/0x0043/*::]*/: { /* n:\"BIFF2XF\", */ },\n\t/*::[*/0x0044/*::]*/: { /* n:\"BIFF2XFINDEX\", */ f:parseuint16 },\n\t/*::[*/0x0045/*::]*/: { /* n:\"BIFF2FONTCLR\", */ },\n\t/*::[*/0x0056/*::]*/: { /* n:\"BIFF4FMTCNT\", */ }, /* 16-bit cnt, similar to BIFF2 */\n\t/*::[*/0x007e/*::]*/: { /* n:\"RK\", */ }, /* Not necessarily same as 0x027e */\n\t/*::[*/0x007f/*::]*/: { /* n:\"ImData\", */ f:parse_ImData },\n\t/*::[*/0x0087/*::]*/: { /* n:\"Addin\", */ },\n\t/*::[*/0x0088/*::]*/: { /* n:\"Edg\", */ },\n\t/*::[*/0x0089/*::]*/: { /* n:\"Pub\", */ },\n\t// 0x8A\n\t// 0x8B LH: alternate menu key flag (BIFF3/4)\n\t// 0x8E\n\t// 0x8F\n\t/*::[*/0x0091/*::]*/: { /* n:\"Sub\", */ },\n\t// 0x93 STYLE\n\t/*::[*/0x0094/*::]*/: { /* n:\"LHRecord\", */ },\n\t/*::[*/0x0095/*::]*/: { /* n:\"LHNGraph\", */ },\n\t/*::[*/0x0096/*::]*/: { /* n:\"Sound\", */ },\n\t// 0xA2 FNPROTO: function prototypes (BIFF4)\n\t// 0xA3\n\t// 0xA8\n\t/*::[*/0x00a9/*::]*/: { /* n:\"CoordList\", */ },\n\t/*::[*/0x00ab/*::]*/: { /* n:\"GCW\", */ },\n\t/*::[*/0x00bc/*::]*/: { /* n:\"ShrFmla\", */ }, /* Not necessarily same as 0x04bc */\n\t/*::[*/0x00bf/*::]*/: { /* n:\"ToolbarHdr\", */ },\n\t/*::[*/0x00c0/*::]*/: { /* n:\"ToolbarEnd\", */ },\n\t/*::[*/0x00c2/*::]*/: { /* n:\"AddMenu\", */ },\n\t/*::[*/0x00c3/*::]*/: { /* n:\"DelMenu\", */ },\n\t/*::[*/0x00d6/*::]*/: { /* n:\"RString\", */ f:parse_RString },\n\t/*::[*/0x00df/*::]*/: { /* n:\"UDDesc\", */ },\n\t/*::[*/0x00ea/*::]*/: { /* n:\"TabIdConf\", */ },\n\t/*::[*/0x0162/*::]*/: { /* n:\"XL5Modify\", */ },\n\t/*::[*/0x01a5/*::]*/: { /* n:\"FileSharing2\", */ },\n\t/*::[*/0x0206/*::]*/: { /* n:\"Formula\", */ f:parse_Formula },\n\t/*::[*/0x0209/*::]*/: { /* n:\"BOF\", */ f:parse_BOF },\n\t/*::[*/0x0218/*::]*/: { /* n:\"Lbl\", */ f:parse_Lbl },\n\t/*::[*/0x0223/*::]*/: { /* n:\"ExternName\", */ f:parse_ExternName },\n\t/*::[*/0x0231/*::]*/: { /* n:\"Font\", */ },\n\t/*::[*/0x0243/*::]*/: { /* n:\"BIFF3XF\", */ },\n\t/*::[*/0x0406/*::]*/: { /* n:\"Formula\", */ f:parse_Formula },\n\t/*::[*/0x0409/*::]*/: { /* n:\"BOF\", */ f:parse_BOF },\n\t/*::[*/0x0443/*::]*/: { /* n:\"BIFF4XF\", */ },\n\t/*::[*/0x086d/*::]*/: { /* n:\"FeatInfo\", */ },\n\t/*::[*/0x0873/*::]*/: { /* n:\"FeatInfo11\", */ },\n\t/*::[*/0x0881/*::]*/: { /* n:\"SXAddl12\", */ },\n\t/*::[*/0x08c0/*::]*/: { /* n:\"AutoWebPub\", */ },\n\t/*::[*/0x08c1/*::]*/: { /* n:\"ListObj\", */ },\n\t/*::[*/0x08c2/*::]*/: { /* n:\"ListField\", */ },\n\t/*::[*/0x08c3/*::]*/: { /* n:\"ListDV\", */ },\n\t/*::[*/0x08c4/*::]*/: { /* n:\"ListCondFmt\", */ },\n\t/*::[*/0x08c5/*::]*/: { /* n:\"ListCF\", */ },\n\t/*::[*/0x08c6/*::]*/: { /* n:\"FMQry\", */ },\n\t/*::[*/0x08c7/*::]*/: { /* n:\"FMSQry\", */ },\n\t/*::[*/0x08c8/*::]*/: { /* n:\"PLV\", */ },\n\t/*::[*/0x08c9/*::]*/: { /* n:\"LnExt\", */ },\n\t/*::[*/0x08ca/*::]*/: { /* n:\"MkrExt\", */ },\n\t/*::[*/0x08cb/*::]*/: { /* n:\"CrtCoopt\", */ },\n\t/*::[*/0x08d6/*::]*/: { /* n:\"FRTArchId$\", */ r:12 },\n\n\t/*::[*/0x7262/*::]*/: {}\n};\n\nfunction write_biff_rec(ba/*:BufArray*/, type/*:number*/, payload, length/*:?number*/)/*:void*/ {\n\tvar t/*:number*/ = type;\n\tif(isNaN(t)) return;\n\tvar len = length || (payload||[]).length || 0;\n\tvar o = ba.next(4);\n\to.write_shift(2, t);\n\to.write_shift(2, len);\n\tif(/*:: len != null &&*/len > 0 && is_buf(payload)) ba.push(payload);\n}\n\nfunction write_biff_continue(ba/*:BufArray*/, type/*:number*/, payload, length/*:?number*/)/*:void*/ {\n\tvar len = length || (payload||[]).length || 0;\n\tif(len <= 8224) return write_biff_rec(ba, type, payload, len);\n\tvar t = type;\n\tif(isNaN(t)) return;\n\tvar parts = payload.parts || [], sidx = 0;\n\tvar i = 0, w = 0;\n\twhile(w + (parts[sidx] || 8224) <= 8224) { w+= (parts[sidx] || 8224); sidx++; }\n\tvar o = ba.next(4);\n\to.write_shift(2, t);\n\to.write_shift(2, w);\n\tba.push(payload.slice(i, i + w));\n\ti += w;\n\twhile(i < len) {\n\t\to = ba.next(4);\n\t\to.write_shift(2, 0x3c); // TODO: figure out correct continue type\n\t\tw = 0;\n\t\twhile(w + (parts[sidx] || 8224) <= 8224) { w+= (parts[sidx] || 8224); sidx++; }\n\t\to.write_shift(2, w);\n\t\tba.push(payload.slice(i, i+w)); i+= w;\n\t}\n}\n\nfunction write_BIFF2Cell(out, r/*:number*/, c/*:number*/) {\n\tif(!out) out = new_buf(7);\n\tout.write_shift(2, r);\n\tout.write_shift(2, c);\n\tout.write_shift(2, 0);\n\tout.write_shift(1, 0);\n\treturn out;\n}\n\nfunction write_BIFF2BERR(r/*:number*/, c/*:number*/, val, t/*:?string*/) {\n\tvar out = new_buf(9);\n\twrite_BIFF2Cell(out, r, c);\n\twrite_Bes(val, t || 'b', out);\n\treturn out;\n}\n\n/* TODO: codepage, large strings */\nfunction write_BIFF2LABEL(r/*:number*/, c/*:number*/, val) {\n\tvar out = new_buf(8 + 2*val.length);\n\twrite_BIFF2Cell(out, r, c);\n\tout.write_shift(1, val.length);\n\tout.write_shift(val.length, val, 'sbcs');\n\treturn out.l < out.length ? out.slice(0, out.l) : out;\n}\n\nfunction write_ws_biff2_cell(ba/*:BufArray*/, cell/*:Cell*/, R/*:number*/, C/*:number*//*::, opts*/) {\n\tif(cell.v != null) switch(cell.t) {\n\t\tcase 'd': case 'n':\n\t\t\tvar v = cell.t == 'd' ? datenum(parseDate(cell.v)) : cell.v;\n\t\t\tif((v == (v|0)) && (v >= 0) && (v < 65536))\n\t\t\t\twrite_biff_rec(ba, 0x0002, write_BIFF2INT(R, C, v));\n\t\t\telse\n\t\t\t\twrite_biff_rec(ba, 0x0003, write_BIFF2NUM(R,C, v));\n\t\t\treturn;\n\t\tcase 'b': case 'e': write_biff_rec(ba, 0x0005, write_BIFF2BERR(R, C, cell.v, cell.t)); return;\n\t\t/* TODO: codepage, sst */\n\t\tcase 's': case 'str':\n\t\t\twrite_biff_rec(ba, 0x0004, write_BIFF2LABEL(R, C, (cell.v||\"\").slice(0,255)));\n\t\t\treturn;\n\t}\n\twrite_biff_rec(ba, 0x0001, write_BIFF2Cell(null, R, C));\n}\n\nfunction write_ws_biff2(ba/*:BufArray*/, ws/*:Worksheet*/, idx/*:number*/, opts/*::, wb:Workbook*/) {\n\tvar dense = Array.isArray(ws);\n\tvar range = safe_decode_range(ws['!ref'] || \"A1\"), ref/*:string*/, rr = \"\", cols/*:Array<string>*/ = [];\n\tif(range.e.c > 0xFF || range.e.r > 0x3FFF) {\n\t\tif(opts.WTF) throw new Error(\"Range \" + (ws['!ref'] || \"A1\") + \" exceeds format limit A1:IV16384\");\n\t\trange.e.c = Math.min(range.e.c, 0xFF);\n\t\trange.e.r = Math.min(range.e.c, 0x3FFF);\n\t\tref = encode_range(range);\n\t}\n\tfor(var R = range.s.r; R <= range.e.r; ++R) {\n\t\trr = encode_row(R);\n\t\tfor(var C = range.s.c; C <= range.e.c; ++C) {\n\t\t\tif(R === range.s.r) cols[C] = encode_col(C);\n\t\t\tref = cols[C] + rr;\n\t\t\tvar cell = dense ? (ws[R]||[])[C] : ws[ref];\n\t\t\tif(!cell) continue;\n\t\t\t/* write cell */\n\t\t\twrite_ws_biff2_cell(ba, cell, R, C, opts);\n\t\t}\n\t}\n}\n\n/* Based on test files */\nfunction write_biff2_buf(wb/*:Workbook*/, opts/*:WriteOpts*/) {\n\tvar o = opts || {};\n\tif(DENSE != null && o.dense == null) o.dense = DENSE;\n\tvar ba = buf_array();\n\tvar idx = 0;\n\tfor(var i=0;i<wb.SheetNames.length;++i) if(wb.SheetNames[i] == o.sheet) idx=i;\n\tif(idx == 0 && !!o.sheet && wb.SheetNames[0] != o.sheet) throw new Error(\"Sheet not found: \" + o.sheet);\n\twrite_biff_rec(ba, (o.biff == 4 ? 0x0409 : (o.biff == 3 ? 0x0209 : 0x0009)), write_BOF(wb, 0x10, o));\n\t/* ... */\n\twrite_ws_biff2(ba, wb.Sheets[wb.SheetNames[idx]], idx, o, wb);\n\t/* ... */\n\twrite_biff_rec(ba, 0x000A);\n\treturn ba.end();\n}\n\nfunction write_FONTS_biff8(ba, data, opts) {\n\twrite_biff_rec(ba, 0x0031 /* Font */, write_Font({\n\t\tsz:12,\n\t\tcolor: {theme:1},\n\t\tname: \"Arial\",\n\t\tfamily: 2,\n\t\tscheme: \"minor\"\n\t}, opts));\n}\n\n\nfunction write_FMTS_biff8(ba, NF/*:?SSFTable*/, opts) {\n\tif(!NF) return;\n\t[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {\n\t\t/*:: if(!NF) return; */\n\t\tfor(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) write_biff_rec(ba, 0x041E /* Format */, write_Format(i, NF[i], opts));\n\t});\n}\n\nfunction write_FEAT(ba, ws) {\n\t/* [MS-XLS] 2.4.112 */\n\tvar o = new_buf(19);\n\to.write_shift(4, 0x867); o.write_shift(4, 0); o.write_shift(4, 0);\n\to.write_shift(2, 3); o.write_shift(1, 1); o.write_shift(4, 0);\n\twrite_biff_rec(ba, 0x0867 /* FeatHdr */, o);\n\t/* [MS-XLS] 2.4.111 */\n\to = new_buf(39);\n\to.write_shift(4, 0x868); o.write_shift(4, 0); o.write_shift(4, 0);\n\to.write_shift(2, 3); o.write_shift(1, 0); o.write_shift(4, 0);\n\to.write_shift(2, 1); o.write_shift(4, 4); o.write_shift(2, 0);\n\twrite_Ref8U(safe_decode_range(ws['!ref']||\"A1\"), o);\n\to.write_shift(4, 4);\n\twrite_biff_rec(ba, 0x0868 /* Feat */, o);\n}\n\nfunction write_CELLXFS_biff8(ba, opts) {\n\tfor(var i = 0; i < 16; ++i) write_biff_rec(ba, 0x00e0 /* XF */, write_XF({numFmtId:0, style:true}, 0, opts));\n\topts.cellXfs.forEach(function(c) {\n\t\twrite_biff_rec(ba, 0x00e0 /* XF */, write_XF(c, 0, opts));\n\t});\n}\n\nfunction write_ws_biff8_hlinks(ba/*:BufArray*/, ws) {\n\tfor(var R=0; R<ws['!links'].length; ++R) {\n\t\tvar HL = ws['!links'][R];\n\t\twrite_biff_rec(ba, 0x01b8 /* HLink */, write_HLink(HL));\n\t\tif(HL[1].Tooltip) write_biff_rec(ba, 0x0800 /* HLinkTooltip */, write_HLinkTooltip(HL));\n\t}\n\tdelete ws['!links'];\n}\n\nfunction write_ws_cols_biff8(ba, cols) {\n\tif(!cols) return;\n\tvar cnt = 0;\n\tcols.forEach(function(col, idx) {\n\t\tif(++cnt <= 256 && col) {\n\t\t\twrite_biff_rec(ba, 0x007d /* ColInfo */, write_ColInfo(col_obj_w(idx, col), idx));\n\t\t}\n\t});\n}\n\nfunction write_ws_biff8_cell(ba/*:BufArray*/, cell/*:Cell*/, R/*:number*/, C/*:number*/, opts) {\n\tvar os = 16 + get_cell_style(opts.cellXfs, cell, opts);\n\tif(cell.v == null && !cell.bf) {\n\t\twrite_biff_rec(ba, 0x0201 /* Blank */, write_XLSCell(R, C, os));\n\t\treturn;\n\t}\n\tif(cell.bf) write_biff_rec(ba, 0x0006 /* Formula */, write_Formula(cell, R, C, opts, os));\n\telse switch(cell.t) {\n\t\tcase 'd': case 'n':\n\t\t\tvar v = cell.t == 'd' ? datenum(parseDate(cell.v)) : cell.v;\n\t\t\t/* TODO: emit RK as appropriate */\n\t\t\twrite_biff_rec(ba, 0x0203 /* Number */, write_Number(R, C, v, os, opts));\n\t\t\tbreak;\n\t\tcase 'b': case 'e':\n\t\t\twrite_biff_rec(ba, 0x0205 /* BoolErr */, write_BoolErr(R, C, cell.v, os, opts, cell.t));\n\t\t\tbreak;\n\t\t/* TODO: codepage, sst */\n\t\tcase 's': case 'str':\n\t\t\tif(opts.bookSST) {\n\t\t\t\tvar isst = get_sst_id(opts.Strings, cell.v, opts.revStrings);\n\t\t\t\twrite_biff_rec(ba, 0x00fd /* LabelSst */, write_LabelSst(R, C, isst, os, opts));\n\t\t\t} else write_biff_rec(ba, 0x0204 /* Label */, write_Label(R, C, (cell.v||\"\").slice(0,255), os, opts));\n\t\t\tbreak;\n\t\tdefault:\n\t\t\twrite_biff_rec(ba, 0x0201 /* Blank */, write_XLSCell(R, C, os));\n\t}\n}\n\n/* [MS-XLS] 2.1.7.20.5 */\nfunction write_ws_biff8(idx/*:number*/, opts, wb/*:Workbook*/) {\n\tvar ba = buf_array();\n\tvar s = wb.SheetNames[idx], ws = wb.Sheets[s] || {};\n\tvar _WB/*:WBWBProps*/ = ((wb||{}).Workbook||{}/*:any*/);\n\tvar _sheet/*:WBWSProp*/ = ((_WB.Sheets||[])[idx]||{}/*:any*/);\n\tvar dense = Array.isArray(ws);\n\tvar b8 = opts.biff == 8;\n\tvar ref/*:string*/, rr = \"\", cols/*:Array<string>*/ = [];\n\tvar range = safe_decode_range(ws['!ref'] || \"A1\");\n\tvar MAX_ROWS = b8 ? 65536 : 16384;\n\tif(range.e.c > 0xFF || range.e.r >= MAX_ROWS) {\n\t\tif(opts.WTF) throw new Error(\"Range \" + (ws['!ref'] || \"A1\") + \" exceeds format limit A1:IV16384\");\n\t\trange.e.c = Math.min(range.e.c, 0xFF);\n\t\trange.e.r = Math.min(range.e.c, MAX_ROWS-1);\n\t}\n\n\twrite_biff_rec(ba, 0x0809, write_BOF(wb, 0x10, opts));\n\t/* [Uncalced] Index */\n\twrite_biff_rec(ba, 0x000d /* CalcMode */, writeuint16(1));\n\twrite_biff_rec(ba, 0x000c /* CalcCount */, writeuint16(100));\n\twrite_biff_rec(ba, 0x000f /* CalcRefMode */, writebool(true));\n\twrite_biff_rec(ba, 0x0011 /* CalcIter */, writebool(false));\n\twrite_biff_rec(ba, 0x0010 /* CalcDelta */, write_Xnum(0.001));\n\twrite_biff_rec(ba, 0x005f /* CalcSaveRecalc */, writebool(true));\n\twrite_biff_rec(ba, 0x002a /* PrintRowCol */, writebool(false));\n\twrite_biff_rec(ba, 0x002b /* PrintGrid */, writebool(false));\n\twrite_biff_rec(ba, 0x0082 /* GridSet */, writeuint16(1));\n\twrite_biff_rec(ba, 0x0080 /* Guts */, write_Guts([0,0]));\n\t/* DefaultRowHeight WsBool [Sync] [LPr] [HorizontalPageBreaks] [VerticalPageBreaks] */\n\t/* Header (string) */\n\t/* Footer (string) */\n\twrite_biff_rec(ba, 0x0083 /* HCenter */, writebool(false));\n\twrite_biff_rec(ba, 0x0084 /* VCenter */, writebool(false));\n\t/* ... */\n\tif(b8) write_ws_cols_biff8(ba, ws[\"!cols\"]);\n\t/* ... */\n\twrite_biff_rec(ba, 0x200, write_Dimensions(range, opts));\n\t/* ... */\n\n\tif(b8) ws['!links'] = [];\n\tfor(var R = range.s.r; R <= range.e.r; ++R) {\n\t\trr = encode_row(R);\n\t\tfor(var C = range.s.c; C <= range.e.c; ++C) {\n\t\t\tif(R === range.s.r) cols[C] = encode_col(C);\n\t\t\tref = cols[C] + rr;\n\t\t\tvar cell = dense ? (ws[R]||[])[C] : ws[ref];\n\t\t\tif(!cell) continue;\n\t\t\t/* write cell */\n\t\t\twrite_ws_biff8_cell(ba, cell, R, C, opts);\n\t\t\tif(b8 && cell.l) ws['!links'].push([ref, cell.l]);\n\t\t}\n\t}\n\tvar cname/*:string*/ = _sheet.CodeName || _sheet.name || s;\n\t/* ... */\n\tif(b8) write_biff_rec(ba, 0x023e /* Window2 */, write_Window2((_WB.Views||[])[0]));\n\t/* ... */\n\tif(b8 && (ws['!merges']||[]).length) write_biff_rec(ba, 0x00e5 /* MergeCells */, write_MergeCells(ws['!merges']));\n\t/* [LRng] *QUERYTABLE [PHONETICINFO] CONDFMTS */\n\tif(b8) write_ws_biff8_hlinks(ba, ws);\n\t/* [DVAL] */\n\twrite_biff_rec(ba, 0x01ba /* CodeName */, write_XLUnicodeString(cname, opts));\n\t/* *WebPub *CellWatch [SheetExt] */\n\tif(b8) write_FEAT(ba, ws);\n\t/* *FEAT11 *RECORD12 */\n\twrite_biff_rec(ba, 0x000a /* EOF */);\n\treturn ba.end();\n}\n\n/* [MS-XLS] 2.1.7.20.3 */\nfunction write_biff8_global(wb/*:Workbook*/, bufs, opts/*:WriteOpts*/) {\n\tvar A = buf_array();\n\tvar _WB/*:WBWBProps*/ = ((wb||{}).Workbook||{}/*:any*/);\n\tvar _sheets/*:Array<WBWSProp>*/ = (_WB.Sheets||[]);\n\tvar _wb/*:WBProps*/ = /*::((*/_WB.WBProps||{/*::CodeName:\"ThisWorkbook\"*/}/*:: ):any)*/;\n\tvar b8 = opts.biff == 8, b5 = opts.biff == 5;\n\twrite_biff_rec(A, 0x0809, write_BOF(wb, 0x05, opts));\n\tif(opts.bookType == \"xla\") write_biff_rec(A, 0x0087 /* Addin */);\n\twrite_biff_rec(A, 0x00e1 /* InterfaceHdr */, b8 ? writeuint16(0x04b0) : null);\n\twrite_biff_rec(A, 0x00c1 /* Mms */, writezeroes(2));\n\tif(b5) write_biff_rec(A, 0x00bf /* ToolbarHdr */);\n\tif(b5) write_biff_rec(A, 0x00c0 /* ToolbarEnd */);\n\twrite_biff_rec(A, 0x00e2 /* InterfaceEnd */);\n\twrite_biff_rec(A, 0x005c /* WriteAccess */, write_WriteAccess(\"SheetJS\", opts));\n\t/* [FileSharing] */\n\twrite_biff_rec(A, 0x0042 /* CodePage */, writeuint16(b8 ? 0x04b0 : 0x04E4));\n\t/* *2047 Lel */\n\tif(b8) write_biff_rec(A, 0x0161 /* DSF */, writeuint16(0));\n\tif(b8) write_biff_rec(A, 0x01c0 /* Excel9File */);\n\twrite_biff_rec(A, 0x013d /* RRTabId */, write_RRTabId(wb.SheetNames.length));\n\tif(b8 && wb.vbaraw) write_biff_rec(A, 0x00d3 /* ObProj */);\n\t/* [ObNoMacros] */\n\tif(b8 && wb.vbaraw) {\n\t\tvar cname/*:string*/ = _wb.CodeName || \"ThisWorkbook\";\n\t\twrite_biff_rec(A, 0x01ba /* CodeName */, write_XLUnicodeString(cname, opts));\n\t}\n\twrite_biff_rec(A, 0x009c /* BuiltInFnGroupCount */, writeuint16(0x11));\n\t/* *FnGroupName *FnGrp12 */\n\t/* *Lbl */\n\t/* [OleObjectSize] */\n\twrite_biff_rec(A, 0x0019 /* WinProtect */, writebool(false));\n\twrite_biff_rec(A, 0x0012 /* Protect */, writebool(false));\n\twrite_biff_rec(A, 0x0013 /* Password */, writeuint16(0));\n\tif(b8) write_biff_rec(A, 0x01af /* Prot4Rev */, writebool(false));\n\tif(b8) write_biff_rec(A, 0x01bc /* Prot4RevPass */, writeuint16(0));\n\twrite_biff_rec(A, 0x003d /* Window1 */, write_Window1(opts));\n\twrite_biff_rec(A, 0x0040 /* Backup */, writebool(false));\n\twrite_biff_rec(A, 0x008d /* HideObj */, writeuint16(0));\n\twrite_biff_rec(A, 0x0022 /* Date1904 */, writebool(safe1904(wb)==\"true\"));\n\twrite_biff_rec(A, 0x000e /* CalcPrecision */, writebool(true));\n\tif(b8) write_biff_rec(A, 0x01b7 /* RefreshAll */, writebool(false));\n\twrite_biff_rec(A, 0x00DA /* BookBool */, writeuint16(0));\n\t/* ... */\n\twrite_FONTS_biff8(A, wb, opts);\n\twrite_FMTS_biff8(A, wb.SSF, opts);\n\twrite_CELLXFS_biff8(A, opts);\n\t/* ... */\n\tif(b8) write_biff_rec(A, 0x0160 /* UsesELFs */, writebool(false));\n\tvar a = A.end();\n\n\tvar C = buf_array();\n\t/* METADATA [MTRSettings] [ForceFullCalculation] */\n\tif(b8) write_biff_rec(C, 0x008C, write_Country());\n\t/* *SUPBOOK *LBL *RTD [RecalcId] *HFPicture *MSODRAWINGGROUP */\n\n\t/* BIFF8: [SST *Continue] ExtSST */\n\tif(b8 && opts.Strings) write_biff_continue(C, 0x00FC, write_SST(opts.Strings, opts));\n\n\t/* *WebPub [WOpt] [CrErr] [BookExt] *FeatHdr *DConn [THEME] [CompressPictures] [Compat12] [GUIDTypeLib] */\n\twrite_biff_rec(C, 0x000A /* EOF */);\n\tvar c = C.end();\n\n\tvar B = buf_array();\n\tvar blen = 0, j = 0;\n\tfor(j = 0; j < wb.SheetNames.length; ++j) blen += (b8 ? 12 : 11) + (b8 ? 2 : 1) * wb.SheetNames[j].length;\n\tvar start = a.length + blen + c.length;\n\tfor(j = 0; j < wb.SheetNames.length; ++j) {\n\t\tvar _sheet/*:WBWSProp*/ = _sheets[j] || ({}/*:any*/);\n\t\twrite_biff_rec(B, 0x0085 /* BoundSheet8 */, write_BoundSheet8({pos:start, hs:_sheet.Hidden||0, dt:0, name:wb.SheetNames[j]}, opts));\n\t\tstart += bufs[j].length;\n\t}\n\t/* 1*BoundSheet8 */\n\tvar b = B.end();\n\tif(blen != b.length) throw new Error(\"BS8 \" + blen + \" != \" + b.length);\n\n\tvar out = [];\n\tif(a.length) out.push(a);\n\tif(b.length) out.push(b);\n\tif(c.length) out.push(c);\n\treturn bconcat(out);\n}\n\n/* [MS-XLS] 2.1.7.20 Workbook Stream */\nfunction write_biff8_buf(wb/*:Workbook*/, opts/*:WriteOpts*/) {\n\tvar o = opts || {};\n\tvar bufs = [];\n\n\tif(wb && !wb.SSF) {\n\t\twb.SSF = dup(table_fmt);\n\t}\n\tif(wb && wb.SSF) {\n\t\tmake_ssf(); SSF_load_table(wb.SSF);\n\t\t// $FlowIgnore\n\t\to.revssf = evert_num(wb.SSF); o.revssf[wb.SSF[65535]] = 0;\n\t\to.ssf = wb.SSF;\n\t}\n\n\to.Strings = /*::((*/[]/*:: :any):SST)*/; o.Strings.Count = 0; o.Strings.Unique = 0;\n\tfix_write_opts(o);\n\n\to.cellXfs = [];\n\tget_cell_style(o.cellXfs, {}, {revssf:{\"General\":0}});\n\n\tif(!wb.Props) wb.Props = {};\n\n\tfor(var i = 0; i < wb.SheetNames.length; ++i) bufs[bufs.length] = write_ws_biff8(i, o, wb);\n\tbufs.unshift(write_biff8_global(wb, bufs, o));\n\treturn bconcat(bufs);\n}\n\nfunction write_biff_buf(wb/*:Workbook*/, opts/*:WriteOpts*/) {\n\tfor(var i = 0; i <= wb.SheetNames.length; ++i) {\n\t\tvar ws = wb.Sheets[wb.SheetNames[i]];\n\t\tif(!ws || !ws[\"!ref\"]) continue;\n\t\tvar range = decode_range(ws[\"!ref\"]);\n\t\tif(range.e.c > 255) { // note: 255 is IV\n\t\tif(typeof console != \"undefined\" && console.error) console.error(\"Worksheet '\" + wb.SheetNames[i] + \"' extends beyond column IV (255).  Data may be lost.\");\n\t\t}\n\t}\n\n\tvar o = opts || {};\n\tswitch(o.biff || 2) {\n\t\tcase 8: case 5: return write_biff8_buf(wb, opts);\n\t\tcase 4: case 3: case 2: return write_biff2_buf(wb, opts);\n\t}\n\tthrow new Error(\"invalid type \" + o.bookType + \" for BIFF\");\n}\n/* note: browser DOM element cannot see mso- style attrs, must parse */\nfunction html_to_sheet(str/*:string*/, _opts)/*:Workbook*/ {\n\tvar opts = _opts || {};\n\tif(DENSE != null && opts.dense == null) opts.dense = DENSE;\n\tvar ws/*:Worksheet*/ = opts.dense ? ([]/*:any*/) : ({}/*:any*/);\n\tstr = str.replace(/<!--.*?-->/g, \"\");\n\tvar mtch/*:any*/ = str.match(/<table/i);\n\tif(!mtch) throw new Error(\"Invalid HTML: could not find <table>\");\n\tvar mtch2/*:any*/ = str.match(/<\\/table/i);\n\tvar i/*:number*/ = mtch.index, j/*:number*/ = mtch2 && mtch2.index || str.length;\n\tvar rows = split_regex(str.slice(i, j), /(:?<tr[^>]*>)/i, \"<tr>\");\n\tvar R = -1, C = 0, RS = 0, CS = 0;\n\tvar range/*:Range*/ = {s:{r:10000000, c:10000000},e:{r:0,c:0}};\n\tvar merges/*:Array<Range>*/ = [];\n\tfor(i = 0; i < rows.length; ++i) {\n\t\tvar row = rows[i].trim();\n\t\tvar hd = row.slice(0,3).toLowerCase();\n\t\tif(hd == \"<tr\") { ++R; if(opts.sheetRows && opts.sheetRows <= R) { --R; break; } C = 0; continue; }\n\t\tif(hd != \"<td\" && hd != \"<th\") continue;\n\t\tvar cells = row.split(/<\\/t[dh]>/i);\n\t\tfor(j = 0; j < cells.length; ++j) {\n\t\t\tvar cell = cells[j].trim();\n\t\t\tif(!cell.match(/<t[dh]/i)) continue;\n\t\t\tvar m = cell, cc = 0;\n\t\t\t/* TODO: parse styles etc */\n\t\t\twhile(m.charAt(0) == \"<\" && (cc = m.indexOf(\">\")) > -1) m = m.slice(cc+1);\n\t\t\tfor(var midx = 0; midx < merges.length; ++midx) {\n\t\t\t\tvar _merge/*:Range*/ = merges[midx];\n\t\t\t\tif(_merge.s.c == C && _merge.s.r < R && R <= _merge.e.r) { C = _merge.e.c + 1; midx = -1; }\n\t\t\t}\n\t\t\tvar tag = parsexmltag(cell.slice(0, cell.indexOf(\">\")));\n\t\t\tCS = tag.colspan ? +tag.colspan : 1;\n\t\t\tif((RS = +tag.rowspan)>1 || CS>1) merges.push({s:{r:R,c:C},e:{r:R + (RS||1) - 1, c:C + CS - 1}});\n\t\t\tvar _t/*:string*/ = tag.t || tag[\"data-t\"] || \"\";\n\t\t\t/* TODO: generate stub cells */\n\t\t\tif(!m.length) { C += CS; continue; }\n\t\t\tm = htmldecode(m);\n\t\t\tif(range.s.r > R) range.s.r = R; if(range.e.r < R) range.e.r = R;\n\t\t\tif(range.s.c > C) range.s.c = C; if(range.e.c < C) range.e.c = C;\n\t\t\tif(!m.length) { C += CS; continue; }\n\t\t\tvar o/*:Cell*/ = {t:'s', v:m};\n\t\t\tif(opts.raw || !m.trim().length || _t == 's'){}\n\t\t\telse if(m === 'TRUE') o = {t:'b', v:true};\n\t\t\telse if(m === 'FALSE') o = {t:'b', v:false};\n\t\t\telse if(!isNaN(fuzzynum(m))) o = {t:'n', v:fuzzynum(m)};\n\t\t\telse if(!isNaN(fuzzydate(m).getDate())) {\n\t\t\t\to = ({t:'d', v:parseDate(m)}/*:any*/);\n\t\t\t\tif(!opts.cellDates) o = ({t:'n', v:datenum(o.v)}/*:any*/);\n\t\t\t\to.z = opts.dateNF || table_fmt[14];\n\t\t\t}\n\t\t\tif(opts.dense) { if(!ws[R]) ws[R] = []; ws[R][C] = o; }\n\t\t\telse ws[encode_cell({r:R, c:C})] = o;\n\t\t\tC += CS;\n\t\t}\n\t}\n\tws['!ref'] = encode_range(range);\n\tif(merges.length) ws[\"!merges\"] = merges;\n\treturn ws;\n}\nfunction make_html_row(ws/*:Worksheet*/, r/*:Range*/, R/*:number*/, o/*:Sheet2HTMLOpts*/)/*:string*/ {\n\tvar M/*:Array<Range>*/ = (ws['!merges'] ||[]);\n\tvar oo/*:Array<string>*/ = [];\n\tfor(var C = r.s.c; C <= r.e.c; ++C) {\n\t\tvar RS = 0, CS = 0;\n\t\tfor(var j = 0; j < M.length; ++j) {\n\t\t\tif(M[j].s.r > R || M[j].s.c > C) continue;\n\t\t\tif(M[j].e.r < R || M[j].e.c < C) continue;\n\t\t\tif(M[j].s.r < R || M[j].s.c < C) { RS = -1; break; }\n\t\t\tRS = M[j].e.r - M[j].s.r + 1; CS = M[j].e.c - M[j].s.c + 1; break;\n\t\t}\n\t\tif(RS < 0) continue;\n\t\tvar coord = encode_cell({r:R,c:C});\n\t\tvar cell = o.dense ? (ws[R]||[])[C] : ws[coord];\n\t\t/* TODO: html entities */\n\t\tvar w = (cell && cell.v != null) && (cell.h || escapehtml(cell.w || (format_cell(cell), cell.w) || \"\")) || \"\";\n\t\tvar sp = ({}/*:any*/);\n\t\tif(RS > 1) sp.rowspan = RS;\n\t\tif(CS > 1) sp.colspan = CS;\n\t\tif(o.editable) w = '<span contenteditable=\"true\">' + w + '</span>';\n\t\telse if(cell) {\n\t\t\tsp[\"data-t\"] = cell && cell.t || 'z';\n\t\t\tif(cell.v != null) sp[\"data-v\"] = cell.v;\n\t\t\tif(cell.z != null) sp[\"data-z\"] = cell.z;\n\t\t\tif(cell.l && (cell.l.Target || \"#\").charAt(0) != \"#\") w = '<a href=\"' + cell.l.Target +'\">' + w + '</a>';\n\t\t}\n\t\tsp.id = (o.id || \"sjs\") + \"-\" + coord;\n\t\too.push(writextag('td', w, sp));\n\t}\n\tvar preamble = \"<tr>\";\n\treturn preamble + oo.join(\"\") + \"</tr>\";\n}\n\nvar HTML_BEGIN = '<html><head><meta charset=\"utf-8\"/><title>SheetJS Table Export</title></head><body>';\nvar HTML_END = '</body></html>';\n\nfunction html_to_workbook(str/*:string*/, opts)/*:Workbook*/ {\n\tvar mtch = str.match(/<table[\\s\\S]*?>[\\s\\S]*?<\\/table>/gi);\n\tif(!mtch || mtch.length == 0) throw new Error(\"Invalid HTML: could not find <table>\");\n\tif(mtch.length == 1) return sheet_to_workbook(html_to_sheet(mtch[0], opts), opts);\n\tvar wb = book_new();\n\tmtch.forEach(function(s, idx) { book_append_sheet(wb, html_to_sheet(s, opts), \"Sheet\" + (idx+1)); });\n\treturn wb;\n}\n\nfunction make_html_preamble(ws/*:Worksheet*/, R/*:Range*/, o/*:Sheet2HTMLOpts*/)/*:string*/ {\n\tvar out/*:Array<string>*/ = [];\n\treturn out.join(\"\") + '<table' + (o && o.id ? ' id=\"' + o.id + '\"' : \"\") + '>';\n}\n\nfunction sheet_to_html(ws/*:Worksheet*/, opts/*:?Sheet2HTMLOpts*//*, wb:?Workbook*/)/*:string*/ {\n\tvar o = opts || {};\n\tvar header = o.header != null ? o.header : HTML_BEGIN;\n\tvar footer = o.footer != null ? o.footer : HTML_END;\n\tvar out/*:Array<string>*/ = [header];\n\tvar r = decode_range(ws['!ref']);\n\to.dense = Array.isArray(ws);\n\tout.push(make_html_preamble(ws, r, o));\n\tfor(var R = r.s.r; R <= r.e.r; ++R) out.push(make_html_row(ws, r, R, o));\n\tout.push(\"</table>\" + footer);\n\treturn out.join(\"\");\n}\n\nfunction sheet_add_dom(ws/*:Worksheet*/, table/*:HTMLElement*/, _opts/*:?any*/)/*:Worksheet*/ {\n\tvar opts = _opts || {};\n\tif(DENSE != null) opts.dense = DENSE;\n\tvar or_R = 0, or_C = 0;\n\tif(opts.origin != null) {\n\t\tif(typeof opts.origin == 'number') or_R = opts.origin;\n\t\telse {\n\t\t\tvar _origin/*:CellAddress*/ = typeof opts.origin == \"string\" ? decode_cell(opts.origin) : opts.origin;\n\t\t\tor_R = _origin.r; or_C = _origin.c;\n\t\t}\n\t}\n\n\tvar rows/*:HTMLCollection<HTMLTableRowElement>*/ = table.getElementsByTagName('tr');\n\tvar sheetRows = Math.min(opts.sheetRows||10000000, rows.length);\n\tvar range/*:Range*/ = {s:{r:0,c:0},e:{r:or_R,c:or_C}};\n\tif(ws[\"!ref\"]) {\n\t\tvar _range/*:Range*/ = decode_range(ws[\"!ref\"]);\n\t\trange.s.r = Math.min(range.s.r, _range.s.r);\n\t\trange.s.c = Math.min(range.s.c, _range.s.c);\n\t\trange.e.r = Math.max(range.e.r, _range.e.r);\n\t\trange.e.c = Math.max(range.e.c, _range.e.c);\n\t\tif(or_R == -1) range.e.r = or_R = _range.e.r + 1;\n\t}\n\tvar merges/*:Array<Range>*/ = [], midx = 0;\n\tvar rowinfo/*:Array<RowInfo>*/ = ws[\"!rows\"] || (ws[\"!rows\"] = []);\n\tvar _R = 0, R = 0, _C = 0, C = 0, RS = 0, CS = 0;\n\tif(!ws[\"!cols\"]) ws['!cols'] = [];\n\tfor(; _R < rows.length && R < sheetRows; ++_R) {\n\t\tvar row/*:HTMLTableRowElement*/ = rows[_R];\n\t\tif (is_dom_element_hidden(row)) {\n\t\t\tif (opts.display) continue;\n\t\t\trowinfo[R] = {hidden: true};\n\t\t}\n\t\tvar elts/*:HTMLCollection<HTMLTableCellElement>*/ = (row.children/*:any*/);\n\t\tfor(_C = C = 0; _C < elts.length; ++_C) {\n\t\t\tvar elt/*:HTMLTableCellElement*/ = elts[_C];\n\t\t\tif (opts.display && is_dom_element_hidden(elt)) continue;\n\t\t\tvar v/*:?string*/ = elt.hasAttribute('data-v') ? elt.getAttribute('data-v') : elt.hasAttribute('v') ? elt.getAttribute('v') : htmldecode(elt.innerHTML);\n\t\t\tvar z/*:?string*/ = elt.getAttribute('data-z') || elt.getAttribute('z');\n\t\t\tfor(midx = 0; midx < merges.length; ++midx) {\n\t\t\t\tvar m/*:Range*/ = merges[midx];\n\t\t\t\tif(m.s.c == C + or_C && m.s.r < R + or_R && R + or_R <= m.e.r) { C = m.e.c+1 - or_C; midx = -1; }\n\t\t\t}\n\t\t\t/* TODO: figure out how to extract nonstandard mso- style */\n\t\t\tCS = +elt.getAttribute(\"colspan\") || 1;\n\t\t\tif( ((RS = (+elt.getAttribute(\"rowspan\") || 1)))>1 || CS>1) merges.push({s:{r:R + or_R,c:C + or_C},e:{r:R + or_R + (RS||1) - 1, c:C + or_C + (CS||1) - 1}});\n\t\t\tvar o/*:Cell*/ = {t:'s', v:v};\n\t\t\tvar _t/*:string*/ = elt.getAttribute(\"data-t\") || elt.getAttribute(\"t\") || \"\";\n\t\t\tif(v != null) {\n\t\t\t\tif(v.length == 0) o.t = _t || 'z';\n\t\t\t\telse if(opts.raw || v.trim().length == 0 || _t == \"s\"){}\n\t\t\t\telse if(v === 'TRUE') o = {t:'b', v:true};\n\t\t\t\telse if(v === 'FALSE') o = {t:'b', v:false};\n\t\t\t\telse if(!isNaN(fuzzynum(v))) o = {t:'n', v:fuzzynum(v)};\n\t\t\t\telse if(!isNaN(fuzzydate(v).getDate())) {\n\t\t\t\t\to = ({t:'d', v:parseDate(v)}/*:any*/);\n\t\t\t\t\tif(!opts.cellDates) o = ({t:'n', v:datenum(o.v)}/*:any*/);\n\t\t\t\t\to.z = opts.dateNF || table_fmt[14];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(o.z === undefined && z != null) o.z = z;\n\t\t\t/* The first link is used.  Links are assumed to be fully specified.\n\t\t\t * TODO: The right way to process relative links is to make a new <a> */\n\t\t\tvar l = \"\", Aelts = elt.getElementsByTagName(\"A\");\n\t\t\tif(Aelts && Aelts.length) for(var Aelti = 0; Aelti < Aelts.length; ++Aelti)\tif(Aelts[Aelti].hasAttribute(\"href\")) {\n\t\t\t\tl = Aelts[Aelti].getAttribute(\"href\"); if(l.charAt(0) != \"#\") break;\n\t\t\t}\n\t\t\tif(l && l.charAt(0) != \"#\") o.l = ({ Target: l });\n\t\t\tif(opts.dense) { if(!ws[R + or_R]) ws[R + or_R] = []; ws[R + or_R][C + or_C] = o; }\n\t\t\telse ws[encode_cell({c:C + or_C, r:R + or_R})] = o;\n\t\t\tif(range.e.c < C + or_C) range.e.c = C + or_C;\n\t\t\tC += CS;\n\t\t}\n\t\t++R;\n\t}\n\tif(merges.length) ws['!merges'] = (ws[\"!merges\"] || []).concat(merges);\n\trange.e.r = Math.max(range.e.r, R - 1 + or_R);\n\tws['!ref'] = encode_range(range);\n\tif(R >= sheetRows) ws['!fullref'] = encode_range((range.e.r = rows.length-_R+R-1 + or_R,range)); // We can count the real number of rows to parse but we don't to improve the performance\n\treturn ws;\n}\n\nfunction parse_dom_table(table/*:HTMLElement*/, _opts/*:?any*/)/*:Worksheet*/ {\n\tvar opts = _opts || {};\n\tvar ws/*:Worksheet*/ = opts.dense ? ([]/*:any*/) : ({}/*:any*/);\n\treturn sheet_add_dom(ws, table, _opts);\n}\n\nfunction table_to_book(table/*:HTMLElement*/, opts/*:?any*/)/*:Workbook*/ {\n\treturn sheet_to_workbook(parse_dom_table(table, opts), opts);\n}\n\nfunction is_dom_element_hidden(element/*:HTMLElement*/)/*:boolean*/ {\n\tvar display/*:string*/ = '';\n\tvar get_computed_style/*:?function*/ = get_get_computed_style_function(element);\n\tif(get_computed_style) display = get_computed_style(element).getPropertyValue('display');\n\tif(!display) display = element.style && element.style.display;\n\treturn display === 'none';\n}\n\n/* global getComputedStyle */\nfunction get_get_computed_style_function(element/*:HTMLElement*/)/*:?function*/ {\n\t// The proper getComputedStyle implementation is the one defined in the element window\n\tif(element.ownerDocument.defaultView && typeof element.ownerDocument.defaultView.getComputedStyle === 'function') return element.ownerDocument.defaultView.getComputedStyle;\n\t// If it is not available, try to get one from the global namespace\n\tif(typeof getComputedStyle === 'function') return getComputedStyle;\n\treturn null;\n}\n/* OpenDocument */\nfunction parse_text_p(text/*:string*//*::, tag*/)/*:Array<any>*/ {\n\t/* 6.1.2 White Space Characters */\n\tvar fixed = text\n\t\t.replace(/[\\t\\r\\n]/g, \" \").trim().replace(/ +/g, \" \")\n\t\t.replace(/<text:s\\/>/g,\" \")\n\t\t.replace(/<text:s text:c=\"(\\d+)\"\\/>/g, function($$,$1) { return Array(parseInt($1,10)+1).join(\" \"); })\n\t\t.replace(/<text:tab[^>]*\\/>/g,\"\\t\")\n\t\t.replace(/<text:line-break\\/>/g,\"\\n\");\n\tvar v = unescapexml(fixed.replace(/<[^>]*>/g,\"\"));\n\n\treturn [v];\n}\n\nvar number_formats_ods = {\n\t/* ods name: [short ssf fmt, long ssf fmt] */\n\tday:           [\"d\",   \"dd\"],\n\tmonth:         [\"m\",   \"mm\"],\n\tyear:          [\"y\",   \"yy\"],\n\thours:         [\"h\",   \"hh\"],\n\tminutes:       [\"m\",   \"mm\"],\n\tseconds:       [\"s\",   \"ss\"],\n\t\"am-pm\":       [\"A/P\", \"AM/PM\"],\n\t\"day-of-week\": [\"ddd\", \"dddd\"],\n\tera:           [\"e\",   \"ee\"],\n\t/* there is no native representation of LO \"Q\" format */\n\tquarter:       [\"\\\\Qm\", \"m\\\\\\\"th quarter\\\"\"]\n};\n\n\nfunction parse_content_xml(d/*:string*/, _opts)/*:Workbook*/ {\n\t\tvar opts = _opts || {};\n\t\tif(DENSE != null && opts.dense == null) opts.dense = DENSE;\n\t\tvar str = xlml_normalize(d);\n\t\tvar state/*:Array<any>*/ = [], tmp;\n\t\tvar tag/*:: = {}*/;\n\t\tvar NFtag = {name:\"\"}, NF = \"\", pidx = 0;\n\t\tvar sheetag/*:: = {name:\"\", '':\"\"}*/;\n\t\tvar rowtag/*:: = {'':\"\"}*/;\n\t\tvar Sheets = {}, SheetNames/*:Array<string>*/ = [];\n\t\tvar ws = opts.dense ? ([]/*:any*/) : ({}/*:any*/);\n\t\tvar Rn, q/*:: :any = ({t:\"\", v:null, z:null, w:\"\",c:[],}:any)*/;\n\t\tvar ctag = ({value:\"\"}/*:any*/);\n\t\tvar textp = \"\", textpidx = 0, textptag/*:: = {}*/;\n\t\tvar textR = [];\n\t\tvar R = -1, C = -1, range = {s: {r:1000000,c:10000000}, e: {r:0, c:0}};\n\t\tvar row_ol = 0;\n\t\tvar number_format_map = {};\n\t\tvar merges/*:Array<Range>*/ = [], mrange = {}, mR = 0, mC = 0;\n\t\tvar rowinfo/*:Array<RowInfo>*/ = [], rowpeat = 1, colpeat = 1;\n\t\tvar arrayf/*:Array<[Range, string]>*/ = [];\n\t\tvar WB = {Names:[]};\n\t\tvar atag = ({}/*:any*/);\n\t\tvar _Ref/*:[string, string]*/ = [\"\", \"\"];\n\t\tvar comments/*:Array<Comment>*/ = [], comment/*:Comment*/ = ({}/*:any*/);\n\t\tvar creator = \"\", creatoridx = 0;\n\t\tvar isstub = false, intable = false;\n\t\tvar i = 0;\n\t\txlmlregex.lastIndex = 0;\n\t\tstr = str.replace(/<!--([\\s\\S]*?)-->/mg,\"\").replace(/<!DOCTYPE[^\\[]*\\[[^\\]]*\\]>/gm,\"\");\n\t\twhile((Rn = xlmlregex.exec(str))) switch((Rn[3]=Rn[3].replace(/_.*$/,\"\"))) {\n\n\t\t\tcase 'table': case '': // 9.1.2 <table:table>\n\t\t\t\tif(Rn[1]==='/') {\n\t\t\t\t\tif(range.e.c >= range.s.c && range.e.r >= range.s.r) ws['!ref'] = encode_range(range);\n\t\t\t\t\telse ws['!ref'] = \"A1:A1\";\n\t\t\t\t\tif(opts.sheetRows > 0 && opts.sheetRows <= range.e.r) {\n\t\t\t\t\t\tws['!fullref'] = ws['!ref'];\n\t\t\t\t\t\trange.e.r = opts.sheetRows - 1;\n\t\t\t\t\t\tws['!ref'] = encode_range(range);\n\t\t\t\t\t}\n\t\t\t\t\tif(merges.length) ws['!merges'] = merges;\n\t\t\t\t\tif(rowinfo.length) ws[\"!rows\"] = rowinfo;\n\t\t\t\t\tsheetag.name = sheetag[''] || sheetag.name;\n\t\t\t\t\tif(typeof JSON !== 'undefined') JSON.stringify(sheetag);\n\t\t\t\t\tSheetNames.push(sheetag.name);\n\t\t\t\t\tSheets[sheetag.name] = ws;\n\t\t\t\t\tintable = false;\n\t\t\t\t}\n\t\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') {\n\t\t\t\t\tsheetag = parsexmltag(Rn[0], false);\n\t\t\t\t\tR = C = -1;\n\t\t\t\t\trange.s.r = range.s.c = 10000000; range.e.r = range.e.c = 0;\n\t\t\t\t\tws = opts.dense ? ([]/*:any*/) : ({}/*:any*/); merges = [];\n\t\t\t\t\trowinfo = [];\n\t\t\t\t\tintable = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'table-row-group': // 9.1.9 <table:table-row-group>\n\t\t\t\tif(Rn[1] === \"/\") --row_ol; else ++row_ol;\n\t\t\t\tbreak;\n\t\t\tcase 'table-row': case '': // 9.1.3 <table:table-row>\n\t\t\t\tif(Rn[1] === '/') { R+=rowpeat; rowpeat = 1; break; }\n\t\t\t\trowtag = parsexmltag(Rn[0], false);\n\t\t\t\tif(rowtag['']) R = rowtag[''] - 1; else if(R == -1) R = 0;\n\t\t\t\trowpeat = +rowtag['number-rows-repeated'] || 1;\n\t\t\t\t/* TODO: remove magic */\n\t\t\t\tif(rowpeat < 10) for(i = 0; i < rowpeat; ++i) if(row_ol > 0) rowinfo[R + i] = {level: row_ol};\n\t\t\t\tC = -1; break;\n\t\t\tcase 'covered-table-cell': // 9.1.5 <table:covered-table-cell>\n\t\t\t\tif(Rn[1] !== '/') ++C;\n\t\t\t\tif(opts.sheetStubs) {\n\t\t\t\t\tif(opts.dense) { if(!ws[R]) ws[R] = []; ws[R][C] = {t:'z'}; }\n\t\t\t\t\telse ws[encode_cell({r:R,c:C})] = {t:'z'};\n\t\t\t\t}\n\t\t\t\ttextp = \"\"; textR = [];\n\t\t\t\tbreak; /* stub */\n\t\t\tcase 'table-cell': case '':\n\t\t\t\tif(Rn[0].charAt(Rn[0].length-2) === '/') {\n\t\t\t\t\t++C;\n\t\t\t\t\tctag = parsexmltag(Rn[0], false);\n\t\t\t\t\tcolpeat = parseInt(ctag['number-columns-repeated']||\"1\", 10);\n\t\t\t\t\tq = ({t:'z', v:null/*:: , z:null, w:\"\",c:[]*/}/*:any*/);\n\t\t\t\t\tif(ctag.formula && opts.cellFormula != false) q.f = ods_to_csf_formula(unescapexml(ctag.formula));\n\t\t\t\t\tif((ctag[''] || ctag['value-type']) == \"string\") {\n\t\t\t\t\t\tq.t = \"s\"; q.v = unescapexml(ctag['string-value'] || \"\");\n\t\t\t\t\t\tif(opts.dense) {\n\t\t\t\t\t\t\tif(!ws[R]) ws[R] = [];\n\t\t\t\t\t\t\tws[R][C] = q;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tws[encode_cell({r:R,c:C})] = q;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tC+= colpeat-1;\n\t\t\t\t} else if(Rn[1]!=='/') {\n\t\t\t\t\t++C;\n\t\t\t\t\ttextp = \"\"; textpidx = 0; textR = [];\n\t\t\t\t\tcolpeat = 1;\n\t\t\t\t\tvar rptR = rowpeat ? R + rowpeat - 1 : R;\n\t\t\t\t\tif(C > range.e.c) range.e.c = C;\n\t\t\t\t\tif(C < range.s.c) range.s.c = C;\n\t\t\t\t\tif(R < range.s.r) range.s.r = R;\n\t\t\t\t\tif(rptR > range.e.r) range.e.r = rptR;\n\t\t\t\t\tctag = parsexmltag(Rn[0], false);\n\t\t\t\t\tcomments = []; comment = ({}/*:any*/);\n\t\t\t\t\tq = ({t:ctag[''] || ctag['value-type'], v:null/*:: , z:null, w:\"\",c:[]*/}/*:any*/);\n\t\t\t\t\tif(opts.cellFormula) {\n\t\t\t\t\t\tif(ctag.formula) ctag.formula = unescapexml(ctag.formula);\n\t\t\t\t\t\tif(ctag['number-matrix-columns-spanned'] && ctag['number-matrix-rows-spanned']) {\n\t\t\t\t\t\t\tmR = parseInt(ctag['number-matrix-rows-spanned'],10) || 0;\n\t\t\t\t\t\t\tmC = parseInt(ctag['number-matrix-columns-spanned'],10) || 0;\n\t\t\t\t\t\t\tmrange = {s: {r:R,c:C}, e:{r:R + mR-1,c:C + mC-1}};\n\t\t\t\t\t\t\tq.F = encode_range(mrange);\n\t\t\t\t\t\t\tarrayf.push([mrange, q.F]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(ctag.formula) q.f = ods_to_csf_formula(ctag.formula);\n\t\t\t\t\t\telse for(i = 0; i < arrayf.length; ++i)\n\t\t\t\t\t\t\tif(R >= arrayf[i][0].s.r && R <= arrayf[i][0].e.r)\n\t\t\t\t\t\t\t\tif(C >= arrayf[i][0].s.c && C <= arrayf[i][0].e.c)\n\t\t\t\t\t\t\t\t\tq.F = arrayf[i][1];\n\t\t\t\t\t}\n\t\t\t\t\tif(ctag['number-columns-spanned'] || ctag['number-rows-spanned']) {\n\t\t\t\t\t\tmR = parseInt(ctag['number-rows-spanned'],10) || 0;\n\t\t\t\t\t\tmC = parseInt(ctag['number-columns-spanned'],10) || 0;\n\t\t\t\t\t\tmrange = {s: {r:R,c:C}, e:{r:R + mR-1,c:C + mC-1}};\n\t\t\t\t\t\tmerges.push(mrange);\n\t\t\t\t\t}\n\n\t\t\t\t\t/* 19.675.2 table:number-columns-repeated */\n\t\t\t\t\tif(ctag['number-columns-repeated']) colpeat = parseInt(ctag['number-columns-repeated'], 10);\n\n\t\t\t\t\t/* 19.385 office:value-type */\n\t\t\t\t\tswitch(q.t) {\n\t\t\t\t\t\tcase 'boolean': q.t = 'b'; q.v = parsexmlbool(ctag['boolean-value']); break;\n\t\t\t\t\t\tcase 'float': q.t = 'n'; q.v = parseFloat(ctag.value); break;\n\t\t\t\t\t\tcase 'percentage': q.t = 'n'; q.v = parseFloat(ctag.value); break;\n\t\t\t\t\t\tcase 'currency': q.t = 'n'; q.v = parseFloat(ctag.value); break;\n\t\t\t\t\t\tcase 'date': q.t = 'd'; q.v = parseDate(ctag['date-value']);\n\t\t\t\t\t\t\tif(!opts.cellDates) { q.t = 'n'; q.v = datenum(q.v); }\n\t\t\t\t\t\t\tq.z = 'm/d/yy'; break;\n\t\t\t\t\t\tcase 'time': q.t = 'n'; q.v = parse_isodur(ctag['time-value'])/86400;\n\t\t\t\t\t\t\tif(opts.cellDates) { q.t = 'd'; q.v = numdate(q.v); }\n\t\t\t\t\t\t\tq.z = 'HH:MM:SS'; break;\n\t\t\t\t\t\tcase 'number': q.t = 'n'; q.v = parseFloat(ctag['']); break;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(q.t === 'string' || q.t === 'text' || !q.t) {\n\t\t\t\t\t\t\t\tq.t = 's';\n\t\t\t\t\t\t\t\tif(ctag['string-value'] != null) { textp = unescapexml(ctag['string-value']); textR = []; }\n\t\t\t\t\t\t\t} else throw new Error('Unsupported value type ' + q.t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tisstub = false;\n\t\t\t\t\tif(q.t === 's') {\n\t\t\t\t\t\tq.v = textp || '';\n\t\t\t\t\t\tif(textR.length) q.R = textR;\n\t\t\t\t\t\tisstub = textpidx == 0;\n\t\t\t\t\t}\n\t\t\t\t\tif(atag.Target) q.l = atag;\n\t\t\t\t\tif(comments.length > 0) { q.c = comments; comments = []; }\n\t\t\t\t\tif(textp && opts.cellText !== false) q.w = textp;\n\t\t\t\t\tif(isstub) { q.t = \"z\"; delete q.v; }\n\t\t\t\t\tif(!isstub || opts.sheetStubs) {\n\t\t\t\t\t\tif(!(opts.sheetRows && opts.sheetRows <= R)) {\n\t\t\t\t\t\t\tfor(var rpt = 0; rpt < rowpeat; ++rpt) {\n\t\t\t\t\t\t\t\tcolpeat = parseInt(ctag['number-columns-repeated']||\"1\", 10);\n\t\t\t\t\t\t\t\tif(opts.dense) {\n\t\t\t\t\t\t\t\t\tif(!ws[R + rpt]) ws[R + rpt] = [];\n\t\t\t\t\t\t\t\t\tws[R + rpt][C] = rpt == 0 ? q : dup(q);\n\t\t\t\t\t\t\t\t\twhile(--colpeat > 0) ws[R + rpt][C + colpeat] = dup(q);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tws[encode_cell({r:R + rpt,c:C})] = q;\n\t\t\t\t\t\t\t\t\twhile(--colpeat > 0) ws[encode_cell({r:R + rpt,c:C + colpeat})] = dup(q);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(range.e.c <= C) range.e.c = C;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcolpeat = parseInt(ctag['number-columns-repeated']||\"1\", 10);\n\t\t\t\t\tC += colpeat-1; colpeat = 0;\n\t\t\t\t\tq = {/*:: t:\"\", v:null, z:null, w:\"\",c:[]*/};\n\t\t\t\t\ttextp = \"\"; textR = [];\n\t\t\t\t}\n\t\t\t\tatag = ({}/*:any*/);\n\t\t\t\tbreak; // 9.1.4 <table:table-cell>\n\n\t\t\t/* pure state */\n\t\t\tcase 'document': // TODO: <office:document> is the root for FODS\n\t\t\tcase 'document-content': case '': // 3.1.3.2 <office:document-content>\n\t\t\tcase 'spreadsheet': case '': // 3.7 <office:spreadsheet>\n\t\t\tcase 'scripts': // 3.12 <office:scripts>\n\t\t\tcase 'styles': // TODO <office:styles>\n\t\t\tcase 'font-face-decls': // 3.14 <office:font-face-decls>\n\t\t\tcase 'master-styles': // 3.15.4 <office:master-styles> -- relevant for FODS\n\t\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw \"Bad state: \"+tmp;}\n\t\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);\n\t\t\t\tbreak;\n\n\t\t\tcase 'annotation': // 14.1 <office:annotation>\n\t\t\t\tif(Rn[1]==='/'){\n\t\t\t\t\tif((tmp=state.pop())[0]!==Rn[3]) throw \"Bad state: \"+tmp;\n\t\t\t\t\tcomment.t = textp;\n\t\t\t\t\tif(textR.length) /*::(*/comment/*:: :any)*/.R = textR;\n\t\t\t\t\tcomment.a = creator;\n\t\t\t\t\tcomments.push(comment);\n\t\t\t\t}\n\t\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') {state.push([Rn[3], false]);}\n\t\t\t\tcreator = \"\"; creatoridx = 0;\n\t\t\t\ttextp = \"\"; textpidx = 0; textR = [];\n\t\t\t\tbreak;\n\n\t\t\tcase 'creator': // 4.3.2.7 <dc:creator>\n\t\t\t\tif(Rn[1]==='/') { creator = str.slice(creatoridx,Rn.index); }\n\t\t\t\telse creatoridx = Rn.index + Rn[0].length;\n\t\t\t\tbreak;\n\n\t\t\t/* ignore state */\n\t\t\tcase 'meta': case '': // TODO: <office:meta> <uof:> FODS/UOF\n\t\t\tcase 'settings': // TODO: <office:settings>\n\t\t\tcase 'config-item-set': // TODO: <office:config-item-set>\n\t\t\tcase 'config-item-map-indexed': // TODO: <office:config-item-map-indexed>\n\t\t\tcase 'config-item-map-entry': // TODO: <office:config-item-map-entry>\n\t\t\tcase 'config-item-map-named': // TODO: <office:config-item-map-entry>\n\t\t\tcase 'shapes': // 9.2.8 <table:shapes>\n\t\t\tcase 'frame': // 10.4.2 <draw:frame>\n\t\t\tcase 'text-box': // 10.4.3 <draw:text-box>\n\t\t\tcase 'image': // 10.4.4 <draw:image>\n\t\t\tcase 'data-pilot-tables': // 9.6.2 <table:data-pilot-tables>\n\t\t\tcase 'list-style': // 16.30 <text:list-style>\n\t\t\tcase 'form': // 13.13 <form:form>\n\t\t\tcase 'dde-links': // 9.8 <table:dde-links>\n\t\t\tcase 'event-listeners': // TODO\n\t\t\tcase 'chart': // TODO\n\t\t\t\tif(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw \"Bad state: \"+tmp;}\n\t\t\t\telse if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], false]);\n\t\t\t\ttextp = \"\"; textpidx = 0; textR = [];\n\t\t\t\tbreak;\n\n\t\t\tcase 'scientific-number': // TODO: <number:scientific-number>\n\t\t\t\tbreak;\n\t\t\tcase 'currency-symbol': // TODO: <number:currency-symbol>\n\t\t\t\tbreak;\n\t\t\tcase 'currency-style': // TODO: <number:currency-style>\n\t\t\t\tbreak;\n\t\t\tcase 'number-style': // 16.27.2 <number:number-style>\n\t\t\tcase 'percentage-style': // 16.27.9 <number:percentage-style>\n\t\t\tcase 'date-style': // 16.27.10 <number:date-style>\n\t\t\tcase 'time-style': // 16.27.18 <number:time-style>\n\t\t\t\tif(Rn[1]==='/'){\n\t\t\t\t\tnumber_format_map[NFtag.name] = NF;\n\t\t\t\t\tif((tmp=state.pop())[0]!==Rn[3]) throw \"Bad state: \"+tmp;\n\t\t\t\t} else if(Rn[0].charAt(Rn[0].length-2) !== '/') {\n\t\t\t\t\tNF = \"\";\n\t\t\t\t\tNFtag = parsexmltag(Rn[0], false);\n\t\t\t\t\tstate.push([Rn[3], true]);\n\t\t\t\t} break;\n\n\t\t\tcase 'script': break; // 3.13 <office:script>\n\t\t\tcase 'libraries': break; // TODO: <ooo:libraries>\n\t\t\tcase 'automatic-styles': break; // 3.15.3 <office:automatic-styles>\n\n\t\t\tcase 'default-style': // TODO: <style:default-style>\n\t\t\tcase 'page-layout': break; // TODO: <style:page-layout>\n\t\t\tcase 'style': // 16.2 <style:style>\n\t\t\t\tbreak;\n\t\t\tcase 'map': break; // 16.3 <style:map>\n\t\t\tcase 'font-face': break; // 16.21 <style:font-face>\n\n\t\t\tcase 'paragraph-properties': break; // 17.6 <style:paragraph-properties>\n\t\t\tcase 'table-properties': break; // 17.15 <style:table-properties>\n\t\t\tcase 'table-column-properties': break; // 17.16 <style:table-column-properties>\n\t\t\tcase 'table-row-properties': break; // 17.17 <style:table-row-properties>\n\t\t\tcase 'table-cell-properties': break; // 17.18 <style:table-cell-properties>\n\n\t\t\tcase 'number': // 16.27.3 <number:number>\n\t\t\t\tswitch(state[state.length-1][0]) {\n\t\t\t\t\tcase 'time-style':\n\t\t\t\t\tcase 'date-style':\n\t\t\t\t\t\ttag = parsexmltag(Rn[0], false);\n\t\t\t\t\t\tNF += number_formats_ods[Rn[3]][tag.style==='long'?1:0]; break;\n\t\t\t\t} break;\n\n\t\t\tcase 'fraction': break; // TODO 16.27.6 <number:fraction>\n\n\t\t\tcase 'day': // 16.27.11 <number:day>\n\t\t\tcase 'month': // 16.27.12 <number:month>\n\t\t\tcase 'year': // 16.27.13 <number:year>\n\t\t\tcase 'era': // 16.27.14 <number:era>\n\t\t\tcase 'day-of-week': // 16.27.15 <number:day-of-week>\n\t\t\tcase 'week-of-year': // 16.27.16 <number:week-of-year>\n\t\t\tcase 'quarter': // 16.27.17 <number:quarter>\n\t\t\tcase 'hours': // 16.27.19 <number:hours>\n\t\t\tcase 'minutes': // 16.27.20 <number:minutes>\n\t\t\tcase 'seconds': // 16.27.21 <number:seconds>\n\t\t\tcase 'am-pm': // 16.27.22 <number:am-pm>\n\t\t\t\tswitch(state[state.length-1][0]) {\n\t\t\t\t\tcase 'time-style':\n\t\t\t\t\tcase 'date-style':\n\t\t\t\t\t\ttag = parsexmltag(Rn[0], false);\n\t\t\t\t\t\tNF += number_formats_ods[Rn[3]][tag.style==='long'?1:0]; break;\n\t\t\t\t} break;\n\n\t\t\tcase 'boolean-style': break; // 16.27.23 <number:boolean-style>\n\t\t\tcase 'boolean': break; // 16.27.24 <number:boolean>\n\t\t\tcase 'text-style': break; // 16.27.25 <number:text-style>\n\t\t\tcase 'text': // 16.27.26 <number:text>\n\t\t\t\tif(Rn[0].slice(-2) === \"/>\") break;\n\t\t\t\telse if(Rn[1]===\"/\") switch(state[state.length-1][0]) {\n\t\t\t\t\tcase 'number-style':\n\t\t\t\t\tcase 'date-style':\n\t\t\t\t\tcase 'time-style':\n\t\t\t\t\t\tNF += str.slice(pidx, Rn.index);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse pidx = Rn.index + Rn[0].length;\n\t\t\t\tbreak;\n\n\t\t\tcase 'named-range': // 9.4.12 <table:named-range>\n\t\t\t\ttag = parsexmltag(Rn[0], false);\n\t\t\t\t_Ref = ods_to_csf_3D(tag['cell-range-address']);\n\t\t\t\tvar nrange = ({Name:tag.name, Ref:_Ref[0] + '!' + _Ref[1]}/*:any*/);\n\t\t\t\tif(intable) nrange.Sheet = SheetNames.length;\n\t\t\t\tWB.Names.push(nrange);\n\t\t\t\tbreak;\n\n\t\t\tcase 'text-content': break; // 16.27.27 <number:text-content>\n\t\t\tcase 'text-properties': break; // 16.27.27 <style:text-properties>\n\t\t\tcase 'embedded-text': break; // 16.27.4 <number:embedded-text>\n\n\t\t\tcase 'body': case '': break; // 3.3 16.9.6 19.726.3\n\n\t\t\tcase 'forms': break; // 12.25.2 13.2\n\t\t\tcase 'table-column': break; // 9.1.6 <table:table-column>\n\t\t\tcase 'table-header-rows': break; // 9.1.7 <table:table-header-rows>\n\t\t\tcase 'table-rows': break; // 9.1.12 <table:table-rows>\n\t\t\t/* TODO: outline levels */\n\t\t\tcase 'table-column-group': break; // 9.1.10 <table:table-column-group>\n\t\t\tcase 'table-header-columns': break; // 9.1.11 <table:table-header-columns>\n\t\t\tcase 'table-columns': break; // 9.1.12 <table:table-columns>\n\n\t\t\tcase 'null-date': break; // 9.4.2 <table:null-date> TODO: date1904\n\n\t\t\tcase 'graphic-properties': break; // 17.21 <style:graphic-properties>\n\t\t\tcase 'calculation-settings': break; // 9.4.1 <table:calculation-settings>\n\t\t\tcase 'named-expressions': break; // 9.4.11 <table:named-expressions>\n\t\t\tcase 'label-range': break; // 9.4.9 <table:label-range>\n\t\t\tcase 'label-ranges': break; // 9.4.10 <table:label-ranges>\n\t\t\tcase 'named-expression': break; // 9.4.13 <table:named-expression>\n\t\t\tcase 'sort': break; // 9.4.19 <table:sort>\n\t\t\tcase 'sort-by': break; // 9.4.20 <table:sort-by>\n\t\t\tcase 'sort-groups': break; // 9.4.22 <table:sort-groups>\n\n\t\t\tcase 'tab': break; // 6.1.4 <text:tab>\n\t\t\tcase 'line-break': break; // 6.1.5 <text:line-break>\n\t\t\tcase 'span': break; // 6.1.7 <text:span>\n\t\t\tcase 'p': case '': // 5.1.3 <text:p>\n\t\t\t\tif(['master-styles'].indexOf(state[state.length-1][0]) > -1) break;\n\t\t\t\tif(Rn[1]==='/' && (!ctag || !ctag['string-value'])) {\n\t\t\t\t\tvar ptp = parse_text_p(str.slice(textpidx,Rn.index), textptag);\n\t\t\t\t\ttextp = (textp.length > 0 ? textp + \"\\n\" : \"\") + ptp[0];\n\t\t\t\t} else { textptag = parsexmltag(Rn[0], false); textpidx = Rn.index + Rn[0].length; }\n\t\t\t\tbreak; // <text:p>\n\t\t\tcase 's': break; // <text:s>\n\n\t\t\tcase 'database-range': // 9.4.15 <table:database-range>\n\t\t\t\tif(Rn[1]==='/') break;\n\t\t\t\ttry {\n\t\t\t\t\t_Ref = ods_to_csf_3D(parsexmltag(Rn[0])['target-range-address']);\n\t\t\t\t\tSheets[_Ref[0]]['!autofilter'] = { ref:_Ref[1] };\n\t\t\t\t} catch(e) {/* empty */}\n\t\t\t\tbreak;\n\n\t\t\tcase 'date': break; // <*:date>\n\n\t\t\tcase 'object': break; // 10.4.6.2 <draw:object>\n\t\t\tcase 'title': case '': break; // <*:title> OR <uof:>\n\t\t\tcase 'desc': break; // <*:desc>\n\t\t\tcase 'binary-data': break; // 10.4.5 TODO: b64 blob\n\n\t\t\t/* 9.2 Advanced Tables */\n\t\t\tcase 'table-source': break; // 9.2.6\n\t\t\tcase 'scenario': break; // 9.2.6\n\n\t\t\tcase 'iteration': break; // 9.4.3 <table:iteration>\n\t\t\tcase 'content-validations': break; // 9.4.4 <table:\n\t\t\tcase 'content-validation': break; // 9.4.5 <table:\n\t\t\tcase 'help-message': break; // 9.4.6 <table:\n\t\t\tcase 'error-message': break; // 9.4.7 <table:\n\t\t\tcase 'database-ranges': break; // 9.4.14 <table:database-ranges>\n\t\t\tcase 'filter': break; // 9.5.2 <table:filter>\n\t\t\tcase 'filter-and': break; // 9.5.3 <table:filter-and>\n\t\t\tcase 'filter-or': break; // 9.5.4 <table:filter-or>\n\t\t\tcase 'filter-condition': break; // 9.5.5 <table:filter-condition>\n\n\t\t\tcase 'list-level-style-bullet': break; // 16.31 <text:\n\t\t\tcase 'list-level-style-number': break; // 16.32 <text:\n\t\t\tcase 'list-level-properties': break; // 17.19 <style:\n\n\t\t\t/* 7.3 Document Fields */\n\t\t\tcase 'sender-firstname': // 7.3.6.2\n\t\t\tcase 'sender-lastname': // 7.3.6.3\n\t\t\tcase 'sender-initials': // 7.3.6.4\n\t\t\tcase 'sender-title': // 7.3.6.5\n\t\t\tcase 'sender-position': // 7.3.6.6\n\t\t\tcase 'sender-email': // 7.3.6.7\n\t\t\tcase 'sender-phone-private': // 7.3.6.8\n\t\t\tcase 'sender-fax': // 7.3.6.9\n\t\t\tcase 'sender-company': // 7.3.6.10\n\t\t\tcase 'sender-phone-work': // 7.3.6.11\n\t\t\tcase 'sender-street': // 7.3.6.12\n\t\t\tcase 'sender-city': // 7.3.6.13\n\t\t\tcase 'sender-postal-code': // 7.3.6.14\n\t\t\tcase 'sender-country': // 7.3.6.15\n\t\t\tcase 'sender-state-or-province': // 7.3.6.16\n\t\t\tcase 'author-name': // 7.3.7.1\n\t\t\tcase 'author-initials': // 7.3.7.2\n\t\t\tcase 'chapter': // 7.3.8\n\t\t\tcase 'file-name': // 7.3.9\n\t\t\tcase 'template-name': // 7.3.9\n\t\t\tcase 'sheet-name': // 7.3.9\n\t\t\t\tbreak;\n\n\t\t\tcase 'event-listener':\n\t\t\t\tbreak;\n\t\t\t/* TODO: FODS Properties */\n\t\t\tcase 'initial-creator':\n\t\t\tcase 'creation-date':\n\t\t\tcase 'print-date':\n\t\t\tcase 'generator':\n\t\t\tcase 'document-statistic':\n\t\t\tcase 'user-defined':\n\t\t\tcase 'editing-duration':\n\t\t\tcase 'editing-cycles':\n\t\t\t\tbreak;\n\n\t\t\t/* TODO: FODS Config */\n\t\t\tcase 'config-item':\n\t\t\t\tbreak;\n\n\t\t\t/* TODO: style tokens */\n\t\t\tcase 'page-number': break; // TODO <text:page-number>\n\t\t\tcase 'page-count': break; // TODO <text:page-count>\n\t\t\tcase 'time': break; // TODO <text:time>\n\n\t\t\t/* 9.3 Advanced Table Cells */\n\t\t\tcase 'cell-range-source': break; // 9.3.1 <table:\n\t\t\tcase 'detective': break; // 9.3.2 <table:\n\t\t\tcase 'operation': break; // 9.3.3 <table:\n\t\t\tcase 'highlighted-range': break; // 9.3.4 <table:\n\n\t\t\t/* 9.6 Data Pilot Tables <table: */\n\t\t\tcase 'data-pilot-table': // 9.6.3\n\t\t\tcase 'source-cell-range': // 9.6.5\n\t\t\tcase 'source-service': // 9.6.6\n\t\t\tcase 'data-pilot-field': // 9.6.7\n\t\t\tcase 'data-pilot-level': // 9.6.8\n\t\t\tcase 'data-pilot-subtotals': // 9.6.9\n\t\t\tcase 'data-pilot-subtotal': // 9.6.10\n\t\t\tcase 'data-pilot-members': // 9.6.11\n\t\t\tcase 'data-pilot-member': // 9.6.12\n\t\t\tcase 'data-pilot-display-info': // 9.6.13\n\t\t\tcase 'data-pilot-sort-info': // 9.6.14\n\t\t\tcase 'data-pilot-layout-info': // 9.6.15\n\t\t\tcase 'data-pilot-field-reference': // 9.6.16\n\t\t\tcase 'data-pilot-groups': // 9.6.17\n\t\t\tcase 'data-pilot-group': // 9.6.18\n\t\t\tcase 'data-pilot-group-member': // 9.6.19\n\t\t\t\tbreak;\n\n\t\t\t/* 10.3 Drawing Shapes */\n\t\t\tcase 'rect': // 10.3.2\n\t\t\t\tbreak;\n\n\t\t\t/* 14.6 DDE Connections */\n\t\t\tcase 'dde-connection-decls': // 14.6.2 <text:\n\t\t\tcase 'dde-connection-decl': // 14.6.3 <text:\n\t\t\tcase 'dde-link': // 14.6.4 <table:\n\t\t\tcase 'dde-source': // 14.6.5 <office:\n\t\t\t\tbreak;\n\n\t\t\tcase 'properties': break; // 13.7 <form:properties>\n\t\t\tcase 'property': break; // 13.8 <form:property>\n\n\t\t\tcase 'a': // 6.1.8 hyperlink\n\t\t\t\tif(Rn[1]!== '/') {\n\t\t\t\t\tatag = parsexmltag(Rn[0], false);\n\t\t\t\t\tif(!atag.href) break;\n\t\t\t\t\tatag.Target = unescapexml(atag.href); delete atag.href;\n\t\t\t\t\tif(atag.Target.charAt(0) == \"#\" && atag.Target.indexOf(\".\") > -1) {\n\t\t\t\t\t\t_Ref = ods_to_csf_3D(atag.Target.slice(1));\n\t\t\t\t\t\tatag.Target = \"#\" + _Ref[0] + \"!\" + _Ref[1];\n\t\t\t\t\t} else if(atag.Target.match(/^\\.\\.[\\\\\\/]/)) atag.Target = atag.Target.slice(3);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t/* non-standard */\n\t\t\tcase 'table-protection': break;\n\t\t\tcase 'data-pilot-grand-total': break; // <table:\n\t\t\tcase 'office-document-common-attrs': break; // bare\n\t\t\tdefault: switch(Rn[2]) {\n\t\t\t\tcase 'dc:':       // TODO: properties\n\t\t\t\tcase 'calcext:':  // ignore undocumented extensions\n\t\t\t\tcase 'loext:':    // ignore undocumented extensions\n\t\t\t\tcase 'ooo:':      // ignore undocumented extensions\n\t\t\t\tcase 'chartooo:': // ignore undocumented extensions\n\t\t\t\tcase 'draw:':     // TODO: drawing\n\t\t\t\tcase 'style:':    // TODO: styles\n\t\t\t\tcase 'chart:':    // TODO: charts\n\t\t\t\tcase 'form:':     // TODO: forms\n\t\t\t\tcase 'uof:':      // TODO: uof\n\t\t\t\tcase ':':       // TODO: uof\n\t\t\t\tcase ':':       // TODO: uof\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: if(opts.WTF) throw new Error(Rn);\n\t\t\t}\n\t\t}\n\t\tvar out/*:Workbook*/ = ({\n\t\t\tSheets: Sheets,\n\t\t\tSheetNames: SheetNames,\n\t\t\tWorkbook: WB\n\t\t}/*:any*/);\n\t\tif(opts.bookSheets) delete /*::(*/out/*:: :any)*/.Sheets;\n\t\treturn out;\n}\n\nfunction parse_ods(zip/*:ZIPFile*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\topts = opts || ({}/*:any*/);\n\tif(safegetzipfile(zip, 'META-INF/manifest.xml')) parse_manifest(getzipdata(zip, 'META-INF/manifest.xml'), opts);\n\tvar content = getzipstr(zip, 'content.xml');\n\tif(!content) throw new Error(\"Missing content.xml in ODS / UOF file\");\n\tvar wb = parse_content_xml(utf8read(content), opts);\n\tif(safegetzipfile(zip, 'meta.xml')) wb.Props = parse_core_props(getzipdata(zip, 'meta.xml'));\n\treturn wb;\n}\nfunction parse_fods(data/*:string*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\treturn parse_content_xml(data, opts);\n}\n\n/* OpenDocument */\nvar write_styles_ods/*:{(wb:any, opts:any):string}*/ = /* @__PURE__ */(function() {\n\tvar master_styles = [\n\t\t'<office:master-styles>',\n\t\t\t'<style:master-page style:name=\"mp1\" style:page-layout-name=\"mp1\">',\n\t\t\t\t'<style:header/>',\n\t\t\t\t'<style:header-left style:display=\"false\"/>',\n\t\t\t\t'<style:footer/>',\n\t\t\t\t'<style:footer-left style:display=\"false\"/>',\n\t\t\t'</style:master-page>',\n\t\t'</office:master-styles>'\n\t].join(\"\");\n\n\tvar payload = '<office:document-styles ' + wxt_helper({\n\t\t'xmlns:office':   \"urn:oasis:names:tc:opendocument:xmlns:office:1.0\",\n\t\t'xmlns:table':    \"urn:oasis:names:tc:opendocument:xmlns:table:1.0\",\n\t\t'xmlns:style':    \"urn:oasis:names:tc:opendocument:xmlns:style:1.0\",\n\t\t'xmlns:text':     \"urn:oasis:names:tc:opendocument:xmlns:text:1.0\",\n\t\t'xmlns:draw':     \"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0\",\n\t\t'xmlns:fo':       \"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0\",\n\t\t'xmlns:xlink':    \"http://www.w3.org/1999/xlink\",\n\t\t'xmlns:dc':       \"http://purl.org/dc/elements/1.1/\",\n\t\t'xmlns:number':   \"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0\",\n\t\t'xmlns:svg':      \"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0\",\n\t\t'xmlns:of':       \"urn:oasis:names:tc:opendocument:xmlns:of:1.2\",\n\t\t'office:version': \"1.2\"\n\t}) + '>' + master_styles + '</office:document-styles>';\n\n\treturn function wso(/*::wb, opts*/) {\n\t\treturn XML_HEADER + payload;\n\t};\n})();\nvar write_content_ods/*:{(wb:any, opts:any):string}*/ = /* @__PURE__ */(function() {\n\t/* 6.1.2 White Space Characters */\n\tvar write_text_p = function(text/*:string*/)/*:string*/ {\n\t\treturn escapexml(text)\n\t\t\t.replace(/  +/g, function($$){return '<text:s text:c=\"'+$$.length+'\"/>';})\n\t\t\t.replace(/\\t/g, \"<text:tab/>\")\n\t\t\t.replace(/\\n/g, \"</text:p><text:p>\")\n\t\t\t.replace(/^ /, \"<text:s/>\").replace(/ $/, \"<text:s/>\");\n\t};\n\n\tvar null_cell_xml = '          <table:table-cell />\\n';\n\tvar covered_cell_xml = '          <table:covered-table-cell/>\\n';\n\tvar write_ws = function(ws, wb/*:Workbook*/, i/*:number*//*::, opts*/)/*:string*/ {\n\t\t/* Section 9 Tables */\n\t\tvar o/*:Array<string>*/ = [];\n\t\to.push('      <table:table table:name=\"' + escapexml(wb.SheetNames[i]) + '\" table:style-name=\"ta1\">\\n');\n\t\tvar R=0,C=0, range = decode_range(ws['!ref']||\"A1\");\n\t\tvar marr/*:Array<Range>*/ = ws['!merges'] || [], mi = 0;\n\t\tvar dense = Array.isArray(ws);\n\t\tif(ws[\"!cols\"]) {\n\t\t\tfor(C = 0; C <= range.e.c; ++C) o.push('        <table:table-column' + (ws[\"!cols\"][C] ? ' table:style-name=\"co' + ws[\"!cols\"][C].ods + '\"' : '') + '></table:table-column>\\n');\n\t\t}\n\t\tvar H = \"\", ROWS = ws[\"!rows\"]||[];\n\t\tfor(R = 0; R < range.s.r; ++R) {\n\t\t\tH = ROWS[R] ? ' table:style-name=\"ro' + ROWS[R].ods + '\"' : \"\";\n\t\t\to.push('        <table:table-row' + H + '></table:table-row>\\n');\n\t\t}\n\t\tfor(; R <= range.e.r; ++R) {\n\t\t\tH = ROWS[R] ? ' table:style-name=\"ro' + ROWS[R].ods + '\"' : \"\";\n\t\t\to.push('        <table:table-row' + H + '>\\n');\n\t\t\tfor(C=0; C < range.s.c; ++C) o.push(null_cell_xml);\n\t\t\tfor(; C <= range.e.c; ++C) {\n\t\t\t\tvar skip = false, ct = {}, textp = \"\";\n\t\t\t\tfor(mi = 0; mi != marr.length; ++mi) {\n\t\t\t\t\tif(marr[mi].s.c > C) continue;\n\t\t\t\t\tif(marr[mi].s.r > R) continue;\n\t\t\t\t\tif(marr[mi].e.c < C) continue;\n\t\t\t\t\tif(marr[mi].e.r < R) continue;\n\t\t\t\t\tif(marr[mi].s.c != C || marr[mi].s.r != R) skip = true;\n\t\t\t\t\tct['table:number-columns-spanned'] = (marr[mi].e.c - marr[mi].s.c + 1);\n\t\t\t\t\tct['table:number-rows-spanned'] =    (marr[mi].e.r - marr[mi].s.r + 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(skip) { o.push(covered_cell_xml); continue; }\n\t\t\t\tvar ref = encode_cell({r:R, c:C}), cell = dense ? (ws[R]||[])[C]: ws[ref];\n\t\t\t\tif(cell && cell.f) {\n\t\t\t\t\tct['table:formula'] = escapexml(csf_to_ods_formula(cell.f));\n\t\t\t\t\tif(cell.F) {\n\t\t\t\t\t\tif(cell.F.slice(0, ref.length) == ref) {\n\t\t\t\t\t\t\tvar _Fref = decode_range(cell.F);\n\t\t\t\t\t\t\tct['table:number-matrix-columns-spanned'] = (_Fref.e.c - _Fref.s.c + 1);\n\t\t\t\t\t\t\tct['table:number-matrix-rows-spanned'] =    (_Fref.e.r - _Fref.s.r + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!cell) { o.push(null_cell_xml); continue; }\n\t\t\t\tswitch(cell.t) {\n\t\t\t\t\tcase 'b':\n\t\t\t\t\t\ttextp = (cell.v ? 'TRUE' : 'FALSE');\n\t\t\t\t\t\tct['office:value-type'] = \"boolean\";\n\t\t\t\t\t\tct['office:boolean-value'] = (cell.v ? 'true' : 'false');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'n':\n\t\t\t\t\t\ttextp = (cell.w||String(cell.v||0));\n\t\t\t\t\t\tct['office:value-type'] = \"float\";\n\t\t\t\t\t\tct['office:value'] = (cell.v||0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 's': case 'str':\n\t\t\t\t\t\ttextp = cell.v == null ? \"\" : cell.v;\n\t\t\t\t\t\tct['office:value-type'] = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\ttextp = (cell.w||(parseDate(cell.v).toISOString()));\n\t\t\t\t\t\tct['office:value-type'] = \"date\";\n\t\t\t\t\t\tct['office:date-value'] = (parseDate(cell.v).toISOString());\n\t\t\t\t\t\tct['table:style-name'] = \"ce1\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t//case 'e':\n\t\t\t\t\tdefault: o.push(null_cell_xml); continue;\n\t\t\t\t}\n\t\t\t\tvar text_p = write_text_p(textp);\n\t\t\t\tif(cell.l && cell.l.Target) {\n\t\t\t\t\tvar _tgt = cell.l.Target;\n\t\t\t\t\t_tgt = _tgt.charAt(0) == \"#\" ? \"#\" + csf_to_ods_3D(_tgt.slice(1)) : _tgt;\n\t\t\t\t\t// TODO: choose correct parent path format based on link delimiters\n\t\t\t\t\tif(_tgt.charAt(0) != \"#\" && !_tgt.match(/^\\w+:/)) _tgt = '../' + _tgt;\n\t\t\t\t\ttext_p = writextag('text:a', text_p, {'xlink:href': _tgt.replace(/&/g, \"&amp;\")});\n\t\t\t\t}\n\t\t\t\to.push('          ' + writextag('table:table-cell', writextag('text:p', text_p, {}), ct) + '\\n');\n\t\t\t}\n\t\t\to.push('        </table:table-row>\\n');\n\t\t}\n\t\to.push('      </table:table>\\n');\n\t\treturn o.join(\"\");\n\t};\n\n\tvar write_automatic_styles_ods = function(o/*:Array<string>*/, wb) {\n\t\to.push(' <office:automatic-styles>\\n');\n\n\t\to.push('  <number:date-style style:name=\"N37\" number:automatic-order=\"true\">\\n');\n\t\to.push('   <number:month number:style=\"long\"/>\\n');\n\t\to.push('   <number:text>/</number:text>\\n');\n\t\to.push('   <number:day number:style=\"long\"/>\\n');\n\t\to.push('   <number:text>/</number:text>\\n');\n\t\to.push('   <number:year/>\\n');\n\t\to.push('  </number:date-style>\\n');\n\n\t\t/* column styles */\n\t\tvar cidx = 0;\n\t\twb.SheetNames.map(function(n) { return wb.Sheets[n]; }).forEach(function(ws) {\n\t\t\tif(!ws) return;\n\t\t\tif(ws[\"!cols\"]) {\n\t\t\t\tfor(var C = 0; C < ws[\"!cols\"].length; ++C) if(ws[\"!cols\"][C]) {\n\t\t\t\t\tvar colobj = ws[\"!cols\"][C];\n\t\t\t\t\tif(colobj.width == null && colobj.wpx == null && colobj.wch == null) continue;\n\t\t\t\t\tprocess_col(colobj);\n\t\t\t\t\tcolobj.ods = cidx;\n\t\t\t\t\tvar w = ws[\"!cols\"][C].wpx + \"px\";\n\t\t\t\t\to.push('  <style:style style:name=\"co' + cidx + '\" style:family=\"table-column\">\\n');\n\t\t\t\t\to.push('   <style:table-column-properties fo:break-before=\"auto\" style:column-width=\"' + w + '\"/>\\n');\n\t\t\t\t\to.push('  </style:style>\\n');\n\t\t\t\t\t++cidx;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/* row styles */\n\t\tvar ridx = 0;\n\t\twb.SheetNames.map(function(n) { return wb.Sheets[n]; }).forEach(function(ws) {\n\t\t\tif(!ws) return;\n\t\t\tif(ws[\"!rows\"]) {\n\t\t\t\tfor(var R = 0; R < ws[\"!rows\"].length; ++R) if(ws[\"!rows\"][R]) {\n\t\t\t\t\tws[\"!rows\"][R].ods = ridx;\n\t\t\t\t\tvar h = ws[\"!rows\"][R].hpx + \"px\";\n\t\t\t\t\to.push('  <style:style style:name=\"ro' + ridx + '\" style:family=\"table-row\">\\n');\n\t\t\t\t\to.push('   <style:table-row-properties fo:break-before=\"auto\" style:row-height=\"' + h + '\"/>\\n');\n\t\t\t\t\to.push('  </style:style>\\n');\n\t\t\t\t\t++ridx;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/* table */\n\t\to.push('  <style:style style:name=\"ta1\" style:family=\"table\" style:master-page-name=\"mp1\">\\n');\n\t\to.push('   <style:table-properties table:display=\"true\" style:writing-mode=\"lr-tb\"/>\\n');\n\t\to.push('  </style:style>\\n');\n\n\t\t/* table cells, text */\n\t\to.push('  <style:style style:name=\"ce1\" style:family=\"table-cell\" style:parent-style-name=\"Default\" style:data-style-name=\"N37\"/>\\n');\n\n\t\t/* page-layout */\n\n\t\to.push(' </office:automatic-styles>\\n');\n\t};\n\n\treturn function wcx(wb, opts) {\n\t\tvar o = [XML_HEADER];\n\t\t/* 3.1.3.2 */\n\t\tvar attr = wxt_helper({\n\t\t\t'xmlns:office':       \"urn:oasis:names:tc:opendocument:xmlns:office:1.0\",\n\t\t\t'xmlns:table':        \"urn:oasis:names:tc:opendocument:xmlns:table:1.0\",\n\t\t\t'xmlns:style':        \"urn:oasis:names:tc:opendocument:xmlns:style:1.0\",\n\t\t\t'xmlns:text':         \"urn:oasis:names:tc:opendocument:xmlns:text:1.0\",\n\t\t\t'xmlns:draw':         \"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0\",\n\t\t\t'xmlns:fo':           \"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0\",\n\t\t\t'xmlns:xlink':        \"http://www.w3.org/1999/xlink\",\n\t\t\t'xmlns:dc':           \"http://purl.org/dc/elements/1.1/\",\n\t\t\t'xmlns:meta':         \"urn:oasis:names:tc:opendocument:xmlns:meta:1.0\",\n\t\t\t'xmlns:number':       \"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0\",\n\t\t\t'xmlns:presentation': \"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0\",\n\t\t\t'xmlns:svg':          \"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0\",\n\t\t\t'xmlns:chart':        \"urn:oasis:names:tc:opendocument:xmlns:chart:1.0\",\n\t\t\t'xmlns:dr3d':         \"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0\",\n\t\t\t'xmlns:math':         \"http://www.w3.org/1998/Math/MathML\",\n\t\t\t'xmlns:form':         \"urn:oasis:names:tc:opendocument:xmlns:form:1.0\",\n\t\t\t'xmlns:script':       \"urn:oasis:names:tc:opendocument:xmlns:script:1.0\",\n\t\t\t'xmlns:ooo':          \"http://openoffice.org/2004/office\",\n\t\t\t'xmlns:ooow':         \"http://openoffice.org/2004/writer\",\n\t\t\t'xmlns:oooc':         \"http://openoffice.org/2004/calc\",\n\t\t\t'xmlns:dom':          \"http://www.w3.org/2001/xml-events\",\n\t\t\t'xmlns:xforms':       \"http://www.w3.org/2002/xforms\",\n\t\t\t'xmlns:xsd':          \"http://www.w3.org/2001/XMLSchema\",\n\t\t\t'xmlns:xsi':          \"http://www.w3.org/2001/XMLSchema-instance\",\n\t\t\t'xmlns:sheet':        \"urn:oasis:names:tc:opendocument:sh33tjs:1.0\",\n\t\t\t'xmlns:rpt':          \"http://openoffice.org/2005/report\",\n\t\t\t'xmlns:of':           \"urn:oasis:names:tc:opendocument:xmlns:of:1.2\",\n\t\t\t'xmlns:xhtml':        \"http://www.w3.org/1999/xhtml\",\n\t\t\t'xmlns:grddl':        \"http://www.w3.org/2003/g/data-view#\",\n\t\t\t'xmlns:tableooo':     \"http://openoffice.org/2009/table\",\n\t\t\t'xmlns:drawooo':      \"http://openoffice.org/2010/draw\",\n\t\t\t'xmlns:calcext':      \"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0\",\n\t\t\t'xmlns:loext':        \"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0\",\n\t\t\t'xmlns:field':        \"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0\",\n\t\t\t'xmlns:formx':        \"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0\",\n\t\t\t'xmlns:css3t':        \"http://www.w3.org/TR/css3-text/\",\n\t\t\t'office:version':     \"1.2\"\n\t\t});\n\n\t\tvar fods = wxt_helper({\n\t\t\t'xmlns:config':    \"urn:oasis:names:tc:opendocument:xmlns:config:1.0\",\n\t\t\t'office:mimetype': \"application/vnd.oasis.opendocument.spreadsheet\"\n\t\t});\n\n\t\tif(opts.bookType == \"fods\") {\n\t\t\to.push('<office:document' + attr + fods + '>\\n');\n\t\t\to.push(write_meta_ods().replace(/office:document-meta/g, \"office:meta\"));\n\t\t\t// TODO: settings (equiv of settings.xml for ODS)\n\t\t} else o.push('<office:document-content' + attr  + '>\\n');\n\t\t// o.push('  <office:scripts/>\\n');\n\t\twrite_automatic_styles_ods(o, wb);\n\t\to.push('  <office:body>\\n');\n\t\to.push('    <office:spreadsheet>\\n');\n\t\tfor(var i = 0; i != wb.SheetNames.length; ++i) o.push(write_ws(wb.Sheets[wb.SheetNames[i]], wb, i, opts));\n\t\to.push('    </office:spreadsheet>\\n');\n\t\to.push('  </office:body>\\n');\n\t\tif(opts.bookType == \"fods\") o.push('</office:document>');\n\t\telse o.push('</office:document-content>');\n\t\treturn o.join(\"\");\n\t};\n})();\n\nfunction write_ods(wb/*:any*/, opts/*:any*/) {\n\tif(opts.bookType == \"fods\") return write_content_ods(wb, opts);\n\n\tvar zip = zip_new();\n\tvar f = \"\";\n\n\tvar manifest/*:Array<Array<string> >*/ = [];\n\tvar rdf/*:Array<[string, string]>*/ = [];\n\n\t/* Part 3 Section 3.3 MIME Media Type */\n\tf = \"mimetype\";\n\tzip_add_file(zip, f, \"application/vnd.oasis.opendocument.spreadsheet\");\n\n\t/* Part 1 Section 2.2 Documents */\n\tf = \"content.xml\";\n\tzip_add_file(zip, f, write_content_ods(wb, opts));\n\tmanifest.push([f, \"text/xml\"]);\n\trdf.push([f, \"ContentFile\"]);\n\n\t/* TODO: these are hard-coded styles to satiate excel */\n\tf = \"styles.xml\";\n\tzip_add_file(zip, f, write_styles_ods(wb, opts));\n\tmanifest.push([f, \"text/xml\"]);\n\trdf.push([f, \"StylesFile\"]);\n\n\t/* TODO: this is hard-coded to satiate excel */\n\tf = \"meta.xml\";\n\tzip_add_file(zip, f, XML_HEADER + write_meta_ods(/*::wb, opts*/));\n\tmanifest.push([f, \"text/xml\"]);\n\trdf.push([f, \"MetadataFile\"]);\n\n\t/* Part 3 Section 6 Metadata Manifest File */\n\tf = \"manifest.rdf\";\n\tzip_add_file(zip, f, write_rdf(rdf/*, opts*/));\n\tmanifest.push([f, \"application/rdf+xml\"]);\n\n\t/* Part 3 Section 4 Manifest File */\n\tf = \"META-INF/manifest.xml\";\n\tzip_add_file(zip, f, write_manifest(manifest/*, opts*/));\n\n\treturn zip;\n}\n\n/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */\nfunction u8_to_dataview(array) {\n  return new DataView(array.buffer, array.byteOffset, array.byteLength);\n}\nfunction u8str(u8) {\n  return typeof TextDecoder != \"undefined\" ? new TextDecoder().decode(u8) : utf8read(a2s(u8));\n}\nfunction stru8(str) {\n  return typeof TextEncoder != \"undefined\" ? new TextEncoder().encode(str) : s2a(utf8write(str));\n}\nfunction u8contains(body, search) {\n  outer:\n    for (var L = 0; L <= body.length - search.length; ++L) {\n      for (var j = 0; j < search.length; ++j)\n        if (body[L + j] != search[j])\n          continue outer;\n      return true;\n    }\n  return false;\n}\nfunction u8concat(u8a) {\n  var len = u8a.reduce(function(acc, x) {\n    return acc + x.length;\n  }, 0);\n  var out = new Uint8Array(len);\n  var off = 0;\n  u8a.forEach(function(u8) {\n    out.set(u8, off);\n    off += u8.length;\n  });\n  return out;\n}\nfunction popcnt(x) {\n  x -= x >> 1 & 1431655765;\n  x = (x & 858993459) + (x >> 2 & 858993459);\n  return (x + (x >> 4) & 252645135) * 16843009 >>> 24;\n}\nfunction readDecimal128LE(buf, offset) {\n  var exp = (buf[offset + 15] & 127) << 7 | buf[offset + 14] >> 1;\n  var mantissa = buf[offset + 14] & 1;\n  for (var j = offset + 13; j >= offset; --j)\n    mantissa = mantissa * 256 + buf[j];\n  return (buf[offset + 15] & 128 ? -mantissa : mantissa) * Math.pow(10, exp - 6176);\n}\nfunction writeDecimal128LE(buf, offset, value) {\n  var exp = Math.floor(value == 0 ? 0 : Math.LOG10E * Math.log(Math.abs(value))) + 6176 - 20;\n  var mantissa = value / Math.pow(10, exp - 6176);\n  buf[offset + 15] |= exp >> 7;\n  buf[offset + 14] |= (exp & 127) << 1;\n  for (var i = 0; mantissa >= 1; ++i, mantissa /= 256)\n    buf[offset + i] = mantissa & 255;\n  buf[offset + 15] |= value >= 0 ? 0 : 128;\n}\nfunction parse_varint49(buf, ptr) {\n  var l = ptr ? ptr[0] : 0;\n  var usz = buf[l] & 127;\n  varint:\n    if (buf[l++] >= 128) {\n      usz |= (buf[l] & 127) << 7;\n      if (buf[l++] < 128)\n        break varint;\n      usz |= (buf[l] & 127) << 14;\n      if (buf[l++] < 128)\n        break varint;\n      usz |= (buf[l] & 127) << 21;\n      if (buf[l++] < 128)\n        break varint;\n      usz += (buf[l] & 127) * Math.pow(2, 28);\n      ++l;\n      if (buf[l++] < 128)\n        break varint;\n      usz += (buf[l] & 127) * Math.pow(2, 35);\n      ++l;\n      if (buf[l++] < 128)\n        break varint;\n      usz += (buf[l] & 127) * Math.pow(2, 42);\n      ++l;\n      if (buf[l++] < 128)\n        break varint;\n    }\n  if (ptr)\n    ptr[0] = l;\n  return usz;\n}\nfunction write_varint49(v) {\n  var usz = new Uint8Array(7);\n  usz[0] = v & 127;\n  var L = 1;\n  sz:\n    if (v > 127) {\n      usz[L - 1] |= 128;\n      usz[L] = v >> 7 & 127;\n      ++L;\n      if (v <= 16383)\n        break sz;\n      usz[L - 1] |= 128;\n      usz[L] = v >> 14 & 127;\n      ++L;\n      if (v <= 2097151)\n        break sz;\n      usz[L - 1] |= 128;\n      usz[L] = v >> 21 & 127;\n      ++L;\n      if (v <= 268435455)\n        break sz;\n      usz[L - 1] |= 128;\n      usz[L] = v / 256 >>> 21 & 127;\n      ++L;\n      if (v <= 34359738367)\n        break sz;\n      usz[L - 1] |= 128;\n      usz[L] = v / 65536 >>> 21 & 127;\n      ++L;\n      if (v <= 4398046511103)\n        break sz;\n      usz[L - 1] |= 128;\n      usz[L] = v / 16777216 >>> 21 & 127;\n      ++L;\n    }\n  return usz.slice(0, L);\n}\nfunction varint_to_i32(buf) {\n  var l = 0, i32 = buf[l] & 127;\n  varint:\n    if (buf[l++] >= 128) {\n      i32 |= (buf[l] & 127) << 7;\n      if (buf[l++] < 128)\n        break varint;\n      i32 |= (buf[l] & 127) << 14;\n      if (buf[l++] < 128)\n        break varint;\n      i32 |= (buf[l] & 127) << 21;\n      if (buf[l++] < 128)\n        break varint;\n      i32 |= (buf[l] & 127) << 28;\n    }\n  return i32;\n}\nfunction parse_shallow(buf) {\n  var out = [], ptr = [0];\n  while (ptr[0] < buf.length) {\n    var off = ptr[0];\n    var num = parse_varint49(buf, ptr);\n    var type = num & 7;\n    num = Math.floor(num / 8);\n    var len = 0;\n    var res;\n    if (num == 0)\n      break;\n    switch (type) {\n      case 0:\n        {\n          var l = ptr[0];\n          while (buf[ptr[0]++] >= 128)\n            ;\n          res = buf.slice(l, ptr[0]);\n        }\n        break;\n      case 5:\n        len = 4;\n        res = buf.slice(ptr[0], ptr[0] + len);\n        ptr[0] += len;\n        break;\n      case 1:\n        len = 8;\n        res = buf.slice(ptr[0], ptr[0] + len);\n        ptr[0] += len;\n        break;\n      case 2:\n        len = parse_varint49(buf, ptr);\n        res = buf.slice(ptr[0], ptr[0] + len);\n        ptr[0] += len;\n        break;\n      case 3:\n      case 4:\n      default:\n        throw new Error(\"PB Type \".concat(type, \" for Field \").concat(num, \" at offset \").concat(off));\n    }\n    var v = { data: res, type: type };\n    if (out[num] == null)\n      out[num] = [v];\n    else\n      out[num].push(v);\n  }\n  return out;\n}\nfunction write_shallow(proto) {\n  var out = [];\n  proto.forEach(function(field, idx) {\n    field.forEach(function(item) {\n      if (!item.data)\n        return;\n      out.push(write_varint49(idx * 8 + item.type));\n      if (item.type == 2)\n        out.push(write_varint49(item.data.length));\n      out.push(item.data);\n    });\n  });\n  return u8concat(out);\n}\nfunction mappa(data, cb) {\n  return (data == null ? void 0 : data.map(function(d) {\n    return cb(d.data);\n  })) || [];\n}\nfunction parse_iwa_file(buf) {\n  var _a;\n  var out = [], ptr = [0];\n  while (ptr[0] < buf.length) {\n    var len = parse_varint49(buf, ptr);\n    var ai = parse_shallow(buf.slice(ptr[0], ptr[0] + len));\n    ptr[0] += len;\n    var res = {\n      id: varint_to_i32(ai[1][0].data),\n      messages: []\n    };\n    ai[2].forEach(function(b) {\n      var mi = parse_shallow(b.data);\n      var fl = varint_to_i32(mi[3][0].data);\n      res.messages.push({\n        meta: mi,\n        data: buf.slice(ptr[0], ptr[0] + fl)\n      });\n      ptr[0] += fl;\n    });\n    if ((_a = ai[3]) == null ? void 0 : _a[0])\n      res.merge = varint_to_i32(ai[3][0].data) >>> 0 > 0;\n    out.push(res);\n  }\n  return out;\n}\nfunction write_iwa_file(ias) {\n  var bufs = [];\n  ias.forEach(function(ia) {\n    var ai = [];\n    ai[1] = [{ data: write_varint49(ia.id), type: 0 }];\n    ai[2] = [];\n    if (ia.merge != null)\n      ai[3] = [{ data: write_varint49(+!!ia.merge), type: 0 }];\n    var midata = [];\n    ia.messages.forEach(function(mi) {\n      midata.push(mi.data);\n      mi.meta[3] = [{ type: 0, data: write_varint49(mi.data.length) }];\n      ai[2].push({ data: write_shallow(mi.meta), type: 2 });\n    });\n    var aipayload = write_shallow(ai);\n    bufs.push(write_varint49(aipayload.length));\n    bufs.push(aipayload);\n    midata.forEach(function(mid) {\n      return bufs.push(mid);\n    });\n  });\n  return u8concat(bufs);\n}\nfunction parse_snappy_chunk(type, buf) {\n  if (type != 0)\n    throw new Error(\"Unexpected Snappy chunk type \".concat(type));\n  var ptr = [0];\n  var usz = parse_varint49(buf, ptr);\n  var chunks = [];\n  while (ptr[0] < buf.length) {\n    var tag = buf[ptr[0]] & 3;\n    if (tag == 0) {\n      var len = buf[ptr[0]++] >> 2;\n      if (len < 60)\n        ++len;\n      else {\n        var c = len - 59;\n        len = buf[ptr[0]];\n        if (c > 1)\n          len |= buf[ptr[0] + 1] << 8;\n        if (c > 2)\n          len |= buf[ptr[0] + 2] << 16;\n        if (c > 3)\n          len |= buf[ptr[0] + 3] << 24;\n        len >>>= 0;\n        len++;\n        ptr[0] += c;\n      }\n      chunks.push(buf.slice(ptr[0], ptr[0] + len));\n      ptr[0] += len;\n      continue;\n    } else {\n      var offset = 0, length = 0;\n      if (tag == 1) {\n        length = (buf[ptr[0]] >> 2 & 7) + 4;\n        offset = (buf[ptr[0]++] & 224) << 3;\n        offset |= buf[ptr[0]++];\n      } else {\n        length = (buf[ptr[0]++] >> 2) + 1;\n        if (tag == 2) {\n          offset = buf[ptr[0]] | buf[ptr[0] + 1] << 8;\n          ptr[0] += 2;\n        } else {\n          offset = (buf[ptr[0]] | buf[ptr[0] + 1] << 8 | buf[ptr[0] + 2] << 16 | buf[ptr[0] + 3] << 24) >>> 0;\n          ptr[0] += 4;\n        }\n      }\n      chunks = [u8concat(chunks)];\n      if (offset == 0)\n        throw new Error(\"Invalid offset 0\");\n      if (offset > chunks[0].length)\n        throw new Error(\"Invalid offset beyond length\");\n      if (length >= offset) {\n        chunks.push(chunks[0].slice(-offset));\n        length -= offset;\n        while (length >= chunks[chunks.length - 1].length) {\n          chunks.push(chunks[chunks.length - 1]);\n          length -= chunks[chunks.length - 1].length;\n        }\n      }\n      chunks.push(chunks[0].slice(-offset, -offset + length));\n    }\n  }\n  var o = u8concat(chunks);\n  if (o.length != usz)\n    throw new Error(\"Unexpected length: \".concat(o.length, \" != \").concat(usz));\n  return o;\n}\nfunction decompress_iwa_file(buf) {\n  var out = [];\n  var l = 0;\n  while (l < buf.length) {\n    var t = buf[l++];\n    var len = buf[l] | buf[l + 1] << 8 | buf[l + 2] << 16;\n    l += 3;\n    out.push(parse_snappy_chunk(t, buf.slice(l, l + len)));\n    l += len;\n  }\n  if (l !== buf.length)\n    throw new Error(\"data is not a valid framed stream!\");\n  return u8concat(out);\n}\nfunction compress_iwa_file(buf) {\n  var out = [];\n  var l = 0;\n  while (l < buf.length) {\n    var c = Math.min(buf.length - l, 268435455);\n    var frame = new Uint8Array(4);\n    out.push(frame);\n    var usz = write_varint49(c);\n    var L = usz.length;\n    out.push(usz);\n    if (c <= 60) {\n      L++;\n      out.push(new Uint8Array([c - 1 << 2]));\n    } else if (c <= 256) {\n      L += 2;\n      out.push(new Uint8Array([240, c - 1 & 255]));\n    } else if (c <= 65536) {\n      L += 3;\n      out.push(new Uint8Array([244, c - 1 & 255, c - 1 >> 8 & 255]));\n    } else if (c <= 16777216) {\n      L += 4;\n      out.push(new Uint8Array([248, c - 1 & 255, c - 1 >> 8 & 255, c - 1 >> 16 & 255]));\n    } else if (c <= 4294967296) {\n      L += 5;\n      out.push(new Uint8Array([252, c - 1 & 255, c - 1 >> 8 & 255, c - 1 >> 16 & 255, c - 1 >>> 24 & 255]));\n    }\n    out.push(buf.slice(l, l + c));\n    L += c;\n    frame[0] = 0;\n    frame[1] = L & 255;\n    frame[2] = L >> 8 & 255;\n    frame[3] = L >> 16 & 255;\n    l += c;\n  }\n  return u8concat(out);\n}\nfunction parse_old_storage(buf, sst, rsst, v) {\n  var dv = u8_to_dataview(buf);\n  var flags = dv.getUint32(4, true);\n  var data_offset = (v > 1 ? 12 : 8) + popcnt(flags & (v > 1 ? 3470 : 398)) * 4;\n  var ridx = -1, sidx = -1, ieee = NaN, dt = new Date(2001, 0, 1);\n  if (flags & 512) {\n    ridx = dv.getUint32(data_offset, true);\n    data_offset += 4;\n  }\n  data_offset += popcnt(flags & (v > 1 ? 12288 : 4096)) * 4;\n  if (flags & 16) {\n    sidx = dv.getUint32(data_offset, true);\n    data_offset += 4;\n  }\n  if (flags & 32) {\n    ieee = dv.getFloat64(data_offset, true);\n    data_offset += 8;\n  }\n  if (flags & 64) {\n    dt.setTime(dt.getTime() + dv.getFloat64(data_offset, true) * 1e3);\n    data_offset += 8;\n  }\n  var ret;\n  switch (buf[2]) {\n    case 0:\n      break;\n    case 2:\n      ret = { t: \"n\", v: ieee };\n      break;\n    case 3:\n      ret = { t: \"s\", v: sst[sidx] };\n      break;\n    case 5:\n      ret = { t: \"d\", v: dt };\n      break;\n    case 6:\n      ret = { t: \"b\", v: ieee > 0 };\n      break;\n    case 7:\n      ret = { t: \"n\", v: ieee / 86400 };\n      break;\n    case 8:\n      ret = { t: \"e\", v: 0 };\n      break;\n    case 9:\n      {\n        if (ridx > -1)\n          ret = { t: \"s\", v: rsst[ridx] };\n        else if (sidx > -1)\n          ret = { t: \"s\", v: sst[sidx] };\n        else if (!isNaN(ieee))\n          ret = { t: \"n\", v: ieee };\n        else\n          throw new Error(\"Unsupported cell type \".concat(buf.slice(0, 4)));\n      }\n      break;\n    default:\n      throw new Error(\"Unsupported cell type \".concat(buf.slice(0, 4)));\n  }\n  return ret;\n}\nfunction parse_new_storage(buf, sst, rsst) {\n  var dv = u8_to_dataview(buf);\n  var flags = dv.getUint32(8, true);\n  var data_offset = 12;\n  var ridx = -1, sidx = -1, d128 = NaN, ieee = NaN, dt = new Date(2001, 0, 1);\n  if (flags & 1) {\n    d128 = readDecimal128LE(buf, data_offset);\n    data_offset += 16;\n  }\n  if (flags & 2) {\n    ieee = dv.getFloat64(data_offset, true);\n    data_offset += 8;\n  }\n  if (flags & 4) {\n    dt.setTime(dt.getTime() + dv.getFloat64(data_offset, true) * 1e3);\n    data_offset += 8;\n  }\n  if (flags & 8) {\n    sidx = dv.getUint32(data_offset, true);\n    data_offset += 4;\n  }\n  if (flags & 16) {\n    ridx = dv.getUint32(data_offset, true);\n    data_offset += 4;\n  }\n  var ret;\n  switch (buf[1]) {\n    case 0:\n      break;\n    case 2:\n      ret = { t: \"n\", v: d128 };\n      break;\n    case 3:\n      ret = { t: \"s\", v: sst[sidx] };\n      break;\n    case 5:\n      ret = { t: \"d\", v: dt };\n      break;\n    case 6:\n      ret = { t: \"b\", v: ieee > 0 };\n      break;\n    case 7:\n      ret = { t: \"n\", v: ieee / 86400 };\n      break;\n    case 8:\n      ret = { t: \"e\", v: 0 };\n      break;\n    case 9:\n      {\n        if (ridx > -1)\n          ret = { t: \"s\", v: rsst[ridx] };\n        else\n          throw new Error(\"Unsupported cell type \".concat(buf[1], \" : \").concat(flags & 31, \" : \").concat(buf.slice(0, 4)));\n      }\n      break;\n    case 10:\n      ret = { t: \"n\", v: d128 };\n      break;\n    default:\n      throw new Error(\"Unsupported cell type \".concat(buf[1], \" : \").concat(flags & 31, \" : \").concat(buf.slice(0, 4)));\n  }\n  return ret;\n}\nfunction write_new_storage(cell, sst) {\n  var out = new Uint8Array(32), dv = u8_to_dataview(out), l = 12, flags = 0;\n  out[0] = 5;\n  switch (cell.t) {\n    case \"n\":\n      out[1] = 2;\n      writeDecimal128LE(out, l, cell.v);\n      flags |= 1;\n      l += 16;\n      break;\n    case \"b\":\n      out[1] = 6;\n      dv.setFloat64(l, cell.v ? 1 : 0, true);\n      flags |= 2;\n      l += 8;\n      break;\n    case \"s\":\n      if (sst.indexOf(cell.v) == -1)\n        throw new Error(\"Value \".concat(cell.v, \" missing from SST!\"));\n      out[1] = 3;\n      dv.setUint32(l, sst.indexOf(cell.v), true);\n      flags |= 8;\n      l += 4;\n      break;\n    default:\n      throw \"unsupported cell type \" + cell.t;\n  }\n  dv.setUint32(8, flags, true);\n  return out.slice(0, l);\n}\nfunction write_old_storage(cell, sst) {\n  var out = new Uint8Array(32), dv = u8_to_dataview(out), l = 12, flags = 0;\n  out[0] = 3;\n  switch (cell.t) {\n    case \"n\":\n      out[2] = 2;\n      dv.setFloat64(l, cell.v, true);\n      flags |= 32;\n      l += 8;\n      break;\n    case \"b\":\n      out[2] = 6;\n      dv.setFloat64(l, cell.v ? 1 : 0, true);\n      flags |= 32;\n      l += 8;\n      break;\n    case \"s\":\n      if (sst.indexOf(cell.v) == -1)\n        throw new Error(\"Value \".concat(cell.v, \" missing from SST!\"));\n      out[2] = 3;\n      dv.setUint32(l, sst.indexOf(cell.v), true);\n      flags |= 16;\n      l += 4;\n      break;\n    default:\n      throw \"unsupported cell type \" + cell.t;\n  }\n  dv.setUint32(4, flags, true);\n  return out.slice(0, l);\n}\nfunction parse_cell_storage(buf, sst, rsst) {\n  switch (buf[0]) {\n    case 0:\n    case 1:\n    case 2:\n    case 3:\n      return parse_old_storage(buf, sst, rsst, buf[0]);\n    case 5:\n      return parse_new_storage(buf, sst, rsst);\n    default:\n      throw new Error(\"Unsupported payload version \".concat(buf[0]));\n  }\n}\nfunction parse_TSP_Reference(buf) {\n  var pb = parse_shallow(buf);\n  return parse_varint49(pb[1][0].data);\n}\nfunction write_TSP_Reference(idx) {\n  var out = [];\n  out[1] = [{ type: 0, data: write_varint49(idx) }];\n  return write_shallow(out);\n}\nfunction parse_TST_TableDataList(M, root) {\n  var pb = parse_shallow(root.data);\n  var type = varint_to_i32(pb[1][0].data);\n  var entries = pb[3];\n  var data = [];\n  (entries || []).forEach(function(entry) {\n    var le = parse_shallow(entry.data);\n    var key = varint_to_i32(le[1][0].data) >>> 0;\n    switch (type) {\n      case 1:\n        data[key] = u8str(le[3][0].data);\n        break;\n      case 8:\n        {\n          var rt = M[parse_TSP_Reference(le[9][0].data)][0];\n          var rtp = parse_shallow(rt.data);\n          var rtpref = M[parse_TSP_Reference(rtp[1][0].data)][0];\n          var mtype = varint_to_i32(rtpref.meta[1][0].data);\n          if (mtype != 2001)\n            throw new Error(\"2000 unexpected reference to \".concat(mtype));\n          var tswpsa = parse_shallow(rtpref.data);\n          data[key] = tswpsa[3].map(function(x) {\n            return u8str(x.data);\n          }).join(\"\");\n        }\n        break;\n    }\n  });\n  return data;\n}\nfunction parse_TST_TileRowInfo(u8, type) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n  var pb = parse_shallow(u8);\n  var R = varint_to_i32(pb[1][0].data) >>> 0;\n  var cnt = varint_to_i32(pb[2][0].data) >>> 0;\n  var wide_offsets = ((_b = (_a = pb[8]) == null ? void 0 : _a[0]) == null ? void 0 : _b.data) && varint_to_i32(pb[8][0].data) > 0 || false;\n  var used_storage_u8, used_storage;\n  if (((_d = (_c = pb[7]) == null ? void 0 : _c[0]) == null ? void 0 : _d.data) && type != 0) {\n    used_storage_u8 = (_f = (_e = pb[7]) == null ? void 0 : _e[0]) == null ? void 0 : _f.data;\n    used_storage = (_h = (_g = pb[6]) == null ? void 0 : _g[0]) == null ? void 0 : _h.data;\n  } else if (((_j = (_i = pb[4]) == null ? void 0 : _i[0]) == null ? void 0 : _j.data) && type != 1) {\n    used_storage_u8 = (_l = (_k = pb[4]) == null ? void 0 : _k[0]) == null ? void 0 : _l.data;\n    used_storage = (_n = (_m = pb[3]) == null ? void 0 : _m[0]) == null ? void 0 : _n.data;\n  } else\n    throw \"NUMBERS Tile missing \".concat(type, \" cell storage\");\n  var width = wide_offsets ? 4 : 1;\n  var used_storage_offsets = u8_to_dataview(used_storage_u8);\n  var offsets = [];\n  for (var C = 0; C < used_storage_u8.length / 2; ++C) {\n    var off = used_storage_offsets.getUint16(C * 2, true);\n    if (off < 65535)\n      offsets.push([C, off]);\n  }\n  if (offsets.length != cnt)\n    throw \"Expected \".concat(cnt, \" cells, found \").concat(offsets.length);\n  var cells = [];\n  for (C = 0; C < offsets.length - 1; ++C)\n    cells[offsets[C][0]] = used_storage.subarray(offsets[C][1] * width, offsets[C + 1][1] * width);\n  if (offsets.length >= 1)\n    cells[offsets[offsets.length - 1][0]] = used_storage.subarray(offsets[offsets.length - 1][1] * width);\n  return { R: R, cells: cells };\n}\nfunction parse_TST_Tile(M, root) {\n  var _a;\n  var pb = parse_shallow(root.data);\n  var storage = ((_a = pb == null ? void 0 : pb[7]) == null ? void 0 : _a[0]) ? varint_to_i32(pb[7][0].data) >>> 0 > 0 ? 1 : 0 : -1;\n  var ri = mappa(pb[5], function(u8) {\n    return parse_TST_TileRowInfo(u8, storage);\n  });\n  return {\n    nrows: varint_to_i32(pb[4][0].data) >>> 0,\n    data: ri.reduce(function(acc, x) {\n      if (!acc[x.R])\n        acc[x.R] = [];\n      x.cells.forEach(function(cell, C) {\n        if (acc[x.R][C])\n          throw new Error(\"Duplicate cell r=\".concat(x.R, \" c=\").concat(C));\n        acc[x.R][C] = cell;\n      });\n      return acc;\n    }, [])\n  };\n}\nfunction parse_TST_TableModelArchive(M, root, ws) {\n  var _a;\n  var pb = parse_shallow(root.data);\n  var range = { s: { r: 0, c: 0 }, e: { r: 0, c: 0 } };\n  range.e.r = (varint_to_i32(pb[6][0].data) >>> 0) - 1;\n  if (range.e.r < 0)\n    throw new Error(\"Invalid row varint \".concat(pb[6][0].data));\n  range.e.c = (varint_to_i32(pb[7][0].data) >>> 0) - 1;\n  if (range.e.c < 0)\n    throw new Error(\"Invalid col varint \".concat(pb[7][0].data));\n  ws[\"!ref\"] = encode_range(range);\n  var store = parse_shallow(pb[4][0].data);\n  var sst = parse_TST_TableDataList(M, M[parse_TSP_Reference(store[4][0].data)][0]);\n  var rsst = ((_a = store[17]) == null ? void 0 : _a[0]) ? parse_TST_TableDataList(M, M[parse_TSP_Reference(store[17][0].data)][0]) : [];\n  var tile = parse_shallow(store[3][0].data);\n  var _R = 0;\n  tile[1].forEach(function(t) {\n    var tl = parse_shallow(t.data);\n    var ref = M[parse_TSP_Reference(tl[2][0].data)][0];\n    var mtype = varint_to_i32(ref.meta[1][0].data);\n    if (mtype != 6002)\n      throw new Error(\"6001 unexpected reference to \".concat(mtype));\n    var _tile = parse_TST_Tile(M, ref);\n    _tile.data.forEach(function(row, R) {\n      row.forEach(function(buf, C) {\n        var addr = encode_cell({ r: _R + R, c: C });\n        var res = parse_cell_storage(buf, sst, rsst);\n        if (res)\n          ws[addr] = res;\n      });\n    });\n    _R += _tile.nrows;\n  });\n}\nfunction parse_TST_TableInfoArchive(M, root) {\n  var pb = parse_shallow(root.data);\n  var out = { \"!ref\": \"A1\" };\n  var tableref = M[parse_TSP_Reference(pb[2][0].data)];\n  var mtype = varint_to_i32(tableref[0].meta[1][0].data);\n  if (mtype != 6001)\n    throw new Error(\"6000 unexpected reference to \".concat(mtype));\n  parse_TST_TableModelArchive(M, tableref[0], out);\n  return out;\n}\nfunction parse_TN_SheetArchive(M, root) {\n  var _a;\n  var pb = parse_shallow(root.data);\n  var out = {\n    name: ((_a = pb[1]) == null ? void 0 : _a[0]) ? u8str(pb[1][0].data) : \"\",\n    sheets: []\n  };\n  var shapeoffs = mappa(pb[2], parse_TSP_Reference);\n  shapeoffs.forEach(function(off) {\n    M[off].forEach(function(m) {\n      var mtype = varint_to_i32(m.meta[1][0].data);\n      if (mtype == 6e3)\n        out.sheets.push(parse_TST_TableInfoArchive(M, m));\n    });\n  });\n  return out;\n}\nfunction parse_TN_DocumentArchive(M, root) {\n  var out = book_new();\n  var pb = parse_shallow(root.data);\n  var sheetoffs = mappa(pb[1], parse_TSP_Reference);\n  sheetoffs.forEach(function(off) {\n    M[off].forEach(function(m) {\n      var mtype = varint_to_i32(m.meta[1][0].data);\n      if (mtype == 2) {\n        var root2 = parse_TN_SheetArchive(M, m);\n        root2.sheets.forEach(function(sheet, idx) {\n          book_append_sheet(out, sheet, idx == 0 ? root2.name : root2.name + \"_\" + idx, true);\n        });\n      }\n    });\n  });\n  if (out.SheetNames.length == 0)\n    throw new Error(\"Empty NUMBERS file\");\n  return out;\n}\nfunction parse_numbers_iwa(cfb) {\n  var _a, _b, _c, _d;\n  var M = {}, indices = [];\n  cfb.FullPaths.forEach(function(p) {\n    if (p.match(/\\.iwpv2/))\n      throw new Error(\"Unsupported password protection\");\n  });\n  cfb.FileIndex.forEach(function(s) {\n    if (!s.name.match(/\\.iwa$/))\n      return;\n    var o;\n    try {\n      o = decompress_iwa_file(s.content);\n    } catch (e) {\n      return console.log(\"?? \" + s.content.length + \" \" + (e.message || e));\n    }\n    var packets;\n    try {\n      packets = parse_iwa_file(o);\n    } catch (e) {\n      return console.log(\"## \" + (e.message || e));\n    }\n    packets.forEach(function(packet) {\n      M[packet.id] = packet.messages;\n      indices.push(packet.id);\n    });\n  });\n  if (!indices.length)\n    throw new Error(\"File has no messages\");\n  var docroot = ((_d = (_c = (_b = (_a = M == null ? void 0 : M[1]) == null ? void 0 : _a[0]) == null ? void 0 : _b.meta) == null ? void 0 : _c[1]) == null ? void 0 : _d[0].data) && varint_to_i32(M[1][0].meta[1][0].data) == 1 && M[1][0];\n  if (!docroot)\n    indices.forEach(function(idx) {\n      M[idx].forEach(function(iwam) {\n        var mtype = varint_to_i32(iwam.meta[1][0].data) >>> 0;\n        if (mtype == 1) {\n          if (!docroot)\n            docroot = iwam;\n          else\n            throw new Error(\"Document has multiple roots\");\n        }\n      });\n    });\n  if (!docroot)\n    throw new Error(\"Cannot find Document root\");\n  return parse_TN_DocumentArchive(M, docroot);\n}\nfunction write_tile_row(tri, data, SST) {\n  var _a, _b, _c, _d;\n  if (!((_a = tri[6]) == null ? void 0 : _a[0]) || !((_b = tri[7]) == null ? void 0 : _b[0]))\n    throw \"Mutation only works on post-BNC storages!\";\n  var wide_offsets = ((_d = (_c = tri[8]) == null ? void 0 : _c[0]) == null ? void 0 : _d.data) && varint_to_i32(tri[8][0].data) > 0 || false;\n  if (wide_offsets)\n    throw \"Math only works with normal offsets\";\n  var cnt = 0;\n  var dv = u8_to_dataview(tri[7][0].data), last_offset = 0, cell_storage = [];\n  var _dv = u8_to_dataview(tri[4][0].data), _last_offset = 0, _cell_storage = [];\n  for (var C = 0; C < data.length; ++C) {\n    if (data[C] == null) {\n      dv.setUint16(C * 2, 65535, true);\n      _dv.setUint16(C * 2, 65535);\n      continue;\n    }\n    dv.setUint16(C * 2, last_offset, true);\n    _dv.setUint16(C * 2, _last_offset, true);\n    var celload, _celload;\n    switch (typeof data[C]) {\n      case \"string\":\n        celload = write_new_storage({ t: \"s\", v: data[C] }, SST);\n        _celload = write_old_storage({ t: \"s\", v: data[C] }, SST);\n        break;\n      case \"number\":\n        celload = write_new_storage({ t: \"n\", v: data[C] }, SST);\n        _celload = write_old_storage({ t: \"n\", v: data[C] }, SST);\n        break;\n      case \"boolean\":\n        celload = write_new_storage({ t: \"b\", v: data[C] }, SST);\n        _celload = write_old_storage({ t: \"b\", v: data[C] }, SST);\n        break;\n      default:\n        throw new Error(\"Unsupported value \" + data[C]);\n    }\n    cell_storage.push(celload);\n    last_offset += celload.length;\n    _cell_storage.push(_celload);\n    _last_offset += _celload.length;\n    ++cnt;\n  }\n  tri[2][0].data = write_varint49(cnt);\n  for (; C < tri[7][0].data.length / 2; ++C) {\n    dv.setUint16(C * 2, 65535, true);\n    _dv.setUint16(C * 2, 65535, true);\n  }\n  tri[6][0].data = u8concat(cell_storage);\n  tri[3][0].data = u8concat(_cell_storage);\n  return cnt;\n}\nfunction write_numbers_iwa(wb, opts) {\n  if (!opts || !opts.numbers)\n    throw new Error(\"Must pass a `numbers` option -- check the README\");\n  var ws = wb.Sheets[wb.SheetNames[0]];\n  if (wb.SheetNames.length > 1)\n    console.error(\"The Numbers writer currently writes only the first table\");\n  var range = decode_range(ws[\"!ref\"]);\n  range.s.r = range.s.c = 0;\n  var trunc = false;\n  if (range.e.c > 9) {\n    trunc = true;\n    range.e.c = 9;\n  }\n  if (range.e.r > 49) {\n    trunc = true;\n    range.e.r = 49;\n  }\n  if (trunc)\n    console.error(\"The Numbers writer is currently limited to \".concat(encode_range(range)));\n  var data = sheet_to_json(ws, { range: range, header: 1 });\n  var SST = [\"~Sh33tJ5~\"];\n  data.forEach(function(row) {\n    return row.forEach(function(cell) {\n      if (typeof cell == \"string\")\n        SST.push(cell);\n    });\n  });\n  var dependents = {};\n  var indices = [];\n  var cfb = CFB.read(opts.numbers, { type: \"base64\" });\n  cfb.FileIndex.map(function(fi, idx) {\n    return [fi, cfb.FullPaths[idx]];\n  }).forEach(function(row) {\n    var fi = row[0], fp = row[1];\n    if (fi.type != 2)\n      return;\n    if (!fi.name.match(/\\.iwa/))\n      return;\n    var old_content = fi.content;\n    var raw1 = decompress_iwa_file(old_content);\n    var x2 = parse_iwa_file(raw1);\n    x2.forEach(function(packet2) {\n      indices.push(packet2.id);\n      dependents[packet2.id] = { deps: [], location: fp, type: varint_to_i32(packet2.messages[0].meta[1][0].data) };\n    });\n  });\n  indices.sort(function(x2, y2) {\n    return x2 - y2;\n  });\n  var indices_varint = indices.filter(function(x2) {\n    return x2 > 1;\n  }).map(function(x2) {\n    return [x2, write_varint49(x2)];\n  });\n  cfb.FileIndex.map(function(fi, idx) {\n    return [fi, cfb.FullPaths[idx]];\n  }).forEach(function(row) {\n    var fi = row[0], fp = row[1];\n    if (!fi.name.match(/\\.iwa/))\n      return;\n    var x2 = parse_iwa_file(decompress_iwa_file(fi.content));\n    x2.forEach(function(ia) {\n      ia.messages.forEach(function(m) {\n        indices_varint.forEach(function(ivi) {\n          if (ia.messages.some(function(mess) {\n            return varint_to_i32(mess.meta[1][0].data) != 11006 && u8contains(mess.data, ivi[1]);\n          })) {\n            dependents[ivi[0]].deps.push(ia.id);\n          }\n        });\n      });\n    });\n  });\n  function get_unique_msgid() {\n    for (var i = 927262; i < 2e6; ++i)\n      if (!dependents[i])\n        return i;\n    throw new Error(\"Too many messages\");\n  }\n  var entry = CFB.find(cfb, dependents[1].location);\n  var x = parse_iwa_file(decompress_iwa_file(entry.content));\n  var docroot;\n  for (var xi = 0; xi < x.length; ++xi) {\n    var packet = x[xi];\n    if (packet.id == 1)\n      docroot = packet;\n  }\n  var sheetrootref = parse_TSP_Reference(parse_shallow(docroot.messages[0].data)[1][0].data);\n  entry = CFB.find(cfb, dependents[sheetrootref].location);\n  x = parse_iwa_file(decompress_iwa_file(entry.content));\n  for (xi = 0; xi < x.length; ++xi) {\n    packet = x[xi];\n    if (packet.id == sheetrootref)\n      docroot = packet;\n  }\n  sheetrootref = parse_TSP_Reference(parse_shallow(docroot.messages[0].data)[2][0].data);\n  entry = CFB.find(cfb, dependents[sheetrootref].location);\n  x = parse_iwa_file(decompress_iwa_file(entry.content));\n  for (xi = 0; xi < x.length; ++xi) {\n    packet = x[xi];\n    if (packet.id == sheetrootref)\n      docroot = packet;\n  }\n  sheetrootref = parse_TSP_Reference(parse_shallow(docroot.messages[0].data)[2][0].data);\n  entry = CFB.find(cfb, dependents[sheetrootref].location);\n  x = parse_iwa_file(decompress_iwa_file(entry.content));\n  for (xi = 0; xi < x.length; ++xi) {\n    packet = x[xi];\n    if (packet.id == sheetrootref)\n      docroot = packet;\n  }\n  var pb = parse_shallow(docroot.messages[0].data);\n  {\n    pb[6][0].data = write_varint49(range.e.r + 1);\n    pb[7][0].data = write_varint49(range.e.c + 1);\n    var cruidsref = parse_TSP_Reference(pb[46][0].data);\n    var oldbucket = CFB.find(cfb, dependents[cruidsref].location);\n    var _x = parse_iwa_file(decompress_iwa_file(oldbucket.content));\n    {\n      for (var j = 0; j < _x.length; ++j) {\n        if (_x[j].id == cruidsref)\n          break;\n      }\n      if (_x[j].id != cruidsref)\n        throw \"Bad ColumnRowUIDMapArchive\";\n      var cruids = parse_shallow(_x[j].messages[0].data);\n      cruids[1] = [];\n      cruids[2] = [], cruids[3] = [];\n      for (var C = 0; C <= range.e.c; ++C) {\n        var uuid = [];\n        uuid[1] = uuid[2] = [{ type: 0, data: write_varint49(C + 420690) }];\n        cruids[1].push({ type: 2, data: write_shallow(uuid) });\n        cruids[2].push({ type: 0, data: write_varint49(C) });\n        cruids[3].push({ type: 0, data: write_varint49(C) });\n      }\n      cruids[4] = [];\n      cruids[5] = [], cruids[6] = [];\n      for (var R = 0; R <= range.e.r; ++R) {\n        uuid = [];\n        uuid[1] = uuid[2] = [{ type: 0, data: write_varint49(R + 726270) }];\n        cruids[4].push({ type: 2, data: write_shallow(uuid) });\n        cruids[5].push({ type: 0, data: write_varint49(R) });\n        cruids[6].push({ type: 0, data: write_varint49(R) });\n      }\n      _x[j].messages[0].data = write_shallow(cruids);\n    }\n    oldbucket.content = compress_iwa_file(write_iwa_file(_x));\n    oldbucket.size = oldbucket.content.length;\n    delete pb[46];\n    var store = parse_shallow(pb[4][0].data);\n    {\n      store[7][0].data = write_varint49(range.e.r + 1);\n      var row_headers = parse_shallow(store[1][0].data);\n      var row_header_ref = parse_TSP_Reference(row_headers[2][0].data);\n      oldbucket = CFB.find(cfb, dependents[row_header_ref].location);\n      _x = parse_iwa_file(decompress_iwa_file(oldbucket.content));\n      {\n        if (_x[0].id != row_header_ref)\n          throw \"Bad HeaderStorageBucket\";\n        var base_bucket = parse_shallow(_x[0].messages[0].data);\n        for (R = 0; R < data.length; ++R) {\n          var _bucket = parse_shallow(base_bucket[2][0].data);\n          _bucket[1][0].data = write_varint49(R);\n          _bucket[4][0].data = write_varint49(data[R].length);\n          base_bucket[2][R] = { type: base_bucket[2][0].type, data: write_shallow(_bucket) };\n        }\n        _x[0].messages[0].data = write_shallow(base_bucket);\n      }\n      oldbucket.content = compress_iwa_file(write_iwa_file(_x));\n      oldbucket.size = oldbucket.content.length;\n      var col_header_ref = parse_TSP_Reference(store[2][0].data);\n      oldbucket = CFB.find(cfb, dependents[col_header_ref].location);\n      _x = parse_iwa_file(decompress_iwa_file(oldbucket.content));\n      {\n        if (_x[0].id != col_header_ref)\n          throw \"Bad HeaderStorageBucket\";\n        base_bucket = parse_shallow(_x[0].messages[0].data);\n        for (C = 0; C <= range.e.c; ++C) {\n          _bucket = parse_shallow(base_bucket[2][0].data);\n          _bucket[1][0].data = write_varint49(C);\n          _bucket[4][0].data = write_varint49(range.e.r + 1);\n          base_bucket[2][C] = { type: base_bucket[2][0].type, data: write_shallow(_bucket) };\n        }\n        _x[0].messages[0].data = write_shallow(base_bucket);\n      }\n      oldbucket.content = compress_iwa_file(write_iwa_file(_x));\n      oldbucket.size = oldbucket.content.length;\n      var sstref = parse_TSP_Reference(store[4][0].data);\n      (function() {\n        var sentry = CFB.find(cfb, dependents[sstref].location);\n        var sx = parse_iwa_file(decompress_iwa_file(sentry.content));\n        var sstroot;\n        for (var sxi = 0; sxi < sx.length; ++sxi) {\n          var packet2 = sx[sxi];\n          if (packet2.id == sstref)\n            sstroot = packet2;\n        }\n        var sstdata = parse_shallow(sstroot.messages[0].data);\n        {\n          sstdata[3] = [];\n          var newsst = [];\n          SST.forEach(function(str, i) {\n            newsst[1] = [{ type: 0, data: write_varint49(i) }];\n            newsst[2] = [{ type: 0, data: write_varint49(1) }];\n            newsst[3] = [{ type: 2, data: stru8(str) }];\n            sstdata[3].push({ type: 2, data: write_shallow(newsst) });\n          });\n        }\n        sstroot.messages[0].data = write_shallow(sstdata);\n        var sy = write_iwa_file(sx);\n        var raw32 = compress_iwa_file(sy);\n        sentry.content = raw32;\n        sentry.size = sentry.content.length;\n      })();\n      var tile = parse_shallow(store[3][0].data);\n      {\n        var t = tile[1][0];\n        delete tile[2];\n        var tl = parse_shallow(t.data);\n        {\n          var tileref = parse_TSP_Reference(tl[2][0].data);\n          (function() {\n            var tentry = CFB.find(cfb, dependents[tileref].location);\n            var tx = parse_iwa_file(decompress_iwa_file(tentry.content));\n            var tileroot;\n            for (var sxi = 0; sxi < tx.length; ++sxi) {\n              var packet2 = tx[sxi];\n              if (packet2.id == tileref)\n                tileroot = packet2;\n            }\n            var tiledata = parse_shallow(tileroot.messages[0].data);\n            {\n              delete tiledata[6];\n              delete tile[7];\n              var rowload = new Uint8Array(tiledata[5][0].data);\n              tiledata[5] = [];\n              var cnt = 0;\n              for (var R2 = 0; R2 <= range.e.r; ++R2) {\n                var tilerow = parse_shallow(rowload);\n                cnt += write_tile_row(tilerow, data[R2], SST);\n                tilerow[1][0].data = write_varint49(R2);\n                tiledata[5].push({ data: write_shallow(tilerow), type: 2 });\n              }\n              tiledata[1] = [{ type: 0, data: write_varint49(range.e.c + 1) }];\n              tiledata[2] = [{ type: 0, data: write_varint49(range.e.r + 1) }];\n              tiledata[3] = [{ type: 0, data: write_varint49(cnt) }];\n              tiledata[4] = [{ type: 0, data: write_varint49(range.e.r + 1) }];\n            }\n            tileroot.messages[0].data = write_shallow(tiledata);\n            var ty = write_iwa_file(tx);\n            var raw32 = compress_iwa_file(ty);\n            tentry.content = raw32;\n            tentry.size = tentry.content.length;\n          })();\n        }\n        t.data = write_shallow(tl);\n      }\n      store[3][0].data = write_shallow(tile);\n    }\n    pb[4][0].data = write_shallow(store);\n  }\n  docroot.messages[0].data = write_shallow(pb);\n  var y = write_iwa_file(x);\n  var raw3 = compress_iwa_file(y);\n  entry.content = raw3;\n  entry.size = entry.content.length;\n  return cfb;\n}\nfunction fix_opts_func(defaults/*:Array<Array<any> >*/)/*:{(o:any):void}*/ {\n\treturn function fix_opts(opts) {\n\t\tfor(var i = 0; i != defaults.length; ++i) {\n\t\t\tvar d = defaults[i];\n\t\t\tif(opts[d[0]] === undefined) opts[d[0]] = d[1];\n\t\t\tif(d[2] === 'n') opts[d[0]] = Number(opts[d[0]]);\n\t\t}\n\t};\n}\n\nfunction fix_read_opts(opts) {\nfix_opts_func([\n\t['cellNF', false], /* emit cell number format string as .z */\n\t['cellHTML', true], /* emit html string as .h */\n\t['cellFormula', true], /* emit formulae as .f */\n\t['cellStyles', false], /* emits style/theme as .s */\n\t['cellText', true], /* emit formatted text as .w */\n\t['cellDates', false], /* emit date cells with type `d` */\n\n\t['sheetStubs', false], /* emit empty cells */\n\t['sheetRows', 0, 'n'], /* read n rows (0 = read all rows) */\n\n\t['bookDeps', false], /* parse calculation chains */\n\t['bookSheets', false], /* only try to get sheet names (no Sheets) */\n\t['bookProps', false], /* only try to get properties (no Sheets) */\n\t['bookFiles', false], /* include raw file structure (keys, files, cfb) */\n\t['bookVBA', false], /* include vba raw data (vbaraw) */\n\n\t['password',''], /* password */\n\t['WTF', false] /* WTF mode (throws errors) */\n])(opts);\n}\n\nfunction fix_write_opts(opts) {\nfix_opts_func([\n\t['cellDates', false], /* write date cells with type `d` */\n\n\t['bookSST', false], /* Generate Shared String Table */\n\n\t['bookType', 'xlsx'], /* Type of workbook (xlsx/m/b) */\n\n\t['compression', false], /* Use file compression */\n\n\t['WTF', false] /* WTF mode (throws errors) */\n])(opts);\n}\nfunction get_sheet_type(n/*:string*/)/*:string*/ {\n\tif(RELS.WS.indexOf(n) > -1) return \"sheet\";\n\tif(RELS.CS && n == RELS.CS) return \"chart\";\n\tif(RELS.DS && n == RELS.DS) return \"dialog\";\n\tif(RELS.MS && n == RELS.MS) return \"macro\";\n\treturn (n && n.length) ? n : \"sheet\";\n}\nfunction safe_parse_wbrels(wbrels, sheets) {\n\tif(!wbrels) return 0;\n\ttry {\n\t\twbrels = sheets.map(function pwbr(w) { if(!w.id) w.id = w.strRelID; return [w.name, wbrels['!id'][w.id].Target, get_sheet_type(wbrels['!id'][w.id].Type)]; });\n\t} catch(e) { return null; }\n\treturn !wbrels || wbrels.length === 0 ? null : wbrels;\n}\n\nfunction safe_parse_sheet(zip, path/*:string*/, relsPath/*:string*/, sheet, idx/*:number*/, sheetRels, sheets, stype/*:string*/, opts, wb, themes, styles) {\n\ttry {\n\t\tsheetRels[sheet]=parse_rels(getzipstr(zip, relsPath, true), path);\n\t\tvar data = getzipdata(zip, path);\n\t\tvar _ws;\n\t\tswitch(stype) {\n\t\t\tcase 'sheet':  _ws = parse_ws(data, path, idx, opts, sheetRels[sheet], wb, themes, styles); break;\n\t\t\tcase 'chart':  _ws = parse_cs(data, path, idx, opts, sheetRels[sheet], wb, themes, styles);\n\t\t\t\tif(!_ws || !_ws['!drawel']) break;\n\t\t\t\tvar dfile = resolve_path(_ws['!drawel'].Target, path);\n\t\t\t\tvar drelsp = get_rels_path(dfile);\n\t\t\t\tvar draw = parse_drawing(getzipstr(zip, dfile, true), parse_rels(getzipstr(zip, drelsp, true), dfile));\n\t\t\t\tvar chartp = resolve_path(draw, dfile);\n\t\t\t\tvar crelsp = get_rels_path(chartp);\n\t\t\t\t_ws = parse_chart(getzipstr(zip, chartp, true), chartp, opts, parse_rels(getzipstr(zip, crelsp, true), chartp), wb, _ws);\n\t\t\t\tbreak;\n\t\t\tcase 'macro':  _ws = parse_ms(data, path, idx, opts, sheetRels[sheet], wb, themes, styles); break;\n\t\t\tcase 'dialog': _ws = parse_ds(data, path, idx, opts, sheetRels[sheet], wb, themes, styles); break;\n\t\t\tdefault: throw new Error(\"Unrecognized sheet type \" + stype);\n\t\t}\n\t\tsheets[sheet] = _ws;\n\n\t\t/* scan rels for comments and threaded comments */\n\t\tvar tcomments = [];\n\t\tif(sheetRels && sheetRels[sheet]) keys(sheetRels[sheet]).forEach(function(n) {\n\t\t\tvar dfile = \"\";\n\t\t\tif(sheetRels[sheet][n].Type == RELS.CMNT) {\n\t\t\t\tdfile = resolve_path(sheetRels[sheet][n].Target, path);\n\t\t\t\tvar comments = parse_cmnt(getzipdata(zip, dfile, true), dfile, opts);\n\t\t\t\tif(!comments || !comments.length) return;\n\t\t\t\tsheet_insert_comments(_ws, comments, false);\n\t\t\t}\n\t\t\tif(sheetRels[sheet][n].Type == RELS.TCMNT) {\n\t\t\t\tdfile = resolve_path(sheetRels[sheet][n].Target, path);\n\t\t\t\ttcomments = tcomments.concat(parse_tcmnt_xml(getzipdata(zip, dfile, true), opts));\n\t\t\t}\n\t\t});\n\t\tif(tcomments && tcomments.length) sheet_insert_comments(_ws, tcomments, true, opts.people || []);\n\t} catch(e) { if(opts.WTF) throw e; }\n}\n\nfunction strip_front_slash(x/*:string*/)/*:string*/ { return x.charAt(0) == '/' ? x.slice(1) : x; }\n\nfunction parse_zip(zip/*:ZIP*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\tmake_ssf();\n\topts = opts || {};\n\tfix_read_opts(opts);\n\n\t/* OpenDocument Part 3 Section 2.2.1 OpenDocument Package */\n\tif(safegetzipfile(zip, 'META-INF/manifest.xml')) return parse_ods(zip, opts);\n\t/* UOC */\n\tif(safegetzipfile(zip, 'objectdata.xml')) return parse_ods(zip, opts);\n\t/* Numbers */\n\tif(safegetzipfile(zip, 'Index/Document.iwa')) {\n\t\tif(typeof Uint8Array == \"undefined\") throw new Error('NUMBERS file parsing requires Uint8Array support');\n\t\tif(typeof parse_numbers_iwa != \"undefined\") {\n\t\t\tif(zip.FileIndex) return parse_numbers_iwa(zip);\n\t\t\tvar _zip = CFB.utils.cfb_new();\n\t\t\tzipentries(zip).forEach(function(e) { zip_add_file(_zip, e, getzipbin(zip, e)); });\n\t\t\treturn parse_numbers_iwa(_zip);\n\t\t}\n\t\tthrow new Error('Unsupported NUMBERS file');\n\t}\n\tif(!safegetzipfile(zip, '[Content_Types].xml')) {\n\t\tif(safegetzipfile(zip, 'index.xml.gz')) throw new Error('Unsupported NUMBERS 08 file');\n\t\tif(safegetzipfile(zip, 'index.xml')) throw new Error('Unsupported NUMBERS 09 file');\n\t\tthrow new Error('Unsupported ZIP file');\n\t}\n\n\tvar entries = zipentries(zip);\n\tvar dir = parse_ct((getzipstr(zip, '[Content_Types].xml')/*:?any*/));\n\tvar xlsb = false;\n\tvar sheets, binname;\n\tif(dir.workbooks.length === 0) {\n\t\tbinname = \"xl/workbook.xml\";\n\t\tif(getzipdata(zip,binname, true)) dir.workbooks.push(binname);\n\t}\n\tif(dir.workbooks.length === 0) {\n\t\tbinname = \"xl/workbook.bin\";\n\t\tif(!getzipdata(zip,binname,true)) throw new Error(\"Could not find workbook\");\n\t\tdir.workbooks.push(binname);\n\t\txlsb = true;\n\t}\n\tif(dir.workbooks[0].slice(-3) == \"bin\") xlsb = true;\n\n\tvar themes = ({}/*:any*/);\n\tvar styles = ({}/*:any*/);\n\tif(!opts.bookSheets && !opts.bookProps) {\n\t\tstrs = [];\n\t\tif(dir.sst) try { strs=parse_sst(getzipdata(zip, strip_front_slash(dir.sst)), dir.sst, opts); } catch(e) { if(opts.WTF) throw e; }\n\n\t\tif(opts.cellStyles && dir.themes.length) themes = parse_theme(getzipstr(zip, dir.themes[0].replace(/^\\//,''), true)||\"\",dir.themes[0], opts);\n\n\t\tif(dir.style) styles = parse_sty(getzipdata(zip, strip_front_slash(dir.style)), dir.style, themes, opts);\n\t}\n\n\t/*var externbooks = */dir.links.map(function(link) {\n\t\ttry {\n\t\t\tvar rels = parse_rels(getzipstr(zip, get_rels_path(strip_front_slash(link))), link);\n\t\t\treturn parse_xlink(getzipdata(zip, strip_front_slash(link)), rels, link, opts);\n\t\t} catch(e) {}\n\t});\n\n\tvar wb = parse_wb(getzipdata(zip, strip_front_slash(dir.workbooks[0])), dir.workbooks[0], opts);\n\n\tvar props = {}, propdata = \"\";\n\n\tif(dir.coreprops.length) {\n\t\tpropdata = getzipdata(zip, strip_front_slash(dir.coreprops[0]), true);\n\t\tif(propdata) props = parse_core_props(propdata);\n\t\tif(dir.extprops.length !== 0) {\n\t\t\tpropdata = getzipdata(zip, strip_front_slash(dir.extprops[0]), true);\n\t\t\tif(propdata) parse_ext_props(propdata, props, opts);\n\t\t}\n\t}\n\n\tvar custprops = {};\n\tif(!opts.bookSheets || opts.bookProps) {\n\t\tif (dir.custprops.length !== 0) {\n\t\t\tpropdata = getzipstr(zip, strip_front_slash(dir.custprops[0]), true);\n\t\t\tif(propdata) custprops = parse_cust_props(propdata, opts);\n\t\t}\n\t}\n\n\tvar out = ({}/*:any*/);\n\tif(opts.bookSheets || opts.bookProps) {\n\t\tif(wb.Sheets) sheets = wb.Sheets.map(function pluck(x){ return x.name; });\n\t\telse if(props.Worksheets && props.SheetNames.length > 0) sheets=props.SheetNames;\n\t\tif(opts.bookProps) { out.Props = props; out.Custprops = custprops; }\n\t\tif(opts.bookSheets && typeof sheets !== 'undefined') out.SheetNames = sheets;\n\t\tif(opts.bookSheets ? out.SheetNames : opts.bookProps) return out;\n\t}\n\tsheets = {};\n\n\tvar deps = {};\n\tif(opts.bookDeps && dir.calcchain) deps=parse_cc(getzipdata(zip, strip_front_slash(dir.calcchain)),dir.calcchain,opts);\n\n\tvar i=0;\n\tvar sheetRels = ({}/*:any*/);\n\tvar path, relsPath;\n\n\t{\n\t\tvar wbsheets = wb.Sheets;\n\t\tprops.Worksheets = wbsheets.length;\n\t\tprops.SheetNames = [];\n\t\tfor(var j = 0; j != wbsheets.length; ++j) {\n\t\t\tprops.SheetNames[j] = wbsheets[j].name;\n\t\t}\n\t}\n\n\tvar wbext = xlsb ? \"bin\" : \"xml\";\n\tvar wbrelsi = dir.workbooks[0].lastIndexOf(\"/\");\n\tvar wbrelsfile = (dir.workbooks[0].slice(0, wbrelsi+1) + \"_rels/\" + dir.workbooks[0].slice(wbrelsi+1) + \".rels\").replace(/^\\//,\"\");\n\tif(!safegetzipfile(zip, wbrelsfile)) wbrelsfile = 'xl/_rels/workbook.' + wbext + '.rels';\n\tvar wbrels = parse_rels(getzipstr(zip, wbrelsfile, true), wbrelsfile.replace(/_rels.*/, \"s5s\"));\n\n\tif((dir.metadata || []).length >= 1) {\n\t\t/* TODO: MDX and other types of metadata */\n\t\topts.xlmeta = parse_xlmeta(getzipdata(zip, strip_front_slash(dir.metadata[0])),dir.metadata[0],opts);\n\t}\n\n\tif((dir.people || []).length >= 1) {\n\t\topts.people = parse_people_xml(getzipdata(zip, strip_front_slash(dir.people[0])),opts);\n\t}\n\n\tif(wbrels) wbrels = safe_parse_wbrels(wbrels, wb.Sheets);\n\n\t/* Numbers iOS hack */\n\tvar nmode = (getzipdata(zip,\"xl/worksheets/sheet.xml\",true))?1:0;\n\twsloop: for(i = 0; i != props.Worksheets; ++i) {\n\t\tvar stype = \"sheet\";\n\t\tif(wbrels && wbrels[i]) {\n\t\t\tpath = 'xl/' + (wbrels[i][1]).replace(/[\\/]?xl\\//, \"\");\n\t\t\tif(!safegetzipfile(zip, path)) path = wbrels[i][1];\n\t\t\tif(!safegetzipfile(zip, path)) path = wbrelsfile.replace(/_rels\\/.*$/,\"\") + wbrels[i][1];\n\t\t\tstype = wbrels[i][2];\n\t\t} else {\n\t\t\tpath = 'xl/worksheets/sheet'+(i+1-nmode)+\".\" + wbext;\n\t\t\tpath = path.replace(/sheet0\\./,\"sheet.\");\n\t\t}\n\t\trelsPath = path.replace(/^(.*)(\\/)([^\\/]*)$/, \"$1/_rels/$3.rels\");\n\t\tif(opts && opts.sheets != null) switch(typeof opts.sheets) {\n\t\t\tcase \"number\": if(i != opts.sheets) continue wsloop; break;\n\t\t\tcase \"string\": if(props.SheetNames[i].toLowerCase() != opts.sheets.toLowerCase()) continue wsloop; break;\n\t\t\tdefault: if(Array.isArray && Array.isArray(opts.sheets)) {\n\t\t\t\tvar snjseen = false;\n\t\t\t\tfor(var snj = 0; snj != opts.sheets.length; ++snj) {\n\t\t\t\t\tif(typeof opts.sheets[snj] == \"number\" && opts.sheets[snj] == i) snjseen=1;\n\t\t\t\t\tif(typeof opts.sheets[snj] == \"string\" && opts.sheets[snj].toLowerCase() == props.SheetNames[i].toLowerCase()) snjseen = 1;\n\t\t\t\t}\n\t\t\t\tif(!snjseen) continue wsloop;\n\t\t\t}\n\t\t}\n\t\tsafe_parse_sheet(zip, path, relsPath, props.SheetNames[i], i, sheetRels, sheets, stype, opts, wb, themes, styles);\n\t}\n\n\tout = ({\n\t\tDirectory: dir,\n\t\tWorkbook: wb,\n\t\tProps: props,\n\t\tCustprops: custprops,\n\t\tDeps: deps,\n\t\tSheets: sheets,\n\t\tSheetNames: props.SheetNames,\n\t\tStrings: strs,\n\t\tStyles: styles,\n\t\tThemes: themes,\n\t\tSSF: dup(table_fmt)\n\t}/*:any*/);\n\tif(opts && opts.bookFiles) {\n\t\tif(zip.files) {\n\t\t\tout.keys = entries;\n\t\t\tout.files = zip.files;\n\t\t} else {\n\t\t\tout.keys = [];\n\t\t\tout.files = {};\n\t\t\tzip.FullPaths.forEach(function(p, idx) {\n\t\t\t\tp = p.replace(/^Root Entry[\\/]/, \"\");\n\t\t\t\tout.keys.push(p);\n\t\t\t\tout.files[p] = zip.FileIndex[idx];\n\t\t\t});\n\t\t}\n\t}\n\tif(opts && opts.bookVBA) {\n\t\tif(dir.vba.length > 0) out.vbaraw = getzipdata(zip,strip_front_slash(dir.vba[0]),true);\n\t\telse if(dir.defaults && dir.defaults.bin === CT_VBA) out.vbaraw = getzipdata(zip, 'xl/vbaProject.bin',true);\n\t}\n\treturn out;\n}\n\n/* [MS-OFFCRYPTO] 2.1.1 */\nfunction parse_xlsxcfb(cfb, _opts/*:?ParseOpts*/)/*:Workbook*/ {\n\tvar opts = _opts || {};\n\tvar f = 'Workbook', data = CFB.find(cfb, f);\n\ttry {\n\tf = '/!DataSpaces/Version';\n\tdata = CFB.find(cfb, f); if(!data || !data.content) throw new Error(\"ECMA-376 Encrypted file missing \" + f);\n\t/*var version = */parse_DataSpaceVersionInfo(data.content);\n\n\t/* 2.3.4.1 */\n\tf = '/!DataSpaces/DataSpaceMap';\n\tdata = CFB.find(cfb, f); if(!data || !data.content) throw new Error(\"ECMA-376 Encrypted file missing \" + f);\n\tvar dsm = parse_DataSpaceMap(data.content);\n\tif(dsm.length !== 1 || dsm[0].comps.length !== 1 || dsm[0].comps[0].t !== 0 || dsm[0].name !== \"StrongEncryptionDataSpace\" || dsm[0].comps[0].v !== \"EncryptedPackage\")\n\t\tthrow new Error(\"ECMA-376 Encrypted file bad \" + f);\n\n\t/* 2.3.4.2 */\n\tf = '/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace';\n\tdata = CFB.find(cfb, f); if(!data || !data.content) throw new Error(\"ECMA-376 Encrypted file missing \" + f);\n\tvar seds = parse_DataSpaceDefinition(data.content);\n\tif(seds.length != 1 || seds[0] != \"StrongEncryptionTransform\")\n\t\tthrow new Error(\"ECMA-376 Encrypted file bad \" + f);\n\n\t/* 2.3.4.3 */\n\tf = '/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary';\n\tdata = CFB.find(cfb, f); if(!data || !data.content) throw new Error(\"ECMA-376 Encrypted file missing \" + f);\n\t/*var hdr = */parse_Primary(data.content);\n\t} catch(e) {}\n\n\tf = '/EncryptionInfo';\n\tdata = CFB.find(cfb, f); if(!data || !data.content) throw new Error(\"ECMA-376 Encrypted file missing \" + f);\n\tvar einfo = parse_EncryptionInfo(data.content);\n\n\t/* 2.3.4.4 */\n\tf = '/EncryptedPackage';\n\tdata = CFB.find(cfb, f); if(!data || !data.content) throw new Error(\"ECMA-376 Encrypted file missing \" + f);\n\n/*global decrypt_agile */\n/*:: declare var decrypt_agile:any; */\n\tif(einfo[0] == 0x04 && typeof decrypt_agile !== 'undefined') return decrypt_agile(einfo[1], data.content, opts.password || \"\", opts);\n/*global decrypt_std76 */\n/*:: declare var decrypt_std76:any; */\n\tif(einfo[0] == 0x02 && typeof decrypt_std76 !== 'undefined') return decrypt_std76(einfo[1], data.content, opts.password || \"\", opts);\n\tthrow new Error(\"File is password-protected\");\n}\n\nfunction write_zip(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:ZIP*/ {\n\tif(opts.bookType == \"ods\") return write_ods(wb, opts);\n\tif(opts.bookType == \"numbers\") return write_numbers_iwa(wb, opts);\n\tif(opts.bookType == \"xlsb\") return write_zip_xlsxb(wb, opts);\n\treturn write_zip_xlsx(wb, opts);\n}\n\n/* XLSX and XLSB writing are very similar.  Originally they were unified in one\n   export function.  This is horrible for tree shaking in the common case (most\n   applications need to export files in one format) so this function supports\n   both formats while write_zip_xlsx only handles XLSX */\nfunction write_zip_xlsxb(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:ZIP*/ {\n\t_shapeid = 1024;\n\tif(wb && !wb.SSF) {\n\t\twb.SSF = dup(table_fmt);\n\t}\n\tif(wb && wb.SSF) {\n\t\tmake_ssf(); SSF_load_table(wb.SSF);\n\t\t// $FlowIgnore\n\t\topts.revssf = evert_num(wb.SSF); opts.revssf[wb.SSF[65535]] = 0;\n\t\topts.ssf = wb.SSF;\n\t}\n\topts.rels = {}; opts.wbrels = {};\n\topts.Strings = /*::((*/[]/*:: :any):SST)*/; opts.Strings.Count = 0; opts.Strings.Unique = 0;\n\tif(browser_has_Map) opts.revStrings = new Map();\n\telse { opts.revStrings = {}; opts.revStrings.foo = []; delete opts.revStrings.foo; }\n\tvar wbext = opts.bookType == \"xlsb\" ? \"bin\" : \"xml\";\n\tvar vbafmt = VBAFMTS.indexOf(opts.bookType) > -1;\n\tvar ct = new_ct();\n\tfix_write_opts(opts = opts || {});\n\tvar zip = zip_new();\n\tvar f = \"\", rId = 0;\n\n\topts.cellXfs = [];\n\tget_cell_style(opts.cellXfs, {}, {revssf:{\"General\":0}});\n\n\tif(!wb.Props) wb.Props = {};\n\n\tf = \"docProps/core.xml\";\n\tzip_add_file(zip, f, write_core_props(wb.Props, opts));\n\tct.coreprops.push(f);\n\tadd_rels(opts.rels, 2, f, RELS.CORE_PROPS);\n\n\t/*::if(!wb.Props) throw \"unreachable\"; */\n\tf = \"docProps/app.xml\";\n\tif(wb.Props && wb.Props.SheetNames){/* empty */}\n\telse if(!wb.Workbook || !wb.Workbook.Sheets) wb.Props.SheetNames = wb.SheetNames;\n\telse {\n\t\tvar _sn = [];\n\t\tfor(var _i = 0; _i < wb.SheetNames.length; ++_i)\n\t\t\tif((wb.Workbook.Sheets[_i]||{}).Hidden != 2) _sn.push(wb.SheetNames[_i]);\n\t\twb.Props.SheetNames = _sn;\n\t}\n\twb.Props.Worksheets = wb.Props.SheetNames.length;\n\tzip_add_file(zip, f, write_ext_props(wb.Props, opts));\n\tct.extprops.push(f);\n\tadd_rels(opts.rels, 3, f, RELS.EXT_PROPS);\n\n\tif(wb.Custprops !== wb.Props && keys(wb.Custprops||{}).length > 0) {\n\t\tf = \"docProps/custom.xml\";\n\t\tzip_add_file(zip, f, write_cust_props(wb.Custprops, opts));\n\t\tct.custprops.push(f);\n\t\tadd_rels(opts.rels, 4, f, RELS.CUST_PROPS);\n\t}\n\n\tfor(rId=1;rId <= wb.SheetNames.length; ++rId) {\n\t\tvar wsrels = {'!id':{}};\n\t\tvar ws = wb.Sheets[wb.SheetNames[rId-1]];\n\t\tvar _type = (ws || {})[\"!type\"] || \"sheet\";\n\t\tswitch(_type) {\n\t\tcase \"chart\":\n\t\t\t/* falls through */\n\t\tdefault:\n\t\t\tf = \"xl/worksheets/sheet\" + rId + \".\" + wbext;\n\t\t\tzip_add_file(zip, f, write_ws(rId-1, f, opts, wb, wsrels));\n\t\t\tct.sheets.push(f);\n\t\t\tadd_rels(opts.wbrels, -1, \"worksheets/sheet\" + rId + \".\" + wbext, RELS.WS[0]);\n\t\t}\n\n\t\tif(ws) {\n\t\t\tvar comments = ws['!comments'];\n\t\t\tvar need_vml = false;\n\t\t\tvar cf = \"\";\n\t\t\tif(comments && comments.length > 0) {\n\t\t\t\tcf = \"xl/comments\" + rId + \".\" + wbext;\n\t\t\t\tzip_add_file(zip, cf, write_cmnt(comments, cf, opts));\n\t\t\t\tct.comments.push(cf);\n\t\t\t\tadd_rels(wsrels, -1, \"../comments\" + rId + \".\" + wbext, RELS.CMNT);\n\t\t\t\tneed_vml = true;\n\t\t\t}\n\t\t\tif(ws['!legacy']) {\n\t\t\t\tif(need_vml) zip_add_file(zip, \"xl/drawings/vmlDrawing\" + (rId) + \".vml\", write_comments_vml(rId, ws['!comments']));\n\t\t\t}\n\t\t\tdelete ws['!comments'];\n\t\t\tdelete ws['!legacy'];\n\t\t}\n\n\t\tif(wsrels['!id'].rId1) zip_add_file(zip, get_rels_path(f), write_rels(wsrels));\n\t}\n\n\tif(opts.Strings != null && opts.Strings.length > 0) {\n\t\tf = \"xl/sharedStrings.\" + wbext;\n\t\tzip_add_file(zip, f, write_sst(opts.Strings, f, opts));\n\t\tct.strs.push(f);\n\t\tadd_rels(opts.wbrels, -1, \"sharedStrings.\" + wbext, RELS.SST);\n\t}\n\n\tf = \"xl/workbook.\" + wbext;\n\tzip_add_file(zip, f, write_wb(wb, f, opts));\n\tct.workbooks.push(f);\n\tadd_rels(opts.rels, 1, f, RELS.WB);\n\n\t/* TODO: something more intelligent with themes */\n\n\tf = \"xl/theme/theme1.xml\";\n\tzip_add_file(zip, f, write_theme(wb.Themes, opts));\n\tct.themes.push(f);\n\tadd_rels(opts.wbrels, -1, \"theme/theme1.xml\", RELS.THEME);\n\n\t/* TODO: something more intelligent with styles */\n\n\tf = \"xl/styles.\" + wbext;\n\tzip_add_file(zip, f, write_sty(wb, f, opts));\n\tct.styles.push(f);\n\tadd_rels(opts.wbrels, -1, \"styles.\" + wbext, RELS.STY);\n\n\tif(wb.vbaraw && vbafmt) {\n\t\tf = \"xl/vbaProject.bin\";\n\t\tzip_add_file(zip, f, wb.vbaraw);\n\t\tct.vba.push(f);\n\t\tadd_rels(opts.wbrels, -1, \"vbaProject.bin\", RELS.VBA);\n\t}\n\n\tf = \"xl/metadata.\" + wbext;\n\tzip_add_file(zip, f, write_xlmeta(f));\n\tct.metadata.push(f);\n\tadd_rels(opts.wbrels, -1, \"metadata.\" + wbext, RELS.XLMETA);\n\n\tzip_add_file(zip, \"[Content_Types].xml\", write_ct(ct, opts));\n\tzip_add_file(zip, '_rels/.rels', write_rels(opts.rels));\n\tzip_add_file(zip, 'xl/_rels/workbook.' + wbext + '.rels', write_rels(opts.wbrels));\n\n\tdelete opts.revssf; delete opts.ssf;\n\treturn zip;\n}\n\nfunction write_zip_xlsx(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:ZIP*/ {\n\t_shapeid = 1024;\n\tif(wb && !wb.SSF) {\n\t\twb.SSF = dup(table_fmt);\n\t}\n\tif(wb && wb.SSF) {\n\t\tmake_ssf(); SSF_load_table(wb.SSF);\n\t\t// $FlowIgnore\n\t\topts.revssf = evert_num(wb.SSF); opts.revssf[wb.SSF[65535]] = 0;\n\t\topts.ssf = wb.SSF;\n\t}\n\topts.rels = {}; opts.wbrels = {};\n\topts.Strings = /*::((*/[]/*:: :any):SST)*/; opts.Strings.Count = 0; opts.Strings.Unique = 0;\n\tif(browser_has_Map) opts.revStrings = new Map();\n\telse { opts.revStrings = {}; opts.revStrings.foo = []; delete opts.revStrings.foo; }\n\tvar wbext = \"xml\";\n\tvar vbafmt = VBAFMTS.indexOf(opts.bookType) > -1;\n\tvar ct = new_ct();\n\tfix_write_opts(opts = opts || {});\n\tvar zip = zip_new();\n\tvar f = \"\", rId = 0;\n\n\topts.cellXfs = [];\n\tget_cell_style(opts.cellXfs, {}, {revssf:{\"General\":0}});\n\n\tif(!wb.Props) wb.Props = {};\n\n\tf = \"docProps/core.xml\";\n\tzip_add_file(zip, f, write_core_props(wb.Props, opts));\n\tct.coreprops.push(f);\n\tadd_rels(opts.rels, 2, f, RELS.CORE_PROPS);\n\n\t/*::if(!wb.Props) throw \"unreachable\"; */\n\tf = \"docProps/app.xml\";\n\tif(wb.Props && wb.Props.SheetNames){/* empty */}\n\telse if(!wb.Workbook || !wb.Workbook.Sheets) wb.Props.SheetNames = wb.SheetNames;\n\telse {\n\t\tvar _sn = [];\n\t\tfor(var _i = 0; _i < wb.SheetNames.length; ++_i)\n\t\t\tif((wb.Workbook.Sheets[_i]||{}).Hidden != 2) _sn.push(wb.SheetNames[_i]);\n\t\twb.Props.SheetNames = _sn;\n\t}\n\twb.Props.Worksheets = wb.Props.SheetNames.length;\n\tzip_add_file(zip, f, write_ext_props(wb.Props, opts));\n\tct.extprops.push(f);\n\tadd_rels(opts.rels, 3, f, RELS.EXT_PROPS);\n\n\tif(wb.Custprops !== wb.Props && keys(wb.Custprops||{}).length > 0) {\n\t\tf = \"docProps/custom.xml\";\n\t\tzip_add_file(zip, f, write_cust_props(wb.Custprops, opts));\n\t\tct.custprops.push(f);\n\t\tadd_rels(opts.rels, 4, f, RELS.CUST_PROPS);\n\t}\n\n\tvar people = [\"SheetJ5\"];\n\topts.tcid = 0;\n\n\tfor(rId=1;rId <= wb.SheetNames.length; ++rId) {\n\t\tvar wsrels = {'!id':{}};\n\t\tvar ws = wb.Sheets[wb.SheetNames[rId-1]];\n\t\tvar _type = (ws || {})[\"!type\"] || \"sheet\";\n\t\tswitch(_type) {\n\t\tcase \"chart\":\n\t\t\t/* falls through */\n\t\tdefault:\n\t\t\tf = \"xl/worksheets/sheet\" + rId + \".\" + wbext;\n\t\t\tzip_add_file(zip, f, write_ws_xml(rId-1, opts, wb, wsrels));\n\t\t\tct.sheets.push(f);\n\t\t\tadd_rels(opts.wbrels, -1, \"worksheets/sheet\" + rId + \".\" + wbext, RELS.WS[0]);\n\t\t}\n\n\t\tif(ws) {\n\t\t\tvar comments = ws['!comments'];\n\t\t\tvar need_vml = false;\n\t\t\tvar cf = \"\";\n\t\t\tif(comments && comments.length > 0) {\n\t\t\t\tvar needtc = false;\n\t\t\t\tcomments.forEach(function(carr) {\n\t\t\t\t\tcarr[1].forEach(function(c) { if(c.T == true) needtc = true; });\n\t\t\t\t});\n\t\t\t\tif(needtc) {\n\t\t\t\t\tcf = \"xl/threadedComments/threadedComment\" + rId + \".\" + wbext;\n\t\t\t\t\tzip_add_file(zip, cf, write_tcmnt_xml(comments, people, opts));\n\t\t\t\t\tct.threadedcomments.push(cf);\n\t\t\t\t\tadd_rels(wsrels, -1, \"../threadedComments/threadedComment\" + rId + \".\" + wbext, RELS.TCMNT);\n\t\t\t\t}\n\n\t\t\t\tcf = \"xl/comments\" + rId + \".\" + wbext;\n\t\t\t\tzip_add_file(zip, cf, write_comments_xml(comments, opts));\n\t\t\t\tct.comments.push(cf);\n\t\t\t\tadd_rels(wsrels, -1, \"../comments\" + rId + \".\" + wbext, RELS.CMNT);\n\t\t\t\tneed_vml = true;\n\t\t\t}\n\t\t\tif(ws['!legacy']) {\n\t\t\t\tif(need_vml) zip_add_file(zip, \"xl/drawings/vmlDrawing\" + (rId) + \".vml\", write_comments_vml(rId, ws['!comments']));\n\t\t\t}\n\t\t\tdelete ws['!comments'];\n\t\t\tdelete ws['!legacy'];\n\t\t}\n\n\t\tif(wsrels['!id'].rId1) zip_add_file(zip, get_rels_path(f), write_rels(wsrels));\n\t}\n\n\tif(opts.Strings != null && opts.Strings.length > 0) {\n\t\tf = \"xl/sharedStrings.\" + wbext;\n\t\tzip_add_file(zip, f, write_sst_xml(opts.Strings, opts));\n\t\tct.strs.push(f);\n\t\tadd_rels(opts.wbrels, -1, \"sharedStrings.\" + wbext, RELS.SST);\n\t}\n\n\tf = \"xl/workbook.\" + wbext;\n\tzip_add_file(zip, f, write_wb_xml(wb, opts));\n\tct.workbooks.push(f);\n\tadd_rels(opts.rels, 1, f, RELS.WB);\n\n\t/* TODO: something more intelligent with themes */\n\n\tf = \"xl/theme/theme1.xml\";\n\tzip_add_file(zip, f, write_theme(wb.Themes, opts));\n\tct.themes.push(f);\n\tadd_rels(opts.wbrels, -1, \"theme/theme1.xml\", RELS.THEME);\n\n\t/* TODO: something more intelligent with styles */\n\n\tf = \"xl/styles.\" + wbext;\n\tzip_add_file(zip, f, write_sty_xml(wb, opts));\n\tct.styles.push(f);\n\tadd_rels(opts.wbrels, -1, \"styles.\" + wbext, RELS.STY);\n\n\tif(wb.vbaraw && vbafmt) {\n\t\tf = \"xl/vbaProject.bin\";\n\t\tzip_add_file(zip, f, wb.vbaraw);\n\t\tct.vba.push(f);\n\t\tadd_rels(opts.wbrels, -1, \"vbaProject.bin\", RELS.VBA);\n\t}\n\n\tf = \"xl/metadata.\" + wbext;\n\tzip_add_file(zip, f, write_xlmeta_xml());\n\tct.metadata.push(f);\n\tadd_rels(opts.wbrels, -1, \"metadata.\" + wbext, RELS.XLMETA);\n\n\tif(people.length > 1) {\n\t\tf = \"xl/persons/person.xml\";\n\t\tzip_add_file(zip, f, write_people_xml(people, opts));\n\t\tct.people.push(f);\n\t\tadd_rels(opts.wbrels, -1, \"persons/person.xml\", RELS.PEOPLE);\n\t}\n\n\tzip_add_file(zip, \"[Content_Types].xml\", write_ct(ct, opts));\n\tzip_add_file(zip, '_rels/.rels', write_rels(opts.rels));\n\tzip_add_file(zip, 'xl/_rels/workbook.' + wbext + '.rels', write_rels(opts.wbrels));\n\n\tdelete opts.revssf; delete opts.ssf;\n\treturn zip;\n}\n\nfunction firstbyte(f/*:RawData*/,o/*:?TypeOpts*/)/*:Array<number>*/ {\n\tvar x = \"\";\n\tswitch((o||{}).type || \"base64\") {\n\t\tcase 'buffer': return [f[0], f[1], f[2], f[3], f[4], f[5], f[6], f[7]];\n\t\tcase 'base64': x = Base64_decode(f.slice(0,12)); break;\n\t\tcase 'binary': x = f; break;\n\t\tcase 'array':  return [f[0], f[1], f[2], f[3], f[4], f[5], f[6], f[7]];\n\t\tdefault: throw new Error(\"Unrecognized type \" + (o && o.type || \"undefined\"));\n\t}\n\treturn [x.charCodeAt(0), x.charCodeAt(1), x.charCodeAt(2), x.charCodeAt(3), x.charCodeAt(4), x.charCodeAt(5), x.charCodeAt(6), x.charCodeAt(7)];\n}\n\nfunction read_cfb(cfb/*:CFBContainer*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\tif(CFB.find(cfb, \"EncryptedPackage\")) return parse_xlsxcfb(cfb, opts);\n\treturn parse_xlscfb(cfb, opts);\n}\n\nfunction read_zip(data/*:RawData*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\tvar zip, d = data;\n\tvar o = opts||{};\n\tif(!o.type) o.type = (has_buf && Buffer.isBuffer(data)) ? \"buffer\" : \"base64\";\n\tzip = zip_read(d, o);\n\treturn parse_zip(zip, o);\n}\n\nfunction read_plaintext(data/*:string*/, o/*:ParseOpts*/)/*:Workbook*/ {\n\tvar i = 0;\n\tmain: while(i < data.length) switch(data.charCodeAt(i)) {\n\t\tcase 0x0A: case 0x0D: case 0x20: ++i; break;\n\t\tcase 0x3C: return parse_xlml(data.slice(i),o);\n\t\tdefault: break main;\n\t}\n\treturn PRN.to_workbook(data, o);\n}\n\nfunction read_plaintext_raw(data/*:RawData*/, o/*:ParseOpts*/)/*:Workbook*/ {\n\tvar str = \"\", bytes = firstbyte(data, o);\n\tswitch(o.type) {\n\t\tcase 'base64': str = Base64_decode(data); break;\n\t\tcase 'binary': str = data; break;\n\t\tcase 'buffer': str = data.toString('binary'); break;\n\t\tcase 'array': str = cc2str(data); break;\n\t\tdefault: throw new Error(\"Unrecognized type \" + o.type);\n\t}\n\tif(bytes[0] == 0xEF && bytes[1] == 0xBB && bytes[2] == 0xBF) str = utf8read(str);\n\to.type = \"binary\";\n\treturn read_plaintext(str, o);\n}\n\nfunction read_utf16(data/*:RawData*/, o/*:ParseOpts*/)/*:Workbook*/ {\n\tvar d = data;\n\tif(o.type == 'base64') d = Base64_decode(d);\n\td = $cptable.utils.decode(1200, d.slice(2), 'str');\n\to.type = \"binary\";\n\treturn read_plaintext(d, o);\n}\n\nfunction bstrify(data/*:string*/)/*:string*/ {\n\treturn !data.match(/[^\\x00-\\x7F]/) ? data : utf8write(data);\n}\n\nfunction read_prn(data, d, o, str) {\n\tif(str) { o.type = \"string\"; return PRN.to_workbook(data, o); }\n\treturn PRN.to_workbook(d, o);\n}\n\nfunction readSync(data/*:RawData*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\treset_cp();\n\tvar o = opts||{};\n\tif(typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) return readSync(new Uint8Array(data), (o = dup(o), o.type = \"array\", o));\n\tif(typeof Uint8Array !== 'undefined' && data instanceof Uint8Array && !o.type) o.type = typeof Deno !== \"undefined\" ? \"buffer\" : \"array\";\n\tvar d = data, n = [0,0,0,0], str = false;\n\tif(o.cellStyles) { o.cellNF = true; o.sheetStubs = true; }\n\t_ssfopts = {};\n\tif(o.dateNF) _ssfopts.dateNF = o.dateNF;\n\tif(!o.type) o.type = (has_buf && Buffer.isBuffer(data)) ? \"buffer\" : \"base64\";\n\tif(o.type == \"file\") { o.type = has_buf ? \"buffer\" : \"binary\"; d = read_binary(data); if(typeof Uint8Array !== 'undefined' && !has_buf) o.type = \"array\"; }\n\tif(o.type == \"string\") { str = true; o.type = \"binary\"; o.codepage = 65001; d = bstrify(data); }\n\tif(o.type == 'array' && typeof Uint8Array !== 'undefined' && data instanceof Uint8Array && typeof ArrayBuffer !== 'undefined') {\n\t\t// $FlowIgnore\n\t\tvar ab=new ArrayBuffer(3), vu=new Uint8Array(ab); vu.foo=\"bar\";\n\t\t// $FlowIgnore\n\t\tif(!vu.foo) {o=dup(o); o.type='array'; return readSync(ab2a(d), o);}\n\t}\n\tswitch((n = firstbyte(d, o))[0]) {\n\t\tcase 0xD0: if(n[1] === 0xCF && n[2] === 0x11 && n[3] === 0xE0 && n[4] === 0xA1 && n[5] === 0xB1 && n[6] === 0x1A && n[7] === 0xE1) return read_cfb(CFB.read(d, o), o); break;\n\t\tcase 0x09: if(n[1] <= 0x08) return parse_xlscfb(d, o); break;\n\t\tcase 0x3C: return parse_xlml(d, o);\n\t\tcase 0x49:\n\t\t\tif(n[1] === 0x49 && n[2] === 0x2a && n[3] === 0x00) throw new Error(\"TIFF Image File is not a spreadsheet\");\n\t\t\tif(n[1] === 0x44) return read_wb_ID(d, o);\n\t\t\tbreak;\n\t\tcase 0x54: if(n[1] === 0x41 && n[2] === 0x42 && n[3] === 0x4C) return DIF.to_workbook(d, o); break;\n\t\tcase 0x50: return (n[1] === 0x4B && n[2] < 0x09 && n[3] < 0x09) ? read_zip(d, o) : read_prn(data, d, o, str);\n\t\tcase 0xEF: return n[3] === 0x3C ? parse_xlml(d, o) : read_prn(data, d, o, str);\n\t\tcase 0xFF:\n\t\t\tif(n[1] === 0xFE) { return read_utf16(d, o); }\n\t\t\telse if(n[1] === 0x00 && n[2] === 0x02 && n[3] === 0x00) return WK_.to_workbook(d, o);\n\t\t\tbreak;\n\t\tcase 0x00:\n\t\t\tif(n[1] === 0x00) {\n\t\t\t\tif(n[2] >= 0x02 && n[3] === 0x00) return WK_.to_workbook(d, o);\n\t\t\t\tif(n[2] === 0x00 && (n[3] === 0x08 || n[3] === 0x09)) return WK_.to_workbook(d, o);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x03: case 0x83: case 0x8B: case 0x8C: return DBF.to_workbook(d, o);\n\t\tcase 0x7B: if(n[1] === 0x5C && n[2] === 0x72 && n[3] === 0x74) return RTF.to_workbook(d, o); break;\n\t\tcase 0x0A: case 0x0D: case 0x20: return read_plaintext_raw(d, o);\n\t\tcase 0x89: if(n[1] === 0x50 && n[2] === 0x4E && n[3] === 0x47) throw new Error(\"PNG Image File is not a spreadsheet\"); break;\n\t}\n\tif(DBF_SUPPORTED_VERSIONS.indexOf(n[0]) > -1 && n[2] <= 12 && n[3] <= 31) return DBF.to_workbook(d, o);\n\treturn read_prn(data, d, o, str);\n}\n\nfunction readFileSync(filename/*:string*/, opts/*:?ParseOpts*/)/*:Workbook*/ {\n\tvar o = opts||{}; o.type = 'file';\n\treturn readSync(filename, o);\n}\nfunction write_cfb_ctr(cfb/*:CFBContainer*/, o/*:WriteOpts*/)/*:any*/ {\n\tswitch(o.type) {\n\t\tcase \"base64\": case \"binary\": break;\n\t\tcase \"buffer\": case \"array\": o.type = \"\"; break;\n\t\tcase \"file\": return write_dl(o.file, CFB.write(cfb, {type:has_buf ? 'buffer' : \"\"}));\n\t\tcase \"string\": throw new Error(\"'string' output type invalid for '\" + o.bookType + \"' files\");\n\t\tdefault: throw new Error(\"Unrecognized type \" + o.type);\n\t}\n\treturn CFB.write(cfb, o);\n}\n\n/*:: declare var encrypt_agile:any; */\nfunction write_zip_type(wb/*:Workbook*/, opts/*:?WriteOpts*/)/*:any*/ {\n\tvar o = dup(opts||{});\n\tvar z = write_zip(wb, o);\n\treturn write_zip_denouement(z, o);\n}\nfunction write_zip_typeXLSX(wb/*:Workbook*/, opts/*:?WriteOpts*/)/*:any*/ {\n\tvar o = dup(opts||{});\n\tvar z = write_zip_xlsx(wb, o);\n\treturn write_zip_denouement(z, o);\n}\nfunction write_zip_denouement(z/*:any*/, o/*:?WriteOpts*/)/*:any*/ {\n\tvar oopts = {};\n\tvar ftype = has_buf ? \"nodebuffer\" : (typeof Uint8Array !== \"undefined\" ? \"array\" : \"string\");\n\tif(o.compression) oopts.compression = 'DEFLATE';\n\tif(o.password) oopts.type = ftype;\n\telse switch(o.type) {\n\t\tcase \"base64\": oopts.type = \"base64\"; break;\n\t\tcase \"binary\": oopts.type = \"string\"; break;\n\t\tcase \"string\": throw new Error(\"'string' output type invalid for '\" + o.bookType + \"' files\");\n\t\tcase \"buffer\":\n\t\tcase \"file\": oopts.type = ftype; break;\n\t\tdefault: throw new Error(\"Unrecognized type \" + o.type);\n\t}\n\tvar out = z.FullPaths ? CFB.write(z, {fileType:\"zip\", type: /*::(*/{\"nodebuffer\": \"buffer\", \"string\": \"binary\"}/*:: :any)*/[oopts.type] || oopts.type, compression: !!o.compression}) : z.generate(oopts);\n\tif(typeof Deno !== \"undefined\") {\n\t\tif(typeof out == \"string\") {\n\t\t\tif(o.type == \"binary\" || o.type == \"base64\") return out;\n\t\t\tout = new Uint8Array(s2ab(out));\n\t\t}\n\t}\n/*jshint -W083 */\n\tif(o.password && typeof encrypt_agile !== 'undefined') return write_cfb_ctr(encrypt_agile(out, o.password), o); // eslint-disable-line no-undef\n/*jshint +W083 */\n\tif(o.type === \"file\") return write_dl(o.file, out);\n\treturn o.type == \"string\" ? utf8read(/*::(*/out/*:: :any)*/) : out;\n}\n\nfunction write_cfb_type(wb/*:Workbook*/, opts/*:?WriteOpts*/)/*:any*/ {\n\tvar o = opts||{};\n\tvar cfb/*:CFBContainer*/ = write_xlscfb(wb, o);\n\treturn write_cfb_ctr(cfb, o);\n}\n\nfunction write_string_type(out/*:string*/, opts/*:WriteOpts*/, bom/*:?string*/)/*:any*/ {\n\tif(!bom) bom = \"\";\n\tvar o = bom + out;\n\tswitch(opts.type) {\n\t\tcase \"base64\": return Base64_encode(utf8write(o));\n\t\tcase \"binary\": return utf8write(o);\n\t\tcase \"string\": return out;\n\t\tcase \"file\": return write_dl(opts.file, o, 'utf8');\n\t\tcase \"buffer\": {\n\t\t\tif(has_buf) return Buffer_from(o, 'utf8');\n\t\t\telse if(typeof TextEncoder !== \"undefined\") return new TextEncoder().encode(o);\n\t\t\telse return write_string_type(o, {type:'binary'}).split(\"\").map(function(c) { return c.charCodeAt(0); });\n\t\t}\n\t}\n\tthrow new Error(\"Unrecognized type \" + opts.type);\n}\n\nfunction write_stxt_type(out/*:string*/, opts/*:WriteOpts*/)/*:any*/ {\n\tswitch(opts.type) {\n\t\tcase \"base64\": return Base64_encode(out);\n\t\tcase \"binary\": return out;\n\t\tcase \"string\": return out; /* override in sheet_to_txt */\n\t\tcase \"file\": return write_dl(opts.file, out, 'binary');\n\t\tcase \"buffer\": {\n\t\t\tif(has_buf) return Buffer_from(out, 'binary');\n\t\t\telse return out.split(\"\").map(function(c) { return c.charCodeAt(0); });\n\t\t}\n\t}\n\tthrow new Error(\"Unrecognized type \" + opts.type);\n}\n\n/* TODO: test consistency */\nfunction write_binary_type(out, opts/*:WriteOpts*/)/*:any*/ {\n\tswitch(opts.type) {\n\t\tcase \"string\":\n\t\tcase \"base64\":\n\t\tcase \"binary\":\n\t\t\tvar bstr = \"\";\n\t\t\t// $FlowIgnore\n\t\t\tfor(var i = 0; i < out.length; ++i) bstr += String.fromCharCode(out[i]);\n\t\t\treturn opts.type == 'base64' ? Base64_encode(bstr) : opts.type == 'string' ? utf8read(bstr) : bstr;\n\t\tcase \"file\": return write_dl(opts.file, out);\n\t\tcase \"buffer\": return out;\n\t\tdefault: throw new Error(\"Unrecognized type \" + opts.type);\n\t}\n}\n\nfunction writeSyncXLSX(wb/*:Workbook*/, opts/*:?WriteOpts*/) {\n\treset_cp();\n\tcheck_wb(wb);\n\tvar o = dup(opts||{});\n\tif(o.cellStyles) { o.cellNF = true; o.sheetStubs = true; }\n\tif(o.type == \"array\") { o.type = \"binary\"; var out/*:string*/ = (writeSyncXLSX(wb, o)/*:any*/); o.type = \"array\"; return s2ab(out); }\n\treturn write_zip_typeXLSX(wb, o);\n}\n\nfunction writeSync(wb/*:Workbook*/, opts/*:?WriteOpts*/) {\n\treset_cp();\n\tcheck_wb(wb);\n\tvar o = dup(opts||{});\n\tif(o.cellStyles) { o.cellNF = true; o.sheetStubs = true; }\n\tif(o.type == \"array\") { o.type = \"binary\"; var out/*:string*/ = (writeSync(wb, o)/*:any*/); o.type = \"array\"; return s2ab(out); }\n\tvar idx = 0;\n\tif(o.sheet) {\n\t\tif(typeof o.sheet == \"number\") idx = o.sheet;\n\t\telse idx = wb.SheetNames.indexOf(o.sheet);\n\t\tif(!wb.SheetNames[idx]) throw new Error(\"Sheet not found: \" + o.sheet + \" : \" + (typeof o.sheet));\n\t}\n\tswitch(o.bookType || 'xlsb') {\n\t\tcase 'xml':\n\t\tcase 'xlml': return write_string_type(write_xlml(wb, o), o);\n\t\tcase 'slk':\n\t\tcase 'sylk': return write_string_type(SYLK.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'htm':\n\t\tcase 'html': return write_string_type(sheet_to_html(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'txt': return write_stxt_type(sheet_to_txt(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'csv': return write_string_type(sheet_to_csv(wb.Sheets[wb.SheetNames[idx]], o), o, \"\\ufeff\");\n\t\tcase 'dif': return write_string_type(DIF.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'dbf': return write_binary_type(DBF.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'prn': return write_string_type(PRN.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'rtf': return write_string_type(RTF.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'eth': return write_string_type(ETH.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'fods': return write_string_type(write_ods(wb, o), o);\n\t\tcase 'wk1': return write_binary_type(WK_.sheet_to_wk1(wb.Sheets[wb.SheetNames[idx]], o), o);\n\t\tcase 'wk3': return write_binary_type(WK_.book_to_wk3(wb, o), o);\n\t\tcase 'biff2': if(!o.biff) o.biff = 2; /* falls through */\n\t\tcase 'biff3': if(!o.biff) o.biff = 3; /* falls through */\n\t\tcase 'biff4': if(!o.biff) o.biff = 4; return write_binary_type(write_biff_buf(wb, o), o);\n\t\tcase 'biff5': if(!o.biff) o.biff = 5; /* falls through */\n\t\tcase 'biff8':\n\t\tcase 'xla':\n\t\tcase 'xls': if(!o.biff) o.biff = 8; return write_cfb_type(wb, o);\n\t\tcase 'xlsx':\n\t\tcase 'xlsm':\n\t\tcase 'xlam':\n\t\tcase 'xlsb':\n\t\tcase 'numbers':\n\t\tcase 'ods': return write_zip_type(wb, o);\n\t\tdefault: throw new Error (\"Unrecognized bookType |\" + o.bookType + \"|\");\n\t}\n}\n\nfunction resolve_book_type(o/*:WriteFileOpts*/) {\n\tif(o.bookType) return;\n\tvar _BT = {\n\t\t\"xls\": \"biff8\",\n\t\t\"htm\": \"html\",\n\t\t\"slk\": \"sylk\",\n\t\t\"socialcalc\": \"eth\",\n\t\t\"Sh33tJS\": \"WTF\"\n\t};\n\tvar ext = o.file.slice(o.file.lastIndexOf(\".\")).toLowerCase();\n\tif(ext.match(/^\\.[a-z]+$/)) o.bookType = ext.slice(1);\n\to.bookType = _BT[o.bookType] || o.bookType;\n}\n\nfunction writeFileSync(wb/*:Workbook*/, filename/*:string*/, opts/*:?WriteFileOpts*/) {\n\tvar o = opts||{}; o.type = 'file';\n\to.file = filename;\n\tresolve_book_type(o);\n\treturn writeSync(wb, o);\n}\n\nfunction writeFileSyncXLSX(wb/*:Workbook*/, filename/*:string*/, opts/*:?WriteFileOpts*/) {\n\tvar o = opts||{}; o.type = 'file';\n\to.file = filename;\n\tresolve_book_type(o);\n\treturn writeSyncXLSX(wb, o);\n}\n\n\nfunction writeFileAsync(filename/*:string*/, wb/*:Workbook*/, opts/*:?WriteFileOpts*/, cb/*:?(e?:ErrnoError)=>void*/) {\n\tvar o = opts||{}; o.type = 'file';\n\to.file = filename;\n\tresolve_book_type(o);\n\to.type = 'buffer';\n\tvar _cb = cb; if(!(_cb instanceof Function)) _cb = (opts/*:any*/);\n\treturn _fs.writeFile(filename, writeSync(wb, o), _cb);\n}\n/*::\ntype MJRObject = {\n\trow: any;\n\tisempty: boolean;\n};\n*/\nfunction make_json_row(sheet/*:Worksheet*/, r/*:Range*/, R/*:number*/, cols/*:Array<string>*/, header/*:number*/, hdr/*:Array<any>*/, dense/*:boolean*/, o/*:Sheet2JSONOpts*/)/*:MJRObject*/ {\n\tvar rr = encode_row(R);\n\tvar defval = o.defval, raw = o.raw || !Object.prototype.hasOwnProperty.call(o, \"raw\");\n\tvar isempty = true;\n\tvar row/*:any*/ = (header === 1) ? [] : {};\n\tif(header !== 1) {\n\t\tif(Object.defineProperty) try { Object.defineProperty(row, '__rowNum__', {value:R, enumerable:false}); } catch(e) { row.__rowNum__ = R; }\n\t\telse row.__rowNum__ = R;\n\t}\n\tif(!dense || sheet[R]) for (var C = r.s.c; C <= r.e.c; ++C) {\n\t\tvar val = dense ? sheet[R][C] : sheet[cols[C] + rr];\n\t\tif(val === undefined || val.t === undefined) {\n\t\t\tif(defval === undefined) continue;\n\t\t\tif(hdr[C] != null) { row[hdr[C]] = defval; }\n\t\t\tcontinue;\n\t\t}\n\t\tvar v = val.v;\n\t\tswitch(val.t){\n\t\t\tcase 'z': if(v == null) break; continue;\n\t\t\tcase 'e': v = (v == 0 ? null : void 0); break;\n\t\t\tcase 's': case 'd': case 'b': case 'n': break;\n\t\t\tdefault: throw new Error('unrecognized type ' + val.t);\n\t\t}\n\t\tif(hdr[C] != null) {\n\t\t\tif(v == null) {\n\t\t\t\tif(val.t == \"e\" && v === null) row[hdr[C]] = null;\n\t\t\t\telse if(defval !== undefined) row[hdr[C]] = defval;\n\t\t\t\telse if(raw && v === null) row[hdr[C]] = null;\n\t\t\t\telse continue;\n\t\t\t} else {\n\t\t\t\trow[hdr[C]] = raw && (val.t !== \"n\" || (val.t === \"n\" && o.rawNumbers !== false)) ? v : format_cell(val,v,o);\n\t\t\t}\n\t\t\tif(v != null) isempty = false;\n\t\t}\n\t}\n\treturn { row: row, isempty: isempty };\n}\n\n\nfunction sheet_to_json(sheet/*:Worksheet*/, opts/*:?Sheet2JSONOpts*/) {\n\tif(sheet == null || sheet[\"!ref\"] == null) return [];\n\tvar val = {t:'n',v:0}, header = 0, offset = 1, hdr/*:Array<any>*/ = [], v=0, vv=\"\";\n\tvar r = {s:{r:0,c:0},e:{r:0,c:0}};\n\tvar o = opts || {};\n\tvar range = o.range != null ? o.range : sheet[\"!ref\"];\n\tif(o.header === 1) header = 1;\n\telse if(o.header === \"A\") header = 2;\n\telse if(Array.isArray(o.header)) header = 3;\n\telse if(o.header == null) header = 0;\n\tswitch(typeof range) {\n\t\tcase 'string': r = safe_decode_range(range); break;\n\t\tcase 'number': r = safe_decode_range(sheet[\"!ref\"]); r.s.r = range; break;\n\t\tdefault: r = range;\n\t}\n\tif(header > 0) offset = 0;\n\tvar rr = encode_row(r.s.r);\n\tvar cols/*:Array<string>*/ = [];\n\tvar out/*:Array<any>*/ = [];\n\tvar outi = 0, counter = 0;\n\tvar dense = Array.isArray(sheet);\n\tvar R = r.s.r, C = 0;\n\tvar header_cnt = {};\n\tif(dense && !sheet[R]) sheet[R] = [];\n\tvar colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet[\"!cols\"] || [];\n\tvar rowinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet[\"!rows\"] || [];\n\tfor(C = r.s.c; C <= r.e.c; ++C) {\n\t\tif(((colinfo[C]||{}).hidden)) continue;\n\t\tcols[C] = encode_col(C);\n\t\tval = dense ? sheet[R][C] : sheet[cols[C] + rr];\n\t\tswitch(header) {\n\t\t\tcase 1: hdr[C] = C - r.s.c; break;\n\t\t\tcase 2: hdr[C] = cols[C]; break;\n\t\t\tcase 3: hdr[C] = o.header[C - r.s.c]; break;\n\t\t\tdefault:\n\t\t\t\tif(val == null) val = {w: \"__EMPTY\", t: \"s\"};\n\t\t\t\tvv = v = format_cell(val, null, o);\n\t\t\t\tcounter = header_cnt[v] || 0;\n\t\t\t\tif(!counter) header_cnt[v] = 1;\n\t\t\t\telse {\n\t\t\t\t\tdo { vv = v + \"_\" + (counter++); } while(header_cnt[vv]); header_cnt[v] = counter;\n\t\t\t\t\theader_cnt[vv] = 1;\n\t\t\t\t}\n\t\t\t\thdr[C] = vv;\n\t\t}\n\t}\n\tfor (R = r.s.r + offset; R <= r.e.r; ++R) {\n\t\tif ((rowinfo[R]||{}).hidden) continue;\n\t\tvar row = make_json_row(sheet, r, R, cols, header, hdr, dense, o);\n\t\tif((row.isempty === false) || (header === 1 ? o.blankrows !== false : !!o.blankrows)) out[outi++] = row.row;\n\t}\n\tout.length = outi;\n\treturn out;\n}\n\nvar qreg = /\"/g;\nfunction make_csv_row(sheet/*:Worksheet*/, r/*:Range*/, R/*:number*/, cols/*:Array<string>*/, fs/*:number*/, rs/*:number*/, FS/*:string*/, o/*:Sheet2CSVOpts*/)/*:?string*/ {\n\tvar isempty = true;\n\tvar row/*:Array<string>*/ = [], txt = \"\", rr = encode_row(R);\n\tfor(var C = r.s.c; C <= r.e.c; ++C) {\n\t\tif (!cols[C]) continue;\n\t\tvar val = o.dense ? (sheet[R]||[])[C]: sheet[cols[C] + rr];\n\t\tif(val == null) txt = \"\";\n\t\telse if(val.v != null) {\n\t\t\tisempty = false;\n\t\t\ttxt = ''+(o.rawNumbers && val.t == \"n\" ? val.v : format_cell(val, null, o));\n\t\t\tfor(var i = 0, cc = 0; i !== txt.length; ++i) if((cc = txt.charCodeAt(i)) === fs || cc === rs || cc === 34 || o.forceQuotes) {txt = \"\\\"\" + txt.replace(qreg, '\"\"') + \"\\\"\"; break; }\n\t\t\tif(txt == \"ID\") txt = '\"ID\"';\n\t\t} else if(val.f != null && !val.F) {\n\t\t\tisempty = false;\n\t\t\ttxt = '=' + val.f; if(txt.indexOf(\",\") >= 0) txt = '\"' + txt.replace(qreg, '\"\"') + '\"';\n\t\t} else txt = \"\";\n\t\t/* NOTE: Excel CSV does not support array formulae */\n\t\trow.push(txt);\n\t}\n\tif(o.blankrows === false && isempty) return null;\n\treturn row.join(FS);\n}\n\nfunction sheet_to_csv(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/)/*:string*/ {\n\tvar out/*:Array<string>*/ = [];\n\tvar o = opts == null ? {} : opts;\n\tif(sheet == null || sheet[\"!ref\"] == null) return \"\";\n\tvar r = safe_decode_range(sheet[\"!ref\"]);\n\tvar FS = o.FS !== undefined ? o.FS : \",\", fs = FS.charCodeAt(0);\n\tvar RS = o.RS !== undefined ? o.RS : \"\\n\", rs = RS.charCodeAt(0);\n\tvar endregex = new RegExp((FS==\"|\" ? \"\\\\|\" : FS)+\"+$\");\n\tvar row = \"\", cols/*:Array<string>*/ = [];\n\to.dense = Array.isArray(sheet);\n\tvar colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet[\"!cols\"] || [];\n\tvar rowinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet[\"!rows\"] || [];\n\tfor(var C = r.s.c; C <= r.e.c; ++C) if (!((colinfo[C]||{}).hidden)) cols[C] = encode_col(C);\n\tvar w = 0;\n\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\tif ((rowinfo[R]||{}).hidden) continue;\n\t\trow = make_csv_row(sheet, r, R, cols, fs, rs, FS, o);\n\t\tif(row == null) { continue; }\n\t\tif(o.strip) row = row.replace(endregex,\"\");\n\t\tif(row || (o.blankrows !== false)) out.push((w++ ? RS : \"\") + row);\n\t}\n\tdelete o.dense;\n\treturn out.join(\"\");\n}\n\nfunction sheet_to_txt(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/) {\n\tif(!opts) opts = {}; opts.FS = \"\\t\"; opts.RS = \"\\n\";\n\tvar s = sheet_to_csv(sheet, opts);\n\tif(typeof $cptable == 'undefined' || opts.type == 'string') return s;\n\tvar o = $cptable.utils.encode(1200, s, 'str');\n\treturn String.fromCharCode(255) + String.fromCharCode(254) + o;\n}\n\nfunction sheet_to_formulae(sheet/*:Worksheet*/)/*:Array<string>*/ {\n\tvar y = \"\", x, val=\"\";\n\tif(sheet == null || sheet[\"!ref\"] == null) return [];\n\tvar r = safe_decode_range(sheet['!ref']), rr = \"\", cols/*:Array<string>*/ = [], C;\n\tvar cmds/*:Array<string>*/ = [];\n\tvar dense = Array.isArray(sheet);\n\tfor(C = r.s.c; C <= r.e.c; ++C) cols[C] = encode_col(C);\n\tfor(var R = r.s.r; R <= r.e.r; ++R) {\n\t\trr = encode_row(R);\n\t\tfor(C = r.s.c; C <= r.e.c; ++C) {\n\t\t\ty = cols[C] + rr;\n\t\t\tx = dense ? (sheet[R]||[])[C] : sheet[y];\n\t\t\tval = \"\";\n\t\t\tif(x === undefined) continue;\n\t\t\telse if(x.F != null) {\n\t\t\t\ty = x.F;\n\t\t\t\tif(!x.f) continue;\n\t\t\t\tval = x.f;\n\t\t\t\tif(y.indexOf(\":\") == -1) y = y + \":\" + y;\n\t\t\t}\n\t\t\tif(x.f != null) val = x.f;\n\t\t\telse if(x.t == 'z') continue;\n\t\t\telse if(x.t == 'n' && x.v != null) val = \"\" + x.v;\n\t\t\telse if(x.t == 'b') val = x.v ? \"TRUE\" : \"FALSE\";\n\t\t\telse if(x.w !== undefined) val = \"'\" + x.w;\n\t\t\telse if(x.v === undefined) continue;\n\t\t\telse if(x.t == 's') val = \"'\" + x.v;\n\t\t\telse val = \"\"+x.v;\n\t\t\tcmds[cmds.length] = y + \"=\" + val;\n\t\t}\n\t}\n\treturn cmds;\n}\n\nfunction sheet_add_json(_ws/*:?Worksheet*/, js/*:Array<any>*/, opts)/*:Worksheet*/ {\n\tvar o = opts || {};\n\tvar offset = +!o.skipHeader;\n\tvar ws/*:Worksheet*/ = _ws || ({}/*:any*/);\n\tvar _R = 0, _C = 0;\n\tif(ws && o.origin != null) {\n\t\tif(typeof o.origin == 'number') _R = o.origin;\n\t\telse {\n\t\t\tvar _origin/*:CellAddress*/ = typeof o.origin == \"string\" ? decode_cell(o.origin) : o.origin;\n\t\t\t_R = _origin.r; _C = _origin.c;\n\t\t}\n\t}\n\tvar cell/*:Cell*/;\n\tvar range/*:Range*/ = ({s: {c:0, r:0}, e: {c:_C, r:_R + js.length - 1 + offset}}/*:any*/);\n\tif(ws['!ref']) {\n\t\tvar _range = safe_decode_range(ws['!ref']);\n\t\trange.e.c = Math.max(range.e.c, _range.e.c);\n\t\trange.e.r = Math.max(range.e.r, _range.e.r);\n\t\tif(_R == -1) { _R = _range.e.r + 1; range.e.r = _R + js.length - 1 + offset; }\n\t} else {\n\t\tif(_R == -1) { _R = 0; range.e.r = js.length - 1 + offset; }\n\t}\n\tvar hdr/*:Array<string>*/ = o.header || [], C = 0;\n\n\tjs.forEach(function (JS, R/*:number*/) {\n\t\tkeys(JS).forEach(function(k) {\n\t\t\tif((C=hdr.indexOf(k)) == -1) hdr[C=hdr.length] = k;\n\t\t\tvar v = JS[k];\n\t\t\tvar t = 'z';\n\t\t\tvar z = \"\";\n\t\t\tvar ref = encode_cell({c:_C + C,r:_R + R + offset});\n\t\t\tcell = ws_get_cell_stub(ws, ref);\n\t\t\tif(v && typeof v === 'object' && !(v instanceof Date)){\n\t\t\t\tws[ref] = v;\n\t\t\t} else {\n\t\t\t\tif(typeof v == 'number') t = 'n';\n\t\t\t\telse if(typeof v == 'boolean') t = 'b';\n\t\t\t\telse if(typeof v == 'string') t = 's';\n\t\t\t\telse if(v instanceof Date) {\n\t\t\t\t\tt = 'd';\n\t\t\t\t\tif(!o.cellDates) { t = 'n'; v = datenum(v); }\n\t\t\t\t\tz = (o.dateNF || table_fmt[14]);\n\t\t\t\t}\n\t\t\t\telse if(v === null && o.nullError) { t = 'e'; v = 0; }\n\t\t\t\tif(!cell) ws[ref] = cell = ({t:t, v:v}/*:any*/);\n\t\t\t\telse {\n\t\t\t\t\tcell.t = t; cell.v = v;\n\t\t\t\t\tdelete cell.w; delete cell.R;\n\t\t\t\t\tif(z) cell.z = z;\n\t\t\t\t}\n\t\t\t\tif(z) cell.z = z;\n\t\t\t}\n\t\t});\n\t});\n\trange.e.c = Math.max(range.e.c, _C + hdr.length - 1);\n\tvar __R = encode_row(_R);\n\tif(offset) for(C = 0; C < hdr.length; ++C) ws[encode_col(C + _C) + __R] = {t:'s', v:hdr[C]};\n\tws['!ref'] = encode_range(range);\n\treturn ws;\n}\nfunction json_to_sheet(js/*:Array<any>*/, opts)/*:Worksheet*/ { return sheet_add_json(null, js, opts); }\n\n/* get cell, creating a stub if necessary */\nfunction ws_get_cell_stub(ws/*:Worksheet*/, R, C/*:?number*/)/*:Cell*/ {\n\t/* A1 cell address */\n\tif(typeof R == \"string\") {\n\t\t/* dense */\n\t\tif(Array.isArray(ws)) {\n\t\t\tvar RC = decode_cell(R);\n\t\t\tif(!ws[RC.r]) ws[RC.r] = [];\n\t\t\treturn ws[RC.r][RC.c] || (ws[RC.r][RC.c] = {t:'z'});\n\t\t}\n\t\treturn ws[R] || (ws[R] = {t:'z'});\n\t}\n\t/* cell address object */\n\tif(typeof R != \"number\") return ws_get_cell_stub(ws, encode_cell(R));\n\t/* R and C are 0-based indices */\n\treturn ws_get_cell_stub(ws, encode_cell({r:R,c:C||0}));\n}\n\n/* find sheet index for given name / validate index */\nfunction wb_sheet_idx(wb/*:Workbook*/, sh/*:number|string*/) {\n\tif(typeof sh == \"number\") {\n\t\tif(sh >= 0 && wb.SheetNames.length > sh) return sh;\n\t\tthrow new Error(\"Cannot find sheet # \" + sh);\n\t} else if(typeof sh == \"string\") {\n\t\tvar idx = wb.SheetNames.indexOf(sh);\n\t\tif(idx > -1) return idx;\n\t\tthrow new Error(\"Cannot find sheet name |\" + sh + \"|\");\n\t} else throw new Error(\"Cannot find sheet |\" + sh + \"|\");\n}\n\n/* simple blank workbook object */\nfunction book_new()/*:Workbook*/ {\n\treturn { SheetNames: [], Sheets: {} };\n}\n\n/* add a worksheet to the end of a given workbook */\nfunction book_append_sheet(wb/*:Workbook*/, ws/*:Worksheet*/, name/*:?string*/, roll/*:?boolean*/)/*:string*/ {\n\tvar i = 1;\n\tif(!name) for(; i <= 0xFFFF; ++i, name = undefined) if(wb.SheetNames.indexOf(name = \"Sheet\" + i) == -1) break;\n\tif(!name || wb.SheetNames.length >= 0xFFFF) throw new Error(\"Too many worksheets\");\n\tif(roll && wb.SheetNames.indexOf(name) >= 0) {\n\t\tvar m = name.match(/(^.*?)(\\d+)$/);\n\t\ti = m && +m[2] || 0;\n\t\tvar root = m && m[1] || name;\n\t\tfor(++i; i <= 0xFFFF; ++i) if(wb.SheetNames.indexOf(name = root + i) == -1) break;\n\t}\n\tcheck_ws_name(name);\n\tif(wb.SheetNames.indexOf(name) >= 0) throw new Error(\"Worksheet with name |\" + name + \"| already exists!\");\n\n\twb.SheetNames.push(name);\n\twb.Sheets[name] = ws;\n\treturn name;\n}\n\n/* set sheet visibility (visible/hidden/very hidden) */\nfunction book_set_sheet_visibility(wb/*:Workbook*/, sh/*:number|string*/, vis/*:number*/) {\n\tif(!wb.Workbook) wb.Workbook = {};\n\tif(!wb.Workbook.Sheets) wb.Workbook.Sheets = [];\n\n\tvar idx = wb_sheet_idx(wb, sh);\n\t// $FlowIgnore\n\tif(!wb.Workbook.Sheets[idx]) wb.Workbook.Sheets[idx] = {};\n\n\tswitch(vis) {\n\t\tcase 0: case 1: case 2: break;\n\t\tdefault: throw new Error(\"Bad sheet visibility setting \" + vis);\n\t}\n\t// $FlowIgnore\n\twb.Workbook.Sheets[idx].Hidden = vis;\n}\n\n/* set number format */\nfunction cell_set_number_format(cell/*:Cell*/, fmt/*:string|number*/) {\n\tcell.z = fmt;\n\treturn cell;\n}\n\n/* set cell hyperlink */\nfunction cell_set_hyperlink(cell/*:Cell*/, target/*:string*/, tooltip/*:?string*/) {\n\tif(!target) {\n\t\tdelete cell.l;\n\t} else {\n\t\tcell.l = ({ Target: target }/*:Hyperlink*/);\n\t\tif(tooltip) cell.l.Tooltip = tooltip;\n\t}\n\treturn cell;\n}\nfunction cell_set_internal_link(cell/*:Cell*/, range/*:string*/, tooltip/*:?string*/) { return cell_set_hyperlink(cell, \"#\" + range, tooltip); }\n\n/* add to cell comments */\nfunction cell_add_comment(cell/*:Cell*/, text/*:string*/, author/*:?string*/) {\n\tif(!cell.c) cell.c = [];\n\tcell.c.push({t:text, a:author||\"SheetJS\"});\n}\n\n/* set array formula and flush related cells */\nfunction sheet_set_array_formula(ws/*:Worksheet*/, range, formula/*:string*/, dynamic/*:boolean*/) {\n\tvar rng = typeof range != \"string\" ? range : safe_decode_range(range);\n\tvar rngstr = typeof range == \"string\" ? range : encode_range(range);\n\tfor(var R = rng.s.r; R <= rng.e.r; ++R) for(var C = rng.s.c; C <= rng.e.c; ++C) {\n\t\tvar cell = ws_get_cell_stub(ws, R, C);\n\t\tcell.t = 'n';\n\t\tcell.F = rngstr;\n\t\tdelete cell.v;\n\t\tif(R == rng.s.r && C == rng.s.c) {\n\t\t\tcell.f = formula;\n\t\t\tif(dynamic) cell.D = true;\n\t\t}\n\t}\n\treturn ws;\n}\n\nvar utils/*:any*/ = {\n\tencode_col: encode_col,\n\tencode_row: encode_row,\n\tencode_cell: encode_cell,\n\tencode_range: encode_range,\n\tdecode_col: decode_col,\n\tdecode_row: decode_row,\n\tsplit_cell: split_cell,\n\tdecode_cell: decode_cell,\n\tdecode_range: decode_range,\n\tformat_cell: format_cell,\n\tsheet_add_aoa: sheet_add_aoa,\n\tsheet_add_json: sheet_add_json,\n\tsheet_add_dom: sheet_add_dom,\n\taoa_to_sheet: aoa_to_sheet,\n\tjson_to_sheet: json_to_sheet,\n\ttable_to_sheet: parse_dom_table,\n\ttable_to_book: table_to_book,\n\tsheet_to_csv: sheet_to_csv,\n\tsheet_to_txt: sheet_to_txt,\n\tsheet_to_json: sheet_to_json,\n\tsheet_to_html: sheet_to_html,\n\tsheet_to_formulae: sheet_to_formulae,\n\tsheet_to_row_object_array: sheet_to_json,\n\tsheet_get_cell: ws_get_cell_stub,\n\tbook_new: book_new,\n\tbook_append_sheet: book_append_sheet,\n\tbook_set_sheet_visibility: book_set_sheet_visibility,\n\tcell_set_number_format: cell_set_number_format,\n\tcell_set_hyperlink: cell_set_hyperlink,\n\tcell_set_internal_link: cell_set_internal_link,\n\tcell_add_comment: cell_add_comment,\n\tsheet_set_array_formula: sheet_set_array_formula,\n\tconsts: {\n\t\tSHEET_VISIBLE: 0,\n\t\tSHEET_HIDDEN: 1,\n\t\tSHEET_VERY_HIDDEN: 2\n\t}\n};\n\nvar _Readable;\nfunction set_readable(R) { _Readable = R; }\n\nfunction write_csv_stream(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/) {\n\tvar stream = _Readable();\n\tvar o = opts == null ? {} : opts;\n\tif(sheet == null || sheet[\"!ref\"] == null) { stream.push(null); return stream; }\n\tvar r = safe_decode_range(sheet[\"!ref\"]);\n\tvar FS = o.FS !== undefined ? o.FS : \",\", fs = FS.charCodeAt(0);\n\tvar RS = o.RS !== undefined ? o.RS : \"\\n\", rs = RS.charCodeAt(0);\n\tvar endregex = new RegExp((FS==\"|\" ? \"\\\\|\" : FS)+\"+$\");\n\tvar row/*:?string*/ = \"\", cols/*:Array<string>*/ = [];\n\to.dense = Array.isArray(sheet);\n\tvar colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet[\"!cols\"] || [];\n\tvar rowinfo/*:Array<RowInfo>*/ = o.skipHidden && sheet[\"!rows\"] || [];\n\tfor(var C = r.s.c; C <= r.e.c; ++C) if (!((colinfo[C]||{}).hidden)) cols[C] = encode_col(C);\n\tvar R = r.s.r;\n\tvar BOM = false, w = 0;\n\tstream._read = function() {\n\t\tif(!BOM) { BOM = true; return stream.push(\"\\uFEFF\"); }\n\t\twhile(R <= r.e.r) {\n\t\t\t++R;\n\t\t\tif ((rowinfo[R-1]||{}).hidden) continue;\n\t\t\trow = make_csv_row(sheet, r, R-1, cols, fs, rs, FS, o);\n\t\t\tif(row != null) {\n\t\t\t\tif(o.strip) row = row.replace(endregex,\"\");\n\t\t\t\tif(row || (o.blankrows !== false)) return stream.push((w++ ? RS : \"\") + row);\n\t\t\t}\n\t\t}\n\t\treturn stream.push(null);\n\t};\n\treturn stream;\n}\n\nfunction write_html_stream(ws/*:Worksheet*/, opts/*:?Sheet2HTMLOpts*/) {\n\tvar stream = _Readable();\n\n\tvar o = opts || {};\n\tvar header = o.header != null ? o.header : HTML_BEGIN;\n\tvar footer = o.footer != null ? o.footer : HTML_END;\n\tstream.push(header);\n\tvar r = decode_range(ws['!ref']);\n\to.dense = Array.isArray(ws);\n\tstream.push(make_html_preamble(ws, r, o));\n\tvar R = r.s.r;\n\tvar end = false;\n\tstream._read = function() {\n\t\tif(R > r.e.r) {\n\t\t\tif(!end) { end = true; stream.push(\"</table>\" + footer); }\n\t\t\treturn stream.push(null);\n\t\t}\n\t\twhile(R <= r.e.r) {\n\t\t\tstream.push(make_html_row(ws, r, R, o));\n\t\t\t++R;\n\t\t\tbreak;\n\t\t}\n\t};\n\treturn stream;\n}\n\nfunction write_json_stream(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/) {\n\tvar stream = _Readable({objectMode:true});\n\n\tif(sheet == null || sheet[\"!ref\"] == null) { stream.push(null); return stream; }\n\tvar val = {t:'n',v:0}, header = 0, offset = 1, hdr/*:Array<any>*/ = [], v=0, vv=\"\";\n\tvar r = {s:{r:0,c:0},e:{r:0,c:0}};\n\tvar o = opts || {};\n\tvar range = o.range != null ? o.range : sheet[\"!ref\"];\n\tif(o.header === 1) header = 1;\n\telse if(o.header === \"A\") header = 2;\n\telse if(Array.isArray(o.header)) header = 3;\n\tswitch(typeof range) {\n\t\tcase 'string': r = safe_decode_range(range); break;\n\t\tcase 'number': r = safe_decode_range(sheet[\"!ref\"]); r.s.r = range; break;\n\t\tdefault: r = range;\n\t}\n\tif(header > 0) offset = 0;\n\tvar rr = encode_row(r.s.r);\n\tvar cols/*:Array<string>*/ = [];\n\tvar counter = 0;\n\tvar dense = Array.isArray(sheet);\n\tvar R = r.s.r, C = 0;\n\tvar header_cnt = {};\n\tif(dense && !sheet[R]) sheet[R] = [];\n\tvar colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet[\"!cols\"] || [];\n\tvar rowinfo/*:Array<RowInfo>*/ = o.skipHidden && sheet[\"!rows\"] || [];\n\tfor(C = r.s.c; C <= r.e.c; ++C) {\n\t\tif(((colinfo[C]||{}).hidden)) continue;\n\t\tcols[C] = encode_col(C);\n\t\tval = dense ? sheet[R][C] : sheet[cols[C] + rr];\n\t\tswitch(header) {\n\t\t\tcase 1: hdr[C] = C - r.s.c; break;\n\t\t\tcase 2: hdr[C] = cols[C]; break;\n\t\t\tcase 3: hdr[C] = o.header[C - r.s.c]; break;\n\t\t\tdefault:\n\t\t\t\tif(val == null) val = {w: \"__EMPTY\", t: \"s\"};\n\t\t\t\tvv = v = format_cell(val, null, o);\n\t\t\t\tcounter = header_cnt[v] || 0;\n\t\t\t\tif(!counter) header_cnt[v] = 1;\n\t\t\t\telse {\n\t\t\t\t\tdo { vv = v + \"_\" + (counter++); } while(header_cnt[vv]); header_cnt[v] = counter;\n\t\t\t\t\theader_cnt[vv] = 1;\n\t\t\t\t}\n\t\t\t\thdr[C] = vv;\n\t\t}\n\t}\n\tR = r.s.r + offset;\n\tstream._read = function() {\n\t\twhile(R <= r.e.r) {\n\t\t\tif ((rowinfo[R-1]||{}).hidden) continue;\n\t\t\tvar row = make_json_row(sheet, r, R, cols, header, hdr, dense, o);\n\t\t\t++R;\n\t\t\tif((row.isempty === false) || (header === 1 ? o.blankrows !== false : !!o.blankrows)) {\n\t\t\t\tstream.push(row.row);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\treturn stream.push(null);\n\t};\n\treturn stream;\n}\n\nvar __stream = {\n\tto_json: write_json_stream,\n\tto_html: write_html_stream,\n\tto_csv: write_csv_stream,\n  set_readable: set_readable\n};\nexport const version = XLSX.version;\nexport {\n\tparse_xlscfb,\n\tparse_zip,\n\treadSync as read,\n\treadFileSync as readFile,\n\treadFileSync,\n\twriteSync as write,\n\twriteFileSync as writeFile,\n\twriteFileSync,\n\twriteFileAsync,\n\twriteSyncXLSX as writeXLSX,\n\twriteFileSyncXLSX as writeFileXLSX,\n\tutils,\n\t__stream as stream,\n\tSSF,\n\tCFB\n};\n","/**\r\n * Servio de Exportao Excel - MPFM Monitor\r\n * Exporta dados no formato do modelo Modelo_Registro de Monitoramento_MPFM.xlsx\r\n */\r\n\r\nimport * as XLSX from 'xlsx'\r\nimport type { MonitoringDataRow } from '@/data/monitoring'\r\nimport type { CalibrationEvent } from '@/types'\r\n\r\n// ============================================================================\r\n// EXPORTAO DE MONITORAMENTO DIRIO\r\n// ============================================================================\r\n\r\nexport function downloadMonitoringExcelTemplate(data: MonitoringDataRow[]) {\r\n  const wb = XLSX.utils.book_new()\r\n  \r\n  // ============ ABA 1: RESUMO ============\r\n  const resumoData = [\r\n    ['MPFM Monitor - Registro de Monitoramento Dirio'],\r\n    [''],\r\n    ['Unidade:', 'FPSO Bacalhau'],\r\n    ['Operador:', 'Equinor Brasil Energia Ltda.'],\r\n    ['Perodo:', `${data[0]?.date || '-'} a ${data[data.length - 1]?.date || '-'}`],\r\n    ['Total de Registros:', data.length],\r\n    ['Gerado em:', new Date().toLocaleString('pt-BR')],\r\n    [''],\r\n    ['RESUMO ESTATSTICO'],\r\n    [''],\r\n  ]\r\n  \r\n  // Calcular estatsticas\r\n  if (data.length > 0) {\r\n    const stats = calculateStats(data)\r\n    resumoData.push(\r\n      ['Varivel', 'Mnimo', 'Mximo', 'Mdia', 'ltimo Valor'],\r\n      ['Balano HC (%)', stats.hcBalTS.min.toFixed(2), stats.hcBalTS.max.toFixed(2), stats.hcBalTS.avg.toFixed(2), stats.hcBalTS.last.toFixed(2)],\r\n      ['Balano Total (%)', stats.totalBalTS.min.toFixed(2), stats.totalBalTS.max.toFixed(2), stats.totalBalTS.avg.toFixed(2), stats.totalBalTS.last.toFixed(2)],\r\n      ['HC Subsea (t)', stats.subHC.min.toFixed(2), stats.subHC.max.toFixed(2), stats.subHC.avg.toFixed(2), stats.subHC.last.toFixed(2)],\r\n      ['HC Topside (t)', stats.topHC.min.toFixed(2), stats.topHC.max.toFixed(2), stats.topHC.avg.toFixed(2), stats.topHC.last.toFixed(2)],\r\n      ['HC Separador (t)', stats.sepHC.min.toFixed(2), stats.sepHC.max.toFixed(2), stats.sepHC.avg.toFixed(2), stats.sepHC.last.toFixed(2)],\r\n    )\r\n  }\r\n  \r\n  const wsResumo = XLSX.utils.aoa_to_sheet(resumoData)\r\n  wsResumo['!cols'] = [{ wch: 20 }, { wch: 12 }, { wch: 12 }, { wch: 12 }, { wch: 12 }]\r\n  XLSX.utils.book_append_sheet(wb, wsResumo, 'Resumo')\r\n  \r\n  // ============ ABA 2: MONITORAMENTO DIRIO ============\r\n  const monitoringHeaders = [\r\n    'Data',\r\n    'leo Sub (t)', 'Gs Sub (t)', 'gua Sub (t)', 'HC Sub (t)',\r\n    'leo Top (t)', 'Gs Top (t)', 'gua Top (t)', 'HC Top (t)',\r\n    'leo Sep (t)', 'Gs Sep (t)', 'gua Sep (t)', 'HC Sep (t)',\r\n    'Balano HC (%)', 'Balano Total (%)',\r\n    'Status HC', 'Status Total',\r\n    'Ao', \r\n    'Dias Consec. Sub-Sep', 'Dias Consec. Top-Sep', 'Dias Consec. Top-Sub'\r\n  ]\r\n  \r\n  const monitoringRows = data.map(row => [\r\n    row.date,\r\n    row.subOil || 0, row.subGas || 0, row.subWater || 0, row.subHC || 0,\r\n    row.topOil || 0, row.topGas || 0, row.topWater || 0, row.topHC || 0,\r\n    row.sepOil || 0, row.sepGas || 0, row.sepWater || 0, row.sepHC || 0,\r\n    row.hcBalTS || 0, row.totalBalTS || 0,\r\n    row.hcStatus || '-', row.totalStatus || '-',\r\n    row.action || '-',\r\n    row.subVsTS || 0, row.topVsTS || 0, row.topVsSub || 0\r\n  ])\r\n  \r\n  const wsMonitoring = XLSX.utils.aoa_to_sheet([monitoringHeaders, ...monitoringRows])\r\n  wsMonitoring['!cols'] = [\r\n    { wch: 12 }, // Data\r\n    { wch: 10 }, { wch: 10 }, { wch: 10 }, { wch: 10 }, // Subsea\r\n    { wch: 10 }, { wch: 10 }, { wch: 10 }, { wch: 10 }, // Topside\r\n    { wch: 10 }, { wch: 10 }, { wch: 10 }, { wch: 10 }, // Separator\r\n    { wch: 12 }, { wch: 14 }, // Balanos\r\n    { wch: 10 }, { wch: 12 }, // Status\r\n    { wch: 12 }, // Ao\r\n    { wch: 18 }, { wch: 18 }, { wch: 18 }, // Dias consecutivos\r\n  ]\r\n  XLSX.utils.book_append_sheet(wb, wsMonitoring, 'Monitoramento Dirio')\r\n  \r\n  // ============ ABA 3: SUBSEA ============\r\n  const subseaHeaders = ['Data', 'Medidor', 'leo (t)', 'Gs (t)', 'gua (t)', 'HC (t)', 'Total (t)']\r\n  const subseaRows = data.map(row => [\r\n    row.date,\r\n    'Subsea MPFM',\r\n    row.subOil || 0,\r\n    row.subGas || 0,\r\n    row.subWater || 0,\r\n    row.subHC || 0,\r\n    (row.subHC || 0) + (row.subWater || 0)\r\n  ])\r\n  const wsSubsea = XLSX.utils.aoa_to_sheet([subseaHeaders, ...subseaRows])\r\n  XLSX.utils.book_append_sheet(wb, wsSubsea, 'Subsea')\r\n  \r\n  // ============ ABA 4: TOPSIDE ============\r\n  const topsideHeaders = ['Data', 'Medidor', 'leo (t)', 'Gs (t)', 'gua (t)', 'HC (t)', 'Total (t)']\r\n  const topsideRows = data.map(row => [\r\n    row.date,\r\n    'Topside MPFM',\r\n    row.topOil || 0,\r\n    row.topGas || 0,\r\n    row.topWater || 0,\r\n    row.topHC || 0,\r\n    (row.topHC || 0) + (row.topWater || 0)\r\n  ])\r\n  const wsTopside = XLSX.utils.aoa_to_sheet([topsideHeaders, ...topsideRows])\r\n  XLSX.utils.book_append_sheet(wb, wsTopside, 'Topside')\r\n  \r\n  // ============ ABA 5: SEPARADOR ============\r\n  const separatorHeaders = ['Data', 'Referncia', 'leo (t)', 'Gs (t)', 'gua (t)', 'HC (t)', 'Total (t)']\r\n  const separatorRows = data.map(row => [\r\n    row.date,\r\n    'Test Separator',\r\n    row.sepOil || 0,\r\n    row.sepGas || 0,\r\n    row.sepWater || 0,\r\n    row.sepHC || 0,\r\n    (row.sepHC || 0) + (row.sepWater || 0)\r\n  ])\r\n  const wsSeparator = XLSX.utils.aoa_to_sheet([separatorHeaders, ...separatorRows])\r\n  XLSX.utils.book_append_sheet(wb, wsSeparator, 'Separador')\r\n  \r\n  // ============ ABA 6: BALANOS ============\r\n  const balanceHeaders = [\r\n    'Data',\r\n    'HC Subsea (t)', 'HC Topside (t)', 'HC Separator (t)',\r\n    'Balano Sub-Sep (%)', 'Balano Top-Sep (%)', 'Balano Top-Sub (%)',\r\n    'Status HC', 'Ao'\r\n  ]\r\n  const balanceRows = data.map(row => {\r\n    const hcBalSS = row.sepHC > 0 ? ((row.subHC - row.sepHC) / row.sepHC * 100) : 0\r\n    const hcBalTopSub = row.subHC > 0 ? ((row.topHC - row.subHC) / row.subHC * 100) : 0\r\n    return [\r\n      row.date,\r\n      row.subHC || 0,\r\n      row.topHC || 0,\r\n      row.sepHC || 0,\r\n      hcBalSS.toFixed(2),\r\n      (row.hcBalTS || 0).toFixed(2),\r\n      hcBalTopSub.toFixed(2),\r\n      row.hcStatus || '-',\r\n      row.action || '-'\r\n    ]\r\n  })\r\n  const wsBalance = XLSX.utils.aoa_to_sheet([balanceHeaders, ...balanceRows])\r\n  XLSX.utils.book_append_sheet(wb, wsBalance, 'Balanos')\r\n  \r\n  // Gerar e baixar\r\n  const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' })\r\n  const blob = new Blob([excelBuffer], {\r\n    type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  })\r\n  \r\n  const filename = `MPFM_Monitoramento_${new Date().toISOString().split('T')[0]}.xlsx`\r\n  downloadBlob(blob, filename)\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTAO DE CALIBRAO/AVALIAO DE DESEMPENHO\r\n// ============================================================================\r\n\r\nexport interface CalibrationFormData {\r\n  unidade?: string\r\n  operador?: string\r\n  densidadeOleo?: number\r\n  densidadeGas?: number\r\n  densidadeAgua?: number\r\n  gor?: number\r\n  bsw?: number\r\n  pvtReportId?: string\r\n  kFactors?: {\r\n    oleo: { k: number; status: string }\r\n    gas: { k: number; status: string }\r\n    agua: { k: number; status: string }\r\n  }\r\n  massas?: {\r\n    oleo: { mpfm: number; ref: number }\r\n    gas: { mpfm: number; ref: number }\r\n    agua: { mpfm: number; ref: number }\r\n  }\r\n  totalizadores?: Array<{\r\n    startTime: string\r\n    endTime: string\r\n    deltaHours?: number\r\n    mpfmOil?: number\r\n    mpfmGas?: number\r\n    mpfmWater?: number\r\n    refOil?: number\r\n    refGas?: number\r\n    refWater?: number\r\n  }>\r\n}\r\n\r\nexport function downloadCalibrationExcel(\r\n  event: CalibrationEvent,\r\n  formData: CalibrationFormData\r\n) {\r\n  const wb = XLSX.utils.book_new()\r\n  \r\n  // ============ ABA 1: IDENTIFICAO ============\r\n  const identData = [\r\n    ['REGISTRO DE AVALIAO DE DESEMPENHO - MPFM'],\r\n    [''],\r\n    ['ID do Evento:', event.id],\r\n    ['Medidor:', `${event.meterTag} - ${event.meterName}`],\r\n    ['Tipo:', event.type],\r\n    ['Status:', event.status],\r\n    ['Resultado:', event.result || '-'],\r\n    ['Data Incio:', event.startDate],\r\n    ['Data Fim:', event.endDate || '-'],\r\n    ['Responsvel:', event.responsible],\r\n    ['Unidade:', formData.unidade || 'FPSO Bacalhau'],\r\n    ['Operador:', formData.operador || 'Equinor Brasil Energia Ltda.'],\r\n    ['Gerado em:', new Date().toLocaleString('pt-BR')],\r\n  ]\r\n  const wsIdent = XLSX.utils.aoa_to_sheet(identData)\r\n  wsIdent['!cols'] = [{ wch: 15 }, { wch: 40 }]\r\n  XLSX.utils.book_append_sheet(wb, wsIdent, 'Identificao')\r\n  \r\n  // ============ ABA 2: PVT ============\r\n  const pvtData = [\r\n    ['CONFIGURAO PVT'],\r\n    [''],\r\n    ['Parmetro', 'Valor', 'Unidade'],\r\n    ['Densidade leo', formData.densidadeOleo || '-', 'kg/m'],\r\n    ['Densidade Gs', formData.densidadeGas || '-', 'kg/m'],\r\n    ['Densidade gua', formData.densidadeAgua || '-', 'kg/m'],\r\n    ['GOR', formData.gor || '-', 'Sm/Sm'],\r\n    ['BSW', formData.bsw || '-', '%'],\r\n    ['Relatrio PVT', formData.pvtReportId || '-', '-'],\r\n  ]\r\n  const wsPVT = XLSX.utils.aoa_to_sheet(pvtData)\r\n  XLSX.utils.book_append_sheet(wb, wsPVT, 'PVT')\r\n  \r\n  // ============ ABA 3: K-FACTORS ============\r\n  const kFactors = formData.kFactors || { \r\n    oleo: { k: 1, status: '-' }, \r\n    gas: { k: 1, status: '-' }, \r\n    agua: { k: 1, status: '-' } \r\n  }\r\n  const kData = [\r\n    ['K-FACTORS CALCULADOS'],\r\n    [''],\r\n    ['Fase', 'K-Factor', 'Limite Mn', 'Limite Mx', 'Status'],\r\n    ['leo', kFactors.oleo.k, 0.8, 1.2, kFactors.oleo.status],\r\n    ['Gs', kFactors.gas.k, 0.8, 1.2, kFactors.gas.status],\r\n    ['gua', kFactors.agua.k, 0.8, 1.2, kFactors.agua.status],\r\n    [''],\r\n    ['Frmula: K = Massa_Referncia / Massa_MPFM'],\r\n    ['Conforme ANP 44/2015 - Limites: 0.80  K  1.20'],\r\n  ]\r\n  const wsK = XLSX.utils.aoa_to_sheet(kData)\r\n  XLSX.utils.book_append_sheet(wb, wsK, 'K-Factors')\r\n  \r\n  // ============ ABA 4: BALANO DE MASSA ============\r\n  const massas = formData.massas || { \r\n    oleo: { mpfm: 0, ref: 0 }, \r\n    gas: { mpfm: 0, ref: 0 }, \r\n    agua: { mpfm: 0, ref: 0 } \r\n  }\r\n  \r\n  const calcDesvio = (mpfm: number, ref: number) => \r\n    ref === 0 ? 0 : ((mpfm - ref) / ref) * 100\r\n  \r\n  const massData = [\r\n    ['BALANO DE MASSA'],\r\n    [''],\r\n    ['Fase', 'MPFM (kg)', 'Referncia (kg)', 'Delta (kg)', 'Desvio (%)', 'Limite', 'Status'],\r\n    [\r\n      'leo',\r\n      massas.oleo.mpfm,\r\n      massas.oleo.ref,\r\n      massas.oleo.mpfm - massas.oleo.ref,\r\n      calcDesvio(massas.oleo.mpfm, massas.oleo.ref).toFixed(2),\r\n      '10%',\r\n      Math.abs(calcDesvio(massas.oleo.mpfm, massas.oleo.ref)) <= 10 ? 'OK' : 'FORA'\r\n    ],\r\n    [\r\n      'Gs',\r\n      massas.gas.mpfm,\r\n      massas.gas.ref,\r\n      massas.gas.mpfm - massas.gas.ref,\r\n      calcDesvio(massas.gas.mpfm, massas.gas.ref).toFixed(2),\r\n      '10%',\r\n      Math.abs(calcDesvio(massas.gas.mpfm, massas.gas.ref)) <= 10 ? 'OK' : 'FORA'\r\n    ],\r\n    [\r\n      'HC Total',\r\n      massas.oleo.mpfm + massas.gas.mpfm,\r\n      massas.oleo.ref + massas.gas.ref,\r\n      (massas.oleo.mpfm + massas.gas.mpfm) - (massas.oleo.ref + massas.gas.ref),\r\n      calcDesvio(massas.oleo.mpfm + massas.gas.mpfm, massas.oleo.ref + massas.gas.ref).toFixed(2),\r\n      '10%',\r\n      Math.abs(calcDesvio(massas.oleo.mpfm + massas.gas.mpfm, massas.oleo.ref + massas.gas.ref)) <= 10 ? 'OK' : 'FORA'\r\n    ],\r\n  ]\r\n  const wsMass = XLSX.utils.aoa_to_sheet(massData)\r\n  XLSX.utils.book_append_sheet(wb, wsMass, 'Balano de Massa')\r\n  \r\n  // ============ ABA 5: TOTALIZADORES ============\r\n  if (formData.totalizadores && formData.totalizadores.length > 0) {\r\n    const totHeaders = [\r\n      'Incio', 'Fim', 'Durao (h)',\r\n      'MPFM leo', 'MPFM Gs', 'MPFM gua',\r\n      'Ref leo', 'Ref Gs', 'Ref gua'\r\n    ]\r\n    const totRows = formData.totalizadores.map(t => [\r\n      t.startTime,\r\n      t.endTime,\r\n      t.deltaHours || 0,\r\n      t.mpfmOil || 0,\r\n      t.mpfmGas || 0,\r\n      t.mpfmWater || 0,\r\n      t.refOil || 0,\r\n      t.refGas || 0,\r\n      t.refWater || 0\r\n    ])\r\n    const wsTot = XLSX.utils.aoa_to_sheet([\r\n      ['TOTALIZADORES'],\r\n      [''],\r\n      totHeaders,\r\n      ...totRows\r\n    ])\r\n    XLSX.utils.book_append_sheet(wb, wsTot, 'Totalizadores')\r\n  }\r\n  \r\n  // Gerar e baixar\r\n  const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' })\r\n  const blob = new Blob([excelBuffer], {\r\n    type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  })\r\n  \r\n  const filename = `${event.id}_Avaliacao_Desempenho.xlsx`\r\n  downloadBlob(blob, filename)\r\n}\r\n\r\n// ============================================================================\r\n// UTILITRIOS\r\n// ============================================================================\r\n\r\nfunction calculateStats(data: MonitoringDataRow[]) {\r\n  const getStats = (key: keyof MonitoringDataRow) => {\r\n    const values = data\r\n      .map(d => d[key] as number)\r\n      .filter(v => v !== undefined && v !== null && !isNaN(v))\r\n    \r\n    if (values.length === 0) return { min: 0, max: 0, avg: 0, last: 0 }\r\n    \r\n    return {\r\n      min: Math.min(...values),\r\n      max: Math.max(...values),\r\n      avg: values.reduce((a, b) => a + b, 0) / values.length,\r\n      last: values[values.length - 1],\r\n    }\r\n  }\r\n  \r\n  return {\r\n    hcBalTS: getStats('hcBalTS'),\r\n    totalBalTS: getStats('totalBalTS'),\r\n    subHC: getStats('subHC'),\r\n    topHC: getStats('topHC'),\r\n    sepHC: getStats('sepHC'),\r\n  }\r\n}\r\n\r\nfunction downloadBlob(blob: Blob, filename: string) {\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = filename\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\nexport default {\r\n  downloadMonitoringExcelTemplate,\r\n  downloadCalibrationExcel,\r\n}\r\n","/**\r\n * Pgina de Registro Dirio de Variveis - MPFM Monitor\r\n * Visualizao de variveis com grficos interativos e filtros\r\n */\r\n\r\nimport { useState, useMemo } from 'react'\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  AreaChart,\r\n  Area,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  ReferenceLine,\r\n  Brush,\r\n} from 'recharts'\r\nimport {\r\n  Calendar,\r\n  Filter,\r\n  RefreshCw,\r\n  Eye,\r\n  EyeOff,\r\n  TrendingUp,\r\n  Droplets,\r\n  Flame,\r\n  Activity,\r\n  Database,\r\n  FileSpreadsheet,\r\n} from 'lucide-react'\r\nimport { Button, Card, Badge, Select, Input, Tabs } from '@/components/ui'\r\nimport { useAppStore } from '@/store'\r\nimport { downloadMonitoringExcelTemplate } from '@/services/excelExport'\r\n\r\n// Definio das variveis disponveis\r\ninterface VariableConfig {\r\n  id: string\r\n  name: string\r\n  unit: string\r\n  color: string\r\n  category: 'production' | 'balance' | 'kfactor' | 'operational'\r\n  dataKey: string\r\n  icon: typeof TrendingUp\r\n}\r\n\r\nconst AVAILABLE_VARIABLES: VariableConfig[] = [\r\n  // Produo\r\n  { id: 'subOil', name: 'leo Subsea', unit: 't', color: '#3b82f6', category: 'production', dataKey: 'subOil', icon: Droplets },\r\n  { id: 'subGas', name: 'Gs Subsea', unit: 't', color: '#60a5fa', category: 'production', dataKey: 'subGas', icon: Flame },\r\n  { id: 'subWater', name: 'gua Subsea', unit: 't', color: '#93c5fd', category: 'production', dataKey: 'subWater', icon: Droplets },\r\n  { id: 'subHC', name: 'HC Subsea', unit: 't', color: '#2563eb', category: 'production', dataKey: 'subHC', icon: Activity },\r\n  { id: 'topOil', name: 'leo Topside', unit: 't', color: '#8b5cf6', category: 'production', dataKey: 'topOil', icon: Droplets },\r\n  { id: 'topGas', name: 'Gs Topside', unit: 't', color: '#a78bfa', category: 'production', dataKey: 'topGas', icon: Flame },\r\n  { id: 'topWater', name: 'gua Topside', unit: 't', color: '#c4b5fd', category: 'production', dataKey: 'topWater', icon: Droplets },\r\n  { id: 'topHC', name: 'HC Topside', unit: 't', color: '#7c3aed', category: 'production', dataKey: 'topHC', icon: Activity },\r\n  { id: 'sepOil', name: 'leo Separador', unit: 't', color: '#10b981', category: 'production', dataKey: 'sepOil', icon: Droplets },\r\n  { id: 'sepGas', name: 'Gs Separador', unit: 't', color: '#34d399', category: 'production', dataKey: 'sepGas', icon: Flame },\r\n  { id: 'sepWater', name: 'gua Separador', unit: 't', color: '#6ee7b7', category: 'production', dataKey: 'sepWater', icon: Droplets },\r\n  { id: 'sepHC', name: 'HC Separador', unit: 't', color: '#059669', category: 'production', dataKey: 'sepHC', icon: Activity },\r\n  // Balanos\r\n  { id: 'hcBalTS', name: 'Balano HC Top vs Sep', unit: '%', color: '#f59e0b', category: 'balance', dataKey: 'hcBalTS', icon: TrendingUp },\r\n  { id: 'totalBalTS', name: 'Balano Total Top vs Sep', unit: '%', color: '#f97316', category: 'balance', dataKey: 'totalBalTS', icon: TrendingUp },\r\n  { id: 'hcBalSS', name: 'Balano HC Sub vs Sep', unit: '%', color: '#eab308', category: 'balance', dataKey: 'hcBalSS', icon: TrendingUp },\r\n  // Dias consecutivos\r\n  { id: 'subVsTS', name: 'Dias Consec. Sub vs TS', unit: 'd', color: '#ef4444', category: 'operational', dataKey: 'subVsTS', icon: Calendar },\r\n  { id: 'topVsTS', name: 'Dias Consec. Top vs TS', unit: 'd', color: '#dc2626', category: 'operational', dataKey: 'topVsTS', icon: Calendar },\r\n  { id: 'topVsSub', name: 'Dias Consec. Top vs Sub', unit: 'd', color: '#b91c1c', category: 'operational', dataKey: 'topVsSub', icon: Calendar },\r\n]\r\n\r\nexport function RegistroDiario() {\r\n  const { monitoringData, setShowImportModal } = useAppStore()\r\n  \r\n  // Estados de filtro\r\n  const [startDate, setStartDate] = useState('')\r\n  const [endDate, setEndDate] = useState('')\r\n  const [selectedVariables, setSelectedVariables] = useState<string[]>(['subHC', 'topHC', 'sepHC', 'hcBalTS'])\r\n  const [chartType, setChartType] = useState<'line' | 'area' | 'bar'>('line')\r\n  const [activeTab, setActiveTab] = useState('grafico')\r\n  const [categoryFilter, setCategoryFilter] = useState<string>('all')\r\n\r\n  // Dados filtrados\r\n  const filteredData = useMemo(() => {\r\n    let data = [...monitoringData]\r\n    \r\n    if (startDate) {\r\n      data = data.filter(d => d.date >= startDate)\r\n    }\r\n    if (endDate) {\r\n      data = data.filter(d => d.date <= endDate)\r\n    }\r\n    \r\n    // Ordenar por data\r\n    data.sort((a, b) => a.date.localeCompare(b.date))\r\n    \r\n    return data\r\n  }, [monitoringData, startDate, endDate])\r\n\r\n  // Variveis filtradas por categoria\r\n  const filteredVariables = useMemo(() => {\r\n    if (categoryFilter === 'all') return AVAILABLE_VARIABLES\r\n    return AVAILABLE_VARIABLES.filter(v => v.category === categoryFilter)\r\n  }, [categoryFilter])\r\n\r\n  // Toggle varivel selecionada\r\n  const toggleVariable = (varId: string) => {\r\n    setSelectedVariables(prev => \r\n      prev.includes(varId) \r\n        ? prev.filter(v => v !== varId)\r\n        : [...prev, varId]\r\n    )\r\n  }\r\n\r\n  // Estatsticas das variveis selecionadas\r\n  const statistics = useMemo(() => {\r\n    const stats: Record<string, { min: number; max: number; avg: number; last: number }> = {}\r\n    \r\n    selectedVariables.forEach(varId => {\r\n      const values = filteredData\r\n        .map(d => (d as unknown as Record<string, number>)[varId])\r\n        .filter(v => v !== undefined && v !== null && !isNaN(v))\r\n      \r\n      if (values.length > 0) {\r\n        stats[varId] = {\r\n          min: Math.min(...values),\r\n          max: Math.max(...values),\r\n          avg: values.reduce((a, b) => a + b, 0) / values.length,\r\n          last: values[values.length - 1],\r\n        }\r\n      }\r\n    })\r\n    \r\n    return stats\r\n  }, [filteredData, selectedVariables])\r\n\r\n  // Exportar dados\r\n  const handleExport = () => {\r\n    downloadMonitoringExcelTemplate(filteredData)\r\n  }\r\n\r\n  // Renderizar grfico baseado no tipo\r\n  const renderChart = () => {\r\n    if (filteredData.length === 0) {\r\n      return (\r\n        <div className=\"flex flex-col items-center justify-center h-80 text-zinc-500\">\r\n          <Database className=\"w-12 h-12 mb-4\" />\r\n          <p>Nenhum dado disponvel para visualizao</p>\r\n          <Button \r\n            variant=\"secondary\" \r\n            className=\"mt-4\"\r\n            onClick={() => setShowImportModal(true)}\r\n          >\r\n            Importar Dados\r\n          </Button>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const selectedConfigs = AVAILABLE_VARIABLES.filter(v => selectedVariables.includes(v.id))\r\n    \r\n    const commonProps = {\r\n      data: filteredData,\r\n      margin: { top: 10, right: 30, left: 0, bottom: 0 },\r\n    }\r\n\r\n    const ChartComponent = chartType === 'line' ? LineChart : chartType === 'area' ? AreaChart : BarChart\r\n\r\n    return (\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ChartComponent {...commonProps}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#27272a\" />\r\n          <XAxis \r\n            dataKey=\"date\" \r\n            stroke=\"#71717a\" \r\n            fontSize={11}\r\n            tickFormatter={(v) => v.slice(5)}\r\n          />\r\n          <YAxis stroke=\"#71717a\" fontSize={11} />\r\n          <Tooltip\r\n            contentStyle={{\r\n              backgroundColor: '#18181b',\r\n              border: '1px solid #27272a',\r\n              borderRadius: '8px',\r\n              fontSize: '12px',\r\n            }}\r\n            labelFormatter={(label) => `Data: ${label}`}\r\n          />\r\n          <Legend wrapperStyle={{ fontSize: '11px' }} />\r\n          \r\n          {/* Linhas de referncia para balanos */}\r\n          {selectedVariables.some(v => v.includes('Bal')) && (\r\n            <>\r\n              <ReferenceLine y={10} stroke=\"#ef4444\" strokeDasharray=\"5 5\" label=\"10%\" />\r\n              <ReferenceLine y={-10} stroke=\"#ef4444\" strokeDasharray=\"5 5\" />\r\n              <ReferenceLine y={7} stroke=\"#f59e0b\" strokeDasharray=\"3 3\" label=\"7%\" />\r\n              <ReferenceLine y={-7} stroke=\"#f59e0b\" strokeDasharray=\"3 3\" />\r\n            </>\r\n          )}\r\n          \r\n          {selectedConfigs.map(config => {\r\n            if (chartType === 'line') {\r\n              return (\r\n                <Line\r\n                  key={config.id}\r\n                  type=\"monotone\"\r\n                  dataKey={config.dataKey}\r\n                  stroke={config.color}\r\n                  name={config.name}\r\n                  strokeWidth={2}\r\n                  dot={{ r: 3 }}\r\n                  activeDot={{ r: 5 }}\r\n                />\r\n              )\r\n            } else if (chartType === 'area') {\r\n              return (\r\n                <Area\r\n                  key={config.id}\r\n                  type=\"monotone\"\r\n                  dataKey={config.dataKey}\r\n                  stroke={config.color}\r\n                  fill={config.color}\r\n                  fillOpacity={0.3}\r\n                  name={config.name}\r\n                  strokeWidth={2}\r\n                />\r\n              )\r\n            } else {\r\n              return (\r\n                <Bar\r\n                  key={config.id}\r\n                  dataKey={config.dataKey}\r\n                  fill={config.color}\r\n                  name={config.name}\r\n                  radius={[4, 4, 0, 0]}\r\n                />\r\n              )\r\n            }\r\n          })}\r\n          \r\n          <Brush \r\n            dataKey=\"date\" \r\n            height={30} \r\n            stroke=\"#3b82f6\"\r\n            fill=\"#18181b\"\r\n            tickFormatter={(v) => v.slice(5)}\r\n          />\r\n        </ChartComponent>\r\n      </ResponsiveContainer>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-xl font-semibold text-white flex items-center gap-2\">\r\n            <Activity className=\"w-6 h-6 text-blue-500\" />\r\n            Registro Dirio de Variveis\r\n          </h1>\r\n          <p className=\"text-sm text-zinc-400 mt-1\">\r\n            Visualizao e anlise de variveis operacionais com grficos interativos\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"secondary\" onClick={() => setShowImportModal(true)}>\r\n            <Database className=\"w-4 h-4 mr-2\" />\r\n            Importar\r\n          </Button>\r\n          <Button onClick={handleExport} disabled={filteredData.length === 0}>\r\n            <FileSpreadsheet className=\"w-4 h-4 mr-2\" />\r\n            Exportar Excel\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex flex-wrap items-center gap-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Calendar className=\"w-4 h-4 text-zinc-400\" />\r\n            <Input\r\n              type=\"date\"\r\n              value={startDate}\r\n              onChange={(e) => setStartDate(e.target.value)}\r\n              className=\"w-40\"\r\n              placeholder=\"Data inicial\"\r\n            />\r\n            <span className=\"text-zinc-500\">at</span>\r\n            <Input\r\n              type=\"date\"\r\n              value={endDate}\r\n              onChange={(e) => setEndDate(e.target.value)}\r\n              className=\"w-40\"\r\n              placeholder=\"Data final\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-2\">\r\n            <Filter className=\"w-4 h-4 text-zinc-400\" />\r\n            <Select\r\n              value={categoryFilter}\r\n              onChange={(e) => setCategoryFilter(e.target.value)}\r\n              options={[\r\n                { value: 'all', label: 'Todas Categorias' },\r\n                { value: 'production', label: 'Produo' },\r\n                { value: 'balance', label: 'Balanos' },\r\n                { value: 'operational', label: 'Operacional' },\r\n              ]}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <Select\r\n              value={chartType}\r\n              onChange={(e) => setChartType(e.target.value as 'line' | 'area' | 'bar')}\r\n              options={[\r\n                { value: 'line', label: ' Linha' },\r\n                { value: 'area', label: ' rea' },\r\n                { value: 'bar', label: ' Barras' },\r\n              ]}\r\n            />\r\n          </div>\r\n\r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"sm\"\r\n            onClick={() => {\r\n              setStartDate('')\r\n              setEndDate('')\r\n              setCategoryFilter('all')\r\n            }}\r\n          >\r\n            <RefreshCw className=\"w-4 h-4 mr-1\" />\r\n            Limpar\r\n          </Button>\r\n\r\n          <Badge variant=\"info\">\r\n            {filteredData.length} registros\r\n          </Badge>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Tabs */}\r\n      <Tabs\r\n        activeTab={activeTab}\r\n        onChange={setActiveTab}\r\n        tabs={[\r\n          { id: 'grafico', label: 'Grfico', icon: TrendingUp },\r\n          { id: 'tabela', label: 'Tabela de Dados', icon: Database },\r\n          { id: 'estatisticas', label: 'Estatsticas', icon: Activity },\r\n        ]}\r\n      />\r\n\r\n      {/* Seleo de Variveis */}\r\n      {activeTab === 'grafico' && (\r\n        <Card className=\"p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-sm font-medium text-white flex items-center gap-2\">\r\n              <Eye className=\"w-4 h-4\" />\r\n              Variveis no Grfico\r\n            </h3>\r\n            <div className=\"flex gap-2\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setSelectedVariables(filteredVariables.map(v => v.id))}\r\n              >\r\n                Selecionar Todas\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setSelectedVariables([])}\r\n              >\r\n                <EyeOff className=\"w-4 h-4 mr-1\" />\r\n                Limpar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {filteredVariables.map(variable => {\r\n              const isSelected = selectedVariables.includes(variable.id)\r\n              const Icon = variable.icon\r\n              return (\r\n                <button\r\n                  key={variable.id}\r\n                  onClick={() => toggleVariable(variable.id)}\r\n                  className={`\r\n                    flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-all\r\n                    ${isSelected \r\n                      ? 'bg-blue-500/20 text-blue-400 border border-blue-500/50' \r\n                      : 'bg-zinc-800 text-zinc-400 border border-zinc-700 hover:border-zinc-600'}\r\n                  `}\r\n                >\r\n                  <div \r\n                    className=\"w-3 h-3 rounded-full\" \r\n                    style={{ backgroundColor: isSelected ? variable.color : '#52525b' }}\r\n                  />\r\n                  <Icon className=\"w-3 h-3\" />\r\n                  {variable.name}\r\n                  <span className=\"text-xs opacity-60\">({variable.unit})</span>\r\n                </button>\r\n              )\r\n            })}\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Grfico */}\r\n      {activeTab === 'grafico' && (\r\n        <Card className=\"p-4\">\r\n          {renderChart()}\r\n        </Card>\r\n      )}\r\n\r\n      {/* Tabela de Dados */}\r\n      {activeTab === 'tabela' && (\r\n        <Card noPadding>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-zinc-800 sticky top-0\">\r\n                <tr>\r\n                  <th className=\"text-left p-3 text-zinc-400 font-medium\">Data</th>\r\n                  {selectedVariables.map(varId => {\r\n                    const config = AVAILABLE_VARIABLES.find(v => v.id === varId)\r\n                    return (\r\n                      <th key={varId} className=\"text-right p-3 text-zinc-400 font-medium\">\r\n                        {config?.name} ({config?.unit})\r\n                      </th>\r\n                    )\r\n                  })}\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-zinc-800\">\r\n                {filteredData.map((row, idx) => (\r\n                  <tr key={row.id || idx} className=\"hover:bg-zinc-800/50\">\r\n                    <td className=\"p-3 text-white font-mono\">{row.date}</td>\r\n                    {selectedVariables.map(varId => {\r\n                      const value = (row as unknown as Record<string, number>)[varId]\r\n                      const isBalance = varId.includes('Bal')\r\n                      const isOutOfLimit = isBalance && Math.abs(value || 0) > 10\r\n                      \r\n                      return (\r\n                        <td \r\n                          key={varId} \r\n                          className={`p-3 text-right font-mono ${\r\n                            isOutOfLimit ? 'text-red-400' : 'text-zinc-300'\r\n                          }`}\r\n                        >\r\n                          {value !== undefined ? value.toFixed(2) : '-'}\r\n                        </td>\r\n                      )\r\n                    })}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          {filteredData.length === 0 && (\r\n            <div className=\"p-8 text-center text-zinc-500\">\r\n              Nenhum dado disponvel\r\n            </div>\r\n          )}\r\n        </Card>\r\n      )}\r\n\r\n      {/* Estatsticas */}\r\n      {activeTab === 'estatisticas' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {selectedVariables.map(varId => {\r\n            const config = AVAILABLE_VARIABLES.find(v => v.id === varId)\r\n            const stats = statistics[varId]\r\n            const Icon = config?.icon || Activity\r\n            \r\n            if (!stats || !config) return null\r\n            \r\n            return (\r\n              <Card key={varId} className=\"p-4\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <div \r\n                    className=\"w-10 h-10 rounded-lg flex items-center justify-center\"\r\n                    style={{ backgroundColor: `${config.color}20` }}\r\n                  >\r\n                    <Icon className=\"w-5 h-5\" style={{ color: config.color }} />\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-medium text-white\">{config.name}</h4>\r\n                    <p className=\"text-xs text-zinc-500\">{config.unit}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <p className=\"text-xs text-zinc-500\">Mnimo</p>\r\n                    <p className=\"text-lg font-mono text-white\">{stats.min.toFixed(2)}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-zinc-500\">Mximo</p>\r\n                    <p className=\"text-lg font-mono text-white\">{stats.max.toFixed(2)}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-zinc-500\">Mdia</p>\r\n                    <p className=\"text-lg font-mono text-white\">{stats.avg.toFixed(2)}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-zinc-500\">ltimo Valor</p>\r\n                    <p className=\"text-lg font-mono text-blue-400\">{stats.last.toFixed(2)}</p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            )\r\n          })}\r\n          \r\n          {selectedVariables.length === 0 && (\r\n            <Card className=\"col-span-full p-8 text-center text-zinc-500\">\r\n              Selecione variveis no grfico para ver as estatsticas\r\n            </Card>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RegistroDiario\r\n","import React, { useState, useCallback } from 'react'\r\nimport { Modal } from '@/components/ui/Modal'\r\nimport { Input } from '@/components/ui/Input'\r\nimport { Select } from '@/components/ui/Select'\r\nimport { Button } from '@/components/ui/Button'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport type { Meter } from '@/types'\r\n\r\ninterface NewMeterModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  editingMeter?: Meter | null\r\n}\r\n\r\ninterface FormData {\r\n  tag: string\r\n  name: string\r\n  location: 'TOPSIDE' | 'SUBSEA'\r\n  status: 'active' | 'inactive'\r\n  serialNumber: string\r\n  manufacturer: string\r\n  model: string\r\n  lastCalibration: string\r\n  kOil: number\r\n  kGas: number\r\n  kWater: number\r\n  daysToCalibration: number\r\n}\r\n\r\nconst initialFormData: FormData = {\r\n  tag: '',\r\n  name: '',\r\n  location: 'TOPSIDE',\r\n  status: 'active',\r\n  serialNumber: '',\r\n  manufacturer: 'Pietro Fiorentini',\r\n  model: 'Flowtwin',\r\n  lastCalibration: new Date().toISOString().split('T')[0],\r\n  kOil: 1.0,\r\n  kGas: 1.0,\r\n  kWater: 1.0,\r\n  daysToCalibration: 365,\r\n}\r\n\r\nexport const NewMeterModal: React.FC<NewMeterModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  editingMeter,\r\n}) => {\r\n  const { addMeter, updateMeter } = useAppStore()\r\n  const [formData, setFormData] = useState<FormData>(\r\n    editingMeter\r\n      ? {\r\n          tag: editingMeter.tag,\r\n          name: editingMeter.name,\r\n          location: editingMeter.location,\r\n          status: editingMeter.status,\r\n          serialNumber: editingMeter.serialNumber,\r\n          manufacturer: editingMeter.manufacturer,\r\n          model: editingMeter.model,\r\n          lastCalibration: editingMeter.lastCalibration,\r\n          kOil: editingMeter.kOil,\r\n          kGas: editingMeter.kGas,\r\n          kWater: editingMeter.kWater,\r\n          daysToCalibration: editingMeter.daysToCalibration,\r\n        }\r\n      : initialFormData\r\n  )\r\n  const [errors, setErrors] = useState<Partial<Record<keyof FormData, string>>>({})\r\n\r\n  const handleChange = useCallback(\r\n    (field: keyof FormData, value: string | number) => {\r\n      setFormData((prev) => ({ ...prev, [field]: value }))\r\n      setErrors((prev) => ({ ...prev, [field]: undefined }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const validate = (): boolean => {\r\n    const newErrors: Partial<Record<keyof FormData, string>> = {}\r\n\r\n    if (!formData.tag.trim()) {\r\n      newErrors.tag = 'Tag  obrigatrio'\r\n    } else if (!/^[A-Z0-9_-]+$/i.test(formData.tag)) {\r\n      newErrors.tag = 'Tag deve conter apenas letras, nmeros, - ou _'\r\n    }\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Nome  obrigatrio'\r\n    }\r\n\r\n    if (!formData.serialNumber.trim()) {\r\n      newErrors.serialNumber = 'Nmero de srie  obrigatrio'\r\n    }\r\n\r\n    if (!formData.manufacturer.trim()) {\r\n      newErrors.manufacturer = 'Fabricante  obrigatrio'\r\n    }\r\n\r\n    if (!formData.model.trim()) {\r\n      newErrors.model = 'Modelo  obrigatrio'\r\n    }\r\n\r\n    if (formData.kOil < 0.8 || formData.kOil > 1.2) {\r\n      newErrors.kOil = 'K-factor deve estar entre 0.8 e 1.2'\r\n    }\r\n\r\n    if (formData.kGas < 0.8 || formData.kGas > 1.2) {\r\n      newErrors.kGas = 'K-factor deve estar entre 0.8 e 1.2'\r\n    }\r\n\r\n    if (formData.kWater < 0.8 || formData.kWater > 1.2) {\r\n      newErrors.kWater = 'K-factor deve estar entre 0.8 e 1.2'\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!validate()) return\r\n\r\n    if (editingMeter) {\r\n      updateMeter(editingMeter.id, formData)\r\n    } else {\r\n      addMeter(formData)\r\n    }\r\n\r\n    setFormData(initialFormData)\r\n    onClose()\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setFormData(initialFormData)\r\n    setErrors({})\r\n    onClose()\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={handleClose}\r\n      title={editingMeter ? 'Editar Medidor' : 'Novo Medidor MPFM'}\r\n      size=\"lg\"\r\n    >\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Identificao */}\r\n        <div className=\"border-b border-gray-200 pb-4\">\r\n          <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">Identificao</h3>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Input\r\n              label=\"Tag do Medidor *\"\r\n              placeholder=\"Ex: MPFM-P55-001\"\r\n              value={formData.tag}\r\n              onChange={(e) => handleChange('tag', e.target.value.toUpperCase())}\r\n              error={errors.tag}\r\n            />\r\n            <Input\r\n              label=\"Nome *\"\r\n              placeholder=\"Nome descritivo\"\r\n              value={formData.name}\r\n              onChange={(e) => handleChange('name', e.target.value)}\r\n              error={errors.name}\r\n            />\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-4 mt-4\">\r\n            <Select\r\n              label=\"Localizao *\"\r\n              value={formData.location}\r\n              onChange={(e) => handleChange('location', e.target.value as 'TOPSIDE' | 'SUBSEA')}\r\n              options={[\r\n                { value: 'TOPSIDE', label: 'Topside' },\r\n                { value: 'SUBSEA', label: 'Subsea' },\r\n              ]}\r\n            />\r\n            <Select\r\n              label=\"Status *\"\r\n              value={formData.status}\r\n              onChange={(e) => handleChange('status', e.target.value as 'active' | 'inactive')}\r\n              options={[\r\n                { value: 'active', label: 'Ativo' },\r\n                { value: 'inactive', label: 'Inativo' },\r\n              ]}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Informaes Tcnicas */}\r\n        <div className=\"border-b border-gray-200 pb-4\">\r\n          <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">Informaes Tcnicas</h3>\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <Input\r\n              label=\"Nmero de Srie *\"\r\n              placeholder=\"SN-XXXXXX\"\r\n              value={formData.serialNumber}\r\n              onChange={(e) => handleChange('serialNumber', e.target.value)}\r\n              error={errors.serialNumber}\r\n            />\r\n            <Input\r\n              label=\"Fabricante *\"\r\n              placeholder=\"Pietro Fiorentini\"\r\n              value={formData.manufacturer}\r\n              onChange={(e) => handleChange('manufacturer', e.target.value)}\r\n              error={errors.manufacturer}\r\n            />\r\n            <Input\r\n              label=\"Modelo *\"\r\n              placeholder=\"Flowtwin\"\r\n              value={formData.model}\r\n              onChange={(e) => handleChange('model', e.target.value)}\r\n              error={errors.model}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Calibrao */}\r\n        <div className=\"border-b border-gray-200 pb-4\">\r\n          <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">Calibrao</h3>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Input\r\n              label=\"ltima Calibrao\"\r\n              type=\"date\"\r\n              value={formData.lastCalibration}\r\n              onChange={(e) => handleChange('lastCalibration', e.target.value)}\r\n            />\r\n            <Input\r\n              label=\"Dias at Prxima Calibrao\"\r\n              type=\"number\"\r\n              value={formData.daysToCalibration}\r\n              onChange={(e) => handleChange('daysToCalibration', parseInt(e.target.value) || 0)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* K-Factors */}\r\n        <div>\r\n          <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">\r\n            K-Factors (faixa vlida: 0.8 - 1.2)\r\n          </h3>\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <Input\r\n              label=\"K-Factor leo\"\r\n              type=\"number\"\r\n              step=\"0.001\"\r\n              min=\"0.8\"\r\n              max=\"1.2\"\r\n              value={formData.kOil}\r\n              onChange={(e) => handleChange('kOil', parseFloat(e.target.value) || 1.0)}\r\n              error={errors.kOil}\r\n            />\r\n            <Input\r\n              label=\"K-Factor Gs\"\r\n              type=\"number\"\r\n              step=\"0.001\"\r\n              min=\"0.8\"\r\n              max=\"1.2\"\r\n              value={formData.kGas}\r\n              onChange={(e) => handleChange('kGas', parseFloat(e.target.value) || 1.0)}\r\n              error={errors.kGas}\r\n            />\r\n            <Input\r\n              label=\"K-Factor gua\"\r\n              type=\"number\"\r\n              step=\"0.001\"\r\n              min=\"0.8\"\r\n              max=\"1.2\"\r\n              value={formData.kWater}\r\n              onChange={(e) => handleChange('kWater', parseFloat(e.target.value) || 1.0)}\r\n              error={errors.kWater}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Botes */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={handleClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button type=\"submit\" variant=\"primary\">\r\n            {editingMeter ? 'Salvar Alteraes' : 'Adicionar Medidor'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  )\r\n}\r\n","export default {}","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = root.pdfjsLib = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pdfjs-dist/build/pdf\", [], () => { return (root.pdfjsLib = factory()); });\n\telse if(typeof exports === 'object')\n\t\texports[\"pdfjs-dist/build/pdf\"] = root.pdfjsLib = factory();\n\telse\n\t\troot[\"pdfjs-dist/build/pdf\"] = root.pdfjsLib = factory();\n})(globalThis, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ([\n/* 0 */,\n/* 1 */\n/***/ ((__unused_webpack_module, exports) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.VerbosityLevel = exports.Util = exports.UnknownErrorException = exports.UnexpectedResponseException = exports.TextRenderingMode = exports.RenderingIntentFlag = exports.PromiseCapability = exports.PermissionFlag = exports.PasswordResponses = exports.PasswordException = exports.PageActionEventType = exports.OPS = exports.MissingPDFException = exports.MAX_IMAGE_SIZE_TO_CACHE = exports.LINE_FACTOR = exports.LINE_DESCENT_FACTOR = exports.InvalidPDFException = exports.ImageKind = exports.IDENTITY_MATRIX = exports.FormatError = exports.FeatureTest = exports.FONT_IDENTITY_MATRIX = exports.DocumentActionEventType = exports.CMapCompressionType = exports.BaseException = exports.BASELINE_FACTOR = exports.AnnotationType = exports.AnnotationReplyType = exports.AnnotationPrefix = exports.AnnotationMode = exports.AnnotationFlag = exports.AnnotationFieldFlag = exports.AnnotationEditorType = exports.AnnotationEditorPrefix = exports.AnnotationEditorParamsType = exports.AnnotationBorderStyleType = exports.AnnotationActionEventType = exports.AbortException = void 0;\nexports.assert = assert;\nexports.bytesToString = bytesToString;\nexports.createValidAbsoluteUrl = createValidAbsoluteUrl;\nexports.getModificationDate = getModificationDate;\nexports.getUuid = getUuid;\nexports.getVerbosityLevel = getVerbosityLevel;\nexports.info = info;\nexports.isArrayBuffer = isArrayBuffer;\nexports.isArrayEqual = isArrayEqual;\nexports.isNodeJS = void 0;\nexports.normalizeUnicode = normalizeUnicode;\nexports.objectFromMap = objectFromMap;\nexports.objectSize = objectSize;\nexports.setVerbosityLevel = setVerbosityLevel;\nexports.shadow = shadow;\nexports.string32 = string32;\nexports.stringToBytes = stringToBytes;\nexports.stringToPDFString = stringToPDFString;\nexports.stringToUTF8String = stringToUTF8String;\nexports.unreachable = unreachable;\nexports.utf8StringToString = utf8StringToString;\nexports.warn = warn;\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nexports.isNodeJS = isNodeJS;\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nexports.IDENTITY_MATRIX = IDENTITY_MATRIX;\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nexports.FONT_IDENTITY_MATRIX = FONT_IDENTITY_MATRIX;\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6;\nexports.MAX_IMAGE_SIZE_TO_CACHE = MAX_IMAGE_SIZE_TO_CACHE;\nconst LINE_FACTOR = 1.35;\nexports.LINE_FACTOR = LINE_FACTOR;\nconst LINE_DESCENT_FACTOR = 0.35;\nexports.LINE_DESCENT_FACTOR = LINE_DESCENT_FACTOR;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nexports.BASELINE_FACTOR = BASELINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100\n};\nexports.RenderingIntentFlag = RenderingIntentFlag;\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nexports.AnnotationMode = AnnotationMode;\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nexports.AnnotationEditorPrefix = AnnotationEditorPrefix;\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  STAMP: 13,\n  INK: 15\n};\nexports.AnnotationEditorType = AnnotationEditorType;\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23\n};\nexports.AnnotationEditorParamsType = AnnotationEditorParamsType;\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nexports.PermissionFlag = PermissionFlag;\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nexports.TextRenderingMode = TextRenderingMode;\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nexports.ImageKind = ImageKind;\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nexports.AnnotationType = AnnotationType;\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nexports.AnnotationReplyType = AnnotationReplyType;\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nexports.AnnotationFlag = AnnotationFlag;\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nexports.AnnotationFieldFlag = AnnotationFieldFlag;\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nexports.AnnotationBorderStyleType = AnnotationBorderStyleType;\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nexports.AnnotationActionEventType = AnnotationActionEventType;\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nexports.DocumentActionEventType = DocumentActionEventType;\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nexports.PageActionEventType = PageActionEventType;\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nexports.VerbosityLevel = VerbosityLevel;\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1\n};\nexports.CMapCompressionType = CMapCompressionType;\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\nexports.OPS = OPS;\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nexports.PasswordResponses = PasswordResponses;\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {}\n  return null;\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nexports.BaseException = BaseException;\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nexports.PasswordException = PasswordException;\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nexports.UnknownErrorException = UnknownErrorException;\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nexports.InvalidPDFException = InvalidPDFException;\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\nexports.MissingPDFException = MissingPDFException;\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\nexports.UnexpectedResponseException = UnexpectedResponseException;\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nexports.FormatError = FormatError;\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nexports.AbortException = AbortException;\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get platform() {\n    if (typeof navigator === \"undefined\") {\n      return shadow(this, \"platform\", {\n        isWin: false,\n        isMac: false\n      });\n    }\n    return shadow(this, \"platform\", {\n      isWin: navigator.platform.includes(\"Win\"),\n      isMac: navigator.platform.includes(\"Mac\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nexports.FeatureTest = FeatureTest;\nconst hexNumbers = [...Array(256).keys()].map(n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[1] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[2];\n      minMax[2] = temp;\n      temp = minMax[1];\n      minMax[1] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[1] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[4];\n    minMax[2] += transform[5];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n    const tvalues = [],\n      bounds = [[], []];\n    let a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n    for (let i = 0; i < 2; ++i) {\n      if (i === 0) {\n        b = 6 * x0 - 12 * x1 + 6 * x2;\n        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n        c = 3 * x1 - 3 * x0;\n      } else {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n      if (Math.abs(a) < 1e-12) {\n        if (Math.abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      sqrtb2ac = Math.sqrt(b2ac);\n      if (b2ac < 0) {\n        continue;\n      }\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n    let j = tvalues.length,\n      mt;\n    const jlen = j;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n      bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n    }\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    bounds[0].length = bounds[1].length = jlen + 2;\n    return [Math.min(...bounds[0]), Math.min(...bounds[1]), Math.max(...bounds[0]), Math.max(...bounds[1])];\n  }\n}\nexports.Util = Util;\nconst PDFStringTranslateTable = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac];\nfunction stringToPDFString(str) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        return decoder.decode(buffer);\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const code = PDFStringTranslateTable[str.charCodeAt(i)];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayBuffer(v) {\n  return typeof v === \"object\" && v?.byteLength !== undefined;\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nclass PromiseCapability {\n  #settled = false;\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = data => {\n        this.#settled = true;\n        resolve(data);\n      };\n      this.reject = reason => {\n        this.#settled = true;\n        reject(reason);\n      };\n    });\n  }\n  get settled() {\n    return this.#settled;\n  }\n}\nexports.PromiseCapability = PromiseCapability;\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"\", \"t\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => {\n    return p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2);\n  });\n}\nfunction getUuid() {\n  if (typeof crypto !== \"undefined\" && typeof crypto?.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (typeof crypto !== \"undefined\" && typeof crypto?.getRandomValues === \"function\") {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nexports.AnnotationPrefix = AnnotationPrefix;\n\n/***/ }),\n/* 2 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.RenderTask = exports.PDFWorkerUtil = exports.PDFWorker = exports.PDFPageProxy = exports.PDFDocumentProxy = exports.PDFDocumentLoadingTask = exports.PDFDataRangeTransport = exports.LoopbackPort = exports.DefaultStandardFontDataFactory = exports.DefaultFilterFactory = exports.DefaultCanvasFactory = exports.DefaultCMapReaderFactory = void 0;\nObject.defineProperty(exports, \"SVGGraphics\", ({\n  enumerable: true,\n  get: function () {\n    return _displaySvg.SVGGraphics;\n  }\n}));\nexports.build = void 0;\nexports.getDocument = getDocument;\nexports.version = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _annotation_storage = __w_pdfjs_require__(3);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _font_loader = __w_pdfjs_require__(9);\nvar _displayNode_utils = __w_pdfjs_require__(10);\nvar _canvas = __w_pdfjs_require__(11);\nvar _worker_options = __w_pdfjs_require__(14);\nvar _message_handler = __w_pdfjs_require__(15);\nvar _metadata = __w_pdfjs_require__(16);\nvar _optional_content_config = __w_pdfjs_require__(17);\nvar _transport_stream = __w_pdfjs_require__(18);\nvar _displayFetch_stream = __w_pdfjs_require__(19);\nvar _displayNetwork = __w_pdfjs_require__(22);\nvar _displayNode_stream = __w_pdfjs_require__(23);\nvar _displaySvg = __w_pdfjs_require__(24);\nvar _xfa_text = __w_pdfjs_require__(25);\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536;\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nconst DELAYED_CLEANUP_TIMEOUT = 5000;\nconst DefaultCanvasFactory = _util.isNodeJS ? _displayNode_utils.NodeCanvasFactory : _display_utils.DOMCanvasFactory;\nexports.DefaultCanvasFactory = DefaultCanvasFactory;\nconst DefaultCMapReaderFactory = _util.isNodeJS ? _displayNode_utils.NodeCMapReaderFactory : _display_utils.DOMCMapReaderFactory;\nexports.DefaultCMapReaderFactory = DefaultCMapReaderFactory;\nconst DefaultFilterFactory = _util.isNodeJS ? _displayNode_utils.NodeFilterFactory : _display_utils.DOMFilterFactory;\nexports.DefaultFilterFactory = DefaultFilterFactory;\nconst DefaultStandardFontDataFactory = _util.isNodeJS ? _displayNode_utils.NodeStandardFontDataFactory : _display_utils.DOMStandardFontDataFactory;\nexports.DefaultStandardFontDataFactory = DefaultStandardFontDataFactory;\nfunction getDocument(src) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if ((0, _util.isArrayBuffer)(src)) {\n    src = {\n      data: src\n    };\n  }\n  if (typeof src !== \"object\") {\n    throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error(\"Invalid parameter object: need either .data, .range or .url\");\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !(0, _display_utils.isDataScheme)(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl = typeof src.standardFontDataUrl === \"string\" ? src.standardFontDataUrl : null;\n  const StandardFontDataFactory = src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !_util.isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : _util.isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !_util.isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : CMapReaderFactory === _display_utils.DOMCMapReaderFactory && StandardFontDataFactory === _display_utils.DOMStandardFontDataFactory && cMapUrl && standardFontDataUrl && (0, _display_utils.isValidFetchUrl)(cMapUrl, document.baseURI) && (0, _display_utils.isValidFetchUrl)(standardFontDataUrl, document.baseURI);\n  const canvasFactory = src.canvasFactory || new DefaultCanvasFactory({\n    ownerDocument\n  });\n  const filterFactory = src.filterFactory || new DefaultFilterFactory({\n    docId,\n    ownerDocument\n  });\n  const styleElement = null;\n  (0, _util.setVerbosityLevel)(verbosity);\n  const transportFactory = {\n    canvasFactory,\n    filterFactory\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    });\n  }\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: _worker_options.GlobalWorkerOptions.workerPort\n    };\n    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const fetchDocParams = {\n    docId,\n    apiVersion: '3.11.174',\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null\n    }\n  };\n  const transportParams = {\n    ignoreErrors,\n    isEvalSupported,\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    const workerIdPromise = _fetchDocument(worker, fetchDocParams);\n    const networkStreamPromise = new Promise(function (resolve) {\n      let networkStream;\n      if (rangeTransport) {\n        networkStream = new _transport_stream.PDFDataTransportStream({\n          length,\n          initialData: rangeTransport.initialData,\n          progressiveDone: rangeTransport.progressiveDone,\n          contentDispositionFilename: rangeTransport.contentDispositionFilename,\n          disableRange,\n          disableStream\n        }, rangeTransport);\n      } else if (!data) {\n        const createPDFNetworkStream = params => {\n          if (_util.isNodeJS) {\n            return new _displayNode_stream.PDFNodeStream(params);\n          }\n          return (0, _display_utils.isValidFetchUrl)(params.url) ? new _displayFetch_stream.PDFFetchStream(params) : new _displayNetwork.PDFNetworkStream(params);\n        };\n        networkStream = createPDFNetworkStream({\n          url,\n          length,\n          httpHeaders,\n          withCredentials,\n          rangeChunkSize,\n          disableRange,\n          disableStream\n        });\n      }\n      resolve(networkStream);\n    });\n    return Promise.all([workerIdPromise, networkStreamPromise]).then(function ([workerId, networkStream]) {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      const messageHandler = new _message_handler.MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nasync function _fetchDocument(worker, source) {\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  const workerId = await worker.messageHandler.sendWithPromise(\"GetDocRequest\", source, source.data ? [source.data.buffer] : null);\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  return workerId;\n}\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    return new URL(val, window.location).href;\n  } catch {\n    if (_util.isNodeJS && typeof val === \"string\") {\n      return val;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (_util.isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return (0, _util.stringToBytes)(val);\n  }\n  if (typeof val === \"object\" && !isNaN(val?.length) || (0, _util.isArrayBuffer)(val)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  constructor() {\n    this._capability = new _util.PromiseCapability();\n    this._transport = null;\n    this._worker = null;\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n    this.destroyed = false;\n    this.onPassword = null;\n    this.onProgress = null;\n  }\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\nexports.PDFDocumentLoadingTask = PDFDocumentLoadingTask;\nclass PDFDataRangeTransport {\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = new _util.PromiseCapability();\n  }\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n  requestDataRange(begin, end) {\n    (0, _util.unreachable)(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nexports.PDFDataRangeTransport = PDFDataRangeTransport;\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n    Object.defineProperty(this, \"getJavaScript\", {\n      value: () => {\n        (0, _display_utils.deprecated)(\"`PDFDocumentProxy.getJavaScript`, \" + \"please use `PDFDocumentProxy.getJSActions` instead.\");\n        return this.getJSActions().then(js => {\n          if (!js) {\n            return js;\n          }\n          const jsArr = [];\n          for (const name in js) {\n            jsArr.push(...js[name]);\n          }\n          return jsArr;\n        });\n      }\n    });\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return (0, _util.shadow)(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig() {\n    return this._transport.getOptionalContentConfig();\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nexports.PDFDocumentProxy = PDFDocumentProxy;\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new _display_utils.StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new _display_utils.PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const intentArgs = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, intentArgs.renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return (0, _util.shadow)(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = _util.AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage);\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    if (!optionalContentConfigPromise) {\n      optionalContentConfigPromise = this._transport.getOptionalContentConfig();\n    }\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(intentArgs.renderingIntent & _util.RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = new _util.PromiseCapability();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(!intentPrint);\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      this._stats?.timeEnd(\"Rendering\");\n      this._stats?.timeEnd(\"Overall\");\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = _util.AnnotationMode.ENABLE,\n    printAnnotationStorage = null\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = new _util.PromiseCapability();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => {\n        return _xfa_text.XfaText.textContent(xfa);\n      });\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null)\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(false);\n    if (resetStats && success) {\n      this._stats &&= new _display_utils.StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(true);\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable\n  }) {\n    const {\n      map,\n      transfers\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map\n    }, transfers);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup(true);\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof _display_utils.RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nexports.PDFPageProxy = PDFPageProxy;\nclass LoopbackPort {\n  #listeners = new Set();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    this.#listeners.clear();\n  }\n}\nexports.LoopbackPort = LoopbackPort;\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fallbackWorkerSrc: null,\n  fakeWorkerId: 0\n};\nexports.PDFWorkerUtil = PDFWorkerUtil;\n{\n  if (_util.isNodeJS && typeof require === \"function\") {\n    PDFWorkerUtil.isWorkerDisabled = true;\n    PDFWorkerUtil.fallbackWorkerSrc = \"./pdf.worker.js\";\n  } else if (typeof document === \"object\") {\n    const pdfjsFilePath = document?.currentScript?.src;\n    if (pdfjsFilePath) {\n      PDFWorkerUtil.fallbackWorkerSrc = pdfjsFilePath.replace(/(\\.(?:min\\.)?js)(\\?.*)?$/i, \".worker$1$2\");\n    }\n  }\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false;\n      }\n    } catch {\n      return false;\n    }\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    const wrapper = `importScripts(\"${url}\");`;\n    return URL.createObjectURL(new Blob([wrapper]));\n  };\n}\nclass PDFWorker {\n  static #workerPorts;\n  constructor({\n    name = null,\n    port = null,\n    verbosity = (0, _util.getVerbosityLevel)()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    this._readyCapability = new _util.PromiseCapability();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    if (port) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n  get promise() {\n    return this._readyCapability.promise;\n  }\n  get port() {\n    return this._port;\n  }\n  get messageHandler() {\n    return this._messageHandler;\n  }\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new _message_handler.MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {});\n    this._readyCapability.resolve();\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  _initialize() {\n    if (!PDFWorkerUtil.isWorkerDisabled && !PDFWorker._mainThreadWorkerMessageHandler) {\n      let {\n        workerSrc\n      } = PDFWorker;\n      try {\n        if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);\n        }\n        const worker = new Worker(workerSrc);\n        const messageHandler = new _message_handler.MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            this._setupFakeWorker();\n          }\n        };\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n            this._readyCapability.resolve();\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          try {\n            sendTest();\n          } catch {\n            this._setupFakeWorker();\n          }\n        });\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n        sendTest();\n        return;\n      } catch {\n        (0, _util.info)(\"The worker has been disabled.\");\n      }\n    }\n    this._setupFakeWorker();\n  }\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      (0, _util.warn)(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this._port = port;\n      const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n      const workerHandler = new _message_handler.MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      const messageHandler = new _message_handler.MessageHandler(id, id + \"_worker\", port);\n      this._messageHandler = messageHandler;\n      this._readyCapability.resolve();\n      messageHandler.send(\"configure\", {\n        verbosity: this.verbosity\n      });\n    }).catch(reason => {\n      this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (_worker_options.GlobalWorkerOptions.workerSrc) {\n      return _worker_options.GlobalWorkerOptions.workerSrc;\n    }\n    if (PDFWorkerUtil.fallbackWorkerSrc !== null) {\n      if (!_util.isNodeJS) {\n        (0, _display_utils.deprecated)('No \"GlobalWorkerOptions.workerSrc\" specified.');\n      }\n      return PDFWorkerUtil.fallbackWorkerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get _mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      const mainWorkerMessageHandler = this._mainThreadWorkerMessageHandler;\n      if (mainWorkerMessageHandler) {\n        return mainWorkerMessageHandler;\n      }\n      if (_util.isNodeJS && typeof require === \"function\") {\n        const worker = eval(\"require\")(this.workerSrc);\n        return worker.WorkerMessageHandler;\n      }\n      await (0, _display_utils.loadScript)(this.workerSrc);\n      return window.pdfjsWorker.WorkerMessageHandler;\n    };\n    return (0, _util.shadow)(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nexports.PDFWorker = PDFWorker;\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new _font_loader.FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = new _util.PromiseCapability();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return (0, _util.shadow)(this, \"annotationStorage\", new _annotation_storage.AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = _util.AnnotationMode.ENABLE, printAnnotationStorage = null, isOpList = false) {\n    let renderingIntent = _util.RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = _annotation_storage.SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = _util.RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = _util.RenderingIntentFlag.PRINT;\n        break;\n      default:\n        (0, _util.warn)(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    switch (annotationMode) {\n      case _util.AnnotationMode.DISABLE:\n        renderingIntent += _util.RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case _util.AnnotationMode.ENABLE:\n        break;\n      case _util.AnnotationMode.ENABLE_FORMS:\n        renderingIntent += _util.RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case _util.AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += _util.RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        const annotationStorage = renderingIntent & _util.RenderingIntentFlag.PRINT && printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        (0, _util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isOpList) {\n      renderingIntent += _util.RenderingIntentFlag.OPLIST;\n    }\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = new _util.PromiseCapability();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      this._networkStream?.cancelAllRequests(new _util.AbortException(\"Worker was terminated.\"));\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      (0, _util.assert)(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          (0, _util.assert)(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = new _util.PromiseCapability();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total\n            });\n          };\n        }\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength\n        });\n      }, headersCapability.reject);\n      return headersCapability.promise;\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      (0, _util.assert)(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          (0, _util.assert)(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new _util.PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new _util.InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new _util.MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new _util.UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new _util.UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          (0, _util.unreachable)(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this.#passwordCapability = new _util.PromiseCapability();\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(new _util.PasswordException(exception.message, exception.code));\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      if (this.commonObjs.has(id)) {\n        return;\n      }\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            (0, _util.warn)(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new _font_loader.FontFaceObject(exportedData, {\n            isEvalSupported: params.isEvalSupported,\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            inspectFont\n          });\n          this.fontLoader.bind(font).catch(reason => {\n            return messageHandler.sendWithPromise(\"FontFallback\", {\n              id\n            });\n          }).finally(() => {\n            if (!params.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n          if (imageData) {\n            let length;\n            if (imageData.bitmap) {\n              const {\n                width,\n                height\n              } = imageData;\n              length = width * height * 4;\n            } else {\n              length = imageData.data?.length || 0;\n            }\n            if (length > _util.MAX_IMAGE_SIZE_TO_CACHE) {\n              pageProxy._maybeCleanupAfterRender = true;\n            }\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      (0, _util.warn)(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfers\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfers).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (typeof ref !== \"object\" || ref === null || !Number.isInteger(ref.num) || ref.num < 0 || !Number.isInteger(ref.gen) || ref.gen < 0) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig() {\n    return this.messageHandler.sendWithPromise(\"GetOptionalContentConfig\", null).then(results => {\n      return new _optional_content_config.OptionalContentConfig(results);\n    });\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => {\n      return {\n        info: results[0],\n        metadata: results[1] ? new _metadata.Metadata(results[1]) : null,\n        contentDispositionFilename: this._fullReader?.filename ?? null,\n        contentLength: this._fullReader?.contentLength ?? null\n      };\n    });\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n  }\n  get loadingParams() {\n    const {\n      disableAutoFetch,\n      enableXfa\n    } = this._params;\n    return (0, _util.shadow)(this, \"loadingParams\", {\n      disableAutoFetch,\n      enableXfa\n    });\n  }\n}\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      capability: new _util.PromiseCapability(),\n      data: null\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.capability.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj?.capability.settled) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return obj?.capability.settled || false;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.capability.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n    this.onContinue = null;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nexports.RenderTask = RenderTask;\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = new _util.PromiseCapability();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new _canvas.CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    this.callback(error || new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay));\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = '3.11.174';\nexports.version = version;\nconst build = 'ce8716743';\nexports.build = build;\n\n/***/ }),\n/* 3 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SerializableEmpty = exports.PrintAnnotationStorage = exports.AnnotationStorage = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _editor = __w_pdfjs_require__(4);\nvar _murmurhash = __w_pdfjs_require__(8);\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfers: undefined\n});\nexports.SerializableEmpty = SerializableEmpty;\nclass AnnotationStorage {\n  #modified = false;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof _editor.AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof _editor.AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  getAll() {\n    return this.#storage.size > 0 ? (0, _util.objectFromMap)(this.#storage) : null;\n  }\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new _murmurhash.MurmurHash3_64(),\n      transfers = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof _editor.AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfers.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfers\n    } : SerializableEmpty;\n  }\n}\nexports.AnnotationStorage = AnnotationStorage;\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfers\n    } = parent.serializable;\n    const clone = structuredClone(map, transfers ? {\n      transfer: transfers\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfers\n    };\n  }\n  get print() {\n    (0, _util.unreachable)(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n}\nexports.PrintAnnotationStorage = PrintAnnotationStorage;\n\n/***/ }),\n/* 4 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.AnnotationEditor = void 0;\nvar _tools = __w_pdfjs_require__(5);\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nclass AnnotationEditor {\n  #altText = \"\";\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #boundFocusin = this.focusin.bind(this);\n  #boundFocusout = this.focusout.bind(this);\n  #hasBeenClicked = false;\n  #isEditing = false;\n  #isInEditMode = false;\n  _initialOptions = Object.create(null);\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  _l10nPromise = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new _tools.ColorManager();\n  static _zIndex = 1;\n  static SMALL_EDITOR_SIZE = 0;\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      (0, _util.unreachable)(\"Cannot initialize AnnotationEditor.\");\n    }\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get _defaultLineColor() {\n    return (0, _util.shadow)(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, options = null) {\n    AnnotationEditor._l10nPromise ||= new Map([\"editor_alt_text_button_label\", \"editor_alt_text_edit_button_label\", \"editor_alt_text_decorative_tooltip\"].map(str => [str, l10n.get(str)]));\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    (0, _util.unreachable)(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  drag(tx, ty) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.#getBaseTranslation();\n    x += bx;\n    y += by;\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  #getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  fixAndSetPosition() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    switch (this.rotation) {\n      case 0:\n        x = Math.max(0, Math.min(pageWidth - width, x));\n        y = Math.max(0, Math.min(pageHeight - height, y));\n        break;\n      case 90:\n        x = Math.max(0, Math.min(pageWidth - height, x));\n        y = Math.min(pageHeight, Math.max(width, y));\n        break;\n      case 180:\n        x = Math.min(pageWidth, Math.max(width, x));\n        y = Math.min(pageHeight, Math.max(height, y));\n        break;\n      case 270:\n        x = Math.min(pageWidth, Math.max(height, x));\n        y = Math.max(0, Math.min(pageHeight - width, y));\n        break;\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.#getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return _util.FeatureTest.isCSSRoundSupported ? [Math.round(scaledWidth), Math.round(scaledHeight)] : [scaledWidth, scaledHeight];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n    this.#altTextButton?.classList.toggle(\"small\", width < AnnotationEditor.SMALL_EDITOR_SIZE || height < AnnotationEditor.SMALL_EDITOR_SIZE);\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"];\n    if (!this._willKeepAspectRatio) {\n      classes.push(\"topMiddle\", \"middleRight\", \"bottomMiddle\", \"middleLeft\");\n    }\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name));\n      div.addEventListener(\"contextmenu\", _display_utils.noContextMenu);\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = _util.FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = {\n      passive: true,\n      capture: true\n    };\n    window.addEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      this._isDraggable = savedDraggable;\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      const newX = this.x;\n      const newY = this.y;\n      const newWidth = this.width;\n      const newHeight = this.height;\n      if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n        return;\n      }\n      this.addCommands({\n        cmd: () => {\n          this.width = newWidth;\n          this.height = newHeight;\n          this.x = newX;\n          this.y = newY;\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n          this.fixAndSetPosition();\n        },\n        undo: () => {\n          this.width = savedWidth;\n          this.height = savedHeight;\n          this.x = savedX;\n          this.y = savedY;\n          const [parentWidth, parentHeight] = this.parentDimensions;\n          this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n          this.fixAndSetPosition();\n        },\n        mustExec: true\n      });\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const round = x => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let [deltaX, deltaY] = this.screenToPageTranslation(event.movementX, event.movementY);\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = Math.max(minWidth, Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))) / savedWidth;\n    } else {\n      ratioY = Math.max(minHeight, Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))) / savedHeight;\n    }\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n  async addAltTextButton() {\n    if (this.#altTextButton) {\n      return;\n    }\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    const msg = await AnnotationEditor._l10nPromise.get(\"editor_alt_text_button_label\");\n    altText.textContent = msg;\n    altText.setAttribute(\"aria-label\", msg);\n    altText.tabIndex = \"0\";\n    altText.addEventListener(\"contextmenu\", _display_utils.noContextMenu);\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation());\n    altText.addEventListener(\"click\", event => {\n      event.preventDefault();\n      this._uiManager.editAltText(this);\n    }, {\n      capture: true\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        event.preventDefault();\n        this._uiManager.editAltText(this);\n      }\n    });\n    this.#setAltTextButtonState();\n    this.div.append(altText);\n    if (!AnnotationEditor.SMALL_EDITOR_SIZE) {\n      const PERCENT = 40;\n      AnnotationEditor.SMALL_EDITOR_SIZE = Math.min(128, Math.round(altText.getBoundingClientRect().width * (1 + PERCENT / 100)));\n    }\n  }\n  async #setAltTextButtonState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove(\"done\");\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    AnnotationEditor._l10nPromise.get(\"editor_alt_text_edit_button_label\").then(msg => {\n      button.setAttribute(\"aria-label\", msg);\n    });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      const id = tooltip.id = `alt-text-tooltip-${this.id}`;\n      button.setAttribute(\"aria-describedby\", id);\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n            source: this,\n            details: {\n              type: \"editing\",\n              subtype: this.editorType,\n              data: {\n                action: \"alt_text_tooltip\"\n              }\n            }\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n        this.#altTextTooltip?.classList.remove(\"show\");\n      });\n    }\n    button.classList.add(\"done\");\n    tooltip.innerText = this.#altTextDecorative ? await AnnotationEditor._l10nPromise.get(\"editor_alt_text_decorative_tooltip\") : this.#altText;\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  get altTextData() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set altTextData({\n    altText,\n    decorative\n  }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setAltTextButtonState();\n  }\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.setAttribute(\"tabIndex\", 0);\n    this.setInForeground();\n    this.div.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div.addEventListener(\"focusout\", this.#boundFocusout);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      this.div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    (0, _tools.bindEvents)(this, this.div, [\"pointerdown\"]);\n    return this.div;\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = _util.FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    this.#setUpDragSession(event);\n  }\n  #setUpDragSession(event) {\n    if (!this._isDraggable) {\n      return;\n    }\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      pointerMoveOptions = {\n        passive: true,\n        capture: true\n      };\n      pointerMoveCallback = e => {\n        const [tx, ty] = this.screenToPageTranslation(e.movementX, e.movementY);\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n    }\n    const pointerUpCallback = () => {\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      if (isSelected) {\n        window.removeEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n      }\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        const {\n          isMac\n        } = _util.FeatureTest.platform;\n        if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n          this.parent.toggleSelected(this);\n        } else {\n          this.parent.setSelected(this);\n        }\n      }\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n  moveInDOM() {\n    this.parent?.moveEditorInDOM(this);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n  getRect(tx, ty) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (this.rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded() {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return false;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  rebuild() {\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div?.addEventListener(\"focusout\", this.#boundFocusout);\n  }\n  serialize(isForCopying = false, context = null) {\n    (0, _util.unreachable)(\"An editor must be serializable\");\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n  }\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus();\n    }\n  }\n  updateParams(type, value) {}\n  disableEditing() {\n    if (this.#altTextButton) {\n      this.#altTextButton.hidden = true;\n    }\n  }\n  enableEditing() {\n    if (this.#altTextButton) {\n      this.#altTextButton.hidden = false;\n    }\n  }\n  enterInEditMode() {}\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n}\nexports.AnnotationEditor = AnnotationEditor;\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex\n    };\n  }\n}\n\n/***/ }),\n/* 5 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.KeyboardManager = exports.CommandManager = exports.ColorManager = exports.AnnotationEditorUIManager = void 0;\nexports.bindEvents = bindEvents;\nexports.opacityToHex = opacityToHex;\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity))).toString(16).padStart(2, \"0\");\n}\nclass IdManager {\n  #id = 0;\n  getId() {\n    return `${_util.AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = (0, _util.getUuid)();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return (0, _util.shadow)(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        const response = await fetch(rawData);\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        image = await response.blob();\n      } else {\n        image = data.file = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    this.#commands[this.#position].undo();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      this.#commands[this.#position].cmd();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nexports.CommandManager = CommandManager;\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = _util.FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args)();\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\nexports.KeyboardManager = KeyboardManager;\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    (0, _display_utils.getColorValues)(colors);\n    return (0, _util.shadow)(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = (0, _display_utils.getRGB)(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return _util.Util.makeHexColor(...rgb);\n  }\n}\nexports.ColorManager = ColorManager;\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #commandManager = new CommandManager();\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  #filterFactory = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #lastActiveElement = null;\n  #mode = _util.AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #pageColors = null;\n  #boundBlur = this.blur.bind(this);\n  #boundFocus = this.focus.bind(this);\n  #boundCopy = this.copy.bind(this);\n  #boundCut = this.cut.bind(this);\n  #boundPaste = this.paste.bind(this);\n  #boundKeydown = this.keydown.bind(this);\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => {\n      const {\n        activeElement\n      } = document;\n      return activeElement && self.#container.contains(activeElement) && self.hasSomethingToControl();\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return (0, _util.shadow)(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, eventBus, pdfDocument, pageColors) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.viewParameters = {\n      realScale: _display_utils.PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n  }\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager.destroy();\n  }\n  get hcmFilter() {\n    return (0, _util.shadow)(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return (0, _util.shadow)(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * _display_utils.PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #addFocusManager() {\n    window.addEventListener(\"focus\", this.#boundFocus);\n    window.addEventListener(\"blur\", this.#boundBlur);\n  }\n  #removeFocusManager() {\n    window.removeEventListener(\"focus\", this.#boundFocus);\n    window.removeEventListener(\"blur\", this.#boundBlur);\n  }\n  blur() {\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    window.addEventListener(\"keydown\", this.#boundKeydown, {\n      capture: true\n    });\n  }\n  #removeKeyboardManager() {\n    window.removeEventListener(\"keydown\", this.#boundKeydown, {\n      capture: true\n    });\n  }\n  #addCopyPasteListeners() {\n    document.addEventListener(\"copy\", this.#boundCopy);\n    document.addEventListener(\"cut\", this.#boundCut);\n    document.addEventListener(\"paste\", this.#boundPaste);\n  }\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      (0, _util.warn)(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      (0, _util.warn)(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.getActive()?.shouldGetKeyboardEvents()) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  onEditingAction(details) {\n    if ([\"undo\", \"redo\", \"delete\", \"selectAll\"].includes(details.name)) {\n      this[details.name]();\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addKeyboardManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== _util.AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeKeyboardManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.getId();\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  updateMode(mode, editId = null) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === _util.AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    if (type === _util.AnnotationEditorParamsType.CREATE) {\n      this.currentLayer.addNewEditor(type);\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return (0, _util.shadow)(this, \"imageManager\", new ImageManager());\n  }\n}\nexports.AnnotationEditorUIManager = AnnotationEditorUIManager;\n\n/***/ }),\n/* 6 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.StatTimer = exports.RenderingCancelledException = exports.PixelsPerInch = exports.PageViewport = exports.PDFDateString = exports.DOMStandardFontDataFactory = exports.DOMSVGFactory = exports.DOMFilterFactory = exports.DOMCanvasFactory = exports.DOMCMapReaderFactory = void 0;\nexports.deprecated = deprecated;\nexports.getColorValues = getColorValues;\nexports.getCurrentTransform = getCurrentTransform;\nexports.getCurrentTransformInverse = getCurrentTransformInverse;\nexports.getFilenameFromUrl = getFilenameFromUrl;\nexports.getPdfFilenameFromUrl = getPdfFilenameFromUrl;\nexports.getRGB = getRGB;\nexports.getXfaPageViewport = getXfaPageViewport;\nexports.isDataScheme = isDataScheme;\nexports.isPdfFile = isPdfFile;\nexports.isValidFetchUrl = isValidFetchUrl;\nexports.loadScript = loadScript;\nexports.noContextMenu = noContextMenu;\nexports.setLayerDimensions = setLayerDimensions;\nvar _base_factory = __w_pdfjs_require__(7);\nvar _util = __w_pdfjs_require__(1);\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nexports.PixelsPerInch = PixelsPerInch;\nclass DOMFilterFactory extends _base_factory.BaseFilterFactory {\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #hcmFilter;\n  #hcmKey;\n  #hcmUrl;\n  #hcmHighlightFilter;\n  #hcmHighlightKey;\n  #hcmHighlightUrl;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    let tableR, tableG, tableB, key;\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      key = tableR = tableG = tableB = buffer.join(\",\");\n    } else {\n      const [mapR, mapG, mapB] = maps;\n      const bufferR = new Array(256);\n      const bufferG = new Array(256);\n      const bufferB = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        bufferR[i] = mapR[i] / 255;\n        bufferG[i] = mapG[i] / 255;\n        bufferB[i] = mapB[i] / 255;\n      }\n      tableR = bufferR.join(\",\");\n      tableG = bufferG.join(\",\");\n      tableB = bufferB.join(\",\");\n      key = `${tableR}${tableG}${tableB}`;\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    if (this.#hcmKey === key) {\n      return this.#hcmUrl;\n    }\n    this.#hcmKey = key;\n    this.#hcmUrl = \"none\";\n    this.#hcmFilter?.remove();\n    if (!fgColor || !bgColor) {\n      return this.#hcmUrl;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = _util.Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = _util.Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return this.#hcmUrl;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = this.#hcmHighlightFilter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    this.#hcmUrl = `url(#${id})`;\n    return this.#hcmUrl;\n  }\n  addHighlightHCMFilter(fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    if (this.#hcmHighlightKey === key) {\n      return this.#hcmHighlightUrl;\n    }\n    this.#hcmHighlightKey = key;\n    this.#hcmHighlightUrl = \"none\";\n    this.#hcmHighlightFilter?.remove();\n    if (!fgColor || !bgColor) {\n      return this.#hcmHighlightUrl;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_highlight_filter`;\n    const filter = this.#hcmHighlightFilter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    this.#hcmHighlightUrl = `url(#${id})`;\n    return this.#hcmHighlightUrl;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && (this.#hcmUrl || this.#hcmHighlightUrl)) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\nexports.DOMFilterFactory = DOMFilterFactory;\nclass DOMCanvasFactory extends _base_factory.BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document\n  } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\nexports.DOMCanvasFactory = DOMCanvasFactory;\nasync function fetchData(url, asTypedArray = false) {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return asTypedArray ? new Uint8Array(await response.arrayBuffer()) : (0, _util.stringToBytes)(await response.text());\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    if (asTypedArray) {\n      request.responseType = \"arraybuffer\";\n    }\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        let data;\n        if (asTypedArray && request.response) {\n          data = new Uint8Array(request.response);\n        } else if (!asTypedArray && request.responseText) {\n          data = (0, _util.stringToBytes)(request.responseText);\n        }\n        if (data) {\n          resolve(data);\n          return;\n        }\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass DOMCMapReaderFactory extends _base_factory.BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return fetchData(url, this.isCompressed).then(data => {\n      return {\n        cMapData: data,\n        compressionType\n      };\n    });\n  }\n}\nexports.DOMCMapReaderFactory = DOMCMapReaderFactory;\nclass DOMStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return fetchData(url, true);\n  }\n}\nexports.DOMStandardFontDataFactory = DOMStandardFontDataFactory;\nclass DOMSVGFactory extends _base_factory.BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\nexports.DOMSVGFactory = DOMSVGFactory;\nclass PageViewport {\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const {\n      viewBox\n    } = this;\n    return (0, _util.shadow)(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    return _util.Util.applyTransform([x, y], this.transform);\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = _util.Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = _util.Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    return _util.Util.applyInverseTransform([x, y], this.transform);\n  }\n}\nexports.PageViewport = PageViewport;\nclass RenderingCancelledException extends _util.BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nexports.RenderingCancelledException = RenderingCancelledException;\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url, onlyStripPath = false) {\n  if (!onlyStripPath) {\n    [url] = url.split(/[#?]/, 1);\n  }\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    (0, _util.warn)('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      (0, _util.warn)(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      (0, _util.warn)(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nexports.StatTimer = StatTimer;\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const {\n      protocol\n    } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch {\n    return false;\n  }\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction loadScript(src, removeScriptElement = false) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n    script.onload = function (evt) {\n      if (removeScriptElement) {\n        script.remove();\n      }\n      resolve(evt);\n    };\n    script.onerror = function () {\n      reject(new Error(`Cannot load script at: ${script.src}`));\n    };\n    (document.head || document.documentElement).append(script);\n  });\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nlet pdfDateStringRegex;\nclass PDFDateString {\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    pdfDateStringRegex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nexports.PDFDateString = PDFDateString;\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  (0, _util.warn)(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = _util.FeatureTest.isCSSRoundSupported;\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\n/***/ }),\n/* 7 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.BaseStandardFontDataFactory = exports.BaseSVGFactory = exports.BaseFilterFactory = exports.BaseCanvasFactory = exports.BaseCMapReaderFactory = void 0;\nvar _util = __w_pdfjs_require__(1);\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      (0, _util.unreachable)(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nexports.BaseFilterFactory = BaseFilterFactory;\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      (0, _util.unreachable)(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\")\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    (0, _util.unreachable)(\"Abstract method `_createCanvas` called.\");\n  }\n}\nexports.BaseCanvasFactory = BaseCanvasFactory;\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      (0, _util.unreachable)(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that ' + 'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed ? _util.CMapCompressionType.BINARY : _util.CMapCompressionType.NONE;\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  _fetchData(url, compressionType) {\n    (0, _util.unreachable)(\"Abstract method `_fetchData` called.\");\n  }\n}\nexports.BaseCMapReaderFactory = BaseCMapReaderFactory;\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      (0, _util.unreachable)(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that ' + 'the \"standardFontDataUrl\" API parameter is provided.');\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  _fetchData(url) {\n    (0, _util.unreachable)(\"Abstract method `_fetchData` called.\");\n  }\n}\nexports.BaseStandardFontDataFactory = BaseStandardFontDataFactory;\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      (0, _util.unreachable)(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    (0, _util.unreachable)(\"Abstract method `_createSVG` called.\");\n  }\n}\nexports.BaseSVGFactory = BaseSVGFactory;\n\n/***/ }),\n/* 8 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.MurmurHash3_64 = void 0;\nvar _util = __w_pdfjs_require__(1);\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if ((0, _util.isArrayBuffer)(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Wrong data format in MurmurHash3_64_update. \" + \"Input must be a string or array.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\nexports.MurmurHash3_64 = MurmurHash3_64;\n\n/***/ }),\n/* 9 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.FontLoader = exports.FontFaceObject = void 0;\nvar _util = __w_pdfjs_require__(1);\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont(info) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    (0, _util.assert)(!this.disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n      } catch {\n        (0, _util.warn)(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    (0, _util.unreachable)(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font.systemFontInfo);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          (0, _util.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return (0, _util.shadow)(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    let supported = false;\n    if (_util.isNodeJS) {\n      supported = true;\n    } else if (typeof navigator !== \"undefined\" && /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)) {\n      supported = true;\n    }\n    return (0, _util.shadow)(this, \"isSyncFontLoadingSupported\", supported);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      (0, _util.assert)(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return (0, _util.shadow)(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        (0, _util.warn)(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, (0, _util.string32)(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nexports.FontLoader = FontLoader;\nclass FontFaceObject {\n  constructor(translatedData, {\n    isEvalSupported = true,\n    disableFontFace = false,\n    ignoreErrors = false,\n    inspectFont = null\n  }) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.isEvalSupported = isEvalSupported !== false;\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = (0, _util.bytesToString)(this.data);\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      (0, _util.warn)(`getPathGenerator - ignoring character: \"${ex}\".`);\n      return this.compiledGlyphs[character] = function (c, size) {};\n    }\n    if (this.isEvalSupported && _util.FeatureTest.isEvalSupported) {\n      const jsBuf = [];\n      for (const current of cmds) {\n        const args = current.args !== undefined ? current.args.join(\",\") : \"\";\n        jsBuf.push(\"c.\", current.cmd, \"(\", args, \");\\n\");\n      }\n      return this.compiledGlyphs[character] = new Function(\"c\", \"size\", jsBuf.join(\"\"));\n    }\n    return this.compiledGlyphs[character] = function (c, size) {\n      for (const current of cmds) {\n        if (current.cmd === \"scale\") {\n          current.args = [size, -size];\n        }\n        c[current.cmd].apply(c, current.args);\n      }\n    };\n  }\n}\nexports.FontFaceObject = FontFaceObject;\n\n/***/ }),\n/* 10 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.NodeStandardFontDataFactory = exports.NodeFilterFactory = exports.NodeCanvasFactory = exports.NodeCMapReaderFactory = void 0;\nvar _base_factory = __w_pdfjs_require__(7);\nvar _util = __w_pdfjs_require__(1);\n;\n;\nconst fetchData = function (url) {\n  return new Promise((resolve, reject) => {\n    const fs = require(\"fs\");\n    fs.readFile(url, (error, data) => {\n      if (error || !data) {\n        reject(new Error(error));\n        return;\n      }\n      resolve(new Uint8Array(data));\n    });\n  });\n};\nclass NodeFilterFactory extends _base_factory.BaseFilterFactory {}\nexports.NodeFilterFactory = NodeFilterFactory;\nclass NodeCanvasFactory extends _base_factory.BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const Canvas = require(\"canvas\");\n    return Canvas.createCanvas(width, height);\n  }\n}\nexports.NodeCanvasFactory = NodeCanvasFactory;\nclass NodeCMapReaderFactory extends _base_factory.BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return fetchData(url).then(data => {\n      return {\n        cMapData: data,\n        compressionType\n      };\n    });\n  }\n}\nexports.NodeCMapReaderFactory = NodeCMapReaderFactory;\nclass NodeStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return fetchData(url);\n  }\n}\nexports.NodeStandardFontDataFactory = NodeStandardFontDataFactory;\n\n/***/ }),\n/* 11 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.CanvasGraphics = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _pattern_helper = __w_pdfjs_require__(12);\nvar _image_utils = __w_pdfjs_require__(13);\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst MAX_GROUP_SIZE = 4096;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst MAX_SIZE_TO_COMPILE = 1000;\nconst FULL_CHUNK_HEIGHT = 16;\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = (0, _display_utils.getCurrentTransform)(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nfunction compileType3Glyph(imgData) {\n  const {\n    width,\n    height\n  } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n  const lineSize = width + 7 & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        type = pp;\n        points[p] = 0;\n      } else {\n        type = pp & 0x33 * type >> 4;\n        points[p] &= type >> 2 | type << 2;\n      }\n      path.lineTo(p % width1, p / width1 | 0);\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n  data = null;\n  points = null;\n  const drawOutline = function (c) {\n    c.save();\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n  return drawOutline;\n}\nclass CanvasExtraState {\n  constructor(width, height) {\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = _util.IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = _util.FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    this.x = 0;\n    this.y = 0;\n    this.lineX = 0;\n    this.lineY = 0;\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = _util.TextRenderingMode.FILL;\n    this.textRise = 0;\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  updatePathMinMax(transform, x, y) {\n    [x, y] = _util.Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n  updateRectMinMax(transform, rect) {\n    const p1 = _util.Util.applyTransform(rect, transform);\n    const p2 = _util.Util.applyTransform(rect.slice(2), transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1]);\n  }\n  updateScalingPathMinMax(transform, minMax) {\n    _util.Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.maxX = Math.max(this.maxX, minMax[1]);\n    this.minY = Math.min(this.minY, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = _util.Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3);\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], box[0], box[2]);\n      minMax[1] = Math.max(minMax[1], box[0], box[2]);\n      minMax[2] = Math.min(minMax[2], box[1], box[3]);\n      minMax[3] = Math.max(minMax[3], box[1], box[3]);\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n  getPathBoundingBox(pathType = _pattern_helper.PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === _pattern_helper.PathType.STROKE) {\n      if (!transform) {\n        (0, _util.unreachable)(\"Stroke bounding box must include transform.\");\n      }\n      const scale = _util.Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = scale[0] * this.lineWidth / 2;\n      const yStrokePad = scale[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = _util.Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n  getClippedPathBoundingBox(pathType = _pattern_helper.PathType.FILL, transform = null) {\n    return _util.Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === _util.ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = _util.FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === _util.ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === _util.ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = (0, _image_utils.convertBlackAndWhiteToRGBA)({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (!_util.isNodeJS) {\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n  }\n}\nfunction composeSMaskBackdrop(bytes, r0, g0, b0) {\n  const length = bytes.length;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = bytes[i];\n    if (alpha === 0) {\n      bytes[i - 3] = r0;\n      bytes[i - 2] = g0;\n      bytes[i - 1] = b0;\n    } else if (alpha < 255) {\n      const alpha_ = 255 - alpha;\n      bytes[i - 3] = bytes[i - 3] * alpha + r0 * alpha_ >> 8;\n      bytes[i - 2] = bytes[i - 2] * alpha + g0 * alpha_ >> 8;\n      bytes[i - 1] = bytes[i - 1] * alpha + b0 * alpha_ >> 8;\n    }\n  }\n}\nfunction composeSMaskAlpha(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  const scale = 1 / 255;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n    layerData[i] = layerData[i] * alpha * scale | 0;\n  }\n}\nfunction composeSMaskLuminosity(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  for (let i = 3; i < length; i += 4) {\n    const y = maskData[i - 3] * 77 + maskData[i - 2] * 152 + maskData[i - 1] * 28;\n    layerData[i] = transferMap ? layerData[i] * transferMap[y >> 8] >> 8 : layerData[i] * y >> 16;\n  }\n}\nfunction genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n  const hasBackdrop = !!backdrop;\n  const r0 = hasBackdrop ? backdrop[0] : 0;\n  const g0 = hasBackdrop ? backdrop[1] : 0;\n  const b0 = hasBackdrop ? backdrop[2] : 0;\n  const composeFn = subtype === \"Luminosity\" ? composeSMaskLuminosity : composeSMaskAlpha;\n  const PIXELS_TO_PROCESS = 1048576;\n  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n  for (let row = 0; row < height; row += chunkSize) {\n    const chunkHeight = Math.min(chunkSize, height - row);\n    const maskData = maskCtx.getImageData(layerOffsetX - maskOffsetX, row + (layerOffsetY - maskOffsetY), width, chunkHeight);\n    const layerData = layerCtx.getImageData(layerOffsetX, row + layerOffsetY, width, chunkHeight);\n    if (hasBackdrop) {\n      composeSMaskBackdrop(maskData.data, r0, g0, b0);\n    }\n    composeFn(maskData.data, layerData.data, transferMap);\n    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n  }\n}\nfunction composeSMask(ctx, smask, layerCtx, layerBox) {\n  const layerOffsetX = layerBox[0];\n  const layerOffsetY = layerBox[1];\n  const layerWidth = layerBox[2] - layerOffsetX;\n  const layerHeight = layerBox[3] - layerOffsetY;\n  if (layerWidth === 0 || layerHeight === 0) {\n    return;\n  }\n  genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n  ctx.save();\n  ctx.globalAlpha = 1;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  ctx.drawImage(layerCtx.canvas, 0, 0);\n  ctx.restore();\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  const scale = _util.Util.singularValueDecompose2dScale(transform);\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround((globalThis.devicePixelRatio || 1) * _display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);\n  if (interpolate !== undefined) {\n    return interpolate;\n  } else if (scale[0] <= actualScale || scale[1] <= actualScale) {\n    return true;\n  }\n  return false;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...(0, _display_utils.getCurrentTransform)(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = (0, _display_utils.getCurrentTransform)(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== _util.OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = (0, _display_utils.getCurrentTransform)(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = _util.Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = _util.Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const cord1 = _util.Util.applyTransform([0, 0], maskToCanvas);\n    const cord2 = _util.Util.applyTransform([width, height], maskToCanvas);\n    const rect = _util.Util.normalizeRect([cord1[0], cord1[1], cord2[0], cord2[1]]);\n    const drawnWidth = Math.round(rect[2] - rect[0]) || 1;\n    const drawnHeight = Math.round(rect[3] - rect[1]) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = Math.min(cord1[0], cord2[0]);\n    const offsetY = Math.min(cord1[1], cord2[1]);\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, (0, _display_utils.getCurrentTransformInverse)(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled((0, _display_utils.getCurrentTransform)(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = _util.Util.transform((0, _display_utils.getCurrentTransformInverse)(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, _pattern_helper.PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...(0, _display_utils.getCurrentTransform)(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n      this.pendingClip = null;\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = (0, _display_utils.getCurrentTransform)(ctx);\n    const isScalingMatrix = currentTransform[0] === 0 && currentTransform[3] === 0 || currentTransform[1] === 0 && currentTransform[2] === 0;\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case _util.OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case _util.OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case _util.OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case _util.OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], args[j + 2], args[j + 3], x, y, minMaxForBezier);\n          j += 6;\n          break;\n        case _util.OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, x, y, args[j], args[j + 1], args[j + 2], args[j + 3], minMaxForBezier);\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case _util.OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], x, y, x, y, minMaxForBezier);\n          j += 4;\n          break;\n        case _util.OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n    current.setCurrentPoint(x, y);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, (0, _display_utils.getCurrentTransformInverse)(ctx), _pattern_helper.PathType.STROKE);\n        this.rescaleAndStroke(false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, (0, _display_utils.getCurrentTransformInverse)(ctx), _pattern_helper.PathType.FILL);\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n    this.consumePath();\n  }\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n  endPath() {\n    this.consumePath();\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = _util.IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || _util.FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      (0, _util.warn)(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & _util.TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n        ctx.fill();\n      }\n      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: (0, _display_utils.getCurrentTransform)(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return (0, _util.shadow)(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === _util.TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, (0, _display_utils.getCurrentTransformInverse)(ctx), _pattern_helper.PathType.FILL);\n      patternTransform = (0, _display_utils.getCurrentTransform)(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || _util.FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === _util.TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        (0, _util.warn)(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const transformed = _util.Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || (0, _display_utils.getCurrentTransform)(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => {\n          return new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n            optionalContentConfig: this.optionalContentConfig,\n            markedContentStack: this.markedContentStack\n          });\n        }\n      };\n      pattern = new _pattern_helper.TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(r, g, b) {\n    const color = _util.Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n  setFillRGBColor(r, g, b) {\n    const color = _util.Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = (0, _pattern_helper.getShadingPattern)(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, (0, _display_utils.getCurrentTransformInverse)(ctx), _pattern_helper.PathType.SHADING);\n    const inv = (0, _display_utils.getCurrentTransformInverse)(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const [x0, y0, x1, y1] = _util.Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    (0, _util.unreachable)(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    (0, _util.unreachable)(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = (0, _display_utils.getCurrentTransform)(this.ctx);\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax((0, _display_utils.getCurrentTransform)(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      (0, _util.info)(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      (0, _util.warn)(\"Knockout groups not supported.\");\n    }\n    const currentTransform = (0, _display_utils.getCurrentTransform)(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = _util.Util.getAxialAlignedBoundingBox(group.bbox, (0, _display_utils.getCurrentTransform)(currentCtx));\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = _util.Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    let scaleX = 1,\n      scaleY = 1;\n    if (drawnWidth > MAX_GROUP_SIZE) {\n      scaleX = drawnWidth / MAX_GROUP_SIZE;\n      drawnWidth = MAX_GROUP_SIZE;\n    }\n    if (drawnHeight > MAX_GROUP_SIZE) {\n      scaleY = drawnHeight / MAX_GROUP_SIZE;\n      drawnHeight = MAX_GROUP_SIZE;\n    }\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.scale(1 / scaleX, 1 / scaleY);\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        scaleX,\n        scaleY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.scale(scaleX, scaleY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = (0, _display_utils.getCurrentTransform)(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = _util.Util.getAxialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (Array.isArray(rect) && rect.length === 4) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        const [scaleX, scaleY] = _util.Util.singularValueDecompose2dScale((0, _display_utils.getCurrentTransform)(this.ctx));\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = (0, _display_utils.getCurrentTransform)(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = _util.Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      const [x, y] = _util.Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, (0, _display_utils.getCurrentTransformInverse)(ctx), _pattern_helper.PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      (0, _util.warn)(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      (0, _util.warn)(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    if (!_util.isNodeJS) {\n      const {\n        filter\n      } = ctx;\n      if (filter !== \"none\" && filter !== \"\") {\n        ctx.filter = \"none\";\n      }\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, (0, _display_utils.getCurrentTransformInverse)(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled((0, _display_utils.getCurrentTransform)(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = (0, _display_utils.getCurrentTransform)(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(saveRestore) {\n    const {\n      ctx\n    } = this;\n    const {\n      lineWidth\n    } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    ctx.lineWidth = lineWidth || 1;\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.stroke();\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nexports.CanvasGraphics = CanvasGraphics;\nfor (const op in _util.OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[_util.OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n/***/ }),\n/* 12 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TilingPattern = exports.PathType = void 0;\nexports.getShadingPattern = getShadingPattern;\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nexports.PathType = PathType;\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      (0, _util.unreachable)(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n  getPattern() {\n    (0, _util.unreachable)(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, (0, _display_utils.getCurrentTransform)(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height, true);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = _util.Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight, false);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = _util.Util.singularValueDecompose2dScale((0, _display_utils.getCurrentTransform)(ctx));\n    } else {\n      scale = _util.Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = _util.Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n    (0, _util.info)(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const matrixScale = _util.Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = _util.Util.singularValueDecompose2dScale(this.baseTransform);\n    const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n    const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);\n    const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size, true);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n    graphics.baseTransform = (0, _display_utils.getCurrentTransform)(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    step = Math.abs(step);\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax((0, _display_utils.getCurrentTransform)(graphics.ctx), [x0, y0, x1, y1]);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = _util.Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new _util.FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = _util.Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = _util.Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\nexports.TilingPattern = TilingPattern;\n\n/***/ }),\n/* 13 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.convertBlackAndWhiteToRGBA = convertBlackAndWhiteToRGBA;\nexports.convertToRGBA = convertToRGBA;\nexports.grayToRGBA = grayToRGBA;\nvar _util = __w_pdfjs_require__(1);\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case _util.ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case _util.ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = _util.FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (_util.FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (_util.FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n/***/ }),\n/* 14 */\n/***/ ((__unused_webpack_module, exports) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.GlobalWorkerOptions = void 0;\nconst GlobalWorkerOptions = Object.create(null);\nexports.GlobalWorkerOptions = GlobalWorkerOptions;\nGlobalWorkerOptions.workerPort = null;\nGlobalWorkerOptions.workerSrc = \"\";\n\n/***/ }),\n/* 15 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.MessageHandler = void 0;\nvar _util = __w_pdfjs_require__(1);\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction wrapReason(reason) {\n  if (!(reason instanceof Error || typeof reason === \"object\" && reason !== null)) {\n    (0, _util.unreachable)('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new _util.AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new _util.MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new _util.PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new _util.UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new _util.UnknownErrorException(reason.message, reason.details);\n    default:\n      return new _util.UnknownErrorException(reason.message, reason.toString());\n  }\n}\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(function (result) {\n          comObj.postMessage({\n            sourceName: cbSourceName,\n            targetName: cbTargetName,\n            callback: CallbackKind.DATA,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName: cbSourceName,\n            targetName: cbTargetName,\n            callback: CallbackKind.ERROR,\n            callbackId: data.callbackId,\n            reason: wrapReason(reason)\n          });\n        });\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = new _util.PromiseCapability();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = new _util.PromiseCapability();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = new _util.PromiseCapability();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        (0, _util.assert)(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = new _util.PromiseCapability();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = new _util.PromiseCapability();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        (0, _util.assert)(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: new _util.PromiseCapability(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        (0, _util.assert)(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        (0, _util.assert)(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        (0, _util.assert)(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\nexports.MessageHandler = MessageHandler;\n\n/***/ }),\n/* 16 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.Metadata = void 0;\nvar _util = __w_pdfjs_require__(1);\nclass Metadata {\n  #metadataMap;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n  getAll() {\n    return (0, _util.objectFromMap)(this.#metadataMap);\n  }\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\nexports.Metadata = Metadata;\n\n/***/ }),\n/* 17 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.OptionalContentConfig = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _murmurhash = __w_pdfjs_require__(8);\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #visible = true;\n  constructor(name, intent) {\n    this.name = name;\n    this.intent = intent;\n  }\n  get visible() {\n    return this.#visible;\n  }\n  _setVisible(internal, visible) {\n    if (internal !== INTERNAL) {\n      (0, _util.unreachable)(\"Internal method `_setVisible` called.\");\n    }\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data) {\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(group.name, group.intent));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        (0, _util.warn)(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      (0, _util.warn)(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        (0, _util.warn)(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            (0, _util.warn)(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            (0, _util.warn)(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            (0, _util.warn)(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            (0, _util.warn)(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      (0, _util.warn)(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    (0, _util.warn)(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true) {\n    if (!this.#groups.has(id)) {\n      (0, _util.warn)(`Optional content group not found: ${id}`);\n      return;\n    }\n    this.#groups.get(id)._setVisible(INTERNAL, !!visible);\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroups() {\n    return this.#groups.size > 0 ? (0, _util.objectFromMap)(this.#groups) : null;\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new _murmurhash.MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n}\nexports.OptionalContentConfig = OptionalContentConfig;\n\n/***/ }),\n/* 18 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PDFDataTransportStream = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nclass PDFDataTransportStream {\n  constructor({\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null,\n    disableRange = false,\n    disableStream = false\n  }, pdfDataRangeTransport) {\n    (0, _util.assert)(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    this._pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    this._pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    this._pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      (0, _util.assert)(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    (0, _util.assert)(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nexports.PDFDataTransportStream = PDFDataTransportStream;\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = (0, _display_utils.isPdfFile)(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = new _util.PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = new _util.PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n/***/ }),\n/* 19 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PDFFetchStream = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _network_utils = __w_pdfjs_require__(20);\n;\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  (0, _util.warn)(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = this.isHttp && source.httpHeaders || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    (0, _util.assert)(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nexports.PDFFetchStream = PDFFetchStream;\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = new _util.PromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._headers = createHeaders(this._stream.httpHeaders);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n      if (!(0, _network_utils.validateResponseStatus)(response.status)) {\n        throw (0, _network_utils.createResponseStatusError)(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const getResponseHeader = name => {\n        return response.headers.get(name);\n      };\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = (0, _network_utils.validateRangeRequestCapabilities)({\n        getResponseHeader,\n        isHttp: this._stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = (0, _network_utils.extractFilenameFromHeader)(getResponseHeader);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new _util.AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = new _util.PromiseCapability();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n      if (!(0, _network_utils.validateResponseStatus)(response.status)) {\n        throw (0, _network_utils.createResponseStatusError)(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n/***/ }),\n/* 20 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.createResponseStatusError = createResponseStatusError;\nexports.extractFilenameFromHeader = extractFilenameFromHeader;\nexports.validateRangeRequestCapabilities = validateRangeRequestCapabilities;\nexports.validateResponseStatus = validateResponseStatus;\nvar _util = __w_pdfjs_require__(1);\nvar _content_disposition = __w_pdfjs_require__(21);\nvar _display_utils = __w_pdfjs_require__(6);\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = (0, _content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if ((0, _display_utils.isPdfFile)(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || status === 0 && url.startsWith(\"file:\")) {\n    return new _util.MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new _util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status);\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n/***/ }),\n/* 21 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.getFilenameFromContentDispositionHeader = getFilenameFromContentDispositionHeader;\nvar _util = __w_pdfjs_require__(1);\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = (0, _util.stringToBytes)(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n/***/ }),\n/* 22 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PDFNetworkStream = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _network_utils = __w_pdfjs_require__(20);\n;\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return (0, _util.stringToBytes)(data).buffer;\n}\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = this.isHttp && args.httpHeaders || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    (0, _util.assert)(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nexports.PDFNetworkStream = PDFNetworkStream;\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = new _util.PromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    const getResponseHeader = name => {\n      return fullRequestXhr.getResponseHeader(name);\n    };\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = (0, _network_utils.validateRangeRequestCapabilities)({\n      getResponseHeader,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = (0, _network_utils.extractFilenameFromHeader)(getResponseHeader);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersReceivedCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = (0, _network_utils.createResponseStatusError)(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = new _util.PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError = (0, _network_utils.createResponseStatusError)(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = new _util.PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n/***/ }),\n/* 23 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PDFNodeStream = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _network_utils = __w_pdfjs_require__(20);\n;\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\nfunction parseUrl(sourceUrl) {\n  const url = require(\"url\");\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp = this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = this.isHttp && source.httpHeaders || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    (0, _util.assert)(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = this.isFsUrl ? new PDFNodeStreamFsFullReader(this) : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl ? new PDFNodeStreamFsRangeReader(this, start, end) : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nexports.PDFNodeStream = PDFNodeStream;\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = new _util.PromiseCapability();\n    this._headersCapability = new _util.PromiseCapability();\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = new _util.PromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new _util.AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = new _util.PromiseCapability();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = new _util.PromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers\n  };\n}\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new _util.MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n      const getResponseHeader = name => {\n        return this._readableStream.headers[name.toLowerCase()];\n      };\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = (0, _network_utils.validateRangeRequestCapabilities)({\n        getResponseHeader,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = (0, _network_utils.extractFilenameFromHeader)(getResponseHeader);\n    };\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      const http = require(\"http\");\n      this._request = http.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n    } else {\n      const https = require(\"https\");\n      this._request = https.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n    }\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new _util.MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      const http = require(\"http\");\n      this._request = http.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n    } else {\n      const https = require(\"https\");\n      this._request = https.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n    }\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n    const fs = require(\"fs\");\n    fs.lstat(path, (error, stat) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          error = new _util.MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    });\n  }\n}\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n    const fs = require(\"fs\");\n    this._setReadableStream(fs.createReadStream(path, {\n      start,\n      end: end - 1\n    }));\n  }\n}\n\n/***/ }),\n/* 24 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SVGGraphics = void 0;\nvar _display_utils = __w_pdfjs_require__(6);\nvar _util = __w_pdfjs_require__(1);\n;\nconst SVG_DEFAULTS = {\n  fontStyle: \"normal\",\n  fontWeight: \"normal\",\n  fillColor: \"#000000\"\n};\nconst XML_NS = \"http://www.w3.org/XML/1998/namespace\";\nconst XLINK_NS = \"http://www.w3.org/1999/xlink\";\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst createObjectURL = function (data, contentType = \"\", forceDataSchema = false) {\n  if (URL.createObjectURL && typeof Blob !== \"undefined\" && !forceDataSchema) {\n    return URL.createObjectURL(new Blob([data], {\n      type: contentType\n    }));\n  }\n  const digits = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n  let buffer = `data:${contentType};base64,`;\n  for (let i = 0, ii = data.length; i < ii; i += 3) {\n    const b1 = data[i] & 0xff;\n    const b2 = data[i + 1] & 0xff;\n    const b3 = data[i + 2] & 0xff;\n    const d1 = b1 >> 2,\n      d2 = (b1 & 3) << 4 | b2 >> 4;\n    const d3 = i + 1 < ii ? (b2 & 0xf) << 2 | b3 >> 6 : 64;\n    const d4 = i + 2 < ii ? b3 & 0x3f : 64;\n    buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n  }\n  return buffer;\n};\nconst convertImgDataToPng = function () {\n  const PNG_HEADER = new Uint8Array([0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a]);\n  const CHUNK_WRAPPER_SIZE = 12;\n  const crcTable = new Int32Array(256);\n  for (let i = 0; i < 256; i++) {\n    let c = i;\n    for (let h = 0; h < 8; h++) {\n      c = c & 1 ? 0xedb88320 ^ c >> 1 & 0x7fffffff : c >> 1 & 0x7fffffff;\n    }\n    crcTable[i] = c;\n  }\n  function crc32(data, start, end) {\n    let crc = -1;\n    for (let i = start; i < end; i++) {\n      const a = (crc ^ data[i]) & 0xff;\n      const b = crcTable[a];\n      crc = crc >>> 8 ^ b;\n    }\n    return crc ^ -1;\n  }\n  function writePngChunk(type, body, data, offset) {\n    let p = offset;\n    const len = body.length;\n    data[p] = len >> 24 & 0xff;\n    data[p + 1] = len >> 16 & 0xff;\n    data[p + 2] = len >> 8 & 0xff;\n    data[p + 3] = len & 0xff;\n    p += 4;\n    data[p] = type.charCodeAt(0) & 0xff;\n    data[p + 1] = type.charCodeAt(1) & 0xff;\n    data[p + 2] = type.charCodeAt(2) & 0xff;\n    data[p + 3] = type.charCodeAt(3) & 0xff;\n    p += 4;\n    data.set(body, p);\n    p += body.length;\n    const crc = crc32(data, offset + 4, p);\n    data[p] = crc >> 24 & 0xff;\n    data[p + 1] = crc >> 16 & 0xff;\n    data[p + 2] = crc >> 8 & 0xff;\n    data[p + 3] = crc & 0xff;\n  }\n  function adler32(data, start, end) {\n    let a = 1;\n    let b = 0;\n    for (let i = start; i < end; ++i) {\n      a = (a + (data[i] & 0xff)) % 65521;\n      b = (b + a) % 65521;\n    }\n    return b << 16 | a;\n  }\n  function deflateSync(literals) {\n    if (!_util.isNodeJS) {\n      return deflateSyncUncompressed(literals);\n    }\n    try {\n      const input = parseInt(process.versions.node) >= 8 ? literals : Buffer.from(literals);\n      const output = require(\"zlib\").deflateSync(input, {\n        level: 9\n      });\n      return output instanceof Uint8Array ? output : new Uint8Array(output);\n    } catch (e) {\n      (0, _util.warn)(\"Not compressing PNG because zlib.deflateSync is unavailable: \" + e);\n    }\n    return deflateSyncUncompressed(literals);\n  }\n  function deflateSyncUncompressed(literals) {\n    let len = literals.length;\n    const maxBlockLength = 0xffff;\n    const deflateBlocks = Math.ceil(len / maxBlockLength);\n    const idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n    let pi = 0;\n    idat[pi++] = 0x78;\n    idat[pi++] = 0x9c;\n    let pos = 0;\n    while (len > maxBlockLength) {\n      idat[pi++] = 0x00;\n      idat[pi++] = 0xff;\n      idat[pi++] = 0xff;\n      idat[pi++] = 0x00;\n      idat[pi++] = 0x00;\n      idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n      pi += maxBlockLength;\n      pos += maxBlockLength;\n      len -= maxBlockLength;\n    }\n    idat[pi++] = 0x01;\n    idat[pi++] = len & 0xff;\n    idat[pi++] = len >> 8 & 0xff;\n    idat[pi++] = ~len & 0xffff & 0xff;\n    idat[pi++] = (~len & 0xffff) >> 8 & 0xff;\n    idat.set(literals.subarray(pos), pi);\n    pi += literals.length - pos;\n    const adler = adler32(literals, 0, literals.length);\n    idat[pi++] = adler >> 24 & 0xff;\n    idat[pi++] = adler >> 16 & 0xff;\n    idat[pi++] = adler >> 8 & 0xff;\n    idat[pi++] = adler & 0xff;\n    return idat;\n  }\n  function encode(imgData, kind, forceDataSchema, isMask) {\n    const width = imgData.width;\n    const height = imgData.height;\n    let bitDepth, colorType, lineSize;\n    const bytes = imgData.data;\n    switch (kind) {\n      case _util.ImageKind.GRAYSCALE_1BPP:\n        colorType = 0;\n        bitDepth = 1;\n        lineSize = width + 7 >> 3;\n        break;\n      case _util.ImageKind.RGB_24BPP:\n        colorType = 2;\n        bitDepth = 8;\n        lineSize = width * 3;\n        break;\n      case _util.ImageKind.RGBA_32BPP:\n        colorType = 6;\n        bitDepth = 8;\n        lineSize = width * 4;\n        break;\n      default:\n        throw new Error(\"invalid format\");\n    }\n    const literals = new Uint8Array((1 + lineSize) * height);\n    let offsetLiterals = 0,\n      offsetBytes = 0;\n    for (let y = 0; y < height; ++y) {\n      literals[offsetLiterals++] = 0;\n      literals.set(bytes.subarray(offsetBytes, offsetBytes + lineSize), offsetLiterals);\n      offsetBytes += lineSize;\n      offsetLiterals += lineSize;\n    }\n    if (kind === _util.ImageKind.GRAYSCALE_1BPP && isMask) {\n      offsetLiterals = 0;\n      for (let y = 0; y < height; y++) {\n        offsetLiterals++;\n        for (let i = 0; i < lineSize; i++) {\n          literals[offsetLiterals++] ^= 0xff;\n        }\n      }\n    }\n    const ihdr = new Uint8Array([width >> 24 & 0xff, width >> 16 & 0xff, width >> 8 & 0xff, width & 0xff, height >> 24 & 0xff, height >> 16 & 0xff, height >> 8 & 0xff, height & 0xff, bitDepth, colorType, 0x00, 0x00, 0x00]);\n    const idat = deflateSync(literals);\n    const pngLength = PNG_HEADER.length + CHUNK_WRAPPER_SIZE * 3 + ihdr.length + idat.length;\n    const data = new Uint8Array(pngLength);\n    let offset = 0;\n    data.set(PNG_HEADER, offset);\n    offset += PNG_HEADER.length;\n    writePngChunk(\"IHDR\", ihdr, data, offset);\n    offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n    writePngChunk(\"IDATA\", idat, data, offset);\n    offset += CHUNK_WRAPPER_SIZE + idat.length;\n    writePngChunk(\"IEND\", new Uint8Array(0), data, offset);\n    return createObjectURL(data, \"image/png\", forceDataSchema);\n  }\n  return function convertImgDataToPng(imgData, forceDataSchema, isMask) {\n    const kind = imgData.kind === undefined ? _util.ImageKind.GRAYSCALE_1BPP : imgData.kind;\n    return encode(imgData, kind, forceDataSchema, isMask);\n  };\n}();\nclass SVGExtraState {\n  constructor() {\n    this.fontSizeScale = 1;\n    this.fontWeight = SVG_DEFAULTS.fontWeight;\n    this.fontSize = 0;\n    this.textMatrix = _util.IDENTITY_MATRIX;\n    this.fontMatrix = _util.FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    this.textRenderingMode = _util.TextRenderingMode.FILL;\n    this.textMatrixScale = 1;\n    this.x = 0;\n    this.y = 0;\n    this.lineX = 0;\n    this.lineY = 0;\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRise = 0;\n    this.fillColor = SVG_DEFAULTS.fillColor;\n    this.strokeColor = \"#000000\";\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.lineJoin = \"\";\n    this.lineCap = \"\";\n    this.miterLimit = 0;\n    this.dashArray = [];\n    this.dashPhase = 0;\n    this.dependencies = [];\n    this.activeClipUrl = null;\n    this.clipGroup = null;\n    this.maskId = \"\";\n  }\n  clone() {\n    return Object.create(this);\n  }\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\nfunction opListToTree(opList) {\n  let opTree = [];\n  const tmp = [];\n  for (const opListElement of opList) {\n    if (opListElement.fn === \"save\") {\n      opTree.push({\n        fnId: 92,\n        fn: \"group\",\n        items: []\n      });\n      tmp.push(opTree);\n      opTree = opTree.at(-1).items;\n      continue;\n    }\n    if (opListElement.fn === \"restore\") {\n      opTree = tmp.pop();\n    } else {\n      opTree.push(opListElement);\n    }\n  }\n  return opTree;\n}\nfunction pf(value) {\n  if (Number.isInteger(value)) {\n    return value.toString();\n  }\n  const s = value.toFixed(10);\n  let i = s.length - 1;\n  if (s[i] !== \"0\") {\n    return s;\n  }\n  do {\n    i--;\n  } while (s[i] === \"0\");\n  return s.substring(0, s[i] === \".\" ? i : i + 1);\n}\nfunction pm(m) {\n  if (m[4] === 0 && m[5] === 0) {\n    if (m[1] === 0 && m[2] === 0) {\n      if (m[0] === 1 && m[3] === 1) {\n        return \"\";\n      }\n      return `scale(${pf(m[0])} ${pf(m[3])})`;\n    }\n    if (m[0] === m[3] && m[1] === -m[2]) {\n      const a = Math.acos(m[0]) * 180 / Math.PI;\n      return `rotate(${pf(a)})`;\n    }\n  } else if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n    return `translate(${pf(m[4])} ${pf(m[5])})`;\n  }\n  return `matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ` + `${pf(m[5])})`;\n}\nlet clipCount = 0;\nlet maskCount = 0;\nlet shadingCount = 0;\nclass SVGGraphics {\n  constructor(commonObjs, objs, forceDataSchema = false) {\n    (0, _display_utils.deprecated)(\"The SVG back-end is no longer maintained and *may* be removed in the future.\");\n    this.svgFactory = new _display_utils.DOMSVGFactory();\n    this.current = new SVGExtraState();\n    this.transformMatrix = _util.IDENTITY_MATRIX;\n    this.transformStack = [];\n    this.extraStack = [];\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.embedFonts = false;\n    this.embeddedFonts = Object.create(null);\n    this.cssStyle = null;\n    this.forceDataSchema = !!forceDataSchema;\n    this._operatorIdMapping = [];\n    for (const op in _util.OPS) {\n      this._operatorIdMapping[_util.OPS[op]] = op;\n    }\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  save() {\n    this.transformStack.push(this.transformMatrix);\n    const old = this.current;\n    this.extraStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    this.transformMatrix = this.transformStack.pop();\n    this.current = this.extraStack.pop();\n    this.pendingClip = null;\n    this.tgrp = null;\n  }\n  group(items) {\n    this.save();\n    this.executeOpTree(items);\n    this.restore();\n  }\n  loadDependencies(operatorList) {\n    const fnArray = operatorList.fnArray;\n    const argsArray = operatorList.argsArray;\n    for (let i = 0, ii = fnArray.length; i < ii; i++) {\n      if (fnArray[i] !== _util.OPS.dependency) {\n        continue;\n      }\n      for (const obj of argsArray[i]) {\n        const objsPool = obj.startsWith(\"g_\") ? this.commonObjs : this.objs;\n        const promise = new Promise(resolve => {\n          objsPool.get(obj, resolve);\n        });\n        this.current.dependencies.push(promise);\n      }\n    }\n    return Promise.all(this.current.dependencies);\n  }\n  transform(a, b, c, d, e, f) {\n    const transformMatrix = [a, b, c, d, e, f];\n    this.transformMatrix = _util.Util.transform(this.transformMatrix, transformMatrix);\n    this.tgrp = null;\n  }\n  getSVG(operatorList, viewport) {\n    this.viewport = viewport;\n    const svgElement = this._initialize(viewport);\n    return this.loadDependencies(operatorList).then(() => {\n      this.transformMatrix = _util.IDENTITY_MATRIX;\n      this.executeOpTree(this.convertOpList(operatorList));\n      return svgElement;\n    });\n  }\n  convertOpList(operatorList) {\n    const operatorIdMapping = this._operatorIdMapping;\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    const opList = [];\n    for (let i = 0, ii = fnArray.length; i < ii; i++) {\n      const fnId = fnArray[i];\n      opList.push({\n        fnId,\n        fn: operatorIdMapping[fnId],\n        args: argsArray[i]\n      });\n    }\n    return opListToTree(opList);\n  }\n  executeOpTree(opTree) {\n    for (const opTreeElement of opTree) {\n      const fn = opTreeElement.fn;\n      const fnId = opTreeElement.fnId;\n      const args = opTreeElement.args;\n      switch (fnId | 0) {\n        case _util.OPS.beginText:\n          this.beginText();\n          break;\n        case _util.OPS.dependency:\n          break;\n        case _util.OPS.setLeading:\n          this.setLeading(args);\n          break;\n        case _util.OPS.setLeadingMoveText:\n          this.setLeadingMoveText(args[0], args[1]);\n          break;\n        case _util.OPS.setFont:\n          this.setFont(args);\n          break;\n        case _util.OPS.showText:\n          this.showText(args[0]);\n          break;\n        case _util.OPS.showSpacedText:\n          this.showText(args[0]);\n          break;\n        case _util.OPS.endText:\n          this.endText();\n          break;\n        case _util.OPS.moveText:\n          this.moveText(args[0], args[1]);\n          break;\n        case _util.OPS.setCharSpacing:\n          this.setCharSpacing(args[0]);\n          break;\n        case _util.OPS.setWordSpacing:\n          this.setWordSpacing(args[0]);\n          break;\n        case _util.OPS.setHScale:\n          this.setHScale(args[0]);\n          break;\n        case _util.OPS.setTextMatrix:\n          this.setTextMatrix(args[0], args[1], args[2], args[3], args[4], args[5]);\n          break;\n        case _util.OPS.setTextRise:\n          this.setTextRise(args[0]);\n          break;\n        case _util.OPS.setTextRenderingMode:\n          this.setTextRenderingMode(args[0]);\n          break;\n        case _util.OPS.setLineWidth:\n          this.setLineWidth(args[0]);\n          break;\n        case _util.OPS.setLineJoin:\n          this.setLineJoin(args[0]);\n          break;\n        case _util.OPS.setLineCap:\n          this.setLineCap(args[0]);\n          break;\n        case _util.OPS.setMiterLimit:\n          this.setMiterLimit(args[0]);\n          break;\n        case _util.OPS.setFillRGBColor:\n          this.setFillRGBColor(args[0], args[1], args[2]);\n          break;\n        case _util.OPS.setStrokeRGBColor:\n          this.setStrokeRGBColor(args[0], args[1], args[2]);\n          break;\n        case _util.OPS.setStrokeColorN:\n          this.setStrokeColorN(args);\n          break;\n        case _util.OPS.setFillColorN:\n          this.setFillColorN(args);\n          break;\n        case _util.OPS.shadingFill:\n          this.shadingFill(args[0]);\n          break;\n        case _util.OPS.setDash:\n          this.setDash(args[0], args[1]);\n          break;\n        case _util.OPS.setRenderingIntent:\n          this.setRenderingIntent(args[0]);\n          break;\n        case _util.OPS.setFlatness:\n          this.setFlatness(args[0]);\n          break;\n        case _util.OPS.setGState:\n          this.setGState(args[0]);\n          break;\n        case _util.OPS.fill:\n          this.fill();\n          break;\n        case _util.OPS.eoFill:\n          this.eoFill();\n          break;\n        case _util.OPS.stroke:\n          this.stroke();\n          break;\n        case _util.OPS.fillStroke:\n          this.fillStroke();\n          break;\n        case _util.OPS.eoFillStroke:\n          this.eoFillStroke();\n          break;\n        case _util.OPS.clip:\n          this.clip(\"nonzero\");\n          break;\n        case _util.OPS.eoClip:\n          this.clip(\"evenodd\");\n          break;\n        case _util.OPS.paintSolidColorImageMask:\n          this.paintSolidColorImageMask();\n          break;\n        case _util.OPS.paintImageXObject:\n          this.paintImageXObject(args[0]);\n          break;\n        case _util.OPS.paintInlineImageXObject:\n          this.paintInlineImageXObject(args[0]);\n          break;\n        case _util.OPS.paintImageMaskXObject:\n          this.paintImageMaskXObject(args[0]);\n          break;\n        case _util.OPS.paintFormXObjectBegin:\n          this.paintFormXObjectBegin(args[0], args[1]);\n          break;\n        case _util.OPS.paintFormXObjectEnd:\n          this.paintFormXObjectEnd();\n          break;\n        case _util.OPS.closePath:\n          this.closePath();\n          break;\n        case _util.OPS.closeStroke:\n          this.closeStroke();\n          break;\n        case _util.OPS.closeFillStroke:\n          this.closeFillStroke();\n          break;\n        case _util.OPS.closeEOFillStroke:\n          this.closeEOFillStroke();\n          break;\n        case _util.OPS.nextLine:\n          this.nextLine();\n          break;\n        case _util.OPS.transform:\n          this.transform(args[0], args[1], args[2], args[3], args[4], args[5]);\n          break;\n        case _util.OPS.constructPath:\n          this.constructPath(args[0], args[1]);\n          break;\n        case _util.OPS.endPath:\n          this.endPath();\n          break;\n        case 92:\n          this.group(opTreeElement.items);\n          break;\n        default:\n          (0, _util.warn)(`Unimplemented operator ${fn}`);\n          break;\n      }\n    }\n  }\n  setWordSpacing(wordSpacing) {\n    this.current.wordSpacing = wordSpacing;\n  }\n  setCharSpacing(charSpacing) {\n    this.current.charSpacing = charSpacing;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  setTextMatrix(a, b, c, d, e, f) {\n    const current = this.current;\n    current.textMatrix = current.lineMatrix = [a, b, c, d, e, f];\n    current.textMatrixScale = Math.hypot(a, b);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n    current.xcoords = [];\n    current.ycoords = [];\n    current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n    current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n    current.tspan.setAttributeNS(null, \"font-size\", `${pf(current.fontSize)}px`);\n    current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n    current.txtElement = this.svgFactory.createElement(\"svg:text\");\n    current.txtElement.append(current.tspan);\n  }\n  beginText() {\n    const current = this.current;\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n    current.textMatrix = _util.IDENTITY_MATRIX;\n    current.lineMatrix = _util.IDENTITY_MATRIX;\n    current.textMatrixScale = 1;\n    current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n    current.txtElement = this.svgFactory.createElement(\"svg:text\");\n    current.txtgrp = this.svgFactory.createElement(\"svg:g\");\n    current.xcoords = [];\n    current.ycoords = [];\n  }\n  moveText(x, y) {\n    const current = this.current;\n    current.x = current.lineX += x;\n    current.y = current.lineY += y;\n    current.xcoords = [];\n    current.ycoords = [];\n    current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n    current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n    current.tspan.setAttributeNS(null, \"font-size\", `${pf(current.fontSize)}px`);\n    current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return;\n    }\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    let x = 0;\n    for (const glyph of glyphs) {\n      if (glyph === null) {\n        x += fontDirection * wordSpacing;\n        continue;\n      } else if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        let vx;\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n        vx = -vx * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (glyph.isInFont || font.missingFile) {\n        current.xcoords.push(current.x + scaledX);\n        if (vertical) {\n          current.ycoords.push(-current.y + scaledY);\n        }\n        current.tspan.textContent += character;\n      } else {}\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n    }\n    current.tspan.setAttributeNS(null, \"x\", current.xcoords.map(pf).join(\" \"));\n    if (vertical) {\n      current.tspan.setAttributeNS(null, \"y\", current.ycoords.map(pf).join(\" \"));\n    } else {\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n    current.tspan.setAttributeNS(null, \"font-size\", `${pf(current.fontSize)}px`);\n    if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n      current.tspan.setAttributeNS(null, \"font-style\", current.fontStyle);\n    }\n    if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n      current.tspan.setAttributeNS(null, \"font-weight\", current.fontWeight);\n    }\n    const fillStrokeMode = current.textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;\n    if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n      if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n        current.tspan.setAttributeNS(null, \"fill\", current.fillColor);\n      }\n      if (current.fillAlpha < 1) {\n        current.tspan.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n      }\n    } else if (current.textRenderingMode === _util.TextRenderingMode.ADD_TO_PATH) {\n      current.tspan.setAttributeNS(null, \"fill\", \"transparent\");\n    } else {\n      current.tspan.setAttributeNS(null, \"fill\", \"none\");\n    }\n    if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n      const lineWidthScale = 1 / (current.textMatrixScale || 1);\n      this._setStrokeAttributes(current.tspan, lineWidthScale);\n    }\n    let textMatrix = current.textMatrix;\n    if (current.textRise !== 0) {\n      textMatrix = textMatrix.slice();\n      textMatrix[5] += current.textRise;\n    }\n    current.txtElement.setAttributeNS(null, \"transform\", `${pm(textMatrix)} scale(${pf(textHScale)}, -1)`);\n    current.txtElement.setAttributeNS(XML_NS, \"xml:space\", \"preserve\");\n    current.txtElement.append(current.tspan);\n    current.txtgrp.append(current.txtElement);\n    this._ensureTransformGroup().append(current.txtElement);\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  addFontStyle(fontObj) {\n    if (!fontObj.data) {\n      throw new Error(\"addFontStyle: No font data available, \" + 'ensure that the \"fontExtraProperties\" API parameter is set.');\n    }\n    if (!this.cssStyle) {\n      this.cssStyle = this.svgFactory.createElement(\"svg:style\");\n      this.cssStyle.setAttributeNS(null, \"type\", \"text/css\");\n      this.defs.append(this.cssStyle);\n    }\n    const url = createObjectURL(fontObj.data, fontObj.mimetype, this.forceDataSchema);\n    this.cssStyle.textContent += `@font-face { font-family: \"${fontObj.loadedName}\";` + ` src: url(${url}); }\\n`;\n  }\n  setFont(details) {\n    const current = this.current;\n    const fontObj = this.commonObjs.get(details[0]);\n    let size = details[1];\n    current.font = fontObj;\n    if (this.embedFonts && !fontObj.missingFile && !this.embeddedFonts[fontObj.loadedName]) {\n      this.addFontStyle(fontObj);\n      this.embeddedFonts[fontObj.loadedName] = fontObj;\n    }\n    current.fontMatrix = fontObj.fontMatrix || _util.FONT_IDENTITY_MATRIX;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    current.fontSize = size;\n    current.fontFamily = fontObj.loadedName;\n    current.fontWeight = bold;\n    current.fontStyle = italic;\n    current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n    current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n    current.xcoords = [];\n    current.ycoords = [];\n  }\n  endText() {\n    const current = this.current;\n    if (current.textRenderingMode & _util.TextRenderingMode.ADD_TO_PATH_FLAG && current.txtElement?.hasChildNodes()) {\n      current.element = current.txtElement;\n      this.clip(\"nonzero\");\n      this.endPath();\n    }\n  }\n  setLineWidth(width) {\n    if (width > 0) {\n      this.current.lineWidth = width;\n    }\n  }\n  setLineCap(style) {\n    this.current.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.current.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.current.miterLimit = limit;\n  }\n  setStrokeAlpha(strokeAlpha) {\n    this.current.strokeAlpha = strokeAlpha;\n  }\n  setStrokeRGBColor(r, g, b) {\n    this.current.strokeColor = _util.Util.makeHexColor(r, g, b);\n  }\n  setFillAlpha(fillAlpha) {\n    this.current.fillAlpha = fillAlpha;\n  }\n  setFillRGBColor(r, g, b) {\n    this.current.fillColor = _util.Util.makeHexColor(r, g, b);\n    this.current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n    this.current.xcoords = [];\n    this.current.ycoords = [];\n  }\n  setStrokeColorN(args) {\n    this.current.strokeColor = this._makeColorN_Pattern(args);\n  }\n  setFillColorN(args) {\n    this.current.fillColor = this._makeColorN_Pattern(args);\n  }\n  shadingFill(args) {\n    const {\n      width,\n      height\n    } = this.viewport;\n    const inv = _util.Util.inverseTransform(this.transformMatrix);\n    const [x0, y0, x1, y1] = _util.Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n    const rect = this.svgFactory.createElement(\"svg:rect\");\n    rect.setAttributeNS(null, \"x\", x0);\n    rect.setAttributeNS(null, \"y\", y0);\n    rect.setAttributeNS(null, \"width\", x1 - x0);\n    rect.setAttributeNS(null, \"height\", y1 - y0);\n    rect.setAttributeNS(null, \"fill\", this._makeShadingPattern(args));\n    if (this.current.fillAlpha < 1) {\n      rect.setAttributeNS(null, \"fill-opacity\", this.current.fillAlpha);\n    }\n    this._ensureTransformGroup().append(rect);\n  }\n  _makeColorN_Pattern(args) {\n    if (args[0] === \"TilingPattern\") {\n      return this._makeTilingPattern(args);\n    }\n    return this._makeShadingPattern(args);\n  }\n  _makeTilingPattern(args) {\n    const color = args[1];\n    const operatorList = args[2];\n    const matrix = args[3] || _util.IDENTITY_MATRIX;\n    const [x0, y0, x1, y1] = args[4];\n    const xstep = args[5];\n    const ystep = args[6];\n    const paintType = args[7];\n    const tilingId = `shading${shadingCount++}`;\n    const [tx0, ty0, tx1, ty1] = _util.Util.normalizeRect([..._util.Util.applyTransform([x0, y0], matrix), ..._util.Util.applyTransform([x1, y1], matrix)]);\n    const [xscale, yscale] = _util.Util.singularValueDecompose2dScale(matrix);\n    const txstep = xstep * xscale;\n    const tystep = ystep * yscale;\n    const tiling = this.svgFactory.createElement(\"svg:pattern\");\n    tiling.setAttributeNS(null, \"id\", tilingId);\n    tiling.setAttributeNS(null, \"patternUnits\", \"userSpaceOnUse\");\n    tiling.setAttributeNS(null, \"width\", txstep);\n    tiling.setAttributeNS(null, \"height\", tystep);\n    tiling.setAttributeNS(null, \"x\", `${tx0}`);\n    tiling.setAttributeNS(null, \"y\", `${ty0}`);\n    const svg = this.svg;\n    const transformMatrix = this.transformMatrix;\n    const fillColor = this.current.fillColor;\n    const strokeColor = this.current.strokeColor;\n    const bbox = this.svgFactory.create(tx1 - tx0, ty1 - ty0);\n    this.svg = bbox;\n    this.transformMatrix = matrix;\n    if (paintType === 2) {\n      const cssColor = _util.Util.makeHexColor(...color);\n      this.current.fillColor = cssColor;\n      this.current.strokeColor = cssColor;\n    }\n    this.executeOpTree(this.convertOpList(operatorList));\n    this.svg = svg;\n    this.transformMatrix = transformMatrix;\n    this.current.fillColor = fillColor;\n    this.current.strokeColor = strokeColor;\n    tiling.append(bbox.childNodes[0]);\n    this.defs.append(tiling);\n    return `url(#${tilingId})`;\n  }\n  _makeShadingPattern(args) {\n    if (typeof args === \"string\") {\n      args = this.objs.get(args);\n    }\n    switch (args[0]) {\n      case \"RadialAxial\":\n        const shadingId = `shading${shadingCount++}`;\n        const colorStops = args[3];\n        let gradient;\n        switch (args[1]) {\n          case \"axial\":\n            const point0 = args[4];\n            const point1 = args[5];\n            gradient = this.svgFactory.createElement(\"svg:linearGradient\");\n            gradient.setAttributeNS(null, \"id\", shadingId);\n            gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n            gradient.setAttributeNS(null, \"x1\", point0[0]);\n            gradient.setAttributeNS(null, \"y1\", point0[1]);\n            gradient.setAttributeNS(null, \"x2\", point1[0]);\n            gradient.setAttributeNS(null, \"y2\", point1[1]);\n            break;\n          case \"radial\":\n            const focalPoint = args[4];\n            const circlePoint = args[5];\n            const focalRadius = args[6];\n            const circleRadius = args[7];\n            gradient = this.svgFactory.createElement(\"svg:radialGradient\");\n            gradient.setAttributeNS(null, \"id\", shadingId);\n            gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n            gradient.setAttributeNS(null, \"cx\", circlePoint[0]);\n            gradient.setAttributeNS(null, \"cy\", circlePoint[1]);\n            gradient.setAttributeNS(null, \"r\", circleRadius);\n            gradient.setAttributeNS(null, \"fx\", focalPoint[0]);\n            gradient.setAttributeNS(null, \"fy\", focalPoint[1]);\n            gradient.setAttributeNS(null, \"fr\", focalRadius);\n            break;\n          default:\n            throw new Error(`Unknown RadialAxial type: ${args[1]}`);\n        }\n        for (const colorStop of colorStops) {\n          const stop = this.svgFactory.createElement(\"svg:stop\");\n          stop.setAttributeNS(null, \"offset\", colorStop[0]);\n          stop.setAttributeNS(null, \"stop-color\", colorStop[1]);\n          gradient.append(stop);\n        }\n        this.defs.append(gradient);\n        return `url(#${shadingId})`;\n      case \"Mesh\":\n        (0, _util.warn)(\"Unimplemented pattern Mesh\");\n        return null;\n      case \"Dummy\":\n        return \"hotpink\";\n      default:\n        throw new Error(`Unknown IR type: ${args[0]}`);\n    }\n  }\n  setDash(dashArray, dashPhase) {\n    this.current.dashArray = dashArray;\n    this.current.dashPhase = dashPhase;\n  }\n  constructPath(ops, args) {\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let d = [];\n    let j = 0;\n    for (const op of ops) {\n      switch (op | 0) {\n        case _util.OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n          const xw = x + width;\n          const yh = y + height;\n          d.push(\"M\", pf(x), pf(y), \"L\", pf(xw), pf(y), \"L\", pf(xw), pf(yh), \"L\", pf(x), pf(yh), \"Z\");\n          break;\n        case _util.OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          d.push(\"M\", pf(x), pf(y));\n          break;\n        case _util.OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          d.push(\"L\", pf(x), pf(y));\n          break;\n        case _util.OPS.curveTo:\n          x = args[j + 4];\n          y = args[j + 5];\n          d.push(\"C\", pf(args[j]), pf(args[j + 1]), pf(args[j + 2]), pf(args[j + 3]), pf(x), pf(y));\n          j += 6;\n          break;\n        case _util.OPS.curveTo2:\n          d.push(\"C\", pf(x), pf(y), pf(args[j]), pf(args[j + 1]), pf(args[j + 2]), pf(args[j + 3]));\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case _util.OPS.curveTo3:\n          x = args[j + 2];\n          y = args[j + 3];\n          d.push(\"C\", pf(args[j]), pf(args[j + 1]), pf(x), pf(y), pf(x), pf(y));\n          j += 4;\n          break;\n        case _util.OPS.closePath:\n          d.push(\"Z\");\n          break;\n      }\n    }\n    d = d.join(\" \");\n    if (current.path && ops.length > 0 && ops[0] !== _util.OPS.rectangle && ops[0] !== _util.OPS.moveTo) {\n      d = current.path.getAttributeNS(null, \"d\") + d;\n    } else {\n      current.path = this.svgFactory.createElement(\"svg:path\");\n      this._ensureTransformGroup().append(current.path);\n    }\n    current.path.setAttributeNS(null, \"d\", d);\n    current.path.setAttributeNS(null, \"fill\", \"none\");\n    current.element = current.path;\n    current.setCurrentPoint(x, y);\n  }\n  endPath() {\n    const current = this.current;\n    current.path = null;\n    if (!this.pendingClip) {\n      return;\n    }\n    if (!current.element) {\n      this.pendingClip = null;\n      return;\n    }\n    const clipId = `clippath${clipCount++}`;\n    const clipPath = this.svgFactory.createElement(\"svg:clipPath\");\n    clipPath.setAttributeNS(null, \"id\", clipId);\n    clipPath.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n    const clipElement = current.element.cloneNode(true);\n    if (this.pendingClip === \"evenodd\") {\n      clipElement.setAttributeNS(null, \"clip-rule\", \"evenodd\");\n    } else {\n      clipElement.setAttributeNS(null, \"clip-rule\", \"nonzero\");\n    }\n    this.pendingClip = null;\n    clipPath.append(clipElement);\n    this.defs.append(clipPath);\n    if (current.activeClipUrl) {\n      current.clipGroup = null;\n      for (const prev of this.extraStack) {\n        prev.clipGroup = null;\n      }\n      clipPath.setAttributeNS(null, \"clip-path\", current.activeClipUrl);\n    }\n    current.activeClipUrl = `url(#${clipId})`;\n    this.tgrp = null;\n  }\n  clip(type) {\n    this.pendingClip = type;\n  }\n  closePath() {\n    const current = this.current;\n    if (current.path) {\n      const d = `${current.path.getAttributeNS(null, \"d\")}Z`;\n      current.path.setAttributeNS(null, \"d\", d);\n    }\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setTextRise(textRise) {\n    this.current.textRise = textRise;\n  }\n  setTextRenderingMode(textRenderingMode) {\n    this.current.textRenderingMode = textRenderingMode;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value);\n          break;\n        case \"CA\":\n          this.setStrokeAlpha(value);\n          break;\n        case \"ca\":\n          this.setFillAlpha(value);\n          break;\n        default:\n          (0, _util.warn)(`Unimplemented graphic state operator ${key}`);\n          break;\n      }\n    }\n  }\n  fill() {\n    const current = this.current;\n    if (current.element) {\n      current.element.setAttributeNS(null, \"fill\", current.fillColor);\n      current.element.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n      this.endPath();\n    }\n  }\n  stroke() {\n    const current = this.current;\n    if (current.element) {\n      this._setStrokeAttributes(current.element);\n      current.element.setAttributeNS(null, \"fill\", \"none\");\n      this.endPath();\n    }\n  }\n  _setStrokeAttributes(element, lineWidthScale = 1) {\n    const current = this.current;\n    let dashArray = current.dashArray;\n    if (lineWidthScale !== 1 && dashArray.length > 0) {\n      dashArray = dashArray.map(function (value) {\n        return lineWidthScale * value;\n      });\n    }\n    element.setAttributeNS(null, \"stroke\", current.strokeColor);\n    element.setAttributeNS(null, \"stroke-opacity\", current.strokeAlpha);\n    element.setAttributeNS(null, \"stroke-miterlimit\", pf(current.miterLimit));\n    element.setAttributeNS(null, \"stroke-linecap\", current.lineCap);\n    element.setAttributeNS(null, \"stroke-linejoin\", current.lineJoin);\n    element.setAttributeNS(null, \"stroke-width\", pf(lineWidthScale * current.lineWidth) + \"px\");\n    element.setAttributeNS(null, \"stroke-dasharray\", dashArray.map(pf).join(\" \"));\n    element.setAttributeNS(null, \"stroke-dashoffset\", pf(lineWidthScale * current.dashPhase) + \"px\");\n  }\n  eoFill() {\n    this.current.element?.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n    this.fill();\n  }\n  fillStroke() {\n    this.stroke();\n    this.fill();\n  }\n  eoFillStroke() {\n    this.current.element?.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n    this.fillStroke();\n  }\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n  closeEOFillStroke() {\n    this.closePath();\n    this.eoFillStroke();\n  }\n  paintSolidColorImageMask() {\n    const rect = this.svgFactory.createElement(\"svg:rect\");\n    rect.setAttributeNS(null, \"x\", \"0\");\n    rect.setAttributeNS(null, \"y\", \"0\");\n    rect.setAttributeNS(null, \"width\", \"1px\");\n    rect.setAttributeNS(null, \"height\", \"1px\");\n    rect.setAttributeNS(null, \"fill\", this.current.fillColor);\n    this._ensureTransformGroup().append(rect);\n  }\n  paintImageXObject(objId) {\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      (0, _util.warn)(`Dependent image with object ID ${objId} is not ready yet`);\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintInlineImageXObject(imgData, mask) {\n    const width = imgData.width;\n    const height = imgData.height;\n    const imgSrc = convertImgDataToPng(imgData, this.forceDataSchema, !!mask);\n    const cliprect = this.svgFactory.createElement(\"svg:rect\");\n    cliprect.setAttributeNS(null, \"x\", \"0\");\n    cliprect.setAttributeNS(null, \"y\", \"0\");\n    cliprect.setAttributeNS(null, \"width\", pf(width));\n    cliprect.setAttributeNS(null, \"height\", pf(height));\n    this.current.element = cliprect;\n    this.clip(\"nonzero\");\n    const imgEl = this.svgFactory.createElement(\"svg:image\");\n    imgEl.setAttributeNS(XLINK_NS, \"xlink:href\", imgSrc);\n    imgEl.setAttributeNS(null, \"x\", \"0\");\n    imgEl.setAttributeNS(null, \"y\", pf(-height));\n    imgEl.setAttributeNS(null, \"width\", pf(width) + \"px\");\n    imgEl.setAttributeNS(null, \"height\", pf(height) + \"px\");\n    imgEl.setAttributeNS(null, \"transform\", `scale(${pf(1 / width)} ${pf(-1 / height)})`);\n    if (mask) {\n      mask.append(imgEl);\n    } else {\n      this._ensureTransformGroup().append(imgEl);\n    }\n  }\n  paintImageMaskXObject(img) {\n    const imgData = this.getObject(img.data, img);\n    if (imgData.bitmap) {\n      (0, _util.warn)(\"paintImageMaskXObject: ImageBitmap support is not implemented, \" + \"ensure that the `isOffscreenCanvasSupported` API parameter is disabled.\");\n      return;\n    }\n    const current = this.current;\n    const width = imgData.width;\n    const height = imgData.height;\n    const fillColor = current.fillColor;\n    current.maskId = `mask${maskCount++}`;\n    const mask = this.svgFactory.createElement(\"svg:mask\");\n    mask.setAttributeNS(null, \"id\", current.maskId);\n    const rect = this.svgFactory.createElement(\"svg:rect\");\n    rect.setAttributeNS(null, \"x\", \"0\");\n    rect.setAttributeNS(null, \"y\", \"0\");\n    rect.setAttributeNS(null, \"width\", pf(width));\n    rect.setAttributeNS(null, \"height\", pf(height));\n    rect.setAttributeNS(null, \"fill\", fillColor);\n    rect.setAttributeNS(null, \"mask\", `url(#${current.maskId})`);\n    this.defs.append(mask);\n    this._ensureTransformGroup().append(rect);\n    this.paintInlineImageXObject(imgData, mask);\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n    }\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      const cliprect = this.svgFactory.createElement(\"svg:rect\");\n      cliprect.setAttributeNS(null, \"x\", bbox[0]);\n      cliprect.setAttributeNS(null, \"y\", bbox[1]);\n      cliprect.setAttributeNS(null, \"width\", pf(width));\n      cliprect.setAttributeNS(null, \"height\", pf(height));\n      this.current.element = cliprect;\n      this.clip(\"nonzero\");\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {}\n  _initialize(viewport) {\n    const svg = this.svgFactory.create(viewport.width, viewport.height);\n    const definitions = this.svgFactory.createElement(\"svg:defs\");\n    svg.append(definitions);\n    this.defs = definitions;\n    const rootGroup = this.svgFactory.createElement(\"svg:g\");\n    rootGroup.setAttributeNS(null, \"transform\", pm(viewport.transform));\n    svg.append(rootGroup);\n    this.svg = rootGroup;\n    return svg;\n  }\n  _ensureClipGroup() {\n    if (!this.current.clipGroup) {\n      const clipGroup = this.svgFactory.createElement(\"svg:g\");\n      clipGroup.setAttributeNS(null, \"clip-path\", this.current.activeClipUrl);\n      this.svg.append(clipGroup);\n      this.current.clipGroup = clipGroup;\n    }\n    return this.current.clipGroup;\n  }\n  _ensureTransformGroup() {\n    if (!this.tgrp) {\n      this.tgrp = this.svgFactory.createElement(\"svg:g\");\n      this.tgrp.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n      if (this.current.activeClipUrl) {\n        this._ensureClipGroup().append(this.tgrp);\n      } else {\n        this.svg.append(this.tgrp);\n      }\n    }\n    return this.tgrp;\n  }\n}\nexports.SVGGraphics = SVGGraphics;\n\n/***/ }),\n/* 25 */\n/***/ ((__unused_webpack_module, exports) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.XfaText = void 0;\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\nexports.XfaText = XfaText;\n\n/***/ }),\n/* 26 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TextLayerRenderTask = void 0;\nexports.renderTextLayer = renderTextLayer;\nexports.updateTextLayer = updateTextLayer;\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nconst ascentCache = new Map();\nfunction getCtx(size, isOffscreenCanvasSupported) {\n  let ctx;\n  if (isOffscreenCanvasSupported && _util.FeatureTest.isOffscreenCanvasSupported) {\n    ctx = new OffscreenCanvas(size, size).getContext(\"2d\", {\n      alpha: false\n    });\n  } else {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = canvas.height = size;\n    ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n  }\n  return ctx;\n}\nfunction getAscent(fontFamily, isOffscreenCanvasSupported) {\n  const cachedAscent = ascentCache.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n  const ctx = getCtx(DEFAULT_FONT_SIZE, isOffscreenCanvasSupported);\n  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n  const metrics = ctx.measureText(\"\");\n  let ascent = metrics.fontBoundingBoxAscent;\n  let descent = Math.abs(metrics.fontBoundingBoxDescent);\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    return ratio;\n  }\n  ctx.strokeStyle = \"red\";\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"g\", 0, 0);\n  let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  descent = 0;\n  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n    if (pixels[i] > 0) {\n      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  ascent = 0;\n  for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n    if (pixels[i] > 0) {\n      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n  ctx.canvas.width = ctx.canvas.height = 0;\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n  return DEFAULT_FONT_ASCENT;\n}\nfunction appendText(task, geom, styles) {\n  const textDiv = document.createElement(\"span\");\n  const textDivProperties = {\n    angle: 0,\n    canvasWidth: 0,\n    hasText: geom.str !== \"\",\n    hasEOL: geom.hasEOL,\n    fontSize: 0\n  };\n  task._textDivs.push(textDiv);\n  const tx = _util.Util.transform(task._transform, geom.transform);\n  let angle = Math.atan2(tx[1], tx[0]);\n  const style = styles[geom.fontName];\n  if (style.vertical) {\n    angle += Math.PI / 2;\n  }\n  const fontHeight = Math.hypot(tx[2], tx[3]);\n  const fontAscent = fontHeight * getAscent(style.fontFamily, task._isOffscreenCanvasSupported);\n  let left, top;\n  if (angle === 0) {\n    left = tx[4];\n    top = tx[5] - fontAscent;\n  } else {\n    left = tx[4] + fontAscent * Math.sin(angle);\n    top = tx[5] - fontAscent * Math.cos(angle);\n  }\n  const scaleFactorStr = \"calc(var(--scale-factor)*\";\n  const divStyle = textDiv.style;\n  if (task._container === task._rootContainer) {\n    divStyle.left = `${(100 * left / task._pageWidth).toFixed(2)}%`;\n    divStyle.top = `${(100 * top / task._pageHeight).toFixed(2)}%`;\n  } else {\n    divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n    divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n  }\n  divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n  divStyle.fontFamily = style.fontFamily;\n  textDivProperties.fontSize = fontHeight;\n  textDiv.setAttribute(\"role\", \"presentation\");\n  textDiv.textContent = geom.str;\n  textDiv.dir = geom.dir;\n  if (task._fontInspectorEnabled) {\n    textDiv.dataset.fontName = geom.fontName;\n  }\n  if (angle !== 0) {\n    textDivProperties.angle = angle * (180 / Math.PI);\n  }\n  let shouldScaleText = false;\n  if (geom.str.length > 1) {\n    shouldScaleText = true;\n  } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n    const absScaleX = Math.abs(geom.transform[0]),\n      absScaleY = Math.abs(geom.transform[3]);\n    if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n      shouldScaleText = true;\n    }\n  }\n  if (shouldScaleText) {\n    textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n  }\n  task._textDivProperties.set(textDiv, textDivProperties);\n  if (task._isReadableStream) {\n    task._layoutText(textDiv);\n  }\n}\nfunction layout(params) {\n  const {\n    div,\n    scale,\n    properties,\n    ctx,\n    prevFontSize,\n    prevFontFamily\n  } = params;\n  const {\n    style\n  } = div;\n  let transform = \"\";\n  if (properties.canvasWidth !== 0 && properties.hasText) {\n    const {\n      fontFamily\n    } = style;\n    const {\n      canvasWidth,\n      fontSize\n    } = properties;\n    if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n      ctx.font = `${fontSize * scale}px ${fontFamily}`;\n      params.prevFontSize = fontSize;\n      params.prevFontFamily = fontFamily;\n    }\n    const {\n      width\n    } = ctx.measureText(div.textContent);\n    if (width > 0) {\n      transform = `scaleX(${canvasWidth * scale / width})`;\n    }\n  }\n  if (properties.angle !== 0) {\n    transform = `rotate(${properties.angle}deg) ${transform}`;\n  }\n  if (transform.length > 0) {\n    style.transform = transform;\n  }\n}\nfunction render(task) {\n  if (task._canceled) {\n    return;\n  }\n  const textDivs = task._textDivs;\n  const capability = task._capability;\n  const textDivsLength = textDivs.length;\n  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n    capability.resolve();\n    return;\n  }\n  if (!task._isReadableStream) {\n    for (const textDiv of textDivs) {\n      task._layoutText(textDiv);\n    }\n  }\n  capability.resolve();\n}\nclass TextLayerRenderTask {\n  constructor({\n    textContentSource,\n    container,\n    viewport,\n    textDivs,\n    textDivProperties,\n    textContentItemsStr,\n    isOffscreenCanvasSupported\n  }) {\n    this._textContentSource = textContentSource;\n    this._isReadableStream = textContentSource instanceof ReadableStream;\n    this._container = this._rootContainer = container;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._isOffscreenCanvasSupported = isOffscreenCanvasSupported;\n    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n    this._reader = null;\n    this._textDivProperties = textDivProperties || new WeakMap();\n    this._canceled = false;\n    this._capability = new _util.PromiseCapability();\n    this._layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale: viewport.scale * (globalThis.devicePixelRatio || 1),\n      properties: null,\n      ctx: getCtx(0, isOffscreenCanvasSupported)\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this._transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this._pageWidth = pageWidth;\n    this._pageHeight = pageHeight;\n    (0, _display_utils.setLayerDimensions)(container, viewport);\n    this._capability.promise.finally(() => {\n      this._layoutTextParams = null;\n    }).catch(() => {});\n  }\n  get promise() {\n    return this._capability.promise;\n  }\n  cancel() {\n    this._canceled = true;\n    if (this._reader) {\n      this._reader.cancel(new _util.AbortException(\"TextLayer task cancelled.\")).catch(() => {});\n      this._reader = null;\n    }\n    this._capability.reject(new _util.AbortException(\"TextLayer task cancelled.\"));\n  }\n  _processItems(items, styleCache) {\n    for (const item of items) {\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this._container;\n          this._container = document.createElement(\"span\");\n          this._container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this._container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this._container);\n        } else if (item.type === \"endMarkedContent\") {\n          this._container = this._container.parentNode;\n        }\n        continue;\n      }\n      this._textContentItemsStr.push(item.str);\n      appendText(this, item, styleCache);\n    }\n  }\n  _layoutText(textDiv) {\n    const textDivProperties = this._layoutTextParams.properties = this._textDivProperties.get(textDiv);\n    this._layoutTextParams.div = textDiv;\n    layout(this._layoutTextParams);\n    if (textDivProperties.hasText) {\n      this._container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this._container.append(br);\n    }\n  }\n  _render() {\n    const capability = new _util.PromiseCapability();\n    let styleCache = Object.create(null);\n    if (this._isReadableStream) {\n      const pump = () => {\n        this._reader.read().then(({\n          value,\n          done\n        }) => {\n          if (done) {\n            capability.resolve();\n            return;\n          }\n          Object.assign(styleCache, value.styles);\n          this._processItems(value.items, styleCache);\n          pump();\n        }, capability.reject);\n      };\n      this._reader = this._textContentSource.getReader();\n      pump();\n    } else if (this._textContentSource) {\n      const {\n        items,\n        styles\n      } = this._textContentSource;\n      this._processItems(items, styles);\n      capability.resolve();\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    capability.promise.then(() => {\n      styleCache = null;\n      render(this);\n    }, this._capability.reject);\n  }\n}\nexports.TextLayerRenderTask = TextLayerRenderTask;\nfunction renderTextLayer(params) {\n  if (!params.textContentSource && (params.textContent || params.textContentStream)) {\n    (0, _display_utils.deprecated)(\"The TextLayerRender `textContent`/`textContentStream` parameters \" + \"will be removed in the future, please use `textContentSource` instead.\");\n    params.textContentSource = params.textContent || params.textContentStream;\n  }\n  const {\n    container,\n    viewport\n  } = params;\n  const style = getComputedStyle(container);\n  const visibility = style.getPropertyValue(\"visibility\");\n  const scaleFactor = parseFloat(style.getPropertyValue(\"--scale-factor\"));\n  if (visibility === \"visible\" && (!scaleFactor || Math.abs(scaleFactor - viewport.scale) > 1e-5)) {\n    console.error(\"The `--scale-factor` CSS-variable must be set, \" + \"to the same value as `viewport.scale`, \" + \"either on the `container`-element itself or higher up in the DOM.\");\n  }\n  const task = new TextLayerRenderTask(params);\n  task._render();\n  return task;\n}\nfunction updateTextLayer({\n  container,\n  viewport,\n  textDivs,\n  textDivProperties,\n  isOffscreenCanvasSupported,\n  mustRotate = true,\n  mustRescale = true\n}) {\n  if (mustRotate) {\n    (0, _display_utils.setLayerDimensions)(container, {\n      rotation: viewport.rotation\n    });\n  }\n  if (mustRescale) {\n    const ctx = getCtx(0, isOffscreenCanvasSupported);\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const params = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale,\n      properties: null,\n      ctx\n    };\n    for (const div of textDivs) {\n      params.properties = textDivProperties.get(div);\n      params.div = div;\n      layout(params);\n    }\n  }\n}\n\n/***/ }),\n/* 27 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.AnnotationEditorLayer = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _editor = __w_pdfjs_require__(4);\nvar _freetext = __w_pdfjs_require__(28);\nvar _ink = __w_pdfjs_require__(33);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _stamp = __w_pdfjs_require__(34);\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #boundPointerup = this.pointerup.bind(this);\n  #boundPointerdown = this.pointerdown.bind(this);\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isCleaningUp = false;\n  #isDisabling = false;\n  #uiManager;\n  static _initialized = false;\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [_freetext.FreeTextEditor, _ink.InkEditor, _stamp.StampEditor];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    if (mode === _util.AnnotationEditorType.INK) {\n      this.addInkEditorIfNeeded(false);\n      this.disableClick();\n    } else {\n      this.enableClick();\n    }\n    if (mode !== _util.AnnotationEditorType.NONE) {\n      this.div.classList.toggle(\"freeTextEditing\", mode === _util.AnnotationEditorType.FREETEXT);\n      this.div.classList.toggle(\"inkEditing\", mode === _util.AnnotationEditorType.INK);\n      this.div.classList.toggle(\"stampEditing\", mode === _util.AnnotationEditorType.STAMP);\n      this.div.hidden = false;\n    }\n  }\n  addInkEditorIfNeeded(isCommitting) {\n    if (!isCommitting && this.#uiManager.getMode() !== _util.AnnotationEditorType.INK) {\n      return;\n    }\n    if (!isCommitting) {\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n    const editor = this.#createAndAddNewEditor({\n      offsetX: 0,\n      offsetY: 0\n    }, false);\n    editor.setInBackground();\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  enable() {\n    this.div.style.pointerEvents = \"auto\";\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      if (editor.annotationElementId) {\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.style.pointerEvents = \"none\";\n    const hiddenAnnotationIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId || editor.serialize() !== null) {\n        hiddenAnnotationIds.add(editor.annotationElementId);\n        continue;\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (hiddenAnnotationIds.has(id) || this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableClick() {\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup);\n  }\n  disableClick() {\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    if (editor.div.contains(document.activeElement)) {\n      setTimeout(() => {\n        this.#uiManager.focusMainContainer();\n      }, 0);\n    }\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(false);\n    }\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      _editor.AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement)) {\n      editor._focusEventsAllowed = false;\n      setTimeout(() => {\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.rebuild();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  #createNewEditor(params) {\n    switch (this.#uiManager.getMode()) {\n      case _util.AnnotationEditorType.FREETEXT:\n        return new _freetext.FreeTextEditor(params);\n      case _util.AnnotationEditorType.INK:\n        return new _ink.InkEditor(params);\n      case _util.AnnotationEditorType.STAMP:\n        return new _stamp.StampEditor(params);\n    }\n    return null;\n  }\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  deserialize(data) {\n    switch (data.annotationType ?? data.annotationEditorType) {\n      case _util.AnnotationEditorType.FREETEXT:\n        return _freetext.FreeTextEditor.deserialize(data, this, this.#uiManager);\n      case _util.AnnotationEditorType.INK:\n        return _ink.InkEditor.deserialize(data, this, this.#uiManager);\n      case _util.AnnotationEditorType.STAMP:\n        return _stamp.StampEditor.deserialize(data, this, this.#uiManager);\n    }\n    return null;\n  }\n  #createAndAddNewEditor(event, isCentered) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor() {\n    this.#createAndAddNewEditor(this.#getCenterPoint(), true);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = _util.FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    if (this.#uiManager.getMode() === _util.AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.#createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = _util.FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    (0, _display_utils.setLayerDimensions)(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.viewport = viewport;\n    (0, _display_utils.setLayerDimensions)(this.div, {\n      rotation: viewport.rotation\n    });\n    this.updateMode();\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n}\nexports.AnnotationEditorLayer = AnnotationEditorLayer;\n\n/***/ }),\n/* 28 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.FreeTextEditor = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _tools = __w_pdfjs_require__(5);\nvar _editor = __w_pdfjs_require__(4);\nvar _annotation_layer = __w_pdfjs_require__(29);\nclass FreeTextEditor extends _editor.AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #fontSize;\n  #initialData = null;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = _tools.AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = _tools.AnnotationEditorUIManager.TRANSLATE_BIG;\n    return (0, _util.shadow)(this, \"_keyboardManager\", new _tools.KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || _editor.AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n) {\n    _editor.AnnotationEditor.initialize(l10n, {\n      strings: [\"free_text2_default_content\", \"editor_free_text2_aria_label\"]\n    });\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case _util.AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case _util.AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case _util.AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case _util.AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[_util.AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [_util.AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || _editor.AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[_util.AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [_util.AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: () => {\n        setFontsize(fontSize);\n      },\n      undo: () => {\n        setFontsize(savedFontsize);\n      },\n      mustExec: true,\n      type: _util.AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: () => {\n        this.#color = this.editorDiv.style.color = color;\n      },\n      undo: () => {\n        this.#color = this.editorDiv.style.color = savedColor;\n      },\n      mustExec: true,\n      type: _util.AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(_util.AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freeTextEditing\");\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded() {\n    if (this.width) {\n      this.#cheatInitialRect();\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freeTextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const divs = this.editorDiv.getElementsByTagName(\"div\");\n    if (divs.length === 0) {\n      return this.editorDiv.innerText;\n    }\n    const buffer = [];\n    for (const div of divs) {\n      buffer.push(div.innerText.replace(/\\r\\n?|\\n/, \"\"));\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freeTextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.enableEditing();\n    _editor.AnnotationEditor._l10nPromise.get(\"editor_free_text2_aria_label\").then(msg => this.editorDiv?.setAttribute(\"aria-label\", msg));\n    _editor.AnnotationEditor._l10nPromise.get(\"free_text2_default_content\").then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    (0, _tools.bindEvents)(this, this.div, [\"dblclick\", \"keydown\"]);\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof _annotation_layer.FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: _util.AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect,\n        rotation,\n        id,\n        deleted: false\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = _util.Util.makeHexColor(...data.color);\n    editor.#content = data.value;\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true\n      };\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = _editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: _util.AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#content,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      rect,\n      pageIndex\n    } = this.#initialData;\n    return serialized.value !== value || serialized.fontSize !== fontSize || serialized.rect.some((x, i) => Math.abs(x - rect[i]) >= 1) || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  #cheatInitialRect(delayed = false) {\n    if (!this.annotationElementId) {\n      return;\n    }\n    this.#setEditorDimensions();\n    if (!delayed && (this.width === 0 || this.height === 0)) {\n      setTimeout(() => this.#cheatInitialRect(true), 0);\n      return;\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    this.#initialData.rect = this.getRect(padding, padding);\n  }\n}\nexports.FreeTextEditor = FreeTextEditor;\n\n/***/ }),\n/* 29 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.StampAnnotationElement = exports.InkAnnotationElement = exports.FreeTextAnnotationElement = exports.AnnotationLayer = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _annotation_storage = __w_pdfjs_require__(3);\nvar _scripting_utils = __w_pdfjs_require__(30);\nvar _displayL10n_utils = __w_pdfjs_require__(31);\nvar _xfa_layer = __w_pdfjs_require__(32);\nconst DEFAULT_TAB_INDEX = 1000;\nconst DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1]\n  };\n}\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case _util.AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case _util.AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case _util.AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case _util.AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case _util.AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case _util.AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case _util.AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case _util.AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case _util.AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case _util.AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case _util.AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case _util.AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case _util.AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case _util.AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case _util.AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case _util.AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case _util.AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case _util.AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #hasBorder = false;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    container.style.zIndex = this.parent.zIndex++;\n    if (this.data.popupRef) {\n      container.setAttribute(\"aria-haspopup\", \"dialog\");\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const rect = _util.Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      container.style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        container.style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        container.style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case _util.AnnotationBorderStyleType.SOLID:\n          container.style.borderStyle = \"solid\";\n          break;\n        case _util.AnnotationBorderStyleType.DASHED:\n          container.style.borderStyle = \"dashed\";\n          break;\n        case _util.AnnotationBorderStyleType.BEVELED:\n          (0, _util.warn)(\"Unimplemented border style: beveled\");\n          break;\n        case _util.AnnotationBorderStyleType.INSET:\n          (0, _util.warn)(\"Unimplemented border style: inset\");\n          break;\n        case _util.AnnotationBorderStyleType.UNDERLINE:\n          container.style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        container.style.borderColor = _util.Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        container.style.borderWidth = 0;\n      }\n    }\n    container.style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    container.style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      container.style.width = `${100 * width / pageWidth}%`;\n      container.style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    const {\n      width,\n      height\n    } = getRectDims(this.data.rect);\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = 100 * width / pageWidth;\n      elementHeight = 100 * height / pageHeight;\n    } else {\n      elementWidth = 100 * height / pageWidth;\n      elementHeight = 100 * width / pageHeight;\n    }\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = _scripting_utils.ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: _scripting_utils.ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return (0, _util.shadow)(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n    if (quadPoints.length === 1) {\n      const [, {\n        x: trX,\n        y: trY\n      }, {\n        x: blX,\n        y: blY\n      }] = quadPoints[0];\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (const [, {\n      x: trX,\n      y: trY\n    }, {\n      x: blX,\n      y: blY\n    }] of quadPoints) {\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      container,\n      data\n    } = this;\n    container.setAttribute(\"aria-haspopup\", \"dialog\");\n    const popup = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    (0, _util.unreachable)(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            (0, _util.warn)(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this._bindAttachment(link, data.attachment);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindAttachment(link, attachment) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(this.container, attachment.content, attachment.filename);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      (0, _util.warn)(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          (0, _util.warn)(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.alt = \"[{{type}} Annotation]\";\n    image.dataset.l10nId = \"text_annotation_type\";\n    image.dataset.l10nArgs = JSON.stringify({\n      type: this.data.name\n    });\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    if (this.data.alternativeText) {\n      this.container.title = this.data.alternativeText;\n    }\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    const {\n      isWin,\n      isMac\n    } = _util.FeatureTest.platform;\n    return isWin && event.ctrlKey || isMac && event.metaKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : _util.Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (_util.LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / _util.LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / _util.LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n    style.color = _util.Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          elementData.focused = true;\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    if (this.data.alternativeText) {\n      container.title = this.data.alternativeText;\n    }\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => {\n        return {\n          displayValue: option.textContent,\n          exportValue: option.value\n        };\n      });\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${_util.AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #dateTimePromise = null;\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    const dateObject = _display_utils.PDFDateString.toDateObject(modificationDate);\n    if (dateObject) {\n      this.#dateTimePromise = parent.l10n.get(\"annotation_date_string\", {\n        date: dateObject.toLocaleDateString(),\n        time: dateObject.toLocaleTimeString()\n      });\n    }\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = _util.Util.makeHexColor(...this.#color);\n      if (CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = _util.Util.makeHexColor(...this.#color.map(c => Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)));\n      }\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateTimePromise) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      this.#dateTimePromise.then(localized => {\n        modificationDate.textContent = localized;\n      });\n      header.append(modificationDate);\n    }\n    const contentsObj = this.#contentsObj;\n    const richText = this.#richText;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      _xfa_layer.XfaLayer.render({\n        xfaHtml: richText.html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(contentsObj);\n      popup.append(contents);\n    }\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || _util.Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = _util.Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    const {\n      style\n    } = this.#container;\n    style.left = `${100 * (popupLeft - pageX) / pageWidth}%`;\n    style.top = `${100 * (popupTop - pageY) / pageHeight}%`;\n    this.#container.append(popup);\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = _util.AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nexports.FreeTextAnnotationElement = FreeTextAnnotationElement;\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = _util.AnnotationEditorType.INK;\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    for (const inkList of data.inkLists) {\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", points);\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n      svg.append(polyline);\n    }\n    this.container.append(svg);\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nexports.InkAnnotationElement = InkAnnotationElement;\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nexports.StampAnnotationElement = StampAnnotationElement;\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      filename,\n      content\n    } = this.data.file;\n    this.filename = (0, _display_utils.getFilenameFromUrl)(filename, true);\n    this.content = content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      filename,\n      content\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = _util.FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.container, this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    l10n,\n    page,\n    viewport\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.l10n = l10n;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this.l10n ||= _displayL10n_utils.NullL10n;\n  }\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${_util.AnnotationPrefix}${id}`;\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    (0, _display_utils.setLayerDimensions)(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new _display_utils.DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new _annotation_storage.AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === _util.AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      this.#appendElement(rendered, data.id);\n    }\n    this.#setAnnotationCanvasMap();\n    await this.l10n.translate(layer);\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    (0, _display_utils.setLayerDimensions)(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else {\n        firstChild.before(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n}\nexports.AnnotationLayer = AnnotationLayer;\n\n/***/ }),\n/* 30 */\n/***/ ((__unused_webpack_module, exports) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.ColorConverters = void 0;\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\nexports.ColorConverters = ColorConverters;\n\n/***/ }),\n/* 31 */\n/***/ ((__unused_webpack_module, exports) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.NullL10n = void 0;\nexports.getL10nFallback = getL10nFallback;\nconst DEFAULT_L10N_STRINGS = {\n  of_pages: \"of {{pagesCount}}\",\n  page_of_pages: \"({{pageNumber}} of {{pagesCount}})\",\n  document_properties_kb: \"{{size_kb}} KB ({{size_b}} bytes)\",\n  document_properties_mb: \"{{size_mb}} MB ({{size_b}} bytes)\",\n  document_properties_date_string: \"{{date}}, {{time}}\",\n  document_properties_page_size_unit_inches: \"in\",\n  document_properties_page_size_unit_millimeters: \"mm\",\n  document_properties_page_size_orientation_portrait: \"portrait\",\n  document_properties_page_size_orientation_landscape: \"landscape\",\n  document_properties_page_size_name_a3: \"A3\",\n  document_properties_page_size_name_a4: \"A4\",\n  document_properties_page_size_name_letter: \"Letter\",\n  document_properties_page_size_name_legal: \"Legal\",\n  document_properties_page_size_dimension_string: \"{{width}}  {{height}} {{unit}} ({{orientation}})\",\n  document_properties_page_size_dimension_name_string: \"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})\",\n  document_properties_linearized_yes: \"Yes\",\n  document_properties_linearized_no: \"No\",\n  additional_layers: \"Additional Layers\",\n  page_landmark: \"Page {{page}}\",\n  thumb_page_title: \"Page {{page}}\",\n  thumb_page_canvas: \"Thumbnail of Page {{page}}\",\n  find_reached_top: \"Reached top of document, continued from bottom\",\n  find_reached_bottom: \"Reached end of document, continued from top\",\n  \"find_match_count[one]\": \"{{current}} of {{total}} match\",\n  \"find_match_count[other]\": \"{{current}} of {{total}} matches\",\n  \"find_match_count_limit[one]\": \"More than {{limit}} match\",\n  \"find_match_count_limit[other]\": \"More than {{limit}} matches\",\n  find_not_found: \"Phrase not found\",\n  page_scale_width: \"Page Width\",\n  page_scale_fit: \"Page Fit\",\n  page_scale_auto: \"Automatic Zoom\",\n  page_scale_actual: \"Actual Size\",\n  page_scale_percent: \"{{scale}}%\",\n  loading_error: \"An error occurred while loading the PDF.\",\n  invalid_file_error: \"Invalid or corrupted PDF file.\",\n  missing_file_error: \"Missing PDF file.\",\n  unexpected_response_error: \"Unexpected server response.\",\n  rendering_error: \"An error occurred while rendering the page.\",\n  annotation_date_string: \"{{date}}, {{time}}\",\n  printing_not_supported: \"Warning: Printing is not fully supported by this browser.\",\n  printing_not_ready: \"Warning: The PDF is not fully loaded for printing.\",\n  web_fonts_disabled: \"Web fonts are disabled: unable to use embedded PDF fonts.\",\n  free_text2_default_content: \"Start typing\",\n  editor_free_text2_aria_label: \"Text Editor\",\n  editor_ink2_aria_label: \"Draw Editor\",\n  editor_ink_canvas_aria_label: \"User-created image\",\n  editor_alt_text_button_label: \"Alt text\",\n  editor_alt_text_edit_button_label: \"Edit alt text\",\n  editor_alt_text_decorative_tooltip: \"Marked as decorative\"\n};\n{\n  DEFAULT_L10N_STRINGS.print_progress_percent = \"{{progress}}%\";\n}\nfunction getL10nFallback(key, args) {\n  switch (key) {\n    case \"find_match_count\":\n      key = `find_match_count[${args.total === 1 ? \"one\" : \"other\"}]`;\n      break;\n    case \"find_match_count_limit\":\n      key = `find_match_count_limit[${args.limit === 1 ? \"one\" : \"other\"}]`;\n      break;\n  }\n  return DEFAULT_L10N_STRINGS[key] || \"\";\n}\nfunction formatL10nValue(text, args) {\n  if (!args) {\n    return text;\n  }\n  return text.replaceAll(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, (all, name) => {\n    return name in args ? args[name] : \"{{\" + name + \"}}\";\n  });\n}\nconst NullL10n = {\n  async getLanguage() {\n    return \"en-us\";\n  },\n  async getDirection() {\n    return \"ltr\";\n  },\n  async get(key, args = null, fallback = getL10nFallback(key, args)) {\n    return formatL10nValue(fallback, args);\n  },\n  async translate(element) {}\n};\nexports.NullL10n = NullL10n;\n\n/***/ }),\n/* 32 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.XfaLayer = void 0;\nvar _xfa_text = __w_pdfjs_require__(25);\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const stack = [[root, -1, rootHtml]];\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (intent !== \"richText\") {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children && child.children.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (_xfa_text.XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\nexports.XfaLayer = XfaLayer;\n\n/***/ }),\n/* 33 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.InkEditor = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _editor = __w_pdfjs_require__(4);\nvar _annotation_layer = __w_pdfjs_require__(29);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _tools = __w_pdfjs_require__(5);\nclass InkEditor extends _editor.AnnotationEditor {\n  #baseHeight = 0;\n  #baseWidth = 0;\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n  #currentPath2D = new Path2D();\n  #disableEditing = false;\n  #hasSomethingToDraw = false;\n  #isCanvasInitialized = false;\n  #observer = null;\n  #realWidth = 0;\n  #realHeight = 0;\n  #requestFrameCallback = null;\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 1;\n  static _type = \"ink\";\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n  static initialize(l10n) {\n    _editor.AnnotationEditor.initialize(l10n, {\n      strings: [\"editor_ink_canvas_aria_label\", \"editor_ink2_aria_label\"]\n    });\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case _util.AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case _util.AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case _util.AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case _util.AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case _util.AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case _util.AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[_util.AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness], [_util.AnnotationEditorParamsType.INK_COLOR, InkEditor._defaultColor || _editor.AnnotationEditor._defaultLineColor], [_util.AnnotationEditorParamsType.INK_OPACITY, Math.round(InkEditor._defaultOpacity * 100)]];\n  }\n  get propertiesToUpdate() {\n    return [[_util.AnnotationEditorParamsType.INK_THICKNESS, this.thickness || InkEditor._defaultThickness], [_util.AnnotationEditorParamsType.INK_COLOR, this.color || InkEditor._defaultColor || _editor.AnnotationEditor._defaultLineColor], [_util.AnnotationEditorParamsType.INK_OPACITY, Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity))]];\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: () => {\n        this.thickness = thickness;\n        this.#fitToContent();\n      },\n      undo: () => {\n        this.thickness = savedThickness;\n        this.#fitToContent();\n      },\n      mustExec: true,\n      type: _util.AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: () => {\n        this.color = color;\n        this.#redraw();\n      },\n      undo: () => {\n        this.color = savedColor;\n        this.#redraw();\n      },\n      mustExec: true,\n      type: _util.AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateOpacity(opacity) {\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: () => {\n        this.opacity = opacity;\n        this.#redraw();\n      },\n      undo: () => {\n        this.opacity = savedOpacity;\n        this.#redraw();\n      },\n      mustExec: true,\n      type: _util.AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n    this.#observer.disconnect();\n    this.#observer = null;\n    super.remove();\n  }\n  setParent(parent) {\n    if (!this.parent && parent) {\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n    this.canvas.removeEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n  isEmpty() {\n    return this.paths.length === 0 || this.paths.length === 1 && this.paths[0].length === 0;\n  }\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height]\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n  #setStroke() {\n    const {\n      ctx,\n      color,\n      opacity,\n      thickness,\n      parentScale,\n      scaleFactor\n    } = this;\n    ctx.lineWidth = thickness * parentScale / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${(0, _tools.opacityToHex)(opacity)}`;\n  }\n  #startDrawing(x, y) {\n    this.canvas.addEventListener(\"contextmenu\", _display_utils.noContextMenu);\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.removeEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||= InkEditor._defaultColor || _editor.AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n    this.#makeBezierCurve(path2D, ...currentPath.at(-3), ...currentPath.at(-2), x, y);\n  }\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n    this.#draw(x, y);\n    this.#endPath();\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this.rebuild();\n    };\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n    const {\n      ctx\n    } = this;\n    ctx.save();\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n    ctx.restore();\n  }\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n    path2D.bezierCurveTo(prevX + 2 * (x1 - prevX) / 3, prevY + 2 * (y1 - prevY) / 3, x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3, x3, y3);\n  }\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n      const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n      const control2 = [x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3];\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n      [x0, y0] = [x3, y3];\n    }\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n    const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n    const control2 = [x2 + 2 * (x1 - x2) / 3, y2 + 2 * (y1 - y2) / 3];\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n    const {\n      canvas,\n      ctx\n    } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n    super.commit();\n    this.isEditing = false;\n    this.disableEditMode();\n    this.setInForeground();\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n    this.#fitToContent(true);\n    this.makeResizable();\n    this.parent.addInkEditorIfNeeded(true);\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true\n    });\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n    this.setInForeground();\n    event.preventDefault();\n    if (event.type !== \"mouse\") {\n      this.div.focus();\n    }\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.removeEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n    setTimeout(() => {\n      this.canvas.removeEventListener(\"contextmenu\", _display_utils.noContextMenu);\n    }, 10);\n    this.#stopDrawing(event.offsetX, event.offsetY);\n    this.addToAnnotationStorage();\n    this.setInBackground();\n  }\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n    _editor.AnnotationEditor._l10nPromise.get(\"editor_ink_canvas_aria_label\").then(msg => this.canvas?.setAttribute(\"aria-label\", msg));\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    _editor.AnnotationEditor._l10nPromise.get(\"editor_ink2_aria_label\").then(msg => this.div?.setAttribute(\"aria-label\", msg));\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n    this.#createCanvas();\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n    this.#createObserver();\n    return this.div;\n  }\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (this.#realWidth === roundedWidth && this.#realHeight === roundedHeight) {\n      return;\n    }\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n    this.canvas.style.visibility = \"hidden\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n    this.#setCanvasDims();\n    this.#redraw();\n    this.canvas.style.visibility = \"visible\";\n    this.fixDims();\n  }\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(this.scaleFactor, 0, 0, this.scaleFactor, this.translationX * this.scaleFactor + padding, this.translationY * this.scaleFactor + padding);\n  }\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(control1[0], control1[1], control2[0], control2[1], second[0], second[1]);\n    }\n    return path2D;\n  }\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation)\n      });\n    }\n    return paths;\n  }\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = _util.Util.bezierBoundingBox(...first, ...control1, ...control2, ...second);\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n    return [xMin, yMin, xMax, yMax];\n  }\n  #getPadding() {\n    return this.#disableEditing ? Math.ceil(this.thickness * this.parentScale) : 0;\n  }\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(_editor.AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(_editor.AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setAspectRatio(width, height);\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n    this.#realWidth = width;\n    this.#realHeight = height;\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(prevTranslationX - this.translationX - unscaledPadding, prevTranslationY - this.translationY - unscaledPadding);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof _annotation_layer.InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.thickness = data.thickness;\n    editor.color = _util.Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n    const {\n      paths,\n      rect,\n      rotation\n    } = data;\n    for (let {\n      bezier\n    } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([[p0, p1], [p10, p11], [p20, p21], [p30, p31]]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(_editor.AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(_editor.AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n    return editor;\n  }\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = _editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n    return {\n      annotationType: _util.AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(this.scaleFactor / this.parentScale, this.translationX, this.translationY, rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n  }\n}\nexports.InkEditor = InkEditor;\n\n/***/ }),\n/* 34 */\n/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {\n\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.StampEditor = void 0;\nvar _util = __w_pdfjs_require__(1);\nvar _editor = __w_pdfjs_require__(4);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _annotation_layer = __w_pdfjs_require__(29);\nclass StampEditor extends _editor.AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #canvas = null;\n  #observer = null;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n  static initialize(l10n) {\n    _editor.AnnotationEditor.initialize(l10n);\n  }\n  static get supportedTypes() {\n    const types = [\"apng\", \"avif\", \"bmp\", \"gif\", \"jpeg\", \"png\", \"svg+xml\", \"webp\", \"x-icon\"];\n    return (0, _util.shadow)(this, \"supportedTypes\", types.map(type => `image/${type}`));\n  }\n  static get supportedTypesStr() {\n    return (0, _util.shadow)(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n  }\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor(_util.AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    }\n    return this.div;\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        subtype: this.editorType,\n        data: {\n          action: \"inserted_image\"\n        }\n      }\n    });\n    this.addAltTextButton();\n  }\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === width && canvas.height === height) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(width, height);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * _display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * _display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof _annotation_layer.StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const serialized = {\n      annotationType: _util.AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n}\nexports.StampEditor = StampEditor;\n\n/***/ })\n/******/ \t]);\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __w_pdfjs_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n(() => {\nvar exports = __webpack_exports__;\n\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nObject.defineProperty(exports, \"AbortException\", ({\n  enumerable: true,\n  get: function () {\n    return _util.AbortException;\n  }\n}));\nObject.defineProperty(exports, \"AnnotationEditorLayer\", ({\n  enumerable: true,\n  get: function () {\n    return _annotation_editor_layer.AnnotationEditorLayer;\n  }\n}));\nObject.defineProperty(exports, \"AnnotationEditorParamsType\", ({\n  enumerable: true,\n  get: function () {\n    return _util.AnnotationEditorParamsType;\n  }\n}));\nObject.defineProperty(exports, \"AnnotationEditorType\", ({\n  enumerable: true,\n  get: function () {\n    return _util.AnnotationEditorType;\n  }\n}));\nObject.defineProperty(exports, \"AnnotationEditorUIManager\", ({\n  enumerable: true,\n  get: function () {\n    return _tools.AnnotationEditorUIManager;\n  }\n}));\nObject.defineProperty(exports, \"AnnotationLayer\", ({\n  enumerable: true,\n  get: function () {\n    return _annotation_layer.AnnotationLayer;\n  }\n}));\nObject.defineProperty(exports, \"AnnotationMode\", ({\n  enumerable: true,\n  get: function () {\n    return _util.AnnotationMode;\n  }\n}));\nObject.defineProperty(exports, \"CMapCompressionType\", ({\n  enumerable: true,\n  get: function () {\n    return _util.CMapCompressionType;\n  }\n}));\nObject.defineProperty(exports, \"DOMSVGFactory\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.DOMSVGFactory;\n  }\n}));\nObject.defineProperty(exports, \"FeatureTest\", ({\n  enumerable: true,\n  get: function () {\n    return _util.FeatureTest;\n  }\n}));\nObject.defineProperty(exports, \"GlobalWorkerOptions\", ({\n  enumerable: true,\n  get: function () {\n    return _worker_options.GlobalWorkerOptions;\n  }\n}));\nObject.defineProperty(exports, \"ImageKind\", ({\n  enumerable: true,\n  get: function () {\n    return _util.ImageKind;\n  }\n}));\nObject.defineProperty(exports, \"InvalidPDFException\", ({\n  enumerable: true,\n  get: function () {\n    return _util.InvalidPDFException;\n  }\n}));\nObject.defineProperty(exports, \"MissingPDFException\", ({\n  enumerable: true,\n  get: function () {\n    return _util.MissingPDFException;\n  }\n}));\nObject.defineProperty(exports, \"OPS\", ({\n  enumerable: true,\n  get: function () {\n    return _util.OPS;\n  }\n}));\nObject.defineProperty(exports, \"PDFDataRangeTransport\", ({\n  enumerable: true,\n  get: function () {\n    return _api.PDFDataRangeTransport;\n  }\n}));\nObject.defineProperty(exports, \"PDFDateString\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.PDFDateString;\n  }\n}));\nObject.defineProperty(exports, \"PDFWorker\", ({\n  enumerable: true,\n  get: function () {\n    return _api.PDFWorker;\n  }\n}));\nObject.defineProperty(exports, \"PasswordResponses\", ({\n  enumerable: true,\n  get: function () {\n    return _util.PasswordResponses;\n  }\n}));\nObject.defineProperty(exports, \"PermissionFlag\", ({\n  enumerable: true,\n  get: function () {\n    return _util.PermissionFlag;\n  }\n}));\nObject.defineProperty(exports, \"PixelsPerInch\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.PixelsPerInch;\n  }\n}));\nObject.defineProperty(exports, \"PromiseCapability\", ({\n  enumerable: true,\n  get: function () {\n    return _util.PromiseCapability;\n  }\n}));\nObject.defineProperty(exports, \"RenderingCancelledException\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.RenderingCancelledException;\n  }\n}));\nObject.defineProperty(exports, \"SVGGraphics\", ({\n  enumerable: true,\n  get: function () {\n    return _api.SVGGraphics;\n  }\n}));\nObject.defineProperty(exports, \"UnexpectedResponseException\", ({\n  enumerable: true,\n  get: function () {\n    return _util.UnexpectedResponseException;\n  }\n}));\nObject.defineProperty(exports, \"Util\", ({\n  enumerable: true,\n  get: function () {\n    return _util.Util;\n  }\n}));\nObject.defineProperty(exports, \"VerbosityLevel\", ({\n  enumerable: true,\n  get: function () {\n    return _util.VerbosityLevel;\n  }\n}));\nObject.defineProperty(exports, \"XfaLayer\", ({\n  enumerable: true,\n  get: function () {\n    return _xfa_layer.XfaLayer;\n  }\n}));\nObject.defineProperty(exports, \"build\", ({\n  enumerable: true,\n  get: function () {\n    return _api.build;\n  }\n}));\nObject.defineProperty(exports, \"createValidAbsoluteUrl\", ({\n  enumerable: true,\n  get: function () {\n    return _util.createValidAbsoluteUrl;\n  }\n}));\nObject.defineProperty(exports, \"getDocument\", ({\n  enumerable: true,\n  get: function () {\n    return _api.getDocument;\n  }\n}));\nObject.defineProperty(exports, \"getFilenameFromUrl\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.getFilenameFromUrl;\n  }\n}));\nObject.defineProperty(exports, \"getPdfFilenameFromUrl\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.getPdfFilenameFromUrl;\n  }\n}));\nObject.defineProperty(exports, \"getXfaPageViewport\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.getXfaPageViewport;\n  }\n}));\nObject.defineProperty(exports, \"isDataScheme\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.isDataScheme;\n  }\n}));\nObject.defineProperty(exports, \"isPdfFile\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.isPdfFile;\n  }\n}));\nObject.defineProperty(exports, \"loadScript\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.loadScript;\n  }\n}));\nObject.defineProperty(exports, \"noContextMenu\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.noContextMenu;\n  }\n}));\nObject.defineProperty(exports, \"normalizeUnicode\", ({\n  enumerable: true,\n  get: function () {\n    return _util.normalizeUnicode;\n  }\n}));\nObject.defineProperty(exports, \"renderTextLayer\", ({\n  enumerable: true,\n  get: function () {\n    return _text_layer.renderTextLayer;\n  }\n}));\nObject.defineProperty(exports, \"setLayerDimensions\", ({\n  enumerable: true,\n  get: function () {\n    return _display_utils.setLayerDimensions;\n  }\n}));\nObject.defineProperty(exports, \"shadow\", ({\n  enumerable: true,\n  get: function () {\n    return _util.shadow;\n  }\n}));\nObject.defineProperty(exports, \"updateTextLayer\", ({\n  enumerable: true,\n  get: function () {\n    return _text_layer.updateTextLayer;\n  }\n}));\nObject.defineProperty(exports, \"version\", ({\n  enumerable: true,\n  get: function () {\n    return _api.version;\n  }\n}));\nvar _util = __w_pdfjs_require__(1);\nvar _api = __w_pdfjs_require__(2);\nvar _display_utils = __w_pdfjs_require__(6);\nvar _text_layer = __w_pdfjs_require__(26);\nvar _annotation_editor_layer = __w_pdfjs_require__(27);\nvar _tools = __w_pdfjs_require__(5);\nvar _annotation_layer = __w_pdfjs_require__(29);\nvar _worker_options = __w_pdfjs_require__(14);\nvar _xfa_layer = __w_pdfjs_require__(32);\nconst pdfjsVersion = '3.11.174';\nconst pdfjsBuild = 'ce8716743';\n})();\n\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=pdf.js.map","/**\r\n * Servio de Parsing de PDFs - MPFM Monitor\r\n * Extrai dados de relatrios B03 (Topside), B05 (Subsea), Separator e PVT Calibration\r\n */\r\n\r\nimport * as pdfjsLib from 'pdfjs-dist'\r\nimport type { TextItem } from 'pdfjs-dist/types/src/display/api'\r\n\r\n// Configurar worker do PDF.js\r\npdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\r\n\r\nexport type PDFType = 'B03_TOPSIDE' | 'B05_SUBSEA' | 'PVT_CALIBRATION' | 'SEPARATOR' | 'FISICO_QUIMICO' | 'UNKNOWN'\r\n\r\nexport interface ParsedDailyData {\r\n  date: string\r\n  source: 'TOPSIDE' | 'SUBSEA' | 'SEPARATOR'\r\n  meterTag: string\r\n  oil: number\r\n  gas: number\r\n  water: number\r\n  hc: number\r\n  total: number\r\n  fileName: string\r\n}\r\n\r\nexport interface ParsedPhysicoChemicalData {\r\n  date: string\r\n  sampleId: string\r\n  density: number\r\n  api: number\r\n  bsw: number\r\n  viscosity?: number\r\n  pourPoint?: number\r\n  sulphur?: number\r\n  saltContent?: number\r\n  reidVaporPressure?: number\r\n  h2s?: number\r\n  co2?: number\r\n  waterContent?: number\r\n  fileName: string\r\n}\r\n\r\nexport interface ParsedCalibrationData {\r\n  calibrationNo: number\r\n  meterTag: string\r\n  meterName: string\r\n  startDate: string\r\n  endDate: string\r\n  pressure: { mpfm: number; separator: number }\r\n  temperature: { mpfm: number; separator: number }\r\n  composition: Array<{ component: string; molPercent: number; molecularWeight: number }>\r\n  kFactors: {\r\n    oil: { used: number; new: number }\r\n    gas: { used: number; new: number }\r\n    water: { used: number; new: number }\r\n  }\r\n  accumulatedMass: {\r\n    mpfm: { oil: number; gas: number; water: number; hc: number }\r\n    separator: { oil: number; gas: number; water: number; hc: number }\r\n  }\r\n  fileName: string\r\n}\r\n\r\nexport interface ParseResult {\r\n  success: boolean\r\n  type: PDFType\r\n  dailyData?: ParsedDailyData\r\n  calibrationData?: ParsedCalibrationData\r\n  physicoChemicalData?: ParsedPhysicoChemicalData\r\n  error?: string\r\n  fileName: string\r\n}\r\n\r\n/**\r\n * Detecta o tipo de PDF baseado no contedo\r\n */\r\nfunction detectPDFType(text: string, fileName: string): PDFType {\r\n  const upperText = text.toUpperCase()\r\n  const upperFileName = fileName.toUpperCase()\r\n  \r\n  // Anlise fsico-qumica (prioridade - verificar antes)\r\n  if (upperFileName.includes('FQ') || upperFileName.includes('FISICO') || \r\n      upperText.includes('ANLISE FSICO-QUMICA') || upperText.includes('CRUDE OIL ANALYSIS') ||\r\n      upperText.includes('DENSITY') && upperText.includes('BSW') && upperText.includes('API')) {\r\n    return 'FISICO_QUIMICO'\r\n  }\r\n  \r\n  // Separador de Testes\r\n  if (upperFileName.includes('SEPARATOR') || upperFileName.includes('TS_') || \r\n      upperFileName.includes('TEST_SEP') || upperFileName.includes('SEP_') ||\r\n      upperText.includes('TEST SEPARATOR') || upperText.includes('SEPARADOR DE TESTE') ||\r\n      (upperText.includes('SEPARATOR') && (upperText.includes('DAILY') || upperText.includes('MASS')))) {\r\n    return 'SEPARATOR'\r\n  }\r\n  \r\n  if (upperFileName.includes('B03') || upperText.includes('TOPSIDE') || upperText.includes('RISER P5') || upperText.includes('RISER P6')) {\r\n    return 'B03_TOPSIDE'\r\n  }\r\n  if (upperFileName.includes('B05') || upperText.includes('SUBSEA') || upperText.includes('PE_4') || upperText.includes('PE_EO')) {\r\n    return 'B05_SUBSEA'\r\n  }\r\n  if (upperFileName.includes('PVT') || upperFileName.includes('CALIBRATION') || upperText.includes('K-FACTORS') || upperText.includes('MOLAR COMPOSITION')) {\r\n    return 'PVT_CALIBRATION'\r\n  }\r\n  return 'UNKNOWN'\r\n}\r\n\r\n/**\r\n * Extrai data do nome do arquivo ou contedo\r\n */\r\nfunction extractDate(text: string, fileName: string): string {\r\n  // Tenta extrair do nome do arquivo (formato: B03_MPFM_Daily-20260102.pdf)\r\n  const fileMatch = fileName.match(/(\\d{8})/);\r\n  if (fileMatch) {\r\n    const dateStr = fileMatch[1]\r\n    return `${dateStr.slice(0, 4)}-${dateStr.slice(4, 6)}-${dateStr.slice(6, 8)}`\r\n  }\r\n  \r\n  // Tenta extrair do contedo\r\n  const contentMatch = text.match(/(\\d{4})[/-](\\d{2})[/-](\\d{2})/)\r\n  if (contentMatch) {\r\n    return `${contentMatch[1]}-${contentMatch[2]}-${contentMatch[3]}`\r\n  }\r\n  \r\n  // Data padro (hoje)\r\n  return new Date().toISOString().split('T')[0]\r\n}\r\n\r\n/**\r\n * Extrai nmero de uma string\r\n */\r\nfunction extractNumber(text: string, pattern: RegExp): number {\r\n  const match = text.match(pattern)\r\n  if (match) {\r\n    const numStr = match[1].replace(',', '.')\r\n    return parseFloat(numStr) || 0\r\n  }\r\n  return 0\r\n}\r\n\r\n/**\r\n * Parse de PDF B03 (Topside MPFM Daily)\r\n */\r\nfunction parseB03Topside(text: string, fileName: string): ParsedDailyData {\r\n  const date = extractDate(text, fileName)\r\n  \r\n  // Identificar medidor\r\n  let meterTag = '13FT0367' // Default Riser P5\r\n  if (text.includes('P6') || text.includes('13FT0417')) {\r\n    meterTag = '13FT0417'\r\n  }\r\n  \r\n  // Extrair massas - padres tpicos dos relatrios B03\r\n  // Procura por padres como \"Oil: 4438.862\" ou \"Mass Oil (t): 4438.862\"\r\n  let oil = extractNumber(text, /(?:oil|leo)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  let gas = extractNumber(text, /(?:gas|gs)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  let water = extractNumber(text, /(?:water|gua)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Tenta padro alternativo com tabela\r\n  if (oil === 0) {\r\n    // Procura valores em formato de tabela\r\n    const oilMatch = text.match(/Oil\\s+(\\d+\\.?\\d*)/i)\r\n    if (oilMatch) oil = parseFloat(oilMatch[1]) || 0\r\n  }\r\n  if (gas === 0) {\r\n    const gasMatch = text.match(/Gas\\s+(\\d+\\.?\\d*)/i)\r\n    if (gasMatch) gas = parseFloat(gasMatch[1]) || 0\r\n  }\r\n  if (water === 0) {\r\n    const waterMatch = text.match(/Water\\s+(\\d+\\.?\\d*)/i)\r\n    if (waterMatch) water = parseFloat(waterMatch[1]) || 0\r\n  }\r\n  \r\n  // Procura por valores em formato de massa acumulada\r\n  const massPattern = /(\\d{3,5}\\.?\\d*)\\s*(?:t|ton)/gi\r\n  const masses: number[] = []\r\n  let match\r\n  while ((match = massPattern.exec(text)) !== null) {\r\n    masses.push(parseFloat(match[1]))\r\n  }\r\n  \r\n  // Se encontrou massas e no extraiu valores especficos, usa os primeiros encontrados\r\n  if (masses.length >= 3 && oil === 0) {\r\n    oil = masses[0]\r\n    gas = masses[1]\r\n    water = masses[2] || 0\r\n  }\r\n  \r\n  const hc = oil + gas\r\n  const total = hc + water\r\n  \r\n  return {\r\n    date,\r\n    source: 'TOPSIDE',\r\n    meterTag,\r\n    oil,\r\n    gas,\r\n    water,\r\n    hc,\r\n    total,\r\n    fileName,\r\n  }\r\n}\r\n\r\n/**\r\n * Parse de PDF B05 (Subsea MPFM Daily)\r\n */\r\nfunction parseB05Subsea(text: string, fileName: string): ParsedDailyData {\r\n  const date = extractDate(text, fileName)\r\n  \r\n  // Identificar medidor\r\n  let meterTag = '18FT1506' // Default PE_4\r\n  if (text.includes('PE_EO4') || text.includes('18FT1806')) {\r\n    meterTag = '18FT1806'\r\n  } else if (text.includes('PE_EO105') || text.includes('18FT1706')) {\r\n    meterTag = '18FT1706'\r\n  } else if (text.includes('PE_EO10') || text.includes('18FT1406')) {\r\n    meterTag = '18FT1406'\r\n  }\r\n  \r\n  // Extrair massas\r\n  let oil = extractNumber(text, /(?:oil|leo)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  let gas = extractNumber(text, /(?:gas|gs)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  let water = extractNumber(text, /(?:water|gua)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Subsea geralmente no separa gs\r\n  if (gas === 0) {\r\n    // Procura por HC total\r\n    const hcMatch = text.match(/(?:hc|hydrocarbon)[\\s:]+(\\d+\\.?\\d*)/i)\r\n    if (hcMatch) {\r\n      oil = parseFloat(hcMatch[1]) || 0\r\n    }\r\n  }\r\n  \r\n  // Procura por valores em formato de massa\r\n  const massPattern = /(\\d{3,5}\\.?\\d*)\\s*(?:t|ton)/gi\r\n  const masses: number[] = []\r\n  let match\r\n  while ((match = massPattern.exec(text)) !== null) {\r\n    masses.push(parseFloat(match[1]))\r\n  }\r\n  \r\n  if (masses.length >= 2 && oil === 0) {\r\n    oil = masses[0]\r\n    water = masses[1] || 0\r\n  }\r\n  \r\n  const hc = oil + gas\r\n  const total = hc + water\r\n  \r\n  return {\r\n    date,\r\n    source: 'SUBSEA',\r\n    meterTag,\r\n    oil,\r\n    gas,\r\n    water,\r\n    hc,\r\n    total,\r\n    fileName,\r\n  }\r\n}\r\n\r\n/**\r\n * Parse de PDF Separator (Test Separator Daily)\r\n */\r\nfunction parseSeparator(text: string, fileName: string): ParsedDailyData {\r\n  const date = extractDate(text, fileName)\r\n  \r\n  // Identificar separador\r\n  const meterTag = 'TEST_SEPARATOR'\r\n  \r\n  // Extrair massas - padres tpicos dos relatrios de separador\r\n  let oil = extractNumber(text, /(?:oil|leo)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  let gas = extractNumber(text, /(?:gas|gs)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  let water = extractNumber(text, /(?:water|gua)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Tenta padro alternativo com tabela\r\n  if (oil === 0) {\r\n    const oilMatch = text.match(/(?:Mass|Massa).*?Oil\\s+(\\d+\\.?\\d*)/i) ||\r\n                     text.match(/Oil.*?(?:Mass|Massa)\\s+(\\d+\\.?\\d*)/i)\r\n    if (oilMatch) oil = parseFloat(oilMatch[1]) || 0\r\n  }\r\n  if (gas === 0) {\r\n    const gasMatch = text.match(/(?:Mass|Massa).*?Gas\\s+(\\d+\\.?\\d*)/i) ||\r\n                     text.match(/Gas.*?(?:Mass|Massa)\\s+(\\d+\\.?\\d*)/i)\r\n    if (gasMatch) gas = parseFloat(gasMatch[1]) || 0\r\n  }\r\n  if (water === 0) {\r\n    const waterMatch = text.match(/(?:Mass|Massa).*?Water\\s+(\\d+\\.?\\d*)/i) ||\r\n                       text.match(/Water.*?(?:Mass|Massa)\\s+(\\d+\\.?\\d*)/i)\r\n    if (waterMatch) water = parseFloat(waterMatch[1]) || 0\r\n  }\r\n  \r\n  // Procura por valores em formato de massa\r\n  const massPattern = /(\\d{3,5}\\.?\\d*)\\s*(?:t|ton|kg)/gi\r\n  const masses: number[] = []\r\n  let match\r\n  while ((match = massPattern.exec(text)) !== null) {\r\n    masses.push(parseFloat(match[1]))\r\n  }\r\n  \r\n  if (masses.length >= 3 && oil === 0) {\r\n    oil = masses[0]\r\n    gas = masses[1]\r\n    water = masses[2] || 0\r\n  }\r\n  \r\n  const hc = oil + gas\r\n  const total = hc + water\r\n  \r\n  return {\r\n    date,\r\n    source: 'SEPARATOR',\r\n    meterTag,\r\n    oil,\r\n    gas,\r\n    water,\r\n    hc,\r\n    total,\r\n    fileName,\r\n  }\r\n}\r\n\r\n/**\r\n * Parse de PDF de Anlise Fsico-Qumica\r\n */\r\nfunction parsePhysicoChemical(text: string, fileName: string): ParsedPhysicoChemicalData {\r\n  const date = extractDate(text, fileName)\r\n  \r\n  // Extrair ID da amostra\r\n  const sampleMatch = text.match(/(?:sample|amostra)[\\s:]+([A-Z0-9\\-]+)/i) ||\r\n                      text.match(/(?:ID|cdigo)[\\s:]+([A-Z0-9\\-]+)/i)\r\n  const sampleId = sampleMatch ? sampleMatch[1] : fileName.replace('.pdf', '')\r\n  \r\n  // Densidade (kg/m a 15C ou 20C)\r\n  const density = extractNumber(text, /(?:density|densidade)[\\s@:]+(?:\\d+[C]\\s*)?(\\d+\\.?\\d*)/i) ||\r\n                  extractNumber(text, /(\\d{3,4}\\.?\\d*)\\s*kg\\/m/i)\r\n  \r\n  // API gravity\r\n  const api = extractNumber(text, /API[\\s:]+(\\d+\\.?\\d*)/i) ||\r\n              extractNumber(text, /(?:grau|)\\s*API[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // BSW (Basic Sediment and Water %)\r\n  const bsw = extractNumber(text, /BS[\\s]*[&W]*[\\s:]+(\\d+\\.?\\d*)/i) ||\r\n              extractNumber(text, /BSW[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Viscosidade (cSt ou mPa.s)\r\n  const viscosity = extractNumber(text, /(?:viscosity|viscosidade)[\\s@:]+(?:\\d+[C]\\s*)?(\\d+\\.?\\d*)/i)\r\n  \r\n  // Pour Point (C)\r\n  const pourPoint = extractNumber(text, /(?:pour point|ponto de fluidez)[\\s:]+(-?\\d+\\.?\\d*)/i)\r\n  \r\n  // Teor de Enxofre (% massa)\r\n  const sulphur = extractNumber(text, /(?:sulphur|sulfur|enxofre)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Teor de Sal (mg/L ou ppm)\r\n  const saltContent = extractNumber(text, /(?:salt|sal)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Reid Vapor Pressure (kPa)\r\n  const reidVaporPressure = extractNumber(text, /(?:RVP|reid vapor|presso de vapor)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // H2S (ppm)\r\n  const h2s = extractNumber(text, /H2S[\\s:]+(\\d+\\.?\\d*)/i) ||\r\n              extractNumber(text, /(?:sulfeto de hidrognio)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // CO2 (mol%)\r\n  const co2 = extractNumber(text, /CO2[\\s:]+(\\d+\\.?\\d*)/i) ||\r\n              extractNumber(text, /(?:dixido de carbono)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  // Teor de gua (%)\r\n  const waterContent = extractNumber(text, /(?:water content|teor de gua)[\\s:]+(\\d+\\.?\\d*)/i)\r\n  \r\n  return {\r\n    date,\r\n    sampleId,\r\n    density,\r\n    api,\r\n    bsw,\r\n    viscosity,\r\n    pourPoint,\r\n    sulphur,\r\n    saltContent,\r\n    reidVaporPressure,\r\n    h2s,\r\n    co2,\r\n    waterContent,\r\n    fileName,\r\n  }\r\n}\r\n\r\n/**\r\n * Parse de PDF PVT Calibration\r\n */\r\nfunction parsePVTCalibration(text: string, fileName: string): ParsedCalibrationData {\r\n  // Extrair nmero da calibrao\r\n  const calNoMatch = text.match(/(?:calibration|cal\\.?)\\s*(?:#|no\\.?|number)?\\s*(\\d+)/i)\r\n  const calibrationNo = calNoMatch ? parseInt(calNoMatch[1]) : 0\r\n  \r\n  // Extrair tag do medidor\r\n  let meterTag = '13FT0367'\r\n  let meterName = 'Riser P5'\r\n  if (text.includes('13FT0417')) {\r\n    meterTag = '13FT0417'\r\n    meterName = 'Riser P6'\r\n  }\r\n  \r\n  // Datas\r\n  const startDate = extractDate(text, fileName)\r\n  const endDateMatch = text.match(/end[:\\s]+(\\d{4}-\\d{2}-\\d{2})/i)\r\n  const endDate = endDateMatch ? endDateMatch[1] : startDate\r\n  \r\n  // Presso e temperatura\r\n  const pressureMpfm = extractNumber(text, /mpfm.*?pressure[:\\s]+(\\d+\\.?\\d*)/i) ||\r\n                       extractNumber(text, /pressure.*?mpfm[:\\s]+(\\d+\\.?\\d*)/i) || 11505.73\r\n  const pressureSep = extractNumber(text, /separator.*?pressure[:\\s]+(\\d+\\.?\\d*)/i) ||\r\n                      extractNumber(text, /pressure.*?separator[:\\s]+(\\d+\\.?\\d*)/i) || 8343.63\r\n  const tempMpfm = extractNumber(text, /mpfm.*?temp[:\\s]+(\\d+\\.?\\d*)/i) ||\r\n                   extractNumber(text, /temp.*?mpfm[:\\s]+(\\d+\\.?\\d*)/i) || 75.07\r\n  const tempSep = extractNumber(text, /separator.*?temp[:\\s]+(\\d+\\.?\\d*)/i) ||\r\n                  extractNumber(text, /temp.*?separator[:\\s]+(\\d+\\.?\\d*)/i) || 72.18\r\n  \r\n  // Composio padro (se no conseguir extrair)\r\n  const composition = [\r\n    { component: 'N', molPercent: 0.575, molecularWeight: 28.01 },\r\n    { component: 'CO', molPercent: 0.02, molecularWeight: 44.01 },\r\n    { component: 'C', molPercent: 62.183, molecularWeight: 16.04 },\r\n    { component: 'C', molPercent: 8.069, molecularWeight: 30.07 },\r\n    { component: 'C', molPercent: 5.047, molecularWeight: 44.1 },\r\n    { component: 'i-C', molPercent: 1.069, molecularWeight: 58.12 },\r\n    { component: 'n-C', molPercent: 1.858, molecularWeight: 58.12 },\r\n    { component: 'i-C', molPercent: 0.681, molecularWeight: 72.15 },\r\n    { component: 'n-C', molPercent: 0.788, molecularWeight: 72.15 },\r\n    { component: 'C', molPercent: 1.112, molecularWeight: 86.18 },\r\n    { component: 'C', molPercent: 1.138, molecularWeight: 97.37 },\r\n    { component: 'C', molPercent: 1.657, molecularWeight: 111.29 },\r\n    { component: 'C', molPercent: 1.472, molecularWeight: 125.25 },\r\n    { component: 'C+', molPercent: 14.331, molecularWeight: 289.64 },\r\n  ]\r\n  \r\n  // K-Factors\r\n  const kOilNew = extractNumber(text, /k[_-]?oil.*?new[:\\s]+(\\d+\\.?\\d*)/i) ||\r\n                  extractNumber(text, /new.*?k[_-]?oil[:\\s]+(\\d+\\.?\\d*)/i) || 1.0908\r\n  const kGasNew = extractNumber(text, /k[_-]?gas.*?new[:\\s]+(\\d+\\.?\\d*)/i) ||\r\n                  extractNumber(text, /new.*?k[_-]?gas[:\\s]+(\\d+\\.?\\d*)/i) || 1.09262\r\n  const kWaterNew = extractNumber(text, /k[_-]?water.*?new[:\\s]+(\\d+\\.?\\d*)/i) || 1.0\r\n  \r\n  // Massas acumuladas\r\n  const mpfmOil = extractNumber(text, /mpfm.*?oil.*?(\\d{4,}\\.?\\d*)/i) || 6365.07\r\n  const mpfmGas = extractNumber(text, /mpfm.*?gas.*?(\\d{3,}\\.?\\d*)/i) || 1476.18\r\n  const mpfmWater = extractNumber(text, /mpfm.*?water.*?(\\d+\\.?\\d*)/i) || 1.46\r\n  const sepOil = extractNumber(text, /separator.*?oil.*?(\\d{4,}\\.?\\d*)/i) || 6742.65\r\n  const sepGas = extractNumber(text, /separator.*?gas.*?(\\d{3,}\\.?\\d*)/i) || 1813.28\r\n  const sepWater = extractNumber(text, /separator.*?water.*?(\\d+\\.?\\d*)/i) || 24.93\r\n  \r\n  return {\r\n    calibrationNo,\r\n    meterTag,\r\n    meterName,\r\n    startDate,\r\n    endDate,\r\n    pressure: { mpfm: pressureMpfm, separator: pressureSep },\r\n    temperature: { mpfm: tempMpfm, separator: tempSep },\r\n    composition,\r\n    kFactors: {\r\n      oil: { used: 0.94433, new: kOilNew },\r\n      gas: { used: 0.96191, new: kGasNew },\r\n      water: { used: 1.0, new: kWaterNew },\r\n    },\r\n    accumulatedMass: {\r\n      mpfm: { oil: mpfmOil, gas: mpfmGas, water: mpfmWater, hc: mpfmOil + mpfmGas },\r\n      separator: { oil: sepOil, gas: sepGas, water: sepWater, hc: sepOil + sepGas },\r\n    },\r\n    fileName,\r\n  }\r\n}\r\n\r\n/**\r\n * Extrai texto de um PDF\r\n */\r\nexport async function extractTextFromPDF(file: File): Promise<string> {\r\n  const arrayBuffer = await file.arrayBuffer()\r\n  const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise\r\n  \r\n  let fullText = ''\r\n  \r\n  for (let i = 1; i <= pdf.numPages; i++) {\r\n    const page = await pdf.getPage(i)\r\n    const textContent = await page.getTextContent()\r\n    const pageText = textContent.items\r\n      .filter((item): item is TextItem => 'str' in item)\r\n      .map((item) => item.str)\r\n      .join(' ')\r\n    fullText += pageText + '\\n'\r\n  }\r\n  \r\n  return fullText\r\n}\r\n\r\n/**\r\n * Processa um arquivo PDF e extrai os dados\r\n */\r\nexport async function parsePDFFile(file: File): Promise<ParseResult> {\r\n  try {\r\n    const text = await extractTextFromPDF(file)\r\n    const type = detectPDFType(text, file.name)\r\n    \r\n    switch (type) {\r\n      case 'B03_TOPSIDE':\r\n        return {\r\n          success: true,\r\n          type,\r\n          dailyData: parseB03Topside(text, file.name),\r\n          fileName: file.name,\r\n        }\r\n      \r\n      case 'B05_SUBSEA':\r\n        return {\r\n          success: true,\r\n          type,\r\n          dailyData: parseB05Subsea(text, file.name),\r\n          fileName: file.name,\r\n        }\r\n      \r\n      case 'SEPARATOR':\r\n        return {\r\n          success: true,\r\n          type,\r\n          dailyData: parseSeparator(text, file.name),\r\n          fileName: file.name,\r\n        }\r\n      \r\n      case 'PVT_CALIBRATION':\r\n        return {\r\n          success: true,\r\n          type,\r\n          calibrationData: parsePVTCalibration(text, file.name),\r\n          fileName: file.name,\r\n        }\r\n      \r\n      case 'FISICO_QUIMICO':\r\n        return {\r\n          success: true,\r\n          type,\r\n          physicoChemicalData: parsePhysicoChemical(text, file.name),\r\n          fileName: file.name,\r\n        }\r\n      \r\n      default:\r\n        return {\r\n          success: false,\r\n          type: 'UNKNOWN',\r\n          error: 'Tipo de PDF no reconhecido. Use arquivos B03 (Topside), B05 (Subsea), Separator, PVT Calibration ou Anlise Fsico-Qumica.',\r\n          fileName: file.name,\r\n        }\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      type: 'UNKNOWN',\r\n      error: error instanceof Error ? error.message : 'Erro ao processar PDF',\r\n      fileName: file.name,\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Processa mltiplos arquivos PDF em lote\r\n */\r\nexport async function parsePDFBatch(files: File[]): Promise<ParseResult[]> {\r\n  const results: ParseResult[] = []\r\n  \r\n  for (const file of files) {\r\n    const result = await parsePDFFile(file)\r\n    results.push(result)\r\n  }\r\n  \r\n  return results\r\n}\r\n","import React, { useState, useRef, useCallback } from 'react'\r\nimport {\r\n  Upload,\r\n  FileText,\r\n  CheckCircle,\r\n  XCircle,\r\n  Loader2,\r\n  Trash2,\r\n  FileUp,\r\n  Database,\r\n} from 'lucide-react'\r\nimport { Modal, Button, Badge, Card } from '@/components/ui'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { parsePDFBatch, type ParseResult, type ParsedDailyData } from '@/services/pdfParser'\r\nimport type { MonitoringDataRow } from '@/data/monitoring'\r\nimport { cn } from '@/utils'\r\n\r\ninterface ImportDataModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport const ImportDataModal: React.FC<ImportDataModalProps> = ({ isOpen, onClose }) => {\r\n  const { importMonitoringData, addAlert, updateMeter, meters } = useAppStore()\r\n  const [files, setFiles] = useState<File[]>([])\r\n  const [results, setResults] = useState<ParseResult[]>([])\r\n  const [isProcessing, setIsProcessing] = useState(false)\r\n  const [isDragOver, setIsDragOver] = useState(false)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    setIsDragOver(true)\r\n  }, [])\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    setIsDragOver(false)\r\n  }, [])\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    setIsDragOver(false)\r\n    \r\n    const droppedFiles = Array.from(e.dataTransfer.files).filter(\r\n      (file) => file.type === 'application/pdf' || file.name.endsWith('.pdf')\r\n    )\r\n    \r\n    if (droppedFiles.length > 0) {\r\n      setFiles((prev) => [...prev, ...droppedFiles])\r\n    }\r\n  }, [])\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedFiles = Array.from(e.target.files || []).filter(\r\n      (file) => file.type === 'application/pdf' || file.name.endsWith('.pdf')\r\n    )\r\n    \r\n    if (selectedFiles.length > 0) {\r\n      setFiles((prev) => [...prev, ...selectedFiles])\r\n    }\r\n    \r\n    // Reset input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = ''\r\n    }\r\n  }\r\n\r\n  const removeFile = (index: number) => {\r\n    setFiles((prev) => prev.filter((_, i) => i !== index))\r\n    setResults((prev) => prev.filter((_, i) => i !== index))\r\n  }\r\n\r\n  const processFiles = async () => {\r\n    if (files.length === 0) return\r\n    \r\n    setIsProcessing(true)\r\n    setResults([])\r\n    \r\n    try {\r\n      const parseResults = await parsePDFBatch(files)\r\n      setResults(parseResults)\r\n    } catch (error) {\r\n      addAlert({\r\n        type: 'error',\r\n        severity: 'critical',\r\n        message: 'Erro ao processar arquivos PDF',\r\n      })\r\n    } finally {\r\n      setIsProcessing(false)\r\n    }\r\n  }\r\n\r\n  const importData = () => {\r\n    const successResults = results.filter((r) => r.success)\r\n    \r\n    if (successResults.length === 0) {\r\n      addAlert({\r\n        type: 'error',\r\n        severity: 'warning',\r\n        message: 'Nenhum dado vlido para importar',\r\n      })\r\n      return\r\n    }\r\n    \r\n    // Agrupar dados por data para calcular balanos\r\n    const dailyDataByDate = new Map<string, { topside?: ParsedDailyData; subsea?: ParsedDailyData }>()\r\n    \r\n    successResults.forEach((result) => {\r\n      if (result.dailyData) {\r\n        const date = result.dailyData.date\r\n        const existing = dailyDataByDate.get(date) || {}\r\n        \r\n        if (result.dailyData.source === 'TOPSIDE') {\r\n          existing.topside = result.dailyData\r\n        } else {\r\n          existing.subsea = result.dailyData\r\n        }\r\n        \r\n        dailyDataByDate.set(date, existing)\r\n      }\r\n      \r\n      // Atualizar K-factors do medidor se for calibrao\r\n      if (result.calibrationData) {\r\n        const meter = meters.find((m) => m.tag === result.calibrationData!.meterTag)\r\n        if (meter) {\r\n          updateMeter(meter.id, {\r\n            kOil: result.calibrationData.kFactors.oil.new,\r\n            kGas: result.calibrationData.kFactors.gas.new,\r\n            kWater: result.calibrationData.kFactors.water.new,\r\n            lastCalibration: result.calibrationData.endDate,\r\n          })\r\n          \r\n          addAlert({\r\n            type: 'success',\r\n            severity: 'info',\r\n            message: `K-factors do medidor ${meter.tag} atualizados pela calibrao`,\r\n            meterId: meter.id,\r\n            meterTag: meter.tag,\r\n          })\r\n        }\r\n      }\r\n    })\r\n    \r\n    // Criar registros de monitoramento\r\n    const monitoringRows: MonitoringDataRow[] = []\r\n    \r\n    dailyDataByDate.forEach((data, date) => {\r\n      const subsea = data.subsea\r\n      const topside = data.topside\r\n      \r\n      // Subsea data\r\n      const subOil = subsea?.oil || 0\r\n      const subGas = subsea?.gas || 0\r\n      const subWater = subsea?.water || 0\r\n      const subHC = subOil + subGas\r\n      \r\n      // Topside data\r\n      const topOil = topside?.oil || 0\r\n      const topGas = topside?.gas || 0\r\n      const topWater = topside?.water || 0\r\n      const topHC = topOil + topGas\r\n      \r\n      // Separator (estimado do topside)\r\n      const sepOil = topOil * 0.98\r\n      const sepGas = topGas * 0.99\r\n      const sepWater = topWater\r\n      const sepHC = sepOil + sepGas\r\n      \r\n      // Calcular balanos\r\n      const hcBalTS = subHC > 0 ? ((topHC - subHC) / subHC) * 100 : 0\r\n      const subTotal = subHC + subWater\r\n      const topTotal = topHC + topWater\r\n      const totalBalTS = subTotal > 0 ? ((topTotal - subTotal) / subTotal) * 100 : 0\r\n      \r\n      // Status ANP 44/2015\r\n      const hcStatus: 'OK' | 'ALERT' | 'FAIL' =\r\n        Math.abs(hcBalTS) > 10 ? 'FAIL' : Math.abs(hcBalTS) > 7 ? 'ALERT' : 'OK'\r\n      const totalStatus: 'OK' | 'ALERT' | 'FAIL' =\r\n        Math.abs(totalBalTS) > 7 ? 'FAIL' : Math.abs(totalBalTS) > 5 ? 'ALERT' : 'OK'\r\n      \r\n      monitoringRows.push({\r\n        id: `mon-${date}-${Date.now()}`,\r\n        date,\r\n        subOil,\r\n        subGas,\r\n        subWater,\r\n        subHC,\r\n        topOil,\r\n        topGas,\r\n        topWater,\r\n        topHC,\r\n        sepOil,\r\n        sepGas,\r\n        sepWater,\r\n        sepHC,\r\n        hcBalTS: parseFloat(hcBalTS.toFixed(2)),\r\n        totalBalTS: parseFloat(totalBalTS.toFixed(2)),\r\n        hcBalancePercent: parseFloat(hcBalTS.toFixed(2)),\r\n        totalBalancePercent: parseFloat(totalBalTS.toFixed(2)),\r\n        hcStatus,\r\n        totalStatus,\r\n        action: hcStatus === 'FAIL' || totalStatus === 'FAIL' ? 'INVESTIGAR' : 'MONITORAR',\r\n        subVsTS: parseFloat(hcBalTS.toFixed(2)),\r\n        topVsTS: 0,\r\n        topVsSub: parseFloat(((topHC - subHC) / (subHC || 1) * 100).toFixed(2)),\r\n      })\r\n    })\r\n    \r\n    if (monitoringRows.length > 0) {\r\n      importMonitoringData(monitoringRows)\r\n      \r\n      addAlert({\r\n        type: 'success',\r\n        severity: 'info',\r\n        message: `${monitoringRows.length} registro(s) de produo importado(s) com sucesso`,\r\n      })\r\n    }\r\n    \r\n    // Fechar modal\r\n    handleClose()\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setFiles([])\r\n    setResults([])\r\n    setIsProcessing(false)\r\n    onClose()\r\n  }\r\n\r\n  const successCount = results.filter((r) => r.success).length\r\n  const errorCount = results.filter((r) => !r.success).length\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={handleClose} title=\"Importar Relatrios PDF\" size=\"lg\">\r\n      <div className=\"space-y-4\">\r\n        {/* Instrues */}\r\n        <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3\">\r\n          <p className=\"text-sm text-blue-300\">\r\n            Arraste e solte arquivos PDF ou clique para selecionar. So aceitos:\r\n          </p>\r\n          <ul className=\"text-xs text-blue-300/80 mt-2 space-y-1 ml-4\">\r\n            <li> <strong>B03_MPFM_Daily</strong> - Relatrios Topside (Riser P5/P6)</li>\r\n            <li> <strong>B05_MPFM_Daily</strong> - Relatrios Subsea (PE_4, PE_EO)</li>\r\n            <li> <strong>PVTCalibration</strong> - Relatrios de Calibrao PVT</li>\r\n          </ul>\r\n        </div>\r\n\r\n        {/* rea de Drop */}\r\n        <div\r\n          onDragOver={handleDragOver}\r\n          onDragLeave={handleDragLeave}\r\n          onDrop={handleDrop}\r\n          onClick={() => fileInputRef.current?.click()}\r\n          className={cn(\r\n            'border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all',\r\n            isDragOver\r\n              ? 'border-blue-500 bg-blue-500/10'\r\n              : 'border-zinc-600 hover:border-zinc-500 hover:bg-zinc-800/50'\r\n          )}\r\n        >\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            accept=\".pdf\"\r\n            multiple\r\n            onChange={handleFileSelect}\r\n            className=\"hidden\"\r\n            aria-label=\"Select PDF files\"\r\n          />\r\n          <FileUp\r\n            size={48}\r\n            className={cn(\r\n              'mx-auto mb-3',\r\n              isDragOver ? 'text-blue-400' : 'text-zinc-500'\r\n            )}\r\n          />\r\n          <p className=\"text-zinc-300 font-medium\">\r\n            {isDragOver ? 'Solte os arquivos aqui' : 'Arraste PDFs ou clique para selecionar'}\r\n          </p>\r\n          <p className=\"text-xs text-zinc-500 mt-1\">\r\n            Suporta mltiplos arquivos (importao em lote)\r\n          </p>\r\n        </div>\r\n\r\n        {/* Lista de Arquivos */}\r\n        {files.length > 0 && (\r\n          <Card className=\"p-3 bg-zinc-800/50 max-h-48 overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-sm font-medium text-zinc-300\">\r\n                {files.length} arquivo(s) selecionado(s)\r\n              </span>\r\n              {results.length > 0 && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  {successCount > 0 && (\r\n                    <Badge variant=\"success\">{successCount} OK</Badge>\r\n                  )}\r\n                  {errorCount > 0 && (\r\n                    <Badge variant=\"error\">{errorCount} Erro</Badge>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"space-y-2\">\r\n              {files.map((file, index) => {\r\n                const result = results[index]\r\n                \r\n                return (\r\n                  <div\r\n                    key={index}\r\n                    className=\"flex items-center justify-between p-2 bg-zinc-900/50 rounded\"\r\n                  >\r\n                    <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n                      <FileText size={16} className=\"text-zinc-400 flex-shrink-0\" />\r\n                      <span className=\"text-sm text-zinc-300 truncate\">\r\n                        {file.name}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center gap-2 ml-2\">\r\n                      {result && (\r\n                        <>\r\n                          {result.success ? (\r\n                            <div className=\"flex items-center gap-1\">\r\n                              <CheckCircle size={14} className=\"text-emerald-400\" />\r\n                              <span className=\"text-xs text-emerald-400\">\r\n                                {result.type.replace('_', ' ')}\r\n                              </span>\r\n                            </div>\r\n                          ) : (\r\n                            <div className=\"flex items-center gap-1\">\r\n                              <XCircle size={14} className=\"text-red-400\" />\r\n                              <span className=\"text-xs text-red-400 max-w-32 truncate\">\r\n                                {result.error}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      \r\n                      <button\r\n                        type=\"button\"\r\n                        title=\"Remover arquivo\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          removeFile(index)\r\n                        }}\r\n                        className=\"p-1 text-zinc-500 hover:text-red-400 transition-colors\"\r\n                      >\r\n                        <Trash2 size={14} />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Resumo dos Dados Extrados */}\r\n        {results.length > 0 && successCount > 0 && (\r\n          <Card className=\"p-3 bg-emerald-500/10 border-emerald-500/30\">\r\n            <h4 className=\"text-sm font-medium text-emerald-400 mb-2 flex items-center gap-2\">\r\n              <Database size={16} />\r\n              Dados Prontos para Importao\r\n            </h4>\r\n            <div className=\"text-xs text-emerald-300/80 space-y-1\">\r\n              {results.filter((r) => r.success && r.dailyData).length > 0 && (\r\n                <p>\r\n                   {results.filter((r) => r.dailyData).length} registro(s) de produo diria\r\n                </p>\r\n              )}\r\n              {results.filter((r) => r.success && r.calibrationData).length > 0 && (\r\n                <p>\r\n                   {results.filter((r) => r.calibrationData).length} relatrio(s) de calibrao\r\n                </p>\r\n              )}\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Aes */}\r\n        <div className=\"flex justify-end gap-3 pt-2 border-t border-zinc-800\">\r\n          <Button variant=\"ghost\" onClick={handleClose}>\r\n            Cancelar\r\n          </Button>\r\n          \r\n          {results.length === 0 ? (\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={processFiles}\r\n              disabled={files.length === 0 || isProcessing}\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Loader2 size={16} className=\"animate-spin mr-2\" />\r\n                  Processando...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Upload size={16} className=\"mr-2\" />\r\n                  Processar PDFs\r\n                </>\r\n              )}\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={importData}\r\n              disabled={successCount === 0}\r\n            >\r\n              <Database size={16} className=\"mr-2\" />\r\n              Importar {successCount} Registro(s)\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n","/**\r\n * Servio de exportao e importao de dados\r\n */\r\n\r\nimport type { Meter, CalibrationEvent, Alert } from '@/types'\r\nimport type { MonitoringDataRow } from '@/data/monitoring'\r\n\r\n// ============================================================================\r\n// EXPORTAO CSV\r\n// ============================================================================\r\n\r\n/**\r\n * Converte array de objetos para CSV\r\n */\r\nexport function objectsToCSV<T>(\r\n  data: T[],\r\n  columns?: { key: keyof T; header: string }[]\r\n): string {\r\n  if (data.length === 0) return ''\r\n\r\n  // Se colunas no especificadas, usar todas as chaves do primeiro objeto\r\n  const cols = columns || (Object.keys(data[0] as object) as (keyof T)[]).map((key) => ({\r\n    key,\r\n    header: String(key),\r\n  }))\r\n\r\n  // Header\r\n  const header = cols.map((c) => `\"${c.header}\"`).join(',')\r\n\r\n  // Rows\r\n  const rows = data.map((row) =>\r\n    cols\r\n      .map((c) => {\r\n        const value = row[c.key]\r\n        if (value === null || value === undefined) return ''\r\n        if (typeof value === 'string') return `\"${value.replace(/\"/g, '\"\"')}\"`\r\n        return String(value)\r\n      })\r\n      .join(',')\r\n  )\r\n\r\n  return [header, ...rows].join('\\n')\r\n}\r\n\r\n/**\r\n * Faz download de arquivo\r\n */\r\nexport function downloadFile(content: string, filename: string, mimeType: string): void {\r\n  const blob = new Blob([content], { type: mimeType })\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = filename\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\n/**\r\n * Exporta dados de monitoramento para CSV\r\n */\r\nexport function exportMonitoringDataToCSV(data: MonitoringDataRow[]): void {\r\n  const columns: { key: keyof MonitoringDataRow; header: string }[] = [\r\n    { key: 'date', header: 'Data' },\r\n    { key: 'subOil', header: 'Subsea leo (t)' },\r\n    { key: 'subGas', header: 'Subsea Gs (t)' },\r\n    { key: 'subHC', header: 'Subsea HC (t)' },\r\n    { key: 'topOil', header: 'Topside leo (t)' },\r\n    { key: 'topGas', header: 'Topside Gs (t)' },\r\n    { key: 'topHC', header: 'Topside HC (t)' },\r\n    { key: 'sepOil', header: 'Separador leo (t)' },\r\n    { key: 'sepGas', header: 'Separador Gs (t)' },\r\n    { key: 'sepHC', header: 'Separador HC (t)' },\r\n    { key: 'hcBalTS', header: 'Balano HC (%)' },\r\n    { key: 'totalBalTS', header: 'Balano Total (%)' },\r\n    { key: 'hcStatus', header: 'Status HC' },\r\n    { key: 'action', header: 'Ao' },\r\n  ]\r\n\r\n  const csv = objectsToCSV(data, columns)\r\n  const date = new Date().toISOString().split('T')[0]\r\n  downloadFile(csv, `monitoramento_mpfm_${date}.csv`, 'text/csv;charset=utf-8')\r\n}\r\n\r\n/**\r\n * Exporta medidores para CSV\r\n */\r\nexport function exportMetersToCSV(data: Meter[]): void {\r\n  const columns: { key: keyof Meter; header: string }[] = [\r\n    { key: 'tag', header: 'TAG' },\r\n    { key: 'name', header: 'Nome' },\r\n    { key: 'location', header: 'Localizao' },\r\n    { key: 'status', header: 'Status' },\r\n    { key: 'manufacturer', header: 'Fabricante' },\r\n    { key: 'model', header: 'Modelo' },\r\n    { key: 'serialNumber', header: 'Nmero de Srie' },\r\n    { key: 'lastCalibration', header: 'ltima Calibrao' },\r\n    { key: 'kOil', header: 'K-Oil' },\r\n    { key: 'kGas', header: 'K-Gas' },\r\n    { key: 'kWater', header: 'K-Water' },\r\n    { key: 'daysToCalibration', header: 'Dias para Calibrao' },\r\n  ]\r\n\r\n  const csv = objectsToCSV(data, columns)\r\n  const date = new Date().toISOString().split('T')[0]\r\n  downloadFile(csv, `medidores_mpfm_${date}.csv`, 'text/csv;charset=utf-8')\r\n}\r\n\r\n/**\r\n * Exporta eventos de calibrao para CSV\r\n */\r\nexport function exportCalibrationEventsToCSV(data: CalibrationEvent[]): void {\r\n  const columns: { key: keyof CalibrationEvent; header: string }[] = [\r\n    { key: 'id', header: 'ID Evento' },\r\n    { key: 'meterTag', header: 'TAG Medidor' },\r\n    { key: 'meterName', header: 'Nome Medidor' },\r\n    { key: 'type', header: 'Tipo' },\r\n    { key: 'status', header: 'Status' },\r\n    { key: 'result', header: 'Resultado' },\r\n    { key: 'startDate', header: 'Data Incio' },\r\n    { key: 'endDate', header: 'Data Fim' },\r\n    { key: 'currentStep', header: 'Etapa Atual' },\r\n    { key: 'progress', header: 'Progresso (%)' },\r\n    { key: 'responsible', header: 'Responsvel' },\r\n  ]\r\n\r\n  const csv = objectsToCSV(data, columns)\r\n  const date = new Date().toISOString().split('T')[0]\r\n  downloadFile(csv, `calibracoes_mpfm_${date}.csv`, 'text/csv;charset=utf-8')\r\n}\r\n\r\n// ============================================================================\r\n// IMPORTAO CSV\r\n// ============================================================================\r\n\r\n/**\r\n * Parse CSV string para array de strings (simples)\r\n */\r\nexport function parseCSV(csvString: string): string[][] {\r\n  const lines = csvString.trim().split('\\n')\r\n  return lines.map((line) => parseCSVLine(line))\r\n}\r\n\r\n/**\r\n * Parse uma linha CSV considerando aspas\r\n */\r\nfunction parseCSVLine(line: string): string[] {\r\n  const result: string[] = []\r\n  let current = ''\r\n  let inQuotes = false\r\n\r\n  for (let i = 0; i < line.length; i++) {\r\n    const char = line[i]\r\n    const nextChar = line[i + 1]\r\n\r\n    if (char === '\"') {\r\n      if (inQuotes && nextChar === '\"') {\r\n        current += '\"'\r\n        i++ // Skip next quote\r\n      } else {\r\n        inQuotes = !inQuotes\r\n      }\r\n    } else if (char === ',' && !inQuotes) {\r\n      result.push(current.trim())\r\n      current = ''\r\n    } else {\r\n      current += char\r\n    }\r\n  }\r\n\r\n  result.push(current.trim())\r\n  return result\r\n}\r\n\r\n/**\r\n * L arquivo e retorna contedo como texto\r\n */\r\nexport function readFileAsText(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.onload = () => resolve(reader.result as string)\r\n    reader.onerror = () => reject(new Error('Erro ao ler arquivo'))\r\n    reader.readAsText(file)\r\n  })\r\n}\r\n\r\n/**\r\n * Importa dados de monitoramento de CSV\r\n */\r\nexport async function importMonitoringDataFromCSV(\r\n  file: File\r\n): Promise<Partial<MonitoringDataRow>[]> {\r\n  const content = await readFileAsText(file)\r\n  const lines = content.trim().split('\\n')\r\n  if (lines.length < 2) return []\r\n\r\n  const headers = parseCSVLine(lines[0])\r\n  const columnMapping: Record<string, string> = {\r\n    'Data': 'date',\r\n    'Subsea leo (t)': 'subOil',\r\n    'Subsea Gs (t)': 'subGas',\r\n    'Subsea HC (t)': 'subHC',\r\n    'Topside leo (t)': 'topOil',\r\n    'Topside Gs (t)': 'topGas',\r\n    'Topside HC (t)': 'topHC',\r\n    'Separador leo (t)': 'sepOil',\r\n    'Separador Gs (t)': 'sepGas',\r\n    'Separador HC (t)': 'sepHC',\r\n    'Balano HC (%)': 'hcBalTS',\r\n    'Balano Total (%)': 'totalBalTS',\r\n    'Status HC': 'hcStatus',\r\n    'Ao': 'action',\r\n  }\r\n\r\n  const data: Partial<MonitoringDataRow>[] = []\r\n  for (let i = 1; i < lines.length; i++) {\r\n    const values = parseCSVLine(lines[i])\r\n    const row: Record<string, string | number> = {}\r\n\r\n    headers.forEach((header, index) => {\r\n      const key = columnMapping[header] || header\r\n      const value = values[index] || ''\r\n      const numValue = parseFloat(value)\r\n      row[key] = !isNaN(numValue) && value.trim() !== '' ? numValue : value\r\n    })\r\n\r\n    data.push(row as Partial<MonitoringDataRow>)\r\n  }\r\n\r\n  return data\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTAO JSON\r\n// ============================================================================\r\n\r\ninterface ExportData {\r\n  version: string\r\n  exportDate: string\r\n  meters?: Meter[]\r\n  monitoringData?: MonitoringDataRow[]\r\n  calibrationEvents?: CalibrationEvent[]\r\n  alerts?: Alert[]\r\n}\r\n\r\n/**\r\n * Exporta dados para JSON\r\n */\r\nexport function exportAllDataToJSON(\r\n  data: Partial<ExportData>,\r\n  filename?: string\r\n): void {\r\n  const exportData: ExportData = {\r\n    version: '1.0.0',\r\n    exportDate: new Date().toISOString(),\r\n    ...data,\r\n  }\r\n\r\n  const json = JSON.stringify(exportData, null, 2)\r\n  const date = new Date().toISOString().split('T')[0]\r\n  downloadFile(json, `${filename || 'mpfm_backup'}_${date}.json`, 'application/json')\r\n}\r\n\r\n/**\r\n * Importa dados de JSON\r\n */\r\nexport async function importDataFromJSON(file: File): Promise<ExportData> {\r\n  const content = await readFileAsText(file)\r\n  return JSON.parse(content) as ExportData\r\n}\r\n\r\n// ============================================================================\r\n// RELATRIOS\r\n// ============================================================================\r\n\r\n/**\r\n * Gera relatrio de calibrao em formato texto\r\n */\r\nexport function generateCalibrationReport(event: CalibrationEvent): string {\r\n  const now = new Date().toLocaleString('pt-BR')\r\n  \r\n  return `\r\n================================================================================\r\n                    RELATRIO DE AVALIAO DE DESEMPENHO MPFM\r\n                           CONFORME RANP 44/2015\r\n================================================================================\r\n\r\nID do Evento: ${event.id}\r\nData de Emisso: ${now}\r\n\r\nDADOS DO MEDIDOR\r\n--------------------------------------------------------------------------------\r\nTAG: ${event.meterTag}\r\nNome: ${event.meterName}\r\nTipo de Avaliao: ${event.type}\r\n\r\nSTATUS DA AVALIAO\r\n--------------------------------------------------------------------------------\r\nStatus: ${event.status}\r\nResultado: ${event.result || 'Pendente'}\r\nEtapa Atual: ${event.currentStep}/7\r\nProgresso: ${event.progress}%\r\n\r\nPERODO\r\n--------------------------------------------------------------------------------\r\nData de Incio: ${event.startDate}\r\nData de Trmino: ${event.endDate || 'Em andamento'}\r\n\r\nRESPONSVEL\r\n--------------------------------------------------------------------------------\r\n${event.responsible}\r\n\r\n================================================================================\r\n                           FIM DO RELATRIO\r\n================================================================================\r\n`\r\n}\r\n\r\n/**\r\n * Exporta relatrio de calibrao\r\n */\r\nexport function exportCalibrationReport(event: CalibrationEvent): void {\r\n  const report = generateCalibrationReport(event)\r\n  const date = new Date().toISOString().split('T')[0]\r\n  downloadFile(report, `relatorio_${event.id}_${date}.txt`, 'text/plain;charset=utf-8')\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Modal } from '@/components/ui/Modal'\r\nimport { Button } from '@/components/ui/Button'\r\nimport { Select } from '@/components/ui/Select'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport {\r\n  exportMonitoringDataToCSV,\r\n  exportMetersToCSV,\r\n  exportCalibrationEventsToCSV,\r\n  exportAllDataToJSON,\r\n  exportCalibrationReport,\r\n} from '@/services/dataExport'\r\n\r\ninterface ExportDataModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n}\r\n\r\ntype ExportType = 'monitoring' | 'meters' | 'calibration' | 'all' | 'report'\r\ntype ExportFormat = 'csv' | 'json'\r\n\r\nexport const ExportDataModal: React.FC<ExportDataModalProps> = ({ isOpen, onClose }) => {\r\n  const { monitoringData, meters, calibrationEvents, selectedEvent } = useAppStore()\r\n  const [exportType, setExportType] = useState<ExportType>('monitoring')\r\n  const [format, setFormat] = useState<ExportFormat>('csv')\r\n  const [isExporting, setIsExporting] = useState(false)\r\n\r\n  const handleExport = async () => {\r\n    setIsExporting(true)\r\n\r\n    try {\r\n      switch (exportType) {\r\n        case 'monitoring':\r\n          if (format === 'csv') {\r\n            exportMonitoringDataToCSV(monitoringData)\r\n          } else {\r\n            exportAllDataToJSON({ monitoringData }, 'monitoring_data')\r\n          }\r\n          break\r\n\r\n        case 'meters':\r\n          if (format === 'csv') {\r\n            exportMetersToCSV(meters)\r\n          } else {\r\n            exportAllDataToJSON({ meters }, 'meters')\r\n          }\r\n          break\r\n\r\n        case 'calibration':\r\n          if (format === 'csv') {\r\n            exportCalibrationEventsToCSV(calibrationEvents)\r\n          } else {\r\n            exportAllDataToJSON({ calibrationEvents }, 'calibration_events')\r\n          }\r\n          break\r\n\r\n        case 'all':\r\n          exportAllDataToJSON({ monitoringData, meters, calibrationEvents }, 'mpfm_monitor_backup')\r\n          break\r\n\r\n        case 'report':\r\n          if (selectedEvent) {\r\n            exportCalibrationReport(selectedEvent)\r\n          }\r\n          break\r\n      }\r\n\r\n      onClose()\r\n    } catch (error) {\r\n      console.error('Erro ao exportar:', error)\r\n    } finally {\r\n      setIsExporting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Exportar Dados\" size=\"lg\">\r\n      <div className=\"space-y-6\">\r\n        {/* Tipo de Exportao */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            O que deseja exportar?\r\n          </label>\r\n          <Select\r\n            value={exportType}\r\n            onChange={(e) => setExportType(e.target.value as ExportType)}\r\n            options={[\r\n              { value: 'monitoring', label: 'Dados de Monitoramento' },\r\n              { value: 'meters', label: 'Cadastro de Medidores' },\r\n              { value: 'calibration', label: 'Eventos de Calibrao' },\r\n              { value: 'all', label: 'Backup Completo' },\r\n              ...(selectedEvent\r\n                ? [{ value: 'report', label: 'Relatrio de Calibrao (Evento Selecionado)' }]\r\n                : []),\r\n            ]}\r\n          />\r\n        </div>\r\n\r\n        {/* Formato */}\r\n        {exportType !== 'all' && exportType !== 'report' && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Formato</label>\r\n            <div className=\"flex gap-4\">\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"format\"\r\n                  value=\"csv\"\r\n                  checked={format === 'csv'}\r\n                  onChange={(e) => setFormat(e.target.value as ExportFormat)}\r\n                  className=\"mr-2\"\r\n                />\r\n                CSV (Excel)\r\n              </label>\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"format\"\r\n                  value=\"json\"\r\n                  checked={format === 'json'}\r\n                  onChange={(e) => setFormat(e.target.value as ExportFormat)}\r\n                  className=\"mr-2\"\r\n                />\r\n                JSON\r\n              </label>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Resumo */}\r\n        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n          <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Resumo</h4>\r\n          <div className=\"text-sm text-gray-600 space-y-1\">\r\n            {exportType === 'monitoring' && (\r\n              <p> {monitoringData.length} registros de monitoramento</p>\r\n            )}\r\n            {exportType === 'meters' && <p> {meters.length} medidores cadastrados</p>}\r\n            {exportType === 'calibration' && (\r\n              <p> {calibrationEvents.length} eventos de calibrao</p>\r\n            )}\r\n            {exportType === 'all' && (\r\n              <>\r\n                <p> {monitoringData.length} registros de monitoramento</p>\r\n                <p> {meters.length} medidores</p>\r\n                <p> {calibrationEvents.length} eventos de calibrao</p>\r\n              </>\r\n            )}\r\n            {exportType === 'report' && selectedEvent && (\r\n              <p> Relatrio para evento: {selectedEvent.id}</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Aviso */}\r\n        {exportType === 'all' && (\r\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n            <p className=\"text-sm text-yellow-700\">\r\n               O backup completo ser exportado em formato JSON. Guarde este arquivo em\r\n              local seguro para restaurao futura.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Botes */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"primary\"\r\n            onClick={handleExport}\r\n            disabled={isExporting || (exportType === 'report' && !selectedEvent)}\r\n          >\r\n            {isExporting ? 'Exportando...' : 'Exportar'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Modal } from '@/components/ui/Modal'\r\nimport { Button } from '@/components/ui/Button'\r\nimport { Select } from '@/components/ui/Select'\r\nimport { Input } from '@/components/ui/Input'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport type { CalibrationType } from '@/types'\r\n\r\ninterface NewCalibrationModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport const NewCalibrationModal: React.FC<NewCalibrationModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n}) => {\r\n  const { meters, addCalibrationEvent, setSelectedEvent } = useAppStore()\r\n  const [selectedMeterId, setSelectedMeterId] = useState('')\r\n  const [calibrationType, setCalibrationType] = useState<CalibrationType>('Peridica')\r\n  const [serviceOrder, setServiceOrder] = useState('')\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n  const activeMeters = meters.filter((m) => m.status === 'active')\r\n\r\n  const validate = (): boolean => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    if (!selectedMeterId) {\r\n      newErrors.meterId = 'Selecione um medidor'\r\n    }\r\n\r\n    if (!calibrationType) {\r\n      newErrors.type = 'Selecione o tipo de avaliao'\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!validate()) return\r\n\r\n    const meter = meters.find((m) => m.id === selectedMeterId)\r\n    if (!meter) return\r\n\r\n    const event = addCalibrationEvent(meter, calibrationType)\r\n    setSelectedEvent(event)\r\n\r\n    // Reset form\r\n    setSelectedMeterId('')\r\n    setCalibrationType('Peridica')\r\n    setServiceOrder('')\r\n    setErrors({})\r\n    onClose()\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setSelectedMeterId('')\r\n    setCalibrationType('Peridica')\r\n    setServiceOrder('')\r\n    setErrors({})\r\n    onClose()\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={handleClose} title=\"Nova Avaliao de Calibrao\" size=\"md\">\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Aviso se no h medidores */}\r\n        {activeMeters.length === 0 && (\r\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n            <p className=\"text-sm text-yellow-700\">\r\n               Nenhum medidor ativo cadastrado. Adicione um medidor antes de criar uma\r\n              avaliao de calibrao.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Seleo de Medidor */}\r\n        <div>\r\n          <Select\r\n            label=\"Medidor MPFM *\"\r\n            value={selectedMeterId}\r\n            onChange={(e) => {\r\n              setSelectedMeterId(e.target.value)\r\n              setErrors((prev) => ({ ...prev, meterId: '' }))\r\n            }}\r\n            options={[\r\n              { value: '', label: 'Selecione um medidor...' },\r\n              ...activeMeters.map((m) => ({\r\n                value: m.id,\r\n                label: `${m.tag} - ${m.name} (${m.location})`,\r\n              })),\r\n            ]}\r\n            error={errors.meterId}\r\n          />\r\n        </div>\r\n\r\n        {/* Tipo de Avaliao */}\r\n        <div>\r\n          <Select\r\n            label=\"Tipo de Avaliao *\"\r\n            value={calibrationType}\r\n            onChange={(e) => {\r\n              setCalibrationType(e.target.value as CalibrationType)\r\n              setErrors((prev) => ({ ...prev, type: '' }))\r\n            }}\r\n            options={[\r\n              { value: 'Comissionamento', label: 'Comissionamento - Primeira calibrao do medidor' },\r\n              { value: 'Peridica', label: 'Peridica - Calibrao regular (anual)' },\r\n              { value: 'Especial', label: 'Especial - Aps manuteno ou alterao' },\r\n              { value: 'Investigao', label: 'Investigao - Desvio detectado no monitoramento' },\r\n            ]}\r\n            error={errors.type}\r\n          />\r\n        </div>\r\n\r\n        {/* Ordem de Servio (Opcional) */}\r\n        <div>\r\n          <Input\r\n            label=\"Ordem de Servio (Opcional)\"\r\n            placeholder=\"Ex: OS-2024-001\"\r\n            value={serviceOrder}\r\n            onChange={(e) => setServiceOrder(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Informaes */}\r\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n          <h4 className=\"text-sm font-medium text-blue-800 mb-2\">Etapas da Avaliao</h4>\r\n          <ol className=\"text-xs text-blue-700 list-decimal list-inside space-y-1\">\r\n            <li>Registro e Identificao</li>\r\n            <li>Configurao PVT</li>\r\n            <li>Totalizadores</li>\r\n            <li>Clculo K-Factors</li>\r\n            <li>Balano de Massas</li>\r\n            <li>Monitoramento Ps</li>\r\n            <li>Registro de Alarmes</li>\r\n          </ol>\r\n        </div>\r\n\r\n        {/* Botes */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={handleClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button type=\"submit\" variant=\"primary\" disabled={activeMeters.length === 0}>\r\n            Iniciar Avaliao\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  )\r\n}\r\n","/**\r\n * Hook para inicializar a aplicao\r\n * Carrega apenas os medidores pr-configurados (sem dados de produo mockados)\r\n * Os dados de produo devem ser importados via PDF pelo usurio\r\n */\r\n\r\nimport { useEffect, useRef } from 'react'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { realMeters, realCalibrationPVT } from '@/data/realData'\r\n\r\nexport function useInitializeRealData() {\r\n  const meters = useAppStore((state) => state.meters)\r\n  const initialized = useRef(false)\r\n\r\n  useEffect(() => {\r\n    // S executa uma vez\r\n    if (initialized.current) return\r\n    initialized.current = true\r\n\r\n    // Inicializa medidores se estiver vazio\r\n    if (meters.length === 0) {\r\n      console.log('[MPFM] Inicializando medidores do FPSO Bacalhau...')\r\n      realMeters.forEach((meter) => {\r\n        // Usa set direto para no gerar alertas na inicializao\r\n        useAppStore.setState((state) => ({\r\n          meters: [...state.meters, { ...meter, id: `meter-${meter.tag}` }],\r\n        }))\r\n      })\r\n    }\r\n\r\n    // NO carrega dados de monitoramento mockados\r\n    // O usurio deve importar os PDFs diariamente\r\n    console.log('[MPFM] Inicializao concluda! Importe PDFs para popular dados de produo.')\r\n  }, [meters.length])\r\n}\r\n\r\n// Dados de calibrao PVT para uso no workflow\r\nexport function useCalibrationPVTData() {\r\n  return realCalibrationPVT\r\n}\r\n","import { Routes, Route, Navigate } from 'react-router-dom'\r\nimport { Layout } from '@/components/layout'\r\nimport { MonitoringPage, CalibrationPage, CompliancePage, Desenquadramento, RegistroDiario } from '@/pages'\r\nimport {\r\n  NewMeterModal,\r\n  ImportDataModal,\r\n  ExportDataModal,\r\n  NewCalibrationModal,\r\n} from '@/components/modals'\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { useInitializeRealData } from '@/hooks/useInitializeRealData'\r\n\r\nfunction App() {\r\n  // Inicializa dados reais do FPSO Bacalhau\r\n  useInitializeRealData()\r\n\r\n  const {\r\n    showMeterModal,\r\n    setShowMeterModal,\r\n    showImportModal,\r\n    setShowImportModal,\r\n    showExportModal,\r\n    setShowExportModal,\r\n    showNewEventModal,\r\n    setShowNewEventModal,\r\n    editingMeter,\r\n    setEditingMeter,\r\n  } = useAppStore()\r\n\r\n  const handleCloseMeterModal = () => {\r\n    setShowMeterModal(false)\r\n    setEditingMeter(null)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Layout>\r\n        <Routes>\r\n          <Route path=\"/\" element={<Navigate to=\"/monitoring\" replace />} />\r\n          <Route path=\"/monitoring\" element={<MonitoringPage />} />\r\n          <Route path=\"/calibration\" element={<CalibrationPage />} />\r\n          <Route path=\"/compliance\" element={<CompliancePage />} />\r\n          <Route path=\"/desenquadramento\" element={<Desenquadramento />} />\r\n          <Route path=\"/registro-diario\" element={<RegistroDiario />} />\r\n          <Route path=\"*\" element={<Navigate to=\"/monitoring\" replace />} />\r\n        </Routes>\r\n      </Layout>\r\n\r\n      {/* Modais Globais */}\r\n      <NewMeterModal\r\n        isOpen={showMeterModal}\r\n        onClose={handleCloseMeterModal}\r\n        editingMeter={editingMeter}\r\n      />\r\n      <ImportDataModal\r\n        isOpen={showImportModal}\r\n        onClose={() => setShowImportModal(false)}\r\n      />\r\n      <ExportDataModal\r\n        isOpen={showExportModal}\r\n        onClose={() => setShowExportModal(false)}\r\n      />\r\n      <NewCalibrationModal\r\n        isOpen={showNewEventModal}\r\n        onClose={() => setShowNewEventModal(false)}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport App from './App'\r\nimport { ToastProvider } from '@/components/ui/Toast'\r\nimport './styles/globals.css'\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <ToastProvider>\r\n        <App />\r\n      </ToastProvider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n)\r\n\r\n"],"names":["require$$0","string","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","config","classMap","conflictingClassGroups","conflictingClassGroupModifiers","classParts","classGroupId","hasPostfixModifier","conflicts","classPartObject","currentClassPart","nextClassPartObject","classGroupFromNextClassPart","classRest","_a","validator","arbitraryPropertyClassName","property","theme","prefix","classGroup","classDefinition","classPartObjectToEdit","key","path","currentClassPartObject","pathPart","func","classGroupEntries","prefixedClassGroup","value","maxCacheSize","cacheSize","cache","previousCache","update","separator","experimentalParseClassName","isSeparatorSingleCharacter","firstSeparatorCharacter","separatorLength","parseClassName","modifiers","bracketDepth","modifierStart","postfixModifierPosition","index","currentCharacter","baseClassNameWithImportantModifier","hasImportantModifier","baseClassName","maybePostfixModifierPosition","sortedModifiers","unsortedModifiers","modifier","classList","configUtils","getClassGroupId","getConflictingClassGroupIds","classGroupsInConflict","classNames","result","originalClassName","variantModifier","modifierId","classId","conflictGroups","i","group","argument","resolvedValue","mix","k","createConfigFirst","createConfigRest","cacheGet","cacheSet","functionToCall","initTailwindMerge","previousConfig","createConfigCurrent","tailwindMerge","cachedResult","themeGetter","label","testValue","colors","spacing","blur","brightness","borderColor","borderRadius","borderSpacing","borderWidth","contrast","grayscale","hueRotate","invert","gap","gradientColorStops","gradientColorStopPositions","inset","margin","opacity","padding","saturate","scale","sepia","skew","space","translate","getOverscroll","getOverflow","getSpacingWithAutoAndArbitrary","getSpacingWithArbitrary","getLengthWithEmptyAndArbitrary","getNumberWithAutoAndArbitrary","getPositions","getLineStyles","getBlendModes","getAlign","getZeroAndEmpty","getBreaks","getNumberAndArbitrary","inputs","decimals","date","format","d","activeModule","onModuleChange","collapsed","jsxs","jsx","module","Icon","isActive","variantStyles","sizeStyles","variant","loading","disabled","props","title","subtitle","headerRight","noPadding","unit","error","inputSize","readOnly","options","selectSize","opt","isOpen","onClose","useEffect","handleEscape","e","tabs","activeTab","onChange","tab","colorStyles","trend","onClick","max","showLabel","percent","barColor","steps","currentStep","onStepClick","step","stepNumber","isCompleted","isCurrent","isPending","action","createContext","toasts","setToasts","useState","removeToast","useCallback","id","prev","t","addToast","toast","newToast","duration","success","message","warning","info","context","useContext","onRemove","isExiting","setIsExiting","handleRemove","icons","styles","onToggleSidebar","onImport","onExport","alertCount","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","__vite_import_meta_env__","React","is","x","y","objectIs","useDebugValue","subscribe","getSnapshot","_useState","inst","forceUpdate","latestGetSnapshot","nextValue","shim","shimModule","require$$1","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","arg","equalityFn","slice","useBoundStore","getStorage","storage","name","parse","str2","str","newValue","fn","input","onFulfilled","_onRejected","_onFulfilled","onRejected","baseOptions","set","get","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","cb","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","_b","migrationResult","migrated","measured","reference","deviation","warningLimit","errorLimit","absDeviation","mpfmData","refData","mpfmHC","refHC","mpfmTotal","refTotal","hcBalance","totalBalance","hcStatus","totalStatus","mpfmMass","refMass","meterTag","type","location","typeCode","month","year","timestamp","random","show","meter","meterData","updates","m","dataWithoutId","data","dataWithIds","row","balance","event","now","eventId","progress","kFactors","alertData","alert","alertId","a","filters","monitoringData","monitoringFilters","calibrationEvents","calibrationFilters","sidebarCollapsed","setSidebarCollapsed","navigate","alerts","setShowImportModal","setShowExportModal","unreadCount","handleModuleChange","moduleId","v","dayStatus","isToday","day","statusStyles","statusDotStyles","statusTextStyles","STORAGE_KEY","__publicField","stored","entry","logEntry","limit","entity","entityId","log","userId","startDate","endDate","start","end","logTime","headers","rows","user","updateMonitoringData","addAlert","logAction","isEditing","setIsEditing","editReason","setEditReason","editValues","setEditValues","dayData","formatDate","dateStr","statusConfig","status","StatusIcon","handleStartEdit","handleCancelEdit","handleSaveEdit","subHC","topHC","hcBalTS","subTotal","topTotal","totalBalTS","newHcStatus","newTotalStatus","Edit3","Fragment","today","currentMonth","setCurrentMonth","currentYear","setCurrentYear","selectedDate","setSelectedDate","showDetailModal","setShowDetailModal","calendarDays","useMemo","firstDay","lastDay","startPadding","totalDays","days","goToPreviousMonth","goToNextMonth","goToToday","handleDayClick","monthStats","daysWithData","okDays","alertDays","failDays","yearOptions","_","CalendarIcon","diffMs","diffMins","diffHours","diffDays","displayAlerts","getIcon","getIconStyle","reversedData","idx","meters","setShowMeterModal","setEditingMeter","deleteMeter","handleEdit","handleDelete","meterId","Edit","getUnreadAlertsCount","getActiveMetersCount","hasData","hasMeters","latestData","maxConsecDays","activeMeters","kOil","kGas","kWater","source","allWithinLimits","reading","history","existingIdx","r","withinLimits","current","readings","kOils","kGases","kWaters","avg","arr","b","stdDev","mean","sum","val","avgOil","avgGas","avgWater","inRange","lastCalibrationDate","daysSinceCalibration","lastCal","meterName","currentKFactors","calibration","oil","gas","water","recent","previous","recentOOL","previousOOL","oilDev","gasDev","bsw","template","regex","daysRemaining","overdueDays","newAlerts","rule","params","note","severity","active","cutoff","before","onSelectEvent","setShowNewEventModal","deleteCalibrationEvent","setActiveTab","filteredEvents","getStatusIcon","getStatusStyle","getIconColor","calibrationFormData","updateCalibrationFormData","handleChange","field","formData","composition","setComposition","handleCompositionChange","newComposition","handleLoadRealData","realComp","c","timeoutId","somaMol","acc","mwMistura","controlItems","comp","item","isChecked","setRows","calculateDeltaHours","calculateHC","addRow","newRow","updated","removeRow","updateRow","updatedRow","totalMPFMOil","totalMPFMGas","totalMPFMHC","totalRefOil","totalRefGas","totalDuration","totals","tots","isKFactorInRange","min","massasData","calcDesvio","mpfm","_d","_c","_f","_e","_h","_g","allKFactorsOk","hcDesvio","envelope","setEnvelope","subseaOil","subseaGas","subseaTotal","topsideTotal","desvio","updateEnvelopeItem","allEnvelopeOk","generateId","getDesvioStatus","abs","selectedEvent","getGravidadeColor","gravidade","criticalCount","warningCount","alarm","onBack","setSelectedEvent","setCalibrationFormData","completeCalibrationStep","finalizeCalibration","setCurrentStep","isSaving","setIsSaving","handleSave","handleNextStep","handleFinalize","renderStepContent","totalItems","compliantItems","pendingItems","overdueItems","getStatusBadge","cat","sequence","dataOcorrencia","ambiente","dataBase","prazoRelatorioParcial","diasFinal","prazoRelatorioFinal","diasReparo","prazoReparo","tipoRelatorio","prazos","evento","entradaInicial","entrada","novaEntrada","diagnostico","contingencia","acao","novaAcao","acaoId","itemId","observacao","itensOK","itensPendentes","itensObrigatoriosPendentes","novoStatus","statusAnterior","ocorrencia","diasAntecedencia","hoje","prazo","diffDias","vencidos","proximos","events","setEvents","showNewEventModal","filterStatus","setFilterStatus","loadEvents","stats","eventosVencidos","eventosProximos","getStatusConfig","calcularDiasRestantes","dataPrazo","diasRestantes","isVencido","dPlus","onUpdate","prontidao","onCreate","setFormData","handleSubmit","cp","o","c1","c2","c3","e1","e2","e3","e4","nbfs","buf","enc","len","s","view","bufs","maxlen","content","out","widx","L","ridx","D","mixed","sgn","B","P_2","P_1","P","Q_2","Q_1","Q","A","q","opts","b2","time","dow","dout","date1904","epoch","w","V","fmt","ss0","ss","tt","outl","outstr","j","sfmt","mul","period","ee","fakee","$$","$1","$2","$3","aval","sign","den","rr","base","myn","myd","cc","dd","_frac","ffmt","ri","ff","oa","lres","rres","in_str","flen","lst","dt","hr","bt","ssm","nstr","jj","vv","myv","ostr","decpt","lasti","retval","thresh","f","l","lat","m1","m2","tbl","dateNF","match","Y","H","M","S","n","datestr","timestr","CRC32","signed_crc_table","table","T0","slice_by_16_tables","T","TT","T1","T2","T3","T4","T5","T6","T7","T8","T9","Ta","Tb","Tc","Td","Te","Tf","crc32_bstr","bstr","seed","C","crc32_buf","crc32_str","exports","namecmp","R","Z","dirname","p","filename","write_dos_date","hms","ymd","parse_dos_date","parse_extra_field","blob","flags","sz","tgt","fs","get_fs","file","parse_zip","parse_mad","mver","ssz","nmfs","difat_sec_cnt","dir_start","minifat_start","difat_start","fat_addrs","mv","check_get_mver","header","check_shifts","dir_cnt","sectors","sectorify","sleuth_fat","sector_list","make_sector_list","ENDOFCHAIN","files","Paths","FileIndex","FullPaths","read_directory","build_full_paths","HEADER_SIGNATURE","shift","nsectors","FI","FP","pl","dad","get_mfat_entry","payload","mini","MSSZ","cnt","sector","get_sector_list","chkd","buf_chain","modulus","addr","sl","seen","minifat_store","namelen","ctime","read_date","mtime","offset","read_file","read","init_cfb","cfb","root","seed_cfb","nm","rebuild_cfb","gc","_file","fullPaths","HEADER_CLSID","elt","_write","_opts","write_mad","write_zip","mini_size","fat_size","mini_cnt","mfat_cnt","fat_base","fat_cnt","difat_cnt","HEADER_SIG","chainit","consts","_nm","find","UCFullPaths","UCPaths","UCPath","write_file","a2s","write","_zlib","use_zlib","zlib","InflateRaw","InflRaw","_inflateRawSync","usz","_inflate","_deflateRawSync","_deflate","CLEN_ORDER","LEN_LN","DST_LN","bit_swap_8","use_typed_arrays","bitswap8","bit_swap_n","rev","read_bits_2","bl","h","read_bits_3","read_bits_4","read_bits_5","read_bits_7","read_bits_n","write_bits_3","write_bits_1","write_bits_8","write_bits_16","realloc","zero_fill_array","build_tree","clens","cmap","MAX","ccode","bl_count","ctree","cleni","fix_lmap","fix_dmap","dlens","_deflateRaw","DST_LN_RE","LEN_LN_RE","write_stored","boff","write_huff_fixed","addrs","hash","mlen","len_eb","dst_eb","off","dyn_lmap","dyn_dmap","dyn_cmap","dyn_len_1","dyn_len_2","dyn","_HLIT","_HDIST","_HCLEN","next_code","hcodes","h1","h2","inflate","outbuf","woff","OL","max_len_1","max_len_2","bits","code","dst","warn_or_throw","wrn","msg","fcnt","start_cd","csz","efsz","fcsz","EF","parse_local_file","meth","crc32","_csz","_usz","ef","cfb_add","cdirs","method","fp","fi","crcs","sz_cd","namebuf","ContentTypeMap","get_content_type","ext","write_base64_76","write_quoted_printable","text","encoded","split","si","tmp","parse_quoted_printable","di","line","oi","parse_mime","fname","cte","ctype","fdata","mboundary","boundary","start_di","u","ca","cstr","dispcnt","csl","qp","cfb_new","unsafe","fpath","cfb_del","cfb_mov","old_name","new_name","cfb_gc","url","ks","o2","obj","K","dnthresh","fixdate","debomit","wt","lower","zip","res","orig","ww","entities","g","xlsx","bs","av","oI","oR","oo","loc","hexstr","fld","pos","length","blksz","newblk","curbuf","endbuf","next","push","ba","cell","range","biff","rowstr","colstr","col","cs","ce","sheet","sheets","_ws","dense","ws","_R","_C","_origin","_range","__R","__C","cell_ref","cchCharacters","_null","run","rgsStrRun","z","dwSizeStrRun","iStyleRef","fX100","fInt","RK","d100","xColorType","nTS","bR","bG","bB","icv","rgb","font","grbit","ct","type2ct","f1","f2","f3","rels","rid","rId","relobj","targetmode","manifest","rdf","W","pid","Props","Custprops","BLACKLIST","entries","RE","PIDSI","hdr","piao","prop","pr","pio","pinfo","clsid","entries2","clsid2","ps0","ps1","cch","encoding","fHighByte","xlstr","otext","hl","Target","hashidx","F","Pretarget","ixfe","iSupBook","itabFirst","itabLast","rwFirst","rwLast","colFirst","colLast","wb","b8","sst","strs","b5","os","ixfeP","guts","target","merges","O","coldx","dbf_codepage_map","dbf_reverse_map","dbf_to_aoa","ft","memo","vfp","l7","nrow","fpos","rlen","current_cp","fields","hend","dbf_to_sheet","dbf_to_workbook","_RLEN","sheet_to_dbf","aoa","cols","hcnt","coltypes","colwidths","coldecimals","guess","_guess","hf","hb","rout","_n","_s","sylk_escapes","sylk_char_regex","sylk_char_fn","decode_sylk_char","newcc","sylk_to_aoa","sylk_to_aoa_str","records","rj","formats","next_cell_format","sht","rowinfo","colinfo","cw","Mval","rstr","record","RT","C_seen_K","C_seen_X","C_seen_S","C_seen_E","formula","shrbase","F_seen","sylk_to_sheet","aoasht","sylk_to_workbook","write_ws_cell_sylk","write_ws_cols_sylk","rec","write_ws_rows_sylk","sheet_to_sylk","preamble","RS","coord","dif_to_aoa","dif_to_aoa_str","metadata","dif_to_sheet","dif_to_workbook","sheet_to_dif","push_field","topic","push_value","decode","encode","eth_to_aoa","eth_to_sheet","eth_to_workbook","sep","meta","sheet_to_eth_data","sheet_to_eth","set_text_arr","prn_to_aoa_str","lines","guess_seps","guess_sep_weights","guess_sep","instr","dsv_to_sheet_str","sepcc","startcc","_re","finish_cell","outer","prn_to_sheet_str","prn_to_sheet","bytes","prn_to_workbook","sheet_to_prn","lotushopper","Enum","WK1Enum","lotus_to_workbook","lotus_to_workbook_buf","next_n","sidx","snames","realnames","refguess","sheetRows","tmpcell","WK3Enum","osheets","rnames","sheet_to_wk1","write_BOF_WK1","write_RANGE","max_R","write_INTEGER","write_NUMBER","write_LABEL","book_to_wk3","write_BOF_WK3","write_XFORMAT_SHEETNAME","wsidx","write_NUMBER_17","write_LABEL_16","wscnt","parse_RANGE","parse_cell","parse_LABEL","parse_INTEGER","parse_NUMBER","parse_FORMULA","wk1_fmla_to_csf","wk1_parse_rc","rel","FuncTab","BinOpTab","argc","argL","argR","parse_cell_3","parse_LABEL_16","parse_NUMBER_18","parse_NUMBER_17","v1","v2","parse_FORMULA_19","parse_NUMBER_25","parse_NUMBER_27","parse_FORMULA_28","parse_SHEETNAMECS","parse_SHEETNAMELP","parse_SHEETINFOQP","parse_XFORMAT","sitag","Password","Verifier","PasswordArray","PasswordDecoded","PasswordByte","Intermediate1","Intermediate2","Intermediate3","rtf_to_sheet","rtf_to_sheet_str","rowtf","rtfre","last_index","rtf_to_workbook","sheet_to_rtf","width","px","chr","coll","pt","NF","cellXfs","numFmtId","stFmtCode","bls","underline","family","bCharSet","sss","scheme","fill","fls","ixfeParent","ifmt","flow","border","style","defTableStyle","defPivotStyle","Themes","mdb","cm","comments","csize","bbox","fillopts","fillparm","fillxml","shadata","iauthor","lastauthor","ts","people","carr","rootid","tcopts","person","rfx","comment","vba","newpath","rcregex","rcbase","rcfunc","cRel","rRel","fstr","$0","$4","$5","delta","cl","rl","area","ixti","bitSemi","bitBaxcel","bitGoto","bitIf","iftab","cparams","cce","count","nameindex","rt","rgce","ptgs","sname","supbooks","XTI","ixtiraw","stack","nameidx","last_sp","sp","fflen","lbl","bookidx","externbook","ixtidata","lp","rp","parsedf","fnd","PtgNonDisp","_left","o1","o3","bf","rgcb","revarr","wch","margins","mode","defs","needed","cname","outlineprops","names","sview","oldt","oldv","height","_cell","rdata","_drawing","relc","miyRw","ncolspan","lcs","caddr","first","last","ncell","fBool","bError","isst","relId","tooltip","display","locidx","fAlwaysCalc","Workbook","last_seen","cap","safe","_good","N","codes","cn","Sheets","write_names","workbookPr","strName","itab","viz","vistab","hidden","xf","attr","marr","mi","_v","skip","DSEntries","SEntries","CEntries","Keys","DocSummaryRE","SummaryRE","CEntries2","wbpath","parts","HL","_WB","_sheet","MAX_ROWS","_sheets","_wb","blen","CS","footer","or_R","or_C","midx","elts","_t","Aelts","Aelti","element","get_computed_style","master_styles","write_text_p","null_cell_xml","covered_cell_xml","write_ws","ROWS","textp","_Fref","text_p","_tgt","write_automatic_styles_ods","cidx","colobj","fods","array","body","search","u8a","u8","exp","mantissa","ptr","varint","i32","num","proto","ai","fl","ias","ia","midata","aipayload","mid","chunks","frame","dv","pb","tri","SST","wide_offsets","last_offset","cell_storage","_dv","_last_offset","_cell_storage","celload","_celload","trunc","dependents","indices","old_content","raw1","x2","packet2","y2","indices_varint","ivi","mess","docroot","xi","packet","sheetrootref","cruidsref","oldbucket","_x","cruids","uuid","store","row_headers","row_header_ref","base_bucket","_bucket","col_header_ref","sstref","sentry","sx","sstroot","sxi","sstdata","newsst","sy","raw32","tile","tl","tileref","tentry","tx","tileroot","tiledata","rowload","R2","tilerow","ty","raw3","defaults","wbext","vbafmt","_sn","_i","wsrels","_type","need_vml","cf","needtc","oopts","ftype","bom","defval","raw","isempty","outi","counter","header_cnt","rs","FS","txt","endregex","cmds","js","JS","RC","sh","roll","vis","author","dynamic","rng","rngstr","XLSX.utils","resumoData","wsResumo","monitoringHeaders","monitoringRows","wsMonitoring","subseaHeaders","subseaRows","wsSubsea","topsideHeaders","topsideRows","wsTopside","separatorHeaders","separatorRows","wsSeparator","balanceHeaders","balanceRows","hcBalSS","hcBalTopSub","wsBalance","excelBuffer","XLSX.write","getStats","values","link","setStartDate","setEndDate","selectedVariables","setSelectedVariables","chartType","setChartType","categoryFilter","setCategoryFilter","filteredData","filteredVariables","toggleVariable","varId","statistics","handleExport","renderChart","selectedConfigs","commonProps","ChartComponent","variable","isSelected","isOutOfLimit","editingMeter","addMeter","updateMeter","errors","setErrors","validate","newErrors","handleClose","factory","__unused_webpack_module","assert","bytesToString","createValidAbsoluteUrl","getModificationDate","getUuid","getVerbosityLevel","isArrayBuffer","isArrayEqual","normalizeUnicode","objectFromMap","objectSize","setVerbosityLevel","shadow","string32","stringToBytes","stringToPDFString","stringToUTF8String","unreachable","utf8StringToString","warn","isNodeJS","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","MAX_IMAGE_SIZE_TO_CACHE","LINE_FACTOR","LINE_DESCENT_FACTOR","BASELINE_FACTOR","RenderingIntentFlag","AnnotationMode","AnnotationEditorPrefix","AnnotationEditorType","AnnotationEditorParamsType","PermissionFlag","TextRenderingMode","ImageKind","AnnotationType","AnnotationReplyType","AnnotationFlag","AnnotationFieldFlag","AnnotationBorderStyleType","AnnotationActionEventType","DocumentActionEventType","PageActionEventType","VerbosityLevel","CMapCompressionType","OPS","PasswordResponses","verbosity","level","cond","_isValidProtocol","baseUrl","dots","absoluteUrl","nonSerializable","BaseException","PasswordException","UnknownErrorException","details","InvalidPDFException","MissingPDFException","UnexpectedResponseException","FormatError","AbortException","MAX_ARGUMENT_COUNT","strBuf","chunkEnd","chunk","map","isLittleEndian","buffer8","isEvalSupported","FeatureTest","hexNumbers","Util","transform","minMax","temp","xt","yt","p1","p2","p3","p4","transpose","second","rect","rect1","rect2","xLow","xHigh","yLow","yHigh","x0","y0","x1","y1","x3","y3","tvalues","bounds","t1","t2","b2ac","sqrtb2ac","mt","jlen","PDFStringTranslateTable","decoder","buffer","ex","ii","arr1","arr2","PromiseCapability","__privateAdd","_settled","resolve","reject","__privateSet","reason","__privateGet","NormalizeRegex","NormalizationMap","AnnotationPrefix","src","task","docId","httpHeaders","withCredentials","password","rangeTransport","rangeChunkSize","worker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","maxImageSize","isOffscreenCanvasSupported","canvasMaxAreaInBytes","disableFontFace","fontExtraProperties","enableXfa","ownerDocument","disableRange","disableStream","disableAutoFetch","pdfBug","useSystemFonts","useWorkerFetch","canvasFactory","filterFactory","styleElement","transportFactory","workerParams","fetchDocParams","transportParams","workerIdPromise","networkStreamPromise","networkStream","workerId","messageHandler","transport","_PDFDocumentLoadingTask","__privateWrapper","_docId","initialData","progressiveDone","contentDispositionFilename","begin","loaded","total","pdfInfo","jsArr","pageNumber","keepLoadedFonts","pageIndex","pageInfo","_PDFPageProxy_instances","_delayedCleanupTimeout","_pendingCleanup","rotation","offsetX","offsetY","dontFlip","intent","intentArgs","canvasContext","viewport","annotationMode","background","optionalContentConfigPromise","annotationCanvasMap","pageColors","printAnnotationStorage","__privateMethod","abortDelayedCleanup_fn","intentState","intentPrint","complete","internalRenderTask","tryCleanup_fn","renderTask","transparency","optionalContentConfig","operatorListChanged","opListTask","includeMarkedContent","disableNormalization","textContent","xfa","readableStream","pump","reader","done","waitOn","resetStats","cacheKey","operatorListChunk","renderingIntent","annotationStorageSerializable","transfers","force","delay","curCacheKey","curIntentState","delayed","renderTasks","operatorList","_listeners","_deferred","transfer","require","pdfjsFilePath","otherUrl","other","wrapper","port","_workerPorts","workerSrc","terminateEarly","onWorkerError","sendTest","testObj","WorkerMessageHandler","workerHandler","cachedPort","loadingTask","_WorkerTransport_instances","_methodPromises","_pageCache","_pagePromises","_passwordCapability","isOpList","page","terminated","sink","evt","readyReason","headersCapability","fullReader","rangeReader","exception","updatePassword","exportedData","exportedError","inspectFont","imageData","pageProxy","cachedPromise","promise","cacheSimpleMethod_fn","results","_PDFObjects_instances","_objs","objId","callback","ensureObj_fn","_internalRenderTask","extraDelay","separateAnnots","_InternalRenderTask","objs","commonObjs","useRequestAnimationFrame","_canvasInUse","__w_pdfjs_require__","_util","_editor","_murmurhash","SerializableEmpty","AnnotationStorage","_AnnotationStorage_instances","_modified","_storage","defaultValue","modified","setModified_fn","PrintAnnotationStorage","hasBitmap","serialized","parent","_serializable","clone","_tools","_display_utils","_AnnotationEditor","parameters","_AnnotationEditor_instances","_altText","_altTextDecorative","_altTextButton","_altTextTooltip","_altTextTooltipTimeout","_keepAspectRatio","_resizersDiv","_boundFocusin","_boundFocusout","_hasBeenClicked","_isEditing","_isInEditMode","_isDraggable","_zIndex","pageWidth","pageHeight","pageX","pageY","editor","fakeEditor","FakeEditor","l10n","_value","mime","translate_fn","parentWidth","parentHeight","bx","by","getBaseTranslation_fn","_AnnotationEditor_static","rotatePoint_fn","parentScale","scaledWidth","scaledHeight","widthPercent","heightPercent","altText","setAltTextButtonState_fn","decorative","isMac","setUpDragSession_fn","shiftX","shiftY","isForCopying","uiManager","createResizers_fn","aspectRatio","_borderLineWidth","angle","getRotationMatrix_fn","classes","div","resizerPointerdown_fn","boundResizerPointermove","resizerPointermove_fn","savedDraggable","pointerMoveOptions","savedX","savedY","savedWidth","savedHeight","savedParentCursor","savedCursor","pointerUpCallback","newX","newY","newWidth","newHeight","minWidth","minHeight","round","rotationMatrix","transf","invRotationMatrix","invTransf","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","oldDiag","button","DELAY_TO_SHOW_TOOLTIP","pointerMoveCallback","AnnotationEditor","bindEvents","opacityToHex","IdManager","_id","_ImageManager","_ImageManager_instances","_baseId","_cache","svg","ctx","image","lastModified","get_fn","rawData","response","mustRemoveAspectRatioPromise","fileReader","imageElement","imagePromise","ImageManager","CommandManager","maxSize","_commands","_locked","_maxSize","_position","cmd","undo","mustExec","overwriteIfSameType","keepUndo","save","KeyboardManager","callbacks","_KeyboardManager_instances","keys","isMacKey","self","serialize_fn","bubbles","checker","_ColorManager","RGB","ColorManager","_AnnotationEditorUIManager","container","viewer","altTextManager","eventBus","pdfDocument","_AnnotationEditorUIManager_instances","_activeEditor","_allEditors","_allLayers","_altTextManager","_annotationStorage","_commandManager","_currentPageIndex","_deletedAnnotationsElementIds","_draggingEditors","_editorTypes","_editorsToRescale","_filterFactory","_idManager","_isEnabled","_isWaiting","_lastActiveElement","_mode","_selectedEditors","_pageColors","_boundBlur","_boundFocus","_boundCopy","_boundCut","_boundPaste","_boundKeydown","_boundOnEditingAction","_boundOnPageChanging","_boundOnScaleChanging","_boundOnRotationChanging","_previousStates","_translation","_translationTimeoutId","_container","_viewer","arrowChecker","activeElement","small","big","removeKeyboardManager_fn","removeFocusManager_fn","layer","layerX","layerY","pagesRotation","lastEditor","lastActiveElement","addKeyboardManager_fn","addCopyPasteListeners_fn","removeCopyPasteListeners_fn","editors","clipboardData","editorType","newEditors","deserializedEditor","addEditorToLayer_fn","selectEditors_fn","addFocusManager_fn","dispatchUpdateStates_fn","isEmpty_fn","types","dispatchUpdateUI_fn","editId","disableAll_fn","enableAll_fn","mustWait","annotationElementId","ed","noCommit","totalX","totalY","TIME_TO_WAIT","mustBeAddedInUndoStack","move","newPageIndex","savedPageIndex","AnnotationEditorUIManager","deprecated","getColorValues","getCurrentTransform","getCurrentTransformInverse","getFilenameFromUrl","getPdfFilenameFromUrl","getRGB","getXfaPageViewport","isDataScheme","isPdfFile","isValidFetchUrl","loadScript","noContextMenu","setLayerDimensions","_base_factory","SVG_NS","_PixelsPerInch","PixelsPerInch","DOMFilterFactory","_DOMFilterFactory_instances","__cache","__defs","_document","_hcmFilter","_hcmKey","_hcmUrl","_hcmHighlightFilter","_hcmHighlightKey","_hcmHighlightUrl","maps","cache_get","tableR","tableG","tableB","mapR","mapG","mapB","bufferR","bufferG","bufferB","filter","createFilter_fn","addTransferMapConversion_fn","fgColor","bgColor","fgRGB","getRGB_fn","bgRGB","defs_get","addGrayConversion_fn","getSteps","newFgColor","newBgColor","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","keepHCM","feColorMatrix","appendFeFunc_fn","feComponentTransfer","feFunc","rTable","gTable","bTable","DOMCanvasFactory","canvas","fetchData","asTypedArray","request","DOMCMapReaderFactory","compressionType","DOMStandardFontDataFactory","DOMSVGFactory","PageViewport","viewBox","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","topLeft","bottomRight","RenderingCancelledException","onlyStripPath","defaultFilename","reURI","reFilename","splitURI","suggestedFilename","StatTimer","outBuf","longest","protocol","removeScriptElement","script","pdfDateStringRegex","PDFDateString","matches","hour","minute","universalTimeRelation","offsetHour","offsetMinute","xfaPage","colorRGB","span","computedColor","mustFlip","mustRotate","useRound","widthStr","heightStr","BaseFilterFactory","BaseCanvasFactory","canvasAndContext","BaseCMapReaderFactory","isCompressed","BaseStandardFontDataFactory","BaseSVGFactory","skipDimensions","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","FontLoader","_systemFonts","nativeFontFace","styleSheet","loadedName","fontFace","hasFonts","supported","completeRequest","loadingRequests","otherRequest","testFont","int32","spliceString","remove","insert","chunk1","chunk2","called","isFontReady","loadTestFontId","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","FontFaceObject","translatedData","css","character","jsBuf","NodeFilterFactory","NodeCanvasFactory","NodeCMapReaderFactory","NodeStandardFontDataFactory","_pattern_helper","_image_utils","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","EXECUTION_TIME","EXECUTION_STEPS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","mirrorContextOperations","destCtx","cp1x","cp1y","cp2x","cp2y","CachedCanvases","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","scaleX","scaleY","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","POINT_TYPES","width1","points","j0","lineSize","elem","mask","p0","pp","CanvasExtraState","box","pathType","xStrokePad","yStrokePad","intersect","putBinaryImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","srcPos","destPos","dest","thisChunkHeight","elemsInThisChunk","srcLength","dest32","dest32DataLength","fullSrcDiff","white","black","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","properties","resetCtxToDefault","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","subtype","backdrop","layerOffsetX","layerOffsetY","maskOffsetX","maskOffsetY","hasBackdrop","composeFn","chunkSize","chunkHeight","composeSMask","smask","layerBox","layerWidth","layerHeight","getImageSmoothingEnabled","interpolate","actualScale","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","_CanvasGraphics","canvasCtx","markedContentStack","_CanvasGraphics_instances","fallback","savedFillStyle","transparentCanvas","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","fnId","depObjId","objsPool","restoreInitialState_fn","drawFilter_fn","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","tmpCanvas","tmpCtx","fillColor","isPatternFill","currentTransform","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","cord1","cord2","drawnWidth","drawnHeight","fillCanvas","fillCtx","inverse","dashArray","dashPhase","flatness","states","inSMaskMode","cacheId","scratchCanvas","dirtyBox","suspendedCtx","old","ops","startX","startY","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","strokeColor","needRestore","paths","leading","fontRefName","fontObj","typeface","bold","italic","browserFontSize","rise","patternTransform","textRenderingMode","fontSize","fillStrokeMode","isAddToPathSet","patternFill","addToPath","enabled","glyphs","fontSizeScale","charSpacing","wordSpacing","fontDirection","textHScale","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","pattern","lineWidth","chars","glyph","restoreNeeded","accent","scaledX","scaledY","vmetric","vx","vy","measuredWidth","characterScaleX","scaledAccentX","scaledAccentY","charWidth","fontMatrix","isTextInvisible","spacingLength","xWidth","yWidth","llx","lly","urx","ury","IR","baseTransform","canvasGraphicsFactory","matrix","inv","currentCtx","canvasBounds","groupCtx","currentMtx","hasOwnCanvas","viewportScale","canvasWidth","canvasHeight","skewX","skewY","positions","trans","images","bitmap","imgToPaint","clipBox","isEmpty","absDet","normX","normY","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","hcmFilterId","savedFilter","CanvasGraphics","op","getShadingPattern","PathType","applyBoundingBox","region","BaseShadingPattern","RadialAxialShadingPattern","grad","colorStop","owner","ownerBBox","domMatrix","drawTriangle","coords","rowSize","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","verticesPerRow","MeshShadingPattern","combinedScale","backgroundColor","cachedCanvases","boundsWidth","boundsHeight","paddedWidth","paddedHeight","matrixScale","temporaryPatternCanvas","DummyShadingPattern","PaintType","_TilingPattern","xstep","ystep","paintType","tilingType","curMatrixScale","dimx","dimy","graphics","adjustedX0","adjustedY0","adjustedX1","adjustedY1","realOutputSize","bboxWidth","bboxHeight","cssColor","TilingPattern","convertBlackAndWhiteToRGBA","convertToRGBA","grayToRGBA","convertRGBToRGBA","nonBlackColor","inverseDecode","zeroMapping","oneMapping","widthInSource","widthRemainder","len32","src32","s1","s2","s3","GlobalWorkerOptions","CallbackKind","StreamKind","wrapReason","MessageHandler","sourceName","targetName","comObj","_MessageHandler_instances","processStreamMessage_fn","callbackId","capability","cbSourceName","cbTargetName","createStreamSink_fn","actionName","handler","ah","queueingStrategy","streamId","controller","startCapability","pullCapability","cancelCapability","streamSink","lastDesiredSize","streamController","deleteStreamController_fn","Metadata","parsedData","_metadataMap","_data","INTERNAL","OptionalContentGroup","_visible","internal","visible","OptionalContentConfig","_OptionalContentConfig_instances","_cachedGetHash","_groups","_initialHash","_order","on","evaluateVisibilityExpression_fn","operator","PDFDataTransportStream","pdfDataRangeTransport","found","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","stream","requestCapability","_network_utils","createFetchOptions","abortController","createHeaders","getArrayBuffer","PDFFetchStream","PDFFetchStreamReader","PDFFetchStreamRangeReader","getResponseHeader","allowRangeRequests","suggestedLength","createResponseStatusError","extractFilenameFromHeader","validateRangeRequestCapabilities","validateResponseStatus","_content_disposition","isHttp","returnValues","contentDisposition","getFilenameFromContentDispositionHeader","needsEncodingFixup","toParamRegExp","rfc2616unquote","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","textdecode","contentDispositionStr","iter","quot","part","quotindex","extvalue","encodingend","charset","hex","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","xhr","NetworkManager","xhrId","pendingRequest","xhrStatus","rangeHeader","PDFNetworkStream","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","manager","fullRequestXhrId","fullRequestXhr","fileUriRegex","parseUrl","sourceUrl","require$$2","parsedUrl","PDFNodeStream","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","BaseRangeReader","createRequestOptions","handleResponse","http","require$$3","https","require$$4","stat","SVG_DEFAULTS","XML_NS","XLINK_NS","createObjectURL","contentType","forceDataSchema","digits","b1","b3","d1","d2","d3","d4","convertImgDataToPng","PNG_HEADER","CHUNK_WRAPPER_SIZE","crcTable","crc","writePngChunk","adler32","deflateSync","literals","deflateSyncUncompressed","output","maxBlockLength","deflateBlocks","idat","pi","adler","kind","isMask","bitDepth","colorType","offsetLiterals","offsetBytes","ihdr","pngLength","SVGExtraState","opListToTree","opList","opTree","opListElement","pf","pm","clipCount","maskCount","shadingCount","SVGGraphics","items","transformMatrix","svgElement","operatorIdMapping","opTreeElement","lineWidthScale","textMatrix","strokeAlpha","fillAlpha","tilingId","tx0","ty0","tx1","ty1","xscale","yscale","txstep","tystep","tiling","shadingId","colorStops","gradient","point0","point1","focalPoint","circlePoint","focalRadius","circleRadius","stop","clipId","clipPath","clipElement","textRise","imgSrc","cliprect","imgEl","definitions","rootGroup","clipGroup","XfaText","walk","node","child","renderTextLayer","updateTextLayer","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_SIZE","DEFAULT_FONT_ASCENT","ascentCache","getCtx","getAscent","fontFamily","cachedAscent","metrics","ascent","descent","ratio","pixels","appendText","geom","textDiv","textDivProperties","fontHeight","fontAscent","left","top","scaleFactorStr","divStyle","shouldScaleText","absScaleX","absScaleY","layout","prevFontSize","prevFontFamily","render","textDivs","TextLayerRenderTask","textContentSource","textContentItemsStr","styleCache","br","visibility","scaleFactor","mustRescale","_freetext","_ink","_stamp","_AnnotationEditorLayer","accessibilityManager","annotationLayer","_AnnotationEditorLayer_instances","_accessibilityManager","_allowClick","_annotationLayer","_boundPointerup","_boundPointerdown","_editors","_hadPointerDown","_isCleaningUp","_isDisabling","_uiManager","editorTypes","cleanup_fn","isCommitting","createAndAddNewEditor_fn","annotationElementIds","editables","editable","hiddenAnnotationIds","getCenterPoint_fn","createNewEditor_fn","isCentered","AnnotationEditorLayer","_annotation_layer","_FreeTextEditor","_FreeTextEditor_instances","_boundEditorDivBlur","_boundEditorDivFocus","_boundEditorDivInput","_boundEditorDivKeydown","_color","_content","_editorDivId","_fontSize","_initialData","updateFontSize_fn","updateColor_fn","cheatInitialRect_fn","savedText","newText","extractText_fn","setText","setContent_fn","setEditorDimensions_fn","baseX","baseY","position","posX","posY","fontColor","textPosition","hasElementChanged_fn","setFontsize","savedFontsize","savedColor","divs","currentLayer","savedDisplay","FreeTextEditor","_annotation_storage","_scripting_utils","_displayL10n_utils","_xfa_layer","DEFAULT_TAB_INDEX","GetElementsByNameSet","getRectDims","AnnotationElementFactory","LinkAnnotationElement","TextAnnotationElement","TextWidgetAnnotationElement","RadioButtonWidgetAnnotationElement","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","_AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","_hasBorder","titleObj","contentsObj","richText","horizontalRadius","verticalRadius","radius","elementWidth","elementHeight","setColor","jsName","styleName","colorArray","actions","jsEvent","commonActions","storedData","detail","eventProxy","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","svgFactory","rectWidth","rectHeight","popup","skipId","fieldObj","exportValues","exportValue","domElement","triggers","_LinkAnnotationElement_instances","linkService","isBound","bindSetOCGState_fn","destination","setInternalLink_fn","attachment","resetForm","otherClickAction","resetFormFields","resetFormRefs","include","allFields","fieldIds","fieldName","allIds","isWin","elementData","baseName","eventName","valueGetter","getter","TEXT_ALIGNMENT","computedFontSize","BORDER_SIZE","roundToOneDecimal","numberOfLines","lineHeight","isRequired","keyInStorage","maxLen","fieldFormattedValues","blurListener","formattedValue","charLimit","commitKey","_blurListener","selectionStart","selectionEnd","selStart","selEnd","combWidth","checked","checkbox","curChecked","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","option","optionElement","removeEmptyEntry","noneOptionElement","getValue","isExport","multiple","selectedValues","getItems","displayValue","selectChild","elements","PopupElement","elementIds","modificationDate","parentRect","open","_PopupElement_instances","_dateTimePromise","_boundKeyDown","keyDown_fn","_boundHide","hide_fn","_boundShow","show_fn","_boundToggle","toggle_fn","_contentsObj","_elements","_parent","_parentRect","_pinned","_popup","_rect","_richText","_titleObj","_wasVisible","dateObject","baseColor","localized","contents","useParentRect","normalizedRect","popupLeft","popupTop","dir","lineSpan","_line","_square","square","_circle","circle","_polyline","coordinate","polyline","_polylines","inkList","_FileAttachmentAnnotationElement_instances","_trigger","trigger","download_fn","AnnotationLayer","_AnnotationLayer_instances","_annotationCanvasMap","_editableAnnotations","annotations","popupToElements","elementParams","isPopupAnnotation","rendered","appendElement_fn","setAnnotationCanvasMap_fn","contentElement","firstChild","makeColorComp","scaleAndClamp","ColorConverters","G","components","getL10nFallback","DEFAULT_L10N_STRINGS","formatL10nValue","all","NullL10n","_xfa_text","XfaLayer","html","attributes","isHTMLAnchorElement","rootHtml","rootDiv","childHtml","el","_InkEditor","_InkEditor_instances","_baseHeight","_baseWidth","_boundCanvasPointermove","_boundCanvasPointerleave","_boundCanvasPointerup","_boundCanvasPointerdown","_currentPath2D","_disableEditing","_hasSomethingToDraw","_isCanvasInitialized","_observer","_realWidth","_realHeight","_requestFrameCallback","updateThickness_fn","updateOpacity_fn","createCanvas_fn","createObserver_fn","setCanvasDims_fn","fitToContent_fn","startDrawing_fn","draw_fn","endDrawing_fn","getInitialBBox_fn","redraw_fn","roundedWidth","roundedHeight","setScaleFactor_fn","bezier","_InkEditor_static","fromPDFCoordinates_fn","p10","p11","p20","p21","p30","p31","path2D","buildPath2D_fn","getBbox_fn","serializePaths_fn","thickness","savedThickness","savedOpacity","parentRotation","setStroke_fn","drawPoints_fn","lastX","lastY","currentPath","makeBezierCurve_fn","endPath_fn","lastPoint","stopDrawing_fn","generateBezierPoints_fn","xy","lastPoints","prevX","prevY","bezierPoints","control1","control2","updateTransform_fn","getPadding_fn","scaleFactorW","scaleFactorH","toPDFCoordinates_fn","p40","p41","xMin","xMax","yMin","yMax","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","InkEditor","_StampEditor","_StampEditor_instances","_bitmap","_bitmapId","_bitmapPromise","_bitmapUrl","_bitmapFile","_canvas","_resizeTimeoutId","_isSvg","_hasBeenAddedInUndoStack","getBitmap_fn","bitmapUrl","bitmapId","isSvg","accessibilityData","serializeBitmap_fn","prevData","getBitmapFetched_fn","fromId","getBitmapDone_fn","MAX_RATIO","factor","drawBitmap_fn","setDimensions_fn","scaleBitmap_fn","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","toUrl","StampEditor","cachedModule","_annotation_editor_layer","_worker_options","_api","_text_layer","pdfjsLib.GlobalWorkerOptions","pdfjsLib.version","fileName","upperText","upperFileName","fileMatch","contentMatch","numStr","oilMatch","gasMatch","waterMatch","massPattern","masses","hc","hcMatch","sampleMatch","sampleId","density","viscosity","pourPoint","sulphur","saltContent","reidVaporPressure","h2s","co2","waterContent","calNoMatch","calibrationNo","endDateMatch","pressureMpfm","pressureSep","tempMpfm","tempSep","kOilNew","kGasNew","kWaterNew","mpfmOil","mpfmGas","mpfmWater","sepOil","sepGas","sepWater","arrayBuffer","pdf","pdfjsLib.getDocument","fullText","pageText","importMonitoringData","setFiles","setResults","isProcessing","setIsProcessing","isDragOver","setIsDragOver","fileInputRef","useRef","handleDragOver","handleDragLeave","handleDrop","droppedFiles","handleFileSelect","selectedFiles","removeFile","processFiles","parseResults","importData","successResults","dailyDataByDate","existing","subsea","topside","subOil","subGas","subWater","topOil","topGas","topWater","sepHC","successCount","errorCount","columns","mimeType","csv","exportData","json","report","exportType","setExportType","setFormat","isExporting","setIsExporting","addCalibrationEvent","selectedMeterId","setSelectedMeterId","calibrationType","setCalibrationType","serviceOrder","setServiceOrder","initialized","showMeterModal","showImportModal","showExportModal","handleCloseMeterModal","ReactDOM"],"mappings":"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E,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,cAAe,EAAEC,CAAiB,EACrD,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,IAAe,CAAE,EAAE,IAAI,EACvB,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iBACL,IAAK,kBACL,IAAK,cACL,IAAK,qBACL,IAAK,SACL,IAAK,cACL,IAAK,WACL,IAAK,WACL,IAAK,eACL,IAAK,eACL,IAAK,iBACL,IAAK,eACL,IAAK,kBACL,IAAK,qBACL,IAAK,aACL,IAAK,YACL,IAAK,YACL,IAAK,gBACL,IAAK,cACL,IAAK,eACL,IAAK,kBACL,IAAK,oBACL,IAAK,kBACL,IAAK,iBACL,IAAK,UACL,IAAK,YACL,IAAK,YACL,IAAK,aACL,IAAK,cACL,IAAK,UACL,IAAK,SACL,IAAK,cACL,IAAK,UACL,IAAK,oBACL,IAAK,kBACL,IAAK,QACL,IAAK,aACL,IAAK,YACL,IAAK,cACL,IAAK,mBACL,IAAK,oBACL,IAAK,cACL,IAAK,cACL,IAAK,mBACL,IAAK,eACL,IAAK,aACL,IAAK,eACL,IAAK,gBACL,IAAK,aACL,IAAK,cACL,IAAK,cACL,IAAK,iBACL,IAAK,YACL,IAAK,cACL,IAAK,eACL,IAAK,aACL,IAAK,aACL,IAAK,gBACL,IAAK,eACL,IAAK,kBACL,IAAK,gBACL,IAAK,qBACL,IAAK,WACL,IAAK,OACL,IAAK,gBACL,IAAK,kBACL,IAAK,aACL,IAAK,aACL,IAAK,eACL,IAAK,iBACL,IAAK,cACL,IAAK,iBACL,IAAK,qBACL,IAAK,YACL,IAAK,oBACL,IAAK,WACL,IAAK,cACL,IAAK,iBACL,IAAK,WACL,IAAK,eACL,IAAK,gBACL,IAAK,gBACL,IAAK,mBACL,IAAK,iBACL,IAAK,eACL,IAAK,cACL,IAAK,YACL,IAAK,kBACL,IAAK,oBACL,IAAK,iBACL,IAAK,YACL,IAAK,aACL,IAAK,oBACL,IAAK,aACL,IAAK,eACL,IAAK,iBACL,IAAK,kBACL,IAAK,eACL,IAAK,gBACL,IAAK,gBACL,IAAK,qBACL,IAAK,mBACL,IAAK,qBACL,IAAK,yBACL,IAAK,cACL,IAAK,aACL,IAAK,mBACL,IAAK,sBACL,IAAK,eACL,IAAK,eACL,IAAK,gBACL,IAAK,cACL,IAAK,kBACL,IAAK,cACL,IAAK,gBACL,IAAK,kBACL,IAAK,2BACL,IAAK,eACL,IAAK,iBACL,IAAK,aACL,IAAK,iBACL,IAAK,YACL,IAAK,mBACL,IAAK,cACL,IAAK,wBACL,IAAK,kBACL,IAAK,qBACL,IAAK,kBACL,IAAK,kBACL,IAAK,kBACL,IAAK,qBACL,IAAK,aACL,IAAK,iBACL,IAAK,eACL,IAAK,mBACL,IAAK,aACL,IAAK,eACL,IAAK,kBACL,IAAK,gBACL,IAAK,gBACL,IAAK,kBACL,IAAK,kBACL,IAAK,gBACL,IAAK,iBACL,IAAK,uBACL,IAAK,0BACL,IAAK,iBACL,IAAK,eACL,IAAK,YACL,IAAK,cACL,IAAK,aACL,IAAK,iBACL,IAAK,kBACL,IAAK,kBACL,IAAK,gBACL,IAAK,kBACL,IAAK,gBACL,IAAK,gBACL,IAAK,qBACL,IAAK,cACL,IAAK,mBACL,IAAK,uBACL,IAAK,mBACL,IAAK,kBACL,IAAK,mBACL,IAAK,cACL,IAAK,iBACL,IAAK,kBACL,IAAK,eACL,IAAK,eACL,IAAK,oBACL,IAAK,sBACL,IAAK,sBACL,IAAK,mBACL,IAAK,qBACL,IAAK,qBACL,IAAK,gBACL,IAAK,aACL,IAAK,YACL,IAAK,cACL,IAAK,mBACL,IAAK,gBACL,IAAK,wBACL,IAAK,qBACL,IAAK,SACL,IAAK,kBACL,IAAK,gBACL,IAAK,kBACL,IAAK,gBACL,IAAK,gBACL,IAAK,mBACL,IAAK,mBACL,IAAK,oBACL,IAAK,eACL,IAAK,oBACL,IAAK,uBACL,IAAK,cACL,IAAK,WACL,IAAK,WACL,IAAK,aACL,IAAK,aACL,IAAK,eACL,IAAK,eACL,IAAK,cACL,IAAK,qBACL,IAAK,yBACL,IAAK,mBACL,IAAK,WACL,IAAK,iBACL,IAAK,iBACL,IAAK,eACL,IAAK,YACL,IAAK,mBACL,IAAK,mBACL,IAAK,iBACL,IAAK,kBACL,IAAK,oBACL,IAAK,mBACL,IAAK,cACL,IAAK,gBACL,IAAK,WACL,IAAK,YACL,IAAK,cACL,IAAK,cACL,IAAK,mBACL,IAAK,oBACL,IAAK,iBACL,IAAK,YACL,IAAK,SACL,IAAK,SACL,IAAK,gBACL,IAAK,mBACL,IAAK,iBACL,IAAK,WACL,IAAK,gBACL,IAAK,gBACL,IAAK,cACL,IAAK,iBACL,IAAK,iBACL,IAAK,oBACL,IAAK,sBACL,IAAK,aACL,IAAK,cACL,IAAK,cACL,IAAK,oBACL,IAAK,eACL,IAAK,gBACL,IAAK,mBACP,EACI,KAAO,CACT,EAAG,QACH,EAAG,KACH,EAAG,OACH,EAAG,UACH,EAAG,MACH,EAAG,UACH,EAAG,MACH,EAAG,MACH,EAAG,MACH,EAAG,SACH,GAAI,KACJ,GAAI,MACJ,GAAI,QACJ,GAAI,SACJ,GAAI,QACJ,GAAI,MACJ,GAAI,MACJ,GAAI,MACJ,GAAI,OACJ,GAAI,KACJ,GAAI,OACJ,GAAI,MACJ,GAAI,KACJ,GAAI,QACJ,GAAI,MACJ,GAAI,MACJ,GAAI,OACJ,GAAI,QACJ,GAAI,SACJ,GAAI,QACJ,GAAI,OACJ,GAAI,MACJ,GAAI,MACJ,GAAI,QACJ,GAAI,OACJ,GAAI,QACJ,GAAI,MACJ,GAAI,KACJ,GAAI,MACJ,GAAI,MACJ,GAAI,SACJ,GAAI,OACJ,GAAI,WACJ,GAAI,OACJ,GAAI,OACJ,GAAI,SACJ,GAAI,MACJ,GAAI,OACJ,GAAI,OACJ,GAAI,SACJ,GAAI,QACJ,GAAI,SACJ,GAAI,SACJ,GAAI,OACJ,GAAI,OACJ,GAAI,SACJ,GAAI,KACJ,GAAI,KACJ,GAAI,OACJ,GAAI,MACJ,GAAI,OACJ,GAAI,OACJ,GAAI,MACJ,GAAI,OACJ,GAAI,QACJ,GAAI,OACJ,GAAI,OACJ,GAAI,MACJ,GAAI,QACJ,GAAI,OACJ,GAAI,UACJ,GAAI,OACJ,GAAI,SACJ,GAAI,SACJ,GAAI,MACJ,GAAI,QACJ,GAAI,OACJ,GAAI,UACJ,GAAI,SACJ,GAAI,SACJ,GAAI,SACJ,GAAI,WACJ,GAAI,SACJ,GAAI,YACJ,GAAI,QACJ,GAAI,OACJ,GAAI,OACJ,GAAI,OACJ,GAAI,WACJ,GAAI,SACJ,GAAI,QACJ,GAAI,UACJ,GAAI,SACJ,GAAI,YACJ,GAAI,cACJ,GAAI,YACJ,GAAI,SACJ,GAAI,QACJ,GAAI,OACJ,GAAI,OACJ,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,cACL,IAAK,WACL,IAAK,YACL,IAAK,MACL,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,OACL,IAAK,UACL,IAAK,aACL,IAAK,OACL,IAAK,QACL,IAAK,YACL,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,SACL,IAAK,WACL,IAAK,UACL,IAAK,IACL,IAAK,IACL,IAAK,QACL,IAAK,SACL,IAAK,QACL,IAAK,UACL,IAAK,QACL,IAAK,WACL,IAAK,SACL,IAAK,OACL,IAAK,YACL,IAAK,YACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,WACL,IAAK,WACL,IAAK,OACL,IAAK,UACL,IAAK,WACL,IAAK,cACL,IAAK,iBACL,IAAK,gBACL,IAAK,iBACL,IAAK,WACL,IAAK,cACL,IAAK,iBACL,IAAK,iBACL,IAAK,aACL,IAAK,QACL,IAAK,UACL,IAAK,WACL,IAAK,QACL,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,aACL,IAAK,MACL,IAAK,QACL,IAAK,QACL,IAAK,OACL,IAAK,WACL,IAAK,UACL,IAAK,OACL,IAAK,UACL,IAAK,YACL,IAAK,UACL,IAAK,OACL,IAAK,UACL,IAAK,UACL,IAAK,OACL,IAAK,WACL,IAAK,gBACL,IAAK,aACL,IAAK,eACL,IAAK,WACL,IAAK,YACL,IAAK,WACL,IAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,UACL,IAAK,QACL,IAAK,QACL,IAAK,YACL,IAAK,UACL,IAAK,aACL,IAAK,aACL,IAAK,WACL,IAAK,QACL,IAAK,UACL,IAAK,WACL,IAAK,QACL,IAAK,SACL,IAAK,OACL,IAAK,OACL,IAAK,UACL,IAAK,YACL,IAAK,MACL,IAAK,OACL,IAAK,OACL,IAAK,UACL,IAAK,UACL,IAAK,QACL,IAAK,MACL,IAAK,OACL,IAAK,UACL,IAAK,SACL,IAAK,WACL,IAAK,SACL,IAAK,aACL,IAAK,OACL,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,OACL,IAAK,gBACL,IAAK,WACL,IAAK,aACL,IAAK,cACL,IAAK,gBACL,IAAK,kBACL,IAAK,gBACL,IAAK,WACL,IAAK,OACL,IAAK,QACL,IAAK,aACL,IAAK,KACL,IAAK,QACL,IAAK,SACL,IAAK,YACL,IAAK,cACL,IAAK,iBACL,IAAK,OACL,IAAK,gBACL,IAAK,WACL,IAAK,cACL,IAAK,WACL,IAAK,iBACL,IAAK,aACL,IAAK,YACL,IAAK,eACL,IAAK,eACL,IAAK,cACL,IAAK,aACL,IAAK,cACL,IAAK,eACL,IAAK,SACL,IAAK,WACL,IAAK,UACL,IAAK,UACL,IAAK,YACL,IAAK,UACL,IAAK,SACL,IAAK,SACL,IAAK,aACL,IAAK,YACL,IAAK,OACL,IAAK,YACL,IAAK,QACL,IAAK,OACL,IAAK,SACL,IAAK,YACL,IAAK,QACL,IAAK,YACL,IAAK,WACL,IAAK,UACL,IAAK,cACL,IAAK,cACL,IAAK,SACL,IAAK,eACL,IAAK,WACL,IAAK,YACL,IAAK,UACL,IAAK,WACL,IAAK,cACL,IAAK,MACL,IAAK,SACL,IAAK,UACL,IAAK,QACL,IAAK,UACL,IAAK,UACL,IAAK,WACL,IAAK,WACL,IAAK,UACL,IAAK,SACL,IAAK,QACL,IAAK,WACL,IAAK,QACL,IAAK,YACL,IAAK,UACL,IAAK,MACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,UACL,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,WACL,IAAK,aACL,IAAK,cACL,IAAK,OACL,IAAK,WACL,IAAK,OACL,IAAK,gBACL,IAAK,YACL,IAAK,cACL,IAAK,QACL,IAAK,iBACL,IAAK,kBACL,IAAK,kBACL,IAAK,iBACL,IAAK,UACL,IAAK,UACL,IAAK,WACL,IAAK,QACL,IAAK,UACL,IAAK,aACL,IAAK,eACL,IAAK,oBACL,IAAK,QACL,IAAK,UACL,IAAK,aACL,IAAK,eACL,IAAK,QACL,IAAK,cACL,IAAK,cACL,IAAK,WACL,IAAK,eACL,IAAK,YACL,IAAK,WACL,IAAK,WACL,IAAK,OACL,IAAK,OACL,IAAK,UACL,IAAK,QACL,IAAK,SACL,IAAK,OACL,IAAK,WACL,IAAK,gBACL,IAAK,YACL,IAAK,kBACL,IAAK,eACL,IAAK,gBACL,IAAK,mBACL,IAAK,cACL,IAAK,gBACL,IAAK,cACL,IAAK,WACL,IAAK,MACL,IAAK,YACL,IAAK,aACL,IAAK,qBACL,IAAK,mBACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,QACL,IAAK,QACL,IAAK,UACL,IAAK,QACL,IAAK,SACL,IAAK,OACL,IAAK,SACL,IAAK,UACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,aACL,IAAK,cACL,IAAK,YACL,IAAK,SACL,IAAK,UACL,IAAK,QACL,IAAK,YACL,IAAK,YACL,IAAK,aACL,IAAK,SACL,IAAK,WACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,MACL,IAAK,OACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,OACL,IAAK,OACL,IAAK,WACL,IAAK,WACL,IAAK,UACL,IAAK,WACL,IAAK,OACL,IAAK,YACL,IAAK,YACL,IAAK,UACL,IAAK,aACL,IAAK,aACL,IAAK,QACL,IAAK,QACL,IAAK,WACL,IAAK,WACL,IAAK,UACL,IAAK,SACL,IAAK,WACL,IAAK,UACL,IAAK,QACL,IAAK,UACL,IAAK,WACL,IAAK,YACL,IAAK,WACL,IAAK,aACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,WACL,IAAK,YACL,IAAK,YACL,IAAK,YACL,IAAK,YACL,IAAK,YACL,IAAK,cACL,IAAK,UACL,IAAK,YACL,IAAK,WACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,WACL,IAAK,UACL,IAAK,cACL,IAAK,MACL,IAAK,cACL,IAAK,MACL,IAAK,aACL,IAAK,gBACL,IAAK,UACL,IAAK,eACL,IAAK,UACL,IAAK,WACL,IAAK,SACL,IAAK,YACL,IAAK,YACP,EACI,SAAW,CACb,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,IAAK,EACL,I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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,71,72,73,74,75,76,77,110,115]}